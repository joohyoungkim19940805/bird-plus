<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default_layout}">
	<div layout:fragment="content">
		<script type="text/javascript" th:inline="javascript">/*<![CDATA[*/
    		let email = /*[[${email}]]*/
			fetch('/account-verify', {
    			method: 'POST',
    			headers: {
    				'Content-Type': 'application/json'
    			},
    			body: JSON.stringify({
    				email
    			})
    		}).then(response => {
    			if( ! response.ok){
    				throw new Error();
    			}
    			return response.json();
    		}).then(result => {
    			if(result.code == 0){
    				alert(result.message);
    				self.close();
    			}
    		}).catch(err=>{
    			console.err(err);
    			if(err.message){
    				alert(err.message);
    				self.close();
    			}
    		});
   		/*]]>*/</script>
	</div>
