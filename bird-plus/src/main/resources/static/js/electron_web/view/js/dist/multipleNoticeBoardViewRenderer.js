(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function n(e,t){return function(){return e.apply(t,arguments)}}e.r(t),e.d(t,{hasBrowserEnv:()=>te,hasStandardBrowserEnv:()=>ne,hasStandardBrowserWebWorkerEnv:()=>se});const{toString:o}=Object.prototype,{getPrototypeOf:s}=Object,i=(r=Object.create(null),e=>{const t=o.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())});var r;const a=e=>(e=e.toLowerCase(),t=>i(t)===e),l=e=>t=>typeof t===e,{isArray:c}=Array,d=l("undefined");const h=a("ArrayBuffer");const u=l("string"),p=l("function"),m=l("number"),g=e=>null!==e&&"object"==typeof e,f=e=>{if("object"!==i(e))return!1;const t=s(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},y=a("Date"),b=a("File"),w=a("Blob"),v=a("FileList"),E=a("URLSearchParams");function C(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let o,s;if("object"!=typeof e&&(e=[e]),c(e))for(o=0,s=e.length;o<s;o++)t.call(null,e[o],o,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),i=s.length;let r;for(o=0;o<i;o++)r=s[o],t.call(null,e[r],r,e)}}function x(e,t){t=t.toLowerCase();const n=Object.keys(e);let o,s=n.length;for(;s-- >0;)if(o=n[s],t===o.toLowerCase())return o;return null}const S="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,k=e=>!d(e)&&e!==S;const O=(L="undefined"!=typeof Uint8Array&&s(Uint8Array),e=>L&&e instanceof L);var L;const _=a("HTMLFormElement"),N=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),B=a("RegExp"),T=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),o={};C(n,((n,s)=>{let i;!1!==(i=t(n,s,e))&&(o[s]=i||n)})),Object.defineProperties(e,o)},P="abcdefghijklmnopqrstuvwxyz",I="0123456789",R={DIGIT:I,ALPHA:P,ALPHA_DIGIT:P+P.toUpperCase()+I};const A=a("AsyncFunction"),j={isArray:c,isArrayBuffer:h,isBuffer:function(e){return null!==e&&!d(e)&&null!==e.constructor&&!d(e.constructor)&&p(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||p(e.append)&&("formdata"===(t=i(e))||"object"===t&&p(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&h(e.buffer),t},isString:u,isNumber:m,isBoolean:e=>!0===e||!1===e,isObject:g,isPlainObject:f,isUndefined:d,isDate:y,isFile:b,isBlob:w,isRegExp:B,isFunction:p,isStream:e=>g(e)&&p(e.pipe),isURLSearchParams:E,isTypedArray:O,isFileList:v,forEach:C,merge:function e(){const{caseless:t}=k(this)&&this||{},n={},o=(o,s)=>{const i=t&&x(n,s)||s;f(n[i])&&f(o)?n[i]=e(n[i],o):f(o)?n[i]=e({},o):c(o)?n[i]=o.slice():n[i]=o};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&C(arguments[e],o);return n},extend:(e,t,o,{allOwnKeys:s}={})=>(C(t,((t,s)=>{o&&p(t)?e[s]=n(t,o):e[s]=t}),{allOwnKeys:s}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,o)=>{let i,r,a;const l={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),r=i.length;r-- >0;)a=i[r],o&&!o(a,e,t)||l[a]||(t[a]=e[a],l[a]=!0);e=!1!==n&&s(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:i,kindOfTest:a,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const o=e.indexOf(t,n);return-1!==o&&o===n},toArray:e=>{if(!e)return null;if(c(e))return e;let t=e.length;if(!m(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=n.next())&&!o.done;){const n=o.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const o=[];for(;null!==(n=e.exec(t));)o.push(n);return o},isHTMLForm:_,hasOwnProperty:N,hasOwnProp:N,reduceDescriptors:T,freezeMethods:e=>{T(e,((t,n)=>{if(p(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const o=e[n];p(o)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},o=e=>{e.forEach((e=>{n[e]=!0}))};return c(e)?o(e):o(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:x,global:S,isContextDefined:k,ALPHABET:R,generateString:(e=16,t=R.ALPHA_DIGIT)=>{let n="";const{length:o}=t;for(;e--;)n+=t[Math.random()*o|0];return n},isSpecCompliantForm:function(e){return!!(e&&p(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,o)=>{if(g(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[o]=e;const s=c(e)?[]:{};return C(e,((e,t)=>{const i=n(e,o+1);!d(i)&&(s[t]=i)})),t[o]=void 0,s}}return e};return n(e,0)},isAsyncFn:A,isThenable:e=>e&&(g(e)||p(e))&&p(e.then)&&p(e.catch)};function M(e,t,n,o,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),s&&(this.response=s)}j.inherits(M,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:j.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const D=M.prototype,H={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{H[e]={value:e}})),Object.defineProperties(M,H),Object.defineProperty(D,"isAxiosError",{value:!0}),M.from=(e,t,n,o,s,i)=>{const r=Object.create(D);return j.toFlatObject(e,r,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),M.call(r,e.message,t,n,o,s),r.cause=e,r.name=e.name,i&&Object.assign(r,i),r};const z=M;function $(e){return j.isPlainObject(e)||j.isArray(e)}function F(e){return j.endsWith(e,"[]")?e.slice(0,-2):e}function U(e,t,n){return e?e.concat(t).map((function(e,t){return e=F(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const W=j.toFlatObject(j,{},null,(function(e){return/^is[A-Z]/.test(e)}));const q=function(e,t,n){if(!j.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const o=(n=j.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!j.isUndefined(t[e])}))).metaTokens,s=n.visitor||c,i=n.dots,r=n.indexes,a=(n.Blob||"undefined"!=typeof Blob&&Blob)&&j.isSpecCompliantForm(t);if(!j.isFunction(s))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(j.isDate(e))return e.toISOString();if(!a&&j.isBlob(e))throw new z("Blob is not supported. Use a Buffer instead.");return j.isArrayBuffer(e)||j.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,s){let a=e;if(e&&!s&&"object"==typeof e)if(j.endsWith(n,"{}"))n=o?n:n.slice(0,-2),e=JSON.stringify(e);else if(j.isArray(e)&&function(e){return j.isArray(e)&&!e.some($)}(e)||(j.isFileList(e)||j.endsWith(n,"[]"))&&(a=j.toArray(e)))return n=F(n),a.forEach((function(e,o){!j.isUndefined(e)&&null!==e&&t.append(!0===r?U([n],o,i):null===r?n:n+"[]",l(e))})),!1;return!!$(e)||(t.append(U(s,n,i),l(e)),!1)}const d=[],h=Object.assign(W,{defaultVisitor:c,convertValue:l,isVisitable:$});if(!j.isObject(e))throw new TypeError("data must be an object");return function e(n,o){if(!j.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+o.join("."));d.push(n),j.forEach(n,(function(n,i){!0===(!(j.isUndefined(n)||null===n)&&s.call(t,n,j.isString(i)?i.trim():i,o,h))&&e(n,o?o.concat(i):[i])})),d.pop()}}(e),t};function J(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function V(e,t){this._pairs=[],e&&q(e,this,t)}const K=V.prototype;K.append=function(e,t){this._pairs.push([e,t])},K.toString=function(e){const t=e?function(t){return e.call(this,t,J)}:J;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const X=V;function G(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Y(e,t,n){if(!t)return e;const o=n&&n.encode||G,s=n&&n.serialize;let i;if(i=s?s(t,n):j.isURLSearchParams(t)?t.toString():new X(t,n).toString(o),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}const Z=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){j.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Q={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ee={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:X,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},te="undefined"!=typeof window&&"undefined"!=typeof document,ne=(oe="undefined"!=typeof navigator&&navigator.product,te&&["ReactNative","NativeScript","NS"].indexOf(oe)<0);var oe;const se="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,ie={...t,...ee};const re=function(e){function t(e,n,o,s){let i=e[s++];const r=Number.isFinite(+i),a=s>=e.length;if(i=!i&&j.isArray(o)?o.length:i,a)return j.hasOwnProp(o,i)?o[i]=[o[i],n]:o[i]=n,!r;o[i]&&j.isObject(o[i])||(o[i]=[]);return t(e,n,o[i],s)&&j.isArray(o[i])&&(o[i]=function(e){const t={},n=Object.keys(e);let o;const s=n.length;let i;for(o=0;o<s;o++)i=n[o],t[i]=e[i];return t}(o[i])),!r}if(j.isFormData(e)&&j.isFunction(e.entries)){const n={};return j.forEachEntry(e,((e,o)=>{t(function(e){return j.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),o,n,0)})),n}return null};const ae={transitional:Q,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",o=n.indexOf("application/json")>-1,s=j.isObject(e);s&&j.isHTMLForm(e)&&(e=new FormData(e));if(j.isFormData(e))return o&&o?JSON.stringify(re(e)):e;if(j.isArrayBuffer(e)||j.isBuffer(e)||j.isStream(e)||j.isFile(e)||j.isBlob(e))return e;if(j.isArrayBufferView(e))return e.buffer;if(j.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return q(e,new ie.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,o){return ie.isNode&&j.isBuffer(e)?(this.append(t,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=j.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return q(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||o?(t.setContentType("application/json",!1),function(e,t,n){if(j.isString(e))try{return(t||JSON.parse)(e),j.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||ae.transitional,n=t&&t.forcedJSONParsing,o="json"===this.responseType;if(e&&j.isString(e)&&(n&&!this.responseType||o)){const n=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw z.from(e,z.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ie.classes.FormData,Blob:ie.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};j.forEach(["delete","get","head","post","put","patch"],(e=>{ae.headers[e]={}}));const le=ae,ce=j.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),de=Symbol("internals");function he(e){return e&&String(e).trim().toLowerCase()}function ue(e){return!1===e||null==e?e:j.isArray(e)?e.map(ue):String(e)}function pe(e,t,n,o,s){return j.isFunction(o)?o.call(this,t,n):(s&&(t=n),j.isString(t)?j.isString(o)?-1!==t.indexOf(o):j.isRegExp(o)?o.test(t):void 0:void 0)}class me{constructor(e){e&&this.set(e)}set(e,t,n){const o=this;function s(e,t,n){const s=he(t);if(!s)throw new Error("header name must be a non-empty string");const i=j.findKey(o,s);(!i||void 0===o[i]||!0===n||void 0===n&&!1!==o[i])&&(o[i||t]=ue(e))}const i=(e,t)=>j.forEach(e,((e,n)=>s(e,n,t)));return j.isPlainObject(e)||e instanceof this.constructor?i(e,t):j.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?i((e=>{const t={};let n,o,s;return e&&e.split("\n").forEach((function(e){s=e.indexOf(":"),n=e.substring(0,s).trim().toLowerCase(),o=e.substring(s+1).trim(),!n||t[n]&&ce[n]||("set-cookie"===n?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)})),t})(e),t):null!=e&&s(t,e,n),this}get(e,t){if(e=he(e)){const n=j.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(e);)t[o[1]]=o[2];return t}(e);if(j.isFunction(t))return t.call(this,e,n);if(j.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=he(e)){const n=j.findKey(this,e);return!(!n||void 0===this[n]||t&&!pe(0,this[n],n,t))}return!1}delete(e,t){const n=this;let o=!1;function s(e){if(e=he(e)){const s=j.findKey(n,e);!s||t&&!pe(0,n[s],s,t)||(delete n[s],o=!0)}}return j.isArray(e)?e.forEach(s):s(e),o}clear(e){const t=Object.keys(this);let n=t.length,o=!1;for(;n--;){const s=t[n];e&&!pe(0,this[s],s,e,!0)||(delete this[s],o=!0)}return o}normalize(e){const t=this,n={};return j.forEach(this,((o,s)=>{const i=j.findKey(n,s);if(i)return t[i]=ue(o),void delete t[s];const r=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(s):String(s).trim();r!==s&&delete t[s],t[r]=ue(o),n[r]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return j.forEach(this,((n,o)=>{null!=n&&!1!==n&&(t[o]=e&&j.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[de]=this[de]={accessors:{}}).accessors,n=this.prototype;function o(e){const o=he(e);t[o]||(!function(e,t){const n=j.toCamelCase(" "+t);["get","set","has"].forEach((o=>{Object.defineProperty(e,o+n,{value:function(e,n,s){return this[o].call(this,t,e,n,s)},configurable:!0})}))}(n,e),t[o]=!0)}return j.isArray(e)?e.forEach(o):o(e),this}}me.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),j.reduceDescriptors(me.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),j.freezeMethods(me);const ge=me;function fe(e,t){const n=this||le,o=t||n,s=ge.from(o.headers);let i=o.data;return j.forEach(e,(function(e){i=e.call(n,i,s.normalize(),t?t.status:void 0)})),s.normalize(),i}function ye(e){return!(!e||!e.__CANCEL__)}function be(e,t,n){z.call(this,null==e?"canceled":e,z.ERR_CANCELED,t,n),this.name="CanceledError"}j.inherits(be,z,{__CANCEL__:!0});const we=be;const ve=ie.hasStandardBrowserEnv?{write(e,t,n,o,s,i){const r=[e+"="+encodeURIComponent(t)];j.isNumber(n)&&r.push("expires="+new Date(n).toGMTString()),j.isString(o)&&r.push("path="+o),j.isString(s)&&r.push("domain="+s),!0===i&&r.push("secure"),document.cookie=r.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Ee(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Ce=ie.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function o(n){let o=n;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=o(window.location.href),function(e){const t=j.isString(e)?o(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};const xe=function(e,t){e=e||10;const n=new Array(e),o=new Array(e);let s,i=0,r=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=o[r];s||(s=l),n[i]=a,o[i]=l;let d=r,h=0;for(;d!==i;)h+=n[d++],d%=e;if(i=(i+1)%e,i===r&&(r=(r+1)%e),l-s<t)return;const u=c&&l-c;return u?Math.round(1e3*h/u):void 0}};function Se(e,t){let n=0;const o=xe(50,250);return s=>{const i=s.loaded,r=s.lengthComputable?s.total:void 0,a=i-n,l=o(a);n=i;const c={loaded:i,total:r,progress:r?i/r:void 0,bytes:a,rate:l||void 0,estimated:l&&r&&i<=r?(r-i)/l:void 0,event:s};c[t?"download":"upload"]=!0,e(c)}}const ke={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let o=e.data;const s=ge.from(e.headers).normalize();let i,r,{responseType:a,withXSRFToken:l}=e;function c(){e.cancelToken&&e.cancelToken.unsubscribe(i),e.signal&&e.signal.removeEventListener("abort",i)}if(j.isFormData(o))if(ie.hasStandardBrowserEnv||ie.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if(!1!==(r=s.getContentType())){const[e,...t]=r?r.split(";").map((e=>e.trim())).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}let d=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.set("Authorization","Basic "+btoa(t+":"+n))}const h=Ee(e.baseURL,e.url);function u(){if(!d)return;const o=ge.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders());!function(e,t,n){const o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(new z("Request failed with status code "+n.status,[z.ERR_BAD_REQUEST,z.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),c()}),(function(e){n(e),c()}),{data:a&&"text"!==a&&"json"!==a?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:o,config:e,request:d}),d=null}if(d.open(e.method.toUpperCase(),Y(h,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,"onloadend"in d?d.onloadend=u:d.onreadystatechange=function(){d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))&&setTimeout(u)},d.onabort=function(){d&&(n(new z("Request aborted",z.ECONNABORTED,e,d)),d=null)},d.onerror=function(){n(new z("Network Error",z.ERR_NETWORK,e,d)),d=null},d.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const o=e.transitional||Q;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new z(t,o.clarifyTimeoutError?z.ETIMEDOUT:z.ECONNABORTED,e,d)),d=null},ie.hasStandardBrowserEnv&&(l&&j.isFunction(l)&&(l=l(e)),l||!1!==l&&Ce(h))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&ve.read(e.xsrfCookieName);t&&s.set(e.xsrfHeaderName,t)}void 0===o&&s.setContentType(null),"setRequestHeader"in d&&j.forEach(s.toJSON(),(function(e,t){d.setRequestHeader(t,e)})),j.isUndefined(e.withCredentials)||(d.withCredentials=!!e.withCredentials),a&&"json"!==a&&(d.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&d.addEventListener("progress",Se(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",Se(e.onUploadProgress)),(e.cancelToken||e.signal)&&(i=t=>{d&&(n(!t||t.type?new we(null,e,d):t),d.abort(),d=null)},e.cancelToken&&e.cancelToken.subscribe(i),e.signal&&(e.signal.aborted?i():e.signal.addEventListener("abort",i)));const p=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(h);p&&-1===ie.protocols.indexOf(p)?n(new z("Unsupported protocol "+p+":",z.ERR_BAD_REQUEST,e)):d.send(o||null)}))}};j.forEach(ke,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const Oe=e=>`- ${e}`,Le=e=>j.isFunction(e)||null===e||!1===e,_e=e=>{e=j.isArray(e)?e:[e];const{length:t}=e;let n,o;const s={};for(let i=0;i<t;i++){let t;if(n=e[i],o=n,!Le(n)&&(o=ke[(t=String(n)).toLowerCase()],void 0===o))throw new z(`Unknown adapter '${t}'`);if(o)break;s[t||"#"+i]=o}if(!o){const e=Object.entries(s).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));let n=t?e.length>1?"since :\n"+e.map(Oe).join("\n"):" "+Oe(e[0]):"as no adapter specified";throw new z("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return o};function Ne(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new we(null,e)}function Be(e){Ne(e),e.headers=ge.from(e.headers),e.data=fe.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return _e(e.adapter||le.adapter)(e).then((function(t){return Ne(e),t.data=fe.call(e,e.transformResponse,t),t.headers=ge.from(t.headers),t}),(function(t){return ye(t)||(Ne(e),t&&t.response&&(t.response.data=fe.call(e,e.transformResponse,t.response),t.response.headers=ge.from(t.response.headers))),Promise.reject(t)}))}const Te=e=>e instanceof ge?e.toJSON():e;function Pe(e,t){t=t||{};const n={};function o(e,t,n){return j.isPlainObject(e)&&j.isPlainObject(t)?j.merge.call({caseless:n},e,t):j.isPlainObject(t)?j.merge({},t):j.isArray(t)?t.slice():t}function s(e,t,n){return j.isUndefined(t)?j.isUndefined(e)?void 0:o(void 0,e,n):o(e,t,n)}function i(e,t){if(!j.isUndefined(t))return o(void 0,t)}function r(e,t){return j.isUndefined(t)?j.isUndefined(e)?void 0:o(void 0,e):o(void 0,t)}function a(n,s,i){return i in t?o(n,s):i in e?o(void 0,n):void 0}const l={url:i,method:i,data:i,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,withXSRFToken:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:a,headers:(e,t)=>s(Te(e),Te(t),!0)};return j.forEach(Object.keys(Object.assign({},e,t)),(function(o){const i=l[o]||s,r=i(e[o],t[o],o);j.isUndefined(r)&&i!==a||(n[o]=r)})),n}const Ie="1.6.2",Re={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Re[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Ae={};Re.transitional=function(e,t,n){function o(e,t){return"[Axios v1.6.2] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,s,i)=>{if(!1===e)throw new z(o(s," has been removed"+(t?" in "+t:"")),z.ERR_DEPRECATED);return t&&!Ae[s]&&(Ae[s]=!0,console.warn(o(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,s,i)}};const je={assertOptions:function(e,t,n){if("object"!=typeof e)throw new z("options must be an object",z.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let s=o.length;for(;s-- >0;){const i=o[s],r=t[i];if(r){const t=e[i],n=void 0===t||r(t,i,e);if(!0!==n)throw new z("option "+i+" must be "+n,z.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new z("Unknown option "+i,z.ERR_BAD_OPTION)}},validators:Re},Me=je.validators;class De{constructor(e){this.defaults=e,this.interceptors={request:new Z,response:new Z}}request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Pe(this.defaults,t);const{transitional:n,paramsSerializer:o,headers:s}=t;void 0!==n&&je.assertOptions(n,{silentJSONParsing:Me.transitional(Me.boolean),forcedJSONParsing:Me.transitional(Me.boolean),clarifyTimeoutError:Me.transitional(Me.boolean)},!1),null!=o&&(j.isFunction(o)?t.paramsSerializer={serialize:o}:je.assertOptions(o,{encode:Me.function,serialize:Me.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=s&&j.merge(s.common,s[t.method]);s&&j.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete s[e]})),t.headers=ge.concat(i,s);const r=[];let a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let d,h=0;if(!a){const e=[Be.bind(this),void 0];for(e.unshift.apply(e,r),e.push.apply(e,l),d=e.length,c=Promise.resolve(t);h<d;)c=c.then(e[h++],e[h++]);return c}d=r.length;let u=t;for(h=0;h<d;){const e=r[h++],t=r[h++];try{u=e(u)}catch(e){t.call(this,e);break}}try{c=Be.call(this,u)}catch(e){return Promise.reject(e)}for(h=0,d=l.length;h<d;)c=c.then(l[h++],l[h++]);return c}getUri(e){return Y(Ee((e=Pe(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}j.forEach(["delete","get","head","options"],(function(e){De.prototype[e]=function(t,n){return this.request(Pe(n||{},{method:e,url:t,data:(n||{}).data}))}})),j.forEach(["post","put","patch"],(function(e){function t(t){return function(n,o,s){return this.request(Pe(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:o}))}}De.prototype[e]=t(),De.prototype[e+"Form"]=t(!0)}));const He=De;class ze{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const o=new Promise((e=>{n.subscribe(e),t=e})).then(e);return o.cancel=function(){n.unsubscribe(t)},o},e((function(e,o,s){n.reason||(n.reason=new we(e,o,s),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new ze((function(t){e=t})),cancel:e}}}const $e=ze;const Fe={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Fe).forEach((([e,t])=>{Fe[t]=e}));const Ue=Fe;const We=function e(t){const o=new He(t),s=n(He.prototype.request,o);return j.extend(s,He.prototype,o,{allOwnKeys:!0}),j.extend(s,o,null,{allOwnKeys:!0}),s.create=function(n){return e(Pe(t,n))},s}(le);We.Axios=He,We.CanceledError=we,We.CancelToken=$e,We.isCancel=ye,We.VERSION=Ie,We.toFormData=q,We.AxiosError=z,We.Cancel=We.CanceledError,We.all=function(e){return Promise.all(e)},We.spread=function(e){return function(t){return e.apply(null,t)}},We.isAxiosError=function(e){return j.isObject(e)&&!0===e.isAxiosError},We.mergeConfig=Pe,We.AxiosHeaders=ge,We.formToJSON=e=>re(j.isHTMLForm(e)?new FormData(e):e),We.getAdapter=_e,We.HttpStatusCode=Ue,We.default=We;const qe=We,Je=console,Ve="localhost"==window.location.host;top.__isLocal=Ve;const Ke=new class{#e;constructor(){}async isLogin(e=(()=>{})){return this.#e?Promise.resolve(e(this.#e)):qe.get("/api/account/search/is-login",{headers:{"Content-Type":"application/json"}}).catch((e=>e.response)).then((t=>this.responseIsOk(t)?(0==t.data.code?t.isLogin=!0:(100==t.data.code||105==t.data.code||106==t.data.code||t.data.code,t.isLogin=!1),t.isLogin?(this.#e=t,setTimeout((()=>{this.#e=void 0}),6e4)):qe.defaults.headers.common.Authorization="",e(t)):e({isLogin:!1,status:t?.status,statusText:t?.statusText})))}responseIsOk({status:e}={}){return!!e&&("200"==e||"201"==e)}responseCheck(e){let t=e.status,{code:n,data:o}=e.data;if("200"==t||"201"==t)return e;throw Je.error(e),new Error(e.message)}resetLoginRemeber(){this.#e=void 0}},Xe=console;const Ge=new class{constructor(){}loginProcessing(e){return e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),qe.post("/login-processing",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then((e=>Ke.responseIsOk(e)&&"Window"==top.constructor.name?e.data:e)).catch((e=>(Xe.error("loginProcessing error : ",e.message),qe.defaults.headers.common.Authorization="",console.log(e),e.response?e.response.data:e.message)))}getAccountInfo(){return Ke.isLogin((e=>e.isLogin?qe.get("/api/account/search/get-account-info",{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(Xe.error("IPC getAccountInfo error : ",JSON.stringify(e)),e.response?e.response.data:e.message))):{isLogin:!1}))}updateSimpleAccountInfo(e={}){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),qe.post("/api/account/update/simple-account-info",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(Xe.error("IPC createPermitWokrspaceInAccount error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))):{isLogin:!1})).catch((e=>{Xe.error("error ::: ",e.message),Xe.error("error stack :::",e.stack)}))}},Ye=console;const Ze=new class{constructor(){}generateSecurityPutObjectPresignedUrl(e){return Ke.isLogin((t=>(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),t.isLogin?qe.post("/api/generate-presigned-url/create/security",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(Ye.error("IPC sendChatting error",e),e.response.data))):{isLogin:!1}))).catch((e=>{Ye.error("sendChatting login error ::: ",e.message),Ye.error("sendChatting login error stack ::: ",e.stack)}))}generateSecurityGetObjectPresignedUrl(e){return Ke.isLogin((t=>(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),t.isLogin?qe.post("/api/generate-presigned-url/search/security",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(Ye.error("IPC sendChatting error",e),e.response.data))):{isLogin:!1}))).catch((e=>{Ye.error("sendChatting login error ::: ",e.message),Ye.error("sendChatting login error stack ::: ",e.stack)}))}generateGetObjectPresignedUrl(e){return Ke.isLogin((t=>(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),t.isLogin?qe.post("/api/generate-presigned-url/create/",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(Ye.error("IPC sendChatting error",e),e.response.data))):{isLogin:!1}))).catch((e=>{Ye.error("sendChatting login error ::: ",e.message),Ye.error("sendChatting login error stack ::: ",e.stack)}))}},Qe=console;const et=new class{constructor(){}sendChatting(e){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),qe.post("/api/chatting/create/send-chatting",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(Qe.error("IPC sendChatting error",e),e.response.data)))):{isLogin:!1})).catch((e=>{Qe.error("sendChatting login error ::: ",e.message),Qe.error("sendChatting login error stack ::: ",e.stack)}))}deleteChatting(e){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),qe.post("/api/chatting/delete/",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(Qe.error("IPC sendChatting error",e),e.response.data)))):{isLogin:!1})).catch((e=>{Qe.error("sendChatting login error ::: ",e.message),Qe.error("sendChatting login error stack ::: ",e.stack)}))}searchChattingList(e){return Ke.isLogin((t=>{if(t.isLogin){let{workspaceId:t,roomId:n}=e,o=Object.entries(e).filter((([e,t])=>null!=t&&""!=t&&"workspaceId"!=e&&"roomId"!=e)).map((([e,t])=>`${e}=${t}`)).join("&");return qe.get(`/api/chatting/search/chatting-list/${t}/${n}?${o}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(Qe.error("IPC searchChatting error",e),e.response.data)))}return{isLogin:!1}})).catch((e=>{Qe.error("searchChatting login error ::: ",e.message),Qe.error("searchChatting login error stack ::: ",e.stack)}))}},tt=console;const nt=new class{constructor(){}createEmotionReaction(e={}){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),qe.post("/api/emoticon/create/reaction",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(tt.error("IPC createEmotion error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))):{isLogin:!1})).catch((e=>{tt.error("error ::: ",e.message),tt.error("error stack :::",e.stack)}))}deleteEmotion(e={}){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),qe.post("/api/emoticon/delete/",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(tt.error("IPC deleteEmotion error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))):{isLogin:!1})).catch((e=>{tt.error("error ::: ",e.message),tt.error("error stack :::",e.stack)}))}getIsReaction(e={}){return Ke.isLogin((t=>{if(t.isLogin){let{workspaceId:t}=e,n=Object.entries(e).filter((([e,t])=>null!=t&&""!=t&&"workspaceId"!=e)).map((([e,t])=>t instanceof Array?t=t.map((t=>`${e}=${t}`)).join("&"):`${e}=${t}`)).join("&");return qe.get(`/api/emoticon/search/is-reaction?${n}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(tt.error("IPC searchMyJoinedRoomList error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))}return{isLogin:!1}})).catch((e=>{tt.error("error ::: ",e.message),tt.error("error stack :::",e.stack)}))}},ot=console;const st=new class{source;prevWorkspaceId;#t;constructor(){}initWorkspaceStream(e,t,n){let{workspaceId:o}=e;t||(t=top?.EventSource),this.source&&this.source.close(),this.prevWorkspaceId=o,this.source=new t(`/api/event-stream/workspace/${o}`,{headers:{Authorization:qe.defaults.headers.common.Authorization},withCredentials:!top.__isLocal}),this.source.onmessage=e=>{let{data:t,lastEventId:o,origin:s,type:i}=e;t=JSON.parse(t),ot.debug("event stream data ::: ",t);let r=t.serverSentStreamType.split("_").map(((e,t)=>0==t?e.toLowerCase():e.charAt(0)+e.substring(1).toLowerCase())).join("");ot.debug("on message: ",e.data,"eventName ::",r),this[r]?this[r](r,t):n.webEventSend?n.webEventSend(r,t):n.send(r,t)},this.source.onerror=o=>{ot.error("on stream err: ",o),this.source.close(),setTimeout((()=>{this.initWorkspaceStream(e,t,n)}),500)},this.source.onopen=e=>{ot.debug("on success: ",e)}}#n(e,t){}#o(){this.source.close()}},it=console;const rt=new class{constructor(){}createNoticeBoardGroup(e={}){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),qe.post("/api/notice-board/create/group",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(it.error("IPC createNoticeBoardGroup error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))):{isLogin:!1})).catch((e=>{it.error("error ::: ",e.message),it.error("error stack :::",e.stack)}))}createNoticeBoard(e={}){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),qe.post("/api/notice-board/create/",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(it.error("IPC createNoticeBoard error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))):{isLogin:!1})).catch((e=>{it.error("error ::: ",e.message),it.error("error stack :::",e.stack)}))}createNoticeBoardDetail(e={}){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),qe.post("/api/notice-board/create/detail",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(it.error("IPC createNoticeBoardDetail error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))):{isLogin:!1})).catch((e=>{it.error("error ::: ",e.message),it.error("error stack :::",e.stack)}))}searchNoticeBoardList(e={},t,n){return t||(t=top?.EventSource),Ke.isLogin((o=>{if(o.isLogin){let{workspaceId:o,roomId:s}=e,i=Object.entries(e).filter((([e,t])=>null!=t&&""!=t&&"workspaceId"!=e&&"roomId"!=e)).map((([e,t])=>`${e}=${t}`)).join("&");return new Promise((e=>{let r=new t(`/api/notice-board/search/notice-board-list/${o}/${s}?${i}`,{headers:{Authorization:qe.defaults.headers.common.Authorization},withCredentials:!top.__isLocal});r.onmessage=e=>{let{data:t,lastEventId:o,origin:s,type:i}=e;t=JSON.parse(t),n.webEventSend?n.webEventSend("noticeBoardAccept",t):n.send("noticeBoardAccept",t)},r.onerror=t=>{r.close(),e("done")}}))}return{isLogin:!1}})).catch((e=>{it.error("error ::: ",e.message),it.error("error stack :::",e.stack)}))}searchNoticeBoardDetailList(e={},t,n){return t||(t=top?.EventSource),Ke.isLogin((o=>{if(o.isLogin){let{workspaceId:o,roomId:s,noticeBoardId:i}=e;if(!i)return;let r=Object.entries(e).filter((([e,t])=>null!=t&&""!=t&&"workspaceId"!=e&&"roomId"!=e&&"noticeBoardId"!=e)).map((([e,t])=>`${e}=${t}`)).join("&");return new Promise((e=>{let a=new t(`/api/notice-board/search/notice-board-detail-list/${o}/${s}/${i}?${r}`,{headers:{Authorization:qe.defaults.headers.common.Authorization},withCredentials:!top.__isLocal});a.onmessage=e=>{let{data:t,lastEventId:o,origin:s,type:i}=e;t=JSON.parse(t),n.webEventSend?n.webEventSend("noticeBoardDetailAccept",t):n.send("noticeBoardDetailAccept",t)},a.onerror=t=>{console.log("searchNoticeBoardDetailList error :::: ",t),a.close(),e("done")}}))}return{isLogin:!1}})).catch((e=>{it.error("error ::: ",e.message),it.error("error stack :::",e.stack)}))}deleteNoticeBoard(e={}){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),console.log("delete param",e),qe.post("/api/notice-board/delete/",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(it.error("IPC deleteNoticeBoard error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))):{isLogin:!1})).catch((e=>{it.error("error ::: ",e.message),it.error("error stack :::",e.stack)}))}deleteNoticeBoardGroup(e={}){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),qe.post("/api/notice-board/delete/group",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(it.error("IPC deleteNoticeBoardGroup error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))):{isLogin:!1})).catch((e=>{it.error("error ::: ",e.message),it.error("error stack :::",e.stack)}))}updateNoticeBoardOrder(e=[]){return Ke.isLogin((t=>t.isLogin?(console.log("update param",e),qe.post("/api/notice-board/update/order",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(it.error("IPC updateNoticeBoardOrder error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))):{isLogin:!1})).catch((e=>{it.error("error ::: ",e.message),it.error("error stack :::",e.stack)}))}updateNoticeBoardDetailOrder(e=[]){return Ke.isLogin((t=>t.isLogin?qe.post("/api/notice-board/update/detail-order",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(it.error("IPC updateNoticeBoardDetailOrder error : ",JSON.stringify(e)),e.response?e.response.data:e.message))):{isLogin:!1})).catch((e=>{it.error("error ::: ",e.message),it.error("error stack :::",e.stack)}))}},at=console;const lt=new class{constructor(){}createRoom(e={}){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),qe.post("/api/room/create/",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(at.error("IPC createRoom error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))):{isLogin:!1})).catch((e=>{at.error("error ::: ",e.message),at.error("error stack :::",e.stack)}))}createMySelfRoom(e={}){if(e.workspaceId&&!isNaN(parseInt(e.workspaceId)))return Ke.isLogin((t=>t.isLogin?qe.post(`/api/room/create/my-self-room/${e.workspaceId}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(at.error("IPC createMySelfRoom error : ",JSON.stringify(e)),e.response?e.response.data:e.message))):{isLogin:!1})).catch((e=>{at.error("error ::: ",e.message),at.error("error stack :::",e.stack)}));at.error(`createMySelfRoom workspaceId is ::: ${e.workspaceId}`)}createRoomInAccount(e=[]){return Ke.isLogin((t=>t.isLogin?qe.post("/api/room/create/in-account",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).then((e=>(at.debug("createRoomInAccount ::: ",e),e))).catch((e=>(at.error("IPC createRoomInAccount error : ",JSON.stringify(e)),e.response?e.response.data:e.message))):{isLogin:!1})).catch((e=>{at.error("error ::: ",e.message),at.error("error stack :::",e.stack)}))}updateRoomInAccoutOrder(e=[]){return Ke.isLogin((t=>t.isLogin?qe.post("/api/room/update/order",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(at.error("IPC updateRoomInAccoutOrder error : ",JSON.stringify(e)),e.response?e.response.data:e.message))):{isLogin:!1})).catch((e=>{at.error("error ::: ",e.message),at.error("error stack :::",e.stack)}))}createRoomFavorites(e){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),qe.post("/api/room/create/favorites",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(at.error("IPC createRoomFavorites error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))):{isLogin:!1})).catch((e=>{at.error("error ::: ",e.message),at.error("error stack :::",e.stack)}))}updateRoomFavorites(e=[]){return Ke.isLogin((t=>t.isLogin?qe.post("/api/room/update/favorites-order",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(at.error("IPC createRoom error : ",JSON.stringify(e)),e.response?e.response.data:e.message))):{isLogin:!1})).catch((e=>{at.error("error ::: ",e.message),at.error("error stack :::",e.stack)}))}searchRoomList(e={}){return Ke.isLogin((t=>{if(t.isLogin){let{roomId:t}=e,n=Object.entries(e).filter((([e,t])=>null!=t&&""!=t&&"roomId"!=e)).map((([e,t])=>`${e}=${t}`)).join("&");return qe.get(`/api/room/search/list/${t}?${n}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(at.error("IPC searchRoom error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))}return{isLogin:!1}})).catch((e=>{at.error("error ::: ",e.message),at.error("error stack :::",e.stack)}))}searchMyJoinedRoomList(e={}){return Ke.isLogin((t=>{if(t.isLogin){let{workspaceId:t}=e,n=Object.entries(e).filter((([e,t])=>null!=t&&""!=t&&"workspaceId"!=e)).map((([e,t])=>t instanceof Array?t=t.map((t=>`${e}=${t}`)).join("&"):`${e}=${t}`)).join("&");return qe.get(`/api/room/search/my-joined-list/${t}?${n}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(at.error("IPC searchMyJoinedRoomList error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))}return{isLogin:!1}})).catch((e=>{at.error("error ::: ",e.message),at.error("error stack :::",e.stack)}))}searchRoomFavoritesList(e={}){return Ke.isLogin((t=>{if(t.isLogin){let{workspaceId:t}=e,n=Object.entries(e).filter((([e,t])=>null!=t&&""!=t&&"workspaceId"!=e)).map((([e,t])=>t instanceof Array?t=t.map((t=>`${e}=${t}`)).join("&"):`${e}=${t}`)).join("&");return qe.get(`/api/room/search/favorites-list/${t}?${n}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(at.error("IPC searchMyJoinedRoomList error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))}return{isLogin:!1}})).catch((e=>{at.error("error ::: ",e.message),at.error("error stack :::",e.stack)}))}searchRoomJoinedAccountList(e={},t,n){if(e.roomId&&!isNaN(parseInt(e.roomId)))return t||(t=top?.EventSource),Ke.isLogin((o=>o.isLogin?new Promise((o=>{let s=new t(`/api/room/search/in-account-list/${e.roomId}`,{headers:{Authorization:qe.defaults.headers.common.Authorization},withCredentials:!top.__isLocal});s.onmessage=e=>{let{data:t,lastEventId:o,origin:s,type:i}=e;t=JSON.parse(t),n.webEventSend?n.webEventSend("roomInAccountAccept",t):n.send("roomInAccountAccept",t)},s.onerror=e=>{s.close(),o("done")}})):{isLogin:!1})).catch((e=>{at.error("error ::: ",e.message),at.error("error stack :::",e.stack)}));at.error(`searchRoomJoinedAccountList roomId is ::: ${e.roomId}`)}getRoomDetail(e={}){if(e.roomId&&!isNaN(parseInt(e.roomId)))return Ke.isLogin((t=>t.isLogin?qe.get(`/api/room/search/detail/${e.roomId}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)):{isLogin:!1}));at.error(`getRoomDetail roomId is ::: ${e.roomId}`)}isRoomFavorites(e={}){if(e.roomId&&!isNaN(parseInt(e.roomId)))return Ke.isLogin((t=>t.isLogin?qe.get(`/api/room/search/is-room-favorites/${e.roomId}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(at.error("IPC isRoomFavorites error : ",JSON.stringify(e)),e.response?e.response.data:e.message))):{isLogin:!1})).catch((e=>{at.error("error ::: ",e.message),at.error("error stack :::",e.stack)}));at.error(`isRoomFavorites roomId is ::: ${e.roomId}`)}isRoomOwner(e={}){if(e.roomId&&!isNaN(parseInt(e.roomId)))return Ke.isLogin((t=>t.isLogin?qe.get(`/api/room/search/is-owner/${e.roomId}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(at.error("IPC isRoomOwner error : ",JSON.stringify(e)),e.response?e.response.data:e.message))):{isLogin:!1})).catch((e=>{at.error("error ::: ",e.message),at.error("error stack :::",e.stack)}));at.error(`isRoomOwner roomId is ::: ${e.roomId}`)}isMyAttendRoom(e={}){if(e.roomId&&!isNaN(parseInt(e.roomId)))return Ke.isLogin((t=>t.isLogin?qe.get(`/api/room/search/is-my-attend/${e.roomId}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(at.error("IPC isMyAttendRoom error : ",JSON.stringify(e)),e.response?e.response.data:e.message))):{isLogin:!1})).catch((e=>{at.error("error ::: ",e.message),at.error("error stack :::",e.stack)}));at.error(`isMyAttendRoom roomId is ::: ${e.roomId}`)}roomInAccountOut(e={}){if(e.roomId&&!isNaN(parseInt(e.roomId))&&e.accountName)return Ke.isLogin((t=>t.isLogin?qe.delete(`/api/room/delete/out/${e.roomId}/${e.accountName}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(at.error("IPC roomInAccountOut error : ",JSON.stringify(e)),e.response?e.response.data:e.message))):{isLogin:!1})).catch((e=>{at.error("error ::: ",e.message),at.error("error stack :::",e.stack)}));at.error(`roomInAccountOut roomId is ::: ${e.roomId}`)}},ct=console;const dt=new class{constructor(){}searchWorkspaceMyJoined(e={}){return Ke.isLogin((t=>t.isLogin?qe.get(`/api/workspace/search/my-joined-list?page=${e.page}&size=${e.size}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>{if(ct.error("error : ",JSON.stringify(e)),e.response)return e.response.data.content||(e.response.data.content=[]),e.response.data})):{isLogin:!1})).catch((e=>{ct.error("error ::: ",e.message),ct.error("error stack :::",e.stack)}))}searchNameSpecificList(e={}){return Ke.isLogin((t=>t.isLogin?qe.get(`/api/workspace/search/name-specific-list?page=${e.page}&size=${e.size}&workspaceName=${e.workspaceName}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>{if(ct.error("error : ",JSON.stringify(e)),e.response)return e.response.data.content||(e.response.data.content=[]),e.response.data})):{isLogin:!1})).catch((e=>{ct.error("error ::: ",e.message),ct.error("error stack :::",e.stack)}))}searchWorkspaceInAccount(e={}){return Ke.isLogin((t=>{if(t.isLogin){let t=Object.entries(e).filter((([e,t])=>null!=t&&""!=t&&"workspaceId"!=e)).map((([e,t])=>`${e}=${t}`)).join("&");return qe.get(`/api/workspace/search/joined-account-list/${e.workspaceId}?${t}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(ct.error("IPC searchWorkspaceInAccount error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))}return{isLogin:!1}})).catch((e=>{ct.error("error ::: ",e.message),ct.error("error stack :::",e.stack)}))}getWorkspaceDetail(e={}){if(e.workspaceId&&!isNaN(parseInt(e.workspaceId)))return Ke.isLogin((t=>t.isLogin?qe.get(`/api/workspace/search/detail/${e.workspaceId}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data.data)):{isLogin:!1}));ct.error(`workspaceId is ::: ${e.workspaceId}`)}getWorkspaceInAccountCount(e={}){if(e.workspaceId&&!isNaN(parseInt(e.workspaceId)))return Ke.isLogin((t=>t.isLogin?qe.get(`/api/workspace/search/count/${e.workspaceId}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data.data)):{isLogin:!1}));ct.error(`workspaceId is ::: ${e.workspaceId}`)}createPermitWokrspaceInAccount(e={}){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),qe.post("/api/workspace/create/permit",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(ct.error("IPC createPermitWokrspaceInAccount error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))):{isLogin:!1})).catch((e=>{ct.error("error ::: ",e.message),ct.error("error stack :::",e.stack)}))}createGiveAdmin(e={}){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),qe.post("/api/workspace/create/give-admin",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(ct.error("IPC createPermitWokrspaceInAccount error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))):{isLogin:!1})).catch((e=>{ct.error("error ::: ",e.message),ct.error("error stack :::",e.stack)}))}searchPermitRequestList(e={},t,n){if(e.workspaceId&&!isNaN(parseInt(e.workspaceId)))return t||(t=top?.EventSource),Ke.isLogin((o=>o.isLogin?new Promise((o=>{let s=new t(`/api/workspace/search/permit-request-list/${e.workspaceId}`,{headers:{Authorization:qe.defaults.headers.common.Authorization},withCredentials:!top.__isLocal});s.onmessage=e=>{let{data:t,lastEventId:o,origin:s,type:i}=e;t=JSON.parse(t),n.webEventSend?n.webEventSend("workspacePermitRequestAccept",t):n.send("workspacePermitRequestAccept",t)},s.onerror=e=>{s.close(),o("done")}})):{isLogin:!1})).catch((e=>{ct.error("error ::: ",e.message),ct.error("error stack :::",e.stack)}));ct.error(`searchPermitRequestList workspaceId is ::: ${e.workspaceId}`)}getIsAdmin(e={}){return Ke.isLogin((t=>{if(t.isLogin){let t=Object.entries(e).filter((([e,t])=>null!=t&&""!=t&&"workspaceId"!=e)).map((([e,t])=>`${e}=${t}`)).join("&");return qe.get(`/api/workspace/search/is-admin/${e.workspaceId}?${t}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(ct.error("IPC getIsAdmin error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))}return{isLogin:!1}})).catch((e=>{ct.error("error ::: ",e.message),ct.error("error stack :::",e.stack)}))}createWorkspaceJoined(e={}){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),qe.post("/api/workspace/create/joined",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(ct.error("IPC createPermitWokrspaceInAccount error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))):{isLogin:!1})).catch((e=>{ct.error("error ::: ",e.message),ct.error("error stack :::",e.stack)}))}createWorkspace(e={}){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),qe.post("/api/workspace/create/",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(ct.error("IPC createWorkspace error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))):{isLogin:!1})).catch((e=>{ct.error("error ::: ",e.message),ct.error("error stack :::",e.stack)}))}};let ht;window.addEventListener("load",(()=>{Notification.requestPermission().then((e=>{console.log(e),ht=e})),ut.loadInitRoomId&&pt.webEventSend("roomChange",{roomId:ut.loadInitRoomId}),ut.loadInitNoticeBoardId&&pt.webEventSend("noticeBoardChange",{noticeBoardId:ut.loadInitNoticeBoardId})}));const ut=new class{#s;loadInitRoomId;loadInitNoticeBoardId;#i={};constructor(){let e=new URLSearchParams(location.search);this.#s=e.get("workspaceId"),this.loadInitRoomId=e.get("roomId"),this.loadInitNoticeBoardId=e.get("noticeBoardId"),this.#i=JSON.parse(localStorage.getItem("o"))?.reduce(((e,t)=>(e[t.OPTION_NAME]=t,e)),{})||{}}resetWorkspace(){this.#s=void 0}set workspaceId(e){this.#s!==e&&(this.#s=e,pt.webEventSend("workspaceChange",{workspaceId:this.workspaceId}))}get workspaceId(){return this.#s}setOption({name:e,value:t}){this.#i[e]?(this.#i[e].OPTION_VALUE=t,this.#i[e].UPDATE_AT=(new Date).getTime()):this.#i[e]={OPTION_NAME:e,OPTION_VALUE:t,CREATE_AT:(new Date).getTime(),UPDATE_AT:(new Date).getTime()},localStorage.setItem("o",JSON.stringify(Object.values(this.#i)))}getOption(e){return this.#i[e]}},pt=new class{#r={};#a={};#l={};constructor(){[Ge,Ze,et,nt,st,rt,lt,dt].flatMap((e=>Object.getOwnPropertyNames(Object.getPrototypeOf(e)).filter((e=>"constructor"!=e)).map((t=>[t,e])))).forEach((([e,t])=>{this.#r[e]=t,this.#a[e]=t}))}send(e,t){!this.#r[e]||!this.#r[e]instanceof Function||this.#r[e][e](t,void 0,pt)}invoke(e,t){if(this.#a[e]&&!(!this.#a[e]instanceof Function))return this.#a[e][e](t,void 0,pt)}webEventSend(e,t){!this.#l[e]||!this.#l[e]instanceof Function||this.#l[e](void 0,t)}on(e,t){this.#l[e]=t}},mt={objectEventListener:{},onEvent:{},on:(e,t)=>{mt.onEvent[e]=t,pt.on(e,((t,n)=>{mt.trigger(e,t,n)}))},addElectronEventListener:(e,t)=>{mt.objectEventListener.hasOwnProperty(e)?mt.objectEventListener[e].push({[t.name]:t}):mt.objectEventListener[e]=[{[t.name]:t}],pt.on(e,((t,n)=>{mt.trigger(e,t,n)}))},removeElectronEventListener:(e,t)=>{mt.objectEventListener.hasOwnProperty(e)&&(t?mt.objectEventListener[e]=mt.objectEventListener[e].filter((e=>!e.hasOwnProperty(t.name))):delete mt.objectEventListener[e])},trigger:(e,t,n)=>{new Promise((t=>{mt.objectEventListener.hasOwnProperty(e)?(mt.objectEventListener[e].forEach((async t=>{Object.values(t).forEach((async t=>{!t||!t instanceof Function||new Promise((o=>{try{t(n)}catch(t){throw console.error(`${e} error message ::: `,t.message),console.error(`${e} error stack ::: `,t.stack),new Error("")}o()}))}))})),t()):t()})),new Promise((t=>{if(!mt.onEvent[e]||!mt.onEvent[e]instanceof Function)t();else{try{mt.onEvent[e](n)}catch(t){console.error(`${e} error message ::: `,t.message),console.error(`${e} error stack ::: `,t.stack)}t()}}))}},gt={getProjectPath:async()=>`${location.origin}/`,createSubWindow:async e=>{let t=Object.entries(e).filter((([e,t])=>null!=t&&""!=t&&"pageName"!=e&&"pageId"!=e)).map((([e,t])=>`${e}=${t}`)).join("&");window.open(`/web/create-sub-window/${e.pageName}?${t}`,e.pageId)},closeRequest:async e=>{},maximizeRequest:async()=>{},unmaximizeRequest:async()=>{},minimizeRequest:async()=>{},restoreRequest:async()=>{},isMaximize:async()=>!1,resetWorkspaceId:async()=>{ut.resetWorkspace()},getWorkspaceId:async()=>ut.workspaceId,notifications:async e=>{let t=e.content.join("\n");if(t=t.substring(0,200)+(t.length>200?"...":""),"granted"==ht)gt.getProjectPath().then((n=>{let o=new Notification(e.fullName,{body:t,icon:n+"image/icon.icon"});o.onclick=()=>{ut.workspaceId!=e.workspaceId&&pt.webEventSend("workspaceChange",{workspaceId:e.workspaceId}),pt.webEventSend("roomChange",{roomId:e.roomId})},setTimeout((()=>{o.close()}),4e3)}));else{let t=Object.assign(document.createElement("div"),{innerHTML:`\n\t\t\t\t\t<h1>${e.fullName}</h1>\n\t\t\t\t\t<div>${e.content}</div>\n\t\t\t\t`});Object.assign(t.style,{position:"fixed",right:"2vw",bottom:"2vh",borderRadius:"15px",background:"#e1e1e1cf",width:"40%",height:"auto",zIndex:9999,whiteSpace:"break-spaces",overflowWrap:"anywhere",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",fontSize:"13px",paddingBottom:"5vh"}),t.onclick=()=>{ut.workspaceId!=e.workspaceId&&pt.webEventSend("workspaceChange",{workspaceId:e.workspaceId}),pt.webEventSend("roomChange",{roomId:e.roomId})},document.body.append(t),setTimeout((()=>{t.remove()}),4e3)}},getOption:async e=>ut.getOption(e),setOption:async e=>ut.setOption(e),isLogin:async()=>Ke.isLogin((e=>({isLogin:e.isLogin}))),getServerUrl:async()=>`${location.origin}`,logout:async()=>()=>{qe.defaults.headers.common.Authorization="",fetch("/logout",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{if(!e.ok)return console.error("response is not ok",e),void alert("로그아웃에 실패하였습니다.");gt.pageChange.changeWokrspacePage()}))},pageChange:{changeLoginPage:async()=>top.location.href="/web",changeWokrspacePage:async()=>top.location.href="/web",changeMainPage:async e=>top.location.href=`/web/main?workspaceId=${e.workspaceId}`},event:{electronEventTrigger:mt},stream:{initWorkspaceStream:async e=>pt.send("initWorkspaceStream",e)},account:{loginProcessing:async e=>pt.invoke("loginProcessing",e),getAccountInfo:async()=>pt.invoke("getAccountInfo"),updateSimpleAccountInfo:async e=>pt.invoke("updateSimpleAccountInfo",e)},chatting:{sendChatting:async e=>pt.invoke("sendChatting",e),deleteChatting:async e=>pt.invoke("deleteChatting",e),searchChattingList:async e=>pt.invoke("searchChattingList",e)},workspace:{searchWorkspaceMyJoined:async e=>pt.invoke("searchWorkspaceMyJoined",e),searchNameSpecificList:async e=>pt.invoke("searchNameSpecificList",e),searchWorkspaceInAccount:async e=>pt.invoke("searchWorkspaceInAccount",e),getWorkspaceDetail:async e=>pt.invoke("getWorkspaceDetail",e),createPermitWokrspaceInAccount:async e=>pt.invoke("createPermitWokrspaceInAccount",e),createGiveAdmin:async e=>pt.invoke("createGiveAdmin",e),searchPermitRequestList:async e=>pt.invoke("searchPermitRequestList",e),getIsAdmin:async e=>pt.invoke("getIsAdmin",e),createWorkspaceJoined:async e=>pt.invoke("createWorkspaceJoined",e),createWorkspace:async e=>pt.invoke("createWorkspace",e),getWorkspaceInAccountCount:async e=>pt.invoke("getWorkspaceInAccountCount",e)},room:{createRoom:async e=>pt.invoke("createRoom",e),createMySelfRoom:async e=>pt.invoke("createMySelfRoom",e),createRoomInAccount:async e=>pt.invoke("createRoomInAccount",e),createRoomFavorites:async e=>pt.invoke("createRoomFavorites",e),updateRoomInAccoutOrder:async e=>pt.invoke("updateRoomInAccoutOrder",e),updateRoomFavorites:async e=>pt.invoke("updateRoomFavorites",e),searchRoom:async e=>pt.invoke("searchRoom",e),searchMyJoinedRoomList:async e=>pt.invoke("searchMyJoinedRoomList",e),searchRoomFavoritesList:async e=>pt.invoke("searchRoomFavoritesList",e),searchRoomJoinedAccountList:async e=>pt.invoke("searchRoomJoinedAccountList",e),getRoomDetail:async e=>pt.invoke("getRoomDetail",e),isRoomFavorites:async e=>pt.invoke("isRoomFavorites",e),isRoomOwner:async e=>pt.invoke("isRoomOwner",e),isMyAttendRoom:async e=>pt.invoke("isMyAttendRoom",e),roomInAccountOut:async e=>pt.invoke("roomInAccountOut",e)},noticeBoard:{createNoticeBoard:async e=>pt.invoke("createNoticeBoard",e),createNoticeBoardGroup:async e=>pt.invoke("createNoticeBoardGroup",e),createNoticeBoardDetail:async e=>pt.invoke("createNoticeBoardDetail",e),deleteNoticeBoard:async e=>pt.invoke("deleteNoticeBoard",e),deleteNoticeBoardGroup:async e=>pt.invoke("deleteNoticeBoardGroup",e),updateNoticeBoardOrder:async e=>pt.invoke("updateNoticeBoardOrder",e),updateNoticeBoardDetailOrder:async e=>pt.invoke("updateNoticeBoardDetailOrder",e),searchNoticeBoardList:async e=>pt.invoke("searchNoticeBoardList",e),searchNoticeBoardDetailList:async e=>pt.invoke("searchNoticeBoardDetailList",e)},s3:{generateSecurityPutObjectPresignedUrl:async e=>pt.invoke("generateSecurityPutObjectPresignedUrl",e),generateSecurityGetObjectPresignedUrl:async e=>pt.invoke("generateSecurityGetObjectPresignedUrl",e),generateGetObjectPresignedUrl:async e=>pt.invoke("generateGetObjectPresignedUrl",e)},emoticon:{createEmotionReaction:async e=>pt.invoke("createEmotionReaction",e),getIsReaction:async e=>pt.invoke("getIsReaction",e)}};window.myAPI=gt,console.log("????????????????"),console.log(window.myAPI);const ft=new class{#c;#d=[];#h={};#u;#p;constructor(){}set addNoticeBoardIdChangeListener({name:e,callback:t,runTheFirst:n}){this.#h[e]=t,n&&this.#c&&t(this)}get addNoticeBoardIdChangeListener(){return this.#h}set noticeBoardId(e){if(!e)return void console.error("noticeBoardId is undefined");this.#d=[],this.#c=e;let t=Promise.all(Object.values(this.#h).map((async e=>new Promise((t=>{e(this),t()})))));this.#p?this.#p.then((()=>{t.then((()=>{this.#p=new Promise((e=>{this.#u=e}))}))})):this.#p=new Promise((e=>{this.#u=e,this.#u(t)}))}get noticeBoardId(){return this.#c}get noticeBoard(){return this.#d}removeNoticeBoardIdChangeListener(e){this.#h(e)}};class yt{#m;#g;#f=!0;#y;#b;#w=[];#v={};constructor(e){this.#b=e,document.addEventListener("selectionchange",(e=>{let t=window.getSelection();if(!document.activeElement.classList.contains("free-will-editor"))return;if("None"==t.type||!this.#y)return;let n=this.#w.find((e=>t.containsNode(e,!0)||t.containsNode(e,!1)));this.#y.dataset.tool_status=n?"connected":"blur"}))}isLastTool(e){if(this.#b.prototype.isPrototypeOf(e))return e===this.#w.at(-1);throw new Error(`tool is not my identity, this tool name is ${e.constructor.name}. but my identity name is ${this.#b.name}`)}set extendsElement(e){this.#m=e}get extendsElement(){return this.#m}set defaultClass(e){this.#g=e}get defaultClass(){return this.#g}set isInline(e){this.#f=e}get isInline(){return this.#f}set toolButton(e){if(!e||!e.nodeType||e.nodeType!=Node.ELEMENT_NODE)throw new Error("toolButton is not element");this.#y=e}get toolButton(){return this.#y}set connectedFriends(e){e.constructor!=this.#b&&new TypeError("is not my friend"),e.isConnected?this.#w.push(e):this.#w=this.#w.filter((e=>e.isConnected))}get connectedFriends(){return this.#w}}class bt extends HTMLElement{static globalMouseEvent=void 0;static lastClickElementPath=void 0;static globalClickEventPromiseResolve;static globalClickEventPromise=new Promise((e=>{this.globalClickEventPromiseResolve=e}));static globalKeydownEventPromiseResolve;static globalKeydownEventPromise=new Promise((e=>{this.globalKeydownEventPromiseResolve=e}));static globalSelectionChangeEventPromiseResolve;static globalSelectionChangeEventPromise=new Promise((e=>{this.globalSelectionChangeEventPromiseResolve=e}));static{document.addEventListener("mousemove",(e=>{this.globalMouseEvent=e})),document.addEventListener("mousedown",(e=>{this.lastClickElementPath=e.composedPath(),this.globalClickEventPromiseResolve(e),this.globalClickEventPromise=new Promise((e=>{this.globalClickEventPromiseResolve=e}))})),window.addEventListener("keydown",(e=>{this.globalKeydownEventPromiseResolve(e),this.globalKeydownEventPromise=new Promise((e=>{this.globalKeydownEventPromiseResolve=e}))})),document.addEventListener("selectionchange",(e=>{this.globalSelectionChangeEventPromiseResolve(e),this.globalSelectionChangeEventPromise=new Promise((e=>{this.globalSelectionChangeEventPromiseResolve=e}))}))}static isMouseInnerElement(e){if(!this.globalMouseEvent)return;let{clientX:t,clientY:n}=this.globalMouseEvent,{x:o,y:s,width:i,height:r}=e.getBoundingClientRect();return o+i>=t&&o<=t&&(s+r>=n&&s<=n)}static globalKeydownEventListener(e,t=(({oldEvent:e,newEvent:t})=>{})){let n,o;const s=()=>{this.globalKeydownEventPromise.then((e=>{o=e,t({oldEvent:n,newEvent:o}),n=e,s()}))};s()}static globalSelectionChangeEventListener(e,t=(({oldEvent:e,newEvent:t})=>{})){let n,o;const s=()=>{this.globalSelectionChangeEventPromise.then((e=>{o=e,t({oldEvent:n,newEvent:o}),n=e,s()}))};s()}static outClickElementListener(e,t=(({oldEvent:e,newEvent:t,isMouseOut:n=!1})=>{})){if(null==e||e?.nodeType!=Node.ELEMENT_NODE)throw new Error("element is not Element");let n,o;const s=()=>{this.globalClickEventPromise.then((i=>{let r=!this.isMouseInnerElement(e);o=i,t({oldEvent:n,newEvent:o,isMouseOut:r}),n=i,s()}))};s()}static isElement(e,t){let n=Object.getPrototypeOf(e),o=!1;for(;null!=n;){if(n?.constructor==t){o=!0;break}n=Object.getPrototypeOf(n)}return o}static processingElementPosition(e,t){let n;n=bt.isElement(t,HTMLElement)?t.getBoundingClientRect():t;let{x:o,y:s,height:i,width:r}=n,a=s-e.clientHeight,l=o-e.clientWidth;e.style.top=a>0?a+"px":s+i+"px",e.style.left=l>0?l+"px":o+r+"px"}static DeleteOption=class{static#E=class{value;constructor(e){this.value=e,Object.freeze(this)}};static EMPTY_CONTENT_IS_DELETE=new this.#E("empty_content_is_delete");static EMPTY_CONTENT_IS_NOT_DELETE=new this.#E("empty_content_is_not_delete");value;static{Object.freeze(this)}constructor(e){this.value=e,Object.freeze(this)}};#C=!1;Tool;#x=()=>{};#S=()=>{};#k=()=>{};#O=()=>{};#L=()=>{};#_;parentEditor;#N=new MutationObserver(((e,t)=>{e.forEach((e=>{let{addedNodes:t,removedNodes:n}=e;new Promise((e=>{if(0!=t.length){let e;if(this.constructor.toolHandler.isInline)e=t;else{let n;e=[...t].map(((e,o)=>{if(!e.classList?.contains(wt.toolHandler.defaultClass)){let s=this.parentEditor.createLine();return s.replaceChildren(e),this.append(s),o==t.length-1&&(n=o),s}return e}))}this.connectedChildAfterCallback(e)}e()})),new Promise((e=>{0!=n.length&&this.disconnectedChildAfterCallback(n),e()}))}))}));constructor(e,t,{deleteOption:n=bt.DeleteOption.EMPTY_CONTENT_IS_DELETE}={}){super(),this.#N.disconnect(),this.#N.observe(this,{childList:!0}),this.#_=n,this.Tool=e,this.classList.add(this.constructor.toolHandler.defaultClass),document.addEventListener("selectionchange",this.removeFun,!0),t&&Object.assign(this.dataset,t),bt.globalSelectionChangeEventListener(this,(({oldEvent:e,newEvent:t})=>{if(this.#_!=bt.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE&&this.isToolEmpty()){let e=this.parentEditor?.getLine(this);this.remove(),e&&e.line.lookAtMe()}}))}connectedCallback(){if(this.#C)this.connectedAfterCallback();else{if(this.#C=!0,this.constructor.toolHandler.connectedFriends=this,this.parentEditor=this.closest(".free-will-editor"),this.parentLine=this.parentEditor?.getLine(this),0==this.childNodes.length&&this.#_==bt.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE&&(0==this.innerText.length||1==this.innerText.length&&"\n"==this.innerText.charAt(0))){let e=window.getComputedStyle(this);"hidden"==e.visibility&&0==e.opacity||(this.innerText="\n")}if(this.#_==bt.DeleteOption.EMPTY_CONTENT_IS_DELETE&&(this.isToolEmpty()||0==this.childNodes.length)){let e=this.parentEditor.getLine(this);this.remove(),e&&e.line.lookAtMe()}if(this.shadowRoot){let e=this.parentEditor.getNextLine(this.parentLine);e?e.line.lookAtMe():this.parentEditor.createLine().innerText="\n"}this.connectedAfterOnlyOneCallback()}}disconnectedCallback(){this.#C=!1;try{this.disconnectedAfterCallback()}catch(e){console.error(e)}finally{this.constructor.toolHandler.connectedFriends=this,this.#N.disconnect(this,{childList:!0}),document.removeEventListener("selectionchange",this.removeFun,!0)}}isToolEmpty(){let e=window.getComputedStyle(this);return"hidden"!=e.visibility&&0!=e.opacity&&(0==this.innerText.length||1==this.innerText.length&&("\n"==this.innerText||"​"==this.innerText))}isCursor(){let e=window.getSelection();return!!document.activeElement.classList.contains("free-will-editor")&&("None"!=e.type&&(e.containsNode(this,!0)||e.containsNode(this,!1)))}set connectedAfterCallback(e){this.#x=e}get connectedAfterCallback(){return this.#x}set connectedAfterOnlyOneCallback(e){this.#S=e}get connectedAfterOnlyOneCallback(){return this.#S}set disconnectedAfterCallback(e){this.#k=e}get disconnectedAfterCallback(){return this.#k}set connectedChildAfterCallback(e){this.#O=e}get connectedChildAfterCallback(){return this.#O}set disconnectedChildAfterCallback(e){this.#L=e}get disconnectedChildAfterCallback(){return this.#L}}class wt{#C=!1;#B;static toolHandler=new yt(this);static#T=Object.assign(document.createElement("style"),{id:"free-will-editor-line"});static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-editor-line"}static createDefaultStyle(){return this.#T.textContent="",this.#T}static get defaultStyle(){return this.#T}static set defaultStyle(e){this.#T.textContent=e}static set insertDefaultStyle(e){this.#T.sheet.insertRule(e)}static getLine(e){let t;return e.parentElement?e.classList?.contains(wt.toolHandler.defaultClass)?e:(t=e.parentElement.classList.contains(wt.toolHandler.defaultClass)?e.parentElement:e.parentElement.closest(`.${wt.toolHandler.defaultClass}`),t):t}static getRootLine(e){let t;if(!e.parentElement)return t;if(e.classList?.contains(wt.toolHandler.defaultClass))return e;t=e.parentElement.classList.contains(wt.toolHandler.defaultClass)?e.parentElement:e.parentElement.closest(`.${wt.toolHandler.defaultClass}`);let n=t?.closest(`.${wt.toolHandler.defaultClass}`);return n?wt.getRootLine(t):t}static getTool(e,t){let n;return e.parentElement?e.classList?.contains(t.toolHandler.defaultClass)?e:(n=e.parentElement.classList.contains(t.toolHandler.defaultClass)?e.parentElement:e.parentElement.closest(`.${t.toolHandler.defaultClass}`),n||(n=e.parentElement.querySelector(`.${t.toolHandler.defaultClass}`)),n):n}static isElementTextEmpty(e){let t=window.getComputedStyle(e);return"hidden"!=t.visibility&&0!=t.opacity&&(0==e.innerText.length||1==e.innerText.length&&("\n"==e.innerText||"​"==e.innerText))}lineElement;constructor(e){e?(this.lineElement=e,this.lineElement.classList.add(wt.toolHandler.defaultClass)):this.lineElement=Object.assign(document.createElement("div"),{className:wt.toolHandler.defaultClass}),this.lineElement.dataset.is_line="",this.lineElement.line=this}async#P(e,t){return new Promise((n=>{t.surroundContents(e),n(e)}))}async#I(e,t,n){return new Promise((n=>{let{startOffset:o,endOffset:s,startContainer:i,endContainer:r}=e,a=window.getSelection(),l=[...this.lineElement.childNodes].findIndex((e=>a.containsNode(e,!0)))-1,c=l<0,d=[];for(let e=l+1;this.lineElement.childNodes[e]&&a.containsNode(this.lineElement.childNodes[e],!0);e+=1){let t,n=document.createNodeIterator(this.lineElement.childNodes[e],NodeFilter.SHOW_TEXT);for(;t=n.nextNode();)if(t==r){let e=t.cloneNode(!0);e.textContent=t.textContent.substring(s),t.after(e),t.textContent=t.textContent.substring(0,s)}d.push(this.lineElement.childNodes[e])}if(t.append(...d),c)this.lineElement.prepend(t);else{this.lineElement.childNodes[l].after(t)}n()}))}async#R(e,t,n,o){return new Promise((n=>{let o=e.extractContents();t.append(...o.childNodes),this.lineElement.append(t),n(t)}))}async#A(e,t,n,o){return new Promise((s=>{let{startOffset:i,endOffset:r,startContainer:a,endContainer:l}=e;e.setStart(a,i),e.setEnd(a,a.textContent.length),e.surroundContents(t);let c=a.nextSibling?.nextSibling;if(c){let e=[],n=[];for(;c;){if(c.nodeType==Node.ELEMENT_NODE){if(t==c)break;t.append(c)}else n.push(c.textContent),e.push(c);c=c.nextSibling}[...t.childNodes].find((e=>e.nodeType==Node.TEXT_NODE))?.appendData(n.join("")),e.forEach((e=>e.remove()))}if(t.parentElement!=this.lineElement&&t.parentElement?.nextSibling){let e=new n;e.append(t.parentElement.nextSibling),t.parentElement.after(e);let o=e.nextSibling;o&&e!=o&&e.append(o)}let d,h=wt.getLine(a).nextElementSibling;for(;h&&h!==o;)d=new n,e.selectNodeContents(h),e.surroundContents(d),h=h.nextElementSibling;if(wt.prototype.isPrototypeOf(l.line))s(d||t);else{let t=new n;e.setStart(l,0),e.setEnd(l,r),e.surroundContents(t);let o=l.previousSibling;if(o){let e=[],n=[];for(;o;)o.nodeType==Node.ELEMENT_NODE?t.prepend(o):(e.push(o),n.unshift(o.textContent)),o=o.previousSibling;[...t.childNodes].find((e=>e.nodeType==Node.TEXT_NODE))?.appendData(n.join(""))}s(t)}}))}async applyTool(e,t,n){return new Promise((o=>{let s=new e,{startOffset:i,endOffset:r,startContainer:a,endContainer:l}=t;1==this.lineElement.childNodes.length&&"\n"==this.lineElement.innerText&&"BR"==this.lineElement.childNodes[0].nodeName&&this.lineElement.childNodes[0].remove(),s.shadowRoot||!e.toolHandler.isInline?o(this.#R(t,s,e,n)):a===l&&this.lineElement.innerText.length!=t.toString().length?(console.log("applyOnlyOneTool"),this.#P(s,t).then((e=>{o(e)}))):wt.getLine(a)===wt.getLine(l)?(console.log("applyOnlyOneLine"),this.#I(t,s,e).then((e=>{o(e)}))):(console.log("applyMultipleLineAll"),this.#A(t,s,e,n).then((e=>{o(e)})))}))}async#j(e,t,n){return new Promise((t=>{let{startOffset:o,endOffset:s,startContainer:i,endContainer:r}=e;this.lineElement.childNodes.forEach((e=>{this.#M(e,n)})),t()}))}async#D(e,t,n){return new Promise((o=>{let s,i,r,a,{startOffset:l,endOffset:c,startContainer:d,endContainer:h,commonAncestorContainer:u}=e,p=c-l,m=[],g=[];if(u.nodeType!=Node.TEXT_NODE||u.parentElement==this||n.prototype.isPrototypeOf(u.parentElement))a=e.cloneContents();else{let t=e.cloneRange();t.selectNode(u.parentElement),a=t.cloneContents()}let f=window.getSelection(),y=[...t.childNodes];if(!n.toolHandler.isInline){try{this.lineElement.append(...y)}catch(e){wt.getLine(t).append(...y)}return t.remove(),void o()}let b,w,v=y.findIndex((e=>f.containsNode(e,!0)||f.containsNode(e,!1)));if(r=y[v],m=y.slice(0,v),g=y.slice(v+1),d.textContent.length!=p){if(s=d.textContent.substring(0,l),i=p<=1?d.textContent.substring(l+1):d.textContent.substring(l+p),null!=r){let e=r.cloneNode(!1);e.textContent=s,s=e;let t=r.cloneNode(!1);t.textContent=i,i=t,r.remove()}else s=document.createTextNode(s),i=document.createTextNode(i);m.unshift(s),g.push(i)}0!=m.length&&(b=new n,b.append(...m)),0!=g.length&&(w=new n,w.append(...g));let E=[b,a,w].filter((e=>e));t.previousSibling?t.previousSibling.after(...E):t.nextSibling?t.nextSibling.before(...E):this.lineElement.append(...E),t.remove(),o()}))}async#H(e,t,n,o){return new Promise((s=>{let{startOffset:i,endOffset:r,startContainer:a,endContainer:l}=e,c=wt.getTool(l,n),d=document.createTextNode(a.textContent.substring(i,a.textContent.length)),h=document.createTextNode(l.textContent.substring(0,r)),u=a.textContent.substring(0,i),p=l.textContent.substring(r,l.textContent.length),m=t?.nextSibling,g=t?.previousSibling,f=c?.nextSibling,y=c?.previousSibling;if(0==i)this.#M(this.lineElement,n);else if(g&&g.nodeType==Node.TEXT_NODE){if(g.after(d),u){let e=new n;e.textContent=u,g.after(e)}}else if(m&&m.nodeType==Node.TEXT_NODE){if(u){let e=new n;e.textContent=u,m.before(e)}m.before(d)}t&&t.remove();let b=this.lineElement.nextElementSibling;for(;b&&b!=o;)b.childNodes.forEach((e=>{this.#M(e,n)})),b=b.nextElementSibling;if(r==l.length)this.#M(o,n);else if(y&&y.nodeType==Node.TEXT_NODE){if(p){let e=new n;e.textContent=p,y.after(e)}y.after(h)}else if(f&&f.nodeType==Node.TEXT_NODE&&(f.before(h),p)){let e=new n;e.textContent=p,f.after(e)}c&&c.remove(),s()}))}async cancelTool(e,t,n){return new Promise((o=>{let{isCollapsed:s,anchorNode:i,anchorOffset:r}=t,a=t.getRangeAt(0),{startOffset:l,endOffset:c,startContainer:d,endContainer:h,commonAncestorContainer:u}=a,p=wt.getTool(d,e);p?(!e.toolHandler.isInline||d===h&&this.lineElement.innerText.length!=a.toString().length?this.#D(a,p,e).then((()=>{console.log("cancelOnlyOneTool"),o()})):wt.getLine(d)===wt.getLine(h)?this.#j(a,p,e).then((()=>{console.log("cancelOnlyOneLine 2"),o()})):this.#H(a,p,e,n).then((()=>{console.log("cancelMultipleLineAll"),o()})).catch((e=>console.error(e))),o()):(e.toolHandler.toolButton.dataset.tool_status="connected",o())}))}#M(e,t){new Promise((n=>{t.prototype.isPrototypeOf(e)?(e.nextSibling?e.nextSibling.before(...e.childNodes):e.previousSibling?e.previousSibling.after(...e.childNodes):e.parentElement.append(...e.childNodes),e.remove()):e.nodeType==Node.ELEMENT_NODE&&e.childNodes.forEach((e=>{this.#M(e,t)})),n()}))}lookAtMe(){let e=window.getComputedStyle(this.lineElement);"hidden"!=e.visibility&&0!=e.opacity&&((0==this.lineElement.innerText.length||1==this.lineElement.innerText.length&&"\n"==this.lineElement.innerText.charAt(0))&&(this.lineElement.innerText="\n"),this.lineElement.isContentEditable&&(this.lineElement.focus(),window.getSelection().setPosition(this.lineElement,this.lineElement.childNodes.length)))}}class vt extends HTMLElement{static#T=Object.assign(document.createElement("style"),{id:"free-will-editor"});static#g="free-will-editor";static createDefaultStyle(){let e=document.querySelector(`#${this.#T.id}`);return e?this.#T=e:document.head.append(this.#T),this.#T.textContent=`\n            .${this.defaultClass}{\n                height: inherit;\n                overflow: auto;\n                overflow-wrap: anywhere;\n                outline: none;\n                background-color: inherit;\n                padding-top: 0.6%;\n                padding-left: 0.5%;\n                padding-right: 0.8%;\n                -ms-overflow-style: none;\n                scrollbar-width: none;\n                display: block;\n            }\n            .${this.#g}::-webkit-scrollbar {\n                display: none;\n            }\n\n            .${this.#g} > :nth-child(1)::before{\n                content: attr(data-placeholder);\n                position: absolute;\n                color: #d1d1d1;\n                font-weight: 600;\n                font-family: revert;\n                cursor: text;\n            }\n\t\t`,this.#T}static get defaultStyle(){return this.#T}static set defaultStyle(e){this.#T.textContent=e}static set insertDefaultStyle(e){this.#T.sheet.insertRule(e)}static get defaultClass(){return this.#g}static set defaultClass(e){this.#g=e}constructor({isDefaultStyle:e=!0}={}){super(),this.classList.add("free-will-editor")}blockBackspaceEvent(e){}createLine(){let e=new wt;return this.append(e.lineElement),e.lineElement}getLineRange(e=window.getSelection()){return new Promise((t=>{let n,{anchorNode:o,focusNode:s}=e;if(o==this){console.log(111);let t=[...this.children].filter((e=>e.classList.contains(`${wt.toolHandler.defaultClass}`)));n={startLine:t[0],endLine:t.at(-1)};let o=e.getRangeAt(0),s=[...n.endLine.childNodes].at(-1);o.setStart(n.startLine.childNodes[0],1),o.setEnd(s,s.nodeType==Node.TEXT_NODE?s.textContent.length:n.endLine.childNodes.length),e.addRange(o)}else{console.log(222);let e=wt.getLine(o),i=wt.getLine(s);if(e==i)return void t({startLine:e,endLine:i});n={startLine:e,endLine:i};let r="startLine";n=[...this.querySelectorAll(`.${wt.toolHandler.defaultClass}`)].reduce(((t,n,o)=>(n!=e&&n!=i||(t.hasOwnProperty(r)?t.endLine=n:t[r]=n),t)),{})}t(n)}))}isNextLineExist(e=window.getSelection(),{isRoot:t=!1}={}){let n=(t?wt.getRootLine(e):wt.getLine(e)).nextElementSibling;return!!n&&wt.prototype.isPrototypeOf(n.line)}getNextLine(e=window.getSelection(),{focus:t=!1,isRoot:n=!1}={}){let o=n?wt.getRootLine(e):wt.getLine(e);if(!o)return;let s=o.nextElementSibling;return s&&wt.prototype.isPrototypeOf(s.line)?(t&&s.line.lookAtMe(),s):void 0}getPrevLine(e=window.getSelection(),{focus:t=!1,isRoot:n=!1}={}){let o=n?wt.getRootLine(e):wt.getLine(e);if(!o)return;let s=o.previousElementSibling;return s&&wt.prototype.isPrototypeOf(s.line)?(t&&s.line.lookAtMe(),s):void 0}getLine(e=window.getSelection(),{isRoot:t=!1}={}){return t?wt.getRootLine(e):wt.getLine(e)}isCursor(){let e=window.getSelection();return!!document.activeElement.classList.contains("free-will-editor")&&("None"!=e.type&&(e.containsNode(this,!0)||e.containsNode(this,!1)))}getCurrentLine(e,{isRoot:t=!1}={}){let n=window.getSelection();if(document.activeElement.classList.contains("free-will-editor")&&"None"!=n.type)return e||(e=n.focusNode),n.containsNode(this,!0)||n.containsNode(this,!1)?t?wt.getRootLine(e):wt.getLine(e):void 0}}class Et{#z;#$=[];#F=0;#U=50;#W=class{#q;#J;constructor(e){this.#q=e,this.#J=(new Date).getTime()}get html(){return this.#q}get time(){return this.#J}};#V;constructor(e){this.#z=e,this.addCursorMove(),this.addUndoKey(),this.addUserInput()}addCursorMove(){bt.globalSelectionChangeEventListener(this,(({oldEvent:e,newEvent:t})=>{document.activeElement===this.#z&&this.rememberCursor()}))}rememberCursor(){let e=window.getSelection(),t=e.getRangeAt(0).getBoundingClientRect();if(this.#V&&this.#V.x==t.x&&this.#V.y==t.y)return;let n,{focusNode:o,focusOffset:s}=e,i=o.nodeType==Node.TEXT_NODE?(n=o.parentElement,[...n.childNodes].findIndex((e=>e==o))):o.nodeType==Node.ELEMENT_NODE?(n=o,0):void 0;if(null!=n){{let e;e=this.#z.hasAttribute("is_cursor")?this.#z:this.#z.querySelector("[is_cursor]"),e&&e!=n&&(e.removeAttribute("is_cursor"),e.removeAttribute("cursor_offset"),e.removeAttribute("cursor_type"),e.removeAttribute("cursor_index"),e.removeAttribute("cursor_scroll_x"),e.removeAttribute("cursor_scroll_y"))}n.setAttribute("is_cursor",""),n.setAttribute("cursor_offset",s),n.setAttribute("cursor_type",n.nodeType),n.setAttribute("cursor_index",i),n.setAttribute("cursor_scroll_x",this.#z.scrollLeft),n.setAttribute("cursor_scroll_y",this.#z.scrollTop),this.#V=t}}addUndoKey(){this.#z.addEventListener("keydown",(e=>{if(document.activeElement!==this.#z)return;let{ctrlKey:t,key:n}=e;if(!t||"z"!=n&&"y"!=n)return;e.preventDefault(),"z"==n?this.undoKeyEvent():this.redoKeyEvent();let o=this.#z.querySelector("[is_cursor]");if(!o)return;let{cursor_offset:s,cursor_type:i,cursor_index:r,cursor_scroll_x:a,cursor_scroll_y:l}=o.attributes,c=window.getSelection();if(i.value==Node.ELEMENT_NODE){let e=o.childNodes[r.value];this.#z.isEmpty?c.setPosition(e,0):c.setPosition(e,s.value)}else i.value==Node.TEXT_NODE&&c.setPosition(o,s.value);this.#z.scrollTo(Number(a.value),Number(l.value))}))}undoKeyEvent(){if(0==this.#$.length)return;this.#F+=1,this.#F>this.#$.length-1&&(this.#F=this.#$.length-1);let e=this.#$[this.#F];this.#z.innerHTML=e.html}redoKeyEvent(){if(0==this.#$.length)return;this.#F-=1,this.#F<0&&(this.#F=0);let e=this.#$[this.#F];this.#z.innerHTML=e.html}addUndoRedo(e=!1){if(document.activeElement!==this.#z&&!e)return;this.rememberCursor();let t=new this.#W(this.#z.innerHTML.trim());this.#$.unshift(t),this.#$.length>this.#U&&(this.#$=this.#$.splice(0,this.#U))}addUserInput(){let e=(new Date).getTime();this.#z.addEventListener("keydown",(t=>{if(document.activeElement!==this.#z||(new Date).getTime()-e<500)return;e=(new Date).getTime();let{ctrlKey:n,key:o,altKey:s}=t;n||s||n&&("z"==o||"y"==o)||0!=this.#$.length&&this.#$[0].html.trim()==this.#z.innerHTML.trim()||this.addUndoRedo()}))}clearHistory(){this.#$=[]}clearEditor(){this.#z.innerHTML=""}}class Ct extends bt{static toolHandler=new yt(this);static#T=Object.assign(document.createElement("style"),{id:"free-will-editor-strong-style"});static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-editor-strong",this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"B",className:`${this.#T.id}-button`,title:"Bold"}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":this.toolHandler.toolButton.dataset.tool_status="active"}}static createDefaultStyle(){this.#T.textContent=`\n\t\t\t.${this.#T.id}-button{\n\t\t\t\tfont-size: 0.8rem;\n\t\t\t}\n\t\t\t.${this.toolHandler.defaultClass} {\n\t\t\t\tfont-weight: bold;\n\t\t\t}\n\t\t`;let e=document.querySelector(`#${this.#T.id}`);return e?(this.#T?.remove(),this.#T=e,document.head.append(this.#T)):document.head.append(this.#T),this.#T}static get defaultStyle(){return this.#T}static set defaultStyle(e){this.#T.textContent=e}static set insertDefaultStyle(e){this.#T.sheet.insertRule(e)}constructor(e,{isDefaultStyle:t=!0}={}){super(Ct,e)}}class xt{#K=Object.assign(document.createElement("style"),{id:"free-will-editor-palette"});#X=Object.assign(document.createElement("div"),{className:"palette-wrap"});#G=void 0;#Y=void 0;#Z=void 0;#Q=[255,0,0];#ee=void 0;#te=255;#ne=0;#oe=0;#se=1;#ie;#re;#ae;#le=()=>{};static ExampleMode=class{static#ce=class{value;constructor(e){this.value=e,Object.freeze(this)}};static TEXT_COLOR=new this.#ce("color");static TEXT_BACKGROUND_COLOR=new this.#ce("background-color");static TEXT_UNDERLINE=new this.#ce("text-decoration");static TEXT_LINE_THROUGH=new this.#ce("text-decoration");value;static{Object.freeze(this)}constructor(e){this.value=e,Object.freeze(this)}};static OpenPositionMode=class e{static BUTTON=new e("button");static WRAPPER=new e("wrapper");value;static{Object.freeze(this)}constructor(e){this.value=e,Object.freeze(this)}};constructor({openPositionMode:e=xt.OpenPositionMode.BUTTON,openPosition:t,exampleMode:n=xt.ExampleMode.TEXT_COLOR}={}){if(this.#ie=e,!this.#ie)throw new Error("this is not OpenPositionMode");if(this.#re=t,!this.#re||!this.#re.nodeType||this.#re.nodeType!=Node.ELEMENT_NODE)throw new Error("openPosition is not element");this.#ae=n,this.#ie==xt.OpenPositionMode.BUTTON&&(this.#X.style.position="fixed");let o=document.querySelector(`#${this.#K.id}`);o?this.#K=o:document.head.append(this.createStyle()),document.addEventListener("scroll",(()=>{this.#X.isConnected&&this.#de(this.#X)})),window.addEventListener("resize",(e=>{if(this.#X.isConnected){this.reset(),this.#X.replaceChildren();let e=setTimeout((()=>{this.open(),clearTimeout(e),e=void 0}),200)}})),new Array("mouseup","touchend").forEach((e=>{window.addEventListener(e,(()=>{this.#G&&(this.#G.colorPanel?.removeAttribute("data-is_mouse_down"),this.#G.colorPaint?.removeAttribute("data-is_mouse_down"),this.#G.colorBrightness?.removeAttribute("data-is_mouse_down"))}))})),new Array("mousemove","touchmove").forEach((e=>{window.addEventListener(e,(e=>{this.#G&&(this.#G.colorPanel&&this.#G.colorPanel.hasAttribute("data-is_mouse_down")&&this.#he(e),this.#G.colorPaint&&this.#G.colorPaint.hasAttribute("data-is_mouse_down")&&this.#ue(e),this.#G.colorBrightness&&this.#G.colorBrightness.hasAttribute("data-is_mouse_down")&&this.#pe(e))}))}))}#me(e,t){let{topTextWrap:n,selectionRgbBg:o,previousRgbBg:s,colorWrap:i,colorPanel:r,colorPaint:a,colorBrightnessWrap:l,colorBrightness:c,bottomTextWrap:d,selectionRgbText:h,previousRgbText:u,applyWrap:p,cancelButton:m,applyButton:g}=t;e.replaceChildren(n,i,l,d,p),this.#ge(),this.#fe(e,m,g,h)}#ye(){let{topTextWrap:e,selectionRgbBg:t,previousRgbBg:n}=this.#be(),o=Object.assign(document.createElement("div"),{className:"color-wrap"}),s=this.#we(),i=this.#ve();o.append(s,s.__colorPanelSelected,s.__colorPanelSelectedPointer,i,i.__colorPaintSelectedPointer);let{colorBrightnessWrap:r,colorBrightness:a}=this.#Ee(),{bottomTextWrap:l,selectionRgbText:c,previousRgbText:d}=this.#Ce(),{applyWrap:h,cancelButton:u,applyButton:p}=this.#xe();return{topTextWrap:e,selectionRgbBg:t,previousRgbBg:n,colorWrap:o,colorPanel:s,colorPaint:i,colorBrightnessWrap:r,colorBrightness:a,bottomTextWrap:l,selectionRgbText:c,previousRgbText:d,applyWrap:h,cancelButton:u,applyButton:p}}#we(){let e=Object.assign(document.createElement("canvas"),{className:"palette-panel"}),t=Object.assign(document.createElement("canvas"),{className:"panel-selected"}),n=Object.assign(document.createElement("div"),{className:"panel-selected-pointer"});return e.__colorPanelSelected=t,e.__colorPanelSelectedPointer=n,e}#ve(){let e=Object.assign(document.createElement("canvas"),{className:"palette-paint"}),t=Object.assign(document.createElement("div"),{className:"paint-selected-pointer"});return t.append(Object.assign(document.createElement("div"),{className:"paint-selected-pointer-child"})),e.__colorPaintSelectedPointer=t,e}#Ee(){let e=Object.assign(document.createElement("div"),{className:"brightness-wrap"}),t=Object.assign(document.createElement("canvas"),{className:"brightness-color"}),n=Object.assign(document.createElement("div"),{className:"brightness-selected-pointer"});return n.append(Object.assign(document.createElement("div"),{className:"brightness-selected-pointer-child"})),t.__colorBrightnessSelectedPointer=n,e.append(t,t.__colorBrightnessSelectedPointer),{colorBrightnessWrap:e,colorBrightness:t}}#be(){let e=Object.assign(document.createElement("div"),{className:"top-text-wrap"}),t=this.#Se(this.#te,this.#ne,this.#oe),n=Object.assign(document.createElement("div"),{className:"selection-rgb-bg",textContent:this.selectedColor});n.style.background=this.selectedColor,n.style.color=`rgb(${t[0]}, ${t[1]}, ${t[2]})`;let o=Object.assign(document.createElement("div"),{className:"previous-rgb-bg"});return o.style.background=this.selectedColor,e.append(n,o),{topTextWrap:e,selectionRgbBg:n,previousRgbBg:o}}#Ce(){let e=Object.assign(document.createElement("div"),{className:"bottom-text-wrap"}),t=window.getSelection(),n="";if(0!=t.rangeCount&&0==t.isCollapsed){let e=t.getRangeAt(0),o=document.createElement("aticle"),s=e.cloneContents();o.append(s),n=o}n=""==n?"가 나다 라 A BC D":n;let o=this.#Se(this.#te,this.#ne,this.#oe),s=Object.assign(document.createElement("div"),{className:"selection-rgb-text"});this.#ke(s,this.selectedColor,o);let i=Object.assign(document.createElement("div"),{className:"previous-rgb-text"});return this.#ke(i,this.selectedColor,o),n.nodeType&&n.nodeType==Node.ELEMENT_NODE?(s.innerHTML=n.innerHTML,i.innerHTML=n.innerHTML):(s.textContent=n,i.textContent=n),e.append(s,i),{bottomTextWrap:e,selectionRgbText:s,previousRgbText:i}}#xe(){let e=Object.assign(document.createElement("div"),{className:"button-wrap"}),t=Object.assign(document.createElement("button"),{className:"cancel-button",type:"button",textContent:"cancel"}),n=Object.assign(document.createElement("button"),{className:"apply-button",type:"button",textContent:"apply"});return e.append(t,n),{applyWrap:e,cancelButton:t,applyButton:n}}#ge(){return new Promise((e=>{this.#Oe(),this.#Le(),this.#_e(),e()}))}#Oe(){return new Promise((e=>{let{topTextWrap:t,selectionRgbBg:n,previousRgbBg:o,colorWrap:s,colorPanel:i,colorPaint:r,colorBrightnessWrap:a,colorBrightness:l,bottomTextWrap:c,selectionRgbText:d,previousRgbText:h}=this.#G;const u=()=>{let e=i.getBoundingClientRect(),t=i.__colorPanelSelected;t.style.top=e.y+"px",t.style.left=e.x+"px",t.style.width=e.width+"px",t.style.height=e.height+"px",t.width=e.width,t.height=e.height};i.onmousedown=e=>{i.setAttribute("data-is_mouse_down","");let{x:t,y:n}=this.#Ne(e);i.__colorPanelSelectedPointer.style.top=n,i.__colorPanelSelectedPointer.style.left=t,u(),this.#he(e)},i.ontouchstart=i.onmousedown,i.__colorPanelSelected.onmousedown=i.onmousedown,i.__colorPanelSelected.ontouchstart=i.onmousedown,i.__colorPanelSelectedPointer.onmousedown=i.onmousedown,i.__colorPanelSelectedPointer.ontouchstart=i.onmousedown,e(setTimeout((()=>{let e=i.getContext("2d",{willReadFrequently:!0}),t=i.getBoundingClientRect();i.width=t.width,i.height=t.height,u(),this.#Be(e);let n=this.#Se(this.#te,this.#ne,this.#oe),o=i.__colorPanelSelected.getContext("2d",{willReadFrequently:!0});this.#Y?this.#Te(o,this.#Y.x-t.x,this.#Y.y-t.y,n):(this.#Te(o,t.width-1,.1,n),this.#Y={x:t.right-1,y:t.top},i.__colorPanelSelectedPointer.style.top=this.#Y.y+"px",i.__colorPanelSelectedPointer.style.left=this.#Y.x+"px")}),200))}))}#Be(e){e.clearRect(0,0,e.canvas.width,e.canvas.height);let[t,n,o]=this.#Q,s=e.createLinearGradient(2,0,e.canvas.width-2,0);s.addColorStop(0,"white"),s.addColorStop(1,`rgba(${t}, ${n}, ${o}, ${this.#se})`),e.fillStyle=s,e.fillRect(0,0,e.canvas.width,e.canvas.height);let i=e.createLinearGradient(0,2,0,e.canvas.height-2);i.addColorStop(0,"rgba(0,0,0,0)"),i.addColorStop(1,"black"),e.fillStyle=i,e.fillRect(0,0,e.canvas.width,e.canvas.height)}#Te(e,t,n,[o=0,s=0,i=0]=[]){new Promise((r=>{e.clearRect(0,0,e.canvas.width,e.canvas.height),e.lineWidth=1,e.beginPath(),e.arc(t,n,10,0,2*Math.PI),e.strokeStyle=`rgb(${o}, ${s}, ${i})`,e.stroke(),r()}))}#he(e){new Promise((t=>{let{topTextWrap:n,selectionRgbBg:o,previousRgbBg:s,colorWrap:i,colorPanel:r,colorPaint:a,colorBrightnessWrap:l,colorBrightness:c,bottomTextWrap:d,selectionRgbText:h,previousRgbText:u}=this.#G,p=r.getBoundingClientRect(),{x:m,y:g}=this.#Ne(e),f=m<p.left,y=m>p.right-1,b=g<p.top,w=g>p.bottom;r.__colorPanelSelectedPointer.style.left=m+"px",r.__colorPanelSelectedPointer.style.top=g+"px";let{x:v,y:E}=r.__colorPanelSelectedPointer.getBoundingClientRect(),C=v-p.x,x=E-p.y;f&&(C=0,v=p.left),y&&(C=p.width-1,v=p.right-1),b&&(x=0,E=p.top),w&&(x=p.height,E=p.bottom),this.#Y={x:v,y:E};let S=r.getContext("2d",{willReadFrequently:!0});[this.#te,this.#ne,this.#oe]=S.getImageData(C,x,1,1).data;let k=`rgba(${this.#te}, ${this.#ne}, ${this.#oe}, ${this.#se})`,O=this.#Se(this.#te,this.#ne,this.#oe);this.#Te(r.__colorPanelSelected.getContext("2d",{willReadFrequently:!0}),C,x,O),o.textContent=k,o.style.color=`rgb(${O[0]}, ${O[1]}, ${O[2]})`,o.style.background=k,this.#ke(h,k,O),this.#se<.75?c.__colorBrightnessSelectedPointer.children[0].style.border="solid 1px white":c.__colorBrightnessSelectedPointer.children[0].style.border=`solid 1px rgb(${O[0]}, ${O[1]}, ${O[2]})`,this.#Pe(c.getContext("2d",{willReadFrequently:!0}),[this.#te,this.#ne,this.#oe]),t()}))}#Le(){return new Promise((e=>{let{topTextWrap:t,selectionRgbBg:n,previousRgbBg:o,colorWrap:s,colorPanel:i,colorPaint:r,colorBrightnessWrap:a,colorBrightness:l,bottomTextWrap:c,selectionRgbText:d,previousRgbText:h}=this.#G;r.onmousedown=e=>{r.setAttribute("data-is_mouse_down","");let{x:t,y:n}=this.#Ne(e);r.__colorPaintSelectedPointer.style.top=n+"px",this.#ue(e)},r.ontouchstart=r.onmousedown,r.__colorPaintSelectedPointer.onmousedown=r.onmousedown,r.__colorPaintSelectedPointer.ontouchstart=r.ontouchstart,e(setTimeout((()=>{let e=r.getBoundingClientRect();r.width=e.width,r.height=e.height;let t=r.getContext("2d",{willReadFrequently:!0});t.clearRect(0,0,r.width,r.height);let n=t.createLinearGradient(0,2,0,r.height-2);n.addColorStop(0,"rgb(255, 0, 0)"),n.addColorStop(.15,"rgb(255, 0, 255)"),n.addColorStop(.35,"rgb(0, 0, 255)"),n.addColorStop(.45,"rgb(0, 255, 255)"),n.addColorStop(.65,"rgb(0, 255, 0)"),n.addColorStop(.85,"rgb(255, 255, 0)"),n.addColorStop(.9,"orange"),n.addColorStop(1,"rgb(255, 0, 0)"),t.fillStyle=n,t.fillRect(0,0,r.width,r.height),this.#Z?r.__colorPaintSelectedPointer.style.top=this.#Z.y+"px":(r.__colorPaintSelectedPointer.style.top=e.y+"px",this.#Z=e.y),r.__colorPaintSelectedPointer.style.left=e.x+"px",r.__colorPaintSelectedPointer.style.width=e.width+"px";let[o,s,i]=this.#Se(...this.#Q);r.__colorPaintSelectedPointer.children[0].style.border=`solid 1px rgb(${o}, ${s}, ${i})`}),200))}))}#ue(e){new Promise((t=>{let{topTextWrap:n,selectionRgbBg:o,previousRgbBg:s,colorWrap:i,colorPanel:r,colorPaint:a,colorBrightnessWrap:l,colorBrightness:c,bottomTextWrap:d,selectionRgbText:h,previousRgbText:u}=this.#G,p=a.getBoundingClientRect(),m=this.#Ne(e).y,g=m<p.top,f=m>p.bottom-1;a.__colorPaintSelectedPointer.style.top=m+"px";let{y}=a.__colorPaintSelectedPointer.getBoundingClientRect(),b=y-p.y,w=!1;g&&(b=0,y=p.top,w=!0),f&&(b=p.height-1,y=p.bottom-1,w=!0),this.#Z={y};let v,E,C,x=a.getContext("2d",{willReadFrequently:!0});[v,E,C]=w?[255,0,0]:x.getImageData(1,b,1,1).data,this.#Q=[v,E,C],a.__colorPaintSelectedPointer.style.top=y+"px";let S=this.#Se(v,E,C);a.__colorPaintSelectedPointer.children[0].style.border=`solid 1px rgb(${S[0]}, ${S[1]}, ${S[2]})`,this.#se<.75?c.__colorBrightnessSelectedPointer.children[0].style.border="solid 1px white":c.__colorBrightnessSelectedPointer.children[0].style.border=`solid 1px rgb(${S[0]}, ${S[1]}, ${S[2]})`,this.#Pe(c.getContext("2d",{willReadFrequently:!0}),[v,E,C]),this.#Be(r.getContext("2d",{willReadFrequently:!0}));let k=r.getBoundingClientRect();this.#Te(r.__colorPanelSelected.getContext("2d",{willReadFrequently:!0}),this.#Y.x-k.x,this.#Y.y-k.y),this.#he({x:this.#Y.x,y:this.#Y.y}),t()}))}#_e(){new Promise((e=>{let{topTextWrap:t,selectionRgbBg:n,previousRgbBg:o,colorWrap:s,colorPanel:i,colorPaint:r,colorBrightnessWrap:a,colorBrightness:l,bottomTextWrap:c,selectionRgbText:d,previousRgbText:h}=this.#G;l.onmousedown=e=>{l.setAttribute("data-is_mouse_down","");let{x:t,y:n}=this.#Ne(e);l.__colorBrightnessSelectedPointer.style.left=t+"px",this.#pe(e)},l.ontouchstart=l.onmousedown,l.__colorBrightnessSelectedPointer.onmousedown=l.onmousedown,l.__colorBrightnessSelectedPointer.ontouchstart=l.onmousedown,setTimeout((()=>{let e=this.#Se(this.#te,this.#ne,this.#oe),t=l.getBoundingClientRect();l.width=t.width,l.height=t.height;let n=l.getContext("2d",{willReadFrequently:!0});this.#Pe(n,[this.#te,this.#ne,this.#oe]),this.#ee?l.__colorBrightnessSelectedPointer.style.left=this.#ee.x+"px":l.__colorBrightnessSelectedPointer.style.left=t.right+"px",l.__colorBrightnessSelectedPointer.style.top=t.y+"px",l.__colorBrightnessSelectedPointer.style.height=t.height+"px",l.__colorBrightnessSelectedPointer.children[0].style.border=`solid 1px rgb(${e[0]}, ${e[1]}, ${e[2]})`}),200),e()}))}#Pe(e,[t=255,n=0,o=0]){e.clearRect(0,0,e.canvas.width,e.canvas.height);let s=e.createLinearGradient(0,0,e.canvas.width,0);s.addColorStop(0,"rgba(0,0,0,0)"),s.addColorStop(1,`rgba(${t}, ${n}, ${o}, ${this.#se})`),e.fillStyle=s,e.fillRect(0,0,e.canvas.width,e.canvas.height)}#pe(e){new Promise((t=>{let{topTextWrap:n,selectionRgbBg:o,previousRgbBg:s,colorWrap:i,colorPanel:r,colorPaint:a,colorBrightnessWrap:l,colorBrightness:c,bottomTextWrap:d,selectionRgbText:h,previousRgbText:u}=this.#G,p=c.getBoundingClientRect(),{x:m,y:g}=this.#Ne(e),f=m<p.left,y=m>p.right;c.__colorBrightnessSelectedPointer.style.left=m+"px";let{x:b}=c.__colorBrightnessSelectedPointer.getBoundingClientRect(),w=p.x-b;f?(w=p.x,b=p.x,c.__colorBrightnessSelectedPointer.style.left=p.x+"px",this.#se=0):y?(w=p.right,b=p.right,c.__colorBrightnessSelectedPointer.style.left=p.right+"px",this.#se=1):this.#se=((b-p.x)/p.width).toFixed(2);let v=this.#Se(this.#te,this.#ne,this.#oe);o.textContent=this.selectedColor,o.style.background=this.selectedColor,h.style.color=this.selectedColor,this.#ke(h,this.selectedColor,v),this.#se<.75?c.__colorBrightnessSelectedPointer.children[0].style.border="solid 1px white":c.__colorBrightnessSelectedPointer.children[0].style.border=`solid 1px rgb(${v[0]}, ${v[1]}, ${v[2]})`,t()}))}#fe(e,t,n,o){t.onclick=()=>{this.close()},n.onclick=e=>{this.applyCallback(e)}}#de(e){if(this.#ie==xt.OpenPositionMode.BUTTON){let{x:t,y:n,height:o}=this.#re.getBoundingClientRect(),s=n-e.clientHeight;e.style.top=s>0?s+"px":n+o+"px",e.style.left=t+"px"}else this.#ie==xt.OpenPositionMode.WRAPPER&&this.#re.append(e)}#Se(...e){let[t,n,o]=e;return.299*t+.587*n+.114*o>186?[0,0,0]:[255,255,255]}#Ne(e){let t,n;return window.TouchEvent&&e.constructor==window.TouchEvent?(t=e.touches[0].pageX,n=e.touches[0].pageY,e.preventDefault()):(t=e.x,n=e.y),{x:t,y:n}}#ke(e,t,n){this.#ae==xt.ExampleMode.TEXT_COLOR?(e.style.color=t,n&&0!=n.length&&(e.style.backgroundColor=`rgb(${n[0]}, ${n[1]}, ${n[2]})`)):this.#ae==xt.ExampleMode.TEXT_BACKGROUND_COLOR?(e.style.backgroundColor=t,n&&0!=n.length&&(e.style.color=`rgb(${n[0]}, ${n[1]}, ${n[2]})`)):this.#ae==xt.ExampleMode.TEXT_UNDERLINE?(e.style.textDecoration="underline",e.style.textDecorationColor=t,n&&0!=n.length&&(e.style.color=`rgb(${n[0]}, ${n[1]}, ${n[2]})`,e.style.backgroundColor="rgba(255, 255, 255, 0.25)")):this.#ae==xt.ExampleMode.TEXT_LINE_THROUGH&&(e.style.textDecoration="line-through",e.style.textDecorationColor=t,n&&0!=n.length&&(e.style.color=`rgb(${n[0]}, ${n[1]}, ${n[2]})`,e.style.backgroundColor="rgba(255, 255, 255, 0.25)"))}get selectedColor(){return`rgba(${this.#te}, ${this.#ne}, ${this.#oe}, ${this.#se})`}get palette(){return this.#X}get isConnected(){return this.#X.isConnected}set applyCallback(e){this.#le=e}get applyCallback(){return this.#le}get style(){return this.#K}set style(e){this.#K.textContent=e}set insertStyle(e){this.#K.sheet.insertRule(e)}get r(){return this.#te}get g(){return this.#ne}get b(){return this.#oe}get a(){return this.#se}reset(){this.#te=255,this.#ne=0,this.#oe=0,this.#se=1,this.#Q=[255,0,0],this.#Y=void 0,this.#Z=void 0,this.#ee=void 0,this.#G=void 0}close(){this.#X.remove()}open(){this.#G=this.#ye(),document.body.append(this.#X),this.#me(this.#X,this.#G),this.#de(this.#X)}createStyle(){return this.#K.textContent="\n\t\t\t.palette-wrap{\n\t\t\t\tbackground: #343434;\n\t\t\t\tpadding: 0.9%;\n\t\t\t\twidth: 35dvw;\n\t\t\t\theight: fit-content;\n\t\t\t\tcolor: white;\n\t\t\t\tfont-size: 0.9rem;\n\t\t\t\tz-index: 999;\n\t\t\t\tmin-width: 20vmax;\n\t\t\t\t-webkit-user-select: none;\n\t\t\t\t-moz-user-select: none;\n\t\t\t\t-ms-user-select: none;\n\t\t\t\tuser-select: none;\n\t\t\t}\n\t\t\t.palette-wrap .palette-panel{\n\t\t\t\twidth: 90%;\n\t\t\t\tposition: relative;\n\t\t\t}\n\n\t\t\t/* 상단 텍스트 영역 [S] */\n\t\t\t.palette-wrap .top-text-wrap{\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: space-between;\n\t\t\t\tmargin-bottom: 2%;\n\t\t\t\theight: 8%;\n\t\t\t}\n\t\t\t.palette-wrap .top-text-wrap .selection-rgb-bg{\n\t\t\t\twidth: 100%;\n\t\t\t\ttext-align-last: center;\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: center;\n\t\t\t\talign-items: center;\n\t\t\t\ttext-wrap: nowrap;\n\t\t\t}\n\t\t\t.palette-wrap .top-text-wrap .previous-rgb-bg{\n\t\t\t\ttext-align-last: center;\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: center;\n\t\t\t\talign-items: center;\n\t\t\t\twidth: 11.5%;\n\t\t\t}\n\t\t\t/* 상단 텍스트 영역 [E] */\n\n\t\t\t/* 컬러 영역 영역 [S] */\n\t\t\t.palette-wrap .color-wrap{\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: space-between;\n\t\t\t\tmargin-bottom: 2%;\n\t\t\t}\n\n\t\t\t.palette-wrap .color-wrap .panel-selected{\n\t\t\t\tposition: fixed;\n\t\t\t\tz-index: 9000;\n\t\t\t}\n\t\t\t.palette-wrap .color-wrap .panel-selected-pointer{\n\t\t\t\tposition: fixed;\n\t\t\t\twidth: 1px;\n\t\t\t\theight: 1px;\n\t\t\t}\n\n\t\t\t.palette-wrap .color-wrap .palette-paint{\n\t\t\t\twidth: 5%;\n\t\t\t}\n\t\t\t.palette-wrap .color-wrap .paint-selected-pointer{\n\t\t\t\tposition: fixed;\n\t\t\t\theight: 1px;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\t\t\t\tbackground-color: #faebd700;\n\t\t\t}\n\t\t\t.palette-wrap .color-wrap .paint-selected-pointer-child{\n\t\t\t\tposition: absolute;\n\t\t\t\tborder: solid 1px;\n\t\t\t\theight: 2px;\n\t\t\t\twidth: inherit;\n\t\t\t}\n\t\t\t/* 컬러 영역 영역 [E] */\n\n\t\t\t/* 투명도 영역 [S] */\n\t\t\t.palette-wrap .brightness-wrap{\n\t\t\t\tmargin-bottom: 2%;\n\t\t\t\tbackground-image: /* tint image */ linear-gradient(to right, rgb(192 192 192 / 20%), rgb(192 192 192 / 20%)), /* checkered effect */ linear-gradient(to right, #505050 50%, #a1a1a1 50%), linear-gradient(to bottom, #505050 50%, #a1a1a1 50%);\n\t\t\t\tbackground-blend-mode: normal, difference, normal;\n\t\t\t\tbackground-size: 2em 2em;\n\t\t\t\tdisplay: flex;\n\t\t\t}\n\t\t\t.palette-wrap .brightness-wrap .brightness-color{\n\t\t\t\theight: 2vh;\n\t\t\t\twidth: 100%;\n\t\t\t\tmin-height: 17px;\n\t\t\t}\n\t\t\t.palette-wrap .brightness-wrap .brightness-selected-pointer{\n\t\t\t\tposition: fixed;\n\t\t\t\twidth: 1px;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\t\t\t\tbackground-color: #faebd700;\n\t\t\t}\n\t\t\t.palette-wrap .brightness-wrap .brightness-selected-pointer-child{\n\t\t\t\tposition: absolute;\n\t\t\t\tborder: solid 1px;\n\t\t\t\theight: inherit;\n\t\t\t\twidth: 2px;\n\t\t\t\tbackground: inherit;\n\t\t\t}\n\t\t\t/* 투명도 영역 [E] */\n\n\t\t\t/* 하단 텍스트 영역 [S] */\n\t\t\t.palette-wrap .bottom-text-wrap{\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: space-between;\n\t\t\t\talign-items: center;\n\t\t\t\tmargin-bottom: 2%;\n\t\t\t\ttext-wrap: nowrap;\n\t\t\t}\n\t\t\t.palette-wrap .bottom-text-wrap .selection-rgb-text{\n\t\t\t\tmargin-right: 5%;\n\t\t\t}\n\t\t\t.palette-wrap .bottom-text-wrap .selection-rgb-text, .palette-wrap .bottom-text-wrap .previous-rgb-text{\n\t\t\t\toverflow-x: hidden;\n\t\t\t\tmax-width: 40%;\n\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\twidth: fit-content;\n\t\t\t\tbackground: rgba(255, 255, 255, 0.25);\n\t\t\t\tcolor: rgba(255, 255, 255, 0.25);\n\t\t\t}\n\t\t\t.palette-wrap .bottom-text-wrap .selection-rgb-text *, .palette-wrap .bottom-text-wrap .previous-rgb-text *{\n\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\toverflow-x: hidden;\n\t\t\t}\n\t\t\t/* 하단 텍스트 영역 [E] */\n\n\t\t\t/* 버튼 영역 [S] */\n\t\t\t.palette-wrap .button-wrap {\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: space-around;\n\t\t\t}\n\t\t\t.palette-wrap .cancel-button, .palette-wrap .apply-button{\n\t\t\t\tbackground: none;\n\t\t\t\tborder: revert;\n\t\t\t\tcolor: #b9b9b9;\n\t\t\t\tborder-color: #464646;\n\t\t\t}\n\t\t\t/* 버튼 영역 [E] */\n\t\t",this.#K}}class St extends bt{static toolHandler=new yt(this);static#T=Object.assign(document.createElement("style"),{id:"free-will-editor-color-style"});static palette;static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-editor-color",this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"C",className:`${this.#T.id}-button`,title:"Font Color"}),this.palette=new xt({openPositionMode:xt.OpenPositionMode.BUTTON,openPosition:this.toolHandler.toolButton}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":this.palette.isConnected?this.palette.close():this.palette.open()},this.palette.applyCallback=e=>{this.toolHandler.toolButton.dataset.tool_status="active",this.palette.close()},super.outClickElementListener(this.palette.palette,(({oldEvent:e,newEvent:t,isMouseOut:n})=>{n&&this.palette.palette.isConnected&&!super.isMouseInnerElement(this.toolHandler.toolButton)&&this.palette.close()}))}static createDefaultStyle(){this.#T.textContent=`\n\t\t\t.${this.#T.id}-button{\n\t\t\t\tfont-size: 0.8rem;\n\t\t\t}\n\t\t`;let e=document.querySelector(`#${this.#T.id}`);return e?(this.#T?.remove(),this.#T=e,document.head.append(this.#T)):document.head.append(this.#T),this.#T}static get defaultStyle(){return this.#T}static set defaultStyle(e){this.#T.textContent=e}static set insertDefaultStyle(e){this.#T.sheet.insertRule(e)}constructor(e){super(St,e),e||0!=Object.entries(this.dataset).length||(this.dataset.rgba=St.palette.r+","+St.palette.g+","+St.palette.b+","+St.palette.a),this.style.color=`rgba(${this.dataset.rgba})`}}class kt extends bt{static toolHandler=new yt(this);static#T=Object.assign(document.createElement("style"),{id:"free-will-editor-background-style"});static palette;static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-editor-background",this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"G",className:`${this.#T.id}-button`,title:"Background Color"}),this.palette=new xt({openPositionMode:xt.OpenPositionMode.BUTTON,openPosition:this.toolHandler.toolButton,exampleMode:xt.ExampleMode.TEXT_BACKGROUND_COLOR}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":this.palette.isConnected?this.palette.close():this.palette.open()},this.palette.applyCallback=e=>{this.toolHandler.toolButton.dataset.tool_status="active",this.palette.close()},super.outClickElementListener(this.palette.palette,(({oldEvent:e,newEvent:t,isMouseOut:n})=>{n&&this.palette.palette.isConnected&&!super.isMouseInnerElement(this.toolHandler.toolButton)&&this.palette.close()}))}static createDefaultStyle(){this.#T.textContent=`\n\t\t\t.${this.#T.id}-button{\n\t\t\t\tfont-size: 0.8rem;\n\t\t\t}\n\t\t`;let e=document.querySelector(`#${this.#T.id}`);return e?(this.#T?.remove(),this.#T=e,document.head.append(this.#T)):document.head.append(this.#T),this.#T}static get defaultStyle(){return this.#T}static set defaultStyle(e){this.#T.textContent=e}static set insertDefaultStyle(e){this.#T.sheet.insertRule(e)}constructor(e){super(kt,e),e||0!=Object.entries(this.dataset).length||(this.dataset.rgba=kt.palette.r+","+kt.palette.g+","+kt.palette.b+","+kt.palette.a),this.style.backgroundColor=`rgba(${this.dataset.rgba})`}}class Ot extends bt{static toolHandler=new yt(this);static#T=Object.assign(document.createElement("style"),{id:"free-will-editor-strikethrough-style"});static palette;static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-strikethrough",this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"S",className:`${this.#T.id}-button`,title:"Strikethrough"}),this.palette=new xt({openPositionMode:xt.OpenPositionMode.BUTTON,openPosition:this.toolHandler.toolButton,exampleMode:xt.ExampleMode.TEXT_LINE_THROUGH}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":this.palette.isConnected?this.palette.close():this.palette.open()},this.palette.applyCallback=e=>{this.toolHandler.toolButton.dataset.tool_status="active",this.palette.close()},super.outClickElementListener(this.palette.palette,(({oldEvent:e,newEvent:t,isMouseOut:n})=>{n&&this.palette.palette.isConnected&&!super.isMouseInnerElement(this.toolHandler.toolButton)&&this.palette.close()}))}static createDefaultStyle(){this.#T.textContent=`\n\t\t\t.${this.#T.id}-button{\n\t\t\t\tfont-size: 0.8rem;\n\t\t\t\ttext-decoration: 1px line-through;\n\t\t\t\ttext-decoration-color: #404040;\n\t\t\t}\n\t\t`;let e=document.querySelector(`#${this.#T.id}`);return e?(this.#T?.remove(),this.#T=e,document.head.append(this.#T)):document.head.append(this.#T),this.#T}static get defaultStyle(){return this.#T}static set defaultStyle(e){this.#T.textContent=e}static set insertDefaultStyle(e){this.#T.sheet.insertRule(e)}constructor(e){super(Ot,e),e||0!=Object.entries(this.dataset).length||(this.dataset.rgba=Ot.palette.r+","+Ot.palette.g+","+Ot.palette.b+","+Ot.palette.a),this.style.textDecoration=`line-through rgba(${this.dataset.rgba}) 1px`}}class Lt extends bt{static toolHandler=new yt(this);static#T=Object.assign(document.createElement("style"),{id:"free-will-editor-underline-style"});static palette;static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-underline",this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"U",className:`${this.#T.id}-button`,title:"Underline"}),this.palette=new xt({openPositionMode:xt.OpenPositionMode.BUTTON,openPosition:this.toolHandler.toolButton,exampleMode:xt.ExampleMode.TEXT_UNDERLINE}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":this.palette.isConnected?this.palette.close():this.palette.open()},this.palette.applyCallback=e=>{this.toolHandler.toolButton.dataset.tool_status="active",this.palette.close()},super.outClickElementListener(this.palette.palette,(({oldEvent:e,newEvent:t,isMouseOut:n})=>{n&&this.palette.palette.isConnected&&!super.isMouseInnerElement(this.toolHandler.toolButton)&&this.palette.close()}))}static createDefaultStyle(){this.#T.textContent=`\n\t\t\t.${this.#T.id}-button{\n\t\t\t\tfont-size: 0.8rem;\n\t\t\t\ttext-decoration: 1px underline;\n\t\t\t}\n\t\t\t.${this.toolHandler.defaultClass} {\n\t\t\t\twidth: fit-content;\n\t\t\t}\n\t\t`;let e=document.querySelector(`#${this.#T.id}`);return e?(this.#T?.remove(),this.#T=e,document.head.append(this.#T)):document.head.append(this.#T),this.#T}static get defaultStyle(){return this.#T}static set defaultStyle(e){this.#T.textContent=e}static set insertDefaultStyle(e){this.#T.sheet.insertRule(e)}constructor(e,{isDefaultStyle:t=!0}={}){super(Lt,e),e||0!=Object.entries(this.dataset).length||(this.dataset.rgba=Lt.palette.r+","+Lt.palette.g+","+Lt.palette.b+","+Lt.palette.a),this.style.borderBottom=`solid 2px rgba(${this.dataset.rgba})`}}class _t{#K=Object.assign(document.createElement("style"),{id:"free-will-editor-font-family-box"});#Ie=20;#Re=[];#Ae=Object.assign(document.createElement("div"),{className:"font-box-wrap"});#je=Object.assign(document.createElement("ul"),{className:"font-box-container"});#Me=[];#De;#He="가나 다라 ab cd";#ze=this.#He;#le=()=>{};constructor(e){if(!e)throw new Error("fontList is undefined");this.#Re=e;let t=document.querySelector(`#${this.#K.id}`);t?this.#K=t:document.head.append(this.createStyle()),this.#Ae.append(this.#je)}searchInputTextEvent(e){}#$e(e){return new Promise((t=>{e.onclick=t=>{this.#De=e,this.applyCallback(t)},t(e)}))}#Fe(e){return new Promise((t=>{const n=()=>{let t=Object.assign(document.createElement("li"),{className:"font-family-item"});return e.nodeType&&e.nodeType==Node.ELEMENT_NODE?t.innerHTML=e.innerHTML:t.textContent=e,this.#$e(t),t};this.#Me=this.#Re.map((e=>{let t=n();return t.style.fontFamily=e,t}));let o=n();this.#Me.push(o),t(this.#Me)}))}async open(){let e=window.getSelection();if(0!=e.rangeCount&&0==e.isCollapsed){let t=e.getRangeAt(0),n=document.createElement("aticle"),o=t.cloneContents();n.append(o),this.#ze=n}return this.#ze=""==this.#ze?this.#He:this.#ze,document.body.append(this.#Ae),await this.#Fe(this.#ze).then((e=>(this.#je.replaceChildren(...e),this.#je)))}close(){this.#Ae.remove()}set applyCallback(e){this.#le=e}get applyCallback(){return this.#le}get fontFamilyBox(){return this.#Ae}get selectedFont(){return this.#De}get style(){return this.#K}set style(e){this.#K.textContent=e}set insertStyle(e){this.#K.sheet.insertRule(e)}createStyle(){return this.#K.textContent=`\n            .font-box-wrap{\n                background: #000000bf;\n                position: fixed;\n\t\t\t\tpadding: 0.9%;\n\t\t\t\twidth: ${this.#Ie}vw;\n                height: 25vh;\n\t\t\t\tcolor: white;\n\t\t\t\tfont-size: 13px;\n\t\t\t\tmin-width: 300px;\n                overflow-y: auto;\n\t\t\t\t-webkit-user-select:none;\n\t\t\t\t-moz-user-select:none;\n\t\t\t\t-ms-user-select:none;\n\t\t\t\tuser-select:none;\n                z-index: 999;\n            }\n            .font-box-wrap .font-box-container{\n                list-style-type: none;\n                padding: 0;\n                margin: 0;\n            }\n            .font-box-wrap .font-family-item{\n                margin-bottom: 1%;\n            }\n            .font-box-wrap .font-family-item:hover{\n                background-color: #747474;\n                cursor: pointer;\n            }\n\n        `,this.#K}}class Nt extends bt{static toolHandler=new yt(this);static#T=Object.assign(document.createElement("style"),{id:"free-will-editor-font-family-style"});static fontFamilyBox;static#Re=["Arial, Helvetica, Sans-Serif","Arial Black, Gadget, Sans-Serif","Comic Sans MS, Textile, Cursive","Courier New, Courier, Monospace","Georgia, Times New Roman, Times, Serif","Impact, Charcoal, Sans-Serif","Lucida Console, Monaco, Monospace","Lucida Sans Unicode, Lucida Grande, Sans-Serif","Palatino Linotype, Book Antiqua, Palatino, Serif","Tahoma, Geneva, Sans-Serif","Times New Roman, Times, Serif","Trebuchet MS, Helvetica, Sans-Serif","Verdana, Geneva, Sans-Serif","MS Sans Serif, Geneva, Sans-Serif","MS Serif, New York, Serif"];static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-editor-font-family",this.fontFamilyBox=new _t(this.#Re),this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"F",className:`${this.#T.id}-button`,title:"Font Family"}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":this.fontFamilyBox.fontFamilyBox.isConnected?this.fontFamilyBox.close():this.fontFamilyBox.open().then((e=>{super.processingElementPosition(this.fontFamilyBox.fontFamilyBox,this.toolHandler.toolButton)}))},this.fontFamilyBox.applyCallback=e=>{this.toolHandler.toolButton.dataset.tool_status="active",this.fontFamilyBox.close()},document.addEventListener("scroll",(()=>{this.fontFamilyBox.fontFamilyBox.isConnected&&super.processingElementPosition(this.fontFamilyBox.fontFamilyBox,this.toolHandler.toolButton)})),window.addEventListener("resize",(e=>{this.fontFamilyBox.fontFamilyBox.isConnected&&this.fontFamilyBox.open().then((e=>{super.processingElementPosition(this.fontFamilyBox.fontFamilyBox,this.toolHandler.toolButton)}))})),super.outClickElementListener(this.fontFamilyBox.fontFamilyBox,(({oldEvent:e,newEvent:t,isMouseOut:n})=>{n&&this.fontFamilyBox.fontFamilyBox.isConnected&&!super.isMouseInnerElement(this.toolHandler.toolButton)&&this.fontFamilyBox.close()}))}static createDefaultStyle(){this.#T.textContent=`\n            .${this.#T.id}-button{\n                font-size: 0.8rem;\n            }\n        `;let e=document.querySelector(`#${this.#T.id}`);return e?(this.#T?.remove(),this.#T=e,document.head.append(this.#T)):document.head.append(this.#T),this.#T}static get defaultStyle(){return this.#T}static set defaultStyle(e){this.#T.textContent=e}static set insertDefaultStyle(e){this.#T.sheet.insertRule(e)}constructor(e){super(Nt,e),e||0!=Object.entries(this.dataset).length||(this.dataset.font_family=Nt.fontFamilyBox.selectedFont?.style.fontFamily),this.style.fontFamily=this.dataset.font_family}}class Bt extends bt{static toolHandler=new yt(this);static#T=Object.assign(document.createElement("style"),{id:"free-will-editor-quote-style"});static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-quote",this.toolHandler.isInline=!1,this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"Q",className:`${this.#T.id}-button`,title:"Quote"}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":this.toolHandler.toolButton.dataset.tool_status="active"}}static createDefaultStyle(){this.#T.textContent=`\n\t\t\t.${this.#T.id}-button{\n\t\t\t\tfont-size: 0.8rem;\n\t\t\t}\n\t\t\t.${this.toolHandler.defaultClass} {\n\t\t\t\tdisplay: block;\n\t\t\t\tpadding-left: 0.5em;\n\t\t\t\tborder-left: 3px solid #d7d7db;\n\t\t\t\tmargin-inline: 1.5em;\n\t\t\t}\n\t\t`;let e=document.querySelector(`#${this.#T.id}`);return e?(this.#T?.remove(),this.#T=e,document.head.append(this.#T)):document.head.append(this.#T),this.#T}static get defaultStyle(){return this.#T}static set defaultStyle(e){this.#T.textContent=e}static set insertDefaultStyle(e){this.#T.sheet.insertRule(e)}parentLine;constructor(e){super(Bt,e,{deleteOption:bt.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE})}}class Tt extends bt{static toolHandler=new yt(this);static#T=Object.assign(document.createElement("style"),{id:"free-will-editor-numeric-point-style"});static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-numeric-point",this.toolHandler.isInline=!1,this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"1.",className:`${this.#T.id}-button`,title:"Numeric Point"}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":this.toolHandler.toolButton.dataset.tool_status="active"}}static createDefaultStyle(){this.#T.textContent=`\n\t\t\t.${this.#T.id}-button{\n\t\t\t\tfont-size: 0.8rem;\n\t\t\t}\n\t\t\t.${this.toolHandler.defaultClass} {\n\t\t\t\tdisplay: block;\n\t\t\t\tmargin-inline: 1.3em;\n\t\t\t}\n\t\t\t.${this.toolHandler.defaultClass} > * {\n\t\t\t\tmargin-inline: 1.3em;\n\t\t\t}\n\t\t\t.${this.toolHandler.defaultClass} > *:before{\n\t\t\t\tcontent: attr(data-order)\n\t\t\t}\n\t\t`;let e=document.querySelector(`#${this.#T.id}`);return e?(this.#T?.remove(),this.#T=e,document.head.append(this.#T)):document.head.append(this.#T),this.#T}static get defaultStyle(){return this.#T}static set defaultStyle(e){this.#T.textContent=e}static set insertDefaultStyle(e){this.#T.sheet.insertRule(e)}parentLine;constructor(e){super(Tt,e,{deleteOption:bt.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE}),super.connectedChildAfterCallback=e=>{new Promise((e=>{[...this.children].forEach(((e,t)=>{e.dataset.order=t+1+". "})),e()}));let t=e.at(-1);if(t.nodeType==Node.ELEMENT_NODE){let e=setInterval((()=>{t.isConnected&&(clearInterval(e),window.getSelection().setPosition(t,t.childNodes.length))}),50)}else if(t.nodeType==Node.TEXT_NODE){let e=setInterval((()=>{t.isConnected&&(clearInterval(e),window.getSelection().setPosition(t,t.length))}),50)}}}}class Pt extends bt{static toolHandler=new yt(this);static#T=Object.assign(document.createElement("style"),{id:"free-will-editor-bullet-point-style"});static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-bullet-point",this.toolHandler.isInline=!1,this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"●",className:`${this.#T.id}-button`,title:"Bullet Point"}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":this.toolHandler.toolButton.dataset.tool_status="active"}}static createDefaultStyle(){this.#T.textContent=`\n\t\t\t.${this.#T.id}-button{\n\t\t\t\tfont-size: 0.8rem;\n\t\t\t}\n\n\t\t\t.${this.toolHandler.defaultClass} {\n\t\t\t\tdisplay: block;\n\t\t\t\tpadding-left: 1em;\n\t\t\t\tmargin-inline: 2.5em;\n\t\t\t\tlist-style-type: disc;\n\t\t\t}\n\t\t\t.${this.toolHandler.defaultClass} > *{\n\t\t\t\tdisplay: list-item;\n\t\t\t}\n\t\t`;let e=document.querySelector(`#${this.#T.id}`);return e?(this.#T?.remove(),this.#T=e,document.head.append(this.#T)):document.head.append(this.#T),this.#T}static get defaultStyle(){return this.#T}static set defaultStyle(e){this.#T.textContent=e}static set insertDefaultStyle(e){this.#T.sheet.insertRule(e)}parentLine;constructor(e){super(Pt,e,{deleteOption:bt.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE})}}class It{#K=Object.assign(document.createElement("style"),{id:"free-will-editor-sort-box"});#Ue=Object.assign(document.createElement("div"),{className:"sort-box-wrap"});#We=Object.assign(document.createElement("ul"),{className:"sort-box-container"});#qe=["center","right"].map((e=>Object.assign(document.createElement("li"),{textContent:e})));#Je;#le=()=>{};constructor(){let e=document.querySelector(`#${this.#K.id}`);e?this.#K=e:document.head.append(this.createStyle()),this.#Ue.append(this.#We),this.#We.replaceChildren(...this.#qe),this.#qe.forEach((e=>{e.onclick=t=>{this.#Je=e,this.applyCallback(t)}}))}open(){document.body.append(this.#Ue)}close(){this.#Ue.remove()}set applyCallback(e){this.#le=e}get applyCallback(){return this.#le}get sortBox(){return this.#Ue}get selectedSort(){return this.#Je}get style(){return this.#K}set style(e){this.#K.textContent=e}set insertStyle(e){this.#K.sheet.insertRule(e)}createStyle(){return this.#K.textContent="\n            .sort-box-wrap {\n                background: #000000bf;\n                position: fixed;\n                padding: 0.9%;\n                height: fit-content;\n                color: white;\n                font-size: 13px;\n                min-width: 85px;\n                -webkit-user-select: none;\n                -moz-user-select: none;\n                -ms-user-select: none;\n                user-select: none;\n                z-index: 999;\n            }\n            .sort-box-wrap .sort-box-container {\n                list-style-type: none;\n                padding: 0;\n                margin: 0;\n                display: flex;\n                gap: 1vw;\n            }\n            \n            .sort-box-wrap .sort-box-container li{\n                transition: all 0.5s;\n                padding: 1% 2% 1% 2%;\n                margin-right: 1vw;\n            }\n            .sort-box-wrap .sort-box-container li:hover{\n                background-color: #95959591;\n                cursor: pointer;\n            }\n\n        ",this.#K}}class Rt extends bt{static toolHandler=new yt(this);static#T=Object.assign(document.createElement("style"),{id:"free-will-editor-index-style"});static sortBox;static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-index",this.toolHandler.isInline=!1,this.sortBox=new It,this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"Ξ",className:`${this.#T.id}-button`,title:"align"}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":this.sortBox.sortBox.isConnected?this.sortBox.close():(this.sortBox.open(),super.processingElementPosition(this.sortBox.sortBox,this.toolHandler.toolButton))},this.sortBox.applyCallback=e=>{this.toolHandler.toolButton.dataset.tool_status="active",this.sortBox.close()},document.addEventListener("scroll",(()=>{this.sortBox.sortBox.isConnected&&this.toolHandler.processingPalettePosition(this.sortBox.sortBox)})),window.addEventListener("resize",(e=>{this.sortBox.sortBox.isConnected&&(this.sortBox.open(),super.processingElementPosition(this.sortBox.sortBox,this.toolHandler.toolButton))})),super.outClickElementListener(this.sortBox.sortBox,(({oldEvent:e,newEvent:t,isMouseOut:n})=>{n&&this.sortBox.sortBox.isConnected&&!super.isMouseInnerElement(this.toolHandler.toolButton)&&this.sortBox.close()}))}static createDefaultStyle(){this.#T.textContent=`\n\t\t\t.${this.#T.id}-button{\n\t\t\t\tfont-size: 0.8rem;\n\t\t\t}\n\n            .${this.toolHandler.defaultClass} {\n                display: block;\n            }\n\t\t`;let e=document.querySelector(`#${this.#T.id}`);return e?(this.#T?.remove(),this.#T=e,document.head.append(this.#T)):document.head.append(this.#T),this.#T}static get defaultStyle(){return this.#T}static set defaultStyle(e){this.#T.textContent=e}static set insertDefaultStyle(e){this.#T.sheet.insertRule(e)}constructor(e){super(Rt,e,{deleteOption:bt.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE}),e||0!=Object.entries(this.dataset).length||(this.dataset.text_align=Rt.sortBox.selectedSort?.textContent),this.style.textAlign=this.dataset.text_align}}class At{#K=Object.assign(document.createElement("style"),{id:"free-will-editor-font-size-box"});#Ve=30;#Ke=Object.assign(document.createElement("div"),{className:"font-size-wrap"});#Xe=Object.assign(document.createElement("ul"),{className:"font-size-container"});#Ge=Object.assign(document.createElement("input"),{autocomplete:"off",placeholder:"search your font size",type:"number",name:"font-size-search",className:"font-size-search",oninput:e=>this.#Ye(e),onkeyup:e=>{if("Enter"==e.key&&""!=this.#Ge.value){let t=this.#Xe.querySelector(`[data-size="${this.#Ge.value}"]`);this.#Ze(t,e)}}});#De;#He="가나 다라 ab cd";#ze=this.#He;#le=()=>{};#Qe;#et;constructor(e){this.#et=e;let t=document.querySelector(`#${this.#K.id}`);t?this.#K=t:document.head.append(this.createStyle());let n=Object.assign(document.createElement("div"),{className:"font-size-search-wrap"});n.append(this.#Ge),this.#Ke.append(n,this.#Xe),this.#Ke.append(this.#Xe)}#Ye(e){let t=Number(this.#Ge.value);if(!this.#Ge.value||""==this.#Ge.value)return void this.#Fe(this.#ze).then((e=>{this.#Xe.replaceChildren(...e)}));if(isNaN(t)||this.#et.min>t||this.#et.max<t)return void this.#Xe.replaceChildren();let n=Object.assign(document.createElement("li"),{className:"font-size-item"});this.#ze.nodeType&&this.#ze.nodeType==Node.ELEMENT_NODE?n.innerHTML=this.#ze.innerHTML:n.textContent=this.#ze,n.style.fontSize=t+this.#et.unit,n.dataset.size=t,this.#$e(n),this.#Xe.replaceChildren(n),this.#Ge.focus()}#$e(e){return new Promise((t=>{e.onclick=t=>this.#Ze(e,t),t(e)}))}#Ze(e,t){if(this.#De=e,this.#Qe){let e=window.getSelection();e.removeAllRanges(),e.addRange(this.#Qe)}this.applyCallback(t)}#Fe(e){return new Promise((t=>{let n=[],o=String(this.#et.weight).replace(".","").length;for(let t=this.#et.min,s=this.#et.max+this.#et.weight;t<s;t=parseFloat((t+this.#et.weight).toFixed(o))){console.log(t);let o=Object.assign(document.createElement("li"),{className:"font-size-item"});e.nodeType&&e.nodeType==Node.ELEMENT_NODE?o.innerHTML=e.innerHTML:o.textContent=e,o.style.fontSize=t+this.#et.unit,this.#$e(o),n.push(o)}t(n)}))}async open(){this.#Ge.step=this.#et.weight,this.#Ge.min=this.#et.min,this.#Ge.max=this.#et.max;let e=window.getSelection();if(0!=e.rangeCount&&0==e.isCollapsed){let t=e.getRangeAt(0);this.#Qe=t.cloneRange();let n=document.createElement("aticle"),o=t.cloneContents();n.append(o),this.#ze=n}return this.#ze=""==this.#ze?this.#He:this.#ze,document.body.append(this.#Ke),await this.#Fe(this.#ze).then((e=>(this.#Xe.replaceChildren(...e),this.#Xe)))}close(){this.#Ke.remove()}set applyCallback(e){this.#le=e}get applyCallback(){return this.#le}get fontSizeBox(){return this.#Ke}get selectedFont(){return this.#De}get style(){return this.#K}set style(e){this.#K.textContent=e}set insertStyle(e){this.#K.sheet.insertRule(e)}createStyle(){return this.#K.textContent=`\n            .font-size-wrap{\n                background: #000000bf;\n                position: fixed;\n\t\t\t\tpadding: 0.9%;\n\t\t\t\twidth: ${this.#Ve}vw;\n\t\t\t\theight: 25vh;\n\t\t\t\tcolor: white;\n                min-width: 200px;\n                overflow-y: auto;\n                -webkit-user-select: none;\n                -moz-user-select: none;\n                -ms-user-select: none;\n                user-select: none;\n                overflow-x: hidden;\n                z-index: 999;\n            }\n\n            .font-size-wrap .font-size-search-wrap{\n                margin-bottom: 2%;\n                overflow-x: hidden;\n            }\n            .font-size-wrap .font-size-search-wrap [name="font-size-search"]{\n                outline: none;\n                -moz-appearance: textfield;\n                width: 100%;\n                color: white;\n            }\n            .font-size-wrap .font-size-search-wrap [name="font-size-search"]::-webkit-outer-spin-button,\n            .font-size-wrap .font-size-search-wrap [name="font-size-search"]::-webkit-inner-spin-button{\n                -webkit-appearance: none;\n                margin: 0;\n            }\n\n            .font-size-wrap .font-size-container{\n                list-style-type: none;\n                padding: 0;\n                margin: 0;\n            }\n            .font-size-wrap .font-size-container .font-size-item{\n                margin-bottom: 1%;\n                transition: all 0.5s;\n                overflow-x: hidden;\n                white-space: nowrap;\n                text-overflow: ellipsis;\n            }\n            .font-size-wrap .font-size-container .font-size-item:hover{\n                background-color: #666666;\n                cursor: pointer;\n                background-color: #666666;\n                padding: 2px 0 3px 0;\n            }\n\n        `,this.#K}}class jt extends bt{static toolHandler=new yt(this);static#T=Object.assign(document.createElement("style"),{id:"free-will-editor-font-size-style"});static fontSizeBox;static unit="px";static min=1;static max=50;static weight=1;static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-editor-font-size",this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"↑↓",className:`${this.#T.id}-button`,title:"Font Size"}),this.fontSizeBox=new At(this),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":this.fontSizeBox.fontSizeBox.isConnected?this.fontSizeBox.close():this.fontSizeBox.open().then((e=>{super.processingElementPosition(this.fontSizeBox.fontSizeBox,this.toolHandler.toolButton)}))},this.fontSizeBox.applyCallback=e=>{this.toolHandler.toolButton.dataset.tool_status="active",this.fontSizeBox.close()},document.addEventListener("scroll",(()=>{this.fontSizeBox.fontSizeBox.isConnected&&super.processingElementPosition(this.fontSizeBox.fontSizeBox,this.toolHandler.toolButton)})),window.addEventListener("resize",(e=>{this.fontSizeBox.fontSizeBox.isConnected&&this.fontSizeBox.open().then((e=>{super.processingElementPosition(this.fontSizeBox.fontSizeBox,this.toolHandler.toolButton)}))})),super.outClickElementListener(this.fontSizeBox.fontSizeBox,(({oldEvent:e,newEvent:t,isMouseOut:n})=>{n&&this.fontSizeBox.fontSizeBox.isConnected&&!super.isMouseInnerElement(this.toolHandler.toolButton)&&this.fontSizeBox.close()}))}static createDefaultStyle(){this.#T.textContent=`\n\t\t\t.${this.#T.id}-button{\n\t\t\t\tfont-size: 0.8rem;\n\t\t\t}\n\t\t`;let e=document.querySelector(`#${this.#T.id}`);return e?(this.#T?.remove(),this.#T=e,document.head.append(this.#T)):document.head.append(this.#T),this.#T}static get defaultStyle(){return this.#T}static set defaultStyle(e){this.#T.textContent=e}static set insertDefaultStyle(e){this.#T.sheet.insertRule(e)}constructor(e){super(jt,e),e||0!=Object.keys(this.dataset).length||(this.dataset.font_size=jt.fontSizeBox.selectedFont?.style.fontSize),this.style.fontSize=this.dataset.font_size}}class Mt extends bt{static toolHandler=new yt(this);static#T=Object.assign(document.createElement("style"),{id:"free-will-editor-italic-style"});static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-editor-italic",this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"I",className:`${this.#T.id}-button`,title:"Italic"}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":this.toolHandler.toolButton.dataset.tool_status="active"}}static createDefaultStyle(){this.#T.textContent=`\n\t\t\t.${this.#T.id}-button{\n\t\t\t\tfont-style: italic;\n\t\t\t\tfont-size: 0.8rem;\n\t\t\t}\n\n\t\t\t.${this.toolHandler.defaultClass} {\n\t\t\t\tfont-style: italic;\n\t\t\t}\n\t\t`;let e=document.querySelector(`#${this.#T.id}`);return e?(this.#T?.remove(),this.#T=e,document.head.append(this.#T)):document.head.append(this.#T),this.#T}static get defaultStyle(){return this.#T}static set defaultStyle(e){this.#T.textContent=e}static set insertDefaultStyle(e){this.#T.sheet.insertRule(e)}constructor(e){super(Mt,e)}}class Dt{#K=Object.assign(document.createElement("style"),{id:"free-will-editor-image-box"});#tt=Object.assign(document.createElement("div"),{className:"image-box-wrap",innerHTML:'\n            <div class="image-resize-container">\n                <div>\n                    <label class="image-box-resize-label" for="image-box-resize-width">width </label>\n                    <input list="image-box-resize-datalist" class="image-box-resize-input" id="image-box-resize-width" type="number" autocomplete="off"/>\n                    <div>\n                        <label class="image-box-resize-label-error-message" for="image-box-resize-width"></label>\n                    </div>\n                </div>\n                <div>\n                    <label class="image-box-resize-label" for="image-box-resize-height">height(auto) </label>\n                    <input list="image-box-resize-datalist" class="image-box-resize-input" id="image-box-resize-height" type="number" autocomplete="off" disabled/>\n                </div>\n            </div>\n            <div class="image-key-description-container" style="display:none;">\n                <kbd>Ctrl</kbd><kbd>Wheel</kbd>OR<kbd>Shift</kbd><kbd>Wheel</kbd>\n            </div>\n            <div class="image-button-container">\n                <a href="javascript:void(0);" class="download" download>\n                    <svg style="zoom:125%;" class="download-css-gg-push-down" width="1rem" height="1rem" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path d="M11.0001 1H13.0001V15.4853L16.2428 12.2427L17.657 13.6569L12.0001 19.3137L6.34326 13.6569L7.75748 12.2427L11.0001 15.4853V1Z" fill="#00000073" />\n                        <path d="M18 20.2877H6V22.2877H18V20.2877Z" fill="#00000073" />\n                    </svg>\n                </a>\n                <a href="javascript:void(0);" class="new-window">\n                    <svg style="zoom: 150%;" class="new-window-css-gg-expand" width="1rem" height="1rem" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path d="M12.3062 16.5933L12.2713 18.593L5.2724 18.4708L5.39457 11.4719L7.39426 11.5068L7.33168 15.092L15.2262 7.46833L11.6938 7.40668L11.7287 5.40698L18.7277 5.52915L18.6055 12.5281L16.6058 12.4932L16.6693 8.85507L8.72095 16.5307L12.3062 16.5933Z" fill="#00000073" />\n                    </svg>\n                </a>\n                <span class="image-editor">\n                    <svg class="image-editor-css-gg-pen" width="1rem" height="1rem" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path fill-rule="evenodd" clip-rule="evenodd" d="M21.2635 2.29289C20.873 1.90237 20.2398 1.90237 19.8493 2.29289L18.9769 3.16525C17.8618 2.63254 16.4857 2.82801 15.5621 3.75165L4.95549 14.3582L10.6123 20.0151L21.2189 9.4085C22.1426 8.48486 22.338 7.1088 21.8053 5.99367L22.6777 5.12132C23.0682 4.7308 23.0682 4.09763 22.6777 3.70711L21.2635 2.29289ZM16.9955 10.8035L10.6123 17.1867L7.78392 14.3582L14.1671 7.9751L16.9955 10.8035ZM18.8138 8.98525L19.8047 7.99429C20.1953 7.60376 20.1953 6.9706 19.8047 6.58007L18.3905 5.16586C18 4.77534 17.3668 4.77534 16.9763 5.16586L15.9853 6.15683L18.8138 8.98525Z" fill="#00000073" />\n                        <path d="M2 22.9502L4.12171 15.1717L9.77817 20.8289L2 22.9502Z" fill="#00000073" />\n                    </svg>\n                </span>\n            </div>\n        '});#nt;#ot;constructor(){let e=document.querySelector(`#${this.#K.id}`);e?this.#K=e:document.head.append(this.createStyle()),document.addEventListener("keydown",(e=>{if(this.#tt.hasAttribute("data-is_shft"))return;let{key:t}=e;"Shift"===t&&(this.#tt.dataset.is_shft="")})),document.addEventListener("keyup",(e=>{if(!this.#tt.hasAttribute("data-is_shft"))return;let{key:t}=e;"Shift"===t&&this.#tt.removeAttribute("data-is_shft")})),this.#tt.addEventListener("wheel",(e=>{if(this.#tt.hasAttribute("data-is_shft"))return;let{deltaY:t}=e;this.#tt.scrollTo(this.#tt.scrollLeft+t,void 0)}),{passive:!0});let[t,n]=this.#tt.querySelectorAll("#image-box-resize-width, #image-box-resize-height");window.addEventListener("keyup",(e=>{this.image&&this.resizeRememberTarget&&t.hasAttribute("data-is_ctrl")&&this.image.parentElement.matches(":hover")&&t.removeAttribute("data-is_ctrl")})),window.addEventListener("keydown",(e=>{let n=e.composedPath();this.image&&this.resizeRememberTarget&&n[0]!=t&&this.image.parentElement.matches(":hover")&&(e.ctrlKey?t.dataset.is_ctrl="":t.removeAttribute("data-is_ctrl"))})),window.addEventListener("wheel",(e=>{this.image&&this.resizeRememberTarget&&this.image.parentElement.hasAttribute("data-is_resize_click")&&e.composedPath()[0]!=t&&this.image.parentElement.matches(":hover")&&(t.hasAttribute("data-is_ctrl")?t.value=Number(t.value)+-1*e.deltaY:t.value=Number(t.value)+-1*e.deltaY/100,this.oninputEvent(this.image,t,t,n,this.resizeRememberTarget))}))}addImageHoverEvent(e,t){let n=this.#tt.querySelector(".image-key-description-container");e.parentElement.onmouseenter=()=>{if(!e.src||""==e.src||e.hasAttribute("data-error"))return;let o=e.getRootNode();if(o!=document?o.append(this.#K):document.head.append(this.#K),e.parentElement&&(e.parentElement!==this.#tt.parentElement||!this.#tt.classList.contains("start"))){e.parentElement.append(this.#tt),this.#st(e,t),this.#it(e);let o=setInterval((()=>{this.#tt.isConnected&&e.complete&&e.parentElement===this.#tt.parentElement&&!this.#tt.classList.contains("start")&&(this.#tt.classList.add("start"),this.image=e,this.resizeRememberTarget=t,e.parentElement.onclick=t=>{e.src&&""!=e.src&&t.composedPath()[0]==e&&!e.hasAttribute("data-error")&&(this.#tt.classList.add("start"),e.parentElement.toggleAttribute("data-is_resize_click"),this.falsh(e.parentElement),e.parentElement.hasAttribute("data-is_resize_click")?n.style.display="":n.style.display="none")},clearInterval(o))}),50)}},e.parentElement.onmouseleave=()=>{this.#tt.classList.remove("start"),e.parentElement.hasAttribute("data-is_resize_click")&&(n.style.display="none",this.falsh(e.parentElement)),e.parentElement.removeAttribute("data-is_resize_click")}}falsh(e){return new Promise((t=>{let n=document.createElement("div");Object.assign(n.style,{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",background:"rgba(255, 255, 255, 0.4)",transition:"opacity 0.2s ease 0s",opacity:0}),e.append(n);let o=setInterval((()=>{n.isConnected&&(clearInterval(o),n.style.opacity=1,n.ontransitionend=()=>{n.style.opacity=0,n.ontransitionend=()=>{n.remove(),t()}})}),50)}))}#st(e,t){return new Promise((n=>{let[o,s]=this.#tt.querySelectorAll("#image-box-resize-width, #image-box-resize-height");o.value=e.width,s.value=e.height,o.labels[0].textContent="width : ",o.labels[1].textContent="",this.prevValue=void 0,o.oninput=n=>this.oninputEvent(e,n.target,o,s,t),o.onkeydown=e=>{e.ctrlKey?o.dataset.is_ctrl="":o.removeAttribute("data-is_ctrl")},o.onkeyup=e=>{o.removeAttribute("data-is_ctrl")},o.onblur=()=>{o.removeAttribute("data-is_ctrl")},o.onwheel=n=>{n.preventDefault(),o.hasAttribute("data-is_ctrl")?o.value=Number(o.value)+-1*n.deltaY:o.value=Number(o.value)+-1*n.deltaY/100,this.oninputEvent(e,n.target,o,s,t)},n({width:o,height:s})}))}oninputEvent(e,t,n,o,s){if(isNaN(Number(t.value)))return void(t.value=t.value.replace(/\D/g,""));Number(t.value)<50?(n.labels[1].textContent="(min 50)",t.value=50):n.labels[1].textContent="",e[t.id.includes("width")?"width":"height"]=t.value;let i=e.getBoundingClientRect();this.prevValue&&parseInt(this.prevValue)==parseInt(i.width)&&(n.value=parseInt(this.prevValue),n.labels[1].textContent=`(max ${parseInt(this.prevValue)}) : `),this.prevValue=i.width,s.dataset.width=n.value}#it(e){return new Promise((t=>{let[n,o]=[...this.#tt.querySelectorAll(".download-css-gg-push-down, .new-window-css-gg-expand")].map((e=>e.parentElement));n.href=e.src,o.href=e.src,n.download=e.dataset.image_name,o.target="_blank",t({download:n,newWindow:o})}))}get imageBox(){return this.#tt}get style(){return this.#K}set style(e){this.#K.textContent=e}set insertStyle(e){this.#K.sheet.insertRule(e)}set image(e){this.#nt=e}get image(){return this.#nt}set resizeRememberTarget(e){this.#ot=e}get resizeRememberTarget(){return this.#ot}createStyle(){return this.#K.textContent="\n            .image-box-wrap{\n                position: absolute;\n                display: flex;\n                justify-content: space-between;\n                width: 100%;\n                background: linear-gradient(to bottom, #ff8787 -73%, #ffffffcf 115%);\n                color: white;\n                top:-20%;\n                opacity: 0;\n                transition: all 1s;\n                white-space: nowrap;\n                overflow-y: clip;\n                overflow-x: auto;\n            }\n            .image-box-wrap::-webkit-scrollbar{\n                display: none;\n            }\n            .image-box-wrap:hover::-webkit-scrollbar{\n                display: initial;\n                width: 7px;\n                height: 7px;\n            }\n            .image-box-wrap:hover::-webkit-scrollbar-track{\n                background: #00000040;\n                border-radius: 100px;\n                box-shadow: inset 0 0 5px #000000fc;\n            }\n            .image-box-wrap:hover::-webkit-scrollbar-thumb {\n                background: #0c0c0c38;\n                border-radius: 100px;\n                box-shadow: inset 0 0 5px #000000;\n            }\n            .image-box-wrap:hover::-webkit-scrollbar-thumb:hover {\n                /*background: #44070757;*/\n                background: #34000075; \n            }\n            .image-box-wrap.start{\n                top: 0;\n                opacity: 1;\n                transition: all 0.5s;\n            }\n            .image-box-wrap .image-button-container,\n            .image-box-wrap .image-resize-container, \n            .image-box-wrap .image-key-description-container{\n                display: flex;\n                gap: 1.5vw;\n                padding: 1.7%;\n                align-items: center;\n            }\n            .image-box-wrap .image-resize-container .image-box-resize-label{\n                background: linear-gradient(to right, #e50bff, #004eff);\n                -webkit-background-clip: text;\n                -webkit-text-fill-color: transparent;\n            }\n            .image-box-wrap .image-resize-container .image-box-resize-input{\n                outline: none;\n                border: none;\n                background-image: linear-gradient(#fff1f1d4, #ffffffeb), linear-gradient(to right, #a189890d 0%,  #ed89b275 100%);\n                background-origin: border-box;\n                background-clip: content-box, border-box;\n                background-color: #00000000; \n                width: 3.2rem;\n                height: 100%;\n                color: #ffb6b6;\n                font-size: 0.9rem;\n                text-align: center;\n            }\n            .image-box-wrap .image-button-container .new-window,\n            .image-box-wrap .image-button-container .download,\n            .image-box-wrap .image-button-container .image-editor{\n                display: flex;\n                align-items: center;\n                border: none;\n                background:none;\n                position:relative;\n                cursor: pointer;\n            }\n\n            .image-box-wrap kbd {\n                background-color: #eee;\n                border-radius: 3px;\n                border: 1px solid #b4b4b4;\n                box-shadow:\n                0 1px 1px rgba(0, 0, 0, 0.2),\n                0 2px 0 0 rgba(255, 255, 255, 0.7) inset;\n                color: #333;\n                display: inline-block;\n                font-size: 0.85em;\n                font-weight: 700;\n                line-height: 1;\n                padding: 2px 4px;\n                white-space: nowrap;\n                height: fit-content;\n            }\n        ",this.#K}}class Ht extends bt{static toolHandler=new yt(this);static imageBox=new Dt;static customImageCallback;static#T=Object.assign(document.createElement("style"),{id:"free-will-editor-image-style"});static slotName="free-will-editor-image-description-slot";static#rt=Object.assign(document.createElement("input"),{type:"file",accept:"image/*"});static get selectedFile(){return this.#rt}static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-editor-image",this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"",className:`${this.#T.id}-button`,innerHTML:`\n            <svg class="${this.#T.id} css-gg-image-icon"\n                width="0.9rem"\n                height="0.9rem"\n                viewBox="0 0 24 24"\n                fill="none"\n                xmlns="http://www.w3.org/2000/svg"\n                >\n                <path\n                    fill-rule="evenodd"\n                    clip-rule="evenodd"\n                    d="M7 7C5.34315 7 4 8.34315 4 10C4 11.6569 5.34315 13 7 13C8.65685 13 10 11.6569 10 10C10 8.34315 8.65685 7 7 7ZM6 10C6 9.44772 6.44772 9 7 9C7.55228 9 8 9.44772 8 10C8 10.5523 7.55228 11 7 11C6.44772 11 6 10.5523 6 10Z"\n                    fill="currentColor"\n                />\n                <path\n                    fill-rule="evenodd"\n                    clip-rule="evenodd"\n                    d="M3 3C1.34315 3 0 4.34315 0 6V18C0 19.6569 1.34315 21 3 21H21C22.6569 21 24 19.6569 24 18V6C24 4.34315 22.6569 3 21 3H3ZM21 5H3C2.44772 5 2 5.44772 2 6V18C2 18.5523 2.44772 19 3 19H7.31374L14.1924 12.1214C15.364 10.9498 17.2635 10.9498 18.435 12.1214L22 15.6863V6C22 5.44772 21.5523 5 21 5ZM21 19H10.1422L15.6066 13.5356C15.9971 13.145 16.6303 13.145 17.0208 13.5356L21.907 18.4217C21.7479 18.7633 21.4016 19 21 19Z"\n                    fill="currentColor"\n                />\n            </svg>\n            `,title:"Image"}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":(this.#rt.click(),this.#rt.onchange=()=>{this.toolHandler.toolButton.dataset.tool_status="active"})}}static createDefaultStyle(){this.#T.textContent=`\n            .${this.toolHandler.defaultClass} {\n                position: relative;\n            }\n            .${this.#T.id}.css-gg-image-icon {\n                zoom:120%;\n            }\n            .${this.#T.id}.image-description{            \n                cursor: pointer;\n                display: inline-flex;\n                align-items: center;\n            }\n\n            .${this.#T.id}.image-description::after{\n                margin-left: 0.5em;\n                content: ' ['attr(data-file_name)'] 'attr(data-open_status);\n                font-size: small;\n                color: #bdbdbd;\n            }\n\n            .${this.#T.id}.image-contanier{\n                width: fit-content;\n                transition: height 0.5s ease-in-out;\n                overflow: hidden;\n                position: relative;\n            }\n            .${this.#T.id}.image-contanier img{\n                max-width: 100%;\n                height: auto;\n                aspect-ratio: attr(width) / attr(height);\n                image-rendering: auto;\n            }\n        `;let e=document.querySelector(`#${this.#T.id}`);return e?(this.#T?.remove(),this.#T=e,document.head.append(this.#T)):document.head.append(this.#T),this.#T}static get defaultStyle(){return this.#T}static set defaultStyle(e){this.#T.textContent=e}static set insertDefaultStyle(e){this.#T.sheet.insertRule(e)}#at;imgLoadEndCallback=e=>{};image=document.createElement("img");constructor(e){if(super(Ht,e,{deleteOption:bt.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE}),e||0!=Object.keys(this.dataset).length)this.dataset.url&&!this.dataset.url.startsWith("blob:file")||!this.dataset.base64?Ht.customImageCallback&&"function"==typeof Ht.customImageCallback?Ht.customImageCallback(this):this.dataset.url&&(this.image.src=this.dataset.url):fetch(this.dataset.base64).then((async e=>e.blob().then((t=>{let n=URL.createObjectURL(t,e.headers.get("Content-Type"));this.dataset.url=n,this.image.src=this.dataset.url}))));else{this.#at=Ht.selectedFile.cloneNode(!0),Ht.selectedFile.files=(new DataTransfer).files,this.dataset.url=URL.createObjectURL(this.#at.files[0]),this.dataset.name=this.#at.files[0].name,this.dataset.last_modified=this.#at.files[0].lastModified,this.dataset.size=this.#at.files[0].size,this.dataset.content_type=this.#at.files[0].type;let e=URL.createObjectURL(this.#at.files[0],this.dataset.content_type);this.dataset.url=e,this.image.type=this.dataset.content_type,this.image.src=this.dataset.url}if(!this.dataset.name)throw this.remove(),new Error(`this file is undefined ${this.dataset.name}`);this.attachShadow({mode:"open"}),this.shadowRoot.append(Ht.defaultStyle.cloneNode(!0)),this.createDefaultContent().then((({wrap:e,description:t,slot:n,aticle:o})=>{this.connectedChildAfterCallback=e=>{o.append(...e)}})),this.disconnectedAfterCallback=()=>{this.dataset.url.startsWith("blob:file")&&setTimeout((()=>{URL.revokeObjectURL(this.dataset.url)}),12e4)}}createDefaultContent(){return new Promise((e=>{let t=Object.assign(document.createElement("div"),{});t.draggable=!1,this.shadowRoot.append(t);let n=Object.assign(document.createElement("div"),{className:`${Ht.defaultStyle.id} image-contanier`});this.image.dataset.image_name=this.dataset.name,n.append(this.image),this.image.onload=()=>{this.dataset.width&&(this.image.width=this.dataset.width)},this.image.onerror=()=>{this.image.dataset.error=""};let{description:o,slot:s,aticle:i}=this.createDescription(this.image,n);this.connectedAfterOnlyOneCallback=()=>{0!=this.childNodes.length&&"BR"!=this.childNodes[0]?.tagName&&i.append(...[...this.childNodes].filter((e=>e!=i))),t.replaceChildren(...[o,n].filter((e=>null!=e))),Ht.imageBox.addImageHoverEvent(this.image,this),"BR"==this.nextSibling?.tagName&&this.nextSibling.remove(),e({wrap:t,description:o,slot:s,aticle:i})}}))}createDescription(e,t){let n=Object.assign(document.createElement("div"),{className:`${Ht.defaultStyle.id} image-description`});n.dataset.file_name=this.dataset.name,n.dataset.open_status=this.dataset.open_status||"▼",t.style.height=this.dataset.height||"auto";let{slot:o,aticle:s}=this.createSlot();return n.append(o),n.onclick=o=>{"▼"==n.dataset.open_status?(n.dataset.open_status="▶",t.style.height=window.getComputedStyle(e).height,setTimeout((()=>{t.style.height="0px",this.dataset.height="0px"}),100)):(n.dataset.open_status="▼",setTimeout((()=>{t.style.height=window.getComputedStyle(e).height,this.dataset.height="auto"}),100),e.style.opacity="",e.style.visibility=""),this.dataset.open_status=n.dataset.open_status},t.ontransitionend=()=>{"▼"==n.dataset.open_status?t.style.height="auto":(e.style.opacity=0,e.style.visibility="hidden")},{description:n,slot:o,aticle:s}}createSlot(){let e=document.createElement("div");e.contentEditable="false",e.draggable="false";let t=Array.from(window.crypto.getRandomValues(new Uint32Array(16)),(e=>e.toString(32).padStart(2,"0"))).join("");return e.append(...this.childNodes),e.slot=Ht.slotName+"-"+t,this.append(e),{slot:Object.assign(document.createElement("slot"),{name:Ht.slotName+"-"+t}),aticle:e}}get selectedFile(){return this.#at}}class zt{#K=Object.assign(document.createElement("style"),{id:"free-will-editor-video-box"});#lt=Object.assign(document.createElement("div"),{className:"video-box-wrap",innerHTML:'\n            <div class="video-resize-container">\n                <div>\n                    <label class="video-box-resize-label" for="video-box-resize-width">width : </label>\n                    <input list="video-box-resize-datalist" class="video-box-resize-input" id="video-box-resize-width" type="number" autocomplete="off"/>\n                    <div>\n                        <label class="video-box-resize-label-error-message" for="video-box-resize-width"></label>\n                    </div>\n                </div>\n                <div>\n                    <label class="video-box-resize-label" for="video-box-resize-height">height(auto) : </label>\n                    <input list="video-box-resize-datalist" class="video-box-resize-input" id="video-box-resize-height" type="number" autocomplete="off" disabled/>\n                </div>\n            </div>\n            <div class="video-key-description-container" style="display:none;">\n                <kbd>Ctrl</kbd><kbd>Wheel</kbd>OR<kbd>Shift</kbd><kbd>Wheel</kbd>\n            </div>\n            <div class="video-button-container">\n                <a href="javascript:void(0);" class="download" download>\n                    <svg style="zoom:140%;" class="download-css-gg-push-down"\n                        width="1rem"\n                        height="1rem"\n                        viewBox="0 0 24 24"\n                        fill="none"\n                        xmlns="http://www.w3.org/2000/svg"\n                    >\n                        <path\n                        d="M11.0001 1H13.0001V15.4853L16.2428 12.2427L17.657 13.6569L12.0001 19.3137L6.34326 13.6569L7.75748 12.2427L11.0001 15.4853V1Z"\n                        fill="#00000073"\n                        />\n                        <path d="M18 20.2877H6V22.2877H18V20.2877Z" fill="#00000073" />\n                    </svg>\n                </a>\n                <a href="javascript:void(0);" class="new-window">\n                    <svg style="zoom: 150%;" class="new-window-css-gg-expand"\n                        width="1rem"\n                        height="1rem"\n                        viewBox="0 0 24 24"\n                        fill="none"\n                        xmlns="http://www.w3.org/2000/svg"\n                    >\n                        <path\n                        d="M12.3062 16.5933L12.2713 18.593L5.2724 18.4708L5.39457 11.4719L7.39426 11.5068L7.33168 15.092L15.2262 7.46833L11.6938 7.40668L11.7287 5.40698L18.7277 5.52915L18.6055 12.5281L16.6058 12.4932L16.6693 8.85507L8.72095 16.5307L12.3062 16.5933Z"\n                        fill="#00000073"\n                        />\n                    </svg>\n                </a>\n            </div>\n        '});#ct;#ot;constructor(){let e=document.querySelector(`#${this.#K.id}`);e?this.#K=e:document.head.append(this.createStyle()),document.addEventListener("keydown",(e=>{if(this.#lt.hasAttribute("data-is_shft"))return;let{key:t}=e;"Shift"===t&&(this.#lt.dataset.is_shft="")})),document.addEventListener("keyup",(e=>{if(!this.#lt.hasAttribute("data-is_shft"))return;let{key:t}=e;"Shift"===t&&this.#lt.removeAttribute("data-is_shft")})),this.#lt.addEventListener("wheel",(e=>{if(this.#lt.hasAttribute("data-is_shft"))return;let{deltaY:t}=e;this.#lt.scrollTo(this.#lt.scrollLeft+t,void 0)}),{passive:!0});let[t,n]=this.#lt.querySelectorAll("#video-box-resize-width, #video-box-resize-height");window.addEventListener("keyup",(e=>{this.video&&this.resizeRememberTarget&&t.hasAttribute("data-is_ctrl")&&this.video.parentElement.matches(":hover")&&t.removeAttribute("data-is_ctrl")})),window.addEventListener("keydown",(e=>{let n=e.composedPath();this.video&&this.resizeRememberTarget&&n[0]!=t&&this.video.parentElement.matches(":hover")&&(e.ctrlKey?t.dataset.is_ctrl="":t.removeAttribute("data-is_ctrl"))})),window.addEventListener("wheel",(e=>{this.video&&this.resizeRememberTarget&&this.video.parentElement.hasAttribute("data-is_resize_click")&&e.composedPath()[0]!=t&&this.video.parentElement.matches(":hover")&&(t.hasAttribute("data-is_ctrl")?t.value=Number(t.value)+-1*e.deltaY:t.value=Number(t.value)+-1*e.deltaY/100,this.oninputEvent(this.video,t,n,this.resizeRememberTarget))}))}addVideoHoverEvent(e,t){let n=this.#lt.querySelector(".video-key-description-container");e.parentElement.onmouseenter=()=>{if(!e.src||""==e.src||e.hasAttribute("data-error"))return;let o=e.getRootNode();if(o!=document?o.append(this.#K):document.head.append(this.#K),e.parentElement&&(e.parentElement!==this.#lt.parentElement||!this.#lt.classList.contains("start"))){e.parentElement.append(this.#lt),this.#st(e,t),this.#it(e);let o=setInterval((()=>{this.#lt.isConnected&&4==e.readyState&&e.parentElement===this.#lt.parentElement&&!this.#lt.classList.contains("start")&&(this.#lt.classList.add("start"),this.video=e,this.resizeRememberTarget=t,e.parentElement.onclick=t=>{e.src&&""!=e.src&&t.composedPath()[0]==e&&!e.hasAttribute("data-error")&&(e.parentElement.toggleAttribute("data-is_resize_click"),this.falsh(e.parentElement),e.parentElement.hasAttribute("data-is_resize_click")?n.style.display="":n.style.display="none")},clearInterval(o))}),50)}},e.parentElement.onmouseleave=()=>{this.#lt.classList.remove("start"),e.parentElement.hasAttribute("data-is_resize_click")&&(n.style.display="none",this.falsh(e.parentElement)),e.parentElement.removeAttribute("data-is_resize_click")}}falsh(e){return new Promise((t=>{let n=document.createElement("div");Object.assign(n.style,{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",background:"rgba(255, 255, 255, 0.4)",transition:"opacity 0.2s ease 0s",opacity:0}),e.append(n);let o=setInterval((()=>{n.isConnected&&(clearInterval(o),n.style.opacity=1,n.ontransitionend=()=>{n.style.opacity=0,n.ontransitionend=()=>{n.remove(),t()}})}),50)}))}#st(e,t){return new Promise((n=>{let[o,s]=this.#lt.querySelectorAll("#video-box-resize-width, #video-box-resize-height"),i=e.getBoundingClientRect();o.value=parseInt(i.width),s.value=parseInt(i.height),o.labels[0].textContent="width : ",o.labels[1].textContent="",this.prevValue=void 0,o.oninput=n=>this.oninputEvent(e,o,s,t),o.onkeydown=e=>{e.ctrlKey?o.dataset.is_ctrl="":o.removeAttribute("data-is_ctrl")},o.onkeyup=e=>{o.removeAttribute("data-is_ctrl")},o.onblur=()=>{o.removeAttribute("data-is_ctrl")},o.onwheel=n=>{n.preventDefault(),o.hasAttribute("data-is_ctrl")?o.value=Number(o.value)+-1*n.deltaY:o.value=Number(o.value)+-1*n.deltaY/100,this.oninputEvent(e,o,s,t)},n({width:o,height:s})}))}oninputEvent(e,t,n,o){if(isNaN(Number(t.value)))return void(t.value=t.value.replace(/\D/g,""));Number(t.value)<50?(t.labels[1].textContent="(min 50)",t.value=50):t.labels[1].textContent="",e[t.id.includes("width")?"width":"height"]=t.value;let s=e.getBoundingClientRect();this.prevValue&&parseInt(this.prevValue)==parseInt(s.width)&&(t.value=parseInt(this.prevValue),t.labels[1].textContent=`(max ${parseInt(this.prevValue)}) : `),this.prevValue=s.width,o.dataset.width=t.value}#it(e){return new Promise((t=>{let[n,o]=[...this.#lt.querySelectorAll(".download-css-gg-push-down, .new-window-css-gg-expand")].map((e=>e.parentElement));n.href=e.src,o.href=e.src,n.download=e.dataset.video_name,o.target="_blank",t({download:n,newWindow:o})}))}get videoBox(){return this.#lt}get style(){return this.#K}set style(e){this.#K.textContent=e}set insertStyle(e){this.#K.sheet.insertRule(e)}set video(e){this.#ct=e}get video(){return this.#ct}set resizeRememberTarget(e){this.#ot=e}get resizeRememberTarget(){return this.#ot}createStyle(){return this.#K.textContent="\n            .video-box-wrap{\n                position: absolute;\n                display: flex;\n                justify-content: space-between;\n                width: 100%;\n                background: linear-gradient(to bottom, #ff8787 -73%, #ffffffcf 115%);\n                color: white;\n                top:-20%;\n                opacity: 0;\n                transition: all 1s;\n                white-space: nowrap;\n                overflow-y: clip;\n                overflow-x: auto;\n            }\n            .video-box-wrap::-webkit-scrollbar{\n                display: none;\n            }\n            .video-box-wrap:hover::-webkit-scrollbar{\n                display: initial;\n                width: 7px;\n                height: 7px;\n            }\n            .video-box-wrap:hover::-webkit-scrollbar-track{\n                background: #00000040;\n                border-radius: 100px;\n                box-shadow: inset 0 0 5px #000000fc;\n            }\n            .video-box-wrap:hover::-webkit-scrollbar-thumb {\n                background: #0c0c0c38;\n                border-radius: 100px;\n                box-shadow: inset 0 0 5px #000000;\n            }\n            .video-box-wrap:hover::-webkit-scrollbar-thumb:hover {\n                /*background: #44070757;*/\n                background: #34000075; \n            }\n            .video-box-wrap.start{\n                top: 0;\n                opacity: 1;\n                transition: all 0.5s;\n            }\n            .video-box-wrap .video-button-container, \n            .video-box-wrap .video-resize-container,\n            .video-box-wrap .video-key-description-container{\n                display: flex;\n                gap: 1.5vw;\n                padding: 1.7%;\n                align-items: center;\n            }\n            .video-box-wrap .video-resize-container .video-box-resize-label{\n                background: linear-gradient(to right, #e50bff, #004eff);\n                -webkit-background-clip: text;\n                -webkit-text-fill-color: transparent;\n            }\n            .video-box-wrap .video-resize-container .video-box-resize-input{\n                outline: none;\n                border: none;\n                background-image: linear-gradient(#fff1f1d4, #ffffffeb), linear-gradient(to right, #a189890d 0%,  #ed89b275 100%);\n                background-origin: border-box;\n                background-clip: content-box, border-box;\n                background-color: #00000000; \n                width: 3.2rem;\n                height: 100%;\n                color: #ffb6b6;\n                font-size: 0.9rem;\n                text-align: center;\n            }\n            .video-box-wrap .video-button-container .new-window,\n            .video-box-wrap .video-button-container .download{\n                display: flex;\n                align-items: center;\n                border: none;\n                background:none;\n                position:relative;\n                cursor: pointer;\n            }\n\n            .video-box-wrap kbd {\n                background-color: #eee;\n                border-radius: 3px;\n                border: 1px solid #b4b4b4;\n                box-shadow:\n                0 1px 1px rgba(0, 0, 0, 0.2),\n                0 2px 0 0 rgba(255, 255, 255, 0.7) inset;\n                color: #333;\n                display: inline-block;\n                font-size: 0.85em;\n                font-weight: 700;\n                line-height: 1;\n                padding: 2px 4px;\n                white-space: nowrap;\n                height: fit-content;\n            }\n        ",this.#K}}class $t extends bt{static toolHandler=new yt(this);static videoBox=new zt;static customVideoCallback;static#T=Object.assign(document.createElement("style"),{id:"free-will-editor-video-style"});static descriptionName="free-will-editor-video-description-slot";static#rt=Object.assign(document.createElement("input"),{type:"file",accept:"video/*"});static get selectedFile(){return this.#rt}static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-editor-video",this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"",className:`${this.#T.id}-button`,innerHTML:`\n            <svg class="${this.#T.id} css-gg-video-icon"\n            width="0.9rem"\n            height="0.9rem"\n            viewBox="0 0 24 24"\n            fill="none"\n            xmlns="http://www.w3.org/2000/svg"\n            >\n                <path\n                    fill-rule="evenodd"\n                    clip-rule="evenodd"\n                    d="M4 4.5V6.5H12V7.5H3C1.34315 7.5 0 8.84315 0 10.5V16.5C0 18.1569 1.34315 19.5 3 19.5H15C16.5731 19.5 17.8634 18.2892 17.9898 16.7487L24 17.5V9.5L17.9898 10.2513C17.8634 8.71078 16.5731 7.5 15 7.5H14V5.5C14 4.94772 13.5523 4.5 13 4.5H4ZM18 12.2656V14.7344L22 15.2344V11.7656L18 12.2656ZM16 10.5C16 9.94772 15.5523 9.5 15 9.5H3C2.44772 9.5 2 9.94772 2 10.5V16.5C2 17.0523 2.44772 17.5 3 17.5H15C15.5523 17.5 16 17.0523 16 16.5V10.5Z"\n                    fill="currentColor"\n                />\n            </svg>\n            `,title:"Video"}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":(this.#rt.onchange=()=>{this.toolHandler.toolButton.dataset.tool_status="active"},this.#rt.click())}}static createDefaultStyle(){this.#T.textContent=`\n            .${this.toolHandler.defaultClass} {\n                position: relative;\n            }\n            .${this.#T.id}.css-gg-video-icon {\n                zoom:120%;\n            }\n            .${this.#T.id}.video-description{            \n                cursor: pointer;\n                display: inline-flex;\n                align-items: center;\n            }\n            .${this.#T.id}.video-description::after{\n                margin-left: 0.5em;\n                content: ' ['attr(data-file_name)'] 'attr(data-open_status);\n                font-size: small;\n                color: #bdbdbd;\n            }\n\n            .${this.#T.id}.video-contanier{\n                width: fit-content;\n                transition: height 0.5s ease-in-out;\n                overflow: hidden;\n                position: relative;\n            }\n            .${this.#T.id}.video-contanier video{\n                max-width: 100%;\n                height: auto;\n                aspect-ratio: attr(width) / attr(height);\n            }\n        `;let e=document.querySelector(`#${this.#T.id}`);return e?(this.#T?.remove(),this.#T=e,document.head.append(this.#T)):document.head.append(this.#T),this.#T}static get defaultStyle(){return this.#T}static set defaultStyle(e){this.#T.textContent=e}static set insertDefaultStyle(e){this.#T.sheet.insertRule(e)}#at;videoLoadEndCallback=e=>{};video=Object.assign(document.createElement("video"),{loop:!0,controls:!0});constructor(e){if(super($t,e,{deleteOption:bt.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE}),e||0!=Object.entries(this.dataset).length)this.dataset.url&&!this.dataset.url.startsWith("blob:file")||!this.dataset.base64?$t.customVideoCallback&&"function"==typeof $t.customVideoCallback?$t.customVideoCallback(this):this.dataset.url&&(this.video.src=this.dataset.url):fetch(this.dataset.base64).then((async e=>e.blob().then((t=>{let n=URL.createObjectURL(t,e.headers.get("Content-Type"));this.dataset.url=n,this.video.src=this.dataset.url}))));else{this.#at=$t.selectedFile.cloneNode(!0),$t.selectedFile.files=(new DataTransfer).files,this.dataset.url=URL.createObjectURL(this.#at.files[0]),this.dataset.name=this.#at.files[0].name,this.dataset.lastModified=this.#at.files[0].lastModified,this.dataset.size=this.#at.files[0].size,this.dataset.content_type=this.#at.files[0].type;let e=URL.createObjectURL(this.#at.files[0],this.dataset.content_type);this.dataset.url=e,this.video.type=this.dataset.content_type,this.video.src=this.dataset.url}if(!this.dataset.name)throw this.remove(),new Error(`this file is undefined ${this.dataset.name}`);this.attachShadow({mode:"open"}),this.shadowRoot.append($t.defaultStyle.cloneNode(!0)),this.createDefaultContent().then((({wrap:e,description:t,slot:n,aticle:o})=>{this.connectedChildAfterCallback=e=>{o.append(...e)}})),this.disconnectedAfterCallback=()=>{this.dataset.url.startsWith("blob:file")&&setTimeout((()=>{URL.revokeObjectURL(this.dataset.url)}),12e4)}}createDefaultContent(){return new Promise((e=>{let t=Object.assign(document.createElement("div"),{});t.draggable=!1,this.shadowRoot.append(t);let n=Object.assign(document.createElement("div"),{className:`${$t.defaultStyle.id} video-contanier`});this.video.dataset.video_name=this.dataset.name,n.append(this.video),this.video.onload=()=>{(0!=this.file.length&&""==video.canPlayType(this.file.files[0].type)||this.dataset.name&&""==this.video.canPlayType(`video/${this.dataset.name.substring(this.dataset.name.lastIndexOf(".")+1)}`))&&this.videoIsNotWorking()},this.video.onloadeddata=()=>{this.video.play(),this.dataset.width&&(this.video.width=this.dataset.width)},this.video.onerror=()=>{};let{description:o,slot:s,aticle:i}=this.createDescription(this.video,n);this.connectedAfterOnlyOneCallback=()=>{0!=this.childNodes.length&&"BR"!=this.childNodes[0]?.tagName&&i.append(...[...this.childNodes].filter((e=>e!=i))),t.replaceChildren(...[o,n].filter((e=>null!=e))),$t.videoBox.addVideoHoverEvent(this.video,this),"BR"==this.nextSibling?.tagName&&this.nextSibling.remove(),e({wrap:t,description:o,slot:s,aticle:i})}}))}createDescription(e,t){let n=Object.assign(document.createElement("div"),{className:`${$t.defaultStyle.id} video-description`});n.dataset.file_name=this.dataset.name,n.dataset.open_status=this.dataset.open_status||"▼",t.style.height=this.dataset.height||"auto";let{slot:o,aticle:s}=this.createSlot();return o&&n.append(o),n.onclick=o=>{"▼"==n.dataset.open_status?(n.dataset.open_status="▶",t.style.height=window.getComputedStyle(e).height,setTimeout((()=>{t.style.height="0px",this.dataset.height="0px"}),100)):(n.dataset.open_status="▼",setTimeout((()=>{t.style.height=window.getComputedStyle(e).height,this.dataset.height="auto"}),100),e.style.opacity="",e.style.visibility=""),this.dataset.open_status=n.dataset.open_status},t.ontransitionend=()=>{"▼"==n.dataset.open_status?t.style.height="auto":(e.style.opacity=0,e.style.visibility="hidden")},{description:n,slot:o,aticle:s}}createSlot(){let e=document.createElement("div");e.contentEditable="false",e.draggable="false";let t=Array.from(window.crypto.getRandomValues(new Uint32Array(16)),(e=>e.toString(32).padStart(2,"0"))).join("");return e.append(...this.childNodes),e.slot=$t.descriptionName+"-"+t,this.append(e),{slot:Object.assign(document.createElement("slot"),{name:$t.descriptionName+"-"+t}),aticle:e}}videoIsNotWorking(){alert(`${this.dataset.name}은 호환되지 않는 영상입니다.`),this.remove()}get selectedFile(){return this.#at}}class Ft extends bt{static toolHandler=new yt(this);static customResourcesCallback=()=>{};static#T=Object.assign(document.createElement("style"),{id:"free-will-editor-resources-style"});static slotName="free-will-editor-resources-description-slot";static#rt=Object.assign(document.createElement("input"),{type:"file"});static get selectedFile(){return this.#rt}static#dt=()=>{};static#ht=()=>{};static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-editor-resources",this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"",className:`${this.#T.id}-button`,innerHTML:`\n            <svg class="${this.#T.id} css-gg-file-add-icon" width="0.9rem" height="0.9rem" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path d="M10 18V16H8V14H10V12H12V14H14V16H12V18H10Z" fill="currentColor" />\n                <path\n                    fill-rule="evenodd"\n                    clip-rule="evenodd"\n                    d="M6 2C4.34315 2 3 3.34315 3 5V19C3 20.6569 4.34315 22 6 22H18C19.6569 22 21 20.6569 21 19V9C21 5.13401 17.866 2 14 2H6ZM6 4H13V9H19V19C19 19.5523 18.5523 20 18 20H6C5.44772 20 5 19.5523 5 19V5C5 4.44772 5.44772 4 6 4ZM15 4.10002C16.6113 4.4271 17.9413 5.52906 18.584 7H15V4.10002Z"\n                    fill="currentColor"\n                />\n            </svg>\n            `,title:"Resources"}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":(this.#rt.click(),this.#rt.onchange=()=>{this.toolHandler.toolButton.dataset.tool_status="active"})}}static createDefaultStyle(){this.#T.textContent=`\n            .${this.toolHandler.defaultClass} {\n                position: relative;\n            }\n            .${this.#T.id}.css-gg-file-add-icon {\n                zoom:120%;\n            }\n            .${this.#T.id}.resources-description{            \n                cursor: pointer;\n                display: inline-flex;\n                align-items: center;\n            }\n\n            .${this.#T.id}.resources-description::after{\n                margin-left: 0.5em;\n                content: ' ['attr(data-file_name)'] 'attr(data-open_status);\n                font-size: small;\n                color: #bdbdbd;\n            }\n            .${this.#T.id}.resources-download-button, .${this.#T.id}.resources-preview-button{\n                margin-left: 1vw;\n                border: solid 2px #e5e5e5;\n                cursor: pointer;\n                background: none;\n            }\n            .${this.#T.id}.resources-contanier{\n                width: auto;\n                transition: height 0.5s ease-in-out;\n                overflow: hidden;\n                position: relative;\n                margin-top: 0.7vh;\n            }\n            .${this.#T.id}.resources-contanier object{\n                width: 99%;\n                height: auto;\n                aspect-ratio: attr(width) / attr(height);\n                border: solid 2px #efefef;\n            }\n            .${this.#T.id}.resources-contanier object.unload{\n                width: auto;\n            }\n\n        `;let e=document.querySelector(`#${this.#T.id}`);return e?(this.#T?.remove(),this.#T=e,document.head.append(this.#T)):document.head.append(this.#T),this.#T}static get defaultStyle(){return this.#T}static set defaultStyle(e){this.#T.textContent=e}static set insertDefaultStyle(e){this.#T.sheet.insertRule(e)}static set resourcesCallback(e){this.#dt=e}static get resourcesCallback(){return this.#dt}static set sizeLimitOverCallback(e){this.#ht=e}static get sizeLimitOverCallback(){return this.#ht}#at;imgLoadEndCallback=e=>{};resources=Object.assign(document.createElement("object"),{});constructor(e){if(super(Ft,e,{deleteOption:bt.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE}),e||0!=Object.keys(this.dataset).length)Ft.customResourcesCallback&&"function"==typeof Ft.customResourcesCallback?Ft.customResourcesCallback(this):this.dataset.url;else{this.#at=Ft.selectedFile.cloneNode(!0),Ft.selectedFile.files=(new DataTransfer).files,this.dataset.url=URL.createObjectURL(this.#at.files[0]),this.dataset.name=this.#at.files[0].name,this.dataset.last_modified=this.#at.files[0].lastModified,this.dataset.size=this.#at.files[0].size,this.dataset.content_type=this.#at.files[0].type;let e=URL.createObjectURL(this.#at.files[0],this.dataset.content_type);this.dataset.url=e}if(this.resources.type=this.dataset.content_type,this.resources.data=this.dataset.url,this.resources.dataset.resources_name=this.dataset.name,!this.dataset.name)throw this.remove(),new Error(`this file is undefined ${this.dataset.name}`);this.attachShadow({mode:"open"}),this.shadowRoot.append(Ft.defaultStyle.cloneNode(!0)),this.createDefaultContent().then((({wrap:e,description:t,slot:n,aticle:o})=>{this.connectedChildAfterCallback=e=>{o.append(...e)}})),this.disconnectedAfterCallback=()=>{this.resources.remove(),this.dataset.url.startsWith("blob:file")}}createDefaultContent(){return new Promise((e=>{let t=Object.assign(document.createElement("div"),{});t.draggable=!1,this.shadowRoot.append(t);let n=Object.assign(document.createElement("div"),{className:`${Ft.defaultStyle.id} resources-contanier`});this.resources.onload=e=>{this.dataset.width&&(this.resources.width=this.dataset.width),this.resources.contentWindow?(this.resources.contentWindow.document.body.style.contentVisibility="auto",this.resources.contentWindow.document.body.style.containIntrinsicSize="1px 5000px"):this.resources.classList.add("unload"),Ft.resourcesCallback({status:"load",resources:this.resources})},this.resources.onerror=e=>{this.resources.dataset.error="",this.resources.contentWindow||this.resources.classList.add("unload"),Ft.resourcesCallback({status:"error",resources:this.resources})};let{description:o,slot:s,aticle:i}=this.createDescription(this.resources,n),r=Object.assign(document.createElement("button"),{className:`${Ft.defaultStyle.id} resources-download-button`,innerHTML:"<b>Download</b>",onclick:()=>{fetch(this.resources.data).then((e=>e.blob())).then((e=>{let t=URL.createObjectURL(e,this.dataset.content_type),n=document.createElement("a");n.href=t,n.download=this.dataset.name,n.click(),n.remove(),setTimeout((()=>{URL.revokeObjectURL(t)}),3e5)}))}}),a=Object.assign(document.createElement("button"),{className:`${Ft.defaultStyle.id} resources-preview-button`,innerHTML:"<b>Preview</b>",onclick:()=>{n.append(this.resources)}});this.connectedAfterOnlyOneCallback=()=>{0!=this.childNodes.length&&"BR"!=this.childNodes[0]?.tagName&&i.append(...[...this.childNodes].filter((e=>e!=i))),t.replaceChildren(...[o,r,a,n].filter((e=>null!=e))),"BR"==this.nextSibling?.tagName&&this.nextSibling.remove(),e({wrap:t,description:o,slot:s,aticle:i})}}))}createDescription(e,t){let n=Object.assign(document.createElement("div"),{className:`${Ft.defaultStyle.id} resources-description`});n.dataset.file_name=this.dataset.name,n.dataset.open_status=this.dataset.open_status||"▼",t.style.height=this.dataset.height||"auto",n.dataset.open_status="▼";let{slot:o,aticle:s}=this.createSlot();return n.append(o),n.onclick=o=>{"▼"==n.dataset.open_status?(n.dataset.open_status="▶",t.style.height=window.getComputedStyle(e).height,setTimeout((()=>{t.style.height="0px",this.dataset.height="0px"}),100)):(n.dataset.open_status="▼",setTimeout((()=>{t.style.height=window.getComputedStyle(e).height,this.dataset.height="auto"}),100),e.style.opacity="",e.style.visibility=""),this.dataset.open_status=n.dataset.open_status},t.ontransitionend=()=>{"▼"==n.dataset.open_status?t.style.height="auto":(e.style.opacity=0,e.style.visibility="hidden")},{description:n,slot:o,aticle:s}}createSlot(){let e=document.createElement("div");e.contentEditable="false",e.draggable="false";let t=Array.from(window.crypto.getRandomValues(new Uint32Array(16)),(e=>e.toString(32).padStart(2,"0"))).join("");return e.append(...this.childNodes),e.slot=Ft.slotName+"-"+t,this.append(e),{slot:Object.assign(document.createElement("slot"),{name:Ft.slotName+"-"+t}),aticle:e}}get selectedFile(){return this.#at}set resourcesUrl(e){let t=this.resources.cloneNode(!0);t.data=e,this.resources.after(t),this.resources.remove(),this.resources=t,t.onload=()=>{this.resources!=t&&(this.dataset.width&&(t.width=this.dataset.width),t.contentWindow||t.classList.add("unload"))},t.onerror=()=>{t.dataset.error="",t.contentWindow||t.classList.add("unload")}}get resourcesUrl(){this.resources.data}}class Ut extends bt{static toolHandler=new yt(this);static#T=Object.assign(document.createElement("style"),{id:"free-will-editor-code-style"});static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-code",this.toolHandler.isInline=!1,this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"",className:`${this.#T.id}-button`,innerHTML:`\n            <svg class="${this.#T.id} css-gg-code-icon"\n            width="0.9rem"\n            height="0.9rem"\n            viewBox="0 0 24 24"\n            fill="none"\n            xmlns="http://www.w3.org/2000/svg"\n            >\n                <path\n                d="M13.325 3.05011L8.66741 20.4323L10.5993 20.9499L15.2568 3.56775L13.325 3.05011Z"\n                fill="currentColor"\n                />\n                <path\n                d="M7.61197 18.3608L8.97136 16.9124L8.97086 16.8933L3.87657 12.1121L8.66699 7.00798L7.20868 5.63928L1.04956 12.2017L7.61197 18.3608Z"\n                fill="currentColor"\n                />\n                <path\n                d="M16.388 18.3608L15.0286 16.9124L15.0291 16.8933L20.1234 12.1121L15.333 7.00798L16.7913 5.63928L22.9504 12.2017L16.388 18.3608Z"\n                fill="currentColor"\n                />\n            </svg>\n            `,title:"Code Block"}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":this.toolHandler.toolButton.dataset.tool_status="active"}}static createDefaultStyle(){this.#T.textContent=`\n            .${this.#T.id}-button{\n            }\n            .${this.#T.id}.css-gg-code-icon{\n                zoom:120%;\n            }\n\t\t\t.${this.toolHandler.defaultClass} {\n                display: block;\n                background-color: #e7e7e7;\n                margin-inline: 0.5em;\n                border: solid 1px #d1d1d1;\n                border-radius: 4px;\n                white-space: pre-wrap;\n                font-family: monospace;\n                box-shadow: 0px 0px 3px 0px #d1d1d1;\n                padding: 0.5em 1em 0.5em 1em;\n\t\t\t}\n\t\t`;let e=document.querySelector(`#${this.#T.id}`);return e?(this.#T?.remove(),this.#T=e,document.head.append(this.#T)):document.head.append(this.#T),this.#T}static get defaultStyle(){return this.#T}static set defaultStyle(e){this.#T.textContent=e}static set insertDefaultStyle(e){this.#T.sheet.insertRule(e)}parentLine;constructor(e){super(Ut,e,{deleteOption:bt.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE})}}class Wt{#K=Object.assign(document.createElement("style"),{id:"free-will-editor-hyperlink-box"});#ut=Object.assign(document.createElement("div"),{className:"hyperlink-box-wrap"});#pt=20;#mt=Object.assign(document.createElement("input"),{autocomplete:"off",placeholder:"Please enter your link ",type:"url",name:"hyperlink-url-input",className:"hyperlink-url-input",required:!1});#gt=Object.assign(document.createElement("span"),{});#le=()=>{};#Qe;#ft;constructor(){let e=document.querySelector(`#${this.#K.id}`);e?this.#K=e:document.head.append(this.createStyle());let t=Object.assign(document.createElement("div"),{className:"url-input-text-wrapper"});t.append(this.#mt),this.#mt.oninput=e=>{this.#gt.isConnected&&this.#gt.remove()},this.#mt.onkeydown=e=>{"Enter"==e.key&&(e.preventDefault(),o.onclick())};let n=Object.assign(document.createElement("button"),{className:"cancel-button",type:"button",textContent:"cancel"});n.onclick=()=>{this.close()};let o=Object.assign(document.createElement("button"),{className:"apply-button",type:"button",textContent:"apply"});o.onclick=e=>{if(!this.#mt.checkValidity()){let e=this.#mt.value;if(this.#mt.value=`https://${this.#mt.value}`,!this.#mt.checkValidity())return void(this.#mt.value=e)}if(this.lastUrl=this.#mt.value,this.#mt.value="",this.#Qe){let e=window.getSelection();e.removeAllRanges(),e.addRange(this.#Qe)}this.applyCallback(e)};let s=Object.assign(document.createElement("div"),{className:"button-wrap"});s.append(n,o),this.#ut.append(t,s)}async open(){let e=window.getSelection();if(0!=e.rangeCount&&0==e.isCollapsed){let t=e.getRangeAt(0);this.#Qe=t.cloneRange()}document.body.append(this.#ut);let t=setInterval((()=>{this.#ut.isConnected&&(clearInterval(t),this.#mt.focus())}),50)}close(){this.#ut.remove()}set applyCallback(e){this.#le=e}get applyCallback(){return this.#le}get hyperlinkBox(){return this.#ut}createStyle(){return this.#K.textContent=`\n\t\t\t.hyperlink-box-wrap{\n\t\t\t\tbackground: #343434;\n\t\t\t\tposition: fixed;\n\t\t\t\tpadding: 0.9%;\n\t\t\t\twidth: ${this.#pt}vw;\n\t\t\t\theight: auto;\n\t\t\t\tcolor: white;\n\t\t\t\tmin-width: 100px;\n\t\t\t\toverflow-y: auto;\n\t\t\t\t-webkit-user-select: none;\n\t\t\t\t-moz-user-select: none;\n\t\t\t\t-ms-user-select: none;\n\t\t\t\tuser-select: none;\n\t\t\t\toverflow-x: hidden;\n\t\t\t\tdisplay: grid;\n\t\t\t\tgap: 1vh;\n\t\t\t\talign-content: center;\n\t\t\t\tjustify-content: space-around;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-items: center;\n                z-index: 999;\n\t\t\t}\n\t\t\t.hyperlink-box-wrap .url-input-text-wrapper{\n\t\t\t\twidth: inherit;\n\t\t\t}\n\t\t\t.hyperlink-box-wrap .url-input-text-wrapper .hyperlink-url-input{\n\t\t\t\twidth: -webkit-fill-available;\n\t\t\t\tbackground-color: #ffffff00;\n\t\t\t\tcolor: #b9b9b9;\n\t\t\t\tborder-bottom: solid 1px #4c4c4c;\n\t\t\t\tborder-left: solid 1px #4c4c4c;\n\t\t\t}\n\t\t\t.hyperlink-box-wrap .button-wrap{\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: space-around;\n\t\t\t\twidth: inherit;\n\t\t\t}\n\t\t\t.hyperlink-box-wrap .button-wrap .apply-button,\n\t\t\t.hyperlink-box-wrap .button-wrap .cancel-button {\n\t\t\t\tbackground: none;\n\t\t\t\tborder: revert;\n\t\t\t\tcolor: #b9b9b9;\n\t\t\t\tborder-color: #464646;\n\t\t\t}\n\t\t`,this.#K}}class qt extends bt{static toolHandler=new yt(this);static#T=Object.assign(document.createElement("style"),{id:"free-will-editor-link-style"});static hyperlinkBox;static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-editor-link",this.toolHandler.toolButton=Object.assign(document.createElement("button"),{className:`${this.#T.id}-button`,innerHTML:`\n\t\t\t\t<svg class="${this.#T.id} css-gg-link-icon"\n\t\t\t\twidth="0.9rem"\n\t\t\t\theight="0.9rem"\n\t\t\t\tviewBox="0 0 24 24"\n\t\t\t\tfill="none"\n\t\t\t\txmlns="http://www.w3.org/2000/svg"\n\t\t\t\t>\n\t\t\t\t\t<path\n\t\t\t\t\t\td="M14.8284 12L16.2426 13.4142L19.071 10.5858C20.6331 9.02365 20.6331 6.49099 19.071 4.9289C17.509 3.3668 14.9763 3.3668 13.4142 4.9289L10.5858 7.75732L12 9.17154L14.8284 6.34311C15.6095 5.56206 16.8758 5.56206 17.6568 6.34311C18.4379 7.12416 18.4379 8.39049 17.6568 9.17154L14.8284 12Z"\n\t\t\t\t\t\tfill="currentColor"\n\t\t\t\t\t/>\n\t\t\t\t\t<path\n\t\t\t\t\t\td="M12 14.8285L13.4142 16.2427L10.5858 19.0711C9.02372 20.6332 6.49106 20.6332 4.92896 19.0711C3.36686 17.509 3.36686 14.9764 4.92896 13.4143L7.75739 10.5858L9.1716 12L6.34317 14.8285C5.56212 15.6095 5.56212 16.8758 6.34317 17.6569C7.12422 18.4379 8.39055 18.4379 9.1716 17.6569L12 14.8285Z"\n\t\t\t\t\t\tfill="currentColor"\n\t\t\t\t\t/>\n\t\t\t\t\t<path\n\t\t\t\t\t\td="M14.8285 10.5857C15.219 10.1952 15.219 9.56199 14.8285 9.17147C14.4379 8.78094 13.8048 8.78094 13.4142 9.17147L9.1716 13.4141C8.78107 13.8046 8.78107 14.4378 9.1716 14.8283C9.56212 15.2188 10.1953 15.2188 10.5858 14.8283L14.8285 10.5857Z"\n\t\t\t\t\t\tfill="currentColor"\n\t\t\t\t\t/>\n\t\t\t\t</svg>\n\t\t\t`,title:"Hyperlink"}),this.hyperlinkBox=new Wt,this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":this.hyperlinkBox.hyperlinkBox.isConnected?this.hyperlinkBox.close():this.hyperlinkBox.open().then((()=>{super.processingElementPosition(this.hyperlinkBox.hyperlinkBox,this.toolHandler.toolButton)}))},document.addEventListener("scroll",(()=>{this.hyperlinkBox.hyperlinkBox.isConnected&&super.processingElementPosition(this.hyperlinkBox.hyperlinkBox,this.toolHandler.toolButton)})),window.addEventListener("resize",(e=>{this.hyperlinkBox.hyperlinkBox.isConnected&&super.processingElementPosition(this.hyperlinkBox.hyperlinkBox,this.toolHandler.toolButton)})),this.hyperlinkBox.applyCallback=e=>{this.toolHandler.toolButton.dataset.tool_status="active",this.hyperlinkBox.close()},super.outClickElementListener(this.hyperlinkBox.hyperlinkBox,(({oldEvent:e,newEvent:t,isMouseOut:n})=>{n&&this.hyperlinkBox.hyperlinkBox.isConnected&&!super.isMouseInnerElement(this.toolHandler.toolButton)&&this.hyperlinkBox.close()}))}static createDefaultStyle(){this.#T.textContent=`\n\t\t\t.${this.#T.id}-button{\n\t\t\t}\n\t\t\t.${this.#T.id}.css-gg-link-icon{\n\t\t\t\tzoom:120%;\n\t\t\t}\n\t\t\t.${this.toolHandler.defaultClass} {\n\t\t\t\tcolor: -webkit-link;\n\t\t\t\tcursor: pointer;\n\t\t\t\ttext-decoration: underline;\n\t\t\t\tdisplay: grid;\n\t\t\t}\n\t\t\t.${this.toolHandler.defaultClass} > [data-hyperlink_child="${qt.toolHandler.defaultClass}-child"]{\n\t\t\t\tall: initial;\n\t\t\t\tdisplay: inline-block;\n\t\t\t\tmargin-left: 1em;\n\t\t\t\tpadding-left: 1em;\n\t\t\t\tborder-left: 5px solid #d7d7db;\n\t\t\t\twidth: 95%;\n\t\t\t\tfloat: left;\n\t\t\t}\n\t\t\t.${this.toolHandler.defaultClass} > [data-hyperlink_child="${qt.toolHandler.defaultClass}-child"] > *{\n\t\t\t\tfont-size: 14px;\n\t\t\t}\n\t\t\t.${this.toolHandler.defaultClass} > [data-hyperlink_child="${qt.toolHandler.defaultClass}-child"] img{\n\t\t\t\tmax-width: 100%;\n                height: auto;\n                aspect-ratio: attr(width) / attr(height);\n\t\t\t}\n\t\t\t.${this.toolHandler.defaultClass}-preview-url{\n\t\t\t\tposition: fixed;\n\t\t\t\tz-index: 9000;\n\t\t\t\twidth: 50vw;\n\t\t\t\theight: 50vh;\n\t\t\t}\n\t\t`;let e=document.querySelector(`#${this.#T.id}`);return e?(this.#T?.remove(),this.#T=e,document.head.append(this.#T)):document.head.append(this.#T),this.#T}static get defaultStyle(){return this.#T}static set defaultStyle(e){this.#T.textContent=e}static set insertDefaultStyle(e){this.#T.sheet.insertRule(e)}#yt=Object.assign(document.createElement("a"),{target:"_blank"});constructor(e){let t;super(qt,e),e||0!=Object.keys(this.dataset).length?t=Promise.resolve().then((()=>{})):(this.dataset.href=qt.hyperlinkBox.lastUrl,t=fetch(this.dataset.href,{mode:"no-cors"}).then((e=>e.text())).then((e=>{let t=(new DOMParser).parseFromString(e,"text/html");return this.dataset.title=t.querySelector('meta[name="og:title"]')?.getAttribute("content")||t.querySelector('meta[name="twitter:title"]')?.getAttribute("content")||t.querySelector("title")?.textContent||"",this.dataset.description=t.querySelector('meta[name="description"]')?.getAttribute("content")||t.querySelector('meta[name="og:description"]')?.getAttribute("content")||t.querySelector('meta[name="twitter:description"]')?.getAttribute("content")||"",this.dataset.image=t.querySelector('meta[name="og:image"]')?.getAttribute("content")||t.querySelector('meta[name="twitter:image"]')?.getAttribute("content")||"",this.dataset.favicon=t.querySelector('link[rel="icon"]')?.getAttribute("href")||"",this.dataset.siteName=new URL(this.dataset.href).hostname,document.createElement("p")})).catch((e=>{console.error(e)}))),this.#yt.href=this.dataset.href,super.connectedAfterOnlyOneCallback=()=>{t.then((e=>{if(!e&&!(e=this.querySelector(`[data-hyperlink_child="${qt.toolHandler.defaultClass}-child"]`)))return;let t,n,o,s;""!=this.dataset.title&&(t=Object.assign(document.createElement("p"),{textContent:this.dataset.title}),t.style.fontWeight="bold"),""!=this.dataset.description&&(n=Object.assign(document.createElement("p"),{textContent:this.dataset.description})),""!=this.dataset.image&&(o=Object.assign(document.createElement("p"),{innerHTML:`\n\t\t\t\t\t\t\t<img data-image src="${this.dataset.image}"/>\n\t\t\t\t\t\t`})),""!=this.dataset.favicon&&(s=Object.assign(document.createElement("span"),{innerHTML:`\n\t\t\t\t\t\t\t<img data-favicon src="${this.dataset.favicon}" style="width: 1.1em; vertical-align: text-bottom;"/>\n\t\t\t\t\t\t`}));let i=Object.assign(document.createElement("span"),{textContent:this.dataset.siteName});i.style.fontSize="12px",i.style.fontWeight="bold",this.append(e),e.dataset.hyperlink_child=`${qt.toolHandler.defaultClass}-child`,e.contenteditable=!1,e.replaceChildren(...[s,i,t,n,o].filter((e=>null!=e))),this.onclick=t=>{t.composedPath().some((t=>t==e))||this.#yt.click()}}))}}}class Jt extends vt{static componentsMap={};static toolsMap={};static LineBreakMode=class{static#bt=class{value;constructor(e){this.value=e,Object.freeze(this)}};static NO_CHANGE=new this.#bt(1);static NEXT_LINE_FIRST=new this.#bt(2);static NEXT_LINE_LAST=new this.#bt(3)};static async getLowDoseJSON(e,{afterCallback:t=(e=>{})}={}){return Promise.all([...e.childNodes].map((async(e,n)=>new Promise((n=>{n(Jt.#wt(e,{afterCallback:t}))}))))).then((e=>e.filter((e=>null!=e)).map((e=>(delete e.node,e)))))}static async#wt(e,{afterCallback:t}){return new Promise((n=>{let o={};e.nodeType==Node.TEXT_NODE&&""!=e.textContent&&e.textContent?(o.type=Node.TEXT_NODE,o.name=e.constructor.name,o.text=e.textContent,o.node=e,t(o),n(o)):e.nodeType==Node.ELEMENT_NODE?(o.type=Node.ELEMENT_NODE,o.name=e.constructor.name,o.tagName=e.localName,o.data=Object.assign({},e.dataset),o.node=e,e.hasAttribute("is_cursor")&&(o.cursor_offset=e.getAttribute("cursor_offset"),o.cursor_type=e.getAttribute("cursor_type"),o.cursor_index=e.getAttribute("cursor_index"),o.cursor_scroll_x=e.getAttribute("cursor__scroll_x"),o.cursor_scroll_y=e.getAttribute("cursor_scroll_y")),this.getLowDoseJSON(e,{afterCallback:t}).then((e=>{o.childs=e.filter((e=>null!=e)),t(o),n(o)}))):n(void 0)}))}static async parseLowDoseJSON(e,t,{beforeCallback:n=(e=>{}),afterCallback:o=(e=>{})}={}){return new Promise((s=>{let i=t;"string"==typeof t&&(i=JSON.parse(t)),i instanceof Array&&s(Promise.all(Jt.#vt(i,{beforeCallback:n,afterCallback:o})).then((t=>(e.append(...t.filter((e=>null!=e))),t)))),s(void 0)}))}static#vt(e,{beforeCallback:t,afterCallback:n}){return e.filter((e=>null!=e)).map((async e=>new Promise((o=>{let s;if(t(e),e.type==Node.TEXT_NODE)s=document.createTextNode(e.text);else if(e.type==Node.ELEMENT_NODE){let o=window.customElements.get(e.tagName);if(o&&o.toolHandler)s=new o.prototype.constructor(e.data);else if(e.data.hasOwnProperty("is_line")){let t=new wt(document.createElement(e.tagName));s=t.lineElement,Object.assign(s.dataset,e.data)}else s=document.createElement(e.tagName),Object.assign(s.dataset,e.data);n(s),0!=e.childs.length&&Promise.all(Jt.#vt(e.childs,{beforeCallback:t,afterCallback:n})).then((e=>{s.append(...e)}))}o(s)}))))}#C=!1;components;tools;#Et;#Ct;isDefaultStyle=!0;#xt=new MutationObserver(((e,t)=>{e.forEach((e=>{if("false"==this.contentEditable||"connected"==e.target.dataset.tool_status&&e.oldValue==e.target.dataset.tool_status=="connected")return;let t=window.getSelection().focusNode,n=e.target.__Tool;"active"==e.target.dataset.tool_status&&"active"!=e.oldValue&&0==n.prototype.isPrototypeOf(t.parentElement)?this.#St(n):"cancel"==e.target.dataset.tool_status&&"cancel"!=e.oldValue&&this.#kt(n)}))}));#Ot;numberIndexMapper=["`","1","2","3","4","5","6","7","8","9"];numberToSpecialMapper=["~","!","@","#","$","%","^","&","*","("];constructor(e=[Ct,St,kt,Ot,Lt,Nt,Bt,Tt,Pt,Rt,jt,Mt,Ht,$t,Ft,Ut,qt],{isDefaultStyle:t=!0,isDefaultShortcutKeyEvent:n=!0}={},o){super(),this.keydownEventCallback=o,t&&vt.createDefaultStyle(),new Promise((n=>{this.isDefaultStyle=t,this.components={"free-will-editor-line":wt},this.tools=e,this.classList.add("free-will-editor"),Object.entries(this.components).forEach((([e,t])=>{if(e.includes(" "))throw new DOMException(`The token provided ('${e}') contains HTML space characters, which are not valid in tokens.`);Jt.componentsMap[t.name]||(t.toolHandler.defaultClass=e,window.customElements.get(e)||window.customElements.define(e,t,t.toolHandler.extendsElement&&""!=t.toolHandler.extendsElement?{extends:t.toolHandler.extendsElement}:void 0),Jt.componentsMap[t.name]=t)})),this.tools.forEach((e=>{Jt.toolsMap[e.name]||(e.isDefaultStyle&&e.createDefaultStyle(),e.toolHandler.toolButton.__Tool=e,this.#xt.observe(e.toolHandler.toolButton,{attributeFilter:["data-tool_status"],attributeOldValue:!0}),window.customElements.get(e.toolHandler.defaultClass)||window.customElements.define(e.toolHandler.defaultClass,e,e.toolHandler.extendsElement&&""!=e.toolHandler.extendsElement?{extends:e.toolHandler.extendsElement}:void 0),Jt.toolsMap[e.name]=e)}));let o=new MutationObserver(((e,t)=>{e.forEach((e=>{0==this.childElementCount&&this.startFirstLine(),this.firstElementChild.line||new wt(this.firstElementChild.line),this.querySelectorAll("[data-placeholder]").forEach((async e=>{e.removeAttribute("data-placeholder")})),this.isEmpty?this.placeholder=this.#Et:this.firstElementChild.setAttribute("data-placeholder",""),e.addedNodes.forEach((async e=>{new Promise((t=>{e.nodeType==Node.ELEMENT_NODE&&(e.classList.contains(wt.toolHandler.defaultClass)&&(e.line||new wt(e),0==e.innerText.length&&(e.innerText="\n",window.getSelection().setPosition(e,1),e.focus())),t())}))}))}))}));o.observe(this,{childList:!0,subtree:!0}),n()}));const s=e=>{if(!this.isCursor()||"ArrowDown"!=e.key)return;let t=this.getCurrentLine(void 0,{isRoot:!0});if(!t)return;let n=t.nextElementSibling;for(;n&&"false"==n.contentEditable;)n=n.nextElementSibling;if(!n){let e=super.createLine();e.line?.lookAtMe()}};n&&bt.globalKeydownEventListener(this,(({oldEvent:t,newEvent:n})=>{if(!this.isCursor())return;let o=!1;if(null!=this.keydownEventCallback&&(o=this.keydownEventCallback(n)),o)return;s(n);let{ctrlKey:i,shiftKey:r,altKey:a,key:l}=n;if(i&&"b"==l.toLowerCase())return n.preventDefault(),void Ct.toolHandler.toolButton.click();if(i&&"u"==l.toLowerCase)return n.preventDefault(),void Lt.toolHandler.toolButton.click();if(i&&"i"==l.toLowerCase)return n.preventDefault(),void Mt.toolHandler.toolButton.click();let c=[...e];new Promise((e=>{let t=c.splice(0,10),o=!1;for(let e=0,s=t.length;e<s;e+=1){let s=String(e),r=s.substring(s.length-1);if(i&&a&&l==this.numberIndexMapper[r]){let s=t[e];n.preventDefault(),s.toolHandler.toolButton.click(),o=!0;break}}if(o)e();else{for(let e=0,t=c.length;e<t;e+=1){let t=String(e),o=t.substring(t.length-1);if(i&&r&&l==this.numberToSpecialMapper[o]){let t=c[e];n.preventDefault(),t.toolHandler.toolButton.click();break}}e()}}))}))}connectedCallback(){this.#Ct=new Et(this),this.#C||(this.#C=!0,"inherit"!=this.contentEditable&&1!=this.contentEditable||(this.contentEditable=!0,this.tabIndex=1,this.focus(),this.isEmpty&&this.startFirstLine()))}disconnectedCallback(){this.#Ct=null,this.#C=!1}startFirstLine(){let e=super.createLine();return e.line.isFirstLine=!0,this.placeholder=this.#Et,e}#Lt(e){let t=document.getSelection(),n=new Range,o=wt.getLine(e);n.setStartAfter(o),n.setEnd(o,e.textContent.length-1),t.removeAllRanges(),t.addRange(n)}#_t(e){let t=document.getSelection(),n=new Range;e&&e.nodeType==Node.ELEMENT_NODE&&e.textContent.length,n.selectNodeContents(e),n.setStart(e,e.length),n.setEnd(e,e.length),t.removeAllRanges(),t.addRange(n),e.removeAttribute("tabIndex")}#St(e){let t=window.getSelection(),{isCollapsed:n,anchorNode:o,focusNode:s}=t;n&&e.toolHandler.isInline||super.getLineRange(t).then((({startLine:n,endLine:o})=>(n||(n=o),n.line||new wt(n),o.line||new wt(o),n.line.applyTool(e,t.getRangeAt(0),o)))).then((e=>{this.#Ct||(this.#Ct=new Et(this)),this.#Ct.addUndoRedo(!0);let t,n=window.getSelection(),o=n.getRangeAt(0);t=o.endContainer.nodeType==Node.TEXT_NODE?o.endContainer.parentElement:o.endContainer,t.scrollIntoView({behavior:"instant",block:"end",inline:"nearest"}),n.setPosition(t,t.childNodes.length-1)}))}#kt(e){let t=window.getSelection(),{isCollapsed:n,anchorNode:o,focusNode:s}=t;n&&e.toolHandler.isInline||super.getLineRange(t).then((({startLine:n,endLine:o})=>{n||(n=o),n.line||new wt(n),o.line||new wt(o),console.log(n,o),n.line.cancelTool(e,t,o).then((()=>{this.#Ct||(this.#Ct=new Et(this)),this.#Ct.addUndoRedo(!0),window.getSelection().setPosition(n,n.childElementCount)}))}))}async lineBreak(e=Jt.LineBreakMode.NEXT_LINE_FIRST){let t=window.getSelection();return super.getLineRange(t).then((({startLine:n,endLine:o})=>{n.line||new wt(n),o.line||new wt(o);let s=t.getRangeAt(0),{startOffset:i,endOffset:r,startContainer:a,endContainer:l}=s,c=n.lastChild,d=c.nodeType==Node.TEXT_NODE?c.length:c.childNodes.length;s.setStart(a,i),s.setEnd(c,d);let h=super.createLine();h.append(s.extractContents()),n.after(h),e==Jt.LineBreakMode.NEXT_LINE_FIRST?window.getSelection().setPosition(h,0):e==Jt.LineBreakMode.NEXT_LINE_LAST&&h.line.lookAtMe()}))}set placeholder(e){this.#Et=e,this.firstElementChild&&0!=this.contentEditable&&this.firstElementChild.setAttribute("data-placeholder",this.#Et)}get firstLine(){return this.firstElementChild}get isEmpty(){return wt.isElementTextEmpty(this)&&![...this.querySelectorAll("*")].some((e=>this.tools.hasOwnProperty(e.localName)))}get isLoaded(){return this.#C}set keydownEventCallback(e){this.#Ot=e}get keydownEventCallback(){return this.#Ot}}const Vt=new class{#Nt;#s;#Bt={};#Tt;#Pt;constructor(){window.myAPI.getWorkspaceId().then((e=>{this.workspaceId=e})),window.myAPI.event.electronEventTrigger.addElectronEventListener("workspaceChange",(e=>{this.workspaceId=e.workspaceId}))}set addWorkspaceIdChangedListener({name:e,callback:t,runTheFirst:n}){this.#Bt[e]=t,n&&this.workspaceId&&t(this)}get addWorkspaceIdChangedListener(){return this.#Bt}set workspaceId(e){e&&(this.#s=e,window.myAPI.workspace.getWorkspaceDetail({workspaceId:e}).then((e=>{this.#Nt=e;let t=Promise.all(Object.values(this.#Bt).map((async e=>new Promise((t=>{e(this),t()})))));this.#Pt?this.#Pt.then((()=>{t.then((()=>{this.#Pt=new Promise((e=>{this.#Tt=e}))}))})):this.#Pt=new Promise((e=>{this.#Tt=e,this.#Tt(t)}))})))}get workspaceId(){return Number(this.#s)}get workspace(){return this.#Nt}removeWorkspaceIdChangedListener(e){this.#Bt(e)}},Kt=new class{#It;#Rt;#At={};#jt;#Mt=new Promise((e=>{this.#jt=e}));#Dt;constructor(){window.myAPI.event.electronEventTrigger.addElectronEventListener("roomChange",(e=>{this.roomId=e.roomId}))}set addRoomIdChangeListener({name:e,callback:t,runTheFirst:n}){this.#At[e]=t,n&&this.#It&&t(this)}get addRoomIdChangeListener(){return this.#At}set roomId(e){if(!e)throw new Error("roomId is undefined");this.#It=e,window.myAPI.room.isRoomOwner({roomId:e}).then((t=>{this.#Dt=t.data,window.myAPI.room.getRoomDetail({roomId:e}).then((e=>{this.#Rt=e.data,window.myAPI.setOption({name:"lastRoomInfo",value:JSON.stringify(this.#Rt)}),Promise.all(Object.values(this.#At).map((async e=>new Promise((t=>{e(this),t()}))))).then((()=>{this.#jt()})),this.#Mt.then((()=>{this.#Mt=new Promise((e=>{this.#jt=e}))}))}))}))}get roomId(){return Number(this.#It)}get room(){return this.#Rt}removeRoomIdChangeListener(e){this.#At(e)}get roomChangeAwait(){return this.#Mt}get isOwner(){return this.#Dt}},Xt=new class{#Ht=/[A-Z]?[a-z]+|[0-9]+|[A-Z]+(?![a-z])/g;constructor(){}jsonToSaveElementDataset(e,t){if(!t)throw new Error("element is undefined");if(t.nodeType!=Node.ELEMENT_NODE)throw new Error(`element is not element node type ::: ${t.nodeType}`);return new Promise((n=>{let o=Object.entries(e).reduce(((e,[t,n])=>(e[t.match(this.#Ht).map((e=>e.toLowerCase())).join("_")]=n,e)),{});Object.assign(t.dataset,o),n(t)}))}async underbarNameToCamelName(e){return new Promise((t=>{t(Object.entries(e).reduce(((e,[t,n])=>(e[t.split("_").map(((e,t)=>0==t?e.charAt(0).toLowerCase()+e.substring(1):e.charAt(0).toUpperCase()+e.substring(1))).join("")]=n,e)),{}))}))}async getProjectPathPromise(){return await window.myAPI.getProjectPath().then((e=>e)).catch((e=>(console.error(e),"")))}processingElementPosition(e,t){let n;n=this.isElement(t,HTMLElement)?t.getBoundingClientRect():t;let{x:o,y:s,height:i,width:r}=n,a=s-e.clientHeight,l=o-e.clientWidth;e.style.top=a>0?a+"px":s+i+"px",e.style.left=l>0?l+"px":o+r+"px"}isElement(e,t){let n=Object.getPrototypeOf(e),o=!1;for(;null!=n;){if(n?.constructor==t){o=!0;break}n=Object.getPrototypeOf(n)}return o}shortenBytes(e){const t=e>0?Math.floor(Math.log2(e)/10):0,n=((t>0?"KMGTPEZY"[t-1]:"")||(t>=9?"Y":""))+"B";return{size:Math.floor(e/Math.pow(1024,t>=9?8:t)),rank:t,rankText:n}}showToastMessage(e){let t=Object.assign(document.createElement("div"),{className:"toast_message"});t.append(...e.map((e=>Object.assign(document.createElement("div"),{textContent:e})))),document.body.append(t);let n=setInterval((()=>{t.isConnected&&(clearInterval(n),setTimeout((()=>{t.style.opacity=0,t.ontransitionend=()=>{t.remove()}}),1e3))}),50)}};class Gt{#zt;#$t;#Ft=[];#Ut=e=>{};#Wt=e=>{console.log("out!!",e)};#qt=e=>!1;constructor({wrapper:e}){if(!e)throw new Error("wrapper is undefined");this.#zt=e}addPositionChangeEvent(e,t){if(0==e.length)throw new Error("child is empty");if(e.some((e=>null==Number(e.dataset.order_sort)||isNaN(Number(e.dataset.order_sort)))))throw console.error(e),new Error("data-order_sort is not defined or is not number");let n=t||this.#zt;n.dataset.is_position_change="";return new Promise((t=>{let o=[...n.children].filter((e=>e.hasAttribute("data-order_sort"))).pop();e.forEach(((t,s)=>{t.draggable=!0,t.ondragstart=n=>{n.stopPropagation(),this.#$t=t,e.forEach((async e=>{[...e.children].forEach((e=>{e.hasAttribute("data-is_position_change")||(e.style.pointerEvents="none",e.dataset.is_pointer_target="")}))}))},t.ondragend=e=>{e.stopPropagation(),(e.x<0||e.y<0||window.outerWidth<e.x||window.outerHeight<e.y)&&this.#Wt({target:t,event:e}),this.#$t=void 0,new Promise((e=>{document.querySelectorAll("[data-is_pointer_target]").forEach((e=>{e.style.pointerEvents="",e.removeAttribute("data-is_pointer_target")})),e()})),t.__dragendCallback&&t.__dragendCallback()},t.ondragover=e=>{e.stopPropagation(),e.preventDefault()},t.ondragenter=e=>{e.stopPropagation(),e.preventDefault(),e.target.style.borderTop="solid #0000009c"},t.ondragleave=e=>{e.stopPropagation(),e.preventDefault(),e.target.style.borderTop=""},t.ondrop=s=>{if(s.stopPropagation(),s.preventDefault(),s.target.style.borderTop="",!this.#$t)return;let i=this.#$t,r=this.onIfCancelCallback(i,t);if("boolean"!=typeof r)throw new Error("onIfCancelCallback is only return Boolean");r||(s.target.closest("[data-order_sort]").before(i),this.#$t=void 0,new Promise((e=>{let t=[...n.children].filter((e=>e.hasAttribute("data-order_sort"))).pop();o||(o=t);let s=Number(o.dataset.order_sort);i==o&&o!=t&&(t.dataset.order_sort=o.dataset.order_sort,s=Number(o.dataset.order_sort)),o=t;let r=o?.previousElementSibling;for(;r&&(s+=1,r.dataset.prev_order_sort=r.dataset.order_sort,r.dataset.order_sort=s,r.previousElementSibling!==r);)r=r.previousElementSibling;e()})).then((()=>{this.#Ut([...new Set([...e.filter((e=>e.dataset.order_sort!=e.dataset.prev_order_sort&&e!=i)),i])],{item:t,target:i,parent:n})})))}})),t()}))}set onDropEndChangePositionCallback(e){this.#Ut=e}get onDropEndChangePositionCallback(){return this.#Ut}set onDropDocumentOutCallback(e){this.#Wt=e}get onDropDocumentOutCallback(){return this.#Wt}set onIfCancelCallback(e){this.#qt=e}get onIfCancelCallback(){return this.#qt}}const Yt=new class e{#Jt=this.searchAccountInfo();static#Vt;static accountInfoChangeAcceptPromise=new Promise((e=>{this.#Vt=e}));static{window.myAPI.event.electronEventTrigger.addElectronEventListener("accountInfoChangeAccept",(e=>{console.log(e);let{content:t}=e;this.#Vt(t),this.accountInfoChangeAcceptPromise=new Promise((e=>{this.#Vt=e}))}))}constructor(){}accountInfoChangeAcceptEventListener(t=(({oldData:e,newData:t})=>{})){let n,o;const s=()=>{e.accountInfoChangeAcceptPromise.then((e=>{o=e,t({oldData:n,newData:o}),n=e,s()}))};s()}async searchAccountInfo(){return this.#Jt=await window.myAPI.account.getAccountInfo().then((e=>e.data)),this.#Jt}get accountInfo(){return this.#Jt}},Zt=new class{encoder=new TextEncoder;decoder=new TextDecoder;signAlgorithm={name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"};secretAlgorithm={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"};async generateKeyPair(e,t){return window.crypto.subtle.generateKey(e,!0,t)}async keySign(e,t){let n=this.encoder.encode(e);return window.crypto.subtle.sign(this.signAlgorithm.name,t,n).then((e=>({message:n,signature:e})))}async decryptMessage(e,t,n){return window.crypto.subtle.decrypt({name:n.name},e,t).catch((e=>{console.error(e.message),console.error(e.stack)}))}async convertBase64ToBuffer(e){return fetch(`data:application/octet-binary;base64,${e}`).then((e=>e.arrayBuffer())).then((e=>new Uint8Array(e)))}async exportKey(e,t){return window.crypto.subtle.exportKey(e,t).then((e=>new Promise((t=>t(String.fromCharCode(...new Uint8Array(e))))))).then((e=>new Promise((t=>t(window.btoa(e))))))}async callS3PresignedUrl(e,t,n={}){return console.log("callFunctionParam !!! ",n),Promise.all([this.generateKeyPair(this.signAlgorithm,["sign","verify"]),this.generateKeyPair(this.secretAlgorithm,["encrypt","decrypt"])]).then((([e,t])=>Promise.all([this.exportKey("spki",e.publicKey),this.exportKey("spki",t.publicKey),Promise.resolve(t),Promise.resolve(e)]))).then((async([o,s,i,r])=>{let a=await this.keySign(`${t}:${s}`,r.privateKey),l=await e(Object.assign(n,{data:window.btoa(String.fromCodePoint(...a.message)),dataKey:o,sign:window.btoa(String.fromCodePoint(...new Uint8Array(a.signature)))})),{code:c,data:d}=l;if(0==c)return{data:d,encDncKeyPair:i}}))}async fetchPutObject(e,t,n,o){return fetch(e,{method:"PUT",headers:{"Content-Encoding":"base64","Content-Type":"application/octet-stream","x-amz-server-side-encryption-customer-algorithm":"AES256","x-amz-server-side-encryption-customer-key":t,"x-amz-server-side-encryption-customer-key-md5":n},body:o})}};class Qt extends Jt{static{window.customElements.define("notice-board-line",Qt)}static tools=[Ct,St,kt,Ot,Lt,Nt,Bt,Tt,Pt,Rt,jt,Mt,Ht,$t,Ft,Ut,qt];static option={isDefaultStyle:!0};__parentWrapper;constructor(e){super(Qt.tools,Qt.option),this.__parentWrapper=e,super.placeholder="",super.spellcheck=!0}}const en=new class{#Kt={};#Xt=Object.assign(document.createElement("div"),{id:"notice_board_detail_wrapper",innerHTML:'\n            <div class="notice_board_detail_container list_scroll list_scroll-y" data-bind_name="noticeBoardDetailContainer">\n                <ul class="notice_board_detail_content" data-bind_name="noticeBoardDetailList">\n \n                </ul>\n                <div class="toolbar" style="position: fixed; z-index: 2000;" data-bind_name="toolbar"></div>\n            </div>\n        '});#Gt=(()=>[...this.#Xt.querySelectorAll("[data-bind_name]")].reduce(((e,t)=>(e[t.dataset.bind_name]=t,e)),{}))();#Yt;constructor(){this.#Yt=new Gt({wrapper:this.#Gt.noticeBoardDetailList}),this.#Yt.onDropEndChangePositionCallback=(e,{item:t,target:n,wrapper:o})=>{window.myAPI.noticeBoard.updateNoticeBoardDetailOrder(e.map((e=>({id:e.dataset.id,workspaceId:e.dataset.workspace_id,roomId:e.dataset.room_id,orderSort:e.dataset.order_sort})))).then((e=>{console.log(e)}))},window.myAPI.event.electronEventTrigger.addElectronEventListener("noticeBoardDetailAccept",(e=>{let t,n=document.activeElement;n.__parentWrapper&&(n.dataset.is_update=""),e&&e.serverSentStreamType&&(t=!0,e=e.content),this.createItemElement(e).then((t=>{this.#Zt(t,e.workspaceId,e.roomId,e.noticeBoardId,e.id);let o=Object.values(this.#Kt[e.workspaceId]?.[e.roomId]?.[e.noticeBoardId]||{}).sort(((e,t)=>Number(t.dataset.order_sort)-Number(e.dataset.order_sort)));this.#Yt.addPositionChangeEvent(o);let s=new MutationObserver(((e,t)=>{e.forEach((e=>{let{addedNodes:t,removedNodes:o}=e;if(![...t].some((e=>e==n.__parentWrapper)))return;n.contentEditable=!0;let s=n.hasAttribute("is_cursor")?n:n.querySelector("[is_cursor]");if(!s)return;let{cursor_offset:i,cursor_type:r,cursor_index:a,cursor_scroll_x:l,cursor_scroll_y:c}=s.attributes,d=window.getSelection();if(r.value==Node.ELEMENT_NODE){let e=s.childNodes[a.value];d.setPosition(e,i.value)}else r.value==Node.TEXT_NODE&&d.setPosition(s,i.value)}))}));n&&n.__parentWrapper&&s.observe(this.#Gt.noticeBoardDetailList,{childList:!0}),this.#Gt.noticeBoardDetailList.replaceChildren(...o);let i=setInterval((()=>{t.isConnected&&(clearInterval(i),s.disconnect(),n.removeAttribute("data-is_update"))}),50)}))})),this.#Gt.noticeBoardDetailList,ft.addNoticeBoardIdChangeListener={name:"noticeBoardDetailIdChange",callback:(e,t)=>{this.#Gt.noticeBoardDetailList.replaceChildren(),this.refresh()}};let e=Object.values(Qt.tools).map((e=>e.toolHandler.toolButton));document.addEventListener("selectionchange",(t=>{if(document.activeElement.constructor!=Qt)return;let n=window.getSelection();0!=n.rangeCount&&(n.isCollapsed?this.#Gt.toolbar.remove():(this.#Gt.noticeBoardDetailContainer.append(this.#Gt.toolbar),this.#Gt.toolbar.replaceChildren(...e),Xt.processingElementPosition(this.#Gt.toolbar,window.getSelection().getRangeAt(0).getBoundingClientRect())))})),this.#Gt.noticeBoardDetailContainer.addEventListener("scroll",(()=>{0!=this.#Gt.toolbar.childElementCount&&Xt.processingElementPosition(this.#Gt.toolbar,window.getSelection().getRangeAt(0).getBoundingClientRect())})),window.addEventListener("resize",(e=>{0!=this.#Gt.toolbar.childElementCount&&Xt.processingElementPosition(this.#Gt.toolbar,window.getSelection().getRangeAt(0).getBoundingClientRect())}))}createItemElement(e){return new Promise((t=>{let n=Object.assign(document.createElement("li"),{className:"notice_board_detail_item"});n.dataset.is_not_visible_target="",n.style.minHeight=2*(parseInt(window.getComputedStyle(document.body).fontSize)||16)+"px",t(this.#Qt(n,e))}))}#Qt(e,t){return new Promise((n=>{let o,s=Object.assign(document.createElement("button"),{className:"notice_board_detail_item_add_content",textContent:"+"}),i=new Qt(e),r=Object.assign(document.createElement("span"),{className:"notice_board_detail_item_position_change_icon pointer",textContent:"〓"}),a=Xt.jsonToSaveElementDataset(t,e);if(t.content){let{content:n}=t;delete t.content,a.then((()=>{e.removeAttribute("data-content"),Qt.parseLowDoseJSON(i,n).then((()=>{i.contentEditable=!1,e.append(i);let t=setInterval((()=>{i.isConnected&&(clearInterval(t),i.isEmpty&&(i.remove(),e.prepend(s)))}),50)}))}))}else e.prepend(s),i.startFirstLine();e.onmouseenter=()=>{s.isConnected?s.classList.add("active"):(e.draggable=!1,i.isEmpty||e.append(r))},e.onmouseleave=()=>{s.isConnected?s.classList.remove("active"):r.isConnected&&r.remove()},r.onmousemove=()=>{e.draggable=!0},r.onmouseover=()=>{e.draggable=!0},r.onmouseout=()=>{e.draggable=!1},s.onclick=t=>{i.contentEditable=!0,i.firstLine.innerText="\n",i.isConnected||(e.append(i),e.append(r),s.remove(),window.getSelection().setPosition(i,i.childNodes.length))},i.onclick=()=>{"false"==i.contentEditable&&(i.contentEditable=!0,i.isEmpty&&(i.firstLine.innerText="\n"),window.getSelection().setPosition(i,i.childNodes.length))},i.onfocus=e=>{o=i.innerHTML};let l=!1;i.onblur=t=>{if(!l&&(i.matches(":hover")||this.#Gt.toolbar.matches(":hover")||document.activeElement==i||i.hasAttribute("data-is_update")))return void t.preventDefault();if(l&&(l=!l),this.#Gt.toolbar.remove(),i.contentEditable=!1,t.relatedTarget?.hasAttribute("data-tool_status")||this.#Gt.toolbar.remove(),i.isEmpty)i.replaceChildren(),i.remove(),r.remove(),e.prepend(s),e.matches(":hover")?s.classList.add("active"):s.classList.remove("active");else if(o==i.innerHTML)return;o=i.innerHTML;let n={id:e.dataset.id,noticeBoardId:ft.noticeBoardId,roomId:Kt.roomId,workspaceId:Vt.workspaceId,orderSort:e.dataset.order_sort};this.#en(i,n)},i.onkeydown=e=>{let{altKey:t,ctrlKey:n,shiftKey:o,key:s}=e;if("Enter"==s&&(t||n||o)){let o;e.preventDefault(),o=t?Jt.LineBreakMode.NEXT_LINE_FIRST:n?Jt.LineBreakMode.NEXT_LINE_LAST:Jt.LineBreakMode.NO_CHANGE,i.lineBreak(o)}else"Enter"==s&&(e.preventDefault(),l=!0,i.blur())},n(e)}))}async#en(e,t){let n=[];e.contentEditable=!1,Qt.getLowDoseJSON(e,{afterCallback:e=>{if(e.tagName!=Ht.toolHandler.defaultClass&&e.tagName!=$t.toolHandler.defaultClass&&e.tagName!=Ft.toolHandler.defaultClass)return;if(e.data.hasOwnProperty("is_upload_end"))return;let t,o=e.node,s=o.selectedFile;e.data.is_loading="",console.log(o,s),t=e.tagName==Ht.toolHandler.defaultClass?"IMAGE":e.tagName==$t.toolHandler.defaultClass?"VIDEO":"FILE",n.push(new Promise((async n=>{let{name:o,size:i,lastModified:r,contentType:a,newFileName:l}=await Xt.underbarNameToCamelName(e.data),c=`${Kt.roomId}:${Vt.workspaceId}:${o}:${Yt.accountInfo.accountName}`,d=await Zt.callS3PresignedUrl(window.myAPI.s3.generateSecurityPutObjectPresignedUrl,c,{newFileName:l,fileType:t,uploadType:"NOTICE"}).then((t=>{if(!t)return;let{data:n,encDncKeyPair:o}=t;return e.data.new_file_name=n.newFileName,Promise.all([Zt.convertBase64ToBuffer(n.encryptionKey).then((async e=>Zt.decryptMessage(o.privateKey,e,Zt.secretAlgorithm).then((e=>String.fromCharCode(...new Uint8Array(e)))))),Zt.convertBase64ToBuffer(n.encryptionMd).then((async e=>Zt.decryptMessage(o.privateKey,e,Zt.secretAlgorithm).then((e=>String.fromCharCode(...new Uint8Array(e))))))]).then((async([e,t])=>{let o=await Zt.fetchPutObject(n.presignedUrl,e,t,s.files[0]);if(200==o.status||201==o.status)return!0}))}));if(console.log(d),!d)return void n();let h=`${Kt.roomId}:${Vt.workspaceId}:${e.data.new_file_name}:${Yt.accountInfo.accountName}`;Zt.callS3PresignedUrl(window.myAPI.s3.generateSecurityGetObjectPresignedUrl,h,{fileType:t,uploadType:"NOTICE"}).then((t=>{if(!t)return;let{data:o,encDncKeyPair:s}=t;e.data.url=o.presignedUrl,delete e.data.base64,e.data.upload_type="NOTICE",n(e)}))})))}}).then((e=>{t.content=JSON.stringify(e),0==t.content.length&&(t.content=void 0),window.myAPI.noticeBoard.createNoticeBoardDetail(t).then((o=>{let{data:s}=o;this.innerText="",Promise.all(n).then((n=>{console.log(n),0!=n.length&&(n.forEach((e=>{delete e.data.is_loading,e.data.is_upload_end="",e.data.room_id=t.roomId,e.data.workspace_id=t.workspaceId})),t.content=JSON.stringify(e),0==t.content.length&&(t.content=void 0),window.myAPI.noticeBoard.createNoticeBoardDetail(t).then((e=>{})))}))}))}))}#tn(){return window.myAPI.noticeBoard.searchNoticeBoardDetailList({workspaceId:Vt.workspaceId,roomId:Kt.roomId,noticeBoardId:ft.noticeBoardId})}#Zt(e,t,n,o,s){this.#Kt.hasOwnProperty(t)||(this.#Kt[t]={}),this.#Kt[t].hasOwnProperty(n)||(this.#Kt[t][n]={}),this.#Kt[t][n].hasOwnProperty(o)||(this.#Kt[t][n][o]={}),this.#Kt[t][n][o][s]=e}async refresh(){let e=Object.values(this.#Kt[Vt.workspaceId]?.[Kt.roomId]?.[ft.noticeBoardId]||{}).sort(((e,t)=>Number(t.dataset.order_sort)-Number(e.dataset.order_sort)));0!=e.length?(this.#Yt.addPositionChangeEvent(e),this.#Gt.noticeBoardDetailList.replaceChildren(...e)):this.#tn()}get element(){return this.#Xt}get elementMap(){return this.#Gt}};class tn{#nn;#on;#sn;#in;isOpen=!1;#rn;#an;#ln;constructor({dbName:e,columnInfo:t,storeName:n,keyPathNameList:o=[],pkAutoIncrement:s=!0}){if(!e)throw new Error("dbName is undefined");if(!t)throw new Error("columnInfo is undefined");if(!n)throw new Error("storeName is undefined");if(0==o.length)throw new Error("keyPathName is undefined");if(o.filter((e=>t[e])).length!=o.length)throw new Error("invalid key path name");if(1==s&&o.length>1)throw new Error("multiple key not use autoIncrement : true");this.#nn=e,this.#on=t,this.#sn=n,this.#rn=JSON.stringify(Object.entries(t).reduce(((e,[t,n],o)=>(e[t]=void 0,e)),{})),this.#an=o,this.#ln=s}open(){return new Promise(((e,t)=>{const n=indexedDB.open(this.DB_NAME);n.onupgradeneeded=e=>this.upgradeneeded(e,{}),n.onsuccess=t=>{this.isOpen=!0,this.#in=t.target.result;let o=!Object.entries(this.#in.objectStoreNames).find((([e,t])=>t==this.DB_STORE_NAME)),s=!1;if(!o){let e=this.#in.transaction(this.DB_STORE_NAME,"readwrite").objectStore(this.DB_STORE_NAME),t=Object.entries(e.indexNames).reduce(((e,[t,n])=>(e[n]=t,e)),{});s=-1!=Object.entries(t).findIndex((([e,t])=>!this.#on[e]))||-1!=Object.entries(this.#on).findIndex((([e,n])=>!t[e]))}if(o||s){let t=Number(this.#in.version)+1;console.log(this.#sn,t),console.log(n),this.close().then((n=>{const s=indexedDB.open(this.DB_NAME,t);console.log(s),s.onupgradeneeded=e=>this.upgradeneeded(e,{isNewAddStore:o}),s.onsuccess=t=>{this.isOpen=!0,this.#in=t.target.result,e(this.isOpen)},s.onblocked=e=>{console.error(e)}}))}else e(this.isOpen)},n.onblocked=e=>{console.log(e)},n.onerror=e=>{console.log(e),this.isOpen=!1,"VersionError"==e.target.error.name?t(new Error("VersionError: DB 버전을 수동으로 입력해선 안됩니다.")):(console.error(e),t(new Error(`unknownError ${e}`)))}}))}close(){return new Promise((e=>{this.#in&&this.isOpen||e(!1),this.#in.onabort=e=>console.log(e),this.#in.onerror=e=>console.log(e),this.#in.close(),this.isOpen=!1,this.#in.onclose=t=>{this.isOpen=!1,e(!0)},e(!0)}))}get DB_NAME(){return this.#nn}get DB_STORE_NAME(){return this.#sn}get COLUMN_INFO(){return this.#on}get template(){return JSON.parse(this.#rn)}upgradeneeded(e,{isNewAddStore:t=!1}){let n;if(e.newVersion==e.oldVersion||0==e.oldVersion||t){let t=this.#ln||1==this.#an.length?this.#an[0]:this.#an;n=e.target.result.createObjectStore(this.DB_STORE_NAME,{keyPath:t,autoIncrement:this.#ln}),Object.entries(this.#on).forEach((([e,t])=>n.createIndex(...t)))}else{n=e.target.transaction.objectStore(this.DB_STORE_NAME);let t=Object.entries(n.indexNames),o=t.reduce(((e,[t,n])=>(e[n]=t,e)),{});Object.entries(this.#on).forEach((([e,t])=>{o[t[0]]||n.createIndex(...t)})),t.forEach((([e,t])=>{this.#on[t]||n.deleteIndex(t)}))}}addItem(e=this.#rn){return new Promise(((t,n)=>{this.isOpen&&this.#in||n(new Error("indexedDB가 열려있지 않습니다."));let o=this.#in.transaction(this.DB_STORE_NAME,"readwrite"),s=o.objectStore(this.DB_STORE_NAME).put(e);s.onsuccess=e=>{o.commit()},s.onerror=e=>{console.log(e)},o.oncomplete=e=>{e.type,t(e)},o.onerror=e=>{console.log(e),n(new Error("commit error"))}}))}getItem(e){return new Promise(((t,n)=>{let o=this.#in.transaction(this.DB_STORE_NAME,"readonly").objectStore(this.DB_STORE_NAME).get(e);o.onerror=e=>{console.error(e),n(o)},o.onsuccess=e=>{t(o)}}))}getList({pageNum:e=1,pageSize:t=5,callback:n,readOption:o="readonly"}={}){return new Promise(((s,i)=>{let r=t*(e-1),a=0!=r,l=0,c=this.#in.transaction(this.DB_STORE_NAME,o),d=c.objectStore(this.DB_STORE_NAME),h={data:[],event:void 0};d.openCursor().onsuccess=e=>{const o=e.target.result;if(!o)return;if(a)return a=!a,void o.advance(r);n instanceof Function&&n(o);let s=o.value;h.data.push(s),l+=1,l>=t||o.continue()},c.oncomplete=e=>(h.event=e,s(h)),c.onerror=e=>i(e),c.onabort=e=>i(e)}))}deleteList(...e){return 0==e.length?Promise.resolve():new Promise(((t,n)=>{let o=this.#in.transaction(this.DB_STORE_NAME,"readwrite"),s=o.objectStore(this.DB_STORE_NAME),i={successCount:0,failedCount:0};e.forEach((e=>{let t=s.delete([e]);t.onsuccess=e=>{i.successCount+=1,o=e.target.transaction},t.onerror=e=>{i.failedCount+=1}})),o.commit(),o.oncomplete=e=>(i.event=e,t(i)),o.onerror=e=>n(e),o.onabort=e=>n(e)}))}deleteDatabase(e){return new Promise(((t,n)=>{let o=indexedDB.deleteDatabase(e);o.onerror=e=>{console.error(e),n(e)},o.onsuccess=e=>{console.log(e),t(e)}}))}}jt.unit="rem",jt.min=.1,jt.max=5,jt.weight=.1;window.myAPI=gt,new class{#cn=864e5;constructor(e){window.addEventListener("load",(async()=>{const e=new tn({dbName:"fileDB-main-page",storeName:"s3Memory-main-page",columnInfo:{fileName:["fileName","fileName",{unique:!0}],originFileName:["originFileName","originFileName"],fileData:["fileData","fileData"],lastModified:["lastModified","lastModified"],uploadType:["uploadType","uploadType"],roomId:["roomId","roomId"],workspaceId:["workspaceId","workspaceId"]},keyPathNameList:["fileName"],pkAutoIncrement:!1}),t=e.open(),n=async n=>{if(n.hasAttribute("data-is_loading")){let e=n.querySelector("[data-upload_loading]");return e?(e.className="upload_loading",e.querySelector("[data-status_text_elipsis]").className="upload_loading"):(e=Object.assign(document.createElement("div"),{className:"upload_loading",innerHTML:'\n\t\t\t\t\t\t\t<div class="upload_loading_container">\n\t\t\t\t\t\t\t\t<span>컨텐츠를 업로드 중입니다</span>\n\t\t\t\t\t\t\t\t<span class="status_text_elipsis" data-status_text_elipsis></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t'}),e.dataset.upload_loading=""),void n.append(e)}let o;o=n.constructor==Ht?"IMAGE":n.constructor==$t?"VIDEO":"FILE";const s=await new Promise((o=>{t.then((()=>{new Promise((t=>{e.getList({pageNum:1,pageSize:99999,readOption:"readwrite",callback:e=>{e.value.lastModified<(new Date).getTime()-this.#cn&&e.delete()}}).then((e=>{t()})).catch((e=>{console.error(e),t()}))})).then((()=>{e.getItem(n.dataset.new_file_name).then((e=>{o(e)}))}))}))}));if(s.result){let e=window.URL.createObjectURL(s.result.fileData,n.dataset.content_type);return n.dataset.url=e,void(n.image?n.image.src=e:n.video?n.video.src=e:n.resourcesUrl=e)}new Promise((e=>{let{size:t,rank:o,rankText:s}=Xt.shortenBytes(n.dataset.size);if(t>=10&&o>=2){let o=n.querySelector("[data-file_preview]");o?(o.querySelector("[data-file_preview_container]").className="file_preview_container",o.querySelector("[data-file_preview_button]").className="file_preview_button",o.className="file_preview"):(o=Object.assign(document.createElement("div"),{className:"file_preview",innerHTML:`\n\t\t\t\t\t\t\t\t<div class="file_preview_container" data-file_preview_container>\n\t\t\t\t\t\t\t\t\t<div>10MB 이상의 파일은 당신의 데이터를 위해 미리보기를 제공하지 않습니다.</div>\n\t\t\t\t\t\t\t\t\t<div>미리보기를 클릭시 기능 제공을 위해 임시 저장소에 저장을 시작하며, 이는 추후 자동 삭제의 대상이 됩니다.</div>\n\t\t\t\t\t\t\t\t\t<div>이 파일의 용량 : ${t}${s}</div>\n\t\t\t\t\t\t\t\t\t<button class="file_preview_button" data-file_preview_button type="button">미리보기</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`}),o.dataset.file_preview=""),o.style.display="none",Ft.resourcesCallback=({status:e,resources:t})=>{"error"==e&&(o.style.display="")},o.onclick=e=>{e.stopPropagation()},o.dataset.visibility_not="",n.append(o);let i=o.querySelector(".file_preview_button");i.onclick=t=>{t.stopPropagation(),i.textContent="",i.className="loading_rotate",e(o)}}else e()})).then((s=>{document.body.closest;let i=`${Kt.roomId}:${Vt.workspaceId}:${n.dataset.new_file_name}:${n.closest("[data-account_name]")?.dataset.account_name}`;Zt.callS3PresignedUrl(window.myAPI.s3.generateSecurityGetObjectPresignedUrl,i,{uploadType:n.dataset.upload_type,fileType:o}).then((o=>{if(!o)return;let{data:i,encDncKeyPair:r}=o,a=0,l=parseInt(n.dataset.size),c=Object.assign(document.createElement("progress"),{max:100,value:0});if(s){s.querySelector(".file_preview_container").append(c)}return Promise.all([Zt.convertBase64ToBuffer(i.encryptionKey).then((async e=>Zt.decryptMessage(r.privateKey,e,Zt.secretAlgorithm).then((e=>String.fromCharCode(...new Uint8Array(e)))))),Zt.convertBase64ToBuffer(i.encryptionMd).then((async e=>Zt.decryptMessage(r.privateKey,e,Zt.secretAlgorithm).then((e=>String.fromCharCode(...new Uint8Array(e))))))]).then((async([o,r])=>fetch(i.presignedUrl,{method:"GET",headers:{"Content-Encoding":"base64","Content-Type":"application/octet-stream","x-amz-server-side-encryption-customer-algorithm":"AES256","x-amz-server-side-encryption-customer-key":o,"x-amz-server-side-encryption-customer-key-md5":r}}).then((async e=>{if(200!=e.status&&201!=e.status)throw new Error("s3 connect failed");return e.body})).then((e=>{const t=e.getReader();return new ReadableStream({start:e=>function n(){return t.read().then((({done:t,value:o})=>{if(a+=o?.length||0,c.value=a/l*100,!t)return e.enqueue(o),n();e.close()}))}()})})).then((e=>new Response(e))).then((e=>e.blob())).then((async o=>{let s=new Blob([o],{type:n.dataset.content_type});return t.then((async()=>e.addItem({fileName:n.dataset.new_file_name,originFileName:n.dataset.name,fileData:s,lastModified:(new Date).getTime(),uploadType:n.dataset.upload_type,roomId:Kt.roomId,workspaceId:Vt.workspaceId}).then((()=>window.URL.createObjectURL(s)))))})).then((e=>{n.image?n.image.src=e:n.video?n.video.src=e:n.resourcesUrl=e,s&&(s.replaceChildren(),s.parentElement.removeChild(s),s.remove())})).catch((e=>{console.error(e),console.error(e.message)}))))}))}))};Ht.customImageCallback=e=>n(e),$t.customVideoCallback=e=>n(e),Ft.customResourcesCallback=e=>n(e)}));const t=new IntersectionObserver(((e,t)=>{e.forEach((e=>{let{isIntersecting:t,target:n}=e;n.hasAttribute("slot")||n.hasAttribute("data-visibility_not")||(t?(n.style.visibility="",n.style.opacity="",n.dataset.visibility="v"):(n.style.visibility="hidden",n.style.opacity=0,n.dataset.visibility="h"))}))}),{threshold:.01,root:document});new MutationObserver(((e,n)=>{e.forEach((e=>{let{addedNodes:n,removedNodes:o}=e;new Promise((e=>{n.forEach((async e=>{e.nodeType!==Node.ELEMENT_NODE||e.nodeType===Node.ELEMENT_NODE&&e.hasAttribute("data-is_not_visible_target")||e.isContentEditable||new Promise((n=>{t.observe(e),n()}))})),e()})),new Promise((e=>{o.forEach((async e=>{e.nodeType!==Node.ELEMENT_NODE||e.nodeType===Node.ELEMENT_NODE&&e.hasAttribute("data-is_not_visible_target")||e.isContentEditable||new Promise((n=>{t.unobserve(e),n()}))})),e()}))}))})).observe(document,{childList:!0,subtree:!0})}}("multipleNoticeBoard"),window.addEventListener("DOMContentLoaded",(e=>{let t,n=new Promise((e=>{t=e}));window.myAPI.getWorkspaceId().then((e=>{null!=e&&t(e),window.myAPI.event.electronEventTrigger.addElectronEventListener("workspaceChange",(n=>{let o=n.workspaceId;e!=o&&null!=o&&t(o)}))})),n.then((e=>{document.querySelector("#main").append(en.element),en.element.dataset.is_resize=!1,en.element.grow=1,window.myAPI.event.electronEventTrigger.addElectronEventListener("noticeBoardChange",(e=>{ft.noticeBoardId=e.noticeBoardId})),window.myAPI.stream.initWorkspaceStream({workspaceId:e})}))}))})();
//# sourceMappingURL=multipleNoticeBoardViewRenderer.js.map