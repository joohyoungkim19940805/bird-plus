(()=>{"use strict";var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function n(t,e){return function(){return t.apply(e,arguments)}}t.r(e),t.d(e,{hasBrowserEnv:()=>et,hasStandardBrowserEnv:()=>nt,hasStandardBrowserWebWorkerEnv:()=>it});const{toString:o}=Object.prototype,{getPrototypeOf:i}=Object,s=(a=Object.create(null),t=>{const e=o.call(t);return a[e]||(a[e]=e.slice(8,-1).toLowerCase())});var a;const r=t=>(t=t.toLowerCase(),e=>s(e)===t),l=t=>e=>typeof e===t,{isArray:c}=Array,d=l("undefined");const h=r("ArrayBuffer");const u=l("string"),p=l("function"),m=l("number"),g=t=>null!==t&&"object"==typeof t,f=t=>{if("object"!==s(t))return!1;const e=i(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in t||Symbol.iterator in t)},y=r("Date"),b=r("File"),w=r("Blob"),v=r("FileList"),E=r("URLSearchParams");function C(t,e,{allOwnKeys:n=!1}={}){if(null==t)return;let o,i;if("object"!=typeof t&&(t=[t]),c(t))for(o=0,i=t.length;o<i;o++)e.call(null,t[o],o,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),s=i.length;let a;for(o=0;o<s;o++)a=i[o],e.call(null,t[a],a,t)}}function x(t,e){e=e.toLowerCase();const n=Object.keys(t);let o,i=n.length;for(;i-- >0;)if(o=n[i],e===o.toLowerCase())return o;return null}const S="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,_=t=>!d(t)&&t!==S;const k=(O="undefined"!=typeof Uint8Array&&i(Uint8Array),t=>O&&t instanceof O);var O;const L=r("HTMLFormElement"),N=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),T=r("RegExp"),B=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),o={};C(n,((n,i)=>{let s;!1!==(s=e(n,i,t))&&(o[i]=s||n)})),Object.defineProperties(t,o)},P="abcdefghijklmnopqrstuvwxyz",I="0123456789",A={DIGIT:I,ALPHA:P,ALPHA_DIGIT:P+P.toUpperCase()+I};const R=r("AsyncFunction"),j={isArray:c,isArrayBuffer:h,isBuffer:function(t){return null!==t&&!d(t)&&null!==t.constructor&&!d(t.constructor)&&p(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:t=>{let e;return t&&("function"==typeof FormData&&t instanceof FormData||p(t.append)&&("formdata"===(e=s(t))||"object"===e&&p(t.toString)&&"[object FormData]"===t.toString()))},isArrayBufferView:function(t){let e;return e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&h(t.buffer),e},isString:u,isNumber:m,isBoolean:t=>!0===t||!1===t,isObject:g,isPlainObject:f,isUndefined:d,isDate:y,isFile:b,isBlob:w,isRegExp:T,isFunction:p,isStream:t=>g(t)&&p(t.pipe),isURLSearchParams:E,isTypedArray:k,isFileList:v,forEach:C,merge:function t(){const{caseless:e}=_(this)&&this||{},n={},o=(o,i)=>{const s=e&&x(n,i)||i;f(n[s])&&f(o)?n[s]=t(n[s],o):f(o)?n[s]=t({},o):c(o)?n[s]=o.slice():n[s]=o};for(let t=0,e=arguments.length;t<e;t++)arguments[t]&&C(arguments[t],o);return n},extend:(t,e,o,{allOwnKeys:i}={})=>(C(e,((e,i)=>{o&&p(e)?t[i]=n(e,o):t[i]=e}),{allOwnKeys:i}),t),trim:t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),inherits:(t,e,n,o)=>{t.prototype=Object.create(e.prototype,o),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},toFlatObject:(t,e,n,o)=>{let s,a,r;const l={};if(e=e||{},null==t)return e;do{for(s=Object.getOwnPropertyNames(t),a=s.length;a-- >0;)r=s[a],o&&!o(r,t,e)||l[r]||(e[r]=t[r],l[r]=!0);t=!1!==n&&i(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},kindOf:s,kindOfTest:r,endsWith:(t,e,n)=>{t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;const o=t.indexOf(e,n);return-1!==o&&o===n},toArray:t=>{if(!t)return null;if(c(t))return t;let e=t.length;if(!m(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},forEachEntry:(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let o;for(;(o=n.next())&&!o.done;){const n=o.value;e.call(t,n[0],n[1])}},matchAll:(t,e)=>{let n;const o=[];for(;null!==(n=t.exec(e));)o.push(n);return o},isHTMLForm:L,hasOwnProperty:N,hasOwnProp:N,reduceDescriptors:B,freezeMethods:t=>{B(t,((e,n)=>{if(p(t)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const o=t[n];p(o)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(t,e)=>{const n={},o=t=>{t.forEach((t=>{n[t]=!0}))};return c(t)?o(t):o(String(t).split(e)),n},toCamelCase:t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(t,e,n){return e.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(t,e)=>(t=+t,Number.isFinite(t)?t:e),findKey:x,global:S,isContextDefined:_,ALPHABET:A,generateString:(t=16,e=A.ALPHA_DIGIT)=>{let n="";const{length:o}=e;for(;t--;)n+=e[Math.random()*o|0];return n},isSpecCompliantForm:function(t){return!!(t&&p(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator])},toJSONObject:t=>{const e=new Array(10),n=(t,o)=>{if(g(t)){if(e.indexOf(t)>=0)return;if(!("toJSON"in t)){e[o]=t;const i=c(t)?[]:{};return C(t,((t,e)=>{const s=n(t,o+1);!d(s)&&(i[e]=s)})),e[o]=void 0,i}}return t};return n(t,0)},isAsyncFn:R,isThenable:t=>t&&(g(t)||p(t))&&p(t.then)&&p(t.catch)};function M(t,e,n,o,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),o&&(this.request=o),i&&(this.response=i)}j.inherits(M,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:j.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const D=M.prototype,H={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((t=>{H[t]={value:t}})),Object.defineProperties(M,H),Object.defineProperty(D,"isAxiosError",{value:!0}),M.from=(t,e,n,o,i,s)=>{const a=Object.create(D);return j.toFlatObject(t,a,(function(t){return t!==Error.prototype}),(t=>"isAxiosError"!==t)),M.call(a,t.message,e,n,o,i),a.cause=t,a.name=t.name,s&&Object.assign(a,s),a};const $=M;function z(t){return j.isPlainObject(t)||j.isArray(t)}function F(t){return j.endsWith(t,"[]")?t.slice(0,-2):t}function U(t,e,n){return t?t.concat(e).map((function(t,e){return t=F(t),!n&&e?"["+t+"]":t})).join(n?".":""):e}const W=j.toFlatObject(j,{},null,(function(t){return/^is[A-Z]/.test(t)}));const q=function(t,e,n){if(!j.isObject(t))throw new TypeError("target must be an object");e=e||new FormData;const o=(n=j.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(t,e){return!j.isUndefined(e[t])}))).metaTokens,i=n.visitor||c,s=n.dots,a=n.indexes,r=(n.Blob||"undefined"!=typeof Blob&&Blob)&&j.isSpecCompliantForm(e);if(!j.isFunction(i))throw new TypeError("visitor must be a function");function l(t){if(null===t)return"";if(j.isDate(t))return t.toISOString();if(!r&&j.isBlob(t))throw new $("Blob is not supported. Use a Buffer instead.");return j.isArrayBuffer(t)||j.isTypedArray(t)?r&&"function"==typeof Blob?new Blob([t]):Buffer.from(t):t}function c(t,n,i){let r=t;if(t&&!i&&"object"==typeof t)if(j.endsWith(n,"{}"))n=o?n:n.slice(0,-2),t=JSON.stringify(t);else if(j.isArray(t)&&function(t){return j.isArray(t)&&!t.some(z)}(t)||(j.isFileList(t)||j.endsWith(n,"[]"))&&(r=j.toArray(t)))return n=F(n),r.forEach((function(t,o){!j.isUndefined(t)&&null!==t&&e.append(!0===a?U([n],o,s):null===a?n:n+"[]",l(t))})),!1;return!!z(t)||(e.append(U(i,n,s),l(t)),!1)}const d=[],h=Object.assign(W,{defaultVisitor:c,convertValue:l,isVisitable:z});if(!j.isObject(t))throw new TypeError("data must be an object");return function t(n,o){if(!j.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+o.join("."));d.push(n),j.forEach(n,(function(n,s){!0===(!(j.isUndefined(n)||null===n)&&i.call(e,n,j.isString(s)?s.trim():s,o,h))&&t(n,o?o.concat(s):[s])})),d.pop()}}(t),e};function V(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function(t){return e[t]}))}function J(t,e){this._pairs=[],t&&q(t,this,e)}const K=J.prototype;K.append=function(t,e){this._pairs.push([t,e])},K.toString=function(t){const e=t?function(e){return t.call(this,e,V)}:V;return this._pairs.map((function(t){return e(t[0])+"="+e(t[1])}),"").join("&")};const G=J;function X(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Y(t,e,n){if(!e)return t;const o=n&&n.encode||X,i=n&&n.serialize;let s;if(s=i?i(e,n):j.isURLSearchParams(e)?e.toString():new G(e,n).toString(o),s){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+s}return t}const Z=class{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){j.forEach(this.handlers,(function(e){null!==e&&t(e)}))}},Q={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},tt={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:G,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},et="undefined"!=typeof window&&"undefined"!=typeof document,nt=(ot="undefined"!=typeof navigator&&navigator.product,et&&["ReactNative","NativeScript","NS"].indexOf(ot)<0);var ot;const it="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,st={...e,...tt};const at=function(t){function e(t,n,o,i){let s=t[i++];const a=Number.isFinite(+s),r=i>=t.length;if(s=!s&&j.isArray(o)?o.length:s,r)return j.hasOwnProp(o,s)?o[s]=[o[s],n]:o[s]=n,!a;o[s]&&j.isObject(o[s])||(o[s]=[]);return e(t,n,o[s],i)&&j.isArray(o[s])&&(o[s]=function(t){const e={},n=Object.keys(t);let o;const i=n.length;let s;for(o=0;o<i;o++)s=n[o],e[s]=t[s];return e}(o[s])),!a}if(j.isFormData(t)&&j.isFunction(t.entries)){const n={};return j.forEachEntry(t,((t,o)=>{e(function(t){return j.matchAll(/\w+|\[(\w*)]/g,t).map((t=>"[]"===t[0]?"":t[1]||t[0]))}(t),o,n,0)})),n}return null};const rt={transitional:Q,adapter:["xhr","http"],transformRequest:[function(t,e){const n=e.getContentType()||"",o=n.indexOf("application/json")>-1,i=j.isObject(t);i&&j.isHTMLForm(t)&&(t=new FormData(t));if(j.isFormData(t))return o&&o?JSON.stringify(at(t)):t;if(j.isArrayBuffer(t)||j.isBuffer(t)||j.isStream(t)||j.isFile(t)||j.isBlob(t))return t;if(j.isArrayBufferView(t))return t.buffer;if(j.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return q(t,new st.classes.URLSearchParams,Object.assign({visitor:function(t,e,n,o){return st.isNode&&j.isBuffer(t)?(this.append(e,t.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}(t,this.formSerializer).toString();if((s=j.isFileList(t))||n.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return q(s?{"files[]":t}:t,e&&new e,this.formSerializer)}}return i||o?(e.setContentType("application/json",!1),function(t,e,n){if(j.isString(t))try{return(e||JSON.parse)(t),j.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(n||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){const e=this.transitional||rt.transitional,n=e&&e.forcedJSONParsing,o="json"===this.responseType;if(t&&j.isString(t)&&(n&&!this.responseType||o)){const n=!(e&&e.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(t){if(n){if("SyntaxError"===t.name)throw $.from(t,$.ERR_BAD_RESPONSE,this,null,this.response);throw t}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:st.classes.FormData,Blob:st.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};j.forEach(["delete","get","head","post","put","patch"],(t=>{rt.headers[t]={}}));const lt=rt,ct=j.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),dt=Symbol("internals");function ht(t){return t&&String(t).trim().toLowerCase()}function ut(t){return!1===t||null==t?t:j.isArray(t)?t.map(ut):String(t)}function pt(t,e,n,o,i){return j.isFunction(o)?o.call(this,e,n):(i&&(e=n),j.isString(e)?j.isString(o)?-1!==e.indexOf(o):j.isRegExp(o)?o.test(e):void 0:void 0)}class mt{constructor(t){t&&this.set(t)}set(t,e,n){const o=this;function i(t,e,n){const i=ht(e);if(!i)throw new Error("header name must be a non-empty string");const s=j.findKey(o,i);(!s||void 0===o[s]||!0===n||void 0===n&&!1!==o[s])&&(o[s||e]=ut(t))}const s=(t,e)=>j.forEach(t,((t,n)=>i(t,n,e)));return j.isPlainObject(t)||t instanceof this.constructor?s(t,e):j.isString(t)&&(t=t.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim())?s((t=>{const e={};let n,o,i;return t&&t.split("\n").forEach((function(t){i=t.indexOf(":"),n=t.substring(0,i).trim().toLowerCase(),o=t.substring(i+1).trim(),!n||e[n]&&ct[n]||("set-cookie"===n?e[n]?e[n].push(o):e[n]=[o]:e[n]=e[n]?e[n]+", "+o:o)})),e})(t),e):null!=t&&i(e,t,n),this}get(t,e){if(t=ht(t)){const n=j.findKey(this,t);if(n){const t=this[n];if(!e)return t;if(!0===e)return function(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(t);)e[o[1]]=o[2];return e}(t);if(j.isFunction(e))return e.call(this,t,n);if(j.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=ht(t)){const n=j.findKey(this,t);return!(!n||void 0===this[n]||e&&!pt(0,this[n],n,e))}return!1}delete(t,e){const n=this;let o=!1;function i(t){if(t=ht(t)){const i=j.findKey(n,t);!i||e&&!pt(0,n[i],i,e)||(delete n[i],o=!0)}}return j.isArray(t)?t.forEach(i):i(t),o}clear(t){const e=Object.keys(this);let n=e.length,o=!1;for(;n--;){const i=e[n];t&&!pt(0,this[i],i,t,!0)||(delete this[i],o=!0)}return o}normalize(t){const e=this,n={};return j.forEach(this,((o,i)=>{const s=j.findKey(n,i);if(s)return e[s]=ut(o),void delete e[i];const a=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((t,e,n)=>e.toUpperCase()+n))}(i):String(i).trim();a!==i&&delete e[i],e[a]=ut(o),n[a]=!0})),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return j.forEach(this,((n,o)=>{null!=n&&!1!==n&&(e[o]=t&&j.isArray(n)?n.join(", "):n)})),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([t,e])=>t+": "+e)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach((t=>n.set(t))),n}static accessor(t){const e=(this[dt]=this[dt]={accessors:{}}).accessors,n=this.prototype;function o(t){const o=ht(t);e[o]||(!function(t,e){const n=j.toCamelCase(" "+e);["get","set","has"].forEach((o=>{Object.defineProperty(t,o+n,{value:function(t,n,i){return this[o].call(this,e,t,n,i)},configurable:!0})}))}(n,t),e[o]=!0)}return j.isArray(t)?t.forEach(o):o(t),this}}mt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),j.reduceDescriptors(mt.prototype,(({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(t){this[n]=t}}})),j.freezeMethods(mt);const gt=mt;function ft(t,e){const n=this||lt,o=e||n,i=gt.from(o.headers);let s=o.data;return j.forEach(t,(function(t){s=t.call(n,s,i.normalize(),e?e.status:void 0)})),i.normalize(),s}function yt(t){return!(!t||!t.__CANCEL__)}function bt(t,e,n){$.call(this,null==t?"canceled":t,$.ERR_CANCELED,e,n),this.name="CanceledError"}j.inherits(bt,$,{__CANCEL__:!0});const wt=bt;const vt=st.hasStandardBrowserEnv?{write(t,e,n,o,i,s){const a=[t+"="+encodeURIComponent(e)];j.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),j.isString(o)&&a.push("path="+o),j.isString(i)&&a.push("domain="+i),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Et(t,e){return t&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)?function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}const Ct=st.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function o(n){let o=n;return t&&(e.setAttribute("href",o),o=e.href),e.setAttribute("href",o),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return n=o(window.location.href),function(t){const e=j.isString(t)?o(t):t;return e.protocol===n.protocol&&e.host===n.host}}():function(){return!0};const xt=function(t,e){t=t||10;const n=new Array(t),o=new Array(t);let i,s=0,a=0;return e=void 0!==e?e:1e3,function(r){const l=Date.now(),c=o[a];i||(i=l),n[s]=r,o[s]=l;let d=a,h=0;for(;d!==s;)h+=n[d++],d%=t;if(s=(s+1)%t,s===a&&(a=(a+1)%t),l-i<e)return;const u=c&&l-c;return u?Math.round(1e3*h/u):void 0}};function St(t,e){let n=0;const o=xt(50,250);return i=>{const s=i.loaded,a=i.lengthComputable?i.total:void 0,r=s-n,l=o(r);n=s;const c={loaded:s,total:a,progress:a?s/a:void 0,bytes:r,rate:l||void 0,estimated:l&&a&&s<=a?(a-s)/l:void 0,event:i};c[e?"download":"upload"]=!0,t(c)}}const _t={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(t){return new Promise((function(e,n){let o=t.data;const i=gt.from(t.headers).normalize();let s,a,{responseType:r,withXSRFToken:l}=t;function c(){t.cancelToken&&t.cancelToken.unsubscribe(s),t.signal&&t.signal.removeEventListener("abort",s)}if(j.isFormData(o))if(st.hasStandardBrowserEnv||st.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if(!1!==(a=i.getContentType())){const[t,...e]=a?a.split(";").map((t=>t.trim())).filter(Boolean):[];i.setContentType([t||"multipart/form-data",...e].join("; "))}let d=new XMLHttpRequest;if(t.auth){const e=t.auth.username||"",n=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(e+":"+n))}const h=Et(t.baseURL,t.url);function u(){if(!d)return;const o=gt.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders());!function(t,e,n){const o=n.config.validateStatus;n.status&&o&&!o(n.status)?e(new $("Request failed with status code "+n.status,[$.ERR_BAD_REQUEST,$.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}((function(t){e(t),c()}),(function(t){n(t),c()}),{data:r&&"text"!==r&&"json"!==r?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:o,config:t,request:d}),d=null}if(d.open(t.method.toUpperCase(),Y(h,t.params,t.paramsSerializer),!0),d.timeout=t.timeout,"onloadend"in d?d.onloadend=u:d.onreadystatechange=function(){d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))&&setTimeout(u)},d.onabort=function(){d&&(n(new $("Request aborted",$.ECONNABORTED,t,d)),d=null)},d.onerror=function(){n(new $("Network Error",$.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const o=t.transitional||Q;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(new $(e,o.clarifyTimeoutError?$.ETIMEDOUT:$.ECONNABORTED,t,d)),d=null},st.hasStandardBrowserEnv&&(l&&j.isFunction(l)&&(l=l(t)),l||!1!==l&&Ct(h))){const e=t.xsrfHeaderName&&t.xsrfCookieName&&vt.read(t.xsrfCookieName);e&&i.set(t.xsrfHeaderName,e)}void 0===o&&i.setContentType(null),"setRequestHeader"in d&&j.forEach(i.toJSON(),(function(t,e){d.setRequestHeader(e,t)})),j.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),r&&"json"!==r&&(d.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&d.addEventListener("progress",St(t.onDownloadProgress,!0)),"function"==typeof t.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",St(t.onUploadProgress)),(t.cancelToken||t.signal)&&(s=e=>{d&&(n(!e||e.type?new wt(null,t,d):e),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(s),t.signal&&(t.signal.aborted?s():t.signal.addEventListener("abort",s)));const p=function(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(h);p&&-1===st.protocols.indexOf(p)?n(new $("Unsupported protocol "+p+":",$.ERR_BAD_REQUEST,t)):d.send(o||null)}))}};j.forEach(_t,((t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(t){}Object.defineProperty(t,"adapterName",{value:e})}}));const kt=t=>`- ${t}`,Ot=t=>j.isFunction(t)||null===t||!1===t,Lt=t=>{t=j.isArray(t)?t:[t];const{length:e}=t;let n,o;const i={};for(let s=0;s<e;s++){let e;if(n=t[s],o=n,!Ot(n)&&(o=_t[(e=String(n)).toLowerCase()],void 0===o))throw new $(`Unknown adapter '${e}'`);if(o)break;i[e||"#"+s]=o}if(!o){const t=Object.entries(i).map((([t,e])=>`adapter ${t} `+(!1===e?"is not supported by the environment":"is not available in the build")));let n=e?t.length>1?"since :\n"+t.map(kt).join("\n"):" "+kt(t[0]):"as no adapter specified";throw new $("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return o};function Nt(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new wt(null,t)}function Tt(t){Nt(t),t.headers=gt.from(t.headers),t.data=ft.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1);return Lt(t.adapter||lt.adapter)(t).then((function(e){return Nt(t),e.data=ft.call(t,t.transformResponse,e),e.headers=gt.from(e.headers),e}),(function(e){return yt(e)||(Nt(t),e&&e.response&&(e.response.data=ft.call(t,t.transformResponse,e.response),e.response.headers=gt.from(e.response.headers))),Promise.reject(e)}))}const Bt=t=>t instanceof gt?t.toJSON():t;function Pt(t,e){e=e||{};const n={};function o(t,e,n){return j.isPlainObject(t)&&j.isPlainObject(e)?j.merge.call({caseless:n},t,e):j.isPlainObject(e)?j.merge({},e):j.isArray(e)?e.slice():e}function i(t,e,n){return j.isUndefined(e)?j.isUndefined(t)?void 0:o(void 0,t,n):o(t,e,n)}function s(t,e){if(!j.isUndefined(e))return o(void 0,e)}function a(t,e){return j.isUndefined(e)?j.isUndefined(t)?void 0:o(void 0,t):o(void 0,e)}function r(n,i,s){return s in e?o(n,i):s in t?o(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:r,headers:(t,e)=>i(Bt(t),Bt(e),!0)};return j.forEach(Object.keys(Object.assign({},t,e)),(function(o){const s=l[o]||i,a=s(t[o],e[o],o);j.isUndefined(a)&&s!==r||(n[o]=a)})),n}const It="1.6.2",At={};["object","boolean","number","function","string","symbol"].forEach(((t,e)=>{At[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}}));const Rt={};At.transitional=function(t,e,n){function o(t,e){return"[Axios v1.6.2] Transitional option '"+t+"'"+e+(n?". "+n:"")}return(n,i,s)=>{if(!1===t)throw new $(o(i," has been removed"+(e?" in "+e:"")),$.ERR_DEPRECATED);return e&&!Rt[i]&&(Rt[i]=!0,console.warn(o(i," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,i,s)}};const jt={assertOptions:function(t,e,n){if("object"!=typeof t)throw new $("options must be an object",$.ERR_BAD_OPTION_VALUE);const o=Object.keys(t);let i=o.length;for(;i-- >0;){const s=o[i],a=e[s];if(a){const e=t[s],n=void 0===e||a(e,s,t);if(!0!==n)throw new $("option "+s+" must be "+n,$.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new $("Unknown option "+s,$.ERR_BAD_OPTION)}},validators:At},Mt=jt.validators;class Dt{constructor(t){this.defaults=t,this.interceptors={request:new Z,response:new Z}}request(t,e){"string"==typeof t?(e=e||{}).url=t:e=t||{},e=Pt(this.defaults,e);const{transitional:n,paramsSerializer:o,headers:i}=e;void 0!==n&&jt.assertOptions(n,{silentJSONParsing:Mt.transitional(Mt.boolean),forcedJSONParsing:Mt.transitional(Mt.boolean),clarifyTimeoutError:Mt.transitional(Mt.boolean)},!1),null!=o&&(j.isFunction(o)?e.paramsSerializer={serialize:o}:jt.assertOptions(o,{encode:Mt.function,serialize:Mt.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let s=i&&j.merge(i.common,i[e.method]);i&&j.forEach(["delete","get","head","post","put","patch","common"],(t=>{delete i[t]})),e.headers=gt.concat(s,i);const a=[];let r=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(r=r&&t.synchronous,a.unshift(t.fulfilled,t.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(t){l.push(t.fulfilled,t.rejected)}));let d,h=0;if(!r){const t=[Tt.bind(this),void 0];for(t.unshift.apply(t,a),t.push.apply(t,l),d=t.length,c=Promise.resolve(e);h<d;)c=c.then(t[h++],t[h++]);return c}d=a.length;let u=e;for(h=0;h<d;){const t=a[h++],e=a[h++];try{u=t(u)}catch(t){e.call(this,t);break}}try{c=Tt.call(this,u)}catch(t){return Promise.reject(t)}for(h=0,d=l.length;h<d;)c=c.then(l[h++],l[h++]);return c}getUri(t){return Y(Et((t=Pt(this.defaults,t)).baseURL,t.url),t.params,t.paramsSerializer)}}j.forEach(["delete","get","head","options"],(function(t){Dt.prototype[t]=function(e,n){return this.request(Pt(n||{},{method:t,url:e,data:(n||{}).data}))}})),j.forEach(["post","put","patch"],(function(t){function e(e){return function(n,o,i){return this.request(Pt(i||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:o}))}}Dt.prototype[t]=e(),Dt.prototype[t+"Form"]=e(!0)}));const Ht=Dt;class $t{constructor(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise((function(t){e=t}));const n=this;this.promise.then((t=>{if(!n._listeners)return;let e=n._listeners.length;for(;e-- >0;)n._listeners[e](t);n._listeners=null})),this.promise.then=t=>{let e;const o=new Promise((t=>{n.subscribe(t),e=t})).then(t);return o.cancel=function(){n.unsubscribe(e)},o},t((function(t,o,i){n.reason||(n.reason=new wt(t,o,i),e(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}static source(){let t;return{token:new $t((function(e){t=e})),cancel:t}}}const zt=$t;const Ft={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ft).forEach((([t,e])=>{Ft[e]=t}));const Ut=Ft;const Wt=function t(e){const o=new Ht(e),i=n(Ht.prototype.request,o);return j.extend(i,Ht.prototype,o,{allOwnKeys:!0}),j.extend(i,o,null,{allOwnKeys:!0}),i.create=function(n){return t(Pt(e,n))},i}(lt);Wt.Axios=Ht,Wt.CanceledError=wt,Wt.CancelToken=zt,Wt.isCancel=yt,Wt.VERSION=It,Wt.toFormData=q,Wt.AxiosError=$,Wt.Cancel=Wt.CanceledError,Wt.all=function(t){return Promise.all(t)},Wt.spread=function(t){return function(e){return t.apply(null,e)}},Wt.isAxiosError=function(t){return j.isObject(t)&&!0===t.isAxiosError},Wt.mergeConfig=Pt,Wt.AxiosHeaders=gt,Wt.formToJSON=t=>at(j.isHTMLForm(t)?new FormData(t):t),Wt.getAdapter=Lt,Wt.HttpStatusCode=Ut,Wt.default=Wt;const qt=Wt,Vt=console,Jt="localhost"==window.location.host;top.__isLocal=Jt;const Kt=new class{#t;constructor(){}async isLogin(t=(()=>{})){return this.#t?Promise.resolve(t(this.#t)):qt.get("/api/account/search/is-login",{headers:{"Content-Type":"application/json"}}).catch((t=>t.response)).then((e=>this.responseIsOk(e)?(0==e.data.code?e.isLogin=!0:(100==e.data.code||105==e.data.code||106==e.data.code||e.data.code,e.isLogin=!1),e.isLogin?(this.#t=e,setTimeout((()=>{this.#t=void 0}),6e4)):qt.defaults.headers.common.Authorization="",t(e)):t({isLogin:!1,status:e?.status,statusText:e?.statusText})))}responseIsOk({status:t}={}){return!!t&&("200"==t||"201"==t)}responseCheck(t){let e=t.status,{code:n,data:o}=t.data;if("200"==e||"201"==e)return t;throw Vt.error(t),new Error(t.message)}resetLoginRemeber(){this.#t=void 0}},Gt=console;const Xt=new class{constructor(){}loginProcessing(t){return t=Object.entries(t).reduce(((t,[e,n])=>(null!=n&&""!=n&&(t[e]=n),t)),{}),qt.post("/login-processing",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then((t=>Kt.responseIsOk(t)&&"Window"==top.constructor.name?t.data:t)).catch((t=>(Gt.error("loginProcessing error : ",t.message),qt.defaults.headers.common.Authorization="",console.log(t),t.response?t.response.data:t.message)))}getAccountInfo(){return Kt.isLogin((t=>t.isLogin?qt.get("/api/account/search/get-account-info",{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(Gt.error("IPC getAccountInfo error : ",JSON.stringify(t)),t.response?t.response.data:t.message))):{isLogin:!1}))}updateSimpleAccountInfo(t={}){return Kt.isLogin((e=>e.isLogin?(t=Object.entries(t).reduce(((t,[e,n])=>(null!=n&&""!=n&&(t[e]=n),t)),{}),qt.post("/api/account/update/simple-account-info",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(Gt.error("IPC createPermitWokrspaceInAccount error : ",JSON.stringify(t)),t.response?t.response.data:t.message)))):{isLogin:!1})).catch((t=>{Gt.error("error ::: ",t.message),Gt.error("error stack :::",t.stack)}))}},Yt=console;const Zt=new class{constructor(){}generateSecurityPutObjectPresignedUrl(t){return Kt.isLogin((e=>(t=Object.entries(t).reduce(((t,[e,n])=>(null!=n&&""!=n&&(t[e]=n),t)),{}),e.isLogin?qt.post("/api/generate-presigned-url/create/security",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(Yt.error("IPC sendChatting error",t),t.response.data))):{isLogin:!1}))).catch((t=>{Yt.error("sendChatting login error ::: ",t.message),Yt.error("sendChatting login error stack ::: ",t.stack)}))}generateSecurityGetObjectPresignedUrl(t){return Kt.isLogin((e=>(t=Object.entries(t).reduce(((t,[e,n])=>(null!=n&&""!=n&&(t[e]=n),t)),{}),e.isLogin?qt.post("/api/generate-presigned-url/search/security",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(Yt.error("IPC sendChatting error",t),t.response.data))):{isLogin:!1}))).catch((t=>{Yt.error("sendChatting login error ::: ",t.message),Yt.error("sendChatting login error stack ::: ",t.stack)}))}generateGetObjectPresignedUrl(t){return Kt.isLogin((e=>(t=Object.entries(t).reduce(((t,[e,n])=>(null!=n&&""!=n&&(t[e]=n),t)),{}),e.isLogin?qt.post("/api/generate-presigned-url/create/",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(Yt.error("IPC sendChatting error",t),t.response.data))):{isLogin:!1}))).catch((t=>{Yt.error("sendChatting login error ::: ",t.message),Yt.error("sendChatting login error stack ::: ",t.stack)}))}},Qt=console;const te=new class{constructor(){}sendChatting(t){return Kt.isLogin((e=>e.isLogin?(t=Object.entries(t).reduce(((t,[e,n])=>(null!=n&&""!=n&&(t[e]=n),t)),{}),qt.post("/api/chatting/create/send-chatting",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(Qt.error("IPC sendChatting error",t),t.response.data)))):{isLogin:!1})).catch((t=>{Qt.error("sendChatting login error ::: ",t.message),Qt.error("sendChatting login error stack ::: ",t.stack)}))}deleteChatting(t){return Kt.isLogin((e=>e.isLogin?(t=Object.entries(t).reduce(((t,[e,n])=>(null!=n&&""!=n&&(t[e]=n),t)),{}),qt.post("/api/chatting/delete/",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(Qt.error("IPC sendChatting error",t),t.response.data)))):{isLogin:!1})).catch((t=>{Qt.error("sendChatting login error ::: ",t.message),Qt.error("sendChatting login error stack ::: ",t.stack)}))}searchChattingList(t){return Kt.isLogin((e=>{if(e.isLogin){let{workspaceId:e,roomId:n}=t,o=Object.entries(t).filter((([t,e])=>null!=e&&""!=e&&"workspaceId"!=t&&"roomId"!=t)).map((([t,e])=>`${t}=${e}`)).join("&");return qt.get(`/api/chatting/search/chatting-list/${e}/${n}?${o}`,{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(Qt.error("IPC searchChatting error",t),t.response.data)))}return{isLogin:!1}})).catch((t=>{Qt.error("searchChatting login error ::: ",t.message),Qt.error("searchChatting login error stack ::: ",t.stack)}))}},ee=console;const ne=new class{constructor(){}createEmotionReaction(t={}){return Kt.isLogin((e=>e.isLogin?(t=Object.entries(t).reduce(((t,[e,n])=>(null!=n&&""!=n&&(t[e]=n),t)),{}),qt.post("/api/emoticon/create/reaction",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(ee.error("IPC createEmotion error : ",JSON.stringify(t)),t.response?t.response.data:t.message)))):{isLogin:!1})).catch((t=>{ee.error("error ::: ",t.message),ee.error("error stack :::",t.stack)}))}deleteEmotion(t={}){return Kt.isLogin((e=>e.isLogin?(t=Object.entries(t).reduce(((t,[e,n])=>(null!=n&&""!=n&&(t[e]=n),t)),{}),qt.post("/api/emoticon/delete/",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(ee.error("IPC deleteEmotion error : ",JSON.stringify(t)),t.response?t.response.data:t.message)))):{isLogin:!1})).catch((t=>{ee.error("error ::: ",t.message),ee.error("error stack :::",t.stack)}))}getIsReaction(t={}){return Kt.isLogin((e=>{if(e.isLogin){let{workspaceId:e}=t,n=Object.entries(t).filter((([t,e])=>null!=e&&""!=e&&"workspaceId"!=t)).map((([t,e])=>e instanceof Array?e=e.map((e=>`${t}=${e}`)).join("&"):`${t}=${e}`)).join("&");return qt.get(`/api/emoticon/search/is-reaction?${n}`,{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(ee.error("IPC searchMyJoinedRoomList error : ",JSON.stringify(t)),t.response?t.response.data:t.message)))}return{isLogin:!1}})).catch((t=>{ee.error("error ::: ",t.message),ee.error("error stack :::",t.stack)}))}},oe=console;const ie=new class{source;prevWorkspaceId;#e;constructor(){}initWorkspaceStream(t,e,n){let{workspaceId:o}=t;e||(e=top?.EventSource),this.source&&this.source.close(),this.prevWorkspaceId=o,this.source=new e(`/api/event-stream/workspace/${o}`,{headers:{Authorization:qt.defaults.headers.common.Authorization},withCredentials:!top.__isLocal}),this.source.onmessage=t=>{let{data:e,lastEventId:o,origin:i,type:s}=t;e=JSON.parse(e),oe.debug("event stream data ::: ",e);let a=e.serverSentStreamType.split("_").map(((t,e)=>0==e?t.toLowerCase():t.charAt(0)+t.substring(1).toLowerCase())).join("");oe.debug("on message: ",t.data,"eventName ::",a),this[a]?this[a](a,e):n.webEventSend?n.webEventSend(a,e):n.send(a,e)},this.source.onerror=o=>{oe.error("on stream err: ",o),this.source.close(),setTimeout((()=>{this.initWorkspaceStream(t,e,n)}),500)},this.source.onopen=t=>{oe.debug("on success: ",t)}}#n(t,e){}#o(){this.source.close()}},se=console;const ae=new class{constructor(){}createNoticeBoardGroup(t={}){return Kt.isLogin((e=>e.isLogin?(t=Object.entries(t).reduce(((t,[e,n])=>(null!=n&&""!=n&&(t[e]=n),t)),{}),qt.post("/api/notice-board/create/group",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(se.error("IPC createNoticeBoardGroup error : ",JSON.stringify(t)),t.response?t.response.data:t.message)))):{isLogin:!1})).catch((t=>{se.error("error ::: ",t.message),se.error("error stack :::",t.stack)}))}createNoticeBoard(t={}){return Kt.isLogin((e=>e.isLogin?(t=Object.entries(t).reduce(((t,[e,n])=>(null!=n&&""!=n&&(t[e]=n),t)),{}),qt.post("/api/notice-board/create/",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(se.error("IPC createNoticeBoard error : ",JSON.stringify(t)),t.response?t.response.data:t.message)))):{isLogin:!1})).catch((t=>{se.error("error ::: ",t.message),se.error("error stack :::",t.stack)}))}createNoticeBoardDetail(t={}){return Kt.isLogin((e=>e.isLogin?(t=Object.entries(t).reduce(((t,[e,n])=>(null!=n&&""!=n&&(t[e]=n),t)),{}),qt.post("/api/notice-board/create/detail",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(se.error("IPC createNoticeBoardDetail error : ",JSON.stringify(t)),t.response?t.response.data:t.message)))):{isLogin:!1})).catch((t=>{se.error("error ::: ",t.message),se.error("error stack :::",t.stack)}))}searchNoticeBoardList(t={},e,n){return e||(e=top?.EventSource),Kt.isLogin((o=>{if(o.isLogin){let{workspaceId:o,roomId:i}=t,s=Object.entries(t).filter((([t,e])=>null!=e&&""!=e&&"workspaceId"!=t&&"roomId"!=t)).map((([t,e])=>`${t}=${e}`)).join("&");return new Promise((t=>{let a=new e(`/api/notice-board/search/notice-board-list/${o}/${i}?${s}`,{headers:{Authorization:qt.defaults.headers.common.Authorization},withCredentials:!top.__isLocal});a.onmessage=t=>{let{data:e,lastEventId:o,origin:i,type:s}=t;e=JSON.parse(e),n.webEventSend?n.webEventSend("noticeBoardAccept",e):n.send("noticeBoardAccept",e)},a.onerror=e=>{a.close(),t("done")}}))}return{isLogin:!1}})).catch((t=>{se.error("error ::: ",t.message),se.error("error stack :::",t.stack)}))}searchNoticeBoardDetailList(t={},e,n){return e||(e=top?.EventSource),Kt.isLogin((o=>{if(o.isLogin){let{workspaceId:o,roomId:i,noticeBoardId:s}=t;if(!s)return;let a=Object.entries(t).filter((([t,e])=>null!=e&&""!=e&&"workspaceId"!=t&&"roomId"!=t&&"noticeBoardId"!=t)).map((([t,e])=>`${t}=${e}`)).join("&");return new Promise((t=>{let r=new e(`/api/notice-board/search/notice-board-detail-list/${o}/${i}/${s}?${a}`,{headers:{Authorization:qt.defaults.headers.common.Authorization},withCredentials:!top.__isLocal});r.onmessage=t=>{let{data:e,lastEventId:o,origin:i,type:s}=t;e=JSON.parse(e),n.webEventSend?n.webEventSend("noticeBoardDetailAccept",e):n.send("noticeBoardDetailAccept",e)},r.onerror=e=>{console.log("searchNoticeBoardDetailList error :::: ",e),r.close(),t("done")}}))}return{isLogin:!1}})).catch((t=>{se.error("error ::: ",t.message),se.error("error stack :::",t.stack)}))}deleteNoticeBoard(t={}){return Kt.isLogin((e=>e.isLogin?(t=Object.entries(t).reduce(((t,[e,n])=>(null!=n&&""!=n&&(t[e]=n),t)),{}),console.log("delete param",t),qt.post("/api/notice-board/delete/",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(se.error("IPC deleteNoticeBoard error : ",JSON.stringify(t)),t.response?t.response.data:t.message)))):{isLogin:!1})).catch((t=>{se.error("error ::: ",t.message),se.error("error stack :::",t.stack)}))}deleteNoticeBoardGroup(t={}){return Kt.isLogin((e=>e.isLogin?(t=Object.entries(t).reduce(((t,[e,n])=>(null!=n&&""!=n&&(t[e]=n),t)),{}),qt.post("/api/notice-board/delete/group",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(se.error("IPC deleteNoticeBoardGroup error : ",JSON.stringify(t)),t.response?t.response.data:t.message)))):{isLogin:!1})).catch((t=>{se.error("error ::: ",t.message),se.error("error stack :::",t.stack)}))}updateNoticeBoardOrder(t=[]){return Kt.isLogin((e=>e.isLogin?(console.log("update param",t),qt.post("/api/notice-board/update/order",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(se.error("IPC updateNoticeBoardOrder error : ",JSON.stringify(t)),t.response?t.response.data:t.message)))):{isLogin:!1})).catch((t=>{se.error("error ::: ",t.message),se.error("error stack :::",t.stack)}))}updateNoticeBoardDetailOrder(t=[]){return Kt.isLogin((e=>e.isLogin?qt.post("/api/notice-board/update/detail-order",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(se.error("IPC updateNoticeBoardDetailOrder error : ",JSON.stringify(t)),t.response?t.response.data:t.message))):{isLogin:!1})).catch((t=>{se.error("error ::: ",t.message),se.error("error stack :::",t.stack)}))}},re=console;const le=new class{constructor(){}createRoom(t={}){return Kt.isLogin((e=>e.isLogin?(t=Object.entries(t).reduce(((t,[e,n])=>(null!=n&&""!=n&&(t[e]=n),t)),{}),qt.post("/api/room/create/",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(re.error("IPC createRoom error : ",JSON.stringify(t)),t.response?t.response.data:t.message)))):{isLogin:!1})).catch((t=>{re.error("error ::: ",t.message),re.error("error stack :::",t.stack)}))}createMySelfRoom(t={}){if(t.workspaceId&&!isNaN(parseInt(t.workspaceId)))return Kt.isLogin((e=>e.isLogin?qt.post(`/api/room/create/my-self-room/${t.workspaceId}`,{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(re.error("IPC createMySelfRoom error : ",JSON.stringify(t)),t.response?t.response.data:t.message))):{isLogin:!1})).catch((t=>{re.error("error ::: ",t.message),re.error("error stack :::",t.stack)}));re.error(`createMySelfRoom workspaceId is ::: ${t.workspaceId}`)}createRoomInAccount(t=[]){return Kt.isLogin((e=>e.isLogin?qt.post("/api/room/create/in-account",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).then((t=>(re.debug("createRoomInAccount ::: ",t),t))).catch((t=>(re.error("IPC createRoomInAccount error : ",JSON.stringify(t)),t.response?t.response.data:t.message))):{isLogin:!1})).catch((t=>{re.error("error ::: ",t.message),re.error("error stack :::",t.stack)}))}updateRoomInAccoutOrder(t=[]){return Kt.isLogin((e=>e.isLogin?qt.post("/api/room/update/order",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(re.error("IPC updateRoomInAccoutOrder error : ",JSON.stringify(t)),t.response?t.response.data:t.message))):{isLogin:!1})).catch((t=>{re.error("error ::: ",t.message),re.error("error stack :::",t.stack)}))}createRoomFavorites(t){return Kt.isLogin((e=>e.isLogin?(t=Object.entries(t).reduce(((t,[e,n])=>(null!=n&&""!=n&&(t[e]=n),t)),{}),qt.post("/api/room/create/favorites",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(re.error("IPC createRoomFavorites error : ",JSON.stringify(t)),t.response?t.response.data:t.message)))):{isLogin:!1})).catch((t=>{re.error("error ::: ",t.message),re.error("error stack :::",t.stack)}))}updateRoomFavorites(t=[]){return Kt.isLogin((e=>e.isLogin?qt.post("/api/room/update/favorites-order",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(re.error("IPC createRoom error : ",JSON.stringify(t)),t.response?t.response.data:t.message))):{isLogin:!1})).catch((t=>{re.error("error ::: ",t.message),re.error("error stack :::",t.stack)}))}searchRoomList(t={}){return Kt.isLogin((e=>{if(e.isLogin){let{roomId:e}=t,n=Object.entries(t).filter((([t,e])=>null!=e&&""!=e&&"roomId"!=t)).map((([t,e])=>`${t}=${e}`)).join("&");return qt.get(`/api/room/search/list/${e}?${n}`,{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(re.error("IPC searchRoom error : ",JSON.stringify(t)),t.response?t.response.data:t.message)))}return{isLogin:!1}})).catch((t=>{re.error("error ::: ",t.message),re.error("error stack :::",t.stack)}))}searchMyJoinedRoomList(t={}){return Kt.isLogin((e=>{if(e.isLogin){let{workspaceId:e}=t,n=Object.entries(t).filter((([t,e])=>null!=e&&""!=e&&"workspaceId"!=t)).map((([t,e])=>e instanceof Array?e=e.map((e=>`${t}=${e}`)).join("&"):`${t}=${e}`)).join("&");return qt.get(`/api/room/search/my-joined-list/${e}?${n}`,{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(re.error("IPC searchMyJoinedRoomList error : ",JSON.stringify(t)),t.response?t.response.data:t.message)))}return{isLogin:!1}})).catch((t=>{re.error("error ::: ",t.message),re.error("error stack :::",t.stack)}))}searchRoomFavoritesList(t={}){return Kt.isLogin((e=>{if(e.isLogin){let{workspaceId:e}=t,n=Object.entries(t).filter((([t,e])=>null!=e&&""!=e&&"workspaceId"!=t)).map((([t,e])=>e instanceof Array?e=e.map((e=>`${t}=${e}`)).join("&"):`${t}=${e}`)).join("&");return qt.get(`/api/room/search/favorites-list/${e}?${n}`,{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(re.error("IPC searchMyJoinedRoomList error : ",JSON.stringify(t)),t.response?t.response.data:t.message)))}return{isLogin:!1}})).catch((t=>{re.error("error ::: ",t.message),re.error("error stack :::",t.stack)}))}searchRoomJoinedAccountList(t={},e,n){if(t.roomId&&!isNaN(parseInt(t.roomId)))return e||(e=top?.EventSource),Kt.isLogin((o=>o.isLogin?new Promise((o=>{let i=new e(`/api/room/search/in-account-list/${t.roomId}`,{headers:{Authorization:qt.defaults.headers.common.Authorization},withCredentials:!top.__isLocal});i.onmessage=t=>{let{data:e,lastEventId:o,origin:i,type:s}=t;e=JSON.parse(e),n.webEventSend?n.webEventSend("roomInAccountAccept",e):n.send("roomInAccountAccept",e)},i.onerror=t=>{i.close(),o("done")}})):{isLogin:!1})).catch((t=>{re.error("error ::: ",t.message),re.error("error stack :::",t.stack)}));re.error(`searchRoomJoinedAccountList roomId is ::: ${t.roomId}`)}getRoomDetail(t={}){if(t.roomId&&!isNaN(parseInt(t.roomId)))return Kt.isLogin((e=>e.isLogin?qt.get(`/api/room/search/detail/${t.roomId}`,{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)):{isLogin:!1}));re.error(`getRoomDetail roomId is ::: ${t.roomId}`)}isRoomFavorites(t={}){if(t.roomId&&!isNaN(parseInt(t.roomId)))return Kt.isLogin((e=>e.isLogin?qt.get(`/api/room/search/is-room-favorites/${t.roomId}`,{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(re.error("IPC isRoomFavorites error : ",JSON.stringify(t)),t.response?t.response.data:t.message))):{isLogin:!1})).catch((t=>{re.error("error ::: ",t.message),re.error("error stack :::",t.stack)}));re.error(`isRoomFavorites roomId is ::: ${t.roomId}`)}isRoomOwner(t={}){if(t.roomId&&!isNaN(parseInt(t.roomId)))return Kt.isLogin((e=>e.isLogin?qt.get(`/api/room/search/is-owner/${t.roomId}`,{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(re.error("IPC isRoomOwner error : ",JSON.stringify(t)),t.response?t.response.data:t.message))):{isLogin:!1})).catch((t=>{re.error("error ::: ",t.message),re.error("error stack :::",t.stack)}));re.error(`isRoomOwner roomId is ::: ${t.roomId}`)}isMyAttendRoom(t={}){if(t.roomId&&!isNaN(parseInt(t.roomId)))return Kt.isLogin((e=>e.isLogin?qt.get(`/api/room/search/is-my-attend/${t.roomId}`,{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(re.error("IPC isMyAttendRoom error : ",JSON.stringify(t)),t.response?t.response.data:t.message))):{isLogin:!1})).catch((t=>{re.error("error ::: ",t.message),re.error("error stack :::",t.stack)}));re.error(`isMyAttendRoom roomId is ::: ${t.roomId}`)}roomInAccountOut(t={}){if(t.roomId&&!isNaN(parseInt(t.roomId))&&t.accountName)return Kt.isLogin((e=>e.isLogin?qt.delete(`/api/room/delete/out/${t.roomId}/${t.accountName}`,{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(re.error("IPC roomInAccountOut error : ",JSON.stringify(t)),t.response?t.response.data:t.message))):{isLogin:!1})).catch((t=>{re.error("error ::: ",t.message),re.error("error stack :::",t.stack)}));re.error(`roomInAccountOut roomId is ::: ${t.roomId}`)}},ce=console;const de=new class{constructor(){}searchWorkspaceMyJoined(t={}){return Kt.isLogin((e=>e.isLogin?qt.get(`/api/workspace/search/my-joined-list?page=${t.page}&size=${t.size}`,{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>{if(ce.error("error : ",JSON.stringify(t)),t.response)return t.response.data.content||(t.response.data.content=[]),t.response.data})):{isLogin:!1})).catch((t=>{ce.error("error ::: ",t.message),ce.error("error stack :::",t.stack)}))}searchNameSpecificList(t={}){return Kt.isLogin((e=>e.isLogin?qt.get(`/api/workspace/search/name-specific-list?page=${t.page}&size=${t.size}&workspaceName=${t.workspaceName}`,{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>{if(ce.error("error : ",JSON.stringify(t)),t.response)return t.response.data.content||(t.response.data.content=[]),t.response.data})):{isLogin:!1})).catch((t=>{ce.error("error ::: ",t.message),ce.error("error stack :::",t.stack)}))}searchWorkspaceInAccount(t={}){return Kt.isLogin((e=>{if(e.isLogin){let e=Object.entries(t).filter((([t,e])=>null!=e&&""!=e&&"workspaceId"!=t)).map((([t,e])=>`${t}=${e}`)).join("&");return qt.get(`/api/workspace/search/joined-account-list/${t.workspaceId}?${e}`,{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(ce.error("IPC searchWorkspaceInAccount error : ",JSON.stringify(t)),t.response?t.response.data:t.message)))}return{isLogin:!1}})).catch((t=>{ce.error("error ::: ",t.message),ce.error("error stack :::",t.stack)}))}getWorkspaceDetail(t={}){if(t.workspaceId&&!isNaN(parseInt(t.workspaceId)))return Kt.isLogin((e=>e.isLogin?qt.get(`/api/workspace/search/detail/${t.workspaceId}`,{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data.data)):{isLogin:!1}));ce.error(`workspaceId is ::: ${t.workspaceId}`)}getWorkspaceInAccountCount(t={}){if(t.workspaceId&&!isNaN(parseInt(t.workspaceId)))return Kt.isLogin((e=>e.isLogin?qt.get(`/api/workspace/search/count/${t.workspaceId}`,{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data.data)):{isLogin:!1}));ce.error(`workspaceId is ::: ${t.workspaceId}`)}createPermitWokrspaceInAccount(t={}){return Kt.isLogin((e=>e.isLogin?(t=Object.entries(t).reduce(((t,[e,n])=>(null!=n&&""!=n&&(t[e]=n),t)),{}),qt.post("/api/workspace/create/permit",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(ce.error("IPC createPermitWokrspaceInAccount error : ",JSON.stringify(t)),t.response?t.response.data:t.message)))):{isLogin:!1})).catch((t=>{ce.error("error ::: ",t.message),ce.error("error stack :::",t.stack)}))}createGiveAdmin(t={}){return Kt.isLogin((e=>e.isLogin?(t=Object.entries(t).reduce(((t,[e,n])=>(null!=n&&""!=n&&(t[e]=n),t)),{}),qt.post("/api/workspace/create/give-admin",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(ce.error("IPC createPermitWokrspaceInAccount error : ",JSON.stringify(t)),t.response?t.response.data:t.message)))):{isLogin:!1})).catch((t=>{ce.error("error ::: ",t.message),ce.error("error stack :::",t.stack)}))}searchPermitRequestList(t={},e,n){if(t.workspaceId&&!isNaN(parseInt(t.workspaceId)))return e||(e=top?.EventSource),Kt.isLogin((o=>o.isLogin?new Promise((o=>{let i=new e(`/api/workspace/search/permit-request-list/${t.workspaceId}`,{headers:{Authorization:qt.defaults.headers.common.Authorization},withCredentials:!top.__isLocal});i.onmessage=t=>{let{data:e,lastEventId:o,origin:i,type:s}=t;e=JSON.parse(e),n.webEventSend?n.webEventSend("workspacePermitRequestAccept",e):n.send("workspacePermitRequestAccept",e)},i.onerror=t=>{i.close(),o("done")}})):{isLogin:!1})).catch((t=>{ce.error("error ::: ",t.message),ce.error("error stack :::",t.stack)}));ce.error(`searchPermitRequestList workspaceId is ::: ${t.workspaceId}`)}getIsAdmin(t={}){return Kt.isLogin((e=>{if(e.isLogin){let e=Object.entries(t).filter((([t,e])=>null!=e&&""!=e&&"workspaceId"!=t)).map((([t,e])=>`${t}=${e}`)).join("&");return qt.get(`/api/workspace/search/is-admin/${t.workspaceId}?${e}`,{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(ce.error("IPC getIsAdmin error : ",JSON.stringify(t)),t.response?t.response.data:t.message)))}return{isLogin:!1}})).catch((t=>{ce.error("error ::: ",t.message),ce.error("error stack :::",t.stack)}))}createWorkspaceJoined(t={}){return Kt.isLogin((e=>e.isLogin?(t=Object.entries(t).reduce(((t,[e,n])=>(null!=n&&""!=n&&(t[e]=n),t)),{}),qt.post("/api/workspace/create/joined",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(ce.error("IPC createPermitWokrspaceInAccount error : ",JSON.stringify(t)),t.response?t.response.data:t.message)))):{isLogin:!1})).catch((t=>{ce.error("error ::: ",t.message),ce.error("error stack :::",t.stack)}))}createWorkspace(t={}){return Kt.isLogin((e=>e.isLogin?(t=Object.entries(t).reduce(((t,[e,n])=>(null!=n&&""!=n&&(t[e]=n),t)),{}),qt.post("/api/workspace/create/",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then(Kt.responseCheck).then((t=>t.data)).catch((t=>(ce.error("IPC createWorkspace error : ",JSON.stringify(t)),t.response?t.response.data:t.message)))):{isLogin:!1})).catch((t=>{ce.error("error ::: ",t.message),ce.error("error stack :::",t.stack)}))}};let he;window.addEventListener("load",(()=>{Notification.requestPermission().then((t=>{console.log(t),he=t})),ue.loadInitRoomId&&pe.webEventSend("roomChange",{roomId:ue.loadInitRoomId}),ue.loadInitNoticeBoardId&&pe.webEventSend("noticeBoardChange",{noticeBoardId:ue.loadInitNoticeBoardId})}));const ue=new class{#i;loadInitRoomId;loadInitNoticeBoardId;#s={};constructor(){let t=new URLSearchParams(location.search);this.#i=t.get("workspaceId"),this.loadInitRoomId=t.get("roomId"),this.loadInitNoticeBoardId=t.get("noticeBoardId"),this.#s=JSON.parse(localStorage.getItem("o"))?.reduce(((t,e)=>(t[e.OPTION_NAME]=e,t)),{})||{}}resetWorkspace(){this.#i=void 0}set workspaceId(t){this.#i!==t&&(this.#i=t,pe.webEventSend("workspaceChange",{workspaceId:this.workspaceId}))}get workspaceId(){return this.#i}setOption({name:t,value:e}){this.#s[t]?(this.#s[t].OPTION_VALUE=e,this.#s[t].UPDATE_AT=(new Date).getTime()):this.#s[t]={OPTION_NAME:t,OPTION_VALUE:e,CREATE_AT:(new Date).getTime(),UPDATE_AT:(new Date).getTime()},localStorage.setItem("o",JSON.stringify(Object.values(this.#s)))}getOption(t){return this.#s[t]}},pe=new class{#a={};#r={};#l={};constructor(){[Xt,Zt,te,ne,ie,ae,le,de].flatMap((t=>Object.getOwnPropertyNames(Object.getPrototypeOf(t)).filter((t=>"constructor"!=t)).map((e=>[e,t])))).forEach((([t,e])=>{this.#a[t]=e,this.#r[t]=e}))}send(t,e){!this.#a[t]||!this.#a[t]instanceof Function||this.#a[t][t](e,void 0,pe)}invoke(t,e){if(this.#r[t]&&!(!this.#r[t]instanceof Function))return this.#r[t][t](e,void 0,pe)}webEventSend(t,e){!this.#l[t]||!this.#l[t]instanceof Function||this.#l[t](void 0,e)}on(t,e){this.#l[t]=e}},me={objectEventListener:{},onEvent:{},on:(t,e)=>{me.onEvent[t]=e,pe.on(t,((e,n)=>{me.trigger(t,e,n)}))},addElectronEventListener:(t,e)=>{me.objectEventListener.hasOwnProperty(t)?me.objectEventListener[t].push({[e.name]:e}):me.objectEventListener[t]=[{[e.name]:e}],pe.on(t,((e,n)=>{me.trigger(t,e,n)}))},removeElectronEventListener:(t,e)=>{me.objectEventListener.hasOwnProperty(t)&&(e?me.objectEventListener[t]=me.objectEventListener[t].filter((t=>!t.hasOwnProperty(e.name))):delete me.objectEventListener[t])},trigger:(t,e,n)=>{new Promise((e=>{me.objectEventListener.hasOwnProperty(t)?(me.objectEventListener[t].forEach((async e=>{Object.values(e).forEach((async e=>{!e||!e instanceof Function||new Promise((o=>{try{e(n)}catch(e){throw console.error(`${t} error message ::: `,e.message),console.error(`${t} error stack ::: `,e.stack),new Error("")}o()}))}))})),e()):e()})),new Promise((e=>{if(!me.onEvent[t]||!me.onEvent[t]instanceof Function)e();else{try{me.onEvent[t](n)}catch(e){console.error(`${t} error message ::: `,e.message),console.error(`${t} error stack ::: `,e.stack)}e()}}))}},ge={getProjectPath:async()=>`${location.origin}/`,createSubWindow:async t=>{let e=Object.entries(t).filter((([t,e])=>null!=e&&""!=e&&"pageName"!=t&&"pageId"!=t)).map((([t,e])=>`${t}=${e}`)).join("&");window.open(`/web/create-sub-window/${t.pageName}?${e}`,t.pageId)},closeRequest:async t=>{},maximizeRequest:async()=>{},unmaximizeRequest:async()=>{},minimizeRequest:async()=>{},restoreRequest:async()=>{},isMaximize:async()=>!1,resetWorkspaceId:async()=>{ue.resetWorkspace()},getWorkspaceId:async()=>ue.workspaceId,notifications:async t=>{let e=t.content.join("\n");if(e=e.substring(0,200)+(e.length>200?"...":""),"granted"==he)ge.getProjectPath().then((n=>{let o=new Notification(t.fullName,{body:e,icon:n+"image/icon.icon"});o.onclick=()=>{ue.workspaceId!=t.workspaceId&&pe.webEventSend("workspaceChange",{workspaceId:t.workspaceId}),pe.webEventSend("roomChange",{roomId:t.roomId})},setTimeout((()=>{o.close()}),4e3)}));else{let e=Object.assign(document.createElement("div"),{innerHTML:`\n\t\t\t\t\t<h1>${t.fullName}</h1>\n\t\t\t\t\t<div>${t.content}</div>\n\t\t\t\t`});Object.assign(e.style,{position:"fixed",right:"2vw",bottom:"2vh",borderRadius:"15px",background:"#e1e1e1cf",width:"40%",height:"auto",zIndex:9999,whiteSpace:"break-spaces",overflowWrap:"anywhere",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",fontSize:"13px",paddingBottom:"5vh"}),e.onclick=()=>{ue.workspaceId!=t.workspaceId&&pe.webEventSend("workspaceChange",{workspaceId:t.workspaceId}),pe.webEventSend("roomChange",{roomId:t.roomId})},document.body.append(e),setTimeout((()=>{e.remove()}),4e3)}},getOption:async t=>ue.getOption(t),setOption:async t=>ue.setOption(t),isLogin:async()=>Kt.isLogin((t=>({isLogin:t.isLogin}))),getServerUrl:async()=>`${location.origin}`,logout:async()=>()=>{qt.defaults.headers.common.Authorization="",fetch("/logout",{method:"GET",headers:{"Content-Type":"application/json"}}).then((t=>{if(!t.ok)return console.error("response is not ok",t),void alert("로그아웃에 실패하였습니다.");ge.pageChange.changeWokrspacePage()}))},pageChange:{changeLoginPage:async()=>top.location.href="/web",changeWokrspacePage:async()=>top.location.href="/web",changeMainPage:async t=>top.location.href=`/web/main?workspaceId=${t.workspaceId}`},event:{electronEventTrigger:me},stream:{initWorkspaceStream:async t=>pe.send("initWorkspaceStream",t)},account:{loginProcessing:async t=>pe.invoke("loginProcessing",t),getAccountInfo:async()=>pe.invoke("getAccountInfo"),updateSimpleAccountInfo:async t=>pe.invoke("updateSimpleAccountInfo",t)},chatting:{sendChatting:async t=>pe.invoke("sendChatting",t),deleteChatting:async t=>pe.invoke("deleteChatting",t),searchChattingList:async t=>pe.invoke("searchChattingList",t)},workspace:{searchWorkspaceMyJoined:async t=>pe.invoke("searchWorkspaceMyJoined",t),searchNameSpecificList:async t=>pe.invoke("searchNameSpecificList",t),searchWorkspaceInAccount:async t=>pe.invoke("searchWorkspaceInAccount",t),getWorkspaceDetail:async t=>pe.invoke("getWorkspaceDetail",t),createPermitWokrspaceInAccount:async t=>pe.invoke("createPermitWokrspaceInAccount",t),createGiveAdmin:async t=>pe.invoke("createGiveAdmin",t),searchPermitRequestList:async t=>pe.invoke("searchPermitRequestList",t),getIsAdmin:async t=>pe.invoke("getIsAdmin",t),createWorkspaceJoined:async t=>pe.invoke("createWorkspaceJoined",t),createWorkspace:async t=>pe.invoke("createWorkspace",t),getWorkspaceInAccountCount:async t=>pe.invoke("getWorkspaceInAccountCount",t)},room:{createRoom:async t=>pe.invoke("createRoom",t),createMySelfRoom:async t=>pe.invoke("createMySelfRoom",t),createRoomInAccount:async t=>pe.invoke("createRoomInAccount",t),createRoomFavorites:async t=>pe.invoke("createRoomFavorites",t),updateRoomInAccoutOrder:async t=>pe.invoke("updateRoomInAccoutOrder",t),updateRoomFavorites:async t=>pe.invoke("updateRoomFavorites",t),searchRoom:async t=>pe.invoke("searchRoom",t),searchMyJoinedRoomList:async t=>pe.invoke("searchMyJoinedRoomList",t),searchRoomFavoritesList:async t=>pe.invoke("searchRoomFavoritesList",t),searchRoomJoinedAccountList:async t=>pe.invoke("searchRoomJoinedAccountList",t),getRoomDetail:async t=>pe.invoke("getRoomDetail",t),isRoomFavorites:async t=>pe.invoke("isRoomFavorites",t),isRoomOwner:async t=>pe.invoke("isRoomOwner",t),isMyAttendRoom:async t=>pe.invoke("isMyAttendRoom",t),roomInAccountOut:async t=>pe.invoke("roomInAccountOut",t)},noticeBoard:{createNoticeBoard:async t=>pe.invoke("createNoticeBoard",t),createNoticeBoardGroup:async t=>pe.invoke("createNoticeBoardGroup",t),createNoticeBoardDetail:async t=>pe.invoke("createNoticeBoardDetail",t),deleteNoticeBoard:async t=>pe.invoke("deleteNoticeBoard",t),deleteNoticeBoardGroup:async t=>pe.invoke("deleteNoticeBoardGroup",t),updateNoticeBoardOrder:async t=>pe.invoke("updateNoticeBoardOrder",t),updateNoticeBoardDetailOrder:async t=>pe.invoke("updateNoticeBoardDetailOrder",t),searchNoticeBoardList:async t=>pe.invoke("searchNoticeBoardList",t),searchNoticeBoardDetailList:async t=>pe.invoke("searchNoticeBoardDetailList",t)},s3:{generateSecurityPutObjectPresignedUrl:async t=>pe.invoke("generateSecurityPutObjectPresignedUrl",t),generateSecurityGetObjectPresignedUrl:async t=>pe.invoke("generateSecurityGetObjectPresignedUrl",t),generateGetObjectPresignedUrl:async t=>pe.invoke("generateGetObjectPresignedUrl",t)},emoticon:{createEmotionReaction:async t=>pe.invoke("createEmotionReaction",t),getIsReaction:async t=>pe.invoke("getIsReaction",t)}};window.myAPI=ge,console.log("????????????????"),console.log(window.myAPI);const fe=new class{#c;#d=[];#h={};#u;#p;constructor(){}set addNoticeBoardIdChangeListener({name:t,callback:e,runTheFirst:n}){this.#h[t]=e,n&&this.#c&&e(this)}get addNoticeBoardIdChangeListener(){return this.#h}set noticeBoardId(t){if(!t)return void console.error("noticeBoardId is undefined");this.#d=[],this.#c=t;let e=Promise.all(Object.values(this.#h).map((async t=>new Promise((e=>{t(this),e()})))));this.#p?this.#p.then((()=>{e.then((()=>{this.#p=new Promise((t=>{this.#u=t}))}))})):this.#p=new Promise((t=>{this.#u=t,this.#u(e)}))}get noticeBoardId(){return this.#c}get noticeBoard(){return this.#d}removeNoticeBoardIdChangeListener(t){this.#h(t)}};class ye{#m;#g;#f=!0;#y;#b;#w=[];#v={};constructor(t){this.#b=t,document.addEventListener("selectionchange",(t=>{let e=window.getSelection();if(!document.activeElement.classList.contains("free-will-editor"))return;if("None"==e.type||!this.#y)return;let n=this.#w.find((t=>e.containsNode(t,!0)||e.containsNode(t,!1)));this.#y.dataset.tool_status=n?"connected":"blur"}))}isLastTool(t){if(this.#b.prototype.isPrototypeOf(t))return t===this.#w.at(-1);throw new Error(`tool is not my identity, this tool name is ${t.constructor.name}. but my identity name is ${this.#b.name}`)}set extendsElement(t){this.#m=t}get extendsElement(){return this.#m}set defaultClass(t){this.#g=t}get defaultClass(){return this.#g}set isInline(t){this.#f=t}get isInline(){return this.#f}set toolButton(t){if(!t||!t.nodeType||t.nodeType!=Node.ELEMENT_NODE)throw new Error("toolButton is not element");this.#y=t}get toolButton(){return this.#y}set connectedFriends(t){t.constructor!=this.#b&&new TypeError("is not my friend"),t.isConnected?this.#w.push(t):this.#w=this.#w.filter((t=>t.isConnected))}get connectedFriends(){return this.#w}}class be extends HTMLElement{static globalMouseEvent=void 0;static lastClickElementPath=void 0;static globalClickEventPromiseResolve;static globalClickEventPromise=new Promise((t=>{this.globalClickEventPromiseResolve=t}));static globalKeydownEventPromiseResolve;static globalKeydownEventPromise=new Promise((t=>{this.globalKeydownEventPromiseResolve=t}));static globalSelectionChangeEventPromiseResolve;static globalSelectionChangeEventPromise=new Promise((t=>{this.globalSelectionChangeEventPromiseResolve=t}));static{document.addEventListener("mousemove",(t=>{this.globalMouseEvent=t})),document.addEventListener("mousedown",(t=>{this.lastClickElementPath=t.composedPath(),this.globalClickEventPromiseResolve(t),this.globalClickEventPromise=new Promise((t=>{this.globalClickEventPromiseResolve=t}))})),window.addEventListener("keydown",(t=>{this.globalKeydownEventPromiseResolve(t),this.globalKeydownEventPromise=new Promise((t=>{this.globalKeydownEventPromiseResolve=t}))})),document.addEventListener("selectionchange",(t=>{this.globalSelectionChangeEventPromiseResolve(t),this.globalSelectionChangeEventPromise=new Promise((t=>{this.globalSelectionChangeEventPromiseResolve=t}))}))}static isMouseInnerElement(t){if(!this.globalMouseEvent)return;let{clientX:e,clientY:n}=this.globalMouseEvent,{x:o,y:i,width:s,height:a}=t.getBoundingClientRect();return o+s>=e&&o<=e&&(i+a>=n&&i<=n)}static globalKeydownEventListener(t,e=(({oldEvent:t,newEvent:e})=>{})){let n,o;const i=()=>{this.globalKeydownEventPromise.then((t=>{o=t,e({oldEvent:n,newEvent:o}),n=t,i()}))};i()}static globalSelectionChangeEventListener(t,e=(({oldEvent:t,newEvent:e})=>{})){let n,o;const i=()=>{this.globalSelectionChangeEventPromise.then((t=>{o=t,e({oldEvent:n,newEvent:o}),n=t,i()}))};i()}static outClickElementListener(t,e=(({oldEvent:t,newEvent:e,isMouseOut:n=!1})=>{})){if(null==t||t?.nodeType!=Node.ELEMENT_NODE)throw new Error("element is not Element");let n,o;const i=()=>{this.globalClickEventPromise.then((s=>{let a=!this.isMouseInnerElement(t);o=s,e({oldEvent:n,newEvent:o,isMouseOut:a}),n=s,i()}))};i()}static isElement(t,e){let n=Object.getPrototypeOf(t),o=!1;for(;null!=n;){if(n?.constructor==e){o=!0;break}n=Object.getPrototypeOf(n)}return o}static processingElementPosition(t,e){let n;n=be.isElement(e,HTMLElement)?e.getBoundingClientRect():e;let{x:o,y:i,height:s,width:a}=n,r=i-t.clientHeight,l=o-t.clientWidth;t.style.top=r>0?r+"px":i+s+"px",t.style.left=l>0?l+"px":o+a+"px"}static DeleteOption=class{static#E=class{value;constructor(t){this.value=t,Object.freeze(this)}};static EMPTY_CONTENT_IS_DELETE=new this.#E("empty_content_is_delete");static EMPTY_CONTENT_IS_NOT_DELETE=new this.#E("empty_content_is_not_delete");value;static{Object.freeze(this)}constructor(t){this.value=t,Object.freeze(this)}};#C=!1;Tool;#x=()=>{};#S=()=>{};#_=()=>{};#k=()=>{};#O=()=>{};#L;parentEditor;#N=new MutationObserver(((t,e)=>{t.forEach((t=>{let{addedNodes:e,removedNodes:n}=t;new Promise((t=>{if(0!=e.length){let t;if(this.constructor.toolHandler.isInline)t=e;else{let n;t=[...e].map(((t,o)=>{if(!t.classList?.contains(we.toolHandler.defaultClass)){let i=this.parentEditor.createLine();return i.replaceChildren(t),this.append(i),o==e.length-1&&(n=o),i}return t}))}this.connectedChildAfterCallback(t)}t()})),new Promise((t=>{0!=n.length&&this.disconnectedChildAfterCallback(n),t()}))}))}));constructor(t,e,{deleteOption:n=be.DeleteOption.EMPTY_CONTENT_IS_DELETE}={}){super(),this.#N.disconnect(),this.#N.observe(this,{childList:!0}),this.#L=n,this.Tool=t,this.classList.add(this.constructor.toolHandler.defaultClass),document.addEventListener("selectionchange",this.removeFun,!0),e&&Object.assign(this.dataset,e),be.globalSelectionChangeEventListener(this,(({oldEvent:t,newEvent:e})=>{if(this.#L!=be.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE&&this.isToolEmpty()){let t=this.parentEditor?.getLine(this);this.remove(),t&&t.line.lookAtMe()}}))}connectedCallback(){if(this.#C)this.connectedAfterCallback();else{if(this.#C=!0,this.constructor.toolHandler.connectedFriends=this,this.parentEditor=this.closest(".free-will-editor"),this.parentLine=this.parentEditor?.getLine(this),0==this.childNodes.length&&this.#L==be.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE&&(0==this.innerText.length||1==this.innerText.length&&"\n"==this.innerText.charAt(0))){let t=window.getComputedStyle(this);"hidden"==t.visibility&&0==t.opacity||(this.innerText="\n")}if(this.#L==be.DeleteOption.EMPTY_CONTENT_IS_DELETE&&(this.isToolEmpty()||0==this.childNodes.length)){let t=this.parentEditor.getLine(this);this.remove(),t&&t.line.lookAtMe()}if(this.shadowRoot){let t=this.parentEditor.getNextLine(this.parentLine);t?t.line.lookAtMe():this.parentEditor.createLine().innerText="\n"}this.connectedAfterOnlyOneCallback()}}disconnectedCallback(){this.#C=!1;try{this.disconnectedAfterCallback()}catch(t){console.error(t)}finally{this.constructor.toolHandler.connectedFriends=this,this.#N.disconnect(this,{childList:!0}),document.removeEventListener("selectionchange",this.removeFun,!0)}}isToolEmpty(){let t=window.getComputedStyle(this);return"hidden"!=t.visibility&&0!=t.opacity&&(0==this.innerText.length||1==this.innerText.length&&("\n"==this.innerText||"​"==this.innerText))}isCursor(){let t=window.getSelection();return!!document.activeElement.classList.contains("free-will-editor")&&("None"!=t.type&&(t.containsNode(this,!0)||t.containsNode(this,!1)))}set connectedAfterCallback(t){this.#x=t}get connectedAfterCallback(){return this.#x}set connectedAfterOnlyOneCallback(t){this.#S=t}get connectedAfterOnlyOneCallback(){return this.#S}set disconnectedAfterCallback(t){this.#_=t}get disconnectedAfterCallback(){return this.#_}set connectedChildAfterCallback(t){this.#k=t}get connectedChildAfterCallback(){return this.#k}set disconnectedChildAfterCallback(t){this.#O=t}get disconnectedChildAfterCallback(){return this.#O}}class we{#C=!1;#T;static toolHandler=new ye(this);static#B=Object.assign(document.createElement("style"),{id:"free-will-editor-line"});static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-editor-line"}static createDefaultStyle(){return this.#B.textContent="",this.#B}static get defaultStyle(){return this.#B}static set defaultStyle(t){this.#B.textContent=t}static set insertDefaultStyle(t){this.#B.sheet.insertRule(t)}static getLine(t){let e;return t.parentElement?t.classList?.contains(we.toolHandler.defaultClass)?t:(e=t.parentElement.classList.contains(we.toolHandler.defaultClass)?t.parentElement:t.parentElement.closest(`.${we.toolHandler.defaultClass}`),e):e}static getRootLine(t){let e;if(!t.parentElement)return e;if(t.classList?.contains(we.toolHandler.defaultClass))return t;e=t.parentElement.classList.contains(we.toolHandler.defaultClass)?t.parentElement:t.parentElement.closest(`.${we.toolHandler.defaultClass}`);let n=e?.closest(`.${we.toolHandler.defaultClass}`);return n?we.getRootLine(e):e}static getTool(t,e){let n;return t.parentElement?t.classList?.contains(e.toolHandler.defaultClass)?t:(n=t.parentElement.classList.contains(e.toolHandler.defaultClass)?t.parentElement:t.parentElement.closest(`.${e.toolHandler.defaultClass}`),n||(n=t.parentElement.querySelector(`.${e.toolHandler.defaultClass}`)),n):n}static isElementTextEmpty(t){let e=window.getComputedStyle(t);return"hidden"!=e.visibility&&0!=e.opacity&&(0==t.innerText.length||1==t.innerText.length&&("\n"==t.innerText||"​"==t.innerText))}lineElement;constructor(t){t?(this.lineElement=t,this.lineElement.classList.add(we.toolHandler.defaultClass)):this.lineElement=Object.assign(document.createElement("div"),{className:we.toolHandler.defaultClass}),this.lineElement.dataset.is_line="",this.lineElement.line=this}async#P(t,e){return new Promise((n=>{e.surroundContents(t),n(t)}))}async#I(t,e,n){return new Promise((n=>{let{startOffset:o,endOffset:i,startContainer:s,endContainer:a}=t,r=window.getSelection(),l=[...this.lineElement.childNodes].findIndex((t=>r.containsNode(t,!0)))-1,c=l<0,d=[];for(let t=l+1;this.lineElement.childNodes[t]&&r.containsNode(this.lineElement.childNodes[t],!0);t+=1){let e,n=document.createNodeIterator(this.lineElement.childNodes[t],NodeFilter.SHOW_TEXT);for(;e=n.nextNode();)if(e==a){let t=e.cloneNode(!0);t.textContent=e.textContent.substring(i),e.after(t),e.textContent=e.textContent.substring(0,i)}d.push(this.lineElement.childNodes[t])}if(e.append(...d),c)this.lineElement.prepend(e);else{this.lineElement.childNodes[l].after(e)}n()}))}async#A(t,e,n,o){return new Promise((n=>{let o=t.extractContents();e.append(...o.childNodes),this.lineElement.append(e),n(e)}))}async#R(t,e,n,o){return new Promise((i=>{let{startOffset:s,endOffset:a,startContainer:r,endContainer:l}=t;t.setStart(r,s),t.setEnd(r,r.textContent.length),t.surroundContents(e);let c=r.nextSibling?.nextSibling;if(c){let t=[],n=[];for(;c;){if(c.nodeType==Node.ELEMENT_NODE){if(e==c)break;e.append(c)}else n.push(c.textContent),t.push(c);c=c.nextSibling}[...e.childNodes].find((t=>t.nodeType==Node.TEXT_NODE))?.appendData(n.join("")),t.forEach((t=>t.remove()))}if(e.parentElement!=this.lineElement&&e.parentElement?.nextSibling){let t=new n;t.append(e.parentElement.nextSibling),e.parentElement.after(t);let o=t.nextSibling;o&&t!=o&&t.append(o)}let d,h=we.getLine(r).nextElementSibling;for(;h&&h!==o;)d=new n,t.selectNodeContents(h),t.surroundContents(d),h=h.nextElementSibling;if(we.prototype.isPrototypeOf(l.line))i(d||e);else{let e=new n;t.setStart(l,0),t.setEnd(l,a),t.surroundContents(e);let o=l.previousSibling;if(o){let t=[],n=[];for(;o;)o.nodeType==Node.ELEMENT_NODE?e.prepend(o):(t.push(o),n.unshift(o.textContent)),o=o.previousSibling;[...e.childNodes].find((t=>t.nodeType==Node.TEXT_NODE))?.appendData(n.join(""))}i(e)}}))}async applyTool(t,e,n){return new Promise((o=>{let i=new t,{startOffset:s,endOffset:a,startContainer:r,endContainer:l}=e;1==this.lineElement.childNodes.length&&"\n"==this.lineElement.innerText&&"BR"==this.lineElement.childNodes[0].nodeName&&this.lineElement.childNodes[0].remove(),i.shadowRoot||!t.toolHandler.isInline?o(this.#A(e,i,t,n)):r===l&&this.lineElement.innerText.length!=e.toString().length?(console.log("applyOnlyOneTool"),this.#P(i,e).then((t=>{o(t)}))):we.getLine(r)===we.getLine(l)?(console.log("applyOnlyOneLine"),this.#I(e,i,t).then((t=>{o(t)}))):(console.log("applyMultipleLineAll"),this.#R(e,i,t,n).then((t=>{o(t)})))}))}async#j(t,e,n){return new Promise((e=>{let{startOffset:o,endOffset:i,startContainer:s,endContainer:a}=t;this.lineElement.childNodes.forEach((t=>{this.#M(t,n)})),e()}))}async#D(t,e,n){return new Promise((o=>{let i,s,a,r,{startOffset:l,endOffset:c,startContainer:d,endContainer:h,commonAncestorContainer:u}=t,p=c-l,m=[],g=[];if(u.nodeType!=Node.TEXT_NODE||u.parentElement==this||n.prototype.isPrototypeOf(u.parentElement))r=t.cloneContents();else{let e=t.cloneRange();e.selectNode(u.parentElement),r=e.cloneContents()}let f=window.getSelection(),y=[...e.childNodes];if(!n.toolHandler.isInline){try{this.lineElement.append(...y)}catch(t){we.getLine(e).append(...y)}return e.remove(),void o()}let b,w,v=y.findIndex((t=>f.containsNode(t,!0)||f.containsNode(t,!1)));if(a=y[v],m=y.slice(0,v),g=y.slice(v+1),d.textContent.length!=p){if(i=d.textContent.substring(0,l),s=p<=1?d.textContent.substring(l+1):d.textContent.substring(l+p),null!=a){let t=a.cloneNode(!1);t.textContent=i,i=t;let e=a.cloneNode(!1);e.textContent=s,s=e,a.remove()}else i=document.createTextNode(i),s=document.createTextNode(s);m.unshift(i),g.push(s)}0!=m.length&&(b=new n,b.append(...m)),0!=g.length&&(w=new n,w.append(...g));let E=[b,r,w].filter((t=>t));e.previousSibling?e.previousSibling.after(...E):e.nextSibling?e.nextSibling.before(...E):this.lineElement.append(...E),e.remove(),o()}))}async#H(t,e,n,o){return new Promise((i=>{let{startOffset:s,endOffset:a,startContainer:r,endContainer:l}=t,c=we.getTool(l,n),d=document.createTextNode(r.textContent.substring(s,r.textContent.length)),h=document.createTextNode(l.textContent.substring(0,a)),u=r.textContent.substring(0,s),p=l.textContent.substring(a,l.textContent.length),m=e?.nextSibling,g=e?.previousSibling,f=c?.nextSibling,y=c?.previousSibling;if(0==s)this.#M(this.lineElement,n);else if(g&&g.nodeType==Node.TEXT_NODE){if(g.after(d),u){let t=new n;t.textContent=u,g.after(t)}}else if(m&&m.nodeType==Node.TEXT_NODE){if(u){let t=new n;t.textContent=u,m.before(t)}m.before(d)}e&&e.remove();let b=this.lineElement.nextElementSibling;for(;b&&b!=o;)b.childNodes.forEach((t=>{this.#M(t,n)})),b=b.nextElementSibling;if(a==l.length)this.#M(o,n);else if(y&&y.nodeType==Node.TEXT_NODE){if(p){let t=new n;t.textContent=p,y.after(t)}y.after(h)}else if(f&&f.nodeType==Node.TEXT_NODE&&(f.before(h),p)){let t=new n;t.textContent=p,f.after(t)}c&&c.remove(),i()}))}async cancelTool(t,e,n){return new Promise((o=>{let{isCollapsed:i,anchorNode:s,anchorOffset:a}=e,r=e.getRangeAt(0),{startOffset:l,endOffset:c,startContainer:d,endContainer:h,commonAncestorContainer:u}=r,p=we.getTool(d,t);p?(!t.toolHandler.isInline||d===h&&this.lineElement.innerText.length!=r.toString().length?this.#D(r,p,t).then((()=>{console.log("cancelOnlyOneTool"),o()})):we.getLine(d)===we.getLine(h)?this.#j(r,p,t).then((()=>{console.log("cancelOnlyOneLine 2"),o()})):this.#H(r,p,t,n).then((()=>{console.log("cancelMultipleLineAll"),o()})).catch((t=>console.error(t))),o()):(t.toolHandler.toolButton.dataset.tool_status="connected",o())}))}#M(t,e){new Promise((n=>{e.prototype.isPrototypeOf(t)?(t.nextSibling?t.nextSibling.before(...t.childNodes):t.previousSibling?t.previousSibling.after(...t.childNodes):t.parentElement.append(...t.childNodes),t.remove()):t.nodeType==Node.ELEMENT_NODE&&t.childNodes.forEach((t=>{this.#M(t,e)})),n()}))}lookAtMe(){let t=window.getComputedStyle(this.lineElement);"hidden"!=t.visibility&&0!=t.opacity&&((0==this.lineElement.innerText.length||1==this.lineElement.innerText.length&&"\n"==this.lineElement.innerText.charAt(0))&&(this.lineElement.innerText="\n"),this.lineElement.isContentEditable&&(this.lineElement.focus(),window.getSelection().setPosition(this.lineElement,this.lineElement.childNodes.length)))}}class ve extends HTMLElement{static#B=Object.assign(document.createElement("style"),{id:"free-will-editor"});static#g="free-will-editor";static createDefaultStyle(){let t=document.querySelector(`#${this.#B.id}`);return t?this.#B=t:document.head.append(this.#B),this.#B.textContent=`\n            .${this.defaultClass}{\n                height: inherit;\n                overflow: auto;\n                overflow-wrap: anywhere;\n                outline: none;\n                background-color: inherit;\n                padding-top: 0.6%;\n                padding-left: 0.5%;\n                padding-right: 0.8%;\n                -ms-overflow-style: none;\n                scrollbar-width: none;\n                display: block;\n            }\n            .${this.#g}::-webkit-scrollbar {\n                display: none;\n            }\n\n            .${this.#g} > :nth-child(1)::before{\n                content: attr(data-placeholder);\n                position: absolute;\n                color: #d1d1d1;\n                font-weight: 600;\n                font-family: revert;\n                cursor: text;\n            }\n\t\t`,this.#B}static get defaultStyle(){return this.#B}static set defaultStyle(t){this.#B.textContent=t}static set insertDefaultStyle(t){this.#B.sheet.insertRule(t)}static get defaultClass(){return this.#g}static set defaultClass(t){this.#g=t}constructor({isDefaultStyle:t=!0}={}){super(),this.classList.add("free-will-editor")}blockBackspaceEvent(t){}createLine(){let t=new we;return this.append(t.lineElement),t.lineElement}getLineRange(t=window.getSelection()){return new Promise((e=>{let n,{anchorNode:o,focusNode:i}=t;if(o==this){console.log(111);let e=[...this.children].filter((t=>t.classList.contains(`${we.toolHandler.defaultClass}`)));n={startLine:e[0],endLine:e.at(-1)};let o=t.getRangeAt(0),i=[...n.endLine.childNodes].at(-1);o.setStart(n.startLine.childNodes[0],1),o.setEnd(i,i.nodeType==Node.TEXT_NODE?i.textContent.length:n.endLine.childNodes.length),t.addRange(o)}else{console.log(222);let t=we.getLine(o),s=we.getLine(i);if(t==s)return void e({startLine:t,endLine:s});n={startLine:t,endLine:s};let a="startLine";n=[...this.querySelectorAll(`.${we.toolHandler.defaultClass}`)].reduce(((e,n,o)=>(n!=t&&n!=s||(e.hasOwnProperty(a)?e.endLine=n:e[a]=n),e)),{})}e(n)}))}isNextLineExist(t=window.getSelection(),{isRoot:e=!1}={}){let n=(e?we.getRootLine(t):we.getLine(t)).nextElementSibling;return!!n&&we.prototype.isPrototypeOf(n.line)}getNextLine(t=window.getSelection(),{focus:e=!1,isRoot:n=!1}={}){let o=n?we.getRootLine(t):we.getLine(t);if(!o)return;let i=o.nextElementSibling;return i&&we.prototype.isPrototypeOf(i.line)?(e&&i.line.lookAtMe(),i):void 0}getPrevLine(t=window.getSelection(),{focus:e=!1,isRoot:n=!1}={}){let o=n?we.getRootLine(t):we.getLine(t);if(!o)return;let i=o.previousElementSibling;return i&&we.prototype.isPrototypeOf(i.line)?(e&&i.line.lookAtMe(),i):void 0}getLine(t=window.getSelection(),{isRoot:e=!1}={}){return e?we.getRootLine(t):we.getLine(t)}isCursor(){let t=window.getSelection();return!!document.activeElement.classList.contains("free-will-editor")&&("None"!=t.type&&(t.containsNode(this,!0)||t.containsNode(this,!1)))}getCurrentLine(t,{isRoot:e=!1}={}){let n=window.getSelection();if(document.activeElement.classList.contains("free-will-editor")&&"None"!=n.type)return t||(t=n.focusNode),n.containsNode(this,!0)||n.containsNode(this,!1)?e?we.getRootLine(t):we.getLine(t):void 0}}class Ee{#$;#z=[];#F=0;#U=50;#W=class{#q;#V;constructor(t){this.#q=t,this.#V=(new Date).getTime()}get html(){return this.#q}get time(){return this.#V}};#J;constructor(t){this.#$=t,this.addCursorMove(),this.addUndoKey(),this.addUserInput()}addCursorMove(){be.globalSelectionChangeEventListener(this,(({oldEvent:t,newEvent:e})=>{document.activeElement===this.#$&&this.rememberCursor()}))}rememberCursor(){let t=window.getSelection(),e=t.getRangeAt(0).getBoundingClientRect();if(this.#J&&this.#J.x==e.x&&this.#J.y==e.y)return;let n,{focusNode:o,focusOffset:i}=t,s=o.nodeType==Node.TEXT_NODE?(n=o.parentElement,[...n.childNodes].findIndex((t=>t==o))):o.nodeType==Node.ELEMENT_NODE?(n=o,0):void 0;if(null!=n){{let t;t=this.#$.hasAttribute("is_cursor")?this.#$:this.#$.querySelector("[is_cursor]"),t&&t!=n&&(t.removeAttribute("is_cursor"),t.removeAttribute("cursor_offset"),t.removeAttribute("cursor_type"),t.removeAttribute("cursor_index"),t.removeAttribute("cursor_scroll_x"),t.removeAttribute("cursor_scroll_y"))}n.setAttribute("is_cursor",""),n.setAttribute("cursor_offset",i),n.setAttribute("cursor_type",n.nodeType),n.setAttribute("cursor_index",s),n.setAttribute("cursor_scroll_x",this.#$.scrollLeft),n.setAttribute("cursor_scroll_y",this.#$.scrollTop),this.#J=e}}addUndoKey(){this.#$.addEventListener("keydown",(t=>{if(document.activeElement!==this.#$)return;let{ctrlKey:e,key:n}=t;if(!e||"z"!=n&&"y"!=n)return;t.preventDefault(),"z"==n?this.undoKeyEvent():this.redoKeyEvent();let o=this.#$.querySelector("[is_cursor]");if(!o)return;let{cursor_offset:i,cursor_type:s,cursor_index:a,cursor_scroll_x:r,cursor_scroll_y:l}=o.attributes,c=window.getSelection();if(s.value==Node.ELEMENT_NODE){let t=o.childNodes[a.value];this.#$.isEmpty?c.setPosition(t,0):c.setPosition(t,i.value)}else s.value==Node.TEXT_NODE&&c.setPosition(o,i.value);this.#$.scrollTo(Number(r.value),Number(l.value))}))}undoKeyEvent(){if(0==this.#z.length)return;this.#F+=1,this.#F>this.#z.length-1&&(this.#F=this.#z.length-1);let t=this.#z[this.#F];this.#$.innerHTML=t.html}redoKeyEvent(){if(0==this.#z.length)return;this.#F-=1,this.#F<0&&(this.#F=0);let t=this.#z[this.#F];this.#$.innerHTML=t.html}addUndoRedo(t=!1){if(document.activeElement!==this.#$&&!t)return;this.rememberCursor();let e=new this.#W(this.#$.innerHTML.trim());this.#z.unshift(e),this.#z.length>this.#U&&(this.#z=this.#z.splice(0,this.#U))}addUserInput(){let t=(new Date).getTime();this.#$.addEventListener("keydown",(e=>{if(document.activeElement!==this.#$||(new Date).getTime()-t<500)return;t=(new Date).getTime();let{ctrlKey:n,key:o,altKey:i}=e;n||i||n&&("z"==o||"y"==o)||0!=this.#z.length&&this.#z[0].html.trim()==this.#$.innerHTML.trim()||this.addUndoRedo()}))}clearHistory(){this.#z=[]}clearEditor(){this.#$.innerHTML=""}}class Ce extends be{static toolHandler=new ye(this);static#B=Object.assign(document.createElement("style"),{id:"free-will-editor-strong-style"});static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-editor-strong",this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"B",className:`${this.#B.id}-button`,title:"Bold"}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":this.toolHandler.toolButton.dataset.tool_status="active"}}static createDefaultStyle(){this.#B.textContent=`\n\t\t\t.${this.#B.id}-button{\n\t\t\t\tfont-size: 0.8rem;\n\t\t\t}\n\t\t\t.${this.toolHandler.defaultClass} {\n\t\t\t\tfont-weight: bold;\n\t\t\t}\n\t\t`;let t=document.querySelector(`#${this.#B.id}`);return t?(this.#B?.remove(),this.#B=t,document.head.append(this.#B)):document.head.append(this.#B),this.#B}static get defaultStyle(){return this.#B}static set defaultStyle(t){this.#B.textContent=t}static set insertDefaultStyle(t){this.#B.sheet.insertRule(t)}constructor(t,{isDefaultStyle:e=!0}={}){super(Ce,t)}}class xe{#K=Object.assign(document.createElement("style"),{id:"free-will-editor-palette"});#G=Object.assign(document.createElement("div"),{className:"palette-wrap"});#X=void 0;#Y=void 0;#Z=void 0;#Q=[255,0,0];#tt=void 0;#et=255;#nt=0;#ot=0;#it=1;#st;#at;#rt;#lt=()=>{};static ExampleMode=class{static#ct=class{value;constructor(t){this.value=t,Object.freeze(this)}};static TEXT_COLOR=new this.#ct("color");static TEXT_BACKGROUND_COLOR=new this.#ct("background-color");static TEXT_UNDERLINE=new this.#ct("text-decoration");static TEXT_LINE_THROUGH=new this.#ct("text-decoration");value;static{Object.freeze(this)}constructor(t){this.value=t,Object.freeze(this)}};static OpenPositionMode=class t{static BUTTON=new t("button");static WRAPPER=new t("wrapper");value;static{Object.freeze(this)}constructor(t){this.value=t,Object.freeze(this)}};constructor({openPositionMode:t=xe.OpenPositionMode.BUTTON,openPosition:e,exampleMode:n=xe.ExampleMode.TEXT_COLOR}={}){if(this.#st=t,!this.#st)throw new Error("this is not OpenPositionMode");if(this.#at=e,!this.#at||!this.#at.nodeType||this.#at.nodeType!=Node.ELEMENT_NODE)throw new Error("openPosition is not element");this.#rt=n,this.#st==xe.OpenPositionMode.BUTTON&&(this.#G.style.position="fixed");let o=document.querySelector(`#${this.#K.id}`);o?this.#K=o:document.head.append(this.createStyle()),document.addEventListener("scroll",(()=>{this.#G.isConnected&&this.#dt(this.#G)})),window.addEventListener("resize",(t=>{if(this.#G.isConnected){this.reset(),this.#G.replaceChildren();let t=setTimeout((()=>{this.open(),clearTimeout(t),t=void 0}),200)}})),new Array("mouseup","touchend").forEach((t=>{window.addEventListener(t,(()=>{this.#X&&(this.#X.colorPanel?.removeAttribute("data-is_mouse_down"),this.#X.colorPaint?.removeAttribute("data-is_mouse_down"),this.#X.colorBrightness?.removeAttribute("data-is_mouse_down"))}))})),new Array("mousemove","touchmove").forEach((t=>{window.addEventListener(t,(t=>{this.#X&&(this.#X.colorPanel&&this.#X.colorPanel.hasAttribute("data-is_mouse_down")&&this.#ht(t),this.#X.colorPaint&&this.#X.colorPaint.hasAttribute("data-is_mouse_down")&&this.#ut(t),this.#X.colorBrightness&&this.#X.colorBrightness.hasAttribute("data-is_mouse_down")&&this.#pt(t))}))}))}#mt(t,e){let{topTextWrap:n,selectionRgbBg:o,previousRgbBg:i,colorWrap:s,colorPanel:a,colorPaint:r,colorBrightnessWrap:l,colorBrightness:c,bottomTextWrap:d,selectionRgbText:h,previousRgbText:u,applyWrap:p,cancelButton:m,applyButton:g}=e;t.replaceChildren(n,s,l,d,p),this.#gt(),this.#ft(t,m,g,h)}#yt(){let{topTextWrap:t,selectionRgbBg:e,previousRgbBg:n}=this.#bt(),o=Object.assign(document.createElement("div"),{className:"color-wrap"}),i=this.#wt(),s=this.#vt();o.append(i,i.__colorPanelSelected,i.__colorPanelSelectedPointer,s,s.__colorPaintSelectedPointer);let{colorBrightnessWrap:a,colorBrightness:r}=this.#Et(),{bottomTextWrap:l,selectionRgbText:c,previousRgbText:d}=this.#Ct(),{applyWrap:h,cancelButton:u,applyButton:p}=this.#xt();return{topTextWrap:t,selectionRgbBg:e,previousRgbBg:n,colorWrap:o,colorPanel:i,colorPaint:s,colorBrightnessWrap:a,colorBrightness:r,bottomTextWrap:l,selectionRgbText:c,previousRgbText:d,applyWrap:h,cancelButton:u,applyButton:p}}#wt(){let t=Object.assign(document.createElement("canvas"),{className:"palette-panel"}),e=Object.assign(document.createElement("canvas"),{className:"panel-selected"}),n=Object.assign(document.createElement("div"),{className:"panel-selected-pointer"});return t.__colorPanelSelected=e,t.__colorPanelSelectedPointer=n,t}#vt(){let t=Object.assign(document.createElement("canvas"),{className:"palette-paint"}),e=Object.assign(document.createElement("div"),{className:"paint-selected-pointer"});return e.append(Object.assign(document.createElement("div"),{className:"paint-selected-pointer-child"})),t.__colorPaintSelectedPointer=e,t}#Et(){let t=Object.assign(document.createElement("div"),{className:"brightness-wrap"}),e=Object.assign(document.createElement("canvas"),{className:"brightness-color"}),n=Object.assign(document.createElement("div"),{className:"brightness-selected-pointer"});return n.append(Object.assign(document.createElement("div"),{className:"brightness-selected-pointer-child"})),e.__colorBrightnessSelectedPointer=n,t.append(e,e.__colorBrightnessSelectedPointer),{colorBrightnessWrap:t,colorBrightness:e}}#bt(){let t=Object.assign(document.createElement("div"),{className:"top-text-wrap"}),e=this.#St(this.#et,this.#nt,this.#ot),n=Object.assign(document.createElement("div"),{className:"selection-rgb-bg",textContent:this.selectedColor});n.style.background=this.selectedColor,n.style.color=`rgb(${e[0]}, ${e[1]}, ${e[2]})`;let o=Object.assign(document.createElement("div"),{className:"previous-rgb-bg"});return o.style.background=this.selectedColor,t.append(n,o),{topTextWrap:t,selectionRgbBg:n,previousRgbBg:o}}#Ct(){let t=Object.assign(document.createElement("div"),{className:"bottom-text-wrap"}),e=window.getSelection(),n="";if(0!=e.rangeCount&&0==e.isCollapsed){let t=e.getRangeAt(0),o=document.createElement("aticle"),i=t.cloneContents();o.append(i),n=o}n=""==n?"가 나다 라 A BC D":n;let o=this.#St(this.#et,this.#nt,this.#ot),i=Object.assign(document.createElement("div"),{className:"selection-rgb-text"});this.#_t(i,this.selectedColor,o);let s=Object.assign(document.createElement("div"),{className:"previous-rgb-text"});return this.#_t(s,this.selectedColor,o),n.nodeType&&n.nodeType==Node.ELEMENT_NODE?(i.innerHTML=n.innerHTML,s.innerHTML=n.innerHTML):(i.textContent=n,s.textContent=n),t.append(i,s),{bottomTextWrap:t,selectionRgbText:i,previousRgbText:s}}#xt(){let t=Object.assign(document.createElement("div"),{className:"button-wrap"}),e=Object.assign(document.createElement("button"),{className:"cancel-button",type:"button",textContent:"cancel"}),n=Object.assign(document.createElement("button"),{className:"apply-button",type:"button",textContent:"apply"});return t.append(e,n),{applyWrap:t,cancelButton:e,applyButton:n}}#gt(){return new Promise((t=>{this.#kt(),this.#Ot(),this.#Lt(),t()}))}#kt(){return new Promise((t=>{let{topTextWrap:e,selectionRgbBg:n,previousRgbBg:o,colorWrap:i,colorPanel:s,colorPaint:a,colorBrightnessWrap:r,colorBrightness:l,bottomTextWrap:c,selectionRgbText:d,previousRgbText:h}=this.#X;const u=()=>{let t=s.getBoundingClientRect(),e=s.__colorPanelSelected;e.style.top=t.y+"px",e.style.left=t.x+"px",e.style.width=t.width+"px",e.style.height=t.height+"px",e.width=t.width,e.height=t.height};s.onmousedown=t=>{s.setAttribute("data-is_mouse_down","");let{x:e,y:n}=this.#Nt(t);s.__colorPanelSelectedPointer.style.top=n,s.__colorPanelSelectedPointer.style.left=e,u(),this.#ht(t)},s.ontouchstart=s.onmousedown,s.__colorPanelSelected.onmousedown=s.onmousedown,s.__colorPanelSelected.ontouchstart=s.onmousedown,s.__colorPanelSelectedPointer.onmousedown=s.onmousedown,s.__colorPanelSelectedPointer.ontouchstart=s.onmousedown,t(setTimeout((()=>{let t=s.getContext("2d",{willReadFrequently:!0}),e=s.getBoundingClientRect();s.width=e.width,s.height=e.height,u(),this.#Tt(t);let n=this.#St(this.#et,this.#nt,this.#ot),o=s.__colorPanelSelected.getContext("2d",{willReadFrequently:!0});this.#Y?this.#Bt(o,this.#Y.x-e.x,this.#Y.y-e.y,n):(this.#Bt(o,e.width-1,.1,n),this.#Y={x:e.right-1,y:e.top},s.__colorPanelSelectedPointer.style.top=this.#Y.y+"px",s.__colorPanelSelectedPointer.style.left=this.#Y.x+"px")}),200))}))}#Tt(t){t.clearRect(0,0,t.canvas.width,t.canvas.height);let[e,n,o]=this.#Q,i=t.createLinearGradient(2,0,t.canvas.width-2,0);i.addColorStop(0,"white"),i.addColorStop(1,`rgba(${e}, ${n}, ${o}, ${this.#it})`),t.fillStyle=i,t.fillRect(0,0,t.canvas.width,t.canvas.height);let s=t.createLinearGradient(0,2,0,t.canvas.height-2);s.addColorStop(0,"rgba(0,0,0,0)"),s.addColorStop(1,"black"),t.fillStyle=s,t.fillRect(0,0,t.canvas.width,t.canvas.height)}#Bt(t,e,n,[o=0,i=0,s=0]=[]){new Promise((a=>{t.clearRect(0,0,t.canvas.width,t.canvas.height),t.lineWidth=1,t.beginPath(),t.arc(e,n,10,0,2*Math.PI),t.strokeStyle=`rgb(${o}, ${i}, ${s})`,t.stroke(),a()}))}#ht(t){new Promise((e=>{let{topTextWrap:n,selectionRgbBg:o,previousRgbBg:i,colorWrap:s,colorPanel:a,colorPaint:r,colorBrightnessWrap:l,colorBrightness:c,bottomTextWrap:d,selectionRgbText:h,previousRgbText:u}=this.#X,p=a.getBoundingClientRect(),{x:m,y:g}=this.#Nt(t),f=m<p.left,y=m>p.right-1,b=g<p.top,w=g>p.bottom;a.__colorPanelSelectedPointer.style.left=m+"px",a.__colorPanelSelectedPointer.style.top=g+"px";let{x:v,y:E}=a.__colorPanelSelectedPointer.getBoundingClientRect(),C=v-p.x,x=E-p.y;f&&(C=0,v=p.left),y&&(C=p.width-1,v=p.right-1),b&&(x=0,E=p.top),w&&(x=p.height,E=p.bottom),this.#Y={x:v,y:E};let S=a.getContext("2d",{willReadFrequently:!0});[this.#et,this.#nt,this.#ot]=S.getImageData(C,x,1,1).data;let _=`rgba(${this.#et}, ${this.#nt}, ${this.#ot}, ${this.#it})`,k=this.#St(this.#et,this.#nt,this.#ot);this.#Bt(a.__colorPanelSelected.getContext("2d",{willReadFrequently:!0}),C,x,k),o.textContent=_,o.style.color=`rgb(${k[0]}, ${k[1]}, ${k[2]})`,o.style.background=_,this.#_t(h,_,k),this.#it<.75?c.__colorBrightnessSelectedPointer.children[0].style.border="solid 1px white":c.__colorBrightnessSelectedPointer.children[0].style.border=`solid 1px rgb(${k[0]}, ${k[1]}, ${k[2]})`,this.#Pt(c.getContext("2d",{willReadFrequently:!0}),[this.#et,this.#nt,this.#ot]),e()}))}#Ot(){return new Promise((t=>{let{topTextWrap:e,selectionRgbBg:n,previousRgbBg:o,colorWrap:i,colorPanel:s,colorPaint:a,colorBrightnessWrap:r,colorBrightness:l,bottomTextWrap:c,selectionRgbText:d,previousRgbText:h}=this.#X;a.onmousedown=t=>{a.setAttribute("data-is_mouse_down","");let{x:e,y:n}=this.#Nt(t);a.__colorPaintSelectedPointer.style.top=n+"px",this.#ut(t)},a.ontouchstart=a.onmousedown,a.__colorPaintSelectedPointer.onmousedown=a.onmousedown,a.__colorPaintSelectedPointer.ontouchstart=a.ontouchstart,t(setTimeout((()=>{let t=a.getBoundingClientRect();a.width=t.width,a.height=t.height;let e=a.getContext("2d",{willReadFrequently:!0});e.clearRect(0,0,a.width,a.height);let n=e.createLinearGradient(0,2,0,a.height-2);n.addColorStop(0,"rgb(255, 0, 0)"),n.addColorStop(.15,"rgb(255, 0, 255)"),n.addColorStop(.35,"rgb(0, 0, 255)"),n.addColorStop(.45,"rgb(0, 255, 255)"),n.addColorStop(.65,"rgb(0, 255, 0)"),n.addColorStop(.85,"rgb(255, 255, 0)"),n.addColorStop(.9,"orange"),n.addColorStop(1,"rgb(255, 0, 0)"),e.fillStyle=n,e.fillRect(0,0,a.width,a.height),this.#Z?a.__colorPaintSelectedPointer.style.top=this.#Z.y+"px":(a.__colorPaintSelectedPointer.style.top=t.y+"px",this.#Z=t.y),a.__colorPaintSelectedPointer.style.left=t.x+"px",a.__colorPaintSelectedPointer.style.width=t.width+"px";let[o,i,s]=this.#St(...this.#Q);a.__colorPaintSelectedPointer.children[0].style.border=`solid 1px rgb(${o}, ${i}, ${s})`}),200))}))}#ut(t){new Promise((e=>{let{topTextWrap:n,selectionRgbBg:o,previousRgbBg:i,colorWrap:s,colorPanel:a,colorPaint:r,colorBrightnessWrap:l,colorBrightness:c,bottomTextWrap:d,selectionRgbText:h,previousRgbText:u}=this.#X,p=r.getBoundingClientRect(),m=this.#Nt(t).y,g=m<p.top,f=m>p.bottom-1;r.__colorPaintSelectedPointer.style.top=m+"px";let{y}=r.__colorPaintSelectedPointer.getBoundingClientRect(),b=y-p.y,w=!1;g&&(b=0,y=p.top,w=!0),f&&(b=p.height-1,y=p.bottom-1,w=!0),this.#Z={y};let v,E,C,x=r.getContext("2d",{willReadFrequently:!0});[v,E,C]=w?[255,0,0]:x.getImageData(1,b,1,1).data,this.#Q=[v,E,C],r.__colorPaintSelectedPointer.style.top=y+"px";let S=this.#St(v,E,C);r.__colorPaintSelectedPointer.children[0].style.border=`solid 1px rgb(${S[0]}, ${S[1]}, ${S[2]})`,this.#it<.75?c.__colorBrightnessSelectedPointer.children[0].style.border="solid 1px white":c.__colorBrightnessSelectedPointer.children[0].style.border=`solid 1px rgb(${S[0]}, ${S[1]}, ${S[2]})`,this.#Pt(c.getContext("2d",{willReadFrequently:!0}),[v,E,C]),this.#Tt(a.getContext("2d",{willReadFrequently:!0}));let _=a.getBoundingClientRect();this.#Bt(a.__colorPanelSelected.getContext("2d",{willReadFrequently:!0}),this.#Y.x-_.x,this.#Y.y-_.y),this.#ht({x:this.#Y.x,y:this.#Y.y}),e()}))}#Lt(){new Promise((t=>{let{topTextWrap:e,selectionRgbBg:n,previousRgbBg:o,colorWrap:i,colorPanel:s,colorPaint:a,colorBrightnessWrap:r,colorBrightness:l,bottomTextWrap:c,selectionRgbText:d,previousRgbText:h}=this.#X;l.onmousedown=t=>{l.setAttribute("data-is_mouse_down","");let{x:e,y:n}=this.#Nt(t);l.__colorBrightnessSelectedPointer.style.left=e+"px",this.#pt(t)},l.ontouchstart=l.onmousedown,l.__colorBrightnessSelectedPointer.onmousedown=l.onmousedown,l.__colorBrightnessSelectedPointer.ontouchstart=l.onmousedown,setTimeout((()=>{let t=this.#St(this.#et,this.#nt,this.#ot),e=l.getBoundingClientRect();l.width=e.width,l.height=e.height;let n=l.getContext("2d",{willReadFrequently:!0});this.#Pt(n,[this.#et,this.#nt,this.#ot]),this.#tt?l.__colorBrightnessSelectedPointer.style.left=this.#tt.x+"px":l.__colorBrightnessSelectedPointer.style.left=e.right+"px",l.__colorBrightnessSelectedPointer.style.top=e.y+"px",l.__colorBrightnessSelectedPointer.style.height=e.height+"px",l.__colorBrightnessSelectedPointer.children[0].style.border=`solid 1px rgb(${t[0]}, ${t[1]}, ${t[2]})`}),200),t()}))}#Pt(t,[e=255,n=0,o=0]){t.clearRect(0,0,t.canvas.width,t.canvas.height);let i=t.createLinearGradient(0,0,t.canvas.width,0);i.addColorStop(0,"rgba(0,0,0,0)"),i.addColorStop(1,`rgba(${e}, ${n}, ${o}, ${this.#it})`),t.fillStyle=i,t.fillRect(0,0,t.canvas.width,t.canvas.height)}#pt(t){new Promise((e=>{let{topTextWrap:n,selectionRgbBg:o,previousRgbBg:i,colorWrap:s,colorPanel:a,colorPaint:r,colorBrightnessWrap:l,colorBrightness:c,bottomTextWrap:d,selectionRgbText:h,previousRgbText:u}=this.#X,p=c.getBoundingClientRect(),{x:m,y:g}=this.#Nt(t),f=m<p.left,y=m>p.right;c.__colorBrightnessSelectedPointer.style.left=m+"px";let{x:b}=c.__colorBrightnessSelectedPointer.getBoundingClientRect(),w=p.x-b;f?(w=p.x,b=p.x,c.__colorBrightnessSelectedPointer.style.left=p.x+"px",this.#it=0):y?(w=p.right,b=p.right,c.__colorBrightnessSelectedPointer.style.left=p.right+"px",this.#it=1):this.#it=((b-p.x)/p.width).toFixed(2);let v=this.#St(this.#et,this.#nt,this.#ot);o.textContent=this.selectedColor,o.style.background=this.selectedColor,h.style.color=this.selectedColor,this.#_t(h,this.selectedColor,v),this.#it<.75?c.__colorBrightnessSelectedPointer.children[0].style.border="solid 1px white":c.__colorBrightnessSelectedPointer.children[0].style.border=`solid 1px rgb(${v[0]}, ${v[1]}, ${v[2]})`,e()}))}#ft(t,e,n,o){e.onclick=()=>{this.close()},n.onclick=t=>{this.applyCallback(t)}}#dt(t){if(this.#st==xe.OpenPositionMode.BUTTON){let{x:e,y:n,height:o}=this.#at.getBoundingClientRect(),i=n-t.clientHeight;t.style.top=i>0?i+"px":n+o+"px",t.style.left=e+"px"}else this.#st==xe.OpenPositionMode.WRAPPER&&this.#at.append(t)}#St(...t){let[e,n,o]=t;return.299*e+.587*n+.114*o>186?[0,0,0]:[255,255,255]}#Nt(t){let e,n;return window.TouchEvent&&t.constructor==window.TouchEvent?(e=t.touches[0].pageX,n=t.touches[0].pageY,t.preventDefault()):(e=t.x,n=t.y),{x:e,y:n}}#_t(t,e,n){this.#rt==xe.ExampleMode.TEXT_COLOR?(t.style.color=e,n&&0!=n.length&&(t.style.backgroundColor=`rgb(${n[0]}, ${n[1]}, ${n[2]})`)):this.#rt==xe.ExampleMode.TEXT_BACKGROUND_COLOR?(t.style.backgroundColor=e,n&&0!=n.length&&(t.style.color=`rgb(${n[0]}, ${n[1]}, ${n[2]})`)):this.#rt==xe.ExampleMode.TEXT_UNDERLINE?(t.style.textDecoration="underline",t.style.textDecorationColor=e,n&&0!=n.length&&(t.style.color=`rgb(${n[0]}, ${n[1]}, ${n[2]})`,t.style.backgroundColor="rgba(255, 255, 255, 0.25)")):this.#rt==xe.ExampleMode.TEXT_LINE_THROUGH&&(t.style.textDecoration="line-through",t.style.textDecorationColor=e,n&&0!=n.length&&(t.style.color=`rgb(${n[0]}, ${n[1]}, ${n[2]})`,t.style.backgroundColor="rgba(255, 255, 255, 0.25)"))}get selectedColor(){return`rgba(${this.#et}, ${this.#nt}, ${this.#ot}, ${this.#it})`}get palette(){return this.#G}get isConnected(){return this.#G.isConnected}set applyCallback(t){this.#lt=t}get applyCallback(){return this.#lt}get style(){return this.#K}set style(t){this.#K.textContent=t}set insertStyle(t){this.#K.sheet.insertRule(t)}get r(){return this.#et}get g(){return this.#nt}get b(){return this.#ot}get a(){return this.#it}reset(){this.#et=255,this.#nt=0,this.#ot=0,this.#it=1,this.#Q=[255,0,0],this.#Y=void 0,this.#Z=void 0,this.#tt=void 0,this.#X=void 0}close(){this.#G.remove()}open(){this.#X=this.#yt(),document.body.append(this.#G),this.#mt(this.#G,this.#X),this.#dt(this.#G)}createStyle(){return this.#K.textContent="\n\t\t\t.palette-wrap{\n\t\t\t\tbackground: #343434;\n\t\t\t\tpadding: 0.9%;\n\t\t\t\twidth: 35dvw;\n\t\t\t\theight: fit-content;\n\t\t\t\tcolor: white;\n\t\t\t\tfont-size: 0.9rem;\n\t\t\t\tz-index: 999;\n\t\t\t\tmin-width: 20vmax;\n\t\t\t\t-webkit-user-select: none;\n\t\t\t\t-moz-user-select: none;\n\t\t\t\t-ms-user-select: none;\n\t\t\t\tuser-select: none;\n\t\t\t}\n\t\t\t.palette-wrap .palette-panel{\n\t\t\t\twidth: 90%;\n\t\t\t\tposition: relative;\n\t\t\t}\n\n\t\t\t/* 상단 텍스트 영역 [S] */\n\t\t\t.palette-wrap .top-text-wrap{\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: space-between;\n\t\t\t\tmargin-bottom: 2%;\n\t\t\t\theight: 8%;\n\t\t\t}\n\t\t\t.palette-wrap .top-text-wrap .selection-rgb-bg{\n\t\t\t\twidth: 100%;\n\t\t\t\ttext-align-last: center;\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: center;\n\t\t\t\talign-items: center;\n\t\t\t\ttext-wrap: nowrap;\n\t\t\t}\n\t\t\t.palette-wrap .top-text-wrap .previous-rgb-bg{\n\t\t\t\ttext-align-last: center;\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: center;\n\t\t\t\talign-items: center;\n\t\t\t\twidth: 11.5%;\n\t\t\t}\n\t\t\t/* 상단 텍스트 영역 [E] */\n\n\t\t\t/* 컬러 영역 영역 [S] */\n\t\t\t.palette-wrap .color-wrap{\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: space-between;\n\t\t\t\tmargin-bottom: 2%;\n\t\t\t}\n\n\t\t\t.palette-wrap .color-wrap .panel-selected{\n\t\t\t\tposition: fixed;\n\t\t\t\tz-index: 9000;\n\t\t\t}\n\t\t\t.palette-wrap .color-wrap .panel-selected-pointer{\n\t\t\t\tposition: fixed;\n\t\t\t\twidth: 1px;\n\t\t\t\theight: 1px;\n\t\t\t}\n\n\t\t\t.palette-wrap .color-wrap .palette-paint{\n\t\t\t\twidth: 5%;\n\t\t\t}\n\t\t\t.palette-wrap .color-wrap .paint-selected-pointer{\n\t\t\t\tposition: fixed;\n\t\t\t\theight: 1px;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\t\t\t\tbackground-color: #faebd700;\n\t\t\t}\n\t\t\t.palette-wrap .color-wrap .paint-selected-pointer-child{\n\t\t\t\tposition: absolute;\n\t\t\t\tborder: solid 1px;\n\t\t\t\theight: 2px;\n\t\t\t\twidth: inherit;\n\t\t\t}\n\t\t\t/* 컬러 영역 영역 [E] */\n\n\t\t\t/* 투명도 영역 [S] */\n\t\t\t.palette-wrap .brightness-wrap{\n\t\t\t\tmargin-bottom: 2%;\n\t\t\t\tbackground-image: /* tint image */ linear-gradient(to right, rgb(192 192 192 / 20%), rgb(192 192 192 / 20%)), /* checkered effect */ linear-gradient(to right, #505050 50%, #a1a1a1 50%), linear-gradient(to bottom, #505050 50%, #a1a1a1 50%);\n\t\t\t\tbackground-blend-mode: normal, difference, normal;\n\t\t\t\tbackground-size: 2em 2em;\n\t\t\t\tdisplay: flex;\n\t\t\t}\n\t\t\t.palette-wrap .brightness-wrap .brightness-color{\n\t\t\t\theight: 2vh;\n\t\t\t\twidth: 100%;\n\t\t\t\tmin-height: 17px;\n\t\t\t}\n\t\t\t.palette-wrap .brightness-wrap .brightness-selected-pointer{\n\t\t\t\tposition: fixed;\n\t\t\t\twidth: 1px;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\t\t\t\tbackground-color: #faebd700;\n\t\t\t}\n\t\t\t.palette-wrap .brightness-wrap .brightness-selected-pointer-child{\n\t\t\t\tposition: absolute;\n\t\t\t\tborder: solid 1px;\n\t\t\t\theight: inherit;\n\t\t\t\twidth: 2px;\n\t\t\t\tbackground: inherit;\n\t\t\t}\n\t\t\t/* 투명도 영역 [E] */\n\n\t\t\t/* 하단 텍스트 영역 [S] */\n\t\t\t.palette-wrap .bottom-text-wrap{\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: space-between;\n\t\t\t\talign-items: center;\n\t\t\t\tmargin-bottom: 2%;\n\t\t\t\ttext-wrap: nowrap;\n\t\t\t}\n\t\t\t.palette-wrap .bottom-text-wrap .selection-rgb-text{\n\t\t\t\tmargin-right: 5%;\n\t\t\t}\n\t\t\t.palette-wrap .bottom-text-wrap .selection-rgb-text, .palette-wrap .bottom-text-wrap .previous-rgb-text{\n\t\t\t\toverflow-x: hidden;\n\t\t\t\tmax-width: 40%;\n\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\twidth: fit-content;\n\t\t\t\tbackground: rgba(255, 255, 255, 0.25);\n\t\t\t\tcolor: rgba(255, 255, 255, 0.25);\n\t\t\t}\n\t\t\t.palette-wrap .bottom-text-wrap .selection-rgb-text *, .palette-wrap .bottom-text-wrap .previous-rgb-text *{\n\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\toverflow-x: hidden;\n\t\t\t}\n\t\t\t/* 하단 텍스트 영역 [E] */\n\n\t\t\t/* 버튼 영역 [S] */\n\t\t\t.palette-wrap .button-wrap {\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: space-around;\n\t\t\t}\n\t\t\t.palette-wrap .cancel-button, .palette-wrap .apply-button{\n\t\t\t\tbackground: none;\n\t\t\t\tborder: revert;\n\t\t\t\tcolor: #b9b9b9;\n\t\t\t\tborder-color: #464646;\n\t\t\t}\n\t\t\t/* 버튼 영역 [E] */\n\t\t",this.#K}}class Se extends be{static toolHandler=new ye(this);static#B=Object.assign(document.createElement("style"),{id:"free-will-editor-color-style"});static palette;static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-editor-color",this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"C",className:`${this.#B.id}-button`,title:"Font Color"}),this.palette=new xe({openPositionMode:xe.OpenPositionMode.BUTTON,openPosition:this.toolHandler.toolButton}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":this.palette.isConnected?this.palette.close():this.palette.open()},this.palette.applyCallback=t=>{this.toolHandler.toolButton.dataset.tool_status="active",this.palette.close()},super.outClickElementListener(this.palette.palette,(({oldEvent:t,newEvent:e,isMouseOut:n})=>{n&&this.palette.palette.isConnected&&!super.isMouseInnerElement(this.toolHandler.toolButton)&&this.palette.close()}))}static createDefaultStyle(){this.#B.textContent=`\n\t\t\t.${this.#B.id}-button{\n\t\t\t\tfont-size: 0.8rem;\n\t\t\t}\n\t\t`;let t=document.querySelector(`#${this.#B.id}`);return t?(this.#B?.remove(),this.#B=t,document.head.append(this.#B)):document.head.append(this.#B),this.#B}static get defaultStyle(){return this.#B}static set defaultStyle(t){this.#B.textContent=t}static set insertDefaultStyle(t){this.#B.sheet.insertRule(t)}constructor(t){super(Se,t),t||0!=Object.entries(this.dataset).length||(this.dataset.rgba=Se.palette.r+","+Se.palette.g+","+Se.palette.b+","+Se.palette.a),this.style.color=`rgba(${this.dataset.rgba})`}}class _e extends be{static toolHandler=new ye(this);static#B=Object.assign(document.createElement("style"),{id:"free-will-editor-background-style"});static palette;static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-editor-background",this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"G",className:`${this.#B.id}-button`,title:"Background Color"}),this.palette=new xe({openPositionMode:xe.OpenPositionMode.BUTTON,openPosition:this.toolHandler.toolButton,exampleMode:xe.ExampleMode.TEXT_BACKGROUND_COLOR}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":this.palette.isConnected?this.palette.close():this.palette.open()},this.palette.applyCallback=t=>{this.toolHandler.toolButton.dataset.tool_status="active",this.palette.close()},super.outClickElementListener(this.palette.palette,(({oldEvent:t,newEvent:e,isMouseOut:n})=>{n&&this.palette.palette.isConnected&&!super.isMouseInnerElement(this.toolHandler.toolButton)&&this.palette.close()}))}static createDefaultStyle(){this.#B.textContent=`\n\t\t\t.${this.#B.id}-button{\n\t\t\t\tfont-size: 0.8rem;\n\t\t\t}\n\t\t`;let t=document.querySelector(`#${this.#B.id}`);return t?(this.#B?.remove(),this.#B=t,document.head.append(this.#B)):document.head.append(this.#B),this.#B}static get defaultStyle(){return this.#B}static set defaultStyle(t){this.#B.textContent=t}static set insertDefaultStyle(t){this.#B.sheet.insertRule(t)}constructor(t){super(_e,t),t||0!=Object.entries(this.dataset).length||(this.dataset.rgba=_e.palette.r+","+_e.palette.g+","+_e.palette.b+","+_e.palette.a),this.style.backgroundColor=`rgba(${this.dataset.rgba})`}}class ke extends be{static toolHandler=new ye(this);static#B=Object.assign(document.createElement("style"),{id:"free-will-editor-strikethrough-style"});static palette;static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-strikethrough",this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"S",className:`${this.#B.id}-button`,title:"Strikethrough"}),this.palette=new xe({openPositionMode:xe.OpenPositionMode.BUTTON,openPosition:this.toolHandler.toolButton,exampleMode:xe.ExampleMode.TEXT_LINE_THROUGH}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":this.palette.isConnected?this.palette.close():this.palette.open()},this.palette.applyCallback=t=>{this.toolHandler.toolButton.dataset.tool_status="active",this.palette.close()},super.outClickElementListener(this.palette.palette,(({oldEvent:t,newEvent:e,isMouseOut:n})=>{n&&this.palette.palette.isConnected&&!super.isMouseInnerElement(this.toolHandler.toolButton)&&this.palette.close()}))}static createDefaultStyle(){this.#B.textContent=`\n\t\t\t.${this.#B.id}-button{\n\t\t\t\tfont-size: 0.8rem;\n\t\t\t\ttext-decoration: 1px line-through;\n\t\t\t\ttext-decoration-color: #404040;\n\t\t\t}\n\t\t`;let t=document.querySelector(`#${this.#B.id}`);return t?(this.#B?.remove(),this.#B=t,document.head.append(this.#B)):document.head.append(this.#B),this.#B}static get defaultStyle(){return this.#B}static set defaultStyle(t){this.#B.textContent=t}static set insertDefaultStyle(t){this.#B.sheet.insertRule(t)}constructor(t){super(ke,t),t||0!=Object.entries(this.dataset).length||(this.dataset.rgba=ke.palette.r+","+ke.palette.g+","+ke.palette.b+","+ke.palette.a),this.style.textDecoration=`line-through rgba(${this.dataset.rgba}) 1px`}}class Oe extends be{static toolHandler=new ye(this);static#B=Object.assign(document.createElement("style"),{id:"free-will-editor-underline-style"});static palette;static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-underline",this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"U",className:`${this.#B.id}-button`,title:"Underline"}),this.palette=new xe({openPositionMode:xe.OpenPositionMode.BUTTON,openPosition:this.toolHandler.toolButton,exampleMode:xe.ExampleMode.TEXT_UNDERLINE}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":this.palette.isConnected?this.palette.close():this.palette.open()},this.palette.applyCallback=t=>{this.toolHandler.toolButton.dataset.tool_status="active",this.palette.close()},super.outClickElementListener(this.palette.palette,(({oldEvent:t,newEvent:e,isMouseOut:n})=>{n&&this.palette.palette.isConnected&&!super.isMouseInnerElement(this.toolHandler.toolButton)&&this.palette.close()}))}static createDefaultStyle(){this.#B.textContent=`\n\t\t\t.${this.#B.id}-button{\n\t\t\t\tfont-size: 0.8rem;\n\t\t\t\ttext-decoration: 1px underline;\n\t\t\t}\n\t\t\t.${this.toolHandler.defaultClass} {\n\t\t\t\twidth: fit-content;\n\t\t\t}\n\t\t`;let t=document.querySelector(`#${this.#B.id}`);return t?(this.#B?.remove(),this.#B=t,document.head.append(this.#B)):document.head.append(this.#B),this.#B}static get defaultStyle(){return this.#B}static set defaultStyle(t){this.#B.textContent=t}static set insertDefaultStyle(t){this.#B.sheet.insertRule(t)}constructor(t,{isDefaultStyle:e=!0}={}){super(Oe,t),t||0!=Object.entries(this.dataset).length||(this.dataset.rgba=Oe.palette.r+","+Oe.palette.g+","+Oe.palette.b+","+Oe.palette.a),this.style.borderBottom=`solid 2px rgba(${this.dataset.rgba})`}}class Le{#K=Object.assign(document.createElement("style"),{id:"free-will-editor-font-family-box"});#It=20;#At=[];#Rt=Object.assign(document.createElement("div"),{className:"font-box-wrap"});#jt=Object.assign(document.createElement("ul"),{className:"font-box-container"});#Mt=[];#Dt;#Ht="가나 다라 ab cd";#$t=this.#Ht;#lt=()=>{};constructor(t){if(!t)throw new Error("fontList is undefined");this.#At=t;let e=document.querySelector(`#${this.#K.id}`);e?this.#K=e:document.head.append(this.createStyle()),this.#Rt.append(this.#jt)}searchInputTextEvent(t){}#zt(t){return new Promise((e=>{t.onclick=e=>{this.#Dt=t,this.applyCallback(e)},e(t)}))}#Ft(t){return new Promise((e=>{const n=()=>{let e=Object.assign(document.createElement("li"),{className:"font-family-item"});return t.nodeType&&t.nodeType==Node.ELEMENT_NODE?e.innerHTML=t.innerHTML:e.textContent=t,this.#zt(e),e};this.#Mt=this.#At.map((t=>{let e=n();return e.style.fontFamily=t,e}));let o=n();this.#Mt.push(o),e(this.#Mt)}))}async open(){let t=window.getSelection();if(0!=t.rangeCount&&0==t.isCollapsed){let e=t.getRangeAt(0),n=document.createElement("aticle"),o=e.cloneContents();n.append(o),this.#$t=n}return this.#$t=""==this.#$t?this.#Ht:this.#$t,document.body.append(this.#Rt),await this.#Ft(this.#$t).then((t=>(this.#jt.replaceChildren(...t),this.#jt)))}close(){this.#Rt.remove()}set applyCallback(t){this.#lt=t}get applyCallback(){return this.#lt}get fontFamilyBox(){return this.#Rt}get selectedFont(){return this.#Dt}get style(){return this.#K}set style(t){this.#K.textContent=t}set insertStyle(t){this.#K.sheet.insertRule(t)}createStyle(){return this.#K.textContent=`\n            .font-box-wrap{\n                background: #000000bf;\n                position: fixed;\n\t\t\t\tpadding: 0.9%;\n\t\t\t\twidth: ${this.#It}vw;\n                height: 25vh;\n\t\t\t\tcolor: white;\n\t\t\t\tfont-size: 13px;\n\t\t\t\tmin-width: 300px;\n                overflow-y: auto;\n\t\t\t\t-webkit-user-select:none;\n\t\t\t\t-moz-user-select:none;\n\t\t\t\t-ms-user-select:none;\n\t\t\t\tuser-select:none;\n                z-index: 999;\n            }\n            .font-box-wrap .font-box-container{\n                list-style-type: none;\n                padding: 0;\n                margin: 0;\n            }\n            .font-box-wrap .font-family-item{\n                margin-bottom: 1%;\n            }\n            .font-box-wrap .font-family-item:hover{\n                background-color: #747474;\n                cursor: pointer;\n            }\n\n        `,this.#K}}class Ne extends be{static toolHandler=new ye(this);static#B=Object.assign(document.createElement("style"),{id:"free-will-editor-font-family-style"});static fontFamilyBox;static#At=["Arial, Helvetica, Sans-Serif","Arial Black, Gadget, Sans-Serif","Comic Sans MS, Textile, Cursive","Courier New, Courier, Monospace","Georgia, Times New Roman, Times, Serif","Impact, Charcoal, Sans-Serif","Lucida Console, Monaco, Monospace","Lucida Sans Unicode, Lucida Grande, Sans-Serif","Palatino Linotype, Book Antiqua, Palatino, Serif","Tahoma, Geneva, Sans-Serif","Times New Roman, Times, Serif","Trebuchet MS, Helvetica, Sans-Serif","Verdana, Geneva, Sans-Serif","MS Sans Serif, Geneva, Sans-Serif","MS Serif, New York, Serif"];static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-editor-font-family",this.fontFamilyBox=new Le(this.#At),this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"F",className:`${this.#B.id}-button`,title:"Font Family"}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":this.fontFamilyBox.fontFamilyBox.isConnected?this.fontFamilyBox.close():this.fontFamilyBox.open().then((t=>{super.processingElementPosition(this.fontFamilyBox.fontFamilyBox,this.toolHandler.toolButton)}))},this.fontFamilyBox.applyCallback=t=>{this.toolHandler.toolButton.dataset.tool_status="active",this.fontFamilyBox.close()},document.addEventListener("scroll",(()=>{this.fontFamilyBox.fontFamilyBox.isConnected&&super.processingElementPosition(this.fontFamilyBox.fontFamilyBox,this.toolHandler.toolButton)})),window.addEventListener("resize",(t=>{this.fontFamilyBox.fontFamilyBox.isConnected&&this.fontFamilyBox.open().then((t=>{super.processingElementPosition(this.fontFamilyBox.fontFamilyBox,this.toolHandler.toolButton)}))})),super.outClickElementListener(this.fontFamilyBox.fontFamilyBox,(({oldEvent:t,newEvent:e,isMouseOut:n})=>{n&&this.fontFamilyBox.fontFamilyBox.isConnected&&!super.isMouseInnerElement(this.toolHandler.toolButton)&&this.fontFamilyBox.close()}))}static createDefaultStyle(){this.#B.textContent=`\n            .${this.#B.id}-button{\n                font-size: 0.8rem;\n            }\n        `;let t=document.querySelector(`#${this.#B.id}`);return t?(this.#B?.remove(),this.#B=t,document.head.append(this.#B)):document.head.append(this.#B),this.#B}static get defaultStyle(){return this.#B}static set defaultStyle(t){this.#B.textContent=t}static set insertDefaultStyle(t){this.#B.sheet.insertRule(t)}constructor(t){super(Ne,t),t||0!=Object.entries(this.dataset).length||(this.dataset.font_family=Ne.fontFamilyBox.selectedFont?.style.fontFamily),this.style.fontFamily=this.dataset.font_family}}class Te extends be{static toolHandler=new ye(this);static#B=Object.assign(document.createElement("style"),{id:"free-will-editor-quote-style"});static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-quote",this.toolHandler.isInline=!1,this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"Q",className:`${this.#B.id}-button`,title:"Quote"}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":this.toolHandler.toolButton.dataset.tool_status="active"}}static createDefaultStyle(){this.#B.textContent=`\n\t\t\t.${this.#B.id}-button{\n\t\t\t\tfont-size: 0.8rem;\n\t\t\t}\n\t\t\t.${this.toolHandler.defaultClass} {\n\t\t\t\tdisplay: block;\n\t\t\t\tpadding-left: 0.5em;\n\t\t\t\tborder-left: 3px solid #d7d7db;\n\t\t\t\tmargin-inline: 1.5em;\n\t\t\t}\n\t\t`;let t=document.querySelector(`#${this.#B.id}`);return t?(this.#B?.remove(),this.#B=t,document.head.append(this.#B)):document.head.append(this.#B),this.#B}static get defaultStyle(){return this.#B}static set defaultStyle(t){this.#B.textContent=t}static set insertDefaultStyle(t){this.#B.sheet.insertRule(t)}parentLine;constructor(t){super(Te,t,{deleteOption:be.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE})}}class Be extends be{static toolHandler=new ye(this);static#B=Object.assign(document.createElement("style"),{id:"free-will-editor-numeric-point-style"});static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-numeric-point",this.toolHandler.isInline=!1,this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"1.",className:`${this.#B.id}-button`,title:"Numeric Point"}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":this.toolHandler.toolButton.dataset.tool_status="active"}}static createDefaultStyle(){this.#B.textContent=`\n\t\t\t.${this.#B.id}-button{\n\t\t\t\tfont-size: 0.8rem;\n\t\t\t}\n\t\t\t.${this.toolHandler.defaultClass} {\n\t\t\t\tdisplay: block;\n\t\t\t\tmargin-inline: 1.3em;\n\t\t\t}\n\t\t\t.${this.toolHandler.defaultClass} > * {\n\t\t\t\tmargin-inline: 1.3em;\n\t\t\t}\n\t\t\t.${this.toolHandler.defaultClass} > *:before{\n\t\t\t\tcontent: attr(data-order)\n\t\t\t}\n\t\t`;let t=document.querySelector(`#${this.#B.id}`);return t?(this.#B?.remove(),this.#B=t,document.head.append(this.#B)):document.head.append(this.#B),this.#B}static get defaultStyle(){return this.#B}static set defaultStyle(t){this.#B.textContent=t}static set insertDefaultStyle(t){this.#B.sheet.insertRule(t)}parentLine;constructor(t){super(Be,t,{deleteOption:be.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE}),super.connectedChildAfterCallback=t=>{new Promise((t=>{[...this.children].forEach(((t,e)=>{t.dataset.order=e+1+". "})),t()}));let e=t.at(-1);if(e.nodeType==Node.ELEMENT_NODE){let t=setInterval((()=>{e.isConnected&&(clearInterval(t),window.getSelection().setPosition(e,e.childNodes.length))}),50)}else if(e.nodeType==Node.TEXT_NODE){let t=setInterval((()=>{e.isConnected&&(clearInterval(t),window.getSelection().setPosition(e,e.length))}),50)}}}}class Pe extends be{static toolHandler=new ye(this);static#B=Object.assign(document.createElement("style"),{id:"free-will-editor-bullet-point-style"});static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-bullet-point",this.toolHandler.isInline=!1,this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"●",className:`${this.#B.id}-button`,title:"Bullet Point"}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":this.toolHandler.toolButton.dataset.tool_status="active"}}static createDefaultStyle(){this.#B.textContent=`\n\t\t\t.${this.#B.id}-button{\n\t\t\t\tfont-size: 0.8rem;\n\t\t\t}\n\n\t\t\t.${this.toolHandler.defaultClass} {\n\t\t\t\tdisplay: block;\n\t\t\t\tpadding-left: 1em;\n\t\t\t\tmargin-inline: 2.5em;\n\t\t\t\tlist-style-type: disc;\n\t\t\t}\n\t\t\t.${this.toolHandler.defaultClass} > *{\n\t\t\t\tdisplay: list-item;\n\t\t\t}\n\t\t`;let t=document.querySelector(`#${this.#B.id}`);return t?(this.#B?.remove(),this.#B=t,document.head.append(this.#B)):document.head.append(this.#B),this.#B}static get defaultStyle(){return this.#B}static set defaultStyle(t){this.#B.textContent=t}static set insertDefaultStyle(t){this.#B.sheet.insertRule(t)}parentLine;constructor(t){super(Pe,t,{deleteOption:be.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE})}}class Ie{#K=Object.assign(document.createElement("style"),{id:"free-will-editor-sort-box"});#Ut=Object.assign(document.createElement("div"),{className:"sort-box-wrap"});#Wt=Object.assign(document.createElement("ul"),{className:"sort-box-container"});#qt=["center","right"].map((t=>Object.assign(document.createElement("li"),{textContent:t})));#Vt;#lt=()=>{};constructor(){let t=document.querySelector(`#${this.#K.id}`);t?this.#K=t:document.head.append(this.createStyle()),this.#Ut.append(this.#Wt),this.#Wt.replaceChildren(...this.#qt),this.#qt.forEach((t=>{t.onclick=e=>{this.#Vt=t,this.applyCallback(e)}}))}open(){document.body.append(this.#Ut)}close(){this.#Ut.remove()}set applyCallback(t){this.#lt=t}get applyCallback(){return this.#lt}get sortBox(){return this.#Ut}get selectedSort(){return this.#Vt}get style(){return this.#K}set style(t){this.#K.textContent=t}set insertStyle(t){this.#K.sheet.insertRule(t)}createStyle(){return this.#K.textContent="\n            .sort-box-wrap {\n                background: #000000bf;\n                position: fixed;\n                padding: 0.9%;\n                height: fit-content;\n                color: white;\n                font-size: 13px;\n                min-width: 85px;\n                -webkit-user-select: none;\n                -moz-user-select: none;\n                -ms-user-select: none;\n                user-select: none;\n                z-index: 999;\n            }\n            .sort-box-wrap .sort-box-container {\n                list-style-type: none;\n                padding: 0;\n                margin: 0;\n                display: flex;\n                gap: 1vw;\n            }\n            \n            .sort-box-wrap .sort-box-container li{\n                transition: all 0.5s;\n                padding: 1% 2% 1% 2%;\n                margin-right: 1vw;\n            }\n            .sort-box-wrap .sort-box-container li:hover{\n                background-color: #95959591;\n                cursor: pointer;\n            }\n\n        ",this.#K}}class Ae extends be{static toolHandler=new ye(this);static#B=Object.assign(document.createElement("style"),{id:"free-will-editor-index-style"});static sortBox;static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-index",this.toolHandler.isInline=!1,this.sortBox=new Ie,this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"Ξ",className:`${this.#B.id}-button`,title:"align"}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":this.sortBox.sortBox.isConnected?this.sortBox.close():(this.sortBox.open(),super.processingElementPosition(this.sortBox.sortBox,this.toolHandler.toolButton))},this.sortBox.applyCallback=t=>{this.toolHandler.toolButton.dataset.tool_status="active",this.sortBox.close()},document.addEventListener("scroll",(()=>{this.sortBox.sortBox.isConnected&&this.toolHandler.processingPalettePosition(this.sortBox.sortBox)})),window.addEventListener("resize",(t=>{this.sortBox.sortBox.isConnected&&(this.sortBox.open(),super.processingElementPosition(this.sortBox.sortBox,this.toolHandler.toolButton))})),super.outClickElementListener(this.sortBox.sortBox,(({oldEvent:t,newEvent:e,isMouseOut:n})=>{n&&this.sortBox.sortBox.isConnected&&!super.isMouseInnerElement(this.toolHandler.toolButton)&&this.sortBox.close()}))}static createDefaultStyle(){this.#B.textContent=`\n\t\t\t.${this.#B.id}-button{\n\t\t\t\tfont-size: 0.8rem;\n\t\t\t}\n\n            .${this.toolHandler.defaultClass} {\n                display: block;\n            }\n\t\t`;let t=document.querySelector(`#${this.#B.id}`);return t?(this.#B?.remove(),this.#B=t,document.head.append(this.#B)):document.head.append(this.#B),this.#B}static get defaultStyle(){return this.#B}static set defaultStyle(t){this.#B.textContent=t}static set insertDefaultStyle(t){this.#B.sheet.insertRule(t)}constructor(t){super(Ae,t,{deleteOption:be.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE}),t||0!=Object.entries(this.dataset).length||(this.dataset.text_align=Ae.sortBox.selectedSort?.textContent),this.style.textAlign=this.dataset.text_align}}class Re{#K=Object.assign(document.createElement("style"),{id:"free-will-editor-font-size-box"});#Jt=30;#Kt=Object.assign(document.createElement("div"),{className:"font-size-wrap"});#Gt=Object.assign(document.createElement("ul"),{className:"font-size-container"});#Xt=Object.assign(document.createElement("input"),{autocomplete:"off",placeholder:"search your font size",type:"number",name:"font-size-search",className:"font-size-search",oninput:t=>this.#Yt(t),onkeyup:t=>{if("Enter"==t.key&&""!=this.#Xt.value){let e=this.#Gt.querySelector(`[data-size="${this.#Xt.value}"]`);this.#Zt(e,t)}}});#Dt;#Ht="가나 다라 ab cd";#$t=this.#Ht;#lt=()=>{};#Qt;#te;constructor(t){this.#te=t;let e=document.querySelector(`#${this.#K.id}`);e?this.#K=e:document.head.append(this.createStyle());let n=Object.assign(document.createElement("div"),{className:"font-size-search-wrap"});n.append(this.#Xt),this.#Kt.append(n,this.#Gt),this.#Kt.append(this.#Gt)}#Yt(t){let e=Number(this.#Xt.value);if(!this.#Xt.value||""==this.#Xt.value)return void this.#Ft(this.#$t).then((t=>{this.#Gt.replaceChildren(...t)}));if(isNaN(e)||this.#te.min>e||this.#te.max<e)return void this.#Gt.replaceChildren();let n=Object.assign(document.createElement("li"),{className:"font-size-item"});this.#$t.nodeType&&this.#$t.nodeType==Node.ELEMENT_NODE?n.innerHTML=this.#$t.innerHTML:n.textContent=this.#$t,n.style.fontSize=e+this.#te.unit,n.dataset.size=e,this.#zt(n),this.#Gt.replaceChildren(n),this.#Xt.focus()}#zt(t){return new Promise((e=>{t.onclick=e=>this.#Zt(t,e),e(t)}))}#Zt(t,e){if(this.#Dt=t,this.#Qt){let t=window.getSelection();t.removeAllRanges(),t.addRange(this.#Qt)}this.applyCallback(e)}#Ft(t){return new Promise((e=>{let n=[],o=String(this.#te.weight).replace(".","").length;for(let e=this.#te.min,i=this.#te.max+this.#te.weight;e<i;e=parseFloat((e+this.#te.weight).toFixed(o))){console.log(e);let o=Object.assign(document.createElement("li"),{className:"font-size-item"});t.nodeType&&t.nodeType==Node.ELEMENT_NODE?o.innerHTML=t.innerHTML:o.textContent=t,o.style.fontSize=e+this.#te.unit,this.#zt(o),n.push(o)}e(n)}))}async open(){this.#Xt.step=this.#te.weight,this.#Xt.min=this.#te.min,this.#Xt.max=this.#te.max;let t=window.getSelection();if(0!=t.rangeCount&&0==t.isCollapsed){let e=t.getRangeAt(0);this.#Qt=e.cloneRange();let n=document.createElement("aticle"),o=e.cloneContents();n.append(o),this.#$t=n}return this.#$t=""==this.#$t?this.#Ht:this.#$t,document.body.append(this.#Kt),await this.#Ft(this.#$t).then((t=>(this.#Gt.replaceChildren(...t),this.#Gt)))}close(){this.#Kt.remove()}set applyCallback(t){this.#lt=t}get applyCallback(){return this.#lt}get fontSizeBox(){return this.#Kt}get selectedFont(){return this.#Dt}get style(){return this.#K}set style(t){this.#K.textContent=t}set insertStyle(t){this.#K.sheet.insertRule(t)}createStyle(){return this.#K.textContent=`\n            .font-size-wrap{\n                background: #000000bf;\n                position: fixed;\n\t\t\t\tpadding: 0.9%;\n\t\t\t\twidth: ${this.#Jt}vw;\n\t\t\t\theight: 25vh;\n\t\t\t\tcolor: white;\n                min-width: 200px;\n                overflow-y: auto;\n                -webkit-user-select: none;\n                -moz-user-select: none;\n                -ms-user-select: none;\n                user-select: none;\n                overflow-x: hidden;\n                z-index: 999;\n            }\n\n            .font-size-wrap .font-size-search-wrap{\n                margin-bottom: 2%;\n                overflow-x: hidden;\n            }\n            .font-size-wrap .font-size-search-wrap [name="font-size-search"]{\n                outline: none;\n                -moz-appearance: textfield;\n                width: 100%;\n                color: white;\n            }\n            .font-size-wrap .font-size-search-wrap [name="font-size-search"]::-webkit-outer-spin-button,\n            .font-size-wrap .font-size-search-wrap [name="font-size-search"]::-webkit-inner-spin-button{\n                -webkit-appearance: none;\n                margin: 0;\n            }\n\n            .font-size-wrap .font-size-container{\n                list-style-type: none;\n                padding: 0;\n                margin: 0;\n            }\n            .font-size-wrap .font-size-container .font-size-item{\n                margin-bottom: 1%;\n                transition: all 0.5s;\n                overflow-x: hidden;\n                white-space: nowrap;\n                text-overflow: ellipsis;\n            }\n            .font-size-wrap .font-size-container .font-size-item:hover{\n                background-color: #666666;\n                cursor: pointer;\n                background-color: #666666;\n                padding: 2px 0 3px 0;\n            }\n\n        `,this.#K}}class je extends be{static toolHandler=new ye(this);static#B=Object.assign(document.createElement("style"),{id:"free-will-editor-font-size-style"});static fontSizeBox;static unit="px";static min=1;static max=50;static weight=1;static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-editor-font-size",this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"↑↓",className:`${this.#B.id}-button`,title:"Font Size"}),this.fontSizeBox=new Re(this),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":this.fontSizeBox.fontSizeBox.isConnected?this.fontSizeBox.close():this.fontSizeBox.open().then((t=>{super.processingElementPosition(this.fontSizeBox.fontSizeBox,this.toolHandler.toolButton)}))},this.fontSizeBox.applyCallback=t=>{this.toolHandler.toolButton.dataset.tool_status="active",this.fontSizeBox.close()},document.addEventListener("scroll",(()=>{this.fontSizeBox.fontSizeBox.isConnected&&super.processingElementPosition(this.fontSizeBox.fontSizeBox,this.toolHandler.toolButton)})),window.addEventListener("resize",(t=>{this.fontSizeBox.fontSizeBox.isConnected&&this.fontSizeBox.open().then((t=>{super.processingElementPosition(this.fontSizeBox.fontSizeBox,this.toolHandler.toolButton)}))})),super.outClickElementListener(this.fontSizeBox.fontSizeBox,(({oldEvent:t,newEvent:e,isMouseOut:n})=>{n&&this.fontSizeBox.fontSizeBox.isConnected&&!super.isMouseInnerElement(this.toolHandler.toolButton)&&this.fontSizeBox.close()}))}static createDefaultStyle(){this.#B.textContent=`\n\t\t\t.${this.#B.id}-button{\n\t\t\t\tfont-size: 0.8rem;\n\t\t\t}\n\t\t`;let t=document.querySelector(`#${this.#B.id}`);return t?(this.#B?.remove(),this.#B=t,document.head.append(this.#B)):document.head.append(this.#B),this.#B}static get defaultStyle(){return this.#B}static set defaultStyle(t){this.#B.textContent=t}static set insertDefaultStyle(t){this.#B.sheet.insertRule(t)}constructor(t){super(je,t),t||0!=Object.keys(this.dataset).length||(this.dataset.font_size=je.fontSizeBox.selectedFont?.style.fontSize),this.style.fontSize=this.dataset.font_size}}class Me extends be{static toolHandler=new ye(this);static#B=Object.assign(document.createElement("style"),{id:"free-will-editor-italic-style"});static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-editor-italic",this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"I",className:`${this.#B.id}-button`,title:"Italic"}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":this.toolHandler.toolButton.dataset.tool_status="active"}}static createDefaultStyle(){this.#B.textContent=`\n\t\t\t.${this.#B.id}-button{\n\t\t\t\tfont-style: italic;\n\t\t\t\tfont-size: 0.8rem;\n\t\t\t}\n\n\t\t\t.${this.toolHandler.defaultClass} {\n\t\t\t\tfont-style: italic;\n\t\t\t}\n\t\t`;let t=document.querySelector(`#${this.#B.id}`);return t?(this.#B?.remove(),this.#B=t,document.head.append(this.#B)):document.head.append(this.#B),this.#B}static get defaultStyle(){return this.#B}static set defaultStyle(t){this.#B.textContent=t}static set insertDefaultStyle(t){this.#B.sheet.insertRule(t)}constructor(t){super(Me,t)}}class De{#K=Object.assign(document.createElement("style"),{id:"free-will-editor-image-box"});#ee=Object.assign(document.createElement("div"),{className:"image-box-wrap",innerHTML:'\n            <div class="image-resize-container">\n                <div>\n                    <label class="image-box-resize-label" for="image-box-resize-width">width </label>\n                    <input list="image-box-resize-datalist" class="image-box-resize-input" id="image-box-resize-width" type="number" autocomplete="off"/>\n                    <div>\n                        <label class="image-box-resize-label-error-message" for="image-box-resize-width"></label>\n                    </div>\n                </div>\n                <div>\n                    <label class="image-box-resize-label" for="image-box-resize-height">height(auto) </label>\n                    <input list="image-box-resize-datalist" class="image-box-resize-input" id="image-box-resize-height" type="number" autocomplete="off" disabled/>\n                </div>\n            </div>\n            <div class="image-key-description-container" style="display:none;">\n                <kbd>Ctrl</kbd><kbd>Wheel</kbd>OR<kbd>Shift</kbd><kbd>Wheel</kbd>\n            </div>\n            <div class="image-button-container">\n                <a href="javascript:void(0);" class="download" download>\n                    <svg style="zoom:125%;" class="download-css-gg-push-down" width="1rem" height="1rem" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path d="M11.0001 1H13.0001V15.4853L16.2428 12.2427L17.657 13.6569L12.0001 19.3137L6.34326 13.6569L7.75748 12.2427L11.0001 15.4853V1Z" fill="#00000073" />\n                        <path d="M18 20.2877H6V22.2877H18V20.2877Z" fill="#00000073" />\n                    </svg>\n                </a>\n                <a href="javascript:void(0);" class="new-window">\n                    <svg style="zoom: 150%;" class="new-window-css-gg-expand" width="1rem" height="1rem" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path d="M12.3062 16.5933L12.2713 18.593L5.2724 18.4708L5.39457 11.4719L7.39426 11.5068L7.33168 15.092L15.2262 7.46833L11.6938 7.40668L11.7287 5.40698L18.7277 5.52915L18.6055 12.5281L16.6058 12.4932L16.6693 8.85507L8.72095 16.5307L12.3062 16.5933Z" fill="#00000073" />\n                    </svg>\n                </a>\n                <span class="image-editor">\n                    <svg class="image-editor-css-gg-pen" width="1rem" height="1rem" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path fill-rule="evenodd" clip-rule="evenodd" d="M21.2635 2.29289C20.873 1.90237 20.2398 1.90237 19.8493 2.29289L18.9769 3.16525C17.8618 2.63254 16.4857 2.82801 15.5621 3.75165L4.95549 14.3582L10.6123 20.0151L21.2189 9.4085C22.1426 8.48486 22.338 7.1088 21.8053 5.99367L22.6777 5.12132C23.0682 4.7308 23.0682 4.09763 22.6777 3.70711L21.2635 2.29289ZM16.9955 10.8035L10.6123 17.1867L7.78392 14.3582L14.1671 7.9751L16.9955 10.8035ZM18.8138 8.98525L19.8047 7.99429C20.1953 7.60376 20.1953 6.9706 19.8047 6.58007L18.3905 5.16586C18 4.77534 17.3668 4.77534 16.9763 5.16586L15.9853 6.15683L18.8138 8.98525Z" fill="#00000073" />\n                        <path d="M2 22.9502L4.12171 15.1717L9.77817 20.8289L2 22.9502Z" fill="#00000073" />\n                    </svg>\n                </span>\n            </div>\n        '});#ne;#oe;constructor(){let t=document.querySelector(`#${this.#K.id}`);t?this.#K=t:document.head.append(this.createStyle()),document.addEventListener("keydown",(t=>{if(this.#ee.hasAttribute("data-is_shft"))return;let{key:e}=t;"Shift"===e&&(this.#ee.dataset.is_shft="")})),document.addEventListener("keyup",(t=>{if(!this.#ee.hasAttribute("data-is_shft"))return;let{key:e}=t;"Shift"===e&&this.#ee.removeAttribute("data-is_shft")})),this.#ee.addEventListener("wheel",(t=>{if(this.#ee.hasAttribute("data-is_shft"))return;let{deltaY:e}=t;this.#ee.scrollTo(this.#ee.scrollLeft+e,void 0)}),{passive:!0});let[e,n]=this.#ee.querySelectorAll("#image-box-resize-width, #image-box-resize-height");window.addEventListener("keyup",(t=>{this.image&&this.resizeRememberTarget&&e.hasAttribute("data-is_ctrl")&&this.image.parentElement.matches(":hover")&&e.removeAttribute("data-is_ctrl")})),window.addEventListener("keydown",(t=>{let n=t.composedPath();this.image&&this.resizeRememberTarget&&n[0]!=e&&this.image.parentElement.matches(":hover")&&(t.ctrlKey?e.dataset.is_ctrl="":e.removeAttribute("data-is_ctrl"))})),window.addEventListener("wheel",(t=>{this.image&&this.resizeRememberTarget&&this.image.parentElement.hasAttribute("data-is_resize_click")&&t.composedPath()[0]!=e&&this.image.parentElement.matches(":hover")&&(e.hasAttribute("data-is_ctrl")?e.value=Number(e.value)+-1*t.deltaY:e.value=Number(e.value)+-1*t.deltaY/100,this.oninputEvent(this.image,e,e,n,this.resizeRememberTarget))}))}addImageHoverEvent(t,e){let n=this.#ee.querySelector(".image-key-description-container");t.parentElement.onmouseenter=()=>{if(!t.src||""==t.src||t.hasAttribute("data-error"))return;let o=t.getRootNode();if(o!=document?o.append(this.#K):document.head.append(this.#K),t.parentElement&&(t.parentElement!==this.#ee.parentElement||!this.#ee.classList.contains("start"))){t.parentElement.append(this.#ee),this.#ie(t,e),this.#se(t);let o=setInterval((()=>{this.#ee.isConnected&&t.complete&&t.parentElement===this.#ee.parentElement&&!this.#ee.classList.contains("start")&&(this.#ee.classList.add("start"),this.image=t,this.resizeRememberTarget=e,t.parentElement.onclick=e=>{t.src&&""!=t.src&&e.composedPath()[0]==t&&!t.hasAttribute("data-error")&&(this.#ee.classList.add("start"),t.parentElement.toggleAttribute("data-is_resize_click"),this.falsh(t.parentElement),t.parentElement.hasAttribute("data-is_resize_click")?n.style.display="":n.style.display="none")},clearInterval(o))}),50)}},t.parentElement.onmouseleave=()=>{this.#ee.classList.remove("start"),t.parentElement.hasAttribute("data-is_resize_click")&&(n.style.display="none",this.falsh(t.parentElement)),t.parentElement.removeAttribute("data-is_resize_click")}}falsh(t){return new Promise((e=>{let n=document.createElement("div");Object.assign(n.style,{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",background:"rgba(255, 255, 255, 0.4)",transition:"opacity 0.2s ease 0s",opacity:0}),t.append(n);let o=setInterval((()=>{n.isConnected&&(clearInterval(o),n.style.opacity=1,n.ontransitionend=()=>{n.style.opacity=0,n.ontransitionend=()=>{n.remove(),e()}})}),50)}))}#ie(t,e){return new Promise((n=>{let[o,i]=this.#ee.querySelectorAll("#image-box-resize-width, #image-box-resize-height");o.value=t.width,i.value=t.height,o.labels[0].textContent="width : ",o.labels[1].textContent="",this.prevValue=void 0,o.oninput=n=>this.oninputEvent(t,n.target,o,i,e),o.onkeydown=t=>{t.ctrlKey?o.dataset.is_ctrl="":o.removeAttribute("data-is_ctrl")},o.onkeyup=t=>{o.removeAttribute("data-is_ctrl")},o.onblur=()=>{o.removeAttribute("data-is_ctrl")},o.onwheel=n=>{n.preventDefault(),o.hasAttribute("data-is_ctrl")?o.value=Number(o.value)+-1*n.deltaY:o.value=Number(o.value)+-1*n.deltaY/100,this.oninputEvent(t,n.target,o,i,e)},n({width:o,height:i})}))}oninputEvent(t,e,n,o,i){if(isNaN(Number(e.value)))return void(e.value=e.value.replace(/\D/g,""));Number(e.value)<50?(n.labels[1].textContent="(min 50)",e.value=50):n.labels[1].textContent="",t[e.id.includes("width")?"width":"height"]=e.value;let s=t.getBoundingClientRect();this.prevValue&&parseInt(this.prevValue)==parseInt(s.width)&&(n.value=parseInt(this.prevValue),n.labels[1].textContent=`(max ${parseInt(this.prevValue)}) : `),this.prevValue=s.width,i.dataset.width=n.value}#se(t){return new Promise((e=>{let[n,o]=[...this.#ee.querySelectorAll(".download-css-gg-push-down, .new-window-css-gg-expand")].map((t=>t.parentElement));n.href=t.src,o.href=t.src,n.download=t.dataset.image_name,o.target="_blank",e({download:n,newWindow:o})}))}get imageBox(){return this.#ee}get style(){return this.#K}set style(t){this.#K.textContent=t}set insertStyle(t){this.#K.sheet.insertRule(t)}set image(t){this.#ne=t}get image(){return this.#ne}set resizeRememberTarget(t){this.#oe=t}get resizeRememberTarget(){return this.#oe}createStyle(){return this.#K.textContent="\n            .image-box-wrap{\n                position: absolute;\n                display: flex;\n                justify-content: space-between;\n                width: 100%;\n                background: linear-gradient(to bottom, #ff8787 -73%, #ffffffcf 115%);\n                color: white;\n                top:-20%;\n                opacity: 0;\n                transition: all 1s;\n                white-space: nowrap;\n                overflow-y: clip;\n                overflow-x: auto;\n            }\n            .image-box-wrap::-webkit-scrollbar{\n                display: none;\n            }\n            .image-box-wrap:hover::-webkit-scrollbar{\n                display: initial;\n                width: 7px;\n                height: 7px;\n            }\n            .image-box-wrap:hover::-webkit-scrollbar-track{\n                background: #00000040;\n                border-radius: 100px;\n                box-shadow: inset 0 0 5px #000000fc;\n            }\n            .image-box-wrap:hover::-webkit-scrollbar-thumb {\n                background: #0c0c0c38;\n                border-radius: 100px;\n                box-shadow: inset 0 0 5px #000000;\n            }\n            .image-box-wrap:hover::-webkit-scrollbar-thumb:hover {\n                /*background: #44070757;*/\n                background: #34000075; \n            }\n            .image-box-wrap.start{\n                top: 0;\n                opacity: 1;\n                transition: all 0.5s;\n            }\n            .image-box-wrap .image-button-container,\n            .image-box-wrap .image-resize-container, \n            .image-box-wrap .image-key-description-container{\n                display: flex;\n                gap: 1.5vw;\n                padding: 1.7%;\n                align-items: center;\n            }\n            .image-box-wrap .image-resize-container .image-box-resize-label{\n                background: linear-gradient(to right, #e50bff, #004eff);\n                -webkit-background-clip: text;\n                -webkit-text-fill-color: transparent;\n            }\n            .image-box-wrap .image-resize-container .image-box-resize-input{\n                outline: none;\n                border: none;\n                background-image: linear-gradient(#fff1f1d4, #ffffffeb), linear-gradient(to right, #a189890d 0%,  #ed89b275 100%);\n                background-origin: border-box;\n                background-clip: content-box, border-box;\n                background-color: #00000000; \n                width: 3.2rem;\n                height: 100%;\n                color: #ffb6b6;\n                font-size: 0.9rem;\n                text-align: center;\n            }\n            .image-box-wrap .image-button-container .new-window,\n            .image-box-wrap .image-button-container .download,\n            .image-box-wrap .image-button-container .image-editor{\n                display: flex;\n                align-items: center;\n                border: none;\n                background:none;\n                position:relative;\n                cursor: pointer;\n            }\n\n            .image-box-wrap kbd {\n                background-color: #eee;\n                border-radius: 3px;\n                border: 1px solid #b4b4b4;\n                box-shadow:\n                0 1px 1px rgba(0, 0, 0, 0.2),\n                0 2px 0 0 rgba(255, 255, 255, 0.7) inset;\n                color: #333;\n                display: inline-block;\n                font-size: 0.85em;\n                font-weight: 700;\n                line-height: 1;\n                padding: 2px 4px;\n                white-space: nowrap;\n                height: fit-content;\n            }\n        ",this.#K}}class He extends be{static toolHandler=new ye(this);static imageBox=new De;static customImageCallback;static#B=Object.assign(document.createElement("style"),{id:"free-will-editor-image-style"});static slotName="free-will-editor-image-description-slot";static#ae=Object.assign(document.createElement("input"),{type:"file",accept:"image/*"});static get selectedFile(){return this.#ae}static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-editor-image",this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"",className:`${this.#B.id}-button`,innerHTML:`\n            <svg class="${this.#B.id} css-gg-image-icon"\n                width="0.9rem"\n                height="0.9rem"\n                viewBox="0 0 24 24"\n                fill="none"\n                xmlns="http://www.w3.org/2000/svg"\n                >\n                <path\n                    fill-rule="evenodd"\n                    clip-rule="evenodd"\n                    d="M7 7C5.34315 7 4 8.34315 4 10C4 11.6569 5.34315 13 7 13C8.65685 13 10 11.6569 10 10C10 8.34315 8.65685 7 7 7ZM6 10C6 9.44772 6.44772 9 7 9C7.55228 9 8 9.44772 8 10C8 10.5523 7.55228 11 7 11C6.44772 11 6 10.5523 6 10Z"\n                    fill="currentColor"\n                />\n                <path\n                    fill-rule="evenodd"\n                    clip-rule="evenodd"\n                    d="M3 3C1.34315 3 0 4.34315 0 6V18C0 19.6569 1.34315 21 3 21H21C22.6569 21 24 19.6569 24 18V6C24 4.34315 22.6569 3 21 3H3ZM21 5H3C2.44772 5 2 5.44772 2 6V18C2 18.5523 2.44772 19 3 19H7.31374L14.1924 12.1214C15.364 10.9498 17.2635 10.9498 18.435 12.1214L22 15.6863V6C22 5.44772 21.5523 5 21 5ZM21 19H10.1422L15.6066 13.5356C15.9971 13.145 16.6303 13.145 17.0208 13.5356L21.907 18.4217C21.7479 18.7633 21.4016 19 21 19Z"\n                    fill="currentColor"\n                />\n            </svg>\n            `,title:"Image"}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":(this.#ae.click(),this.#ae.onchange=()=>{this.toolHandler.toolButton.dataset.tool_status="active"})}}static createDefaultStyle(){this.#B.textContent=`\n            .${this.toolHandler.defaultClass} {\n                position: relative;\n            }\n            .${this.#B.id}.css-gg-image-icon {\n                zoom:120%;\n            }\n            .${this.#B.id}.image-description{            \n                cursor: pointer;\n                display: inline-flex;\n                align-items: center;\n            }\n\n            .${this.#B.id}.image-description::after{\n                margin-left: 0.5em;\n                content: ' ['attr(data-file_name)'] 'attr(data-open_status);\n                font-size: small;\n                color: #bdbdbd;\n            }\n\n            .${this.#B.id}.image-contanier{\n                width: fit-content;\n                transition: height 0.5s ease-in-out;\n                overflow: hidden;\n                position: relative;\n            }\n            .${this.#B.id}.image-contanier img{\n                max-width: 100%;\n                height: auto;\n                aspect-ratio: attr(width) / attr(height);\n                image-rendering: auto;\n            }\n        `;let t=document.querySelector(`#${this.#B.id}`);return t?(this.#B?.remove(),this.#B=t,document.head.append(this.#B)):document.head.append(this.#B),this.#B}static get defaultStyle(){return this.#B}static set defaultStyle(t){this.#B.textContent=t}static set insertDefaultStyle(t){this.#B.sheet.insertRule(t)}#re;imgLoadEndCallback=t=>{};image=document.createElement("img");constructor(t){if(super(He,t,{deleteOption:be.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE}),t||0!=Object.keys(this.dataset).length)this.dataset.url&&!this.dataset.url.startsWith("blob:file")||!this.dataset.base64?He.customImageCallback&&"function"==typeof He.customImageCallback?He.customImageCallback(this):this.dataset.url&&(this.image.src=this.dataset.url):fetch(this.dataset.base64).then((async t=>t.blob().then((e=>{let n=URL.createObjectURL(e,t.headers.get("Content-Type"));this.dataset.url=n,this.image.src=this.dataset.url}))));else{this.#re=He.selectedFile.cloneNode(!0),He.selectedFile.files=(new DataTransfer).files,this.dataset.url=URL.createObjectURL(this.#re.files[0]),this.dataset.name=this.#re.files[0].name,this.dataset.last_modified=this.#re.files[0].lastModified,this.dataset.size=this.#re.files[0].size,this.dataset.content_type=this.#re.files[0].type;let t=URL.createObjectURL(this.#re.files[0],this.dataset.content_type);this.dataset.url=t,this.image.type=this.dataset.content_type,this.image.src=this.dataset.url}if(!this.dataset.name)throw this.remove(),new Error(`this file is undefined ${this.dataset.name}`);this.attachShadow({mode:"open"}),this.shadowRoot.append(He.defaultStyle.cloneNode(!0)),this.createDefaultContent().then((({wrap:t,description:e,slot:n,aticle:o})=>{this.connectedChildAfterCallback=t=>{o.append(...t)}})),this.disconnectedAfterCallback=()=>{this.dataset.url.startsWith("blob:file")&&setTimeout((()=>{URL.revokeObjectURL(this.dataset.url)}),12e4)}}createDefaultContent(){return new Promise((t=>{let e=Object.assign(document.createElement("div"),{});e.draggable=!1,this.shadowRoot.append(e);let n=Object.assign(document.createElement("div"),{className:`${He.defaultStyle.id} image-contanier`});this.image.dataset.image_name=this.dataset.name,n.append(this.image),this.image.onload=()=>{this.dataset.width&&(this.image.width=this.dataset.width)},this.image.onerror=()=>{this.image.dataset.error=""};let{description:o,slot:i,aticle:s}=this.createDescription(this.image,n);this.connectedAfterOnlyOneCallback=()=>{0!=this.childNodes.length&&"BR"!=this.childNodes[0]?.tagName&&s.append(...[...this.childNodes].filter((t=>t!=s))),e.replaceChildren(...[o,n].filter((t=>null!=t))),He.imageBox.addImageHoverEvent(this.image,this),"BR"==this.nextSibling?.tagName&&this.nextSibling.remove(),t({wrap:e,description:o,slot:i,aticle:s})}}))}createDescription(t,e){let n=Object.assign(document.createElement("div"),{className:`${He.defaultStyle.id} image-description`});n.dataset.file_name=this.dataset.name,n.dataset.open_status=this.dataset.open_status||"▼",e.style.height=this.dataset.height||"auto";let{slot:o,aticle:i}=this.createSlot();return n.append(o),n.onclick=o=>{"▼"==n.dataset.open_status?(n.dataset.open_status="▶",e.style.height=window.getComputedStyle(t).height,setTimeout((()=>{e.style.height="0px",this.dataset.height="0px"}),100)):(n.dataset.open_status="▼",setTimeout((()=>{e.style.height=window.getComputedStyle(t).height,this.dataset.height="auto"}),100),t.style.opacity="",t.style.visibility=""),this.dataset.open_status=n.dataset.open_status},e.ontransitionend=()=>{"▼"==n.dataset.open_status?e.style.height="auto":(t.style.opacity=0,t.style.visibility="hidden")},{description:n,slot:o,aticle:i}}createSlot(){let t=document.createElement("div");t.contentEditable="false",t.draggable="false";let e=Array.from(window.crypto.getRandomValues(new Uint32Array(16)),(t=>t.toString(32).padStart(2,"0"))).join("");return t.append(...this.childNodes),t.slot=He.slotName+"-"+e,this.append(t),{slot:Object.assign(document.createElement("slot"),{name:He.slotName+"-"+e}),aticle:t}}get selectedFile(){return this.#re}}class $e{#K=Object.assign(document.createElement("style"),{id:"free-will-editor-video-box"});#le=Object.assign(document.createElement("div"),{className:"video-box-wrap",innerHTML:'\n            <div class="video-resize-container">\n                <div>\n                    <label class="video-box-resize-label" for="video-box-resize-width">width : </label>\n                    <input list="video-box-resize-datalist" class="video-box-resize-input" id="video-box-resize-width" type="number" autocomplete="off"/>\n                    <div>\n                        <label class="video-box-resize-label-error-message" for="video-box-resize-width"></label>\n                    </div>\n                </div>\n                <div>\n                    <label class="video-box-resize-label" for="video-box-resize-height">height(auto) : </label>\n                    <input list="video-box-resize-datalist" class="video-box-resize-input" id="video-box-resize-height" type="number" autocomplete="off" disabled/>\n                </div>\n            </div>\n            <div class="video-key-description-container" style="display:none;">\n                <kbd>Ctrl</kbd><kbd>Wheel</kbd>OR<kbd>Shift</kbd><kbd>Wheel</kbd>\n            </div>\n            <div class="video-button-container">\n                <a href="javascript:void(0);" class="download" download>\n                    <svg style="zoom:140%;" class="download-css-gg-push-down"\n                        width="1rem"\n                        height="1rem"\n                        viewBox="0 0 24 24"\n                        fill="none"\n                        xmlns="http://www.w3.org/2000/svg"\n                    >\n                        <path\n                        d="M11.0001 1H13.0001V15.4853L16.2428 12.2427L17.657 13.6569L12.0001 19.3137L6.34326 13.6569L7.75748 12.2427L11.0001 15.4853V1Z"\n                        fill="#00000073"\n                        />\n                        <path d="M18 20.2877H6V22.2877H18V20.2877Z" fill="#00000073" />\n                    </svg>\n                </a>\n                <a href="javascript:void(0);" class="new-window">\n                    <svg style="zoom: 150%;" class="new-window-css-gg-expand"\n                        width="1rem"\n                        height="1rem"\n                        viewBox="0 0 24 24"\n                        fill="none"\n                        xmlns="http://www.w3.org/2000/svg"\n                    >\n                        <path\n                        d="M12.3062 16.5933L12.2713 18.593L5.2724 18.4708L5.39457 11.4719L7.39426 11.5068L7.33168 15.092L15.2262 7.46833L11.6938 7.40668L11.7287 5.40698L18.7277 5.52915L18.6055 12.5281L16.6058 12.4932L16.6693 8.85507L8.72095 16.5307L12.3062 16.5933Z"\n                        fill="#00000073"\n                        />\n                    </svg>\n                </a>\n            </div>\n        '});#ce;#oe;constructor(){let t=document.querySelector(`#${this.#K.id}`);t?this.#K=t:document.head.append(this.createStyle()),document.addEventListener("keydown",(t=>{if(this.#le.hasAttribute("data-is_shft"))return;let{key:e}=t;"Shift"===e&&(this.#le.dataset.is_shft="")})),document.addEventListener("keyup",(t=>{if(!this.#le.hasAttribute("data-is_shft"))return;let{key:e}=t;"Shift"===e&&this.#le.removeAttribute("data-is_shft")})),this.#le.addEventListener("wheel",(t=>{if(this.#le.hasAttribute("data-is_shft"))return;let{deltaY:e}=t;this.#le.scrollTo(this.#le.scrollLeft+e,void 0)}),{passive:!0});let[e,n]=this.#le.querySelectorAll("#video-box-resize-width, #video-box-resize-height");window.addEventListener("keyup",(t=>{this.video&&this.resizeRememberTarget&&e.hasAttribute("data-is_ctrl")&&this.video.parentElement.matches(":hover")&&e.removeAttribute("data-is_ctrl")})),window.addEventListener("keydown",(t=>{let n=t.composedPath();this.video&&this.resizeRememberTarget&&n[0]!=e&&this.video.parentElement.matches(":hover")&&(t.ctrlKey?e.dataset.is_ctrl="":e.removeAttribute("data-is_ctrl"))})),window.addEventListener("wheel",(t=>{this.video&&this.resizeRememberTarget&&this.video.parentElement.hasAttribute("data-is_resize_click")&&t.composedPath()[0]!=e&&this.video.parentElement.matches(":hover")&&(e.hasAttribute("data-is_ctrl")?e.value=Number(e.value)+-1*t.deltaY:e.value=Number(e.value)+-1*t.deltaY/100,this.oninputEvent(this.video,e,n,this.resizeRememberTarget))}))}addVideoHoverEvent(t,e){let n=this.#le.querySelector(".video-key-description-container");t.parentElement.onmouseenter=()=>{if(!t.src||""==t.src||t.hasAttribute("data-error"))return;let o=t.getRootNode();if(o!=document?o.append(this.#K):document.head.append(this.#K),t.parentElement&&(t.parentElement!==this.#le.parentElement||!this.#le.classList.contains("start"))){t.parentElement.append(this.#le),this.#ie(t,e),this.#se(t);let o=setInterval((()=>{this.#le.isConnected&&4==t.readyState&&t.parentElement===this.#le.parentElement&&!this.#le.classList.contains("start")&&(this.#le.classList.add("start"),this.video=t,this.resizeRememberTarget=e,t.parentElement.onclick=e=>{t.src&&""!=t.src&&e.composedPath()[0]==t&&!t.hasAttribute("data-error")&&(t.parentElement.toggleAttribute("data-is_resize_click"),this.falsh(t.parentElement),t.parentElement.hasAttribute("data-is_resize_click")?n.style.display="":n.style.display="none")},clearInterval(o))}),50)}},t.parentElement.onmouseleave=()=>{this.#le.classList.remove("start"),t.parentElement.hasAttribute("data-is_resize_click")&&(n.style.display="none",this.falsh(t.parentElement)),t.parentElement.removeAttribute("data-is_resize_click")}}falsh(t){return new Promise((e=>{let n=document.createElement("div");Object.assign(n.style,{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",background:"rgba(255, 255, 255, 0.4)",transition:"opacity 0.2s ease 0s",opacity:0}),t.append(n);let o=setInterval((()=>{n.isConnected&&(clearInterval(o),n.style.opacity=1,n.ontransitionend=()=>{n.style.opacity=0,n.ontransitionend=()=>{n.remove(),e()}})}),50)}))}#ie(t,e){return new Promise((n=>{let[o,i]=this.#le.querySelectorAll("#video-box-resize-width, #video-box-resize-height"),s=t.getBoundingClientRect();o.value=parseInt(s.width),i.value=parseInt(s.height),o.labels[0].textContent="width : ",o.labels[1].textContent="",this.prevValue=void 0,o.oninput=n=>this.oninputEvent(t,o,i,e),o.onkeydown=t=>{t.ctrlKey?o.dataset.is_ctrl="":o.removeAttribute("data-is_ctrl")},o.onkeyup=t=>{o.removeAttribute("data-is_ctrl")},o.onblur=()=>{o.removeAttribute("data-is_ctrl")},o.onwheel=n=>{n.preventDefault(),o.hasAttribute("data-is_ctrl")?o.value=Number(o.value)+-1*n.deltaY:o.value=Number(o.value)+-1*n.deltaY/100,this.oninputEvent(t,o,i,e)},n({width:o,height:i})}))}oninputEvent(t,e,n,o){if(isNaN(Number(e.value)))return void(e.value=e.value.replace(/\D/g,""));Number(e.value)<50?(e.labels[1].textContent="(min 50)",e.value=50):e.labels[1].textContent="",t[e.id.includes("width")?"width":"height"]=e.value;let i=t.getBoundingClientRect();this.prevValue&&parseInt(this.prevValue)==parseInt(i.width)&&(e.value=parseInt(this.prevValue),e.labels[1].textContent=`(max ${parseInt(this.prevValue)}) : `),this.prevValue=i.width,o.dataset.width=e.value}#se(t){return new Promise((e=>{let[n,o]=[...this.#le.querySelectorAll(".download-css-gg-push-down, .new-window-css-gg-expand")].map((t=>t.parentElement));n.href=t.src,o.href=t.src,n.download=t.dataset.video_name,o.target="_blank",e({download:n,newWindow:o})}))}get videoBox(){return this.#le}get style(){return this.#K}set style(t){this.#K.textContent=t}set insertStyle(t){this.#K.sheet.insertRule(t)}set video(t){this.#ce=t}get video(){return this.#ce}set resizeRememberTarget(t){this.#oe=t}get resizeRememberTarget(){return this.#oe}createStyle(){return this.#K.textContent="\n            .video-box-wrap{\n                position: absolute;\n                display: flex;\n                justify-content: space-between;\n                width: 100%;\n                background: linear-gradient(to bottom, #ff8787 -73%, #ffffffcf 115%);\n                color: white;\n                top:-20%;\n                opacity: 0;\n                transition: all 1s;\n                white-space: nowrap;\n                overflow-y: clip;\n                overflow-x: auto;\n            }\n            .video-box-wrap::-webkit-scrollbar{\n                display: none;\n            }\n            .video-box-wrap:hover::-webkit-scrollbar{\n                display: initial;\n                width: 7px;\n                height: 7px;\n            }\n            .video-box-wrap:hover::-webkit-scrollbar-track{\n                background: #00000040;\n                border-radius: 100px;\n                box-shadow: inset 0 0 5px #000000fc;\n            }\n            .video-box-wrap:hover::-webkit-scrollbar-thumb {\n                background: #0c0c0c38;\n                border-radius: 100px;\n                box-shadow: inset 0 0 5px #000000;\n            }\n            .video-box-wrap:hover::-webkit-scrollbar-thumb:hover {\n                /*background: #44070757;*/\n                background: #34000075; \n            }\n            .video-box-wrap.start{\n                top: 0;\n                opacity: 1;\n                transition: all 0.5s;\n            }\n            .video-box-wrap .video-button-container, \n            .video-box-wrap .video-resize-container,\n            .video-box-wrap .video-key-description-container{\n                display: flex;\n                gap: 1.5vw;\n                padding: 1.7%;\n                align-items: center;\n            }\n            .video-box-wrap .video-resize-container .video-box-resize-label{\n                background: linear-gradient(to right, #e50bff, #004eff);\n                -webkit-background-clip: text;\n                -webkit-text-fill-color: transparent;\n            }\n            .video-box-wrap .video-resize-container .video-box-resize-input{\n                outline: none;\n                border: none;\n                background-image: linear-gradient(#fff1f1d4, #ffffffeb), linear-gradient(to right, #a189890d 0%,  #ed89b275 100%);\n                background-origin: border-box;\n                background-clip: content-box, border-box;\n                background-color: #00000000; \n                width: 3.2rem;\n                height: 100%;\n                color: #ffb6b6;\n                font-size: 0.9rem;\n                text-align: center;\n            }\n            .video-box-wrap .video-button-container .new-window,\n            .video-box-wrap .video-button-container .download{\n                display: flex;\n                align-items: center;\n                border: none;\n                background:none;\n                position:relative;\n                cursor: pointer;\n            }\n\n            .video-box-wrap kbd {\n                background-color: #eee;\n                border-radius: 3px;\n                border: 1px solid #b4b4b4;\n                box-shadow:\n                0 1px 1px rgba(0, 0, 0, 0.2),\n                0 2px 0 0 rgba(255, 255, 255, 0.7) inset;\n                color: #333;\n                display: inline-block;\n                font-size: 0.85em;\n                font-weight: 700;\n                line-height: 1;\n                padding: 2px 4px;\n                white-space: nowrap;\n                height: fit-content;\n            }\n        ",this.#K}}class ze extends be{static toolHandler=new ye(this);static videoBox=new $e;static customVideoCallback;static#B=Object.assign(document.createElement("style"),{id:"free-will-editor-video-style"});static descriptionName="free-will-editor-video-description-slot";static#ae=Object.assign(document.createElement("input"),{type:"file",accept:"video/*"});static get selectedFile(){return this.#ae}static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-editor-video",this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"",className:`${this.#B.id}-button`,innerHTML:`\n            <svg class="${this.#B.id} css-gg-video-icon"\n            width="0.9rem"\n            height="0.9rem"\n            viewBox="0 0 24 24"\n            fill="none"\n            xmlns="http://www.w3.org/2000/svg"\n            >\n                <path\n                    fill-rule="evenodd"\n                    clip-rule="evenodd"\n                    d="M4 4.5V6.5H12V7.5H3C1.34315 7.5 0 8.84315 0 10.5V16.5C0 18.1569 1.34315 19.5 3 19.5H15C16.5731 19.5 17.8634 18.2892 17.9898 16.7487L24 17.5V9.5L17.9898 10.2513C17.8634 8.71078 16.5731 7.5 15 7.5H14V5.5C14 4.94772 13.5523 4.5 13 4.5H4ZM18 12.2656V14.7344L22 15.2344V11.7656L18 12.2656ZM16 10.5C16 9.94772 15.5523 9.5 15 9.5H3C2.44772 9.5 2 9.94772 2 10.5V16.5C2 17.0523 2.44772 17.5 3 17.5H15C15.5523 17.5 16 17.0523 16 16.5V10.5Z"\n                    fill="currentColor"\n                />\n            </svg>\n            `,title:"Video"}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":(this.#ae.onchange=()=>{this.toolHandler.toolButton.dataset.tool_status="active"},this.#ae.click())}}static createDefaultStyle(){this.#B.textContent=`\n            .${this.toolHandler.defaultClass} {\n                position: relative;\n            }\n            .${this.#B.id}.css-gg-video-icon {\n                zoom:120%;\n            }\n            .${this.#B.id}.video-description{            \n                cursor: pointer;\n                display: inline-flex;\n                align-items: center;\n            }\n            .${this.#B.id}.video-description::after{\n                margin-left: 0.5em;\n                content: ' ['attr(data-file_name)'] 'attr(data-open_status);\n                font-size: small;\n                color: #bdbdbd;\n            }\n\n            .${this.#B.id}.video-contanier{\n                width: fit-content;\n                transition: height 0.5s ease-in-out;\n                overflow: hidden;\n                position: relative;\n            }\n            .${this.#B.id}.video-contanier video{\n                max-width: 100%;\n                height: auto;\n                aspect-ratio: attr(width) / attr(height);\n            }\n        `;let t=document.querySelector(`#${this.#B.id}`);return t?(this.#B?.remove(),this.#B=t,document.head.append(this.#B)):document.head.append(this.#B),this.#B}static get defaultStyle(){return this.#B}static set defaultStyle(t){this.#B.textContent=t}static set insertDefaultStyle(t){this.#B.sheet.insertRule(t)}#re;videoLoadEndCallback=t=>{};video=Object.assign(document.createElement("video"),{loop:!0,controls:!0});constructor(t){if(super(ze,t,{deleteOption:be.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE}),t||0!=Object.entries(this.dataset).length)this.dataset.url&&!this.dataset.url.startsWith("blob:file")||!this.dataset.base64?ze.customVideoCallback&&"function"==typeof ze.customVideoCallback?ze.customVideoCallback(this):this.dataset.url&&(this.video.src=this.dataset.url):fetch(this.dataset.base64).then((async t=>t.blob().then((e=>{let n=URL.createObjectURL(e,t.headers.get("Content-Type"));this.dataset.url=n,this.video.src=this.dataset.url}))));else{this.#re=ze.selectedFile.cloneNode(!0),ze.selectedFile.files=(new DataTransfer).files,this.dataset.url=URL.createObjectURL(this.#re.files[0]),this.dataset.name=this.#re.files[0].name,this.dataset.lastModified=this.#re.files[0].lastModified,this.dataset.size=this.#re.files[0].size,this.dataset.content_type=this.#re.files[0].type;let t=URL.createObjectURL(this.#re.files[0],this.dataset.content_type);this.dataset.url=t,this.video.type=this.dataset.content_type,this.video.src=this.dataset.url}if(!this.dataset.name)throw this.remove(),new Error(`this file is undefined ${this.dataset.name}`);this.attachShadow({mode:"open"}),this.shadowRoot.append(ze.defaultStyle.cloneNode(!0)),this.createDefaultContent().then((({wrap:t,description:e,slot:n,aticle:o})=>{this.connectedChildAfterCallback=t=>{o.append(...t)}})),this.disconnectedAfterCallback=()=>{this.dataset.url.startsWith("blob:file")&&setTimeout((()=>{URL.revokeObjectURL(this.dataset.url)}),12e4)}}createDefaultContent(){return new Promise((t=>{let e=Object.assign(document.createElement("div"),{});e.draggable=!1,this.shadowRoot.append(e);let n=Object.assign(document.createElement("div"),{className:`${ze.defaultStyle.id} video-contanier`});this.video.dataset.video_name=this.dataset.name,n.append(this.video),this.video.onload=()=>{(0!=this.file.length&&""==video.canPlayType(this.file.files[0].type)||this.dataset.name&&""==this.video.canPlayType(`video/${this.dataset.name.substring(this.dataset.name.lastIndexOf(".")+1)}`))&&this.videoIsNotWorking()},this.video.onloadeddata=()=>{this.video.play(),this.dataset.width&&(this.video.width=this.dataset.width)},this.video.onerror=()=>{};let{description:o,slot:i,aticle:s}=this.createDescription(this.video,n);this.connectedAfterOnlyOneCallback=()=>{0!=this.childNodes.length&&"BR"!=this.childNodes[0]?.tagName&&s.append(...[...this.childNodes].filter((t=>t!=s))),e.replaceChildren(...[o,n].filter((t=>null!=t))),ze.videoBox.addVideoHoverEvent(this.video,this),"BR"==this.nextSibling?.tagName&&this.nextSibling.remove(),t({wrap:e,description:o,slot:i,aticle:s})}}))}createDescription(t,e){let n=Object.assign(document.createElement("div"),{className:`${ze.defaultStyle.id} video-description`});n.dataset.file_name=this.dataset.name,n.dataset.open_status=this.dataset.open_status||"▼",e.style.height=this.dataset.height||"auto";let{slot:o,aticle:i}=this.createSlot();return o&&n.append(o),n.onclick=o=>{"▼"==n.dataset.open_status?(n.dataset.open_status="▶",e.style.height=window.getComputedStyle(t).height,setTimeout((()=>{e.style.height="0px",this.dataset.height="0px"}),100)):(n.dataset.open_status="▼",setTimeout((()=>{e.style.height=window.getComputedStyle(t).height,this.dataset.height="auto"}),100),t.style.opacity="",t.style.visibility=""),this.dataset.open_status=n.dataset.open_status},e.ontransitionend=()=>{"▼"==n.dataset.open_status?e.style.height="auto":(t.style.opacity=0,t.style.visibility="hidden")},{description:n,slot:o,aticle:i}}createSlot(){let t=document.createElement("div");t.contentEditable="false",t.draggable="false";let e=Array.from(window.crypto.getRandomValues(new Uint32Array(16)),(t=>t.toString(32).padStart(2,"0"))).join("");return t.append(...this.childNodes),t.slot=ze.descriptionName+"-"+e,this.append(t),{slot:Object.assign(document.createElement("slot"),{name:ze.descriptionName+"-"+e}),aticle:t}}videoIsNotWorking(){alert(`${this.dataset.name}은 호환되지 않는 영상입니다.`),this.remove()}get selectedFile(){return this.#re}}class Fe extends be{static toolHandler=new ye(this);static customResourcesCallback=()=>{};static#B=Object.assign(document.createElement("style"),{id:"free-will-editor-resources-style"});static slotName="free-will-editor-resources-description-slot";static#ae=Object.assign(document.createElement("input"),{type:"file"});static get selectedFile(){return this.#ae}static#de=()=>{};static#he=()=>{};static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-editor-resources",this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"",className:`${this.#B.id}-button`,innerHTML:`\n            <svg class="${this.#B.id} css-gg-file-add-icon" width="0.9rem" height="0.9rem" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path d="M10 18V16H8V14H10V12H12V14H14V16H12V18H10Z" fill="currentColor" />\n                <path\n                    fill-rule="evenodd"\n                    clip-rule="evenodd"\n                    d="M6 2C4.34315 2 3 3.34315 3 5V19C3 20.6569 4.34315 22 6 22H18C19.6569 22 21 20.6569 21 19V9C21 5.13401 17.866 2 14 2H6ZM6 4H13V9H19V19C19 19.5523 18.5523 20 18 20H6C5.44772 20 5 19.5523 5 19V5C5 4.44772 5.44772 4 6 4ZM15 4.10002C16.6113 4.4271 17.9413 5.52906 18.584 7H15V4.10002Z"\n                    fill="currentColor"\n                />\n            </svg>\n            `,title:"Resources"}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":(this.#ae.click(),this.#ae.onchange=()=>{this.toolHandler.toolButton.dataset.tool_status="active"})}}static createDefaultStyle(){this.#B.textContent=`\n            .${this.toolHandler.defaultClass} {\n                position: relative;\n            }\n            .${this.#B.id}.css-gg-file-add-icon {\n                zoom:120%;\n            }\n            .${this.#B.id}.resources-description{            \n                cursor: pointer;\n                display: inline-flex;\n                align-items: center;\n            }\n\n            .${this.#B.id}.resources-description::after{\n                margin-left: 0.5em;\n                content: ' ['attr(data-file_name)'] 'attr(data-open_status);\n                font-size: small;\n                color: #bdbdbd;\n            }\n            .${this.#B.id}.resources-download-button, .${this.#B.id}.resources-preview-button{\n                margin-left: 1vw;\n                border: solid 2px #e5e5e5;\n                cursor: pointer;\n                background: none;\n            }\n            .${this.#B.id}.resources-contanier{\n                width: auto;\n                transition: height 0.5s ease-in-out;\n                overflow: hidden;\n                position: relative;\n                margin-top: 0.7vh;\n            }\n            .${this.#B.id}.resources-contanier object{\n                width: 99%;\n                height: auto;\n                aspect-ratio: attr(width) / attr(height);\n                border: solid 2px #efefef;\n            }\n            .${this.#B.id}.resources-contanier object.unload{\n                width: auto;\n            }\n\n        `;let t=document.querySelector(`#${this.#B.id}`);return t?(this.#B?.remove(),this.#B=t,document.head.append(this.#B)):document.head.append(this.#B),this.#B}static get defaultStyle(){return this.#B}static set defaultStyle(t){this.#B.textContent=t}static set insertDefaultStyle(t){this.#B.sheet.insertRule(t)}static set resourcesCallback(t){this.#de=t}static get resourcesCallback(){return this.#de}static set sizeLimitOverCallback(t){this.#he=t}static get sizeLimitOverCallback(){return this.#he}#re;imgLoadEndCallback=t=>{};resources=Object.assign(document.createElement("object"),{});constructor(t){if(super(Fe,t,{deleteOption:be.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE}),t||0!=Object.keys(this.dataset).length)Fe.customResourcesCallback&&"function"==typeof Fe.customResourcesCallback?Fe.customResourcesCallback(this):this.dataset.url;else{this.#re=Fe.selectedFile.cloneNode(!0),Fe.selectedFile.files=(new DataTransfer).files,this.dataset.url=URL.createObjectURL(this.#re.files[0]),this.dataset.name=this.#re.files[0].name,this.dataset.last_modified=this.#re.files[0].lastModified,this.dataset.size=this.#re.files[0].size,this.dataset.content_type=this.#re.files[0].type;let t=URL.createObjectURL(this.#re.files[0],this.dataset.content_type);this.dataset.url=t}if(this.resources.type=this.dataset.content_type,this.resources.data=this.dataset.url,this.resources.dataset.resources_name=this.dataset.name,!this.dataset.name)throw this.remove(),new Error(`this file is undefined ${this.dataset.name}`);this.attachShadow({mode:"open"}),this.shadowRoot.append(Fe.defaultStyle.cloneNode(!0)),this.createDefaultContent().then((({wrap:t,description:e,slot:n,aticle:o})=>{this.connectedChildAfterCallback=t=>{o.append(...t)}})),this.disconnectedAfterCallback=()=>{this.resources.remove(),this.dataset.url.startsWith("blob:file")}}createDefaultContent(){return new Promise((t=>{let e=Object.assign(document.createElement("div"),{});e.draggable=!1,this.shadowRoot.append(e);let n=Object.assign(document.createElement("div"),{className:`${Fe.defaultStyle.id} resources-contanier`});this.resources.onload=t=>{this.dataset.width&&(this.resources.width=this.dataset.width),this.resources.contentWindow?(this.resources.contentWindow.document.body.style.contentVisibility="auto",this.resources.contentWindow.document.body.style.containIntrinsicSize="1px 5000px"):this.resources.classList.add("unload"),Fe.resourcesCallback({status:"load",resources:this.resources})},this.resources.onerror=t=>{this.resources.dataset.error="",this.resources.contentWindow||this.resources.classList.add("unload"),Fe.resourcesCallback({status:"error",resources:this.resources})};let{description:o,slot:i,aticle:s}=this.createDescription(this.resources,n),a=Object.assign(document.createElement("button"),{className:`${Fe.defaultStyle.id} resources-download-button`,innerHTML:"<b>Download</b>",onclick:()=>{fetch(this.resources.data).then((t=>t.blob())).then((t=>{let e=URL.createObjectURL(t,this.dataset.content_type),n=document.createElement("a");n.href=e,n.download=this.dataset.name,n.click(),n.remove(),setTimeout((()=>{URL.revokeObjectURL(e)}),3e5)}))}}),r=Object.assign(document.createElement("button"),{className:`${Fe.defaultStyle.id} resources-preview-button`,innerHTML:"<b>Preview</b>",onclick:()=>{n.append(this.resources)}});this.connectedAfterOnlyOneCallback=()=>{0!=this.childNodes.length&&"BR"!=this.childNodes[0]?.tagName&&s.append(...[...this.childNodes].filter((t=>t!=s))),e.replaceChildren(...[o,a,r,n].filter((t=>null!=t))),"BR"==this.nextSibling?.tagName&&this.nextSibling.remove(),t({wrap:e,description:o,slot:i,aticle:s})}}))}createDescription(t,e){let n=Object.assign(document.createElement("div"),{className:`${Fe.defaultStyle.id} resources-description`});n.dataset.file_name=this.dataset.name,n.dataset.open_status=this.dataset.open_status||"▼",e.style.height=this.dataset.height||"auto",n.dataset.open_status="▼";let{slot:o,aticle:i}=this.createSlot();return n.append(o),n.onclick=o=>{"▼"==n.dataset.open_status?(n.dataset.open_status="▶",e.style.height=window.getComputedStyle(t).height,setTimeout((()=>{e.style.height="0px",this.dataset.height="0px"}),100)):(n.dataset.open_status="▼",setTimeout((()=>{e.style.height=window.getComputedStyle(t).height,this.dataset.height="auto"}),100),t.style.opacity="",t.style.visibility=""),this.dataset.open_status=n.dataset.open_status},e.ontransitionend=()=>{"▼"==n.dataset.open_status?e.style.height="auto":(t.style.opacity=0,t.style.visibility="hidden")},{description:n,slot:o,aticle:i}}createSlot(){let t=document.createElement("div");t.contentEditable="false",t.draggable="false";let e=Array.from(window.crypto.getRandomValues(new Uint32Array(16)),(t=>t.toString(32).padStart(2,"0"))).join("");return t.append(...this.childNodes),t.slot=Fe.slotName+"-"+e,this.append(t),{slot:Object.assign(document.createElement("slot"),{name:Fe.slotName+"-"+e}),aticle:t}}get selectedFile(){return this.#re}set resourcesUrl(t){let e=this.resources.cloneNode(!0);e.data=t,this.resources.after(e),this.resources.remove(),this.resources=e,e.onload=()=>{this.resources!=e&&(this.dataset.width&&(e.width=this.dataset.width),e.contentWindow||e.classList.add("unload"))},e.onerror=()=>{e.dataset.error="",e.contentWindow||e.classList.add("unload")}}get resourcesUrl(){this.resources.data}}class Ue extends be{static toolHandler=new ye(this);static#B=Object.assign(document.createElement("style"),{id:"free-will-editor-code-style"});static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-code",this.toolHandler.isInline=!1,this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"",className:`${this.#B.id}-button`,innerHTML:`\n            <svg class="${this.#B.id} css-gg-code-icon"\n            width="0.9rem"\n            height="0.9rem"\n            viewBox="0 0 24 24"\n            fill="none"\n            xmlns="http://www.w3.org/2000/svg"\n            >\n                <path\n                d="M13.325 3.05011L8.66741 20.4323L10.5993 20.9499L15.2568 3.56775L13.325 3.05011Z"\n                fill="currentColor"\n                />\n                <path\n                d="M7.61197 18.3608L8.97136 16.9124L8.97086 16.8933L3.87657 12.1121L8.66699 7.00798L7.20868 5.63928L1.04956 12.2017L7.61197 18.3608Z"\n                fill="currentColor"\n                />\n                <path\n                d="M16.388 18.3608L15.0286 16.9124L15.0291 16.8933L20.1234 12.1121L15.333 7.00798L16.7913 5.63928L22.9504 12.2017L16.388 18.3608Z"\n                fill="currentColor"\n                />\n            </svg>\n            `,title:"Code Block"}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":this.toolHandler.toolButton.dataset.tool_status="active"}}static createDefaultStyle(){this.#B.textContent=`\n            .${this.#B.id}-button{\n            }\n            .${this.#B.id}.css-gg-code-icon{\n                zoom:120%;\n            }\n\t\t\t.${this.toolHandler.defaultClass} {\n                display: block;\n                background-color: #e7e7e7;\n                margin-inline: 0.5em;\n                border: solid 1px #d1d1d1;\n                border-radius: 4px;\n                white-space: pre-wrap;\n                font-family: monospace;\n                box-shadow: 0px 0px 3px 0px #d1d1d1;\n                padding: 0.5em 1em 0.5em 1em;\n\t\t\t}\n\t\t`;let t=document.querySelector(`#${this.#B.id}`);return t?(this.#B?.remove(),this.#B=t,document.head.append(this.#B)):document.head.append(this.#B),this.#B}static get defaultStyle(){return this.#B}static set defaultStyle(t){this.#B.textContent=t}static set insertDefaultStyle(t){this.#B.sheet.insertRule(t)}parentLine;constructor(t){super(Ue,t,{deleteOption:be.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE})}}class We{#K=Object.assign(document.createElement("style"),{id:"free-will-editor-hyperlink-box"});#ue=Object.assign(document.createElement("div"),{className:"hyperlink-box-wrap"});#pe=20;#me=Object.assign(document.createElement("input"),{autocomplete:"off",placeholder:"Please enter your link ",type:"url",name:"hyperlink-url-input",className:"hyperlink-url-input",required:!1});#ge=Object.assign(document.createElement("span"),{});#lt=()=>{};#Qt;#fe;constructor(){let t=document.querySelector(`#${this.#K.id}`);t?this.#K=t:document.head.append(this.createStyle());let e=Object.assign(document.createElement("div"),{className:"url-input-text-wrapper"});e.append(this.#me),this.#me.oninput=t=>{this.#ge.isConnected&&this.#ge.remove()},this.#me.onkeydown=t=>{"Enter"==t.key&&(t.preventDefault(),o.onclick())};let n=Object.assign(document.createElement("button"),{className:"cancel-button",type:"button",textContent:"cancel"});n.onclick=()=>{this.close()};let o=Object.assign(document.createElement("button"),{className:"apply-button",type:"button",textContent:"apply"});o.onclick=t=>{if(!this.#me.checkValidity()){let t=this.#me.value;if(this.#me.value=`https://${this.#me.value}`,!this.#me.checkValidity())return void(this.#me.value=t)}if(this.lastUrl=this.#me.value,this.#me.value="",this.#Qt){let t=window.getSelection();t.removeAllRanges(),t.addRange(this.#Qt)}this.applyCallback(t)};let i=Object.assign(document.createElement("div"),{className:"button-wrap"});i.append(n,o),this.#ue.append(e,i)}async open(){let t=window.getSelection();if(0!=t.rangeCount&&0==t.isCollapsed){let e=t.getRangeAt(0);this.#Qt=e.cloneRange()}document.body.append(this.#ue);let e=setInterval((()=>{this.#ue.isConnected&&(clearInterval(e),this.#me.focus())}),50)}close(){this.#ue.remove()}set applyCallback(t){this.#lt=t}get applyCallback(){return this.#lt}get hyperlinkBox(){return this.#ue}createStyle(){return this.#K.textContent=`\n\t\t\t.hyperlink-box-wrap{\n\t\t\t\tbackground: #343434;\n\t\t\t\tposition: fixed;\n\t\t\t\tpadding: 0.9%;\n\t\t\t\twidth: ${this.#pe}vw;\n\t\t\t\theight: auto;\n\t\t\t\tcolor: white;\n\t\t\t\tmin-width: 100px;\n\t\t\t\toverflow-y: auto;\n\t\t\t\t-webkit-user-select: none;\n\t\t\t\t-moz-user-select: none;\n\t\t\t\t-ms-user-select: none;\n\t\t\t\tuser-select: none;\n\t\t\t\toverflow-x: hidden;\n\t\t\t\tdisplay: grid;\n\t\t\t\tgap: 1vh;\n\t\t\t\talign-content: center;\n\t\t\t\tjustify-content: space-around;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-items: center;\n                z-index: 999;\n\t\t\t}\n\t\t\t.hyperlink-box-wrap .url-input-text-wrapper{\n\t\t\t\twidth: inherit;\n\t\t\t}\n\t\t\t.hyperlink-box-wrap .url-input-text-wrapper .hyperlink-url-input{\n\t\t\t\twidth: -webkit-fill-available;\n\t\t\t\tbackground-color: #ffffff00;\n\t\t\t\tcolor: #b9b9b9;\n\t\t\t\tborder-bottom: solid 1px #4c4c4c;\n\t\t\t\tborder-left: solid 1px #4c4c4c;\n\t\t\t}\n\t\t\t.hyperlink-box-wrap .button-wrap{\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: space-around;\n\t\t\t\twidth: inherit;\n\t\t\t}\n\t\t\t.hyperlink-box-wrap .button-wrap .apply-button,\n\t\t\t.hyperlink-box-wrap .button-wrap .cancel-button {\n\t\t\t\tbackground: none;\n\t\t\t\tborder: revert;\n\t\t\t\tcolor: #b9b9b9;\n\t\t\t\tborder-color: #464646;\n\t\t\t}\n\t\t`,this.#K}}class qe extends be{static toolHandler=new ye(this);static#B=Object.assign(document.createElement("style"),{id:"free-will-editor-link-style"});static hyperlinkBox;static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-editor-link",this.toolHandler.toolButton=Object.assign(document.createElement("button"),{className:`${this.#B.id}-button`,innerHTML:`\n\t\t\t\t<svg class="${this.#B.id} css-gg-link-icon"\n\t\t\t\twidth="0.9rem"\n\t\t\t\theight="0.9rem"\n\t\t\t\tviewBox="0 0 24 24"\n\t\t\t\tfill="none"\n\t\t\t\txmlns="http://www.w3.org/2000/svg"\n\t\t\t\t>\n\t\t\t\t\t<path\n\t\t\t\t\t\td="M14.8284 12L16.2426 13.4142L19.071 10.5858C20.6331 9.02365 20.6331 6.49099 19.071 4.9289C17.509 3.3668 14.9763 3.3668 13.4142 4.9289L10.5858 7.75732L12 9.17154L14.8284 6.34311C15.6095 5.56206 16.8758 5.56206 17.6568 6.34311C18.4379 7.12416 18.4379 8.39049 17.6568 9.17154L14.8284 12Z"\n\t\t\t\t\t\tfill="currentColor"\n\t\t\t\t\t/>\n\t\t\t\t\t<path\n\t\t\t\t\t\td="M12 14.8285L13.4142 16.2427L10.5858 19.0711C9.02372 20.6332 6.49106 20.6332 4.92896 19.0711C3.36686 17.509 3.36686 14.9764 4.92896 13.4143L7.75739 10.5858L9.1716 12L6.34317 14.8285C5.56212 15.6095 5.56212 16.8758 6.34317 17.6569C7.12422 18.4379 8.39055 18.4379 9.1716 17.6569L12 14.8285Z"\n\t\t\t\t\t\tfill="currentColor"\n\t\t\t\t\t/>\n\t\t\t\t\t<path\n\t\t\t\t\t\td="M14.8285 10.5857C15.219 10.1952 15.219 9.56199 14.8285 9.17147C14.4379 8.78094 13.8048 8.78094 13.4142 9.17147L9.1716 13.4141C8.78107 13.8046 8.78107 14.4378 9.1716 14.8283C9.56212 15.2188 10.1953 15.2188 10.5858 14.8283L14.8285 10.5857Z"\n\t\t\t\t\t\tfill="currentColor"\n\t\t\t\t\t/>\n\t\t\t\t</svg>\n\t\t\t`,title:"Hyperlink"}),this.hyperlinkBox=new We,this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":this.hyperlinkBox.hyperlinkBox.isConnected?this.hyperlinkBox.close():this.hyperlinkBox.open().then((()=>{super.processingElementPosition(this.hyperlinkBox.hyperlinkBox,this.toolHandler.toolButton)}))},document.addEventListener("scroll",(()=>{this.hyperlinkBox.hyperlinkBox.isConnected&&super.processingElementPosition(this.hyperlinkBox.hyperlinkBox,this.toolHandler.toolButton)})),window.addEventListener("resize",(t=>{this.hyperlinkBox.hyperlinkBox.isConnected&&super.processingElementPosition(this.hyperlinkBox.hyperlinkBox,this.toolHandler.toolButton)})),this.hyperlinkBox.applyCallback=t=>{this.toolHandler.toolButton.dataset.tool_status="active",this.hyperlinkBox.close()},super.outClickElementListener(this.hyperlinkBox.hyperlinkBox,(({oldEvent:t,newEvent:e,isMouseOut:n})=>{n&&this.hyperlinkBox.hyperlinkBox.isConnected&&!super.isMouseInnerElement(this.toolHandler.toolButton)&&this.hyperlinkBox.close()}))}static createDefaultStyle(){this.#B.textContent=`\n\t\t\t.${this.#B.id}-button{\n\t\t\t}\n\t\t\t.${this.#B.id}.css-gg-link-icon{\n\t\t\t\tzoom:120%;\n\t\t\t}\n\t\t\t.${this.toolHandler.defaultClass} {\n\t\t\t\tcolor: -webkit-link;\n\t\t\t\tcursor: pointer;\n\t\t\t\ttext-decoration: underline;\n\t\t\t\tdisplay: grid;\n\t\t\t}\n\t\t\t.${this.toolHandler.defaultClass} > [data-hyperlink_child="${qe.toolHandler.defaultClass}-child"]{\n\t\t\t\tall: initial;\n\t\t\t\tdisplay: inline-block;\n\t\t\t\tmargin-left: 1em;\n\t\t\t\tpadding-left: 1em;\n\t\t\t\tborder-left: 5px solid #d7d7db;\n\t\t\t\twidth: 95%;\n\t\t\t\tfloat: left;\n\t\t\t}\n\t\t\t.${this.toolHandler.defaultClass} > [data-hyperlink_child="${qe.toolHandler.defaultClass}-child"] > *{\n\t\t\t\tfont-size: 14px;\n\t\t\t}\n\t\t\t.${this.toolHandler.defaultClass} > [data-hyperlink_child="${qe.toolHandler.defaultClass}-child"] img{\n\t\t\t\tmax-width: 100%;\n                height: auto;\n                aspect-ratio: attr(width) / attr(height);\n\t\t\t}\n\t\t\t.${this.toolHandler.defaultClass}-preview-url{\n\t\t\t\tposition: fixed;\n\t\t\t\tz-index: 9000;\n\t\t\t\twidth: 50vw;\n\t\t\t\theight: 50vh;\n\t\t\t}\n\t\t`;let t=document.querySelector(`#${this.#B.id}`);return t?(this.#B?.remove(),this.#B=t,document.head.append(this.#B)):document.head.append(this.#B),this.#B}static get defaultStyle(){return this.#B}static set defaultStyle(t){this.#B.textContent=t}static set insertDefaultStyle(t){this.#B.sheet.insertRule(t)}#ye=Object.assign(document.createElement("a"),{target:"_blank"});constructor(t){let e;super(qe,t),t||0!=Object.keys(this.dataset).length?e=Promise.resolve().then((()=>{})):(this.dataset.href=qe.hyperlinkBox.lastUrl,e=fetch(this.dataset.href,{mode:"no-cors"}).then((t=>t.text())).then((t=>{let e=(new DOMParser).parseFromString(t,"text/html");return this.dataset.title=e.querySelector('meta[name="og:title"]')?.getAttribute("content")||e.querySelector('meta[name="twitter:title"]')?.getAttribute("content")||e.querySelector("title")?.textContent||"",this.dataset.description=e.querySelector('meta[name="description"]')?.getAttribute("content")||e.querySelector('meta[name="og:description"]')?.getAttribute("content")||e.querySelector('meta[name="twitter:description"]')?.getAttribute("content")||"",this.dataset.image=e.querySelector('meta[name="og:image"]')?.getAttribute("content")||e.querySelector('meta[name="twitter:image"]')?.getAttribute("content")||"",this.dataset.favicon=e.querySelector('link[rel="icon"]')?.getAttribute("href")||"",this.dataset.siteName=new URL(this.dataset.href).hostname,document.createElement("p")})).catch((t=>{console.error(t)}))),this.#ye.href=this.dataset.href,super.connectedAfterOnlyOneCallback=()=>{e.then((t=>{if(!t&&!(t=this.querySelector(`[data-hyperlink_child="${qe.toolHandler.defaultClass}-child"]`)))return;let e,n,o,i;""!=this.dataset.title&&(e=Object.assign(document.createElement("p"),{textContent:this.dataset.title}),e.style.fontWeight="bold"),""!=this.dataset.description&&(n=Object.assign(document.createElement("p"),{textContent:this.dataset.description})),""!=this.dataset.image&&(o=Object.assign(document.createElement("p"),{innerHTML:`\n\t\t\t\t\t\t\t<img data-image src="${this.dataset.image}"/>\n\t\t\t\t\t\t`})),""!=this.dataset.favicon&&(i=Object.assign(document.createElement("span"),{innerHTML:`\n\t\t\t\t\t\t\t<img data-favicon src="${this.dataset.favicon}" style="width: 1.1em; vertical-align: text-bottom;"/>\n\t\t\t\t\t\t`}));let s=Object.assign(document.createElement("span"),{textContent:this.dataset.siteName});s.style.fontSize="12px",s.style.fontWeight="bold",this.append(t),t.dataset.hyperlink_child=`${qe.toolHandler.defaultClass}-child`,t.contenteditable=!1,t.replaceChildren(...[i,s,e,n,o].filter((t=>null!=t))),this.onclick=e=>{e.composedPath().some((e=>e==t))||this.#ye.click()}}))}}}class Ve extends ve{static componentsMap={};static toolsMap={};static LineBreakMode=class{static#be=class{value;constructor(t){this.value=t,Object.freeze(this)}};static NO_CHANGE=new this.#be(1);static NEXT_LINE_FIRST=new this.#be(2);static NEXT_LINE_LAST=new this.#be(3)};static async getLowDoseJSON(t,{afterCallback:e=(t=>{})}={}){return Promise.all([...t.childNodes].map((async(t,n)=>new Promise((n=>{n(Ve.#we(t,{afterCallback:e}))}))))).then((t=>t.filter((t=>null!=t)).map((t=>(delete t.node,t)))))}static async#we(t,{afterCallback:e}){return new Promise((n=>{let o={};t.nodeType==Node.TEXT_NODE&&""!=t.textContent&&t.textContent?(o.type=Node.TEXT_NODE,o.name=t.constructor.name,o.text=t.textContent,o.node=t,e(o),n(o)):t.nodeType==Node.ELEMENT_NODE?(o.type=Node.ELEMENT_NODE,o.name=t.constructor.name,o.tagName=t.localName,o.data=Object.assign({},t.dataset),o.node=t,t.hasAttribute("is_cursor")&&(o.cursor_offset=t.getAttribute("cursor_offset"),o.cursor_type=t.getAttribute("cursor_type"),o.cursor_index=t.getAttribute("cursor_index"),o.cursor_scroll_x=t.getAttribute("cursor__scroll_x"),o.cursor_scroll_y=t.getAttribute("cursor_scroll_y")),this.getLowDoseJSON(t,{afterCallback:e}).then((t=>{o.childs=t.filter((t=>null!=t)),e(o),n(o)}))):n(void 0)}))}static async parseLowDoseJSON(t,e,{beforeCallback:n=(t=>{}),afterCallback:o=(t=>{})}={}){return new Promise((i=>{let s=e;"string"==typeof e&&(s=JSON.parse(e)),s instanceof Array&&i(Promise.all(Ve.#ve(s,{beforeCallback:n,afterCallback:o})).then((e=>(t.append(...e.filter((t=>null!=t))),e)))),i(void 0)}))}static#ve(t,{beforeCallback:e,afterCallback:n}){return t.filter((t=>null!=t)).map((async t=>new Promise((o=>{let i;if(e(t),t.type==Node.TEXT_NODE)i=document.createTextNode(t.text);else if(t.type==Node.ELEMENT_NODE){let o=window.customElements.get(t.tagName);if(o&&o.toolHandler)i=new o.prototype.constructor(t.data);else if(t.data.hasOwnProperty("is_line")){let e=new we(document.createElement(t.tagName));i=e.lineElement,Object.assign(i.dataset,t.data)}else i=document.createElement(t.tagName),Object.assign(i.dataset,t.data);n(i),0!=t.childs.length&&Promise.all(Ve.#ve(t.childs,{beforeCallback:e,afterCallback:n})).then((t=>{i.append(...t)}))}o(i)}))))}#C=!1;components;tools;#Ee;#Ce;isDefaultStyle=!0;#xe=new MutationObserver(((t,e)=>{t.forEach((t=>{if("false"==this.contentEditable||"connected"==t.target.dataset.tool_status&&t.oldValue==t.target.dataset.tool_status=="connected")return;let e=window.getSelection().focusNode,n=t.target.__Tool;"active"==t.target.dataset.tool_status&&"active"!=t.oldValue&&0==n.prototype.isPrototypeOf(e.parentElement)?this.#Se(n):"cancel"==t.target.dataset.tool_status&&"cancel"!=t.oldValue&&this.#_e(n)}))}));#ke;numberIndexMapper=["`","1","2","3","4","5","6","7","8","9"];numberToSpecialMapper=["~","!","@","#","$","%","^","&","*","("];constructor(t=[Ce,Se,_e,ke,Oe,Ne,Te,Be,Pe,Ae,je,Me,He,ze,Fe,Ue,qe],{isDefaultStyle:e=!0,isDefaultShortcutKeyEvent:n=!0}={},o){super(),this.keydownEventCallback=o,e&&ve.createDefaultStyle(),new Promise((n=>{this.isDefaultStyle=e,this.components={"free-will-editor-line":we},this.tools=t,this.classList.add("free-will-editor"),Object.entries(this.components).forEach((([t,e])=>{if(t.includes(" "))throw new DOMException(`The token provided ('${t}') contains HTML space characters, which are not valid in tokens.`);Ve.componentsMap[e.name]||(e.toolHandler.defaultClass=t,window.customElements.get(t)||window.customElements.define(t,e,e.toolHandler.extendsElement&&""!=e.toolHandler.extendsElement?{extends:e.toolHandler.extendsElement}:void 0),Ve.componentsMap[e.name]=e)})),this.tools.forEach((t=>{Ve.toolsMap[t.name]||(t.isDefaultStyle&&t.createDefaultStyle(),t.toolHandler.toolButton.__Tool=t,this.#xe.observe(t.toolHandler.toolButton,{attributeFilter:["data-tool_status"],attributeOldValue:!0}),window.customElements.get(t.toolHandler.defaultClass)||window.customElements.define(t.toolHandler.defaultClass,t,t.toolHandler.extendsElement&&""!=t.toolHandler.extendsElement?{extends:t.toolHandler.extendsElement}:void 0),Ve.toolsMap[t.name]=t)}));let o=new MutationObserver(((t,e)=>{t.forEach((t=>{0==this.childElementCount&&this.startFirstLine(),this.firstElementChild.line||new we(this.firstElementChild.line),this.querySelectorAll("[data-placeholder]").forEach((async t=>{t.removeAttribute("data-placeholder")})),this.isEmpty?this.placeholder=this.#Ee:this.firstElementChild.setAttribute("data-placeholder",""),t.addedNodes.forEach((async t=>{new Promise((e=>{t.nodeType==Node.ELEMENT_NODE&&(t.classList.contains(we.toolHandler.defaultClass)&&(t.line||new we(t),0==t.innerText.length&&(t.innerText="\n",window.getSelection().setPosition(t,1),t.focus())),e())}))}))}))}));o.observe(this,{childList:!0,subtree:!0}),n()}));const i=t=>{if(!this.isCursor()||"ArrowDown"!=t.key)return;let e=this.getCurrentLine(void 0,{isRoot:!0});if(!e)return;let n=e.nextElementSibling;for(;n&&"false"==n.contentEditable;)n=n.nextElementSibling;if(!n){let t=super.createLine();t.line?.lookAtMe()}};n&&be.globalKeydownEventListener(this,(({oldEvent:e,newEvent:n})=>{if(!this.isCursor())return;let o=!1;if(null!=this.keydownEventCallback&&(o=this.keydownEventCallback(n)),o)return;i(n);let{ctrlKey:s,shiftKey:a,altKey:r,key:l}=n;if(s&&"b"==l.toLowerCase())return n.preventDefault(),void Ce.toolHandler.toolButton.click();if(s&&"u"==l.toLowerCase)return n.preventDefault(),void Oe.toolHandler.toolButton.click();if(s&&"i"==l.toLowerCase)return n.preventDefault(),void Me.toolHandler.toolButton.click();let c=[...t];new Promise((t=>{let e=c.splice(0,10),o=!1;for(let t=0,i=e.length;t<i;t+=1){let i=String(t),a=i.substring(i.length-1);if(s&&r&&l==this.numberIndexMapper[a]){let i=e[t];n.preventDefault(),i.toolHandler.toolButton.click(),o=!0;break}}if(o)t();else{for(let t=0,e=c.length;t<e;t+=1){let e=String(t),o=e.substring(e.length-1);if(s&&a&&l==this.numberToSpecialMapper[o]){let e=c[t];n.preventDefault(),e.toolHandler.toolButton.click();break}}t()}}))}))}connectedCallback(){this.#Ce=new Ee(this),this.#C||(this.#C=!0,"inherit"!=this.contentEditable&&1!=this.contentEditable||(this.contentEditable=!0,this.tabIndex=1,this.focus(),this.isEmpty&&this.startFirstLine()))}disconnectedCallback(){this.#Ce=null,this.#C=!1}startFirstLine(){let t=super.createLine();return t.line.isFirstLine=!0,this.placeholder=this.#Ee,t}#Oe(t){let e=document.getSelection(),n=new Range,o=we.getLine(t);n.setStartAfter(o),n.setEnd(o,t.textContent.length-1),e.removeAllRanges(),e.addRange(n)}#Le(t){let e=document.getSelection(),n=new Range;t&&t.nodeType==Node.ELEMENT_NODE&&t.textContent.length,n.selectNodeContents(t),n.setStart(t,t.length),n.setEnd(t,t.length),e.removeAllRanges(),e.addRange(n),t.removeAttribute("tabIndex")}#Se(t){let e=window.getSelection(),{isCollapsed:n,anchorNode:o,focusNode:i}=e;n&&t.toolHandler.isInline||super.getLineRange(e).then((({startLine:n,endLine:o})=>(n||(n=o),n.line||new we(n),o.line||new we(o),n.line.applyTool(t,e.getRangeAt(0),o)))).then((t=>{this.#Ce||(this.#Ce=new Ee(this)),this.#Ce.addUndoRedo(!0);let e,n=window.getSelection(),o=n.getRangeAt(0);e=o.endContainer.nodeType==Node.TEXT_NODE?o.endContainer.parentElement:o.endContainer,e.scrollIntoView({behavior:"instant",block:"end",inline:"nearest"}),n.setPosition(e,e.childNodes.length-1)}))}#_e(t){let e=window.getSelection(),{isCollapsed:n,anchorNode:o,focusNode:i}=e;n&&t.toolHandler.isInline||super.getLineRange(e).then((({startLine:n,endLine:o})=>{n||(n=o),n.line||new we(n),o.line||new we(o),console.log(n,o),n.line.cancelTool(t,e,o).then((()=>{this.#Ce||(this.#Ce=new Ee(this)),this.#Ce.addUndoRedo(!0),window.getSelection().setPosition(n,n.childElementCount)}))}))}async lineBreak(t=Ve.LineBreakMode.NEXT_LINE_FIRST){let e=window.getSelection();return super.getLineRange(e).then((({startLine:n,endLine:o})=>{n.line||new we(n),o.line||new we(o);let i=e.getRangeAt(0),{startOffset:s,endOffset:a,startContainer:r,endContainer:l}=i,c=n.lastChild,d=c.nodeType==Node.TEXT_NODE?c.length:c.childNodes.length;i.setStart(r,s),i.setEnd(c,d);let h=super.createLine();h.append(i.extractContents()),n.after(h),t==Ve.LineBreakMode.NEXT_LINE_FIRST?window.getSelection().setPosition(h,0):t==Ve.LineBreakMode.NEXT_LINE_LAST&&h.line.lookAtMe()}))}set placeholder(t){this.#Ee=t,this.firstElementChild&&0!=this.contentEditable&&this.firstElementChild.setAttribute("data-placeholder",this.#Ee)}get firstLine(){return this.firstElementChild}get isEmpty(){return we.isElementTextEmpty(this)&&![...this.querySelectorAll("*")].some((t=>this.tools.hasOwnProperty(t.localName)))}get isLoaded(){return this.#C}set keydownEventCallback(t){this.#ke=t}get keydownEventCallback(){return this.#ke}}const Je=new class{#Ne;#i;#Te={};#Be;#Pe;constructor(){window.myAPI.getWorkspaceId().then((t=>{this.workspaceId=t})),window.myAPI.event.electronEventTrigger.addElectronEventListener("workspaceChange",(t=>{this.workspaceId=t.workspaceId}))}set addWorkspaceIdChangedListener({name:t,callback:e,runTheFirst:n}){this.#Te[t]=e,n&&this.workspaceId&&e(this)}get addWorkspaceIdChangedListener(){return this.#Te}set workspaceId(t){t&&(this.#i=t,window.myAPI.workspace.getWorkspaceDetail({workspaceId:t}).then((t=>{this.#Ne=t;let e=Promise.all(Object.values(this.#Te).map((async t=>new Promise((e=>{t(this),e()})))));this.#Pe?this.#Pe.then((()=>{e.then((()=>{this.#Pe=new Promise((t=>{this.#Be=t}))}))})):this.#Pe=new Promise((t=>{this.#Be=t,this.#Be(e)}))})))}get workspaceId(){return Number(this.#i)}get workspace(){return this.#Ne}removeWorkspaceIdChangedListener(t){this.#Te(t)}},Ke=new class{#Ie;#Ae;#Re={};#je;#Me=new Promise((t=>{this.#je=t}));#De;constructor(){window.myAPI.event.electronEventTrigger.addElectronEventListener("roomChange",(t=>{this.roomId=t.roomId}))}set addRoomIdChangeListener({name:t,callback:e,runTheFirst:n}){this.#Re[t]=e,n&&this.#Ie&&e(this)}get addRoomIdChangeListener(){return this.#Re}set roomId(t){if(!t)throw new Error("roomId is undefined");this.#Ie=t,window.myAPI.room.isRoomOwner({roomId:t}).then((e=>{this.#De=e.data,window.myAPI.room.getRoomDetail({roomId:t}).then((t=>{this.#Ae=t.data,window.myAPI.setOption({name:"lastRoomInfo",value:JSON.stringify(this.#Ae)}),Promise.all(Object.values(this.#Re).map((async t=>new Promise((e=>{t(this),e()}))))).then((()=>{this.#je()})),this.#Me.then((()=>{this.#Me=new Promise((t=>{this.#je=t}))}))}))}))}get roomId(){return Number(this.#Ie)}get room(){return this.#Ae}removeRoomIdChangeListener(t){this.#Re(t)}get roomChangeAwait(){return this.#Me}get isOwner(){return this.#De}},Ge=new class{#He=/[A-Z]?[a-z]+|[0-9]+|[A-Z]+(?![a-z])/g;constructor(){}jsonToSaveElementDataset(t,e){if(!e)throw new Error("element is undefined");if(e.nodeType!=Node.ELEMENT_NODE)throw new Error(`element is not element node type ::: ${e.nodeType}`);return new Promise((n=>{let o=Object.entries(t).reduce(((t,[e,n])=>(t[e.match(this.#He).map((t=>t.toLowerCase())).join("_")]=n,t)),{});Object.assign(e.dataset,o),n(e)}))}async underbarNameToCamelName(t){return new Promise((e=>{e(Object.entries(t).reduce(((t,[e,n])=>(t[e.split("_").map(((t,e)=>0==e?t.charAt(0).toLowerCase()+t.substring(1):t.charAt(0).toUpperCase()+t.substring(1))).join("")]=n,t)),{}))}))}async getProjectPathPromise(){return await window.myAPI.getProjectPath().then((t=>t)).catch((t=>(console.error(t),"")))}processingElementPosition(t,e){let n;n=this.isElement(e,HTMLElement)?e.getBoundingClientRect():e;let{x:o,y:i,height:s,width:a}=n,r=i-t.clientHeight,l=o-t.clientWidth;t.style.top=r>0?r+"px":i+s+"px",t.style.left=l>0?l+"px":o+a+"px"}isElement(t,e){let n=Object.getPrototypeOf(t),o=!1;for(;null!=n;){if(n?.constructor==e){o=!0;break}n=Object.getPrototypeOf(n)}return o}shortenBytes(t){const e=t>0?Math.floor(Math.log2(t)/10):0,n=((e>0?"KMGTPEZY"[e-1]:"")||(e>=9?"Y":""))+"B";return{size:Math.floor(t/Math.pow(1024,e>=9?8:e)),rank:e,rankText:n}}showToastMessage(t){let e=Object.assign(document.createElement("div"),{className:"toast_message"});e.append(...t.map((t=>Object.assign(document.createElement("div"),{textContent:t})))),document.body.append(e);let n=setInterval((()=>{e.isConnected&&(clearInterval(n),setTimeout((()=>{e.style.opacity=0,e.ontransitionend=()=>{e.remove()}}),1e3))}),50)}};class Xe{#$e;#ze;#Fe=[];#Ue=t=>{};#We=t=>{console.log("out!!",t)};#qe=t=>!1;constructor({wrapper:t}){if(!t)throw new Error("wrapper is undefined");this.#$e=t}addPositionChangeEvent(t,e){if(0==t.length)throw new Error("child is empty");if(t.some((t=>null==Number(t.dataset.order_sort)||isNaN(Number(t.dataset.order_sort)))))throw console.error(t),new Error("data-order_sort is not defined or is not number");let n=e||this.#$e;n.dataset.is_position_change="";return new Promise((e=>{let o=[...n.children].filter((t=>t.hasAttribute("data-order_sort"))).pop();t.forEach(((e,i)=>{e.draggable=!0,e.ondragstart=n=>{n.stopPropagation(),this.#ze=e,t.forEach((async t=>{[...t.children].forEach((t=>{t.hasAttribute("data-is_position_change")||(t.style.pointerEvents="none",t.dataset.is_pointer_target="")}))}))},e.ondragend=t=>{t.stopPropagation(),(t.x<0||t.y<0||window.outerWidth<t.x||window.outerHeight<t.y)&&this.#We({target:e,event:t}),this.#ze=void 0,new Promise((t=>{document.querySelectorAll("[data-is_pointer_target]").forEach((t=>{t.style.pointerEvents="",t.removeAttribute("data-is_pointer_target")})),t()})),e.__dragendCallback&&e.__dragendCallback()},e.ondragover=t=>{t.stopPropagation(),t.preventDefault()},e.ondragenter=t=>{t.stopPropagation(),t.preventDefault(),t.target.style.borderTop="solid #0000009c"},e.ondragleave=t=>{t.stopPropagation(),t.preventDefault(),t.target.style.borderTop=""},e.ondrop=i=>{if(i.stopPropagation(),i.preventDefault(),i.target.style.borderTop="",!this.#ze)return;let s=this.#ze,a=this.onIfCancelCallback(s,e);if("boolean"!=typeof a)throw new Error("onIfCancelCallback is only return Boolean");a||(i.target.closest("[data-order_sort]").before(s),this.#ze=void 0,new Promise((t=>{let e=[...n.children].filter((t=>t.hasAttribute("data-order_sort"))).pop();o||(o=e);let i=Number(o.dataset.order_sort);s==o&&o!=e&&(e.dataset.order_sort=o.dataset.order_sort,i=Number(o.dataset.order_sort)),o=e;let a=o?.previousElementSibling;for(;a&&(i+=1,a.dataset.prev_order_sort=a.dataset.order_sort,a.dataset.order_sort=i,a.previousElementSibling!==a);)a=a.previousElementSibling;t()})).then((()=>{this.#Ue([...new Set([...t.filter((t=>t.dataset.order_sort!=t.dataset.prev_order_sort&&t!=s)),s])],{item:e,target:s,parent:n})})))}})),e()}))}set onDropEndChangePositionCallback(t){this.#Ue=t}get onDropEndChangePositionCallback(){return this.#Ue}set onDropDocumentOutCallback(t){this.#We=t}get onDropDocumentOutCallback(){return this.#We}set onIfCancelCallback(t){this.#qe=t}get onIfCancelCallback(){return this.#qe}}const Ye=new class t{#Ve=this.searchAccountInfo();static#Je;static accountInfoChangeAcceptPromise=new Promise((t=>{this.#Je=t}));static{window.myAPI.event.electronEventTrigger.addElectronEventListener("accountInfoChangeAccept",(t=>{console.log(t);let{content:e}=t;this.#Je(e),this.accountInfoChangeAcceptPromise=new Promise((t=>{this.#Je=t}))}))}constructor(){}accountInfoChangeAcceptEventListener(e=(({oldData:t,newData:e})=>{})){let n,o;const i=()=>{t.accountInfoChangeAcceptPromise.then((t=>{o=t,e({oldData:n,newData:o}),n=t,i()}))};i()}async searchAccountInfo(){return this.#Ve=await window.myAPI.account.getAccountInfo().then((t=>t.data)),this.#Ve}get accountInfo(){return this.#Ve}},Ze=new class{encoder=new TextEncoder;decoder=new TextDecoder;signAlgorithm={name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"};secretAlgorithm={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"};async generateKeyPair(t,e){return window.crypto.subtle.generateKey(t,!0,e)}async keySign(t,e){let n=this.encoder.encode(t);return window.crypto.subtle.sign(this.signAlgorithm.name,e,n).then((t=>({message:n,signature:t})))}async decryptMessage(t,e,n){return window.crypto.subtle.decrypt({name:n.name},t,e).catch((t=>{console.error(t.message),console.error(t.stack)}))}async convertBase64ToBuffer(t){return fetch(`data:application/octet-binary;base64,${t}`).then((t=>t.arrayBuffer())).then((t=>new Uint8Array(t)))}async exportKey(t,e){return window.crypto.subtle.exportKey(t,e).then((t=>new Promise((e=>e(String.fromCharCode(...new Uint8Array(t))))))).then((t=>new Promise((e=>e(window.btoa(t))))))}async callS3PresignedUrl(t,e,n={}){return console.log("callFunctionParam !!! ",n),Promise.all([this.generateKeyPair(this.signAlgorithm,["sign","verify"]),this.generateKeyPair(this.secretAlgorithm,["encrypt","decrypt"])]).then((([t,e])=>Promise.all([this.exportKey("spki",t.publicKey),this.exportKey("spki",e.publicKey),Promise.resolve(e),Promise.resolve(t)]))).then((async([o,i,s,a])=>{let r=await this.keySign(`${e}:${i}`,a.privateKey),l=await t(Object.assign(n,{data:window.btoa(String.fromCodePoint(...r.message)),dataKey:o,sign:window.btoa(String.fromCodePoint(...new Uint8Array(r.signature)))})),{code:c,data:d}=l;if(0==c)return{data:d,encDncKeyPair:s}}))}async fetchPutObject(t,e,n,o){return fetch(t,{method:"PUT",headers:{"Content-Encoding":"base64","Content-Type":"application/octet-stream","x-amz-server-side-encryption-customer-algorithm":"AES256","x-amz-server-side-encryption-customer-key":e,"x-amz-server-side-encryption-customer-key-md5":n},body:o})}};class Qe extends Ve{static{window.customElements.define("notice-board-line",Qe)}static tools=[Ce,Se,_e,ke,Oe,Ne,Te,Be,Pe,Ae,je,Me,He,ze,Fe,Ue,qe];static option={isDefaultStyle:!0};__parentWrapper;constructor(t){super(Qe.tools,Qe.option),this.__parentWrapper=t,super.placeholder="",super.spellcheck=!0}}const tn=new class{#Ke={};#Ge=Object.assign(document.createElement("div"),{id:"notice_board_detail_wrapper",innerHTML:'\n            <div class="notice_board_detail_container list_scroll list_scroll-y" data-bind_name="noticeBoardDetailContainer">\n                <ul class="notice_board_detail_content" data-bind_name="noticeBoardDetailList">\n \n                </ul>\n                <div class="toolbar" style="position: fixed; z-index: 2000;" data-bind_name="toolbar"></div>\n            </div>\n        '});#Xe=(()=>[...this.#Ge.querySelectorAll("[data-bind_name]")].reduce(((t,e)=>(t[e.dataset.bind_name]=e,t)),{}))();#Ye;constructor(){this.#Ye=new Xe({wrapper:this.#Xe.noticeBoardDetailList}),this.#Ye.onDropEndChangePositionCallback=(t,{item:e,target:n,wrapper:o})=>{window.myAPI.noticeBoard.updateNoticeBoardDetailOrder(t.map((t=>({id:t.dataset.id,workspaceId:t.dataset.workspace_id,roomId:t.dataset.room_id,orderSort:t.dataset.order_sort})))).then((t=>{console.log(t)}))},window.myAPI.event.electronEventTrigger.addElectronEventListener("noticeBoardDetailAccept",(t=>{let e,n=document.activeElement;n.__parentWrapper&&(n.dataset.is_update=""),t&&t.serverSentStreamType&&(e=!0,t=t.content),this.createItemElement(t).then((e=>{this.#Ze(e,t.workspaceId,t.roomId,t.noticeBoardId,t.id);let o=Object.values(this.#Ke[t.workspaceId]?.[t.roomId]?.[t.noticeBoardId]||{}).sort(((t,e)=>Number(e.dataset.order_sort)-Number(t.dataset.order_sort)));this.#Ye.addPositionChangeEvent(o);let i=new MutationObserver(((t,e)=>{t.forEach((t=>{let{addedNodes:e,removedNodes:o}=t;if(![...e].some((t=>t==n.__parentWrapper)))return;n.contentEditable=!0;let i=n.hasAttribute("is_cursor")?n:n.querySelector("[is_cursor]");if(!i)return;let{cursor_offset:s,cursor_type:a,cursor_index:r,cursor_scroll_x:l,cursor_scroll_y:c}=i.attributes,d=window.getSelection();if(a.value==Node.ELEMENT_NODE){let t=i.childNodes[r.value];d.setPosition(t,s.value)}else a.value==Node.TEXT_NODE&&d.setPosition(i,s.value)}))}));n&&n.__parentWrapper&&i.observe(this.#Xe.noticeBoardDetailList,{childList:!0}),this.#Xe.noticeBoardDetailList.replaceChildren(...o);let s=setInterval((()=>{e.isConnected&&(clearInterval(s),i.disconnect(),n.removeAttribute("data-is_update"))}),50)}))})),this.#Xe.noticeBoardDetailList,fe.addNoticeBoardIdChangeListener={name:"noticeBoardDetailIdChange",callback:(t,e)=>{this.#Xe.noticeBoardDetailList.replaceChildren(),this.refresh()}};let t=Object.values(Qe.tools).map((t=>t.toolHandler.toolButton));document.addEventListener("selectionchange",(e=>{if(document.activeElement.constructor!=Qe)return;let n=window.getSelection();0!=n.rangeCount&&(n.isCollapsed?this.#Xe.toolbar.remove():(this.#Xe.noticeBoardDetailContainer.append(this.#Xe.toolbar),this.#Xe.toolbar.replaceChildren(...t),Ge.processingElementPosition(this.#Xe.toolbar,window.getSelection().getRangeAt(0).getBoundingClientRect())))})),this.#Xe.noticeBoardDetailContainer.addEventListener("scroll",(()=>{0!=this.#Xe.toolbar.childElementCount&&Ge.processingElementPosition(this.#Xe.toolbar,window.getSelection().getRangeAt(0).getBoundingClientRect())})),window.addEventListener("resize",(t=>{0!=this.#Xe.toolbar.childElementCount&&Ge.processingElementPosition(this.#Xe.toolbar,window.getSelection().getRangeAt(0).getBoundingClientRect())}))}createItemElement(t){return new Promise((e=>{let n=Object.assign(document.createElement("li"),{className:"notice_board_detail_item"});n.dataset.is_not_visible_target="",n.style.minHeight=2*(parseInt(window.getComputedStyle(document.body).fontSize)||16)+"px",e(this.#Qe(n,t))}))}#Qe(t,e){return new Promise((n=>{let o,i=Object.assign(document.createElement("button"),{className:"notice_board_detail_item_add_content",textContent:"+"}),s=new Qe(t),a=Object.assign(document.createElement("span"),{className:"notice_board_detail_item_position_change_icon pointer",textContent:"〓"}),r=Ge.jsonToSaveElementDataset(e,t);if(e.content){let{content:n}=e;delete e.content,r.then((()=>{t.removeAttribute("data-content"),Qe.parseLowDoseJSON(s,n).then((()=>{s.contentEditable=!1,t.append(s);let e=setInterval((()=>{s.isConnected&&(clearInterval(e),s.isEmpty&&(s.remove(),t.prepend(i)))}),50)}))}))}else t.prepend(i),s.startFirstLine();t.onmouseenter=()=>{i.isConnected?i.classList.add("active"):(t.draggable=!1,s.isEmpty||t.append(a))},t.onmouseleave=()=>{i.isConnected?i.classList.remove("active"):a.isConnected&&a.remove()},a.onmousemove=()=>{t.draggable=!0},a.onmouseover=()=>{t.draggable=!0},a.onmouseout=()=>{t.draggable=!1},i.onclick=e=>{s.contentEditable=!0,s.firstLine.innerText="\n",s.isConnected||(t.append(s),t.append(a),i.remove(),window.getSelection().setPosition(s,s.childNodes.length))},s.onclick=()=>{"false"==s.contentEditable&&(s.contentEditable=!0,s.isEmpty&&(s.firstLine.innerText="\n"),window.getSelection().setPosition(s,s.childNodes.length))},s.onfocus=t=>{o=s.innerHTML};let l=!1;s.onblur=e=>{if(!l&&(s.matches(":hover")||this.#Xe.toolbar.matches(":hover")||document.activeElement==s||s.hasAttribute("data-is_update")))return void e.preventDefault();if(l&&(l=!l),this.#Xe.toolbar.remove(),s.contentEditable=!1,e.relatedTarget?.hasAttribute("data-tool_status")||this.#Xe.toolbar.remove(),s.isEmpty)s.replaceChildren(),s.remove(),a.remove(),t.prepend(i),t.matches(":hover")?i.classList.add("active"):i.classList.remove("active");else if(o==s.innerHTML)return;o=s.innerHTML;let n={id:t.dataset.id,noticeBoardId:fe.noticeBoardId,roomId:Ke.roomId,workspaceId:Je.workspaceId,orderSort:t.dataset.order_sort};this.#tn(s,n)},s.onkeydown=t=>{let{altKey:e,ctrlKey:n,shiftKey:o,key:i}=t;if("Enter"==i&&(e||n||o)){let o;t.preventDefault(),o=e?Ve.LineBreakMode.NEXT_LINE_FIRST:n?Ve.LineBreakMode.NEXT_LINE_LAST:Ve.LineBreakMode.NO_CHANGE,s.lineBreak(o)}else"Enter"==i&&(t.preventDefault(),l=!0,s.blur())},n(t)}))}async#tn(t,e){let n=[];t.contentEditable=!1,Qe.getLowDoseJSON(t,{afterCallback:t=>{if(t.tagName!=He.toolHandler.defaultClass&&t.tagName!=ze.toolHandler.defaultClass&&t.tagName!=Fe.toolHandler.defaultClass)return;if(t.data.hasOwnProperty("is_upload_end"))return;let e,o=t.node,i=o.selectedFile;t.data.is_loading="",console.log(o,i),e=t.tagName==He.toolHandler.defaultClass?"IMAGE":t.tagName==ze.toolHandler.defaultClass?"VIDEO":"FILE",n.push(new Promise((async n=>{let{name:o,size:s,lastModified:a,contentType:r,newFileName:l}=await Ge.underbarNameToCamelName(t.data),c=`${Ke.roomId}:${Je.workspaceId}:${o}:${Ye.accountInfo.accountName}`,d=await Ze.callS3PresignedUrl(window.myAPI.s3.generateSecurityPutObjectPresignedUrl,c,{newFileName:l,fileType:e,uploadType:"NOTICE"}).then((e=>{if(!e)return;let{data:n,encDncKeyPair:o}=e;return t.data.new_file_name=n.newFileName,Promise.all([Ze.convertBase64ToBuffer(n.encryptionKey).then((async t=>Ze.decryptMessage(o.privateKey,t,Ze.secretAlgorithm).then((t=>String.fromCharCode(...new Uint8Array(t)))))),Ze.convertBase64ToBuffer(n.encryptionMd).then((async t=>Ze.decryptMessage(o.privateKey,t,Ze.secretAlgorithm).then((t=>String.fromCharCode(...new Uint8Array(t))))))]).then((async([t,e])=>{let o=await Ze.fetchPutObject(n.presignedUrl,t,e,i.files[0]);if(200==o.status||201==o.status)return!0}))}));if(console.log(d),!d)return void n();let h=`${Ke.roomId}:${Je.workspaceId}:${t.data.new_file_name}:${Ye.accountInfo.accountName}`;Ze.callS3PresignedUrl(window.myAPI.s3.generateSecurityGetObjectPresignedUrl,h,{fileType:e,uploadType:"NOTICE"}).then((e=>{if(!e)return;let{data:o,encDncKeyPair:i}=e;t.data.url=o.presignedUrl,delete t.data.base64,t.data.upload_type="NOTICE",n(t)}))})))}}).then((t=>{e.content=JSON.stringify(t),0==e.content.length&&(e.content=void 0),window.myAPI.noticeBoard.createNoticeBoardDetail(e).then((o=>{let{data:i}=o;this.innerText="",Promise.all(n).then((n=>{console.log(n),0!=n.length&&(n.forEach((t=>{delete t.data.is_loading,t.data.is_upload_end="",t.data.room_id=e.roomId,t.data.workspace_id=e.workspaceId})),e.content=JSON.stringify(t),0==e.content.length&&(e.content=void 0),window.myAPI.noticeBoard.createNoticeBoardDetail(e).then((t=>{})))}))}))}))}#en(){return window.myAPI.noticeBoard.searchNoticeBoardDetailList({workspaceId:Je.workspaceId,roomId:Ke.roomId,noticeBoardId:fe.noticeBoardId})}#Ze(t,e,n,o,i){this.#Ke.hasOwnProperty(e)||(this.#Ke[e]={}),this.#Ke[e].hasOwnProperty(n)||(this.#Ke[e][n]={}),this.#Ke[e][n].hasOwnProperty(o)||(this.#Ke[e][n][o]={}),this.#Ke[e][n][o][i]=t}async refresh(){let t=Object.values(this.#Ke[Je.workspaceId]?.[Ke.roomId]?.[fe.noticeBoardId]||{}).sort(((t,e)=>Number(e.dataset.order_sort)-Number(t.dataset.order_sort)));0!=t.length?(this.#Ye.addPositionChangeEvent(t),this.#Xe.noticeBoardDetailList.replaceChildren(...t)):this.#en()}get element(){return this.#Ge}get elementMap(){return this.#Xe}};class en{#nn;#on;#in;#sn;isOpen=!1;#an;#rn;#ln;constructor({dbName:t,columnInfo:e,storeName:n,keyPathNameList:o=[],pkAutoIncrement:i=!0}){if(!t)throw new Error("dbName is undefined");if(!e)throw new Error("columnInfo is undefined");if(!n)throw new Error("storeName is undefined");if(0==o.length)throw new Error("keyPathName is undefined");if(o.filter((t=>e[t])).length!=o.length)throw new Error("invalid key path name");if(1==i&&o.length>1)throw new Error("multiple key not use autoIncrement : true");this.#nn=t,this.#on=e,this.#in=n,this.#an=JSON.stringify(Object.entries(e).reduce(((t,[e,n],o)=>(t[e]=void 0,t)),{})),this.#rn=o,this.#ln=i}open(){return new Promise(((t,e)=>{const n=indexedDB.open(this.DB_NAME);n.onupgradeneeded=t=>this.upgradeneeded(t,{}),n.onsuccess=e=>{this.isOpen=!0,this.#sn=e.target.result;let o=!Object.entries(this.#sn.objectStoreNames).find((([t,e])=>e==this.DB_STORE_NAME)),i=!1;if(!o){let t=this.#sn.transaction(this.DB_STORE_NAME,"readwrite").objectStore(this.DB_STORE_NAME),e=Object.entries(t.indexNames).reduce(((t,[e,n])=>(t[n]=e,t)),{});i=-1!=Object.entries(e).findIndex((([t,e])=>!this.#on[t]))||-1!=Object.entries(this.#on).findIndex((([t,n])=>!e[t]))}if(o||i){let e=Number(this.#sn.version)+1;console.log(this.#in,e),console.log(n),this.close().then((n=>{const i=indexedDB.open(this.DB_NAME,e);console.log(i),i.onupgradeneeded=t=>this.upgradeneeded(t,{isNewAddStore:o}),i.onsuccess=e=>{this.isOpen=!0,this.#sn=e.target.result,t(this.isOpen)},i.onblocked=t=>{console.error(t)}}))}else t(this.isOpen)},n.onblocked=t=>{console.log(t)},n.onerror=t=>{console.log(t),this.isOpen=!1,"VersionError"==t.target.error.name?e(new Error("VersionError: DB 버전을 수동으로 입력해선 안됩니다.")):(console.error(t),e(new Error(`unknownError ${t}`)))}}))}close(){return new Promise((t=>{this.#sn&&this.isOpen||t(!1),this.#sn.onabort=t=>console.log(t),this.#sn.onerror=t=>console.log(t),this.#sn.close(),this.isOpen=!1,this.#sn.onclose=e=>{this.isOpen=!1,t(!0)},t(!0)}))}get DB_NAME(){return this.#nn}get DB_STORE_NAME(){return this.#in}get COLUMN_INFO(){return this.#on}get template(){return JSON.parse(this.#an)}upgradeneeded(t,{isNewAddStore:e=!1}){let n;if(t.newVersion==t.oldVersion||0==t.oldVersion||e){let e=this.#ln||1==this.#rn.length?this.#rn[0]:this.#rn;n=t.target.result.createObjectStore(this.DB_STORE_NAME,{keyPath:e,autoIncrement:this.#ln}),Object.entries(this.#on).forEach((([t,e])=>n.createIndex(...e)))}else{n=t.target.transaction.objectStore(this.DB_STORE_NAME);let e=Object.entries(n.indexNames),o=e.reduce(((t,[e,n])=>(t[n]=e,t)),{});Object.entries(this.#on).forEach((([t,e])=>{o[e[0]]||n.createIndex(...e)})),e.forEach((([t,e])=>{this.#on[e]||n.deleteIndex(e)}))}}addItem(t=this.#an){return new Promise(((e,n)=>{this.isOpen&&this.#sn||n(new Error("indexedDB가 열려있지 않습니다."));let o=this.#sn.transaction(this.DB_STORE_NAME,"readwrite"),i=o.objectStore(this.DB_STORE_NAME).put(t);i.onsuccess=t=>{o.commit()},i.onerror=t=>{console.log(t)},o.oncomplete=t=>{t.type,e(t)},o.onerror=t=>{console.log(t),n(new Error("commit error"))}}))}getItem(t){return new Promise(((e,n)=>{let o=this.#sn.transaction(this.DB_STORE_NAME,"readonly").objectStore(this.DB_STORE_NAME).get(t);o.onerror=t=>{console.error(t),n(o)},o.onsuccess=t=>{e(o)}}))}getList({pageNum:t=1,pageSize:e=5,callback:n,readOption:o="readonly"}={}){return new Promise(((i,s)=>{let a=e*(t-1),r=0!=a,l=0,c=this.#sn.transaction(this.DB_STORE_NAME,o),d=c.objectStore(this.DB_STORE_NAME),h={data:[],event:void 0};d.openCursor().onsuccess=t=>{const o=t.target.result;if(!o)return;if(r)return r=!r,void o.advance(a);n instanceof Function&&n(o);let i=o.value;h.data.push(i),l+=1,l>=e||o.continue()},c.oncomplete=t=>(h.event=t,i(h)),c.onerror=t=>s(t),c.onabort=t=>s(t)}))}deleteList(...t){return 0==t.length?Promise.resolve():new Promise(((e,n)=>{let o=this.#sn.transaction(this.DB_STORE_NAME,"readwrite"),i=o.objectStore(this.DB_STORE_NAME),s={successCount:0,failedCount:0};t.forEach((t=>{let e=i.delete([t]);e.onsuccess=t=>{s.successCount+=1,o=t.target.transaction},e.onerror=t=>{s.failedCount+=1}})),o.commit(),o.oncomplete=t=>(s.event=t,e(s)),o.onerror=t=>n(t),o.onabort=t=>n(t)}))}deleteDatabase(t){return new Promise(((e,n)=>{let o=indexedDB.deleteDatabase(t);o.onerror=t=>{console.error(t),n(t)},o.onsuccess=t=>{console.log(t),e(t)}}))}}je.unit="rem",je.min=.1,je.max=5,je.weight=.1;class nn{#cn=Object.assign(document.createElement("div"),{className:"layer_dim"});#dn;#an=(()=>{let t=Object.assign(document.createElement("div"),{className:"layer_container"}),e=Object.assign(document.createElement("div"),{className:"layer_container_box"});return this.#dn=e,this.#cn.append(e),e.append(t),t})();#hn=()=>{};#un=!1;constructor(){new MutationObserver((t=>{t.forEach((t=>{if(t.target.hasAttribute("open")){document.body.append(this.#cn);let t=setInterval((()=>{this.#cn.isConnected&&(this.#cn.style.opacity=1,this.#dn.style.opacity=1,clearInterval(t))}),50);this.onOpenCloseCallback instanceof Function&&this.onOpenCloseCallback("open")}else this.#cn.remove()}))})).observe(this.#cn,{attributeFilter:["open"],attributeOldValue:!0}),window.addEventListener("keyup",(t=>{this.#dn.isConnected&&"Escape"==t.key&&this.close()})),this.#cn.onclick=t=>{this.#un||t.composedPath().some((t=>t==this.#dn))||(this.#un=!0,this.close())}}set onOpenCloseCallback(t){this.#hn=t}get onOpenCloseCallback(){return this.#hn}get dim(){return this.#cn}get container(){return this.#an}close(t){this.#dn.style.opacity="",this.#cn.style.opacity="",this.#cn.ontransitionend="",new Promise((e=>{t instanceof Function&&t(),e()})),new Promise((t=>{this.onOpenCloseCallback instanceof Function&&this.onOpenCloseCallback("close"),t()})),this.#cn.ontransitionend=()=>{this.#cn.removeAttribute("open"),this.#dn.ontransitionend="",this.#cn.ontransitionend="",this.#un=!1}}open(t){this.#cn.setAttribute("open",""),new Promise((e=>{t instanceof Function&&t(),e()}))}}class on extends nn{#pn=Object.assign(document.createElement("div"),{innerHTML:'\n\t\t\t<style>\n\t\t\t\tform#give_admin_view{\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tgap: 2vh;\n\t\t\t\t\tposition: relative;\n\t\t\t\t}\n\t\t\t\t#give_admin_view_account_list{\n\t\t\t\t\twidth: 80%;\n\t\t\t\t\theight: 50vh;\n\t\t\t\t\toverflow-y: auto;\n\t\t\t\t\tmax-height: 1%;\n\t\t\t\t}\n\n\t\t\t\t#give_admin_view_account_list::-webkit-scrollbar{\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\t\t\t\t#give_admin_view_account_list:hover::-webkit-scrollbar{\n\t\t\t\t\tdisplay: initial;\n\t\t\t\t\twidth: 8px;\n\t\t\t\t}\n\t\t\t\t#give_admin_view_account_list::-webkit-scrollbar-track{\n\t\t\t\t\tbackground: #00000000;\n\t\t\t\t}\n\t\t\t\t#give_admin_view_account_list::-webkit-scrollbar-thumb {\n\t\t\t\t\tbackground: #d8a1b6;\n\t\t\t\t\tborder-radius: 100px;\n\t\t\t\t\tbox-shadow: inset 0 0 5px #000000;\n\t\t\t\t}\n\t\t\t\t#give_admin_view_account_list::-webkit-scrollbar-thumb:hover {\n\t\t\t\t\t/*background: #44070757;*/\n\t\t\t\t\tbackground: #893e3e\n\t\t\t\t}\n\n\t\t\t\t#give_admin_view_account_list > li{\n\t\t\t\t\tborder-top: outset 1px;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t}\n\t\t\t\t#give_admin_view_account_list > li > input.add_account_check{\n\t\t\t\t}\n\t\t\t\t#give_admin_view_account_list > li .create_room_view_department, \n\t\t\t\t#give_admin_view_account_list > li .create_room_view_job_grade,\n\t\t\t\t#give_admin_view_account_list > li .create_room_view_account_name{\n\t\t\t\t\tcolor: #b1b1b1;\n\t\t\t\t}\n\t\t\t\t#give_admin_view_account_list > li .create_room_view_department,\n\t\t\t\t#give_admin_view_account_list > li .create_room_view_account_name{\n\t\t\t\t\tfont-weight: lighter;\n\t\t\t\t}\n\t\t\t\t#give_admin_view_account_list > li .create_room_view_separator{\n\t\t\t\t\tcolor: #6937a16b;\n\t\t\t\t}\n\t\t\t\t/*#give_admin_view_account_list > li .create_room_view_job_grade,*/\n\t\t\t\t#give_admin_view_account_list > li .create_room_view_full_name,\n\t\t\t\t#give_admin_view_account_list > li .create_room_view_separator{\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t}\n\t\t\t\t#give_admin_view_account_list > li .create_room_view_full_name{\n\t\t\t\t\tcolor: #789bb9b8;\n\t\t\t\t}\n\t\t\t\t#give_admin_view_account_list > li .create_room_view_account_info{\n\t\t\t\t\twidth: 100%\n\t\t\t\t}\n\t\t\t</style>\n\t\t\t<form id="give_admin_view">\n\t\t\t\t<div>\n\t\t\t\t\t<label for="give_admin_view_search_user">Please enter the users you want to invite.</label>\n\t\t\t\t\t<input type="search" id="give_admin_view_search_user" name="fullName"/>\n\t\t\t\t</div>\n\t\t\t\t<ul id="give_admin_view_account_list">\n\t\t\t\t</ul>\n\t\t\t\t<div>\n\t\t\t\t\t<button type="button" id="give_admin_view_button">Give Admin</button>\n\t\t\t\t</div>\n\t\t\t</from>\n\t\t'});#mn=this.#pn.querySelector("#give_admin_view_account_list");page=0;size=10;#gn=[];form=this.#pn.querySelector("#give_admin_view");#fn=new IntersectionObserver(((t,e)=>{t.forEach((t=>{t.isIntersecting&&(this.page+=1,this.callData(this.page,this.size,Je.workspaceId,this.form.fullName.value).then((t=>{this.createPage(t).then((t=>this.addListItemVisibleEvent(t))).then((e=>{(this.page>=t.totalPages||0==e.length)&&this.#fn.disconnect()}))})))}))}),{threshold:.1,root:document});#yn={};constructor(t){super(t),super.container.append(this.#pn),Je.addWorkspaceIdChangedListener={name:"giveAdminView",callback:t=>{this.workspaceId=t.workspaceId},runTheFirst:!0},this.form.onsubmit=t=>{t.preventDefault()},this.form.give_admin_view_search_user.onkeydown=t=>{if("Enter"!=t.key)return;let e=this.form.give_admin_view_search_user.value;this.reset(),this.callData(this.page,this.size,Je.workspaceId,e).then((t=>{this.createPage(t).then((t=>this.addListItemVisibleEvent(t)))}))},this.form.give_admin_view_search_user.oninput=t=>{""==this.form.give_admin_view_search_user.value&&(this.reset(),this.callData(this.page,this.size,Je.workspaceId).then((t=>{this.createPage(t).then((t=>this.addListItemVisibleEvent(t)))})))},this.form.give_admin_view_button.onclick=t=>{Object.values(this.#yn).forEach((t=>{console.log(t),window.myAPI.workspace.createGiveAdmin({id:t.id,workspaceId:t.workspace_id}).then((t=>{console.log(t)}))})),this.#yn={},super.close()}}callData(t,e,n,o){return console.log({page:t,size:e,workspaceId:n,fullName:o}),window.myAPI.workspace.searchWorkspaceInAccount({page:t,size:e,workspaceId:n,fullName:o}).then(((t={})=>(console.log(t),t.data)))}createPage(t,e=""){return new Promise((e=>{let{content:n=[]}=t||{};0==n.length&&e(n);let o=n.filter((t=>!t.isAdmin)).map((t=>{let{id:e,accountName:n,fullName:o,workspaceId:i,jobGrade:s,department:a}=t,r=a?`<small class="create_room_view_department">${a}</small>`:"",l=s?`${a&&s?'<span class="create_room_view_separator">/&nbsp</span>':""}<small class="create_room_view_job_grade">${s}</small>`:"",c=Object.assign(document.createElement("li"),{className:"pointer",innerHTML:`\n\t\t\t\t\t\t<div class="create_room_view_account_info">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<span class="create_room_view_full_name">${o}</span>\n\t\t\t\t\t\t\t\t<span class="create_room_view_account_name">(${n})</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t${r}\n\t\t\t\t\t\t\t\t${l}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<input type="checkbox" name="add_account_check" class="add_account_check pointer" ${this.#yn.hasOwnProperty(n)?"checked":""}/>\n\t\t\t\t\t`});return Object.assign(c.dataset,{id:e,account_name:n,full_name:o,workspace_id:i,job_grade:s,department:a}),this.#Qe(c),c}));this.#gn.push(...o),this.#mn.replaceChildren(...this.#gn),e(o)}))}addListItemVisibleEvent(t){return new Promise((e=>{0==t.length&&e(t),this.#fn.disconnect(),this.#fn.observe(t.at(-1)),e(t)}))}#Qe(t){return new Promise((e=>{let n=t.querySelector('[name="add_account_check"]');t.onclick=t=>{t.target!==n&&n.click()},n.onchange=e=>{n.checked?this.#yn[t.dataset.account_name]=Object.assign({},t.dataset):delete this.#yn[t.dataset.account_name]},e(t)}))}reset(){this.page=0,this.#gn=[],this.#fn.disconnect(),this.#mn.replaceChildren()}}new class{#bn=Object.assign(document.createElement("div"),{className:"simple_option"});#an=Object.assign(document.createElement("ul"),{className:"simple_option_container"});#wn;#vn;#En;#Cn=this.#xn();#Sn=this.#_n();#kn;#On=new on(this);constructor(){window.myAPI.getOption("componentOption").then((t=>{this.componentOption=t?.OPTION_VALUE||"responsive"})),window.myAPI.event.electronEventTrigger.addElectronEventListener("optionChange",(({name:t,value:e})=>{"componentOption"==t&&(this.componentOption=e)}));let t={},{li:e,attendRequest:n,attendRequestFilter:o,attendRequestSearch:i}=this.#Cn;i.oninput=s=>{s.constructor.name==Event.name&&(e.dataset.is_not_leave="");let a=Object.values(t[Je.workspaceId]).filter((t=>t.__filterOption.value.includes(i.value)||t.__filterOption.textContent.includes(i.value)));n.style.minHeight=n.getBoundingClientRect().height+"px",n.replaceChildren(...a),o.replaceChildren(...a.map((t=>t.__filterOption))),n.style.minHeight=""},window.myAPI.event.electronEventTrigger.addElectronEventListener("workspacePermitRequestAccept",(e=>{if(!this.#kn)return;let{content:i=e}=e,s=Object.assign(document.createElement("li"),{className:"attend_request_item",innerHTML:`\n                    <div class="attend_request_item_container">\n                        <div class="attend_request_item_email">\n                            <span>${i.email}</span>\n                        </div>\n                        <div class="attend_request_item_name">\n                            <span>${i.fullName}</span>\n                        </div>\n                        <div class="attend_request_item_position">\n                            <span>${i.jobGrade}</span>\n                            <span>${i.department}</span>\n                        </div>\n                    </div>\n                    <div class="attend_request_item_button_wrapper">\n                        <button class="attend_request_item_permit" value="PERMIT">permit</button>\n                        <button class="attend_request_tiem_reject" value="REJECT">reject</button>\n                    </div>\n                `});s.__filterOption=Object.assign(document.createElement("option"),{value:i.fullName,textContent:i.email});let[a,r]=s.querySelectorAll(".attend_request_item_permit, .attend_request_tiem_reject");if([a,r].forEach((t=>{t.onclick=()=>{this.#kn&&window.myAPI.workspace.createPermitWokrspaceInAccount({id:i.id,workspaceId:i.workspaceId,permitType:t.value,accountName:i.accountName})}})),t[i.workspaceId]||(t[i.workspaceId]={}),t[i.workspaceId][i.accountName]=s,Je.workspaceId==i.workspaceId){let e=Object.values(t[i.workspaceId]);n.replaceChildren(...e),o.replaceChildren(...e.map((t=>t.__filterOption)))}})),window.myAPI.event.electronEventTrigger.addElectronEventListener("workspacePermitResultAccept",(e=>{if(!this.#kn)return;let{content:o=e}=e;if(Je.workspaceId==o.workspaceId){delete t[o.workspaceId][o.accountName];let e=Object.values(t[o.workspaceId]);n.replaceChildren(...e),n.replaceChildren(...e.map((t=>t.__filterOption)))}})),Je.addWorkspaceIdChangedListener={name:"simpleOptuon",callback:()=>{window.myAPI.workspace.getIsAdmin({workspaceId:Je.workspaceId}).then((t=>{0==t.code&&(this.#kn=t.data),this.#kn&&window.myAPI.workspace.searchPermitRequestList({workspaceId:Je.workspaceId}).then((t=>{console.log("result >>> ",t)})),this.#bn.isConnected&&this.open()}))},runTheFirst:!1},this.#On.onOpenCloseCallback=t=>{this.#On.reset(),"open"==t&&this.#On.callData(this.#On.page,this.#On.size,Je.workspaceId,this.#On.form.fullName.value).then((t=>{this.#On.createPage(t).then((t=>{this.#On.addListItemVisibleEvent(t)}))}))}}#Ln(){let t=Object.assign(document.createElement("li"),{}),e=Object.assign(document.createElement("span"),{textContent:"Component Option"}),n=Object.assign(document.createElement("div"),{className:"component_option_container",innerHTML:`\n                <div>\n                    <label for="component_option_responsive">Responsive</label>\n                    <input type="radio" name="component_option" id="component_option_responsive" value="responsive" ${"responsive"==this.#wn?"checked":""}/>\n                        \n                </div>\n                <div>\n                    <label for="component_option_nomal">Nomal</label>\n                    <input type="radio" name="component_option" id="component_option_nomal" value="nomal" ${"nomal"==this.#wn?"checked":""}/>\n                </div>\n            `});return n.onchange=t=>{"radio"==t.target.type&&(this.componentOption=t.target.value,window.myAPI.setOption({name:"componentOption",value:this.#wn}),this.open())},t.onmouseenter=()=>{t.append(n),this.#Nn(n)},t.onmouseleave=()=>{n.remove()},t.onclick=o=>{o.target!=t&&o.target!=e||(n.isConnected?n.remove():(t.append(n),this.#Nn(n)))},t.append(e),t}#Tn(){if(!Ye.accountInfo)return"";console.log(Ye.accountInfo);let t=Object.assign(document.createElement("li"),{}),e=Object.assign(document.createElement("span"),{textContent:"Edit Profile"});t.append(e);let n=Object.assign(document.createElement("form"),{id:"simple_profile_container",innerHTML:`\n            <div class="simple_profile_input_container">\n                <img class="profile_image" src="${Ye.accountInfo.profileImage}"/>\n                <input id="simple_profile_image" type="file" accept="image/*">\n            </div>\n            <div class="simple_profile_input_container">\n                <label for="simple_profile_full_name">Full Name</label>\n                <input type="text" id="simple_profile_full_name" name="fullName" value="${Ye.accountInfo?.fullName||""}"/>\n            </div>\n            <div class="simple_profile_input_container">\n                <label for="simple_profile_job_grade">Job Grade</label>\n                <input type="text" id="simple_profile_job_grade" name="jobGrade" value="${Ye.accountInfo?.jobGrade||""}"/>\n            </div>\n            <div class="simple_profile_input_container">\n                <label for="simple_profile_department">Department</label>\n                <input type="text" id="simple_profile_department" name="department" value="${Ye.accountInfo?.department||""}"/>\n            </div>\n            <br/>\n            <div class="simple_profile_button_container">\n                <button type="submit" id="simple_profile_apply_button">apply</button>\n                <button type="button" id="simple_profile_cancel_button">cancel</button>\n            </div>\n            `}),o=n.simple_profile_image,i=n.querySelector(".profile_image"),s=[];return o.oninput=e=>{console.log(e),e.constructor.name==Event.name&&(t.dataset.is_not_leave=""),i.src=URL.createObjectURL(o.files[0],o.files[0].type),s.push(i.src)},n.onsubmit=async t=>{t.preventDefault();let e,i=n.simple_profile_full_name.value,a=n.simple_profile_job_grade.value,r=n.simple_profile_department.value;if(Ye.accountInfo.fullName==i&&Ye.accountInfo.jobGrade==a&&Ye.accountInfo.department==r&&0==o.files.length)return void Ge.showToastMessage(["변동 사항이 없습니다."]);let l=!1;0==o.files.length?e=Ye.accountInfo.profileImage:(e=await window.myAPI.s3.generateGetObjectPresignedUrl({fileName:o.files[0].name,uploadType:"PROFILE"}).then((async t=>{if(0==t.code)return await fetch(t.data,{method:"PUT",headers:{"Content-Encoding":"base64","Content-Type":"application/octet-stream"},body:o.files[0]}).then((e=>{if(200!=e.status&&201!=e.status)throw new Error(e.status);return t.data.split("?")[0]})).catch((t=>{console.error(t)}));Ge.showToastMessage(t.message.split("\n"))})),e||(e=Ye.accountInfo.profileImage,l=!0),o.files=(new DataTransfer).files),window.myAPI.account.updateSimpleAccountInfo({fullName:i,jobGrade:a,department:r,profileImage:e}).then((t=>{console.log("result updateSimpleAccountInfo ::: ",t),Ye.accountInfo.fullName!=i&&window.myAPI.room.createMySelfRoom({workspaceId:Je.workspaceId}),Ye.searchAccountInfo(),s.forEach((async t=>{URL.revokeObjectURL(t)})),l?Ge.showToastMessage([t.message,"그러나 프로필 이미지 변경은 실패하였습니다."]):Ge.showToastMessage([t.message]),n.remove()}))},n.simple_profile_cancel_button.onclick=()=>{n.remove()},t.append(e),t.onmouseenter=()=>{document.activeElement!=o&&(t.hasAttribute("data-is_not_leave")?t.removeAttribute("data-is_not_leave"):(t.append(n),this.#Nn(n)))},t.onmouseleave=()=>{document.activeElement!=o&&(t.hasAttribute("data-is_not_leave")?t.removeAttribute("data-is_not_leave"):n.remove())},t.onclick=o=>{o.target!=t&&o.target!=e||(n.isConnected?n.remove():(t.append(n),this.#Nn(n)))},t}#xn(){let t=Object.assign(document.createElement("li"),{}),e=Object.assign(document.createElement("span"),{textContent:"Attend Request"}),n=Object.assign(document.createElement("div"),{className:"attend_request_wrapper",innerHTML:'\n                <div class="attend_request_search_container">\n                    <input type="search" placeholder="search user" list="attend_request_filter" class="attend_request_search"/>\n                    <datalist id="attend_request_filter" class="attend_request_filter">\n                    </datalist>\n                </div>\n            '}),o=n.querySelector(".attend_request_search"),i=n.querySelector(".attend_request_filter"),s=Object.assign(document.createElement("ul"),{className:"attend_request_container list_scroll list_scroll-y"});return n.append(s),t.append(e),t.onmouseenter=()=>{document.activeElement!=o&&(t.hasAttribute("data-is_not_leave")?t.removeAttribute("data-is_not_leave"):(t.append(n),this.#Nn(n)))},t.onmouseleave=e=>{document.activeElement!=o&&(t.hasAttribute("data-is_not_leave")?t.removeAttribute("data-is_not_leave"):n.remove())},t.onclick=o=>{o.target!=t&&o.target!=e||(n.isConnected?n.remove():(t.append(n),this.#Nn(n)))},{li:t,title:e,attendRequest:s,attendRequestWrapper:n,attendRequestSearch:o,attendRequestFilter:i}}#_n(){let t=Object.assign(document.createElement("li"),{className:"pointer"}),e=Object.assign(document.createElement("span"),{textContent:"Give Admin"});return t.append(e),t.onclick=()=>{this.#On.open()},{li:t,title:e}}#Bn(){let t=Object.assign(document.createElement("li"),{className:"pointer"}),e=Object.assign(document.createElement("span"),{textContent:"Logout"});return t.append(e),t.onclick=()=>{window.myAPI.logout().then((()=>{window.myAPI.pageChange.changeWokrspacePage()}))},t}#Nn(t){t.style.display="none";let e=setInterval((()=>{if(!t.isConnected)return;t.style.display="",clearInterval(e),t.getBoundingClientRect().left<0&&(t.style.left="100%"),t.getBoundingClientRect().right>window.outerWidth&&(t.style.left="0%",t.style.right="0%","fixed"!=window.getComputedStyle(t).position&&(t.style.top="100%"))}),50)}set componentOption(t){this.#wn=t,"nomal"==this.#wn?document.body.parentElement.style.fontSize="100%":document.body.parentElement.style.fontSize=""}get componentOption(){return this.#wn}async open(){document.body.append(this.#bn),this.#bn.append(this.#an);let t=[this.#Ln(),this.#Tn()];Je.workspaceId&&this.#kn&&(t.push(this.#Cn.li),t.push(this.#Sn.li)),t.push(this.#Bn()),this.#an.replaceChildren(...t)}close(){this.#bn.remove()}get wrap(){return this.#bn}};window.myAPI=ge,new class{#Pn=864e5;constructor(t){window.addEventListener("load",(async()=>{const t=new en({dbName:"fileDB-main-page",storeName:"s3Memory-main-page",columnInfo:{fileName:["fileName","fileName",{unique:!0}],originFileName:["originFileName","originFileName"],fileData:["fileData","fileData"],lastModified:["lastModified","lastModified"],uploadType:["uploadType","uploadType"],roomId:["roomId","roomId"],workspaceId:["workspaceId","workspaceId"]},keyPathNameList:["fileName"],pkAutoIncrement:!1}),e=t.open(),n=async n=>{if(n.hasAttribute("data-is_loading")){let t=n.querySelector("[data-upload_loading]");return t?(t.className="upload_loading",t.querySelector("[data-status_text_elipsis]").className="upload_loading"):(t=Object.assign(document.createElement("div"),{className:"upload_loading",innerHTML:'\n\t\t\t\t\t\t\t<div class="upload_loading_container">\n\t\t\t\t\t\t\t\t<span>컨텐츠를 업로드 중입니다</span>\n\t\t\t\t\t\t\t\t<span class="status_text_elipsis" data-status_text_elipsis></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t'}),t.dataset.upload_loading=""),void n.append(t)}let o;o=n.constructor==He?"IMAGE":n.constructor==ze?"VIDEO":"FILE";const i=await new Promise((o=>{e.then((()=>{new Promise((e=>{t.getList({pageNum:1,pageSize:99999,readOption:"readwrite",callback:t=>{t.value.lastModified<(new Date).getTime()-this.#Pn&&t.delete()}}).then((t=>{e()})).catch((t=>{console.error(t),e()}))})).then((()=>{t.getItem(n.dataset.new_file_name).then((t=>{o(t)}))}))}))}));if(i.result){let t=window.URL.createObjectURL(i.result.fileData,n.dataset.content_type);return n.dataset.url=t,void(n.image?n.image.src=t:n.video?n.video.src=t:n.resourcesUrl=t)}new Promise((t=>{let{size:e,rank:o,rankText:i}=Ge.shortenBytes(n.dataset.size);if(e>=10&&o>=2){let o=n.querySelector("[data-file_preview]");o?(o.querySelector("[data-file_preview_container]").className="file_preview_container",o.querySelector("[data-file_preview_button]").className="file_preview_button",o.className="file_preview"):(o=Object.assign(document.createElement("div"),{className:"file_preview",innerHTML:`\n\t\t\t\t\t\t\t\t<div class="file_preview_container" data-file_preview_container>\n\t\t\t\t\t\t\t\t\t<div>10MB 이상의 파일은 당신의 데이터를 위해 미리보기를 제공하지 않습니다.</div>\n\t\t\t\t\t\t\t\t\t<div>미리보기를 클릭시 기능 제공을 위해 임시 저장소에 저장을 시작하며, 이는 추후 자동 삭제의 대상이 됩니다.</div>\n\t\t\t\t\t\t\t\t\t<div>이 파일의 용량 : ${e}${i}</div>\n\t\t\t\t\t\t\t\t\t<button class="file_preview_button" data-file_preview_button type="button">미리보기</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`}),o.dataset.file_preview=""),o.style.display="none",Fe.resourcesCallback=({status:t,resources:e})=>{"error"==t&&(o.style.display="")},o.onclick=t=>{t.stopPropagation()},o.dataset.visibility_not="",n.append(o);let s=o.querySelector(".file_preview_button");s.onclick=e=>{e.stopPropagation(),s.textContent="",s.className="loading_rotate",t(o)}}else t()})).then((i=>{document.body.closest;let s=`${Ke.roomId}:${Je.workspaceId}:${n.dataset.new_file_name}:${n.closest("[data-account_name]")?.dataset.account_name}`;Ze.callS3PresignedUrl(window.myAPI.s3.generateSecurityGetObjectPresignedUrl,s,{uploadType:n.dataset.upload_type,fileType:o}).then((o=>{if(!o)return;let{data:s,encDncKeyPair:a}=o,r=0,l=parseInt(n.dataset.size),c=Object.assign(document.createElement("progress"),{max:100,value:0});if(i){i.querySelector(".file_preview_container").append(c)}return Promise.all([Ze.convertBase64ToBuffer(s.encryptionKey).then((async t=>Ze.decryptMessage(a.privateKey,t,Ze.secretAlgorithm).then((t=>String.fromCharCode(...new Uint8Array(t)))))),Ze.convertBase64ToBuffer(s.encryptionMd).then((async t=>Ze.decryptMessage(a.privateKey,t,Ze.secretAlgorithm).then((t=>String.fromCharCode(...new Uint8Array(t))))))]).then((async([o,a])=>fetch(s.presignedUrl,{method:"GET",headers:{"Content-Encoding":"base64","Content-Type":"application/octet-stream","x-amz-server-side-encryption-customer-algorithm":"AES256","x-amz-server-side-encryption-customer-key":o,"x-amz-server-side-encryption-customer-key-md5":a}}).then((async t=>{if(200!=t.status&&201!=t.status)throw new Error("s3 connect failed");return t.body})).then((t=>{const e=t.getReader();return new ReadableStream({start:t=>function n(){return e.read().then((({done:e,value:o})=>{if(r+=o?.length||0,c.value=r/l*100,!e)return t.enqueue(o),n();t.close()}))}()})})).then((t=>new Response(t))).then((t=>t.blob())).then((async o=>{let i=new Blob([o],{type:n.dataset.content_type});return e.then((async()=>t.addItem({fileName:n.dataset.new_file_name,originFileName:n.dataset.name,fileData:i,lastModified:(new Date).getTime(),uploadType:n.dataset.upload_type,roomId:Ke.roomId,workspaceId:Je.workspaceId}).then((()=>window.URL.createObjectURL(i)))))})).then((t=>{n.image?n.image.src=t:n.video?n.video.src=t:n.resourcesUrl=t,i&&(i.replaceChildren(),i.parentElement.removeChild(i),i.remove())})).catch((t=>{console.error(t),console.error(t.message)}))))}))}))};He.customImageCallback=t=>n(t),ze.customVideoCallback=t=>n(t),Fe.customResourcesCallback=t=>n(t)}));const e=new IntersectionObserver(((t,e)=>{t.forEach((t=>{let{isIntersecting:e,target:n}=t;n.hasAttribute("slot")||n.hasAttribute("data-visibility_not")||(e?(n.style.visibility="",n.style.opacity="",n.dataset.visibility="v"):(n.style.visibility="hidden",n.style.opacity=0,n.dataset.visibility="h"))}))}),{threshold:.01,root:document});new MutationObserver(((t,n)=>{t.forEach((t=>{let{addedNodes:n,removedNodes:o}=t;new Promise((t=>{n.forEach((async t=>{t.nodeType!==Node.ELEMENT_NODE||t.nodeType===Node.ELEMENT_NODE&&t.hasAttribute("data-is_not_visible_target")||t.isContentEditable||new Promise((n=>{e.observe(t),n()}))})),t()})),new Promise((t=>{o.forEach((async t=>{t.nodeType!==Node.ELEMENT_NODE||t.nodeType===Node.ELEMENT_NODE&&t.hasAttribute("data-is_not_visible_target")||t.isContentEditable||new Promise((n=>{e.unobserve(t),n()}))})),t()}))}))})).observe(document,{childList:!0,subtree:!0})}}("multipleNoticeBoard"),window.addEventListener("DOMContentLoaded",(t=>{let e,n=new Promise((t=>{e=t}));window.myAPI.getWorkspaceId().then((t=>{null!=t&&e(t),window.myAPI.event.electronEventTrigger.addElectronEventListener("workspaceChange",(n=>{let o=n.workspaceId;t!=o&&null!=o&&e(o)}))})),n.then((t=>{document.querySelector("#main").append(tn.element),tn.element.dataset.is_resize=!1,tn.element.grow=1,window.myAPI.event.electronEventTrigger.addElectronEventListener("noticeBoardChange",(t=>{fe.noticeBoardId=t.noticeBoardId})),window.myAPI.stream.initWorkspaceStream({workspaceId:t})}))}))})();
//# sourceMappingURL=multipleNoticeBoardViewRenderer.js.map