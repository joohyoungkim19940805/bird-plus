(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function n(e,t){return function(){return e.apply(t,arguments)}}e.r(t),e.d(t,{hasBrowserEnv:()=>te,hasStandardBrowserEnv:()=>ne,hasStandardBrowserWebWorkerEnv:()=>se});const{toString:o}=Object.prototype,{getPrototypeOf:s}=Object,i=(r=Object.create(null),e=>{const t=o.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())});var r;const a=e=>(e=e.toLowerCase(),t=>i(t)===e),l=e=>t=>typeof t===e,{isArray:c}=Array,d=l("undefined");const h=a("ArrayBuffer");const u=l("string"),p=l("function"),m=l("number"),g=e=>null!==e&&"object"==typeof e,f=e=>{if("object"!==i(e))return!1;const t=s(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},y=a("Date"),b=a("File"),w=a("Blob"),v=a("FileList"),E=a("URLSearchParams");function k(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let o,s;if("object"!=typeof e&&(e=[e]),c(e))for(o=0,s=e.length;o<s;o++)t.call(null,e[o],o,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),i=s.length;let r;for(o=0;o<i;o++)r=s[o],t.call(null,e[r],r,e)}}function C(e,t){t=t.toLowerCase();const n=Object.keys(e);let o,s=n.length;for(;s-- >0;)if(o=n[s],t===o.toLowerCase())return o;return null}const S="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,O=e=>!d(e)&&e!==S;const x=(L="undefined"!=typeof Uint8Array&&s(Uint8Array),e=>L&&e instanceof L);var L;const N=a("HTMLFormElement"),I=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),T=a("RegExp"),A=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),o={};k(n,((n,s)=>{let i;!1!==(i=t(n,s,e))&&(o[s]=i||n)})),Object.defineProperties(e,o)},_="abcdefghijklmnopqrstuvwxyz",R="0123456789",P={DIGIT:R,ALPHA:_,ALPHA_DIGIT:_+_.toUpperCase()+R};const j=a("AsyncFunction"),B={isArray:c,isArrayBuffer:h,isBuffer:function(e){return null!==e&&!d(e)&&null!==e.constructor&&!d(e.constructor)&&p(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||p(e.append)&&("formdata"===(t=i(e))||"object"===t&&p(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&h(e.buffer),t},isString:u,isNumber:m,isBoolean:e=>!0===e||!1===e,isObject:g,isPlainObject:f,isUndefined:d,isDate:y,isFile:b,isBlob:w,isRegExp:T,isFunction:p,isStream:e=>g(e)&&p(e.pipe),isURLSearchParams:E,isTypedArray:x,isFileList:v,forEach:k,merge:function e(){const{caseless:t}=O(this)&&this||{},n={},o=(o,s)=>{const i=t&&C(n,s)||s;f(n[i])&&f(o)?n[i]=e(n[i],o):f(o)?n[i]=e({},o):c(o)?n[i]=o.slice():n[i]=o};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&k(arguments[e],o);return n},extend:(e,t,o,{allOwnKeys:s}={})=>(k(t,((t,s)=>{o&&p(t)?e[s]=n(t,o):e[s]=t}),{allOwnKeys:s}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,o)=>{let i,r,a;const l={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),r=i.length;r-- >0;)a=i[r],o&&!o(a,e,t)||l[a]||(t[a]=e[a],l[a]=!0);e=!1!==n&&s(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:i,kindOfTest:a,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const o=e.indexOf(t,n);return-1!==o&&o===n},toArray:e=>{if(!e)return null;if(c(e))return e;let t=e.length;if(!m(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=n.next())&&!o.done;){const n=o.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const o=[];for(;null!==(n=e.exec(t));)o.push(n);return o},isHTMLForm:N,hasOwnProperty:I,hasOwnProp:I,reduceDescriptors:A,freezeMethods:e=>{A(e,((t,n)=>{if(p(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const o=e[n];p(o)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},o=e=>{e.forEach((e=>{n[e]=!0}))};return c(e)?o(e):o(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:C,global:S,isContextDefined:O,ALPHABET:P,generateString:(e=16,t=P.ALPHA_DIGIT)=>{let n="";const{length:o}=t;for(;e--;)n+=t[Math.random()*o|0];return n},isSpecCompliantForm:function(e){return!!(e&&p(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,o)=>{if(g(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[o]=e;const s=c(e)?[]:{};return k(e,((e,t)=>{const i=n(e,o+1);!d(i)&&(s[t]=i)})),t[o]=void 0,s}}return e};return n(e,0)},isAsyncFn:j,isThenable:e=>e&&(g(e)||p(e))&&p(e.then)&&p(e.catch)};function z(e,t,n,o,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),s&&(this.response=s)}B.inherits(z,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:B.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const D=z.prototype,M={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{M[e]={value:e}})),Object.defineProperties(z,M),Object.defineProperty(D,"isAxiosError",{value:!0}),z.from=(e,t,n,o,s,i)=>{const r=Object.create(D);return B.toFlatObject(e,r,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),z.call(r,e.message,t,n,o,s),r.cause=e,r.name=e.name,i&&Object.assign(r,i),r};const $=z;function F(e){return B.isPlainObject(e)||B.isArray(e)}function H(e){return B.endsWith(e,"[]")?e.slice(0,-2):e}function U(e,t,n){return e?e.concat(t).map((function(e,t){return e=H(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const J=B.toFlatObject(B,{},null,(function(e){return/^is[A-Z]/.test(e)}));const W=function(e,t,n){if(!B.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const o=(n=B.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!B.isUndefined(t[e])}))).metaTokens,s=n.visitor||c,i=n.dots,r=n.indexes,a=(n.Blob||"undefined"!=typeof Blob&&Blob)&&B.isSpecCompliantForm(t);if(!B.isFunction(s))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(B.isDate(e))return e.toISOString();if(!a&&B.isBlob(e))throw new $("Blob is not supported. Use a Buffer instead.");return B.isArrayBuffer(e)||B.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,s){let a=e;if(e&&!s&&"object"==typeof e)if(B.endsWith(n,"{}"))n=o?n:n.slice(0,-2),e=JSON.stringify(e);else if(B.isArray(e)&&function(e){return B.isArray(e)&&!e.some(F)}(e)||(B.isFileList(e)||B.endsWith(n,"[]"))&&(a=B.toArray(e)))return n=H(n),a.forEach((function(e,o){!B.isUndefined(e)&&null!==e&&t.append(!0===r?U([n],o,i):null===r?n:n+"[]",l(e))})),!1;return!!F(e)||(t.append(U(s,n,i),l(e)),!1)}const d=[],h=Object.assign(J,{defaultVisitor:c,convertValue:l,isVisitable:F});if(!B.isObject(e))throw new TypeError("data must be an object");return function e(n,o){if(!B.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+o.join("."));d.push(n),B.forEach(n,(function(n,i){!0===(!(B.isUndefined(n)||null===n)&&s.call(t,n,B.isString(i)?i.trim():i,o,h))&&e(n,o?o.concat(i):[i])})),d.pop()}}(e),t};function V(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function q(e,t){this._pairs=[],e&&W(e,this,t)}const K=q.prototype;K.append=function(e,t){this._pairs.push([e,t])},K.toString=function(e){const t=e?function(t){return e.call(this,t,V)}:V;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const G=q;function Z(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Y(e,t,n){if(!t)return e;const o=n&&n.encode||Z,s=n&&n.serialize;let i;if(i=s?s(t,n):B.isURLSearchParams(t)?t.toString():new G(t,n).toString(o),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}const X=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){B.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Q={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ee={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:G,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},te="undefined"!=typeof window&&"undefined"!=typeof document,ne=(oe="undefined"!=typeof navigator&&navigator.product,te&&["ReactNative","NativeScript","NS"].indexOf(oe)<0);var oe;const se="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,ie={...t,...ee};const re=function(e){function t(e,n,o,s){let i=e[s++];const r=Number.isFinite(+i),a=s>=e.length;if(i=!i&&B.isArray(o)?o.length:i,a)return B.hasOwnProp(o,i)?o[i]=[o[i],n]:o[i]=n,!r;o[i]&&B.isObject(o[i])||(o[i]=[]);return t(e,n,o[i],s)&&B.isArray(o[i])&&(o[i]=function(e){const t={},n=Object.keys(e);let o;const s=n.length;let i;for(o=0;o<s;o++)i=n[o],t[i]=e[i];return t}(o[i])),!r}if(B.isFormData(e)&&B.isFunction(e.entries)){const n={};return B.forEachEntry(e,((e,o)=>{t(function(e){return B.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),o,n,0)})),n}return null};const ae={transitional:Q,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",o=n.indexOf("application/json")>-1,s=B.isObject(e);s&&B.isHTMLForm(e)&&(e=new FormData(e));if(B.isFormData(e))return o&&o?JSON.stringify(re(e)):e;if(B.isArrayBuffer(e)||B.isBuffer(e)||B.isStream(e)||B.isFile(e)||B.isBlob(e))return e;if(B.isArrayBufferView(e))return e.buffer;if(B.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return W(e,new ie.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,o){return ie.isNode&&B.isBuffer(e)?(this.append(t,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=B.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return W(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||o?(t.setContentType("application/json",!1),function(e,t,n){if(B.isString(e))try{return(t||JSON.parse)(e),B.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||ae.transitional,n=t&&t.forcedJSONParsing,o="json"===this.responseType;if(e&&B.isString(e)&&(n&&!this.responseType||o)){const n=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw $.from(e,$.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ie.classes.FormData,Blob:ie.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};B.forEach(["delete","get","head","post","put","patch"],(e=>{ae.headers[e]={}}));const le=ae,ce=B.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),de=Symbol("internals");function he(e){return e&&String(e).trim().toLowerCase()}function ue(e){return!1===e||null==e?e:B.isArray(e)?e.map(ue):String(e)}function pe(e,t,n,o,s){return B.isFunction(o)?o.call(this,t,n):(s&&(t=n),B.isString(t)?B.isString(o)?-1!==t.indexOf(o):B.isRegExp(o)?o.test(t):void 0:void 0)}class me{constructor(e){e&&this.set(e)}set(e,t,n){const o=this;function s(e,t,n){const s=he(t);if(!s)throw new Error("header name must be a non-empty string");const i=B.findKey(o,s);(!i||void 0===o[i]||!0===n||void 0===n&&!1!==o[i])&&(o[i||t]=ue(e))}const i=(e,t)=>B.forEach(e,((e,n)=>s(e,n,t)));return B.isPlainObject(e)||e instanceof this.constructor?i(e,t):B.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?i((e=>{const t={};let n,o,s;return e&&e.split("\n").forEach((function(e){s=e.indexOf(":"),n=e.substring(0,s).trim().toLowerCase(),o=e.substring(s+1).trim(),!n||t[n]&&ce[n]||("set-cookie"===n?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)})),t})(e),t):null!=e&&s(t,e,n),this}get(e,t){if(e=he(e)){const n=B.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(e);)t[o[1]]=o[2];return t}(e);if(B.isFunction(t))return t.call(this,e,n);if(B.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=he(e)){const n=B.findKey(this,e);return!(!n||void 0===this[n]||t&&!pe(0,this[n],n,t))}return!1}delete(e,t){const n=this;let o=!1;function s(e){if(e=he(e)){const s=B.findKey(n,e);!s||t&&!pe(0,n[s],s,t)||(delete n[s],o=!0)}}return B.isArray(e)?e.forEach(s):s(e),o}clear(e){const t=Object.keys(this);let n=t.length,o=!1;for(;n--;){const s=t[n];e&&!pe(0,this[s],s,e,!0)||(delete this[s],o=!0)}return o}normalize(e){const t=this,n={};return B.forEach(this,((o,s)=>{const i=B.findKey(n,s);if(i)return t[i]=ue(o),void delete t[s];const r=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(s):String(s).trim();r!==s&&delete t[s],t[r]=ue(o),n[r]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return B.forEach(this,((n,o)=>{null!=n&&!1!==n&&(t[o]=e&&B.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[de]=this[de]={accessors:{}}).accessors,n=this.prototype;function o(e){const o=he(e);t[o]||(!function(e,t){const n=B.toCamelCase(" "+t);["get","set","has"].forEach((o=>{Object.defineProperty(e,o+n,{value:function(e,n,s){return this[o].call(this,t,e,n,s)},configurable:!0})}))}(n,e),t[o]=!0)}return B.isArray(e)?e.forEach(o):o(e),this}}me.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),B.reduceDescriptors(me.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),B.freezeMethods(me);const ge=me;function fe(e,t){const n=this||le,o=t||n,s=ge.from(o.headers);let i=o.data;return B.forEach(e,(function(e){i=e.call(n,i,s.normalize(),t?t.status:void 0)})),s.normalize(),i}function ye(e){return!(!e||!e.__CANCEL__)}function be(e,t,n){$.call(this,null==e?"canceled":e,$.ERR_CANCELED,t,n),this.name="CanceledError"}B.inherits(be,$,{__CANCEL__:!0});const we=be;const ve=ie.hasStandardBrowserEnv?{write(e,t,n,o,s,i){const r=[e+"="+encodeURIComponent(t)];B.isNumber(n)&&r.push("expires="+new Date(n).toGMTString()),B.isString(o)&&r.push("path="+o),B.isString(s)&&r.push("domain="+s),!0===i&&r.push("secure"),document.cookie=r.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Ee(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const ke=ie.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function o(n){let o=n;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=o(window.location.href),function(e){const t=B.isString(e)?o(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};const Ce=function(e,t){e=e||10;const n=new Array(e),o=new Array(e);let s,i=0,r=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=o[r];s||(s=l),n[i]=a,o[i]=l;let d=r,h=0;for(;d!==i;)h+=n[d++],d%=e;if(i=(i+1)%e,i===r&&(r=(r+1)%e),l-s<t)return;const u=c&&l-c;return u?Math.round(1e3*h/u):void 0}};function Se(e,t){let n=0;const o=Ce(50,250);return s=>{const i=s.loaded,r=s.lengthComputable?s.total:void 0,a=i-n,l=o(a);n=i;const c={loaded:i,total:r,progress:r?i/r:void 0,bytes:a,rate:l||void 0,estimated:l&&r&&i<=r?(r-i)/l:void 0,event:s};c[t?"download":"upload"]=!0,e(c)}}const Oe={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let o=e.data;const s=ge.from(e.headers).normalize();let i,r,{responseType:a,withXSRFToken:l}=e;function c(){e.cancelToken&&e.cancelToken.unsubscribe(i),e.signal&&e.signal.removeEventListener("abort",i)}if(B.isFormData(o))if(ie.hasStandardBrowserEnv||ie.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if(!1!==(r=s.getContentType())){const[e,...t]=r?r.split(";").map((e=>e.trim())).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}let d=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.set("Authorization","Basic "+btoa(t+":"+n))}const h=Ee(e.baseURL,e.url);function u(){if(!d)return;const o=ge.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders());!function(e,t,n){const o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(new $("Request failed with status code "+n.status,[$.ERR_BAD_REQUEST,$.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),c()}),(function(e){n(e),c()}),{data:a&&"text"!==a&&"json"!==a?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:o,config:e,request:d}),d=null}if(d.open(e.method.toUpperCase(),Y(h,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,"onloadend"in d?d.onloadend=u:d.onreadystatechange=function(){d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))&&setTimeout(u)},d.onabort=function(){d&&(n(new $("Request aborted",$.ECONNABORTED,e,d)),d=null)},d.onerror=function(){n(new $("Network Error",$.ERR_NETWORK,e,d)),d=null},d.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const o=e.transitional||Q;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new $(t,o.clarifyTimeoutError?$.ETIMEDOUT:$.ECONNABORTED,e,d)),d=null},ie.hasStandardBrowserEnv&&(l&&B.isFunction(l)&&(l=l(e)),l||!1!==l&&ke(h))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&ve.read(e.xsrfCookieName);t&&s.set(e.xsrfHeaderName,t)}void 0===o&&s.setContentType(null),"setRequestHeader"in d&&B.forEach(s.toJSON(),(function(e,t){d.setRequestHeader(t,e)})),B.isUndefined(e.withCredentials)||(d.withCredentials=!!e.withCredentials),a&&"json"!==a&&(d.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&d.addEventListener("progress",Se(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",Se(e.onUploadProgress)),(e.cancelToken||e.signal)&&(i=t=>{d&&(n(!t||t.type?new we(null,e,d):t),d.abort(),d=null)},e.cancelToken&&e.cancelToken.subscribe(i),e.signal&&(e.signal.aborted?i():e.signal.addEventListener("abort",i)));const p=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(h);p&&-1===ie.protocols.indexOf(p)?n(new $("Unsupported protocol "+p+":",$.ERR_BAD_REQUEST,e)):d.send(o||null)}))}};B.forEach(Oe,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const xe=e=>`- ${e}`,Le=e=>B.isFunction(e)||null===e||!1===e,Ne=e=>{e=B.isArray(e)?e:[e];const{length:t}=e;let n,o;const s={};for(let i=0;i<t;i++){let t;if(n=e[i],o=n,!Le(n)&&(o=Oe[(t=String(n)).toLowerCase()],void 0===o))throw new $(`Unknown adapter '${t}'`);if(o)break;s[t||"#"+i]=o}if(!o){const e=Object.entries(s).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));let n=t?e.length>1?"since :\n"+e.map(xe).join("\n"):" "+xe(e[0]):"as no adapter specified";throw new $("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return o};function Ie(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new we(null,e)}function Te(e){Ie(e),e.headers=ge.from(e.headers),e.data=fe.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Ne(e.adapter||le.adapter)(e).then((function(t){return Ie(e),t.data=fe.call(e,e.transformResponse,t),t.headers=ge.from(t.headers),t}),(function(t){return ye(t)||(Ie(e),t&&t.response&&(t.response.data=fe.call(e,e.transformResponse,t.response),t.response.headers=ge.from(t.response.headers))),Promise.reject(t)}))}const Ae=e=>e instanceof ge?e.toJSON():e;function _e(e,t){t=t||{};const n={};function o(e,t,n){return B.isPlainObject(e)&&B.isPlainObject(t)?B.merge.call({caseless:n},e,t):B.isPlainObject(t)?B.merge({},t):B.isArray(t)?t.slice():t}function s(e,t,n){return B.isUndefined(t)?B.isUndefined(e)?void 0:o(void 0,e,n):o(e,t,n)}function i(e,t){if(!B.isUndefined(t))return o(void 0,t)}function r(e,t){return B.isUndefined(t)?B.isUndefined(e)?void 0:o(void 0,e):o(void 0,t)}function a(n,s,i){return i in t?o(n,s):i in e?o(void 0,n):void 0}const l={url:i,method:i,data:i,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,withXSRFToken:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:a,headers:(e,t)=>s(Ae(e),Ae(t),!0)};return B.forEach(Object.keys(Object.assign({},e,t)),(function(o){const i=l[o]||s,r=i(e[o],t[o],o);B.isUndefined(r)&&i!==a||(n[o]=r)})),n}const Re="1.6.3",Pe={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Pe[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const je={};Pe.transitional=function(e,t,n){function o(e,t){return"[Axios v1.6.3] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,s,i)=>{if(!1===e)throw new $(o(s," has been removed"+(t?" in "+t:"")),$.ERR_DEPRECATED);return t&&!je[s]&&(je[s]=!0,console.warn(o(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,s,i)}};const Be={assertOptions:function(e,t,n){if("object"!=typeof e)throw new $("options must be an object",$.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let s=o.length;for(;s-- >0;){const i=o[s],r=t[i];if(r){const t=e[i],n=void 0===t||r(t,i,e);if(!0!==n)throw new $("option "+i+" must be "+n,$.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new $("Unknown option "+i,$.ERR_BAD_OPTION)}},validators:Pe},ze=Be.validators;class De{constructor(e){this.defaults=e,this.interceptors={request:new X,response:new X}}request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=_e(this.defaults,t);const{transitional:n,paramsSerializer:o,headers:s}=t;void 0!==n&&Be.assertOptions(n,{silentJSONParsing:ze.transitional(ze.boolean),forcedJSONParsing:ze.transitional(ze.boolean),clarifyTimeoutError:ze.transitional(ze.boolean)},!1),null!=o&&(B.isFunction(o)?t.paramsSerializer={serialize:o}:Be.assertOptions(o,{encode:ze.function,serialize:ze.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=s&&B.merge(s.common,s[t.method]);s&&B.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete s[e]})),t.headers=ge.concat(i,s);const r=[];let a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let d,h=0;if(!a){const e=[Te.bind(this),void 0];for(e.unshift.apply(e,r),e.push.apply(e,l),d=e.length,c=Promise.resolve(t);h<d;)c=c.then(e[h++],e[h++]);return c}d=r.length;let u=t;for(h=0;h<d;){const e=r[h++],t=r[h++];try{u=e(u)}catch(e){t.call(this,e);break}}try{c=Te.call(this,u)}catch(e){return Promise.reject(e)}for(h=0,d=l.length;h<d;)c=c.then(l[h++],l[h++]);return c}getUri(e){return Y(Ee((e=_e(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}B.forEach(["delete","get","head","options"],(function(e){De.prototype[e]=function(t,n){return this.request(_e(n||{},{method:e,url:t,data:(n||{}).data}))}})),B.forEach(["post","put","patch"],(function(e){function t(t){return function(n,o,s){return this.request(_e(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:o}))}}De.prototype[e]=t(),De.prototype[e+"Form"]=t(!0)}));const Me=De;class $e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const o=new Promise((e=>{n.subscribe(e),t=e})).then(e);return o.cancel=function(){n.unsubscribe(t)},o},e((function(e,o,s){n.reason||(n.reason=new we(e,o,s),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new $e((function(t){e=t})),cancel:e}}}const Fe=$e;const He={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(He).forEach((([e,t])=>{He[t]=e}));const Ue=He;const Je=function e(t){const o=new Me(t),s=n(Me.prototype.request,o);return B.extend(s,Me.prototype,o,{allOwnKeys:!0}),B.extend(s,o,null,{allOwnKeys:!0}),s.create=function(n){return e(_e(t,n))},s}(le);Je.Axios=Me,Je.CanceledError=we,Je.CancelToken=Fe,Je.isCancel=ye,Je.VERSION=Re,Je.toFormData=W,Je.AxiosError=$,Je.Cancel=Je.CanceledError,Je.all=function(e){return Promise.all(e)},Je.spread=function(e){return function(t){return e.apply(null,t)}},Je.isAxiosError=function(e){return B.isObject(e)&&!0===e.isAxiosError},Je.mergeConfig=_e,Je.AxiosHeaders=ge,Je.formToJSON=e=>re(B.isHTMLForm(e)?new FormData(e):e),Je.getAdapter=Ne,Je.HttpStatusCode=Ue,Je.default=Je;const We=Je,Ve=console,qe="localhost"==window.location.host;top.__isLocal=qe;const Ke=new class{#e;constructor(){}async isLogin(e=(()=>{})){return this.#e?Promise.resolve(e(this.#e)):We.get("/api/account/search/is-login",{headers:{"Content-Type":"application/json"}}).catch((e=>e.response)).then((t=>this.responseIsOk(t)?(0==t.data.code?t.isLogin=!0:(100==t.data.code||105==t.data.code||106==t.data.code||t.data.code,t.isLogin=!1),t.isLogin?(this.#e=t,setTimeout((()=>{this.#e=void 0}),6e4)):We.defaults.headers.common.Authorization="",e(t)):e({isLogin:!1,status:t?.status,statusText:t?.statusText})))}responseIsOk({status:e}={}){return!!e&&("200"==e||"201"==e)}responseCheck(e){let t=e.status,{code:n,data:o}=e.data;if("200"==t||"201"==t)return e;throw Ve.error(e),new Error(e.message)}},Ge=console;const Ze=new class{constructor(){}loginProcessing(e){return e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),We.post("/login-processing",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then((e=>Ke.responseIsOk(e)&&"Window"==top.constructor.name?e.data:e)).catch((e=>(Ge.error("loginProcessing error : ",e.message),We.defaults.headers.common.Authorization="",console.log(e),e.response?e.response.data:e.message)))}getAccountInfo(){return Ke.isLogin((e=>e.isLogin?We.get("/api/account/search/get-account-info",{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(Ge.error("IPC getAccountInfo error : ",JSON.stringify(e)),e.response?e.response.data:e.message))):{isLogin:!1}))}updateSimpleAccountInfo(e={}){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),We.post("/api/account/update/simple-account-info",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(Ge.error("IPC createPermitWokrspaceInAccount error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))):{isLogin:!1})).catch((e=>{Ge.error("error ::: ",e.message),Ge.error("error stack :::",e.stack)}))}},Ye=console;const Xe=new class{constructor(){}generateSecurityPutObjectPresignedUrl(e){return Ke.isLogin((t=>(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),t.isLogin?We.post("/api/generate-presigned-url/create/security",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(Ye.error("IPC sendChatting error",e),e.response.data))):{isLogin:!1}))).catch((e=>{Ye.error("sendChatting login error ::: ",e.message),Ye.error("sendChatting login error stack ::: ",e.stack)}))}generateSecurityGetObjectPresignedUrl(e){return Ke.isLogin((t=>(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),t.isLogin?We.post("/api/generate-presigned-url/search/security",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(Ye.error("IPC sendChatting error",e),e.response.data))):{isLogin:!1}))).catch((e=>{Ye.error("sendChatting login error ::: ",e.message),Ye.error("sendChatting login error stack ::: ",e.stack)}))}generateGetObjectPresignedUrl(e){return Ke.isLogin((t=>(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),t.isLogin?We.post("/api/generate-presigned-url/create/",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(Ye.error("IPC sendChatting error",e),e.response.data))):{isLogin:!1}))).catch((e=>{Ye.error("sendChatting login error ::: ",e.message),Ye.error("sendChatting login error stack ::: ",e.stack)}))}},Qe=console;const et=new class{constructor(){}sendChatting(e){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),We.post("/api/chatting/create/send-chatting",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(Qe.error("IPC sendChatting error",e),e.response.data)))):{isLogin:!1})).catch((e=>{Qe.error("sendChatting login error ::: ",e.message),Qe.error("sendChatting login error stack ::: ",e.stack)}))}deleteChatting(e){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),We.post("/api/chatting/delete/",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(Qe.error("IPC sendChatting error",e),e.response.data)))):{isLogin:!1})).catch((e=>{Qe.error("sendChatting login error ::: ",e.message),Qe.error("sendChatting login error stack ::: ",e.stack)}))}searchChattingList(e){return Ke.isLogin((t=>{if(t.isLogin){let{workspaceId:t,roomId:n}=e,o=Object.entries(e).filter((([e,t])=>null!=t&&""!=t&&"workspaceId"!=e&&"roomId"!=e)).map((([e,t])=>`${e}=${t}`)).join("&");return We.get(`/api/chatting/search/chatting-list/${t}/${n}?${o}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(Qe.error("IPC searchChatting error",e),e.response.data)))}return{isLogin:!1}})).catch((e=>{Qe.error("searchChatting login error ::: ",e.message),Qe.error("searchChatting login error stack ::: ",e.stack)}))}},tt=console;const nt=new class{constructor(){}createEmotionReaction(e={}){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),We.post("/api/emoticon/create/reaction",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(tt.error("IPC createEmotion error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))):{isLogin:!1})).catch((e=>{tt.error("error ::: ",e.message),tt.error("error stack :::",e.stack)}))}deleteEmotion(e={}){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),We.post("/api/emoticon/delete/",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(tt.error("IPC deleteEmotion error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))):{isLogin:!1})).catch((e=>{tt.error("error ::: ",e.message),tt.error("error stack :::",e.stack)}))}getIsReaction(e={}){return Ke.isLogin((t=>{if(t.isLogin){let{workspaceId:t}=e,n=Object.entries(e).filter((([e,t])=>null!=t&&""!=t&&"workspaceId"!=e)).map((([e,t])=>t instanceof Array?t=t.map((t=>`${e}=${t}`)).join("&"):`${e}=${t}`)).join("&");return We.get(`/api/emoticon/search/is-reaction?${n}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(tt.error("IPC searchMyJoinedRoomList error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))}return{isLogin:!1}})).catch((e=>{tt.error("error ::: ",e.message),tt.error("error stack :::",e.stack)}))}},ot=console;const st=new class{source;prevWorkspaceId;constructor(){}initWorkspaceStream(e,t,n){let{workspaceId:o}=e;t||(t=top?.EventSource),(this.prevWorkspaceId!=o||1!=this.source?.readyState&&0!=this.source?.readyState)&&(this.prevWorkspaceId==o||1!=this.source?.readyState&&0!=this.source?.readyState||this.source.close(),this.prevWorkspaceId=o,this.source=new t(`/api/event-stream/workspace/${o}`,{headers:{Authorization:We.defaults.headers.common.Authorization},withCredentials:!top.__isLocal}),this.source.onmessage=e=>{let{data:t,lastEventId:o,origin:s,type:i}=e;t=JSON.parse(t),ot.debug("event stream data ::: ",t);let r=t.serverSentStreamType.split("_").map(((e,t)=>0==t?e.toLowerCase():e.charAt(0)+e.substring(1).toLowerCase())).join("");ot.debug("on message: ",e.data,"eventName ::",r),this[r]?this[r](r,t):n.webEventSend?n.webEventSend(r,t):n.send(r,t)},this.source.onerror=e=>{ot.error("on stream err: ",e),this.source.close(),this.#t(o)},this.source.onopen=e=>{ot.debug("on success: ",e)})}#t(e){this.source=new EventSource(`/api/event-stream/workspace/${e}`,{headers:{Authorization:We.defaults.headers.common.Authorization},withCredentials:!top.__isLocal})}},it=console;const rt=new class{constructor(){}createNoticeBoardGroup(e={}){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),We.post("/api/notice-board/create/group",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(it.error("IPC createNoticeBoardGroup error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))):{isLogin:!1})).catch((e=>{it.error("error ::: ",e.message),it.error("error stack :::",e.stack)}))}createNoticeBoard(e={}){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),We.post("/api/notice-board/create/",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(it.error("IPC createNoticeBoard error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))):{isLogin:!1})).catch((e=>{it.error("error ::: ",e.message),it.error("error stack :::",e.stack)}))}createNoticeBoardDetail(e={}){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),We.post("/api/notice-board/create/detail",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(it.error("IPC createNoticeBoardDetail error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))):{isLogin:!1})).catch((e=>{it.error("error ::: ",e.message),it.error("error stack :::",e.stack)}))}searchNoticeBoardList(e={},t,n){return t||(t=top?.EventSource),Ke.isLogin((o=>{if(o.isLogin){let{workspaceId:o,roomId:s}=e,i=Object.entries(e).filter((([e,t])=>null!=t&&""!=t&&"workspaceId"!=e&&"roomId"!=e)).map((([e,t])=>`${e}=${t}`)).join("&");return new Promise((e=>{let r=new t(`/api/notice-board/search/notice-board-list/${o}/${s}?${i}`,{headers:{Authorization:We.defaults.headers.common.Authorization},withCredentials:!top.__isLocal});r.onmessage=e=>{let{data:t,lastEventId:o,origin:s,type:i}=e;t=JSON.parse(t),n.webEventSend?n.webEventSend("noticeBoardAccept",t):n.send("noticeBoardAccept",t)},r.onerror=t=>{r.close(),e("done")}}))}return{isLogin:!1}})).catch((e=>{it.error("error ::: ",e.message),it.error("error stack :::",e.stack)}))}searchNoticeBoardDetailList(e={},t,n){return t||(t=top?.EventSource),Ke.isLogin((o=>{if(o.isLogin){let{workspaceId:o,roomId:s,noticeBoardId:i}=e;if(!i)return;let r=Object.entries(e).filter((([e,t])=>null!=t&&""!=t&&"workspaceId"!=e&&"roomId"!=e&&"noticeBoardId"!=e)).map((([e,t])=>`${e}=${t}`)).join("&");return new Promise((e=>{let a=new t(`/api/notice-board/search/notice-board-detail-list/${o}/${s}/${i}?${r}`,{headers:{Authorization:We.defaults.headers.common.Authorization},withCredentials:!top.__isLocal});a.onmessage=e=>{let{data:t,lastEventId:o,origin:s,type:i}=e;t=JSON.parse(t),n.webEventSend?n.webEventSend("noticeBoardDetailAccept",t):n.send("noticeBoardDetailAccept",t)},a.onerror=t=>{console.log("searchNoticeBoardDetailList error :::: ",t),a.close(),e("done")}}))}return{isLogin:!1}})).catch((e=>{it.error("error ::: ",e.message),it.error("error stack :::",e.stack)}))}deleteNoticeBoard(e={}){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),console.log("delete param",e),We.post("/api/notice-board/delete/",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(it.error("IPC deleteNoticeBoard error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))):{isLogin:!1})).catch((e=>{it.error("error ::: ",e.message),it.error("error stack :::",e.stack)}))}deleteNoticeBoardGroup(e={}){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),We.post("/api/notice-board/delete/group",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(it.error("IPC deleteNoticeBoardGroup error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))):{isLogin:!1})).catch((e=>{it.error("error ::: ",e.message),it.error("error stack :::",e.stack)}))}updateNoticeBoardOrder(e=[]){return Ke.isLogin((t=>t.isLogin?(console.log("update param",e),We.post("/api/notice-board/update/order",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(it.error("IPC updateNoticeBoardOrder error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))):{isLogin:!1})).catch((e=>{it.error("error ::: ",e.message),it.error("error stack :::",e.stack)}))}updateNoticeBoardDetailOrder(e=[]){return Ke.isLogin((t=>t.isLogin?We.post("/api/notice-board/update/detail-order",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(it.error("IPC updateNoticeBoardDetailOrder error : ",JSON.stringify(e)),e.response?e.response.data:e.message))):{isLogin:!1})).catch((e=>{it.error("error ::: ",e.message),it.error("error stack :::",e.stack)}))}},at=console;const lt=new class{constructor(){}createRoom(e={}){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),We.post("/api/room/create/",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(at.error("IPC createRoom error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))):{isLogin:!1})).catch((e=>{at.error("error ::: ",e.message),at.error("error stack :::",e.stack)}))}createMySelfRoom(e={}){if(e.workspaceId&&!isNaN(parseInt(e.workspaceId)))return Ke.isLogin((t=>t.isLogin?We.post(`/api/room/create/my-self-room/${e.workspaceId}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(at.error("IPC createMySelfRoom error : ",JSON.stringify(e)),e.response?e.response.data:e.message))):{isLogin:!1})).catch((e=>{at.error("error ::: ",e.message),at.error("error stack :::",e.stack)}));at.error(`createMySelfRoom workspaceId is ::: ${e.workspaceId}`)}createRoomInAccount(e=[]){return Ke.isLogin((t=>t.isLogin?We.post("/api/room/create/in-account",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).then((e=>(at.debug("createRoomInAccount ::: ",e),e))).catch((e=>(at.error("IPC createRoomInAccount error : ",JSON.stringify(e)),e.response?e.response.data:e.message))):{isLogin:!1})).catch((e=>{at.error("error ::: ",e.message),at.error("error stack :::",e.stack)}))}updateRoomInAccoutOrder(e=[]){return Ke.isLogin((t=>t.isLogin?We.post("/api/room/update/order",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(at.error("IPC updateRoomInAccoutOrder error : ",JSON.stringify(e)),e.response?e.response.data:e.message))):{isLogin:!1})).catch((e=>{at.error("error ::: ",e.message),at.error("error stack :::",e.stack)}))}createRoomFavorites(e){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),We.post("/api/room/create/favorites",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(at.error("IPC createRoomFavorites error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))):{isLogin:!1})).catch((e=>{at.error("error ::: ",e.message),at.error("error stack :::",e.stack)}))}updateRoomFavorites(e=[]){return Ke.isLogin((t=>t.isLogin?We.post("/api/room/update/favorites-order",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(at.error("IPC createRoom error : ",JSON.stringify(e)),e.response?e.response.data:e.message))):{isLogin:!1})).catch((e=>{at.error("error ::: ",e.message),at.error("error stack :::",e.stack)}))}searchRoomList(e={}){return Ke.isLogin((t=>{if(t.isLogin){let{roomId:t}=e,n=Object.entries(e).filter((([e,t])=>null!=t&&""!=t&&"roomId"!=e)).map((([e,t])=>`${e}=${t}`)).join("&");return We.get(`/api/room/search/list/${t}?${n}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(at.error("IPC searchRoom error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))}return{isLogin:!1}})).catch((e=>{at.error("error ::: ",e.message),at.error("error stack :::",e.stack)}))}searchMyJoinedRoomList(e={}){return Ke.isLogin((t=>{if(t.isLogin){let{workspaceId:t}=e,n=Object.entries(e).filter((([e,t])=>null!=t&&""!=t&&"workspaceId"!=e)).map((([e,t])=>t instanceof Array?t=t.map((t=>`${e}=${t}`)).join("&"):`${e}=${t}`)).join("&");return We.get(`/api/room/search/my-joined-list/${t}?${n}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(at.error("IPC searchMyJoinedRoomList error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))}return{isLogin:!1}})).catch((e=>{at.error("error ::: ",e.message),at.error("error stack :::",e.stack)}))}searchRoomFavoritesList(e={}){return Ke.isLogin((t=>{if(t.isLogin){let{workspaceId:t}=e,n=Object.entries(e).filter((([e,t])=>null!=t&&""!=t&&"workspaceId"!=e)).map((([e,t])=>t instanceof Array?t=t.map((t=>`${e}=${t}`)).join("&"):`${e}=${t}`)).join("&");return We.get(`/api/room/search/favorites-list/${t}?${n}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(at.error("IPC searchMyJoinedRoomList error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))}return{isLogin:!1}})).catch((e=>{at.error("error ::: ",e.message),at.error("error stack :::",e.stack)}))}searchRoomJoinedAccountList(e={},t,n){if(e.roomId&&!isNaN(parseInt(e.roomId)))return t||(t=top?.EventSource),Ke.isLogin((o=>o.isLogin?new Promise((o=>{let s=new t(`/api/room/search/in-account-list/${e.roomId}`,{headers:{Authorization:We.defaults.headers.common.Authorization},withCredentials:!top.__isLocal});s.onmessage=e=>{let{data:t,lastEventId:o,origin:s,type:i}=e;t=JSON.parse(t),n.webEventSend?n.webEventSend("roomInAccountAccept",t):n.send("roomInAccountAccept",t)},s.onerror=e=>{s.close(),o("done")}})):{isLogin:!1})).catch((e=>{at.error("error ::: ",e.message),at.error("error stack :::",e.stack)}));at.error(`searchRoomJoinedAccountList roomId is ::: ${e.roomId}`)}getRoomDetail(e={}){if(e.roomId&&!isNaN(parseInt(e.roomId)))return Ke.isLogin((t=>t.isLogin?We.get(`/api/room/search/detail/${e.roomId}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)):{isLogin:!1}));at.error(`getRoomDetail roomId is ::: ${e.roomId}`)}isRoomFavorites(e={}){if(e.roomId&&!isNaN(parseInt(e.roomId)))return Ke.isLogin((t=>t.isLogin?We.get(`/api/room/search/is-room-favorites/${e.roomId}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(at.error("IPC isRoomFavorites error : ",JSON.stringify(e)),e.response?e.response.data:e.message))):{isLogin:!1})).catch((e=>{at.error("error ::: ",e.message),at.error("error stack :::",e.stack)}));at.error(`isRoomFavorites roomId is ::: ${e.roomId}`)}},ct=console;const dt=new class{constructor(){}searchWorkspaceMyJoined(e={}){return Ke.isLogin((t=>t.isLogin?We.get(`/api/workspace/search/my-joined-list?page=${e.page}&size=${e.size}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>{if(ct.error("error : ",JSON.stringify(e)),e.response)return e.response.data.content||(e.response.data.content=[]),e.response.data})):{isLogin:!1})).catch((e=>{ct.error("error ::: ",e.message),ct.error("error stack :::",e.stack)}))}searchNameSpecificList(e={}){return Ke.isLogin((t=>t.isLogin?We.get(`/api/workspace/search/name-specific-list?page=${e.page}&size=${e.size}&workspaceName=${e.workspaceName}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>{if(ct.error("error : ",JSON.stringify(e)),e.response)return e.response.data.content||(e.response.data.content=[]),e.response.data})):{isLogin:!1})).catch((e=>{ct.error("error ::: ",e.message),ct.error("error stack :::",e.stack)}))}searchWorkspaceInAccount(e={}){return Ke.isLogin((t=>{if(t.isLogin){let t=Object.entries(e).filter((([e,t])=>null!=t&&""!=t&&"workspaceId"!=e)).map((([e,t])=>`${e}=${t}`)).join("&");return We.get(`/api/workspace/search/joined-account-list/${e.workspaceId}?${t}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(ct.error("IPC searchWorkspaceInAccount error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))}return{isLogin:!1}})).catch((e=>{ct.error("error ::: ",e.message),ct.error("error stack :::",e.stack)}))}getWorkspaceDetail(e={}){if(e.workspaceId&&!isNaN(parseInt(e.workspaceId)))return Ke.isLogin((t=>t.isLogin?We.get(`/api/workspace/search/detail/${e.workspaceId}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data.data)):{isLogin:!1}));ct.error(`workspaceId is ::: ${e.workspaceId}`)}getWorkspaceInAccountCount(e={}){if(e.workspaceId&&!isNaN(parseInt(e.workspaceId)))return Ke.isLogin((t=>t.isLogin?We.get(`/api/workspace/search/count/${e.workspaceId}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data.data)):{isLogin:!1}));ct.error(`workspaceId is ::: ${e.workspaceId}`)}createPermitWokrspaceInAccount(e={}){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),We.post("/api/workspace/create/permit",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(ct.error("IPC createPermitWokrspaceInAccount error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))):{isLogin:!1})).catch((e=>{ct.error("error ::: ",e.message),ct.error("error stack :::",e.stack)}))}createGiveAdmin(e={}){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),We.post("/api/workspace/create/give-admin",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(ct.error("IPC createPermitWokrspaceInAccount error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))):{isLogin:!1})).catch((e=>{ct.error("error ::: ",e.message),ct.error("error stack :::",e.stack)}))}searchPermitRequestList(e={},t,n){if(e.workspaceId&&!isNaN(parseInt(e.workspaceId)))return t||(t=top?.EventSource),Ke.isLogin((o=>o.isLogin?new Promise((o=>{let s=new t(`/api/workspace/search/permit-request-list/${e.workspaceId}`,{headers:{Authorization:We.defaults.headers.common.Authorization},withCredentials:!top.__isLocal});s.onmessage=e=>{let{data:t,lastEventId:o,origin:s,type:i}=e;t=JSON.parse(t),n.webEventSend?n.webEventSend("workspacePermitRequestAccept",t):n.send("workspacePermitRequestAccept",t)},s.onerror=e=>{s.close(),o("done")}})):{isLogin:!1})).catch((e=>{ct.error("error ::: ",e.message),ct.error("error stack :::",e.stack)}));ct.error(`searchPermitRequestList workspaceId is ::: ${e.workspaceId}`)}getIsAdmin(e={}){return Ke.isLogin((t=>{if(t.isLogin){let t=Object.entries(e).filter((([e,t])=>null!=t&&""!=t&&"workspaceId"!=e)).map((([e,t])=>`${e}=${t}`)).join("&");return We.get(`/api/workspace/search/is-admin/${e.workspaceId}?${t}`,{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(ct.error("IPC getIsAdmin error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))}return{isLogin:!1}})).catch((e=>{ct.error("error ::: ",e.message),ct.error("error stack :::",e.stack)}))}createWorkspaceJoined(e={}){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),We.post("/api/workspace/create/joined",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(ct.error("IPC createPermitWokrspaceInAccount error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))):{isLogin:!1})).catch((e=>{ct.error("error ::: ",e.message),ct.error("error stack :::",e.stack)}))}createWorkspace(e={}){return Ke.isLogin((t=>t.isLogin?(e=Object.entries(e).reduce(((e,[t,n])=>(null!=n&&""!=n&&(e[t]=n),e)),{}),We.post("/api/workspace/create/",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(Ke.responseCheck).then((e=>e.data)).catch((e=>(ct.error("IPC createWorkspace error : ",JSON.stringify(e)),e.response?e.response.data:e.message)))):{isLogin:!1})).catch((e=>{ct.error("error ::: ",e.message),ct.error("error stack :::",e.stack)}))}};let ht;window.addEventListener("load",(()=>{Notification.requestPermission().then((e=>{console.log(e),ht=e})),ut.loadInitRoomId&&pt.webEventSend("roomChange",{roomId:ut.loadInitRoomId}),ut.loadInitNoticeBoardId&&pt.webEventSend("noticeBoardChange",{noticeBoardId:ut.loadInitNoticeBoardId})}));const ut=new class{#n;loadInitRoomId;loadInitNoticeBoardId;#o={};constructor(){let e=new URLSearchParams(location.search);this.#n=e.get("workspaceId"),this.loadInitRoomId=e.get("roomId"),this.loadInitNoticeBoardId=e.get("noticeBoardId"),this.#o=JSON.parse(localStorage.getItem("o"))?.reduce(((e,t)=>(e[t.OPTION_NAME]=t,e)),{})||{}}resetWorkspace(){this.#n=void 0}set workspaceId(e){this.#n!==e&&(this.#n=e,pt.webEventSend("workspaceChange",{workspaceId:this.workspaceId}))}get workspaceId(){return this.#n}setOption({name:e,value:t}){this.#o[e]?(this.#o[e].OPTION_VALUE=t,this.#o[e].UPDATE_AT=(new Date).getTime()):this.#o[e]={OPTION_NAME:e,OPTION_VALUE:t,CREATE_AT:(new Date).getTime(),UPDATE_AT:(new Date).getTime()},localStorage.setItem("o",JSON.stringify(Object.values(this.#o)))}getOption(e){return this.#o[e]}},pt=new class{#s={};#i={};#r={};constructor(){[Ze,Xe,et,nt,st,rt,lt,dt].flatMap((e=>Object.getOwnPropertyNames(Object.getPrototypeOf(e)).filter((e=>"constructor"!=e)).map((t=>[t,e])))).forEach((([e,t])=>{this.#s[e]=t[e],this.#i[e]=t[e]}))}send(e,t){!this.#s[e]||!this.#s[e]instanceof Function||this.#s[e](t,void 0,pt)}invoke(e,t){if(this.#i[e]&&!(!this.#i[e]instanceof Function))return this.#i[e](t,void 0,pt)}webEventSend(e,t){!this.#r[e]||!this.#r[e]instanceof Function||this.#r[e](void 0,t)}on(e,t){this.#r[e]=t}},mt={objectEventListener:{},onEvent:{},on:(e,t)=>{mt.onEvent[e]=t,pt.on(e,((t,n)=>{mt.trigger(e,t,n)}))},addElectronEventListener:(e,t)=>{mt.objectEventListener.hasOwnProperty(e)?mt.objectEventListener[e].push({[t.name]:t}):mt.objectEventListener[e]=[{[t.name]:t}],pt.on(e,((t,n)=>{mt.trigger(e,t,n)}))},removeElectronEventListener:(e,t)=>{mt.objectEventListener.hasOwnProperty(e)&&(t?mt.objectEventListener[e]=mt.objectEventListener[e].filter((e=>!e.hasOwnProperty(t.name))):delete mt.objectEventListener[e])},trigger:(e,t,n)=>{new Promise((o=>{mt.objectEventListener.hasOwnProperty(e)?(mt.objectEventListener[e].forEach((async o=>{Object.values(o).forEach((async o=>{!o||!o instanceof Function||new Promise((s=>{try{if("checkForUpdates"==e||"updateAvailable"==e||"updateDownloaded"==e)return void o(t,n);o(n)}catch(t){throw console.error(`${e} error message ::: `,t.message),console.error(`${e} error stack ::: `,t.stack),new Error("")}s()}))}))})),o()):o()})),new Promise((t=>{if(!mt.onEvent[e]||!mt.onEvent[e]instanceof Function)t();else{try{mt.onEvent[e](n)}catch(t){console.error(`${e} error message ::: `,t.message),console.error(`${e} error stack ::: `,t.stack)}t()}}))}},gt={getProjectPath:async()=>`${location.origin}/`,createSubWindow:async e=>{let t=Object.entries(e).filter((([e,t])=>null!=t&&""!=t&&"pageName"!=e&&"pageId"!=e)).map((([e,t])=>`${e}=${t}`)).join("&");window.open(`/web/create-sub-window/${e.pageName}?${t}`,e.pageId)},closeRequest:async e=>{},maximizeRequest:async()=>{},unmaximizeRequest:async()=>{},minimizeRequest:async()=>{},restoreRequest:async()=>{},isMaximize:async()=>!1,resetWorkspaceId:async()=>{ut.resetWorkspace()},getWorkspaceId:async()=>ut.workspaceId,notifications:async e=>{let t=e.content.join("\n");if(t=t.substring(0,200)+(t.length>200?"...":""),"granted"==ht)gt.getProjectPath().then((n=>{let o=new Notification(e.fullName,{body:t,icon:n+"image/icon.icon"});o.onclick=()=>{ut.workspaceId!=e.workspaceId&&pt.webEventSend("workspaceChange",{workspaceId:e.workspaceId}),pt.webEventSend("roomChange",{roomId:e.roomId})},setTimeout((()=>{o.close()}),4e3)}));else{let t=Object.assign(document.createElement("div"),{innerHTML:`\n\t\t\t\t\t<h1>${e.fullName}</h1>\n\t\t\t\t\t<div>${e.content}</div>\n\t\t\t\t`});Object.assign(t.style,{position:"fixed",right:"2vw",bottom:"2vh",borderRadius:"15px",background:"#e1e1e1cf",width:"40%",height:"auto",zIndex:9999,whiteSpace:"break-spaces",overflowWrap:"anywhere",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",fontSize:"13px",paddingBottom:"5vh"}),t.onclick=()=>{ut.workspaceId!=e.workspaceId&&pt.webEventSend("workspaceChange",{workspaceId:e.workspaceId}),pt.webEventSend("roomChange",{roomId:e.roomId})},document.body.append(t),setTimeout((()=>{t.remove()}),4e3)}},getOption:async e=>ut.getOption(e),setOption:async e=>ut.setOption(e),isLogin:async()=>Ke.isLogin((e=>({isLogin:e.isLogin}))),getServerUrl:async()=>`${location.origin}`,pageChange:{changeLoginPage:async()=>top.location.href="/web",changeWokrspacePage:async()=>top.location.href="/web",changeMainPage:async e=>top.location.href=`/web/main?workspaceId=${e.workspaceId}`},event:{electronEventTrigger:mt},stream:{initWorkspaceStream:async e=>pt.send("initWorkspaceStream",e)},account:{loginProcessing:async e=>pt.invoke("loginProcessing",e),getAccountInfo:async()=>pt.invoke("getAccountInfo"),updateSimpleAccountInfo:async e=>pt.invoke("updateSimpleAccountInfo",e)},chatting:{sendChatting:async e=>pt.invoke("sendChatting",e),deleteChatting:async e=>pt.invoke("deleteChatting",e),searchChattingList:async e=>pt.invoke("searchChattingList",e)},workspace:{searchWorkspaceMyJoined:async e=>pt.invoke("searchWorkspaceMyJoined",e),searchNameSpecificList:async e=>pt.invoke("searchNameSpecificList",e),searchWorkspaceInAccount:async e=>pt.invoke("searchWorkspaceInAccount",e),getWorkspaceDetail:async e=>pt.invoke("getWorkspaceDetail",e),createPermitWokrspaceInAccount:async e=>pt.invoke("createPermitWokrspaceInAccount",e),createGiveAdmin:async e=>pt.invoke("createGiveAdmin",e),searchPermitRequestList:async e=>pt.invoke("searchPermitRequestList",e),getIsAdmin:async e=>pt.invoke("getIsAdmin",e),createWorkspaceJoined:async e=>pt.invoke("createWorkspaceJoined",e),createWorkspace:async e=>pt.invoke("createWorkspace",e),getWorkspaceInAccountCount:async e=>pt.invoke("getWorkspaceInAccountCount",e)},room:{createRoom:async e=>pt.invoke("createRoom",e),createMySelfRoom:async e=>pt.invoke("createMySelfRoom",e),createRoomInAccount:async e=>pt.invoke("createRoomInAccount",e),createRoomFavorites:async e=>pt.invoke("createRoomFavorites",e),updateRoomInAccoutOrder:async e=>pt.invoke("updateRoomInAccoutOrder",e),updateRoomFavorites:async e=>pt.invoke("updateRoomFavorites",e),searchRoom:async e=>pt.invoke("searchRoom",e),searchMyJoinedRoomList:async e=>pt.invoke("searchMyJoinedRoomList",e),searchRoomFavoritesList:async e=>pt.invoke("searchRoomFavoritesList",e),searchRoomJoinedAccountList:async e=>pt.invoke("searchRoomJoinedAccountList",e),getRoomDetail:async e=>pt.invoke("getRoomDetail",e),isRoomFavorites:async e=>pt.invoke("isRoomFavorites",e)},noticeBoard:{createNoticeBoard:async e=>pt.invoke("createNoticeBoard",e),createNoticeBoardGroup:async e=>pt.invoke("createNoticeBoardGroup",e),createNoticeBoardDetail:async e=>pt.invoke("createNoticeBoardDetail",e),deleteNoticeBoard:async e=>pt.invoke("deleteNoticeBoard",e),deleteNoticeBoardGroup:async e=>pt.invoke("deleteNoticeBoardGroup",e),updateNoticeBoardOrder:async e=>pt.invoke("updateNoticeBoardOrder",e),updateNoticeBoardDetailOrder:async e=>pt.invoke("updateNoticeBoardDetailOrder",e),searchNoticeBoardList:async e=>pt.invoke("searchNoticeBoardList",e),searchNoticeBoardDetailList:async e=>pt.invoke("searchNoticeBoardDetailList",e)},s3:{generateSecurityPutObjectPresignedUrl:async e=>pt.invoke("generateSecurityPutObjectPresignedUrl",e),generateSecurityGetObjectPresignedUrl:async e=>pt.invoke("generateSecurityGetObjectPresignedUrl",e),generateGetObjectPresignedUrl:async e=>pt.invoke("generateGetObjectPresignedUrl",e)},emoticon:{createEmotionReaction:async e=>pt.invoke("createEmotionReaction",e),getIsReaction:async e=>pt.invoke("getIsReaction",e)}};window.myAPI=gt,console.log("????????????????"),console.log(window.myAPI);const ft=new class{#a;#l;#c={};#d;#h=new Promise((e=>{this.#d=e}));constructor(){window.myAPI.event.electronEventTrigger.addElectronEventListener("roomChange",(e=>{this.roomId=e.roomId}))}set addRoomIdChangeListener({name:e,callback:t,runTheFirst:n}){this.#c[e]=t,n&&this.#a&&t(this)}get addRoomIdChangeListener(){return this.#c}set roomId(e){if(!e)throw new Error("roomId is undefined");this.#a=e,window.myAPI.room.getRoomDetail({roomId:e}).then((e=>{this.#l=e.data,window.myAPI.setOption({name:"lastRoomInfo",value:JSON.stringify(this.#l)}),Promise.all(Object.values(this.#c).map((async e=>new Promise((t=>{e(this),t()}))))).then((()=>{this.#d()})),this.#h.then((()=>{this.#h=new Promise((e=>{this.#d=e}))}))}))}get roomId(){return Number(this.#a)}get room(){return this.#l}removeRoomIdChangeListener(e){this.#c(e)}get roomChangeAwait(){return this.#h}};class yt{#u;#p;#m=!0;#g;#f;#y=[];#b={};constructor(e){this.#f=e,document.addEventListener("selectionchange",(e=>{let t=window.getSelection();if(!document.activeElement.classList.contains("free-will-editor"))return;if("None"==t.type||!this.#g)return;let n=this.#y.find((e=>t.containsNode(e,!0)||t.containsNode(e,!1)));this.#g.dataset.tool_status=n?"connected":"blur"}))}isLastTool(e){if(this.#f.prototype.isPrototypeOf(e))return e===this.#y.at(-1);throw new Error(`tool is not my identity, this tool name is ${e.constructor.name}. but my identity name is ${this.#f.name}`)}set extendsElement(e){this.#u=e}get extendsElement(){return this.#u}set defaultClass(e){this.#p=e}get defaultClass(){return this.#p}set isInline(e){this.#m=e}get isInline(){return this.#m}set toolButton(e){if(!e||!e.nodeType||e.nodeType!=Node.ELEMENT_NODE)throw new Error("toolButton is not element");this.#g=e}get toolButton(){return this.#g}set connectedFriends(e){e.constructor!=this.#f&&new TypeError("is not my friend"),e.isConnected?this.#y.push(e):this.#y=this.#y.filter((e=>e.isConnected))}get connectedFriends(){return this.#y}}class bt{#w=!1;#v;static toolHandler=new yt(this);static#E=Object.assign(document.createElement("style"),{id:"free-will-editor-line"});static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-editor-line"}static createDefaultStyle(){return this.#E.textContent="",this.#E}static get defaultStyle(){return this.#E}static set defaultStyle(e){this.#E.textContent=e}static set insertDefaultStyle(e){this.#E.sheet.insertRule(e)}static getLine(e){let t;return e.parentElement?e.classList?.contains(bt.toolHandler.defaultClass)?e:(t=e.parentElement.classList.contains(bt.toolHandler.defaultClass)?e.parentElement:e.parentElement.closest(`.${bt.toolHandler.defaultClass}`),t):t}static getRootLine(e){let t;if(!e.parentElement)return t;if(e.classList?.contains(bt.toolHandler.defaultClass))return e;t=e.parentElement.classList.contains(bt.toolHandler.defaultClass)?e.parentElement:e.parentElement.closest(`.${bt.toolHandler.defaultClass}`);let n=t?.closest(`.${bt.toolHandler.defaultClass}`);return n?bt.getRootLine(t):t}static getTool(e,t){let n;return e.parentElement?e.classList?.contains(t.toolHandler.defaultClass)?e:(n=e.parentElement.classList.contains(t.toolHandler.defaultClass)?e.parentElement:e.parentElement.closest(`.${t.toolHandler.defaultClass}`),n||(n=e.parentElement.querySelector(`.${t.toolHandler.defaultClass}`)),n):n}static isElementTextEmpty(e){let t=window.getComputedStyle(e);return"hidden"!=t.visibility&&0!=t.opacity&&(0==e.innerText.length||1==e.innerText.length&&("\n"==e.innerText||"​"==e.innerText))}lineElement;constructor(e){e?(this.lineElement=e,this.lineElement.classList.add(bt.toolHandler.defaultClass)):this.lineElement=Object.assign(document.createElement("div"),{className:bt.toolHandler.defaultClass}),this.lineElement.dataset.is_line="",this.lineElement.line=this}async#k(e,t){return new Promise((n=>{t.surroundContents(e),n(e)}))}async#C(e,t,n){return new Promise((n=>{let{startOffset:o,endOffset:s,startContainer:i,endContainer:r}=e,a=window.getSelection(),l=[...this.lineElement.childNodes].findIndex((e=>a.containsNode(e,!0)))-1,c=l<0,d=[];for(let e=l+1;this.lineElement.childNodes[e]&&a.containsNode(this.lineElement.childNodes[e],!0);e+=1){let t,n=document.createNodeIterator(this.lineElement.childNodes[e],NodeFilter.SHOW_TEXT);for(;t=n.nextNode();)if(t==r){let e=t.cloneNode(!0);e.textContent=t.textContent.substring(s),t.after(e),t.textContent=t.textContent.substring(0,s)}d.push(this.lineElement.childNodes[e])}if(t.append(...d),c)this.lineElement.prepend(t);else{this.lineElement.childNodes[l].after(t)}n()}))}async#S(e,t,n,o){return new Promise((n=>{let o=e.extractContents();t.append(...o.childNodes),this.lineElement.append(t),n(t)}))}async#O(e,t,n,o){return new Promise((s=>{let{startOffset:i,endOffset:r,startContainer:a,endContainer:l}=e;e.setStart(a,i),e.setEnd(a,a.textContent.length),e.surroundContents(t);let c=a.nextSibling?.nextSibling;if(c){let e=[],n=[];for(;c;){if(c.nodeType==Node.ELEMENT_NODE){if(t==c)break;t.append(c)}else n.push(c.textContent),e.push(c);c=c.nextSibling}[...t.childNodes].find((e=>e.nodeType==Node.TEXT_NODE))?.appendData(n.join("")),e.forEach((e=>e.remove()))}if(t.parentElement!=this.lineElement&&t.parentElement?.nextSibling){let e=new n;e.append(t.parentElement.nextSibling),t.parentElement.after(e);let o=e.nextSibling;o&&e!=o&&e.append(o)}let d,h=bt.getLine(a).nextElementSibling;for(;h&&h!==o;)d=new n,e.selectNodeContents(h),e.surroundContents(d),h=h.nextElementSibling;if(bt.prototype.isPrototypeOf(l.line))s(d||t);else{let t=new n;e.setStart(l,0),e.setEnd(l,r),e.surroundContents(t);let o=l.previousSibling;if(o){let e=[],n=[];for(;o;)o.nodeType==Node.ELEMENT_NODE?t.prepend(o):(e.push(o),n.unshift(o.textContent)),o=o.previousSibling;[...t.childNodes].find((e=>e.nodeType==Node.TEXT_NODE))?.appendData(n.join(""))}s(t)}}))}async applyTool(e,t,n){return new Promise((o=>{let s=new e,{startOffset:i,endOffset:r,startContainer:a,endContainer:l}=t;1==this.lineElement.childNodes.length&&"\n"==this.lineElement.innerText&&"BR"==this.lineElement.childNodes[0].nodeName&&this.lineElement.childNodes[0].remove(),s.shadowRoot||!e.toolHandler.isInline?o(this.#S(t,s,e,n)):a===l&&this.lineElement.innerText.length!=t.toString().length?(console.log("applyOnlyOneTool"),this.#k(s,t).then((e=>{o(e)}))):bt.getLine(a)===bt.getLine(l)?(console.log("applyOnlyOneLine"),this.#C(t,s,e).then((e=>{o(e)}))):(console.log("applyMultipleLineAll"),this.#O(t,s,e,n).then((e=>{o(e)})))}))}async#x(e,t,n){return new Promise((t=>{let{startOffset:o,endOffset:s,startContainer:i,endContainer:r}=e;this.lineElement.childNodes.forEach((e=>{this.#L(e,n)})),t()}))}async#N(e,t,n){return new Promise((o=>{let s,i,r,a,{startOffset:l,endOffset:c,startContainer:d,endContainer:h,commonAncestorContainer:u}=e,p=c-l,m=[],g=[];if(u.nodeType!=Node.TEXT_NODE||u.parentElement==this||n.prototype.isPrototypeOf(u.parentElement))a=e.cloneContents();else{let t=e.cloneRange();t.selectNode(u.parentElement),a=t.cloneContents()}let f=window.getSelection(),y=[...t.childNodes];if(!n.toolHandler.isInline){try{this.lineElement.append(...y)}catch(e){bt.getLine(t).append(...y)}return t.remove(),void o()}let b,w,v=y.findIndex((e=>f.containsNode(e,!0)||f.containsNode(e,!1)));if(r=y[v],m=y.slice(0,v),g=y.slice(v+1),d.textContent.length!=p){if(s=d.textContent.substring(0,l),i=p<=1?d.textContent.substring(l+1):d.textContent.substring(l+p),null!=r){let e=r.cloneNode(!1);e.textContent=s,s=e;let t=r.cloneNode(!1);t.textContent=i,i=t,r.remove()}else s=document.createTextNode(s),i=document.createTextNode(i);m.unshift(s),g.push(i)}0!=m.length&&(b=new n,b.append(...m)),0!=g.length&&(w=new n,w.append(...g));let E=[b,a,w].filter((e=>e));t.previousSibling?t.previousSibling.after(...E):t.nextSibling?t.nextSibling.before(...E):this.lineElement.append(...E),t.remove(),o()}))}async#I(e,t,n,o){return new Promise((s=>{let{startOffset:i,endOffset:r,startContainer:a,endContainer:l}=e,c=bt.getTool(l,n),d=document.createTextNode(a.textContent.substring(i,a.textContent.length)),h=document.createTextNode(l.textContent.substring(0,r)),u=a.textContent.substring(0,i),p=l.textContent.substring(r,l.textContent.length),m=t?.nextSibling,g=t?.previousSibling,f=c?.nextSibling,y=c?.previousSibling;if(0==i)this.#L(this.lineElement,n);else if(g&&g.nodeType==Node.TEXT_NODE){if(g.after(d),u){let e=new n;e.textContent=u,g.after(e)}}else if(m&&m.nodeType==Node.TEXT_NODE){if(u){let e=new n;e.textContent=u,m.before(e)}m.before(d)}t&&t.remove();let b=this.lineElement.nextElementSibling;for(;b&&b!=o;)b.childNodes.forEach((e=>{this.#L(e,n)})),b=b.nextElementSibling;if(r==l.length)this.#L(o,n);else if(y&&y.nodeType==Node.TEXT_NODE){if(p){let e=new n;e.textContent=p,y.after(e)}y.after(h)}else if(f&&f.nodeType==Node.TEXT_NODE&&(f.before(h),p)){let e=new n;e.textContent=p,f.after(e)}c&&c.remove(),s()}))}async cancelTool(e,t,n){return new Promise((o=>{let{isCollapsed:s,anchorNode:i,anchorOffset:r}=t,a=t.getRangeAt(0),{startOffset:l,endOffset:c,startContainer:d,endContainer:h,commonAncestorContainer:u}=a,p=bt.getTool(d,e);p?(!e.toolHandler.isInline||d===h&&this.lineElement.innerText.length!=a.toString().length?this.#N(a,p,e).then((()=>{console.log("cancelOnlyOneTool"),o()})):bt.getLine(d)===bt.getLine(h)?this.#x(a,p,e).then((()=>{console.log("cancelOnlyOneLine 2"),o()})):this.#I(a,p,e,n).then((()=>{console.log("cancelMultipleLineAll"),o()})).catch((e=>console.error(e))),o()):(e.toolHandler.toolButton.dataset.tool_status="connected",o())}))}#L(e,t){new Promise((n=>{t.prototype.isPrototypeOf(e)?(e.nextSibling?e.nextSibling.before(...e.childNodes):e.previousSibling?e.previousSibling.after(...e.childNodes):e.parentElement.append(...e.childNodes),e.remove()):e.nodeType==Node.ELEMENT_NODE&&e.childNodes.forEach((e=>{this.#L(e,t)})),n()}))}lookAtMe(){let e=window.getComputedStyle(this.lineElement);"hidden"!=e.visibility&&0!=e.opacity&&((0==this.lineElement.innerText.length||1==this.lineElement.innerText.length&&"\n"==this.lineElement.innerText.charAt(0))&&(this.lineElement.innerText="\n"),this.lineElement.isContentEditable&&(this.lineElement.focus(),window.getSelection().setPosition(this.lineElement,this.lineElement.childNodes.length)))}}class wt extends HTMLElement{static globalMouseEvent=void 0;static lastClickElementPath=void 0;static globalClickEventPromiseResolve;static globalClickEventPromise=new Promise((e=>{this.globalClickEventPromiseResolve=e}));static globalKeydownEventPromiseResolve;static globalKeydownEventPromise=new Promise((e=>{this.globalKeydownEventPromiseResolve=e}));static globalSelectionChangeEventPromiseResolve;static globalSelectionChangeEventPromise=new Promise((e=>{this.globalSelectionChangeEventPromiseResolve=e}));static{document.addEventListener("mousemove",(e=>{this.globalMouseEvent=e})),document.addEventListener("mousedown",(e=>{this.lastClickElementPath=e.composedPath(),this.globalClickEventPromiseResolve(e),this.globalClickEventPromise=new Promise((e=>{this.globalClickEventPromiseResolve=e}))})),window.addEventListener("keydown",(e=>{this.globalKeydownEventPromiseResolve(e),this.globalKeydownEventPromise=new Promise((e=>{this.globalKeydownEventPromiseResolve=e}))})),document.addEventListener("selectionchange",(e=>{this.globalSelectionChangeEventPromiseResolve(e),this.globalSelectionChangeEventPromise=new Promise((e=>{this.globalSelectionChangeEventPromiseResolve=e}))}))}static isMouseInnerElement(e){if(!this.globalMouseEvent)return;let{clientX:t,clientY:n}=this.globalMouseEvent,{x:o,y:s,width:i,height:r}=e.getBoundingClientRect();return o+i>=t&&o<=t&&(s+r>=n&&s<=n)}static globalKeydownEventListener(e,t=(({oldEvent:e,newEvent:t})=>{})){let n,o;const s=()=>{this.globalKeydownEventPromise.then((e=>{o=e,t({oldEvent:n,newEvent:o}),n=e,s()}))};s()}static globalSelectionChangeEventListener(e,t=(({oldEvent:e,newEvent:t})=>{})){let n,o;const s=()=>{this.globalSelectionChangeEventPromise.then((e=>{o=e,t({oldEvent:n,newEvent:o}),n=e,s()}))};s()}static outClickElementListener(e,t=(({oldEvent:e,newEvent:t,isMouseOut:n=!1})=>{})){if(null==e||e?.nodeType!=Node.ELEMENT_NODE)throw new Error("element is not Element");let n,o;const s=()=>{this.globalClickEventPromise.then((i=>{let r=!this.isMouseInnerElement(e);o=i,t({oldEvent:n,newEvent:o,isMouseOut:r}),n=i,s()}))};s()}static processingElementPosition(e,t){let{x:n,y:o,height:s,width:i}=t.getBoundingClientRect(),r=o-e.clientHeight,a=n-e.clientWidth;e.style.top=r>0?r+"px":o+s+"px",e.style.left=a>0?a+"px":n+i+"px"}static DeleteOption=class{static#T=class{value;constructor(e){this.value=e,Object.freeze(this)}};static EMPTY_CONTENT_IS_DELETE=new this.#T("empty_content_is_delete");static EMPTY_CONTENT_IS_NOT_DELETE=new this.#T("empty_content_is_not_delete");value;static{Object.freeze(this)}constructor(e){this.value=e,Object.freeze(this)}};#w=!1;Tool;#A=()=>{};#_=()=>{};#R=()=>{};#P=()=>{};#j=()=>{};#B;parentEditor;#z=new MutationObserver(((e,t)=>{e.forEach((e=>{let{addedNodes:t,removedNodes:n}=e;new Promise((e=>{if(0!=t.length){let e;if(this.constructor.toolHandler.isInline)e=t;else{let n;e=[...t].map(((e,o)=>{if(!e.classList?.contains(bt.toolHandler.defaultClass)){let s=this.parentEditor.createLine();return s.replaceChildren(e),this.append(s),o==t.length-1&&(n=o),s}return e}))}this.connectedChildAfterCallback(e)}e()})),new Promise((e=>{0!=n.length&&this.disconnectedChildAfterCallback(n),e()}))}))}));constructor(e,t,{deleteOption:n=wt.DeleteOption.EMPTY_CONTENT_IS_DELETE}={}){super(),this.#z.disconnect(),this.#z.observe(this,{childList:!0}),this.#B=n,this.Tool=e,this.classList.add(this.constructor.toolHandler.defaultClass),document.addEventListener("selectionchange",this.removeFun,!0),t&&Object.assign(this.dataset,t),wt.globalSelectionChangeEventListener(this,(({oldEvent:e,newEvent:t})=>{if(this.#B!=wt.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE&&this.isToolEmpty()){let e=this.parentEditor?.getLine(this);this.remove(),e&&e.line.lookAtMe()}}))}connectedCallback(){if(this.#w)this.connectedAfterCallback();else{if(this.#w=!0,this.constructor.toolHandler.connectedFriends=this,this.parentEditor=this.closest(".free-will-editor"),this.parentLine=this.parentEditor?.getLine(this),0==this.childNodes.length&&this.#B==wt.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE&&(0==this.innerText.length||1==this.innerText.length&&"\n"==this.innerText.charAt(0))){let e=window.getComputedStyle(this);"hidden"==e.visibility&&0==e.opacity||(this.innerText="\n")}if(this.#B==wt.DeleteOption.EMPTY_CONTENT_IS_DELETE&&(this.isToolEmpty()||0==this.childNodes.length)){let e=this.parentEditor.getLine(this);this.remove(),e&&e.line.lookAtMe()}if(this.shadowRoot){let e=this.parentEditor.getNextLine(this.parentLine);e?e.line.lookAtMe():this.parentEditor.createLine().innerText="\n"}this.connectedAfterOnlyOneCallback()}}disconnectedCallback(){this.#w=!1;try{this.disconnectedAfterCallback()}catch(e){console.error(e)}finally{this.constructor.toolHandler.connectedFriends=this,this.#z.disconnect(this,{childList:!0}),document.removeEventListener("selectionchange",this.removeFun,!0)}}isToolEmpty(){let e=window.getComputedStyle(this);return"hidden"!=e.visibility&&0!=e.opacity&&(0==this.innerText.length||1==this.innerText.length&&("\n"==this.innerText||"​"==this.innerText))}isCursor(){let e=window.getSelection();return!!document.activeElement.classList.contains("free-will-editor")&&("None"!=e.type&&(e.containsNode(this,!0)||e.containsNode(this,!1)))}set connectedAfterCallback(e){this.#A=e}get connectedAfterCallback(){return this.#A}set connectedAfterOnlyOneCallback(e){this.#_=e}get connectedAfterOnlyOneCallback(){return this.#_}set disconnectedAfterCallback(e){this.#R=e}get disconnectedAfterCallback(){return this.#R}set connectedChildAfterCallback(e){this.#P=e}get connectedChildAfterCallback(){return this.#P}set disconnectedChildAfterCallback(e){this.#j=e}get disconnectedChildAfterCallback(){return this.#j}}class vt{#D=Object.assign(document.createElement("style"),{id:"free-will-editor-image-box"});#M=Object.assign(document.createElement("div"),{className:"image-box-wrap",innerHTML:'\n            <div class="image-resize-container">\n                <div>\n                    <label class="image-box-resize-label" for="image-box-resize-width">width </label>\n                    <input list="image-box-resize-datalist" class="image-box-resize-input" id="image-box-resize-width" type="number" autocomplete="off"/>\n                    <div>\n                        <label class="image-box-resize-label-error-message" for="image-box-resize-width"></label>\n                    </div>\n                </div>\n                <div>\n                    <label class="image-box-resize-label" for="image-box-resize-height">height(auto) </label>\n                    <input list="image-box-resize-datalist" class="image-box-resize-input" id="image-box-resize-height" type="number" autocomplete="off" disabled/>\n                </div>\n            </div>\n            <div class="image-key-description-container" style="display:none;">\n                <kbd>Ctrl</kbd><kbd>Wheel</kbd>OR<kbd>Shift</kbd><kbd>Wheel</kbd>\n            </div>\n            <div class="image-button-container">\n                <a href="javascript:void(0);" class="download" download>\n                    <svg style="zoom:125%;" class="download-css-gg-push-down" width="1rem" height="1rem" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path d="M11.0001 1H13.0001V15.4853L16.2428 12.2427L17.657 13.6569L12.0001 19.3137L6.34326 13.6569L7.75748 12.2427L11.0001 15.4853V1Z" fill="#00000073" />\n                        <path d="M18 20.2877H6V22.2877H18V20.2877Z" fill="#00000073" />\n                    </svg>\n                </a>\n                <a href="javascript:void(0);" class="new-window">\n                    <svg style="zoom: 150%;" class="new-window-css-gg-expand" width="1rem" height="1rem" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path d="M12.3062 16.5933L12.2713 18.593L5.2724 18.4708L5.39457 11.4719L7.39426 11.5068L7.33168 15.092L15.2262 7.46833L11.6938 7.40668L11.7287 5.40698L18.7277 5.52915L18.6055 12.5281L16.6058 12.4932L16.6693 8.85507L8.72095 16.5307L12.3062 16.5933Z" fill="#00000073" />\n                    </svg>\n                </a>\n                <span class="image-editor">\n                    <svg class="image-editor-css-gg-pen" width="1rem" height="1rem" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path fill-rule="evenodd" clip-rule="evenodd" d="M21.2635 2.29289C20.873 1.90237 20.2398 1.90237 19.8493 2.29289L18.9769 3.16525C17.8618 2.63254 16.4857 2.82801 15.5621 3.75165L4.95549 14.3582L10.6123 20.0151L21.2189 9.4085C22.1426 8.48486 22.338 7.1088 21.8053 5.99367L22.6777 5.12132C23.0682 4.7308 23.0682 4.09763 22.6777 3.70711L21.2635 2.29289ZM16.9955 10.8035L10.6123 17.1867L7.78392 14.3582L14.1671 7.9751L16.9955 10.8035ZM18.8138 8.98525L19.8047 7.99429C20.1953 7.60376 20.1953 6.9706 19.8047 6.58007L18.3905 5.16586C18 4.77534 17.3668 4.77534 16.9763 5.16586L15.9853 6.15683L18.8138 8.98525Z" fill="#00000073" />\n                        <path d="M2 22.9502L4.12171 15.1717L9.77817 20.8289L2 22.9502Z" fill="#00000073" />\n                    </svg>\n                </span>\n            </div>\n        '});#$;#F;constructor(){let e=document.querySelector(`#${this.#D.id}`);e?this.#D=e:document.head.append(this.createStyle()),document.addEventListener("keydown",(e=>{if(this.#M.hasAttribute("data-is_shft"))return;let{key:t}=e;"Shift"===t&&(this.#M.dataset.is_shft="")})),document.addEventListener("keyup",(e=>{if(!this.#M.hasAttribute("data-is_shft"))return;let{key:t}=e;"Shift"===t&&this.#M.removeAttribute("data-is_shft")})),this.#M.addEventListener("wheel",(e=>{if(this.#M.hasAttribute("data-is_shft"))return;let{deltaY:t}=e;this.#M.scrollTo(this.#M.scrollLeft+t,void 0)}),{passive:!0});let[t,n]=this.#M.querySelectorAll("#image-box-resize-width, #image-box-resize-height");window.addEventListener("keyup",(e=>{this.image&&this.resizeRememberTarget&&t.hasAttribute("data-is_ctrl")&&this.image.parentElement.matches(":hover")&&t.removeAttribute("data-is_ctrl")})),window.addEventListener("keydown",(e=>{let n=e.composedPath();this.image&&this.resizeRememberTarget&&n[0]!=t&&this.image.parentElement.matches(":hover")&&(e.ctrlKey?t.dataset.is_ctrl="":t.removeAttribute("data-is_ctrl"))})),window.addEventListener("wheel",(e=>{this.image&&this.resizeRememberTarget&&this.image.parentElement.hasAttribute("data-is_resize_click")&&e.composedPath()[0]!=t&&this.image.parentElement.matches(":hover")&&(t.hasAttribute("data-is_ctrl")?t.value=Number(t.value)+-1*e.deltaY:t.value=Number(t.value)+-1*e.deltaY/100,this.oninputEvent(this.image,t,t,n,this.resizeRememberTarget))}))}addImageHoverEvent(e,t){let n=this.#M.querySelector(".image-key-description-container");e.parentElement.onmouseenter=()=>{if(!e.src||""==e.src||e.hasAttribute("data-error"))return;let o=e.getRootNode();if(o!=document?o.append(this.#D):document.head.append(this.#D),e.parentElement&&(e.parentElement!==this.#M.parentElement||!this.#M.classList.contains("start"))){e.parentElement.append(this.#M),this.#H(e,t),this.#U(e);let o=setInterval((()=>{this.#M.isConnected&&e.complete&&e.parentElement===this.#M.parentElement&&!this.#M.classList.contains("start")&&(this.#M.classList.add("start"),this.image=e,this.resizeRememberTarget=t,e.parentElement.onclick=t=>{e.src&&""!=e.src&&t.composedPath()[0]==e&&!e.hasAttribute("data-error")&&(this.#M.classList.add("start"),e.parentElement.toggleAttribute("data-is_resize_click"),this.falsh(e.parentElement),e.parentElement.hasAttribute("data-is_resize_click")?n.style.display="":n.style.display="none")},clearInterval(o))}),50)}},e.parentElement.onmouseleave=()=>{this.#M.classList.remove("start"),e.parentElement.hasAttribute("data-is_resize_click")&&(n.style.display="none",this.falsh(e.parentElement)),e.parentElement.removeAttribute("data-is_resize_click")}}falsh(e){return new Promise((t=>{let n=document.createElement("div");Object.assign(n.style,{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",background:"rgba(255, 255, 255, 0.4)",transition:"opacity 0.2s ease 0s",opacity:0}),e.append(n);let o=setInterval((()=>{n.isConnected&&(clearInterval(o),n.style.opacity=1,n.ontransitionend=()=>{n.style.opacity=0,n.ontransitionend=()=>{n.remove(),t()}})}),50)}))}#H(e,t){return new Promise((n=>{let[o,s]=this.#M.querySelectorAll("#image-box-resize-width, #image-box-resize-height");o.value=e.width,s.value=e.height,o.labels[0].textContent="width : ",o.labels[1].textContent="",this.prevValue=void 0,o.oninput=n=>this.oninputEvent(e,n.target,o,s,t),o.onkeydown=e=>{e.ctrlKey?o.dataset.is_ctrl="":o.removeAttribute("data-is_ctrl")},o.onkeyup=e=>{o.removeAttribute("data-is_ctrl")},o.onblur=()=>{o.removeAttribute("data-is_ctrl")},o.onwheel=n=>{n.preventDefault(),o.hasAttribute("data-is_ctrl")?o.value=Number(o.value)+-1*n.deltaY:o.value=Number(o.value)+-1*n.deltaY/100,this.oninputEvent(e,n.target,o,s,t)},n({width:o,height:s})}))}oninputEvent(e,t,n,o,s){if(isNaN(Number(t.value)))return void(t.value=t.value.replace(/\D/g,""));Number(t.value)<50?(n.labels[1].textContent="(min 50)",t.value=50):n.labels[1].textContent="",e[t.id.includes("width")?"width":"height"]=t.value;let i=e.getBoundingClientRect();this.prevValue&&parseInt(this.prevValue)==parseInt(i.width)&&(n.value=parseInt(this.prevValue),n.labels[1].textContent=`(max ${parseInt(this.prevValue)}) : `),this.prevValue=i.width,s.dataset.width=n.value}#U(e){return new Promise((t=>{let[n,o]=[...this.#M.querySelectorAll(".download-css-gg-push-down, .new-window-css-gg-expand")].map((e=>e.parentElement));n.href=e.src,o.href=e.src,n.download=e.dataset.image_name,o.target="_blank",t({download:n,newWindow:o})}))}get imageBox(){return this.#M}get style(){return this.#D}set style(e){this.#D.textContent=e}set insertStyle(e){this.#D.sheet.insertRule(e)}set image(e){this.#$=e}get image(){return this.#$}set resizeRememberTarget(e){this.#F=e}get resizeRememberTarget(){return this.#F}createStyle(){return this.#D.textContent="\n            .image-box-wrap{\n                position: absolute;\n                display: flex;\n                justify-content: space-between;\n                width: 100%;\n                background: linear-gradient(to bottom, #ff8787 -73%, #ffffffcf 115%);\n                color: white;\n                top:-20%;\n                opacity: 0;\n                transition: all 1s;\n                white-space: nowrap;\n                overflow-y: clip;\n                overflow-x: auto;\n            }\n            .image-box-wrap::-webkit-scrollbar{\n                display: none;\n            }\n            .image-box-wrap:hover::-webkit-scrollbar{\n                display: initial;\n                width: 7px;\n                height: 7px;\n            }\n            .image-box-wrap:hover::-webkit-scrollbar-track{\n                background: #00000040;\n                border-radius: 100px;\n                box-shadow: inset 0 0 5px #000000fc;\n            }\n            .image-box-wrap:hover::-webkit-scrollbar-thumb {\n                background: #0c0c0c38;\n                border-radius: 100px;\n                box-shadow: inset 0 0 5px #000000;\n            }\n            .image-box-wrap:hover::-webkit-scrollbar-thumb:hover {\n                /*background: #44070757;*/\n                background: #34000075; \n            }\n            .image-box-wrap.start{\n                top: 0;\n                opacity: 1;\n                transition: all 0.5s;\n            }\n            .image-box-wrap .image-button-container,\n            .image-box-wrap .image-resize-container, \n            .image-box-wrap .image-key-description-container{\n                display: flex;\n                gap: 1.5vw;\n                padding: 1.7%;\n                align-items: center;\n            }\n            .image-box-wrap .image-resize-container .image-box-resize-label{\n                background: linear-gradient(to right, #e50bff, #004eff);\n                -webkit-background-clip: text;\n                -webkit-text-fill-color: transparent;\n            }\n            .image-box-wrap .image-resize-container .image-box-resize-input{\n                outline: none;\n                border: none;\n                background-image: linear-gradient(#fff1f1d4, #ffffffeb), linear-gradient(to right, #a189890d 0%,  #ed89b275 100%);\n                background-origin: border-box;\n                background-clip: content-box, border-box;\n                background-color: #00000000; \n                width: 3.2rem;\n                height: 100%;\n                color: #ffb6b6;\n                font-size: 0.9rem;\n                text-align: center;\n            }\n            .image-box-wrap .image-button-container .new-window,\n            .image-box-wrap .image-button-container .download,\n            .image-box-wrap .image-button-container .image-editor{\n                display: flex;\n                align-items: center;\n                border: none;\n                background:none;\n                position:relative;\n                cursor: pointer;\n            }\n\n            .image-box-wrap kbd {\n                background-color: #eee;\n                border-radius: 3px;\n                border: 1px solid #b4b4b4;\n                box-shadow:\n                0 1px 1px rgba(0, 0, 0, 0.2),\n                0 2px 0 0 rgba(255, 255, 255, 0.7) inset;\n                color: #333;\n                display: inline-block;\n                font-size: 0.85em;\n                font-weight: 700;\n                line-height: 1;\n                padding: 2px 4px;\n                white-space: nowrap;\n                height: fit-content;\n            }\n        ",this.#D}}class Et extends wt{static toolHandler=new yt(this);static imageBox=new vt;static customImageCallback;static#E=Object.assign(document.createElement("style"),{id:"free-will-editor-image-style"});static slotName="free-will-editor-image-description-slot";static#J=Object.assign(document.createElement("input"),{type:"file",accept:"image/*"});static get selectedFile(){return this.#J}static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-editor-image",this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"",className:`${this.#E.id}-button`,innerHTML:`\n            <svg class="${this.#E.id} css-gg-image-icon"\n                width="0.9rem"\n                height="0.9rem"\n                viewBox="0 0 24 24"\n                fill="none"\n                xmlns="http://www.w3.org/2000/svg"\n                >\n                <path\n                    fill-rule="evenodd"\n                    clip-rule="evenodd"\n                    d="M7 7C5.34315 7 4 8.34315 4 10C4 11.6569 5.34315 13 7 13C8.65685 13 10 11.6569 10 10C10 8.34315 8.65685 7 7 7ZM6 10C6 9.44772 6.44772 9 7 9C7.55228 9 8 9.44772 8 10C8 10.5523 7.55228 11 7 11C6.44772 11 6 10.5523 6 10Z"\n                    fill="currentColor"\n                />\n                <path\n                    fill-rule="evenodd"\n                    clip-rule="evenodd"\n                    d="M3 3C1.34315 3 0 4.34315 0 6V18C0 19.6569 1.34315 21 3 21H21C22.6569 21 24 19.6569 24 18V6C24 4.34315 22.6569 3 21 3H3ZM21 5H3C2.44772 5 2 5.44772 2 6V18C2 18.5523 2.44772 19 3 19H7.31374L14.1924 12.1214C15.364 10.9498 17.2635 10.9498 18.435 12.1214L22 15.6863V6C22 5.44772 21.5523 5 21 5ZM21 19H10.1422L15.6066 13.5356C15.9971 13.145 16.6303 13.145 17.0208 13.5356L21.907 18.4217C21.7479 18.7633 21.4016 19 21 19Z"\n                    fill="currentColor"\n                />\n            </svg>\n            `,title:"Image"}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":(this.#J.click(),this.#J.onchange=()=>{this.toolHandler.toolButton.dataset.tool_status="active"})}}static createDefaultStyle(){this.#E.textContent=`\n            .${this.toolHandler.defaultClass} {\n                position: relative;\n            }\n            .${this.#E.id}.css-gg-image-icon {\n                zoom:120%;\n            }\n            .${this.#E.id}.image-description{            \n                cursor: pointer;\n                display: inline-flex;\n                align-items: center;\n            }\n\n            .${this.#E.id}.image-description::after{\n                margin-left: 0.5em;\n                content: ' ['attr(data-file_name)'] 'attr(data-open_status);\n                font-size: small;\n                color: #bdbdbd;\n            }\n\n            .${this.#E.id}.image-contanier{\n                width: fit-content;\n                transition: height 0.5s ease-in-out;\n                overflow: hidden;\n                position: relative;\n            }\n            .${this.#E.id}.image-contanier img{\n                max-width: 100%;\n                height: auto;\n                aspect-ratio: attr(width) / attr(height);\n                image-rendering: auto;\n            }\n        `;let e=document.querySelector(`#${this.#E.id}`);return e?(this.#E?.remove(),this.#E=e,document.head.append(this.#E)):document.head.append(this.#E),this.#E}static get defaultStyle(){return this.#E}static set defaultStyle(e){this.#E.textContent=e}static set insertDefaultStyle(e){this.#E.sheet.insertRule(e)}#W;imgLoadEndCallback=e=>{};image=document.createElement("img");constructor(e){if(super(Et,e,{deleteOption:wt.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE}),e||0!=Object.keys(this.dataset).length)this.dataset.url&&!this.dataset.url.startsWith("blob:file")||!this.dataset.base64?Et.customImageCallback&&"function"==typeof Et.customImageCallback?Et.customImageCallback(this):this.dataset.url&&(this.image.src=this.dataset.url):fetch(this.dataset.base64).then((async e=>e.blob().then((t=>{let n=URL.createObjectURL(t,e.headers.get("Content-Type"));this.dataset.url=n,this.image.src=this.dataset.url}))));else{this.#W=Et.selectedFile.cloneNode(!0),Et.selectedFile.files=(new DataTransfer).files,this.dataset.url=URL.createObjectURL(this.#W.files[0]),this.dataset.name=this.#W.files[0].name,this.dataset.last_modified=this.#W.files[0].lastModified,this.dataset.size=this.#W.files[0].size,this.dataset.content_type=this.#W.files[0].type;let e=URL.createObjectURL(this.#W.files[0],this.dataset.content_type);this.dataset.url=e,this.image.type=this.dataset.content_type,this.image.src=this.dataset.url}if(!this.dataset.name)throw this.remove(),new Error(`this file is undefined ${this.dataset.name}`);this.attachShadow({mode:"open"}),this.shadowRoot.append(Et.defaultStyle.cloneNode(!0)),this.createDefaultContent().then((({wrap:e,description:t,slot:n,aticle:o})=>{this.connectedChildAfterCallback=e=>{o.append(...e)}})),this.disconnectedAfterCallback=()=>{this.dataset.url.startsWith("blob:file")&&setTimeout((()=>{URL.revokeObjectURL(this.dataset.url)}),12e4)}}createDefaultContent(){return new Promise((e=>{let t=Object.assign(document.createElement("div"),{});t.draggable=!1,this.shadowRoot.append(t);let n=Object.assign(document.createElement("div"),{className:`${Et.defaultStyle.id} image-contanier`});this.image.dataset.image_name=this.dataset.name,n.append(this.image),this.image.onload=()=>{this.dataset.width&&(this.image.width=this.dataset.width)},this.image.onerror=()=>{this.image.dataset.error=""};let{description:o,slot:s,aticle:i}=this.createDescription(this.image,n);this.connectedAfterOnlyOneCallback=()=>{0!=this.childNodes.length&&"BR"!=this.childNodes[0]?.tagName&&i.append(...[...this.childNodes].filter((e=>e!=i))),t.replaceChildren(...[o,n].filter((e=>null!=e))),Et.imageBox.addImageHoverEvent(this.image,this),"BR"==this.nextSibling?.tagName&&this.nextSibling.remove(),e({wrap:t,description:o,slot:s,aticle:i})}}))}createDescription(e,t){let n=Object.assign(document.createElement("div"),{className:`${Et.defaultStyle.id} image-description`});n.dataset.file_name=this.dataset.name,n.dataset.open_status=this.dataset.open_status||"▼",t.style.height=this.dataset.height||"auto";let{slot:o,aticle:s}=this.createSlot();return n.append(o),n.onclick=o=>{"▼"==n.dataset.open_status?(n.dataset.open_status="▶",t.style.height=window.getComputedStyle(e).height,setTimeout((()=>{t.style.height="0px",this.dataset.height="0px"}),100)):(n.dataset.open_status="▼",setTimeout((()=>{t.style.height=window.getComputedStyle(e).height,this.dataset.height="auto"}),100),e.style.opacity="",e.style.visibility=""),this.dataset.open_status=n.dataset.open_status},t.ontransitionend=()=>{"▼"==n.dataset.open_status?t.style.height="auto":(e.style.opacity=0,e.style.visibility="hidden")},{description:n,slot:o,aticle:s}}createSlot(){let e=document.createElement("div");e.contentEditable="false",e.draggable="false";let t=Array.from(window.crypto.getRandomValues(new Uint32Array(16)),(e=>e.toString(32).padStart(2,"0"))).join("");return e.append(...this.childNodes),e.slot=Et.slotName+"-"+t,this.append(e),{slot:Object.assign(document.createElement("slot"),{name:Et.slotName+"-"+t}),aticle:e}}get selectedFile(){return this.#W}}class kt{#D=Object.assign(document.createElement("style"),{id:"free-will-editor-video-box"});#V=Object.assign(document.createElement("div"),{className:"video-box-wrap",innerHTML:'\n            <div class="video-resize-container">\n                <div>\n                    <label class="video-box-resize-label" for="video-box-resize-width">width : </label>\n                    <input list="video-box-resize-datalist" class="video-box-resize-input" id="video-box-resize-width" type="number" autocomplete="off"/>\n                    <div>\n                        <label class="video-box-resize-label-error-message" for="video-box-resize-width"></label>\n                    </div>\n                </div>\n                <div>\n                    <label class="video-box-resize-label" for="video-box-resize-height">height(auto) : </label>\n                    <input list="video-box-resize-datalist" class="video-box-resize-input" id="video-box-resize-height" type="number" autocomplete="off" disabled/>\n                </div>\n            </div>\n            <div class="video-key-description-container" style="display:none;">\n                <kbd>Ctrl</kbd><kbd>Wheel</kbd>OR<kbd>Shift</kbd><kbd>Wheel</kbd>\n            </div>\n            <div class="video-button-container">\n                <a href="javascript:void(0);" class="download" download>\n                    <svg style="zoom:140%;" class="download-css-gg-push-down"\n                        width="1rem"\n                        height="1rem"\n                        viewBox="0 0 24 24"\n                        fill="none"\n                        xmlns="http://www.w3.org/2000/svg"\n                    >\n                        <path\n                        d="M11.0001 1H13.0001V15.4853L16.2428 12.2427L17.657 13.6569L12.0001 19.3137L6.34326 13.6569L7.75748 12.2427L11.0001 15.4853V1Z"\n                        fill="#00000073"\n                        />\n                        <path d="M18 20.2877H6V22.2877H18V20.2877Z" fill="#00000073" />\n                    </svg>\n                </a>\n                <a href="javascript:void(0);" class="new-window">\n                    <svg style="zoom: 150%;" class="new-window-css-gg-expand"\n                        width="1rem"\n                        height="1rem"\n                        viewBox="0 0 24 24"\n                        fill="none"\n                        xmlns="http://www.w3.org/2000/svg"\n                    >\n                        <path\n                        d="M12.3062 16.5933L12.2713 18.593L5.2724 18.4708L5.39457 11.4719L7.39426 11.5068L7.33168 15.092L15.2262 7.46833L11.6938 7.40668L11.7287 5.40698L18.7277 5.52915L18.6055 12.5281L16.6058 12.4932L16.6693 8.85507L8.72095 16.5307L12.3062 16.5933Z"\n                        fill="#00000073"\n                        />\n                    </svg>\n                </a>\n            </div>\n        '});#q;#F;constructor(){let e=document.querySelector(`#${this.#D.id}`);e?this.#D=e:document.head.append(this.createStyle()),document.addEventListener("keydown",(e=>{if(this.#V.hasAttribute("data-is_shft"))return;let{key:t}=e;"Shift"===t&&(this.#V.dataset.is_shft="")})),document.addEventListener("keyup",(e=>{if(!this.#V.hasAttribute("data-is_shft"))return;let{key:t}=e;"Shift"===t&&this.#V.removeAttribute("data-is_shft")})),this.#V.addEventListener("wheel",(e=>{if(this.#V.hasAttribute("data-is_shft"))return;let{deltaY:t}=e;this.#V.scrollTo(this.#V.scrollLeft+t,void 0)}),{passive:!0});let[t,n]=this.#V.querySelectorAll("#video-box-resize-width, #video-box-resize-height");window.addEventListener("keyup",(e=>{this.video&&this.resizeRememberTarget&&t.hasAttribute("data-is_ctrl")&&this.video.parentElement.matches(":hover")&&t.removeAttribute("data-is_ctrl")})),window.addEventListener("keydown",(e=>{let n=e.composedPath();this.video&&this.resizeRememberTarget&&n[0]!=t&&this.video.parentElement.matches(":hover")&&(e.ctrlKey?t.dataset.is_ctrl="":t.removeAttribute("data-is_ctrl"))})),window.addEventListener("wheel",(e=>{this.video&&this.resizeRememberTarget&&this.video.parentElement.hasAttribute("data-is_resize_click")&&e.composedPath()[0]!=t&&this.video.parentElement.matches(":hover")&&(t.hasAttribute("data-is_ctrl")?t.value=Number(t.value)+-1*e.deltaY:t.value=Number(t.value)+-1*e.deltaY/100,this.oninputEvent(this.video,t,n,this.resizeRememberTarget))}))}addVideoHoverEvent(e,t){let n=this.#V.querySelector(".video-key-description-container");e.parentElement.onmouseenter=()=>{if(!e.src||""==e.src||e.hasAttribute("data-error"))return;let o=e.getRootNode();if(o!=document?o.append(this.#D):document.head.append(this.#D),e.parentElement&&(e.parentElement!==this.#V.parentElement||!this.#V.classList.contains("start"))){e.parentElement.append(this.#V),this.#H(e,t),this.#U(e);let o=setInterval((()=>{this.#V.isConnected&&4==e.readyState&&e.parentElement===this.#V.parentElement&&!this.#V.classList.contains("start")&&(this.#V.classList.add("start"),this.video=e,this.resizeRememberTarget=t,e.parentElement.onclick=t=>{e.src&&""!=e.src&&t.composedPath()[0]==e&&!e.hasAttribute("data-error")&&(e.parentElement.toggleAttribute("data-is_resize_click"),this.falsh(e.parentElement),e.parentElement.hasAttribute("data-is_resize_click")?n.style.display="":n.style.display="none")},clearInterval(o))}),50)}},e.parentElement.onmouseleave=()=>{this.#V.classList.remove("start"),e.parentElement.hasAttribute("data-is_resize_click")&&(n.style.display="none",this.falsh(e.parentElement)),e.parentElement.removeAttribute("data-is_resize_click")}}falsh(e){return new Promise((t=>{let n=document.createElement("div");Object.assign(n.style,{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",background:"rgba(255, 255, 255, 0.4)",transition:"opacity 0.2s ease 0s",opacity:0}),e.append(n);let o=setInterval((()=>{n.isConnected&&(clearInterval(o),n.style.opacity=1,n.ontransitionend=()=>{n.style.opacity=0,n.ontransitionend=()=>{n.remove(),t()}})}),50)}))}#H(e,t){return new Promise((n=>{let[o,s]=this.#V.querySelectorAll("#video-box-resize-width, #video-box-resize-height"),i=e.getBoundingClientRect();o.value=parseInt(i.width),s.value=parseInt(i.height),o.labels[0].textContent="width : ",o.labels[1].textContent="",this.prevValue=void 0,o.oninput=n=>this.oninputEvent(e,o,s,t),o.onkeydown=e=>{e.ctrlKey?o.dataset.is_ctrl="":o.removeAttribute("data-is_ctrl")},o.onkeyup=e=>{o.removeAttribute("data-is_ctrl")},o.onblur=()=>{o.removeAttribute("data-is_ctrl")},o.onwheel=n=>{n.preventDefault(),o.hasAttribute("data-is_ctrl")?o.value=Number(o.value)+-1*n.deltaY:o.value=Number(o.value)+-1*n.deltaY/100,this.oninputEvent(e,o,s,t)},n({width:o,height:s})}))}oninputEvent(e,t,n,o){if(isNaN(Number(t.value)))return void(t.value=t.value.replace(/\D/g,""));Number(t.value)<50?(t.labels[1].textContent="(min 50)",t.value=50):t.labels[1].textContent="",e[t.id.includes("width")?"width":"height"]=t.value;let s=e.getBoundingClientRect();this.prevValue&&parseInt(this.prevValue)==parseInt(s.width)&&(t.value=parseInt(this.prevValue),t.labels[1].textContent=`(max ${parseInt(this.prevValue)}) : `),this.prevValue=s.width,o.dataset.width=t.value}#U(e){return new Promise((t=>{let[n,o]=[...this.#V.querySelectorAll(".download-css-gg-push-down, .new-window-css-gg-expand")].map((e=>e.parentElement));n.href=e.src,o.href=e.src,n.download=e.dataset.video_name,o.target="_blank",t({download:n,newWindow:o})}))}get videoBox(){return this.#V}get style(){return this.#D}set style(e){this.#D.textContent=e}set insertStyle(e){this.#D.sheet.insertRule(e)}set video(e){this.#q=e}get video(){return this.#q}set resizeRememberTarget(e){this.#F=e}get resizeRememberTarget(){return this.#F}createStyle(){return this.#D.textContent="\n            .video-box-wrap{\n                position: absolute;\n                display: flex;\n                justify-content: space-between;\n                width: 100%;\n                background: linear-gradient(to bottom, #ff8787 -73%, #ffffffcf 115%);\n                color: white;\n                top:-20%;\n                opacity: 0;\n                transition: all 1s;\n                white-space: nowrap;\n                overflow-y: clip;\n                overflow-x: auto;\n            }\n            .video-box-wrap::-webkit-scrollbar{\n                display: none;\n            }\n            .video-box-wrap:hover::-webkit-scrollbar{\n                display: initial;\n                width: 7px;\n                height: 7px;\n            }\n            .video-box-wrap:hover::-webkit-scrollbar-track{\n                background: #00000040;\n                border-radius: 100px;\n                box-shadow: inset 0 0 5px #000000fc;\n            }\n            .video-box-wrap:hover::-webkit-scrollbar-thumb {\n                background: #0c0c0c38;\n                border-radius: 100px;\n                box-shadow: inset 0 0 5px #000000;\n            }\n            .video-box-wrap:hover::-webkit-scrollbar-thumb:hover {\n                /*background: #44070757;*/\n                background: #34000075; \n            }\n            .video-box-wrap.start{\n                top: 0;\n                opacity: 1;\n                transition: all 0.5s;\n            }\n            .video-box-wrap .video-button-container, \n            .video-box-wrap .video-resize-container,\n            .video-box-wrap .video-key-description-container{\n                display: flex;\n                gap: 1.5vw;\n                padding: 1.7%;\n                align-items: center;\n            }\n            .video-box-wrap .video-resize-container .video-box-resize-label{\n                background: linear-gradient(to right, #e50bff, #004eff);\n                -webkit-background-clip: text;\n                -webkit-text-fill-color: transparent;\n            }\n            .video-box-wrap .video-resize-container .video-box-resize-input{\n                outline: none;\n                border: none;\n                background-image: linear-gradient(#fff1f1d4, #ffffffeb), linear-gradient(to right, #a189890d 0%,  #ed89b275 100%);\n                background-origin: border-box;\n                background-clip: content-box, border-box;\n                background-color: #00000000; \n                width: 3.2rem;\n                height: 100%;\n                color: #ffb6b6;\n                font-size: 0.9rem;\n                text-align: center;\n            }\n            .video-box-wrap .video-button-container .new-window,\n            .video-box-wrap .video-button-container .download{\n                display: flex;\n                align-items: center;\n                border: none;\n                background:none;\n                position:relative;\n                cursor: pointer;\n            }\n\n            .video-box-wrap kbd {\n                background-color: #eee;\n                border-radius: 3px;\n                border: 1px solid #b4b4b4;\n                box-shadow:\n                0 1px 1px rgba(0, 0, 0, 0.2),\n                0 2px 0 0 rgba(255, 255, 255, 0.7) inset;\n                color: #333;\n                display: inline-block;\n                font-size: 0.85em;\n                font-weight: 700;\n                line-height: 1;\n                padding: 2px 4px;\n                white-space: nowrap;\n                height: fit-content;\n            }\n        ",this.#D}}class Ct extends wt{static toolHandler=new yt(this);static videoBox=new kt;static customVideoCallback;static#E=Object.assign(document.createElement("style"),{id:"free-will-editor-video-style"});static descriptionName="free-will-editor-video-description-slot";static#J=Object.assign(document.createElement("input"),{type:"file",accept:"video/*"});static get selectedFile(){return this.#J}static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-editor-video",this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"",className:`${this.#E.id}-button`,innerHTML:`\n            <svg class="${this.#E.id} css-gg-video-icon"\n            width="0.9rem"\n            height="0.9rem"\n            viewBox="0 0 24 24"\n            fill="none"\n            xmlns="http://www.w3.org/2000/svg"\n            >\n                <path\n                    fill-rule="evenodd"\n                    clip-rule="evenodd"\n                    d="M4 4.5V6.5H12V7.5H3C1.34315 7.5 0 8.84315 0 10.5V16.5C0 18.1569 1.34315 19.5 3 19.5H15C16.5731 19.5 17.8634 18.2892 17.9898 16.7487L24 17.5V9.5L17.9898 10.2513C17.8634 8.71078 16.5731 7.5 15 7.5H14V5.5C14 4.94772 13.5523 4.5 13 4.5H4ZM18 12.2656V14.7344L22 15.2344V11.7656L18 12.2656ZM16 10.5C16 9.94772 15.5523 9.5 15 9.5H3C2.44772 9.5 2 9.94772 2 10.5V16.5C2 17.0523 2.44772 17.5 3 17.5H15C15.5523 17.5 16 17.0523 16 16.5V10.5Z"\n                    fill="currentColor"\n                />\n            </svg>\n            `,title:"Video"}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":(this.#J.onchange=()=>{this.toolHandler.toolButton.dataset.tool_status="active"},this.#J.click())}}static createDefaultStyle(){this.#E.textContent=`\n            .${this.toolHandler.defaultClass} {\n                position: relative;\n            }\n            .${this.#E.id}.css-gg-video-icon {\n                zoom:120%;\n            }\n            .${this.#E.id}.video-description{            \n                cursor: pointer;\n                display: inline-flex;\n                align-items: center;\n            }\n            .${this.#E.id}.video-description::after{\n                margin-left: 0.5em;\n                content: ' ['attr(data-file_name)'] 'attr(data-open_status);\n                font-size: small;\n                color: #bdbdbd;\n            }\n\n            .${this.#E.id}.video-contanier{\n                width: fit-content;\n                transition: height 0.5s ease-in-out;\n                overflow: hidden;\n                position: relative;\n            }\n            .${this.#E.id}.video-contanier video{\n                max-width: 100%;\n                height: auto;\n                aspect-ratio: attr(width) / attr(height);\n            }\n        `;let e=document.querySelector(`#${this.#E.id}`);return e?(this.#E?.remove(),this.#E=e,document.head.append(this.#E)):document.head.append(this.#E),this.#E}static get defaultStyle(){return this.#E}static set defaultStyle(e){this.#E.textContent=e}static set insertDefaultStyle(e){this.#E.sheet.insertRule(e)}#W;videoLoadEndCallback=e=>{};video=Object.assign(document.createElement("video"),{loop:!0,controls:!0});constructor(e){if(super(Ct,e,{deleteOption:wt.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE}),e||0!=Object.entries(this.dataset).length)this.dataset.url&&!this.dataset.url.startsWith("blob:file")||!this.dataset.base64?Ct.customVideoCallback&&"function"==typeof Ct.customVideoCallback?Ct.customVideoCallback(this):this.dataset.url&&(this.video.src=this.dataset.url):fetch(this.dataset.base64).then((async e=>e.blob().then((t=>{let n=URL.createObjectURL(t,e.headers.get("Content-Type"));this.dataset.url=n,this.video.src=this.dataset.url}))));else{this.#W=Ct.selectedFile.cloneNode(!0),Ct.selectedFile.files=(new DataTransfer).files,this.dataset.url=URL.createObjectURL(this.#W.files[0]),this.dataset.name=this.#W.files[0].name,this.dataset.lastModified=this.#W.files[0].lastModified,this.dataset.size=this.#W.files[0].size,this.dataset.content_type=this.#W.files[0].type;let e=URL.createObjectURL(this.#W.files[0],this.dataset.content_type);this.dataset.url=e,this.video.type=this.dataset.content_type,this.video.src=this.dataset.url}if(!this.dataset.name)throw this.remove(),new Error(`this file is undefined ${this.dataset.name}`);this.attachShadow({mode:"open"}),this.shadowRoot.append(Ct.defaultStyle.cloneNode(!0)),this.createDefaultContent().then((({wrap:e,description:t,slot:n,aticle:o})=>{this.connectedChildAfterCallback=e=>{o.append(...e)}})),this.disconnectedAfterCallback=()=>{this.dataset.url.startsWith("blob:file")&&setTimeout((()=>{URL.revokeObjectURL(this.dataset.url)}),12e4)}}createDefaultContent(){return new Promise((e=>{let t=Object.assign(document.createElement("div"),{});t.draggable=!1,this.shadowRoot.append(t);let n=Object.assign(document.createElement("div"),{className:`${Ct.defaultStyle.id} video-contanier`});this.video.dataset.video_name=this.dataset.name,n.append(this.video),this.video.onload=()=>{(0!=this.file.length&&""==video.canPlayType(this.file.files[0].type)||this.dataset.name&&""==this.video.canPlayType(`video/${this.dataset.name.substring(this.dataset.name.lastIndexOf(".")+1)}`))&&this.videoIsNotWorking()},this.video.onloadeddata=()=>{this.video.play(),this.dataset.width&&(this.video.width=this.dataset.width)},this.video.onerror=()=>{};let{description:o,slot:s,aticle:i}=this.createDescription(this.video,n);this.connectedAfterOnlyOneCallback=()=>{0!=this.childNodes.length&&"BR"!=this.childNodes[0]?.tagName&&i.append(...[...this.childNodes].filter((e=>e!=i))),t.replaceChildren(...[o,n].filter((e=>null!=e))),Ct.videoBox.addVideoHoverEvent(this.video,this),"BR"==this.nextSibling?.tagName&&this.nextSibling.remove(),e({wrap:t,description:o,slot:s,aticle:i})}}))}createDescription(e,t){let n=Object.assign(document.createElement("div"),{className:`${Ct.defaultStyle.id} video-description`});n.dataset.file_name=this.dataset.name,n.dataset.open_status=this.dataset.open_status||"▼",t.style.height=this.dataset.height||"auto";let{slot:o,aticle:s}=this.createSlot();return o&&n.append(o),n.onclick=o=>{"▼"==n.dataset.open_status?(n.dataset.open_status="▶",t.style.height=window.getComputedStyle(e).height,setTimeout((()=>{t.style.height="0px",this.dataset.height="0px"}),100)):(n.dataset.open_status="▼",setTimeout((()=>{t.style.height=window.getComputedStyle(e).height,this.dataset.height="auto"}),100),e.style.opacity="",e.style.visibility=""),this.dataset.open_status=n.dataset.open_status},t.ontransitionend=()=>{"▼"==n.dataset.open_status?t.style.height="auto":(e.style.opacity=0,e.style.visibility="hidden")},{description:n,slot:o,aticle:s}}createSlot(){let e=document.createElement("div");e.contentEditable="false",e.draggable="false";let t=Array.from(window.crypto.getRandomValues(new Uint32Array(16)),(e=>e.toString(32).padStart(2,"0"))).join("");return e.append(...this.childNodes),e.slot=Ct.descriptionName+"-"+t,this.append(e),{slot:Object.assign(document.createElement("slot"),{name:Ct.descriptionName+"-"+t}),aticle:e}}videoIsNotWorking(){alert(`${this.dataset.name}은 호환되지 않는 영상입니다.`),this.remove()}get selectedFile(){return this.#W}}class St extends wt{static toolHandler=new yt(this);static customResourcesCallback=()=>{};static#E=Object.assign(document.createElement("style"),{id:"free-will-editor-resources-style"});static slotName="free-will-editor-resources-description-slot";static#J=Object.assign(document.createElement("input"),{type:"file"});static get selectedFile(){return this.#J}static#K=()=>{};static#G=()=>{};static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-editor-resources",this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"",className:`${this.#E.id}-button`,innerHTML:`\n            <svg class="${this.#E.id} css-gg-file-add-icon" width="0.9rem" height="0.9rem" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path d="M10 18V16H8V14H10V12H12V14H14V16H12V18H10Z" fill="currentColor" />\n                <path\n                    fill-rule="evenodd"\n                    clip-rule="evenodd"\n                    d="M6 2C4.34315 2 3 3.34315 3 5V19C3 20.6569 4.34315 22 6 22H18C19.6569 22 21 20.6569 21 19V9C21 5.13401 17.866 2 14 2H6ZM6 4H13V9H19V19C19 19.5523 18.5523 20 18 20H6C5.44772 20 5 19.5523 5 19V5C5 4.44772 5.44772 4 6 4ZM15 4.10002C16.6113 4.4271 17.9413 5.52906 18.584 7H15V4.10002Z"\n                    fill="currentColor"\n                />\n            </svg>\n            `,title:"Resources"}),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":(this.#J.click(),this.#J.onchange=()=>{this.toolHandler.toolButton.dataset.tool_status="active"})}}static createDefaultStyle(){this.#E.textContent=`\n            .${this.toolHandler.defaultClass} {\n                position: relative;\n            }\n            .${this.#E.id}.css-gg-file-add-icon {\n                zoom:120%;\n            }\n            .${this.#E.id}.resources-description{            \n                cursor: pointer;\n                display: inline-flex;\n                align-items: center;\n            }\n\n            .${this.#E.id}.resources-description::after{\n                margin-left: 0.5em;\n                content: ' ['attr(data-file_name)'] 'attr(data-open_status);\n                font-size: small;\n                color: #bdbdbd;\n            }\n            .${this.#E.id}.resources-download-button, .${this.#E.id}.resources-preview-button{\n                margin-left: 1vw;\n                border: solid 2px #e5e5e5;\n                cursor: pointer;\n                background: none;\n            }\n            .${this.#E.id}.resources-contanier{\n                width: auto;\n                transition: height 0.5s ease-in-out;\n                overflow: hidden;\n                position: relative;\n                margin-top: 0.7vh;\n            }\n            .${this.#E.id}.resources-contanier object{\n                width: 99%;\n                height: auto;\n                aspect-ratio: attr(width) / attr(height);\n                border: solid 2px #efefef;\n            }\n            .${this.#E.id}.resources-contanier object.unload{\n                width: auto;\n            }\n\n        `;let e=document.querySelector(`#${this.#E.id}`);return e?(this.#E?.remove(),this.#E=e,document.head.append(this.#E)):document.head.append(this.#E),this.#E}static get defaultStyle(){return this.#E}static set defaultStyle(e){this.#E.textContent=e}static set insertDefaultStyle(e){this.#E.sheet.insertRule(e)}static set resourcesCallback(e){this.#K=e}static get resourcesCallback(){return this.#K}static set sizeLimitOverCallback(e){this.#G=e}static get sizeLimitOverCallback(){return this.#G}#W;imgLoadEndCallback=e=>{};resources=Object.assign(document.createElement("object"),{});constructor(e){if(super(St,e,{deleteOption:wt.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE}),e||0!=Object.keys(this.dataset).length)St.customResourcesCallback&&"function"==typeof St.customResourcesCallback?St.customResourcesCallback(this):this.dataset.url;else{this.#W=St.selectedFile.cloneNode(!0),St.selectedFile.files=(new DataTransfer).files,this.dataset.url=URL.createObjectURL(this.#W.files[0]),this.dataset.name=this.#W.files[0].name,this.dataset.last_modified=this.#W.files[0].lastModified,this.dataset.size=this.#W.files[0].size,this.dataset.content_type=this.#W.files[0].type;let e=URL.createObjectURL(this.#W.files[0],this.dataset.content_type);this.dataset.url=e}if(this.resources.type=this.dataset.content_type,this.resources.data=this.dataset.url,this.resources.dataset.resources_name=this.dataset.name,!this.dataset.name)throw this.remove(),new Error(`this file is undefined ${this.dataset.name}`);this.attachShadow({mode:"open"}),this.shadowRoot.append(St.defaultStyle.cloneNode(!0)),this.createDefaultContent().then((({wrap:e,description:t,slot:n,aticle:o})=>{this.connectedChildAfterCallback=e=>{o.append(...e)}})),this.disconnectedAfterCallback=()=>{this.resources.remove(),this.dataset.url.startsWith("blob:file")}}createDefaultContent(){return new Promise((e=>{let t=Object.assign(document.createElement("div"),{});t.draggable=!1,this.shadowRoot.append(t);let n=Object.assign(document.createElement("div"),{className:`${St.defaultStyle.id} resources-contanier`});this.resources.onload=e=>{this.dataset.width&&(this.resources.width=this.dataset.width),this.resources.contentWindow?(this.resources.contentWindow.document.body.style.contentVisibility="auto",this.resources.contentWindow.document.body.style.containIntrinsicSize="1px 5000px"):this.resources.classList.add("unload"),St.resourcesCallback({status:"load",resources:this.resources})},this.resources.onerror=e=>{this.resources.dataset.error="",this.resources.contentWindow||this.resources.classList.add("unload"),St.resourcesCallback({status:"error",resources:this.resources})};let{description:o,slot:s,aticle:i}=this.createDescription(this.resources,n),r=Object.assign(document.createElement("button"),{className:`${St.defaultStyle.id} resources-download-button`,innerHTML:"<b>Download</b>",onclick:()=>{fetch(this.resources.data).then((e=>e.blob())).then((e=>{let t=URL.createObjectURL(e,this.dataset.content_type),n=document.createElement("a");n.href=t,n.download=this.dataset.name,n.click(),n.remove(),setTimeout((()=>{URL.revokeObjectURL(t)}),3e5)}))}}),a=Object.assign(document.createElement("button"),{className:`${St.defaultStyle.id} resources-preview-button`,innerHTML:"<b>Preview</b>",onclick:()=>{n.append(this.resources)}});this.connectedAfterOnlyOneCallback=()=>{0!=this.childNodes.length&&"BR"!=this.childNodes[0]?.tagName&&i.append(...[...this.childNodes].filter((e=>e!=i))),t.replaceChildren(...[o,r,a,n].filter((e=>null!=e))),"BR"==this.nextSibling?.tagName&&this.nextSibling.remove(),e({wrap:t,description:o,slot:s,aticle:i})}}))}createDescription(e,t){let n=Object.assign(document.createElement("div"),{className:`${St.defaultStyle.id} resources-description`});n.dataset.file_name=this.dataset.name,n.dataset.open_status=this.dataset.open_status||"▼",t.style.height=this.dataset.height||"auto",n.dataset.open_status="▼";let{slot:o,aticle:s}=this.createSlot();return n.append(o),n.onclick=o=>{"▼"==n.dataset.open_status?(n.dataset.open_status="▶",t.style.height=window.getComputedStyle(e).height,setTimeout((()=>{t.style.height="0px",this.dataset.height="0px"}),100)):(n.dataset.open_status="▼",setTimeout((()=>{t.style.height=window.getComputedStyle(e).height,this.dataset.height="auto"}),100),e.style.opacity="",e.style.visibility=""),this.dataset.open_status=n.dataset.open_status},t.ontransitionend=()=>{"▼"==n.dataset.open_status?t.style.height="auto":(e.style.opacity=0,e.style.visibility="hidden")},{description:n,slot:o,aticle:s}}createSlot(){let e=document.createElement("div");e.contentEditable="false",e.draggable="false";let t=Array.from(window.crypto.getRandomValues(new Uint32Array(16)),(e=>e.toString(32).padStart(2,"0"))).join("");return e.append(...this.childNodes),e.slot=St.slotName+"-"+t,this.append(e),{slot:Object.assign(document.createElement("slot"),{name:St.slotName+"-"+t}),aticle:e}}get selectedFile(){return this.#W}set resourcesUrl(e){let t=this.resources.cloneNode(!0);t.data=e,this.resources.after(t),this.resources.remove(),this.resources=t,t.onload=()=>{this.resources!=t&&(this.dataset.width&&(t.width=this.dataset.width),t.contentWindow||t.classList.add("unload"))},t.onerror=()=>{t.dataset.error="",t.contentWindow||t.classList.add("unload")}}get resourcesUrl(){this.resources.data}}class Ot{#D=Object.assign(document.createElement("style"),{id:"free-will-editor-font-size-box"});#Z=30;#Y=Object.assign(document.createElement("div"),{className:"font-size-wrap"});#X=Object.assign(document.createElement("ul"),{className:"font-size-container"});#Q=Object.assign(document.createElement("input"),{autocomplete:"off",placeholder:"search your font size",type:"number",name:"font-size-search",className:"font-size-search",oninput:e=>this.#ee(e),onkeyup:e=>{if("Enter"==e.key&&""!=this.#Q.value){let t=this.#X.querySelector(`[data-size="${this.#Q.value}"]`);this.#te(t,e)}}});#ne;#oe="가나 다라 ab cd";#se=this.#oe;#ie=()=>{};#re;#ae;constructor(e){this.#ae=e;let t=document.querySelector(`#${this.#D.id}`);t?this.#D=t:document.head.append(this.createStyle());let n=Object.assign(document.createElement("div"),{className:"font-size-search-wrap"});n.append(this.#Q),this.#Y.append(n,this.#X),this.#Y.append(this.#X)}#ee(e){let t=Number(this.#Q.value);if(!this.#Q.value||""==this.#Q.value)return void this.#le(this.#se).then((e=>{this.#X.replaceChildren(...e)}));if(isNaN(t)||this.#ae.min>t||this.#ae.max<t)return void this.#X.replaceChildren();let n=Object.assign(document.createElement("li"),{className:"font-size-item"});this.#se.nodeType&&this.#se.nodeType==Node.ELEMENT_NODE?n.innerHTML=this.#se.innerHTML:n.textContent=this.#se,n.style.fontSize=t+this.#ae.unit,n.dataset.size=t,this.#ce(n),this.#X.replaceChildren(n),this.#Q.focus()}#ce(e){return new Promise((t=>{e.onclick=t=>this.#te(e,t),t(e)}))}#te(e,t){if(this.#ne=e,this.#re){let e=window.getSelection();e.removeAllRanges(),e.addRange(this.#re)}this.applyCallback(t)}#le(e){return new Promise((t=>{let n=[],o=String(this.#ae.weight).replace(".","").length;for(let t=this.#ae.min,s=this.#ae.max+this.#ae.weight;t<s;t=parseFloat((t+this.#ae.weight).toFixed(o))){console.log(t);let o=Object.assign(document.createElement("li"),{className:"font-size-item"});e.nodeType&&e.nodeType==Node.ELEMENT_NODE?o.innerHTML=e.innerHTML:o.textContent=e,o.style.fontSize=t+this.#ae.unit,this.#ce(o),n.push(o)}t(n)}))}async open(){this.#Q.step=this.#ae.weight,this.#Q.min=this.#ae.min,this.#Q.max=this.#ae.max;let e=window.getSelection();if(0!=e.rangeCount&&0==e.isCollapsed){let t=e.getRangeAt(0);this.#re=t.cloneRange();let n=document.createElement("aticle"),o=t.cloneContents();n.append(o),this.#se=n}return this.#se=""==this.#se?this.#oe:this.#se,document.body.append(this.#Y),await this.#le(this.#se).then((e=>(this.#X.replaceChildren(...e),this.#X)))}close(){this.#Y.remove()}set applyCallback(e){this.#ie=e}get applyCallback(){return this.#ie}get fontSizeBox(){return this.#Y}get selectedFont(){return this.#ne}get style(){return this.#D}set style(e){this.#D.textContent=e}set insertStyle(e){this.#D.sheet.insertRule(e)}createStyle(){return this.#D.textContent=`\n            .font-size-wrap{\n                background: #000000bf;\n                position: fixed;\n\t\t\t\tpadding: 0.9%;\n\t\t\t\twidth: ${this.#Z}vw;\n\t\t\t\theight: 25vh;\n\t\t\t\tcolor: white;\n                min-width: 200px;\n                overflow-y: auto;\n                -webkit-user-select: none;\n                -moz-user-select: none;\n                -ms-user-select: none;\n                user-select: none;\n                overflow-x: hidden;\n                z-index: 999;\n            }\n\n            .font-size-wrap .font-size-search-wrap{\n                margin-bottom: 2%;\n                overflow-x: hidden;\n            }\n            .font-size-wrap .font-size-search-wrap [name="font-size-search"]{\n                outline: none;\n                -moz-appearance: textfield;\n                width: 100%;\n                color: white;\n            }\n            .font-size-wrap .font-size-search-wrap [name="font-size-search"]::-webkit-outer-spin-button,\n            .font-size-wrap .font-size-search-wrap [name="font-size-search"]::-webkit-inner-spin-button{\n                -webkit-appearance: none;\n                margin: 0;\n            }\n\n            .font-size-wrap .font-size-container{\n                list-style-type: none;\n                padding: 0;\n                margin: 0;\n            }\n            .font-size-wrap .font-size-container .font-size-item{\n                margin-bottom: 1%;\n                transition: all 0.5s;\n                overflow-x: hidden;\n                white-space: nowrap;\n                text-overflow: ellipsis;\n            }\n            .font-size-wrap .font-size-container .font-size-item:hover{\n                background-color: #666666;\n                cursor: pointer;\n                background-color: #666666;\n                padding: 2px 0 3px 0;\n            }\n\n        `,this.#D}}class xt extends wt{static toolHandler=new yt(this);static#E=Object.assign(document.createElement("style"),{id:"free-will-editor-font-size-style"});static fontSizeBox;static unit="px";static min=1;static max=50;static weight=1;static isDefaultStyle=!0;static{this.toolHandler.extendsElement="",this.toolHandler.defaultClass="free-will-editor-font-size",this.toolHandler.toolButton=Object.assign(document.createElement("button"),{textContent:"↑↓",className:`${this.#E.id}-button`,title:"Font Size"}),this.fontSizeBox=new Ot(this),this.toolHandler.toolButton.onclick=()=>{"active"==this.toolHandler.toolButton.dataset.tool_status||"connected"==this.toolHandler.toolButton.dataset.tool_status?this.toolHandler.toolButton.dataset.tool_status="cancel":this.fontSizeBox.fontSizeBox.isConnected?this.fontSizeBox.close():this.fontSizeBox.open().then((e=>{super.processingElementPosition(this.fontSizeBox.fontSizeBox,this.toolHandler.toolButton)}))},this.fontSizeBox.applyCallback=e=>{this.toolHandler.toolButton.dataset.tool_status="active",this.fontSizeBox.close()},document.addEventListener("scroll",(()=>{this.fontSizeBox.fontSizeBox.isConnected&&super.processingElementPosition(this.fontSizeBox.fontSizeBox,this.toolHandler.toolButton)})),window.addEventListener("resize",(e=>{this.fontSizeBox.fontSizeBox.isConnected&&this.fontSizeBox.open().then((e=>{super.processingElementPosition(this.fontSizeBox.fontSizeBox,this.toolHandler.toolButton)}))})),super.outClickElementListener(this.fontSizeBox.fontSizeBox,(({oldEvent:e,newEvent:t,isMouseOut:n})=>{n&&this.fontSizeBox.fontSizeBox.isConnected&&!super.isMouseInnerElement(this.toolHandler.toolButton)&&this.fontSizeBox.close()}))}static createDefaultStyle(){this.#E.textContent=`\n\t\t\t.${this.#E.id}-button{\n\t\t\t\tfont-size: 0.8rem;\n\t\t\t}\n\t\t`;let e=document.querySelector(`#${this.#E.id}`);return e?(this.#E?.remove(),this.#E=e,document.head.append(this.#E)):document.head.append(this.#E),this.#E}static get defaultStyle(){return this.#E}static set defaultStyle(e){this.#E.textContent=e}static set insertDefaultStyle(e){this.#E.sheet.insertRule(e)}constructor(e){super(xt,e),e||0!=Object.keys(this.dataset).length||(this.dataset.font_size=xt.fontSizeBox.selectedFont?.style.fontSize),this.style.fontSize=this.dataset.font_size}}new class{#de=this.searchAccountInfo();static#he;static#ue=new Promise((e=>{this.#he=e}));static accountInfoChangeAcceptEventListener(e,t=(({oldData:e,newData:t})=>{})){let n,o;const s=()=>{this.accountInfoChangeAcceptPromise.then((e=>{o=e,t({oldData:n,newData:o}),n=e,s()}))};s()}static{window.myAPI.event.electronEventTrigger.addElectronEventListener("accountInfoChangeAccept",(e=>{let{content:t}=e;this.#he(t),this.#ue=new Promise((e=>{this.#he=e}))}))}constructor(){}async searchAccountInfo(){return this.#de=await window.myAPI.account.getAccountInfo().then((e=>e.data)),this.#de}get accountInfo(){return this.#de}};const Lt=new class{encoder=new TextEncoder;decoder=new TextDecoder;signAlgorithm={name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"};secretAlgorithm={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"};async generateKeyPair(e,t){return window.crypto.subtle.generateKey(e,!0,t)}async keySign(e,t){let n=this.encoder.encode(e);return window.crypto.subtle.sign(this.signAlgorithm.name,t,n).then((e=>({message:n,signature:e})))}async decryptMessage(e,t,n){return window.crypto.subtle.decrypt({name:n.name},e,t).catch((e=>{console.error(e.message),console.error(e.stack)}))}async convertBase64ToBuffer(e){return fetch(`data:application/octet-binary;base64,${e}`).then((e=>e.arrayBuffer())).then((e=>new Uint8Array(e)))}async exportKey(e,t){return window.crypto.subtle.exportKey(e,t).then((e=>new Promise((t=>t(String.fromCharCode(...new Uint8Array(e))))))).then((e=>new Promise((t=>t(window.btoa(e))))))}async callS3PresignedUrl(e,t,n={}){return console.log("callFunctionParam !!! ",n),Promise.all([this.generateKeyPair(this.signAlgorithm,["sign","verify"]),this.generateKeyPair(this.secretAlgorithm,["encrypt","decrypt"])]).then((([e,t])=>Promise.all([this.exportKey("spki",e.publicKey),this.exportKey("spki",t.publicKey),Promise.resolve(t),Promise.resolve(e)]))).then((async([o,s,i,r])=>{let a=await this.keySign(`${t}:${s}`,r.privateKey),l=await e(Object.assign(n,{data:window.btoa(String.fromCodePoint(...a.message)),dataKey:o,sign:window.btoa(String.fromCodePoint(...new Uint8Array(a.signature)))})),{code:c,data:d}=l;if(0==c)return{data:d,encDncKeyPair:i}}))}async fetchPutObject(e,t,n,o){return fetch(e,{method:"PUT",headers:{"Content-Encoding":"base64","Content-Type":"application/octet-stream","x-amz-server-side-encryption-customer-algorithm":"AES256","x-amz-server-side-encryption-customer-key":t,"x-amz-server-side-encryption-customer-key-md5":n},body:o})}},Nt=new class{#pe;#n;#me={};#ge;#fe;constructor(){window.myAPI.getWorkspaceId().then((e=>{this.workspaceId=e})),window.myAPI.event.electronEventTrigger.addElectronEventListener("workspaceChange",(e=>{this.workspaceId=e.workspaceId}))}set addWorkspaceIdChangedListener({name:e,callback:t,runTheFirst:n}){this.#me[e]=t,n&&this.workspaceId&&t(this)}get addWorkspaceIdChangedListener(){return this.#me}set workspaceId(e){e&&(this.#n=e,window.myAPI.workspace.getWorkspaceDetail({workspaceId:e}).then((e=>{this.#pe=e;let t=Promise.all(Object.values(this.#me).map((async e=>new Promise((t=>{e(this),t()})))));this.#fe?this.#fe.then((()=>{t.then((()=>{this.#fe=new Promise((e=>{this.#ge=e}))}))})):this.#fe=new Promise((e=>{this.#ge=e,this.#ge(t)}))})))}get workspaceId(){return Number(this.#n)}get workspace(){return this.#pe}removeWorkspaceIdChangedListener(e){this.#me(e)}};class It{#ye;#be;#we;#ve;isOpen=!1;#Ee;#ke;#Ce;constructor({dbName:e,columnInfo:t,storeName:n,keyPathNameList:o=[],pkAutoIncrement:s=!0}){if(!e)throw new Error("dbName is undefined");if(!t)throw new Error("columnInfo is undefined");if(!n)throw new Error("storeName is undefined");if(0==o.length)throw new Error("keyPathName is undefined");if(o.filter((e=>t[e])).length!=o.length)throw new Error("invalid key path name");if(1==s&&o.length>1)throw new Error("multiple key not use autoIncrement : true");this.#ye=e,this.#be=t,this.#we=n,this.#Ee=JSON.stringify(Object.entries(t).reduce(((e,[t,n],o)=>(e[t]=void 0,e)),{})),this.#ke=o,this.#Ce=s}open(){return new Promise(((e,t)=>{const n=indexedDB.open(this.DB_NAME);n.onupgradeneeded=e=>this.upgradeneeded(e,{}),n.onsuccess=t=>{this.isOpen=!0,this.#ve=t.target.result;let o=!Object.entries(this.#ve.objectStoreNames).find((([e,t])=>t==this.DB_STORE_NAME)),s=!1;if(!o){let e=this.#ve.transaction(this.DB_STORE_NAME,"readwrite").objectStore(this.DB_STORE_NAME),t=Object.entries(e.indexNames).reduce(((e,[t,n])=>(e[n]=t,e)),{});s=-1!=Object.entries(t).findIndex((([e,t])=>!this.#be[e]))||-1!=Object.entries(this.#be).findIndex((([e,n])=>!t[e]))}if(o||s){let t=Number(this.#ve.version)+1;console.log(this.#we,t),console.log(n),this.close().then((n=>{const s=indexedDB.open(this.DB_NAME,t);console.log(s),s.onupgradeneeded=e=>this.upgradeneeded(e,{isNewAddStore:o}),s.onsuccess=t=>{this.isOpen=!0,this.#ve=t.target.result,e(this.isOpen)},s.onblocked=e=>{console.error(e)}}))}else e(this.isOpen)},n.onblocked=e=>{console.log(e)},n.onerror=e=>{console.log(e),this.isOpen=!1,"VersionError"==e.target.error.name?t(new Error("VersionError: DB 버전을 수동으로 입력해선 안됩니다.")):(console.error(e),t(new Error(`unknownError ${e}`)))}}))}close(){return new Promise((e=>{this.#ve&&this.isOpen||e(!1),this.#ve.onabort=e=>console.log(e),this.#ve.onerror=e=>console.log(e),this.#ve.close(),this.isOpen=!1,this.#ve.onclose=t=>{this.isOpen=!1,e(!0)},e(!0)}))}get DB_NAME(){return this.#ye}get DB_STORE_NAME(){return this.#we}get COLUMN_INFO(){return this.#be}get template(){return JSON.parse(this.#Ee)}upgradeneeded(e,{isNewAddStore:t=!1}){let n;if(e.newVersion==e.oldVersion||0==e.oldVersion||t){let t=this.#Ce||1==this.#ke.length?this.#ke[0]:this.#ke;n=e.target.result.createObjectStore(this.DB_STORE_NAME,{keyPath:t,autoIncrement:this.#Ce}),Object.entries(this.#be).forEach((([e,t])=>n.createIndex(...t)))}else{n=e.target.transaction.objectStore(this.DB_STORE_NAME);let t=Object.entries(n.indexNames),o=t.reduce(((e,[t,n])=>(e[n]=t,e)),{});Object.entries(this.#be).forEach((([e,t])=>{o[t[0]]||n.createIndex(...t)})),t.forEach((([e,t])=>{this.#be[t]||n.deleteIndex(t)}))}}addItem(e=this.#Ee){return new Promise(((t,n)=>{this.isOpen&&this.#ve||n(new Error("indexedDB가 열려있지 않습니다."));let o=this.#ve.transaction(this.DB_STORE_NAME,"readwrite"),s=o.objectStore(this.DB_STORE_NAME).put(e);s.onsuccess=e=>{o.commit()},s.onerror=e=>{console.log(e)},o.oncomplete=e=>{e.type,t(e)},o.onerror=e=>{console.log(e),n(new Error("commit error"))}}))}getItem(e){return new Promise(((t,n)=>{let o=this.#ve.transaction(this.DB_STORE_NAME,"readonly").objectStore(this.DB_STORE_NAME).get(e);o.onerror=e=>{console.error(e),n(o)},o.onsuccess=e=>{t(o)}}))}getList({pageNum:e=1,pageSize:t=5,callback:n,readOption:o="readonly"}={}){return new Promise(((s,i)=>{let r=t*(e-1),a=0!=r,l=0,c=this.#ve.transaction(this.DB_STORE_NAME,o),d=c.objectStore(this.DB_STORE_NAME),h={data:[],event:void 0};d.openCursor().onsuccess=e=>{const o=e.target.result;if(!o)return;if(a)return a=!a,void o.advance(r);n instanceof Function&&n(o);let s=o.value;h.data.push(s),l+=1,l>=t||o.continue()},c.oncomplete=e=>(h.event=e,s(h)),c.onerror=e=>i(e),c.onabort=e=>i(e)}))}deleteList(...e){return 0==e.length?Promise.resolve():new Promise(((t,n)=>{let o=this.#ve.transaction(this.DB_STORE_NAME,"readwrite"),s=o.objectStore(this.DB_STORE_NAME),i={successCount:0,failedCount:0};e.forEach((e=>{let t=s.delete([e]);t.onsuccess=e=>{i.successCount+=1,o=e.target.transaction},t.onerror=e=>{i.failedCount+=1}})),o.commit(),o.oncomplete=e=>(i.event=e,t(i)),o.onerror=e=>n(e),o.onabort=e=>n(e)}))}deleteDatabase(e){return new Promise(((t,n)=>{let o=indexedDB.deleteDatabase(e);o.onerror=e=>{console.error(e),n(e)},o.onsuccess=e=>{console.log(e),t(e)}}))}}const Tt=new class{#Se=/[A-Z]?[a-z]+|[0-9]+|[A-Z]+(?![a-z])/g;constructor(){}jsonToSaveElementDataset(e,t){if(!t)throw new Error("element is undefined");if(t.nodeType!=Node.ELEMENT_NODE)throw new Error(`element is not element node type ::: ${t.nodeType}`);return new Promise((n=>{let o=Object.entries(e).reduce(((e,[t,n])=>(e[t.match(this.#Se).map((e=>e.toLowerCase())).join("_")]=n,e)),{});Object.assign(t.dataset,o),n(t)}))}async underbarNameToCamelName(e){return new Promise((t=>{t(Object.entries(e).reduce(((e,[t,n])=>(e[t.split("_").map(((e,t)=>0==t?e.charAt(0).toLowerCase()+e.substring(1):e.charAt(0).toUpperCase()+e.substring(1))).join("")]=n,e)),{}))}))}async getProjectPathPromise(){return await window.myAPI.getProjectPath().then((e=>e)).catch((e=>(console.error(e),"")))}processingElementPosition(e,t){let n;n=this.isElement(t,HTMLElement)?t.getBoundingClientRect():t;let{x:o,y:s,height:i,width:r}=n,a=s-e.clientHeight,l=o-e.clientWidth;e.style.top=a>0?a+"px":s+i+"px",e.style.left=l>0?l+"px":o+r+"px"}isElement(e,t){let n=Object.getPrototypeOf(e),o=!1;for(;null!=n;){if(n?.constructor==t){o=!0;break}n=Object.getPrototypeOf(n)}return o}shortenBytes(e){const t=e>0?Math.floor(Math.log2(e)/10):0,n=((t>0?"KMGTPEZY"[t-1]:"")||(t>=9?"Y":""))+"B";return{size:Math.floor(e/Math.pow(1024,t>=9?8:t)),rank:t,rankText:n}}showToastMessage(e){let t=Object.assign(document.createElement("div"),{className:"toast_message"});t.append(...e.map((e=>Object.assign(document.createElement("div"),{textContent:e})))),document.body.append(t);let n=setInterval((()=>{t.isConnected&&(clearInterval(n),setTimeout((()=>{t.style.opacity=0,t.ontransitionend=()=>{t.remove()}}),1e3))}),50)}};xt.unit="rem",xt.min=.1,xt.max=5,xt.weight=.1;window.myAPI=gt,new class{#Oe=864e5;constructor(e){window.addEventListener("load",(async()=>{const e=new It({dbName:"fileDB-main-page",storeName:"s3Memory-main-page",columnInfo:{fileName:["fileName","fileName",{unique:!0}],originFileName:["originFileName","originFileName"],fileData:["fileData","fileData"],lastModified:["lastModified","lastModified"],uploadType:["uploadType","uploadType"],roomId:["roomId","roomId"],workspaceId:["workspaceId","workspaceId"]},keyPathNameList:["fileName"],pkAutoIncrement:!1}),t=e.open(),n=async n=>{if(n.hasAttribute("data-is_loading")){let e=n.querySelector("[data-upload_loading]");return e?(e.className="upload_loading",e.querySelector("[data-status_text_elipsis]").className="upload_loading"):(e=Object.assign(document.createElement("div"),{className:"upload_loading",innerHTML:'\n\t\t\t\t\t\t\t<div class="upload_loading_container">\n\t\t\t\t\t\t\t\t<span>컨텐츠를 업로드 중입니다</span>\n\t\t\t\t\t\t\t\t<span class="status_text_elipsis" data-status_text_elipsis></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t'}),e.dataset.upload_loading=""),void n.append(e)}let o;o=n.constructor==Et?"IMAGE":n.constructor==Ct?"VIDEO":"FILE";const s=await new Promise((o=>{t.then((()=>{new Promise((t=>{e.getList({pageNum:1,pageSize:99999,readOption:"readwrite",callback:e=>{e.value.lastModified<(new Date).getTime()-this.#Oe&&e.delete()}}).then((e=>{t()})).catch((e=>{console.error(e),t()}))})).then((()=>{e.getItem(n.dataset.new_file_name).then((e=>{o(e)}))}))}))}));if(s.result){let e=window.URL.createObjectURL(s.result.fileData,n.dataset.content_type);return n.dataset.url=e,void(n.image?n.image.src=e:n.video?n.video.src=e:n.resourcesUrl=e)}new Promise((e=>{let{size:t,rank:o,rankText:s}=Tt.shortenBytes(n.dataset.size);if(t>=10&&o>=2){let o=n.querySelector("[data-file_preview]");o?(o.querySelector("[data-file_preview_container]").className="file_preview_container",o.querySelector("[data-file_preview_button]").className="file_preview_button",o.className="file_preview"):(o=Object.assign(document.createElement("div"),{className:"file_preview",innerHTML:`\n\t\t\t\t\t\t\t\t<div class="file_preview_container" data-file_preview_container>\n\t\t\t\t\t\t\t\t\t<div>10MB 이상의 파일은 당신의 데이터를 위해 미리보기를 제공하지 않습니다.</div>\n\t\t\t\t\t\t\t\t\t<div>미리보기를 클릭시 기능 제공을 위해 임시 저장소에 저장을 시작하며, 이는 추후 자동 삭제의 대상이 됩니다.</div>\n\t\t\t\t\t\t\t\t\t<div>이 파일의 용량 : ${t}${s}</div>\n\t\t\t\t\t\t\t\t\t<button class="file_preview_button" data-file_preview_button type="button">미리보기</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`}),o.dataset.file_preview=""),o.style.display="none",St.resourcesCallback=({status:e,resources:t})=>{"error"==e&&(o.style.display="")},o.onclick=e=>{e.stopPropagation()},o.dataset.visibility_not="",n.append(o);let i=o.querySelector(".file_preview_button");i.onclick=t=>{t.stopPropagation(),i.textContent="",i.className="loading_rotate",e(o)}}else e()})).then((s=>{document.body.closest;let i=`${ft.roomId}:${Nt.workspaceId}:${n.dataset.new_file_name}:${n.closest("[data-account_name]")?.dataset.account_name}`;Lt.callS3PresignedUrl(window.myAPI.s3.generateSecurityGetObjectPresignedUrl,i,{uploadType:n.dataset.upload_type,fileType:o}).then((o=>{if(!o)return;let{data:i,encDncKeyPair:r}=o,a=0,l=parseInt(n.dataset.size),c=Object.assign(document.createElement("progress"),{max:100,value:0});if(s){s.querySelector(".file_preview_container").append(c)}return Promise.all([Lt.convertBase64ToBuffer(i.encryptionKey).then((async e=>Lt.decryptMessage(r.privateKey,e,Lt.secretAlgorithm).then((e=>String.fromCharCode(...new Uint8Array(e)))))),Lt.convertBase64ToBuffer(i.encryptionMd).then((async e=>Lt.decryptMessage(r.privateKey,e,Lt.secretAlgorithm).then((e=>String.fromCharCode(...new Uint8Array(e))))))]).then((async([o,r])=>fetch(i.presignedUrl,{method:"GET",headers:{"Content-Encoding":"base64","Content-Type":"application/octet-stream","x-amz-server-side-encryption-customer-algorithm":"AES256","x-amz-server-side-encryption-customer-key":o,"x-amz-server-side-encryption-customer-key-md5":r}}).then((async e=>{if(200!=e.status&&201!=e.status)throw new Error("s3 connect failed");return e.body})).then((e=>{const t=e.getReader();return new ReadableStream({start:e=>function n(){return t.read().then((({done:t,value:o})=>{if(a+=o?.length||0,c.value=a/l*100,!t)return e.enqueue(o),n();e.close()}))}()})})).then((e=>new Response(e))).then((e=>e.blob())).then((async o=>{let s=new Blob([o],{type:n.dataset.content_type});return t.then((async()=>e.addItem({fileName:n.dataset.new_file_name,originFileName:n.dataset.name,fileData:s,lastModified:(new Date).getTime(),uploadType:n.dataset.upload_type,roomId:ft.roomId,workspaceId:Nt.workspaceId}).then((()=>window.URL.createObjectURL(s)))))})).then((e=>{n.image?n.image.src=e:n.video?n.video.src=e:n.resourcesUrl=e,s&&(s.replaceChildren(),s.parentElement.removeChild(s),s.remove())})).catch((e=>{console.error(e),console.error(e.message)}))))}))}))};Et.customImageCallback=e=>n(e),Ct.customVideoCallback=e=>n(e),St.customResourcesCallback=e=>n(e)}));const t=new IntersectionObserver(((e,t)=>{e.forEach((e=>{let{isIntersecting:t,target:n}=e;n.hasAttribute("slot")||n.hasAttribute("data-visibility_not")||(t?(n.style.visibility="",n.style.opacity="",n.dataset.visibility="v"):(n.style.visibility="hidden",n.style.opacity=0,n.dataset.visibility="h"))}))}),{threshold:.01,root:document});new MutationObserver(((e,n)=>{e.forEach((e=>{let{addedNodes:n,removedNodes:o}=e;new Promise((e=>{n.forEach((async e=>{e.nodeType!==Node.ELEMENT_NODE||e.nodeType===Node.ELEMENT_NODE&&e.hasAttribute("data-is_not_visible_target")||e.isContentEditable||new Promise((n=>{t.observe(e),n()}))})),e()})),new Promise((e=>{o.forEach((async e=>{e.nodeType!==Node.ELEMENT_NODE||e.nodeType===Node.ELEMENT_NODE&&e.hasAttribute("data-is_not_visible_target")||e.isContentEditable||new Promise((n=>{t.unobserve(e),n()}))})),e()}))}))})).observe(document,{childList:!0,subtree:!0})}}("multipleNoticeBoard"),window.addEventListener("DOMContentLoaded",(e=>{let t,n=new Promise((e=>{t=e}));window.myAPI.getWorkspaceId().then((e=>{null!=e&&t(e),window.myAPI.event.electronEventTrigger.addElectronEventListener("workspaceChange",(n=>{let o=n.workspaceId;e!=o&&null!=o&&t(o)}))})),n.then((e=>{document.querySelector("#main").append(noticeBoardDetail.element),noticeBoardDetail.element.dataset.is_resize=!1,noticeBoardDetail.element.grow=1,window.myAPI.event.electronEventTrigger.addElectronEventListener("noticeBoardChange",(e=>{noticeBoardHandler.noticeBoardId=e.noticeBoardId})),window.myAPI.stream.initWorkspaceStream({workspaceId:e})}))}))})();
//# sourceMappingURL=multipleNoticeBoardViewRenderer.js.map