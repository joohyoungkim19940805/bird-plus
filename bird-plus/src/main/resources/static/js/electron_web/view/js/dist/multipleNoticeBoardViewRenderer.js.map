{"version":3,"file":"multipleNoticeBoardViewRenderer.js","mappings":"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","sources":["webpack://mobile/webpack/bootstrap","webpack://mobile/webpack/runtime/define property getters","webpack://mobile/webpack/runtime/hasOwnProperty shorthand","webpack://mobile/webpack/runtime/make namespace object","webpack://mobile/./node_modules/axios/lib/helpers/bind.js","webpack://mobile/./node_modules/axios/lib/utils.js","webpack://mobile/./node_modules/axios/lib/core/AxiosError.js","webpack://mobile/./node_modules/axios/lib/helpers/toFormData.js","webpack://mobile/./node_modules/axios/lib/helpers/AxiosURLSearchParams.js","webpack://mobile/./node_modules/axios/lib/helpers/buildURL.js","webpack://mobile/./node_modules/axios/lib/core/InterceptorManager.js","webpack://mobile/./node_modules/axios/lib/defaults/transitional.js","webpack://mobile/./node_modules/axios/lib/platform/browser/index.js","webpack://mobile/./node_modules/axios/lib/platform/browser/classes/URLSearchParams.js","webpack://mobile/./node_modules/axios/lib/platform/browser/classes/FormData.js","webpack://mobile/./node_modules/axios/lib/platform/browser/classes/Blob.js","webpack://mobile/./node_modules/axios/lib/platform/common/utils.js","webpack://mobile/./node_modules/axios/lib/platform/index.js","webpack://mobile/./node_modules/axios/lib/helpers/formDataToJSON.js","webpack://mobile/./node_modules/axios/lib/defaults/index.js","webpack://mobile/./node_modules/axios/lib/helpers/toURLEncodedForm.js","webpack://mobile/./node_modules/axios/lib/helpers/parseHeaders.js","webpack://mobile/./node_modules/axios/lib/core/AxiosHeaders.js","webpack://mobile/./node_modules/axios/lib/core/transformData.js","webpack://mobile/./node_modules/axios/lib/cancel/isCancel.js","webpack://mobile/./node_modules/axios/lib/cancel/CanceledError.js","webpack://mobile/./node_modules/axios/lib/helpers/cookies.js","webpack://mobile/./node_modules/axios/lib/core/buildFullPath.js","webpack://mobile/./node_modules/axios/lib/helpers/isAbsoluteURL.js","webpack://mobile/./node_modules/axios/lib/helpers/combineURLs.js","webpack://mobile/./node_modules/axios/lib/helpers/isURLSameOrigin.js","webpack://mobile/./node_modules/axios/lib/helpers/speedometer.js","webpack://mobile/./node_modules/axios/lib/adapters/xhr.js","webpack://mobile/./node_modules/axios/lib/adapters/adapters.js","webpack://mobile/./node_modules/axios/lib/helpers/null.js","webpack://mobile/./node_modules/axios/lib/core/settle.js","webpack://mobile/./node_modules/axios/lib/helpers/parseProtocol.js","webpack://mobile/./node_modules/axios/lib/core/dispatchRequest.js","webpack://mobile/./node_modules/axios/lib/core/mergeConfig.js","webpack://mobile/./node_modules/axios/lib/env/data.js","webpack://mobile/./node_modules/axios/lib/helpers/validator.js","webpack://mobile/./node_modules/axios/lib/core/Axios.js","webpack://mobile/./node_modules/axios/lib/cancel/CancelToken.js","webpack://mobile/./node_modules/axios/lib/helpers/HttpStatusCode.js","webpack://mobile/./node_modules/axios/lib/axios.js","webpack://mobile/./node_modules/axios/lib/helpers/spread.js","webpack://mobile/./node_modules/axios/lib/helpers/isAxiosError.js","webpack://mobile/./browser/window/windowUtil.js","webpack://mobile/./browser/controller/AccountController.js","webpack://mobile/./browser/controller/ApiS3Controller.js","webpack://mobile/./browser/controller/ChattingController.js","webpack://mobile/./browser/controller/EmoticonController.js","webpack://mobile/./browser/controller/EventStreamController.js","webpack://mobile/./browser/controller/NoticeBoardController.js","webpack://mobile/./browser/controller/RoomController.js","webpack://mobile/./browser/controller/WorkspaceController.js","webpack://mobile/./browser/preload/preload.js","webpack://mobile/./view/js/handler/notice_board/NoticeBoardHandler.js","webpack://mobile/./view/js/handler/editor/module/ToolHandler.js","webpack://mobile/./view/js/handler/editor/module/FreedomInterface.js","webpack://mobile/./view/js/handler/editor/component/Line.js","webpack://mobile/./view/js/handler/editor/module/FreeWiilHandler.js","webpack://mobile/./view/js/handler/editor/fragment/UndoManager.js","webpack://mobile/./view/js/handler/editor/tools/Strong.js","webpack://mobile/./view/js/handler/editor/component/Palette.js","webpack://mobile/./view/js/handler/editor/tools/Color.js","webpack://mobile/./view/js/handler/editor/tools/Background.js","webpack://mobile/./view/js/handler/editor/tools/Strikethrough.js","webpack://mobile/./view/js/handler/editor/tools/Underline.js","webpack://mobile/./view/js/handler/editor/component/FontFamilyBox.js","webpack://mobile/./view/js/handler/editor/tools/FontFamily.js","webpack://mobile/./view/js/handler/editor/tools/Quote.js","webpack://mobile/./view/js/handler/editor/tools/NumericPoint.js","webpack://mobile/./view/js/handler/editor/tools/BulletPoint.js","webpack://mobile/./view/js/handler/editor/component/SortBox.js","webpack://mobile/./view/js/handler/editor/tools/Sort.js","webpack://mobile/./view/js/handler/editor/component/FontSizeBox.js","webpack://mobile/./view/js/handler/editor/tools/FontSize.js","webpack://mobile/./view/js/handler/editor/tools/Italic.js","webpack://mobile/./view/js/handler/editor/component/ImageBox.js","webpack://mobile/./view/js/handler/editor/tools/Image.js","webpack://mobile/./view/js/handler/editor/component/VideoBox.js","webpack://mobile/./view/js/handler/editor/tools/Video.js","webpack://mobile/./view/js/handler/editor/tools/Resources.js","webpack://mobile/./view/js/handler/editor/tools/Code.js","webpack://mobile/./view/js/handler/editor/component/HyperlinkBox.js","webpack://mobile/./view/js/handler/editor/tools/Hyperlink.js","webpack://mobile/./view/js/handler/editor/FreeWillEditor.js","webpack://mobile/./view/js/handler/workspace/WorkspaceHandler.js","webpack://mobile/./view/js/handler/room/RoomHandler.js","webpack://mobile/./view/js/common.js","webpack://mobile/./view/js/handler/PositionChangeer.js","webpack://mobile/./view/js/handler/account/AccountHandler.js","webpack://mobile/./view/js/handler/S3EncryptionUtil.js","webpack://mobile/./view/js/component/notice_board/notice_board_item/NoticeBoardDetail.js","webpack://mobile/./view/js/handler/IndexedDBHandler.js","webpack://mobile/./view/js/CommonInit.js","webpack://mobile/./view/js/component/layer/LayerPopupTemplate.js","webpack://mobile/./view/js/component/layer/GiveAdminView.js","webpack://mobile/./view/js/component/option/SimpleOption.js","webpack://mobile/./view/js/renderer/multipleNoticeBoardViewRenderer.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","'use strict';\n\nexport default function bind(fn, thisArg) {\n  return function wrap() {\n    return fn.apply(thisArg, arguments);\n  };\n}\n","'use strict';\n\nimport bind from './helpers/bind.js';\n\n// utils is a library of generic helper functions non-specific to axios\n\nconst {toString} = Object.prototype;\nconst {getPrototypeOf} = Object;\n\nconst kindOf = (cache => thing => {\n    const str = toString.call(thing);\n    return cache[str] || (cache[str] = str.slice(8, -1).toLowerCase());\n})(Object.create(null));\n\nconst kindOfTest = (type) => {\n  type = type.toLowerCase();\n  return (thing) => kindOf(thing) === type\n}\n\nconst typeOfTest = type => thing => typeof thing === type;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n *\n * @returns {boolean} True if value is an Array, otherwise false\n */\nconst {isArray} = Array;\n\n/**\n * Determine if a value is undefined\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nconst isUndefined = typeOfTest('undefined');\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && isFunction(val.constructor.isBuffer) && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nconst isArrayBuffer = kindOfTest('ArrayBuffer');\n\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  let result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (isArrayBuffer(val.buffer));\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a String, otherwise false\n */\nconst isString = typeOfTest('string');\n\n/**\n * Determine if a value is a Function\n *\n * @param {*} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nconst isFunction = typeOfTest('function');\n\n/**\n * Determine if a value is a Number\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Number, otherwise false\n */\nconst isNumber = typeOfTest('number');\n\n/**\n * Determine if a value is an Object\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an Object, otherwise false\n */\nconst isObject = (thing) => thing !== null && typeof thing === 'object';\n\n/**\n * Determine if a value is a Boolean\n *\n * @param {*} thing The value to test\n * @returns {boolean} True if value is a Boolean, otherwise false\n */\nconst isBoolean = thing => thing === true || thing === false;\n\n/**\n * Determine if a value is a plain Object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a plain Object, otherwise false\n */\nconst isPlainObject = (val) => {\n  if (kindOf(val) !== 'object') {\n    return false;\n  }\n\n  const prototype = getPrototypeOf(val);\n  return (prototype === null || prototype === Object.prototype || Object.getPrototypeOf(prototype) === null) && !(Symbol.toStringTag in val) && !(Symbol.iterator in val);\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Date, otherwise false\n */\nconst isDate = kindOfTest('Date');\n\n/**\n * Determine if a value is a File\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFile = kindOfTest('File');\n\n/**\n * Determine if a value is a Blob\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nconst isBlob = kindOfTest('Blob');\n\n/**\n * Determine if a value is a FileList\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFileList = kindOfTest('FileList');\n\n/**\n * Determine if a value is a Stream\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nconst isStream = (val) => isObject(val) && isFunction(val.pipe);\n\n/**\n * Determine if a value is a FormData\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nconst isFormData = (thing) => {\n  let kind;\n  return thing && (\n    (typeof FormData === 'function' && thing instanceof FormData) || (\n      isFunction(thing.append) && (\n        (kind = kindOf(thing)) === 'formdata' ||\n        // detect form-data instance\n        (kind === 'object' && isFunction(thing.toString) && thing.toString() === '[object FormData]')\n      )\n    )\n  )\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nconst isURLSearchParams = kindOfTest('URLSearchParams');\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n *\n * @returns {String} The String freed of excess whitespace\n */\nconst trim = (str) => str.trim ?\n  str.trim() : str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n *\n * @param {Boolean} [allOwnKeys = false]\n * @returns {any}\n */\nfunction forEach(obj, fn, {allOwnKeys = false} = {}) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  let i;\n  let l;\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    const keys = allOwnKeys ? Object.getOwnPropertyNames(obj) : Object.keys(obj);\n    const len = keys.length;\n    let key;\n\n    for (i = 0; i < len; i++) {\n      key = keys[i];\n      fn.call(null, obj[key], key, obj);\n    }\n  }\n}\n\nfunction findKey(obj, key) {\n  key = key.toLowerCase();\n  const keys = Object.keys(obj);\n  let i = keys.length;\n  let _key;\n  while (i-- > 0) {\n    _key = keys[i];\n    if (key === _key.toLowerCase()) {\n      return _key;\n    }\n  }\n  return null;\n}\n\nconst _global = (() => {\n  /*eslint no-undef:0*/\n  if (typeof globalThis !== \"undefined\") return globalThis;\n  return typeof self !== \"undefined\" ? self : (typeof window !== 'undefined' ? window : global)\n})();\n\nconst isContextDefined = (context) => !isUndefined(context) && context !== _global;\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n *\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  const {caseless} = isContextDefined(this) && this || {};\n  const result = {};\n  const assignValue = (val, key) => {\n    const targetKey = caseless && findKey(result, key) || key;\n    if (isPlainObject(result[targetKey]) && isPlainObject(val)) {\n      result[targetKey] = merge(result[targetKey], val);\n    } else if (isPlainObject(val)) {\n      result[targetKey] = merge({}, val);\n    } else if (isArray(val)) {\n      result[targetKey] = val.slice();\n    } else {\n      result[targetKey] = val;\n    }\n  }\n\n  for (let i = 0, l = arguments.length; i < l; i++) {\n    arguments[i] && forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n *\n * @param {Boolean} [allOwnKeys]\n * @returns {Object} The resulting value of object a\n */\nconst extend = (a, b, thisArg, {allOwnKeys}= {}) => {\n  forEach(b, (val, key) => {\n    if (thisArg && isFunction(val)) {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  }, {allOwnKeys});\n  return a;\n}\n\n/**\n * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n *\n * @param {string} content with BOM\n *\n * @returns {string} content value without BOM\n */\nconst stripBOM = (content) => {\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1);\n  }\n  return content;\n}\n\n/**\n * Inherit the prototype methods from one constructor into another\n * @param {function} constructor\n * @param {function} superConstructor\n * @param {object} [props]\n * @param {object} [descriptors]\n *\n * @returns {void}\n */\nconst inherits = (constructor, superConstructor, props, descriptors) => {\n  constructor.prototype = Object.create(superConstructor.prototype, descriptors);\n  constructor.prototype.constructor = constructor;\n  Object.defineProperty(constructor, 'super', {\n    value: superConstructor.prototype\n  });\n  props && Object.assign(constructor.prototype, props);\n}\n\n/**\n * Resolve object with deep prototype chain to a flat object\n * @param {Object} sourceObj source object\n * @param {Object} [destObj]\n * @param {Function|Boolean} [filter]\n * @param {Function} [propFilter]\n *\n * @returns {Object}\n */\nconst toFlatObject = (sourceObj, destObj, filter, propFilter) => {\n  let props;\n  let i;\n  let prop;\n  const merged = {};\n\n  destObj = destObj || {};\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  if (sourceObj == null) return destObj;\n\n  do {\n    props = Object.getOwnPropertyNames(sourceObj);\n    i = props.length;\n    while (i-- > 0) {\n      prop = props[i];\n      if ((!propFilter || propFilter(prop, sourceObj, destObj)) && !merged[prop]) {\n        destObj[prop] = sourceObj[prop];\n        merged[prop] = true;\n      }\n    }\n    sourceObj = filter !== false && getPrototypeOf(sourceObj);\n  } while (sourceObj && (!filter || filter(sourceObj, destObj)) && sourceObj !== Object.prototype);\n\n  return destObj;\n}\n\n/**\n * Determines whether a string ends with the characters of a specified string\n *\n * @param {String} str\n * @param {String} searchString\n * @param {Number} [position= 0]\n *\n * @returns {boolean}\n */\nconst endsWith = (str, searchString, position) => {\n  str = String(str);\n  if (position === undefined || position > str.length) {\n    position = str.length;\n  }\n  position -= searchString.length;\n  const lastIndex = str.indexOf(searchString, position);\n  return lastIndex !== -1 && lastIndex === position;\n}\n\n\n/**\n * Returns new array from array like object or null if failed\n *\n * @param {*} [thing]\n *\n * @returns {?Array}\n */\nconst toArray = (thing) => {\n  if (!thing) return null;\n  if (isArray(thing)) return thing;\n  let i = thing.length;\n  if (!isNumber(i)) return null;\n  const arr = new Array(i);\n  while (i-- > 0) {\n    arr[i] = thing[i];\n  }\n  return arr;\n}\n\n/**\n * Checking if the Uint8Array exists and if it does, it returns a function that checks if the\n * thing passed in is an instance of Uint8Array\n *\n * @param {TypedArray}\n *\n * @returns {Array}\n */\n// eslint-disable-next-line func-names\nconst isTypedArray = (TypedArray => {\n  // eslint-disable-next-line func-names\n  return thing => {\n    return TypedArray && thing instanceof TypedArray;\n  };\n})(typeof Uint8Array !== 'undefined' && getPrototypeOf(Uint8Array));\n\n/**\n * For each entry in the object, call the function with the key and value.\n *\n * @param {Object<any, any>} obj - The object to iterate over.\n * @param {Function} fn - The function to call for each entry.\n *\n * @returns {void}\n */\nconst forEachEntry = (obj, fn) => {\n  const generator = obj && obj[Symbol.iterator];\n\n  const iterator = generator.call(obj);\n\n  let result;\n\n  while ((result = iterator.next()) && !result.done) {\n    const pair = result.value;\n    fn.call(obj, pair[0], pair[1]);\n  }\n}\n\n/**\n * It takes a regular expression and a string, and returns an array of all the matches\n *\n * @param {string} regExp - The regular expression to match against.\n * @param {string} str - The string to search.\n *\n * @returns {Array<boolean>}\n */\nconst matchAll = (regExp, str) => {\n  let matches;\n  const arr = [];\n\n  while ((matches = regExp.exec(str)) !== null) {\n    arr.push(matches);\n  }\n\n  return arr;\n}\n\n/* Checking if the kindOfTest function returns true when passed an HTMLFormElement. */\nconst isHTMLForm = kindOfTest('HTMLFormElement');\n\nconst toCamelCase = str => {\n  return str.toLowerCase().replace(/[-_\\s]([a-z\\d])(\\w*)/g,\n    function replacer(m, p1, p2) {\n      return p1.toUpperCase() + p2;\n    }\n  );\n};\n\n/* Creating a function that will check if an object has a property. */\nconst hasOwnProperty = (({hasOwnProperty}) => (obj, prop) => hasOwnProperty.call(obj, prop))(Object.prototype);\n\n/**\n * Determine if a value is a RegExp object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a RegExp object, otherwise false\n */\nconst isRegExp = kindOfTest('RegExp');\n\nconst reduceDescriptors = (obj, reducer) => {\n  const descriptors = Object.getOwnPropertyDescriptors(obj);\n  const reducedDescriptors = {};\n\n  forEach(descriptors, (descriptor, name) => {\n    let ret;\n    if ((ret = reducer(descriptor, name, obj)) !== false) {\n      reducedDescriptors[name] = ret || descriptor;\n    }\n  });\n\n  Object.defineProperties(obj, reducedDescriptors);\n}\n\n/**\n * Makes all methods read-only\n * @param {Object} obj\n */\n\nconst freezeMethods = (obj) => {\n  reduceDescriptors(obj, (descriptor, name) => {\n    // skip restricted props in strict mode\n    if (isFunction(obj) && ['arguments', 'caller', 'callee'].indexOf(name) !== -1) {\n      return false;\n    }\n\n    const value = obj[name];\n\n    if (!isFunction(value)) return;\n\n    descriptor.enumerable = false;\n\n    if ('writable' in descriptor) {\n      descriptor.writable = false;\n      return;\n    }\n\n    if (!descriptor.set) {\n      descriptor.set = () => {\n        throw Error('Can not rewrite read-only method \\'' + name + '\\'');\n      };\n    }\n  });\n}\n\nconst toObjectSet = (arrayOrString, delimiter) => {\n  const obj = {};\n\n  const define = (arr) => {\n    arr.forEach(value => {\n      obj[value] = true;\n    });\n  }\n\n  isArray(arrayOrString) ? define(arrayOrString) : define(String(arrayOrString).split(delimiter));\n\n  return obj;\n}\n\nconst noop = () => {}\n\nconst toFiniteNumber = (value, defaultValue) => {\n  value = +value;\n  return Number.isFinite(value) ? value : defaultValue;\n}\n\nconst ALPHA = 'abcdefghijklmnopqrstuvwxyz'\n\nconst DIGIT = '0123456789';\n\nconst ALPHABET = {\n  DIGIT,\n  ALPHA,\n  ALPHA_DIGIT: ALPHA + ALPHA.toUpperCase() + DIGIT\n}\n\nconst generateString = (size = 16, alphabet = ALPHABET.ALPHA_DIGIT) => {\n  let str = '';\n  const {length} = alphabet;\n  while (size--) {\n    str += alphabet[Math.random() * length|0]\n  }\n\n  return str;\n}\n\n/**\n * If the thing is a FormData object, return true, otherwise return false.\n *\n * @param {unknown} thing - The thing to check.\n *\n * @returns {boolean}\n */\nfunction isSpecCompliantForm(thing) {\n  return !!(thing && isFunction(thing.append) && thing[Symbol.toStringTag] === 'FormData' && thing[Symbol.iterator]);\n}\n\nconst toJSONObject = (obj) => {\n  const stack = new Array(10);\n\n  const visit = (source, i) => {\n\n    if (isObject(source)) {\n      if (stack.indexOf(source) >= 0) {\n        return;\n      }\n\n      if(!('toJSON' in source)) {\n        stack[i] = source;\n        const target = isArray(source) ? [] : {};\n\n        forEach(source, (value, key) => {\n          const reducedValue = visit(value, i + 1);\n          !isUndefined(reducedValue) && (target[key] = reducedValue);\n        });\n\n        stack[i] = undefined;\n\n        return target;\n      }\n    }\n\n    return source;\n  }\n\n  return visit(obj, 0);\n}\n\nconst isAsyncFn = kindOfTest('AsyncFunction');\n\nconst isThenable = (thing) =>\n  thing && (isObject(thing) || isFunction(thing)) && isFunction(thing.then) && isFunction(thing.catch);\n\nexport default {\n  isArray,\n  isArrayBuffer,\n  isBuffer,\n  isFormData,\n  isArrayBufferView,\n  isString,\n  isNumber,\n  isBoolean,\n  isObject,\n  isPlainObject,\n  isUndefined,\n  isDate,\n  isFile,\n  isBlob,\n  isRegExp,\n  isFunction,\n  isStream,\n  isURLSearchParams,\n  isTypedArray,\n  isFileList,\n  forEach,\n  merge,\n  extend,\n  trim,\n  stripBOM,\n  inherits,\n  toFlatObject,\n  kindOf,\n  kindOfTest,\n  endsWith,\n  toArray,\n  forEachEntry,\n  matchAll,\n  isHTMLForm,\n  hasOwnProperty,\n  hasOwnProp: hasOwnProperty, // an alias to avoid ESLint no-prototype-builtins detection\n  reduceDescriptors,\n  freezeMethods,\n  toObjectSet,\n  toCamelCase,\n  noop,\n  toFiniteNumber,\n  findKey,\n  global: _global,\n  isContextDefined,\n  ALPHABET,\n  generateString,\n  isSpecCompliantForm,\n  toJSONObject,\n  isAsyncFn,\n  isThenable\n};\n","'use strict';\n\nimport utils from '../utils.js';\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [config] The config.\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n *\n * @returns {Error} The created error.\n */\nfunction AxiosError(message, code, config, request, response) {\n  Error.call(this);\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, this.constructor);\n  } else {\n    this.stack = (new Error()).stack;\n  }\n\n  this.message = message;\n  this.name = 'AxiosError';\n  code && (this.code = code);\n  config && (this.config = config);\n  request && (this.request = request);\n  response && (this.response = response);\n}\n\nutils.inherits(AxiosError, Error, {\n  toJSON: function toJSON() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: utils.toJSONObject(this.config),\n      code: this.code,\n      status: this.response && this.response.status ? this.response.status : null\n    };\n  }\n});\n\nconst prototype = AxiosError.prototype;\nconst descriptors = {};\n\n[\n  'ERR_BAD_OPTION_VALUE',\n  'ERR_BAD_OPTION',\n  'ECONNABORTED',\n  'ETIMEDOUT',\n  'ERR_NETWORK',\n  'ERR_FR_TOO_MANY_REDIRECTS',\n  'ERR_DEPRECATED',\n  'ERR_BAD_RESPONSE',\n  'ERR_BAD_REQUEST',\n  'ERR_CANCELED',\n  'ERR_NOT_SUPPORT',\n  'ERR_INVALID_URL'\n// eslint-disable-next-line func-names\n].forEach(code => {\n  descriptors[code] = {value: code};\n});\n\nObject.defineProperties(AxiosError, descriptors);\nObject.defineProperty(prototype, 'isAxiosError', {value: true});\n\n// eslint-disable-next-line func-names\nAxiosError.from = (error, code, config, request, response, customProps) => {\n  const axiosError = Object.create(prototype);\n\n  utils.toFlatObject(error, axiosError, function filter(obj) {\n    return obj !== Error.prototype;\n  }, prop => {\n    return prop !== 'isAxiosError';\n  });\n\n  AxiosError.call(axiosError, error.message, code, config, request, response);\n\n  axiosError.cause = error;\n\n  axiosError.name = error.name;\n\n  customProps && Object.assign(axiosError, customProps);\n\n  return axiosError;\n};\n\nexport default AxiosError;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\n// temporary hotfix to avoid circular references until AxiosURLSearchParams is refactored\nimport PlatformFormData from '../platform/node/classes/FormData.js';\n\n/**\n * Determines if the given thing is a array or js object.\n *\n * @param {string} thing - The object or array to be visited.\n *\n * @returns {boolean}\n */\nfunction isVisitable(thing) {\n  return utils.isPlainObject(thing) || utils.isArray(thing);\n}\n\n/**\n * It removes the brackets from the end of a string\n *\n * @param {string} key - The key of the parameter.\n *\n * @returns {string} the key without the brackets.\n */\nfunction removeBrackets(key) {\n  return utils.endsWith(key, '[]') ? key.slice(0, -2) : key;\n}\n\n/**\n * It takes a path, a key, and a boolean, and returns a string\n *\n * @param {string} path - The path to the current key.\n * @param {string} key - The key of the current object being iterated over.\n * @param {string} dots - If true, the key will be rendered with dots instead of brackets.\n *\n * @returns {string} The path to the current key.\n */\nfunction renderKey(path, key, dots) {\n  if (!path) return key;\n  return path.concat(key).map(function each(token, i) {\n    // eslint-disable-next-line no-param-reassign\n    token = removeBrackets(token);\n    return !dots && i ? '[' + token + ']' : token;\n  }).join(dots ? '.' : '');\n}\n\n/**\n * If the array is an array and none of its elements are visitable, then it's a flat array.\n *\n * @param {Array<any>} arr - The array to check\n *\n * @returns {boolean}\n */\nfunction isFlatArray(arr) {\n  return utils.isArray(arr) && !arr.some(isVisitable);\n}\n\nconst predicates = utils.toFlatObject(utils, {}, null, function filter(prop) {\n  return /^is[A-Z]/.test(prop);\n});\n\n/**\n * Convert a data object to FormData\n *\n * @param {Object} obj\n * @param {?Object} [formData]\n * @param {?Object} [options]\n * @param {Function} [options.visitor]\n * @param {Boolean} [options.metaTokens = true]\n * @param {Boolean} [options.dots = false]\n * @param {?Boolean} [options.indexes = false]\n *\n * @returns {Object}\n **/\n\n/**\n * It converts an object into a FormData object\n *\n * @param {Object<any, any>} obj - The object to convert to form data.\n * @param {string} formData - The FormData object to append to.\n * @param {Object<string, any>} options\n *\n * @returns\n */\nfunction toFormData(obj, formData, options) {\n  if (!utils.isObject(obj)) {\n    throw new TypeError('target must be an object');\n  }\n\n  // eslint-disable-next-line no-param-reassign\n  formData = formData || new (PlatformFormData || FormData)();\n\n  // eslint-disable-next-line no-param-reassign\n  options = utils.toFlatObject(options, {\n    metaTokens: true,\n    dots: false,\n    indexes: false\n  }, false, function defined(option, source) {\n    // eslint-disable-next-line no-eq-null,eqeqeq\n    return !utils.isUndefined(source[option]);\n  });\n\n  const metaTokens = options.metaTokens;\n  // eslint-disable-next-line no-use-before-define\n  const visitor = options.visitor || defaultVisitor;\n  const dots = options.dots;\n  const indexes = options.indexes;\n  const _Blob = options.Blob || typeof Blob !== 'undefined' && Blob;\n  const useBlob = _Blob && utils.isSpecCompliantForm(formData);\n\n  if (!utils.isFunction(visitor)) {\n    throw new TypeError('visitor must be a function');\n  }\n\n  function convertValue(value) {\n    if (value === null) return '';\n\n    if (utils.isDate(value)) {\n      return value.toISOString();\n    }\n\n    if (!useBlob && utils.isBlob(value)) {\n      throw new AxiosError('Blob is not supported. Use a Buffer instead.');\n    }\n\n    if (utils.isArrayBuffer(value) || utils.isTypedArray(value)) {\n      return useBlob && typeof Blob === 'function' ? new Blob([value]) : Buffer.from(value);\n    }\n\n    return value;\n  }\n\n  /**\n   * Default visitor.\n   *\n   * @param {*} value\n   * @param {String|Number} key\n   * @param {Array<String|Number>} path\n   * @this {FormData}\n   *\n   * @returns {boolean} return true to visit the each prop of the value recursively\n   */\n  function defaultVisitor(value, key, path) {\n    let arr = value;\n\n    if (value && !path && typeof value === 'object') {\n      if (utils.endsWith(key, '{}')) {\n        // eslint-disable-next-line no-param-reassign\n        key = metaTokens ? key : key.slice(0, -2);\n        // eslint-disable-next-line no-param-reassign\n        value = JSON.stringify(value);\n      } else if (\n        (utils.isArray(value) && isFlatArray(value)) ||\n        ((utils.isFileList(value) || utils.endsWith(key, '[]')) && (arr = utils.toArray(value))\n        )) {\n        // eslint-disable-next-line no-param-reassign\n        key = removeBrackets(key);\n\n        arr.forEach(function each(el, index) {\n          !(utils.isUndefined(el) || el === null) && formData.append(\n            // eslint-disable-next-line no-nested-ternary\n            indexes === true ? renderKey([key], index, dots) : (indexes === null ? key : key + '[]'),\n            convertValue(el)\n          );\n        });\n        return false;\n      }\n    }\n\n    if (isVisitable(value)) {\n      return true;\n    }\n\n    formData.append(renderKey(path, key, dots), convertValue(value));\n\n    return false;\n  }\n\n  const stack = [];\n\n  const exposedHelpers = Object.assign(predicates, {\n    defaultVisitor,\n    convertValue,\n    isVisitable\n  });\n\n  function build(value, path) {\n    if (utils.isUndefined(value)) return;\n\n    if (stack.indexOf(value) !== -1) {\n      throw Error('Circular reference detected in ' + path.join('.'));\n    }\n\n    stack.push(value);\n\n    utils.forEach(value, function each(el, key) {\n      const result = !(utils.isUndefined(el) || el === null) && visitor.call(\n        formData, el, utils.isString(key) ? key.trim() : key, path, exposedHelpers\n      );\n\n      if (result === true) {\n        build(el, path ? path.concat(key) : [key]);\n      }\n    });\n\n    stack.pop();\n  }\n\n  if (!utils.isObject(obj)) {\n    throw new TypeError('data must be an object');\n  }\n\n  build(obj);\n\n  return formData;\n}\n\nexport default toFormData;\n","'use strict';\n\nimport toFormData from './toFormData.js';\n\n/**\n * It encodes a string by replacing all characters that are not in the unreserved set with\n * their percent-encoded equivalents\n *\n * @param {string} str - The string to encode.\n *\n * @returns {string} The encoded string.\n */\nfunction encode(str) {\n  const charMap = {\n    '!': '%21',\n    \"'\": '%27',\n    '(': '%28',\n    ')': '%29',\n    '~': '%7E',\n    '%20': '+',\n    '%00': '\\x00'\n  };\n  return encodeURIComponent(str).replace(/[!'()~]|%20|%00/g, function replacer(match) {\n    return charMap[match];\n  });\n}\n\n/**\n * It takes a params object and converts it to a FormData object\n *\n * @param {Object<string, any>} params - The parameters to be converted to a FormData object.\n * @param {Object<string, any>} options - The options object passed to the Axios constructor.\n *\n * @returns {void}\n */\nfunction AxiosURLSearchParams(params, options) {\n  this._pairs = [];\n\n  params && toFormData(params, this, options);\n}\n\nconst prototype = AxiosURLSearchParams.prototype;\n\nprototype.append = function append(name, value) {\n  this._pairs.push([name, value]);\n};\n\nprototype.toString = function toString(encoder) {\n  const _encode = encoder ? function(value) {\n    return encoder.call(this, value, encode);\n  } : encode;\n\n  return this._pairs.map(function each(pair) {\n    return _encode(pair[0]) + '=' + _encode(pair[1]);\n  }, '').join('&');\n};\n\nexport default AxiosURLSearchParams;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosURLSearchParams from '../helpers/AxiosURLSearchParams.js';\n\n/**\n * It replaces all instances of the characters `:`, `$`, `,`, `+`, `[`, and `]` with their\n * URI encoded counterparts\n *\n * @param {string} val The value to be encoded.\n *\n * @returns {string} The encoded value.\n */\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @param {?object} options\n *\n * @returns {string} The formatted url\n */\nexport default function buildURL(url, params, options) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n  \n  const _encode = options && options.encode || encode;\n\n  const serializeFn = options && options.serialize;\n\n  let serializedParams;\n\n  if (serializeFn) {\n    serializedParams = serializeFn(params, options);\n  } else {\n    serializedParams = utils.isURLSearchParams(params) ?\n      params.toString() :\n      new AxiosURLSearchParams(params, options).toString(_encode);\n  }\n\n  if (serializedParams) {\n    const hashmarkIndex = url.indexOf(\"#\");\n\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\nclass InterceptorManager {\n  constructor() {\n    this.handlers = [];\n  }\n\n  /**\n   * Add a new interceptor to the stack\n   *\n   * @param {Function} fulfilled The function to handle `then` for a `Promise`\n   * @param {Function} rejected The function to handle `reject` for a `Promise`\n   *\n   * @return {Number} An ID used to remove interceptor later\n   */\n  use(fulfilled, rejected, options) {\n    this.handlers.push({\n      fulfilled,\n      rejected,\n      synchronous: options ? options.synchronous : false,\n      runWhen: options ? options.runWhen : null\n    });\n    return this.handlers.length - 1;\n  }\n\n  /**\n   * Remove an interceptor from the stack\n   *\n   * @param {Number} id The ID that was returned by `use`\n   *\n   * @returns {Boolean} `true` if the interceptor was removed, `false` otherwise\n   */\n  eject(id) {\n    if (this.handlers[id]) {\n      this.handlers[id] = null;\n    }\n  }\n\n  /**\n   * Clear all interceptors from the stack\n   *\n   * @returns {void}\n   */\n  clear() {\n    if (this.handlers) {\n      this.handlers = [];\n    }\n  }\n\n  /**\n   * Iterate over all the registered interceptors\n   *\n   * This method is particularly useful for skipping over any\n   * interceptors that may have become `null` calling `eject`.\n   *\n   * @param {Function} fn The function to call for each interceptor\n   *\n   * @returns {void}\n   */\n  forEach(fn) {\n    utils.forEach(this.handlers, function forEachHandler(h) {\n      if (h !== null) {\n        fn(h);\n      }\n    });\n  }\n}\n\nexport default InterceptorManager;\n","'use strict';\n\nexport default {\n  silentJSONParsing: true,\n  forcedJSONParsing: true,\n  clarifyTimeoutError: false\n};\n","import URLSearchParams from './classes/URLSearchParams.js'\nimport FormData from './classes/FormData.js'\nimport Blob from './classes/Blob.js'\n\nexport default {\n  isBrowser: true,\n  classes: {\n    URLSearchParams,\n    FormData,\n    Blob\n  },\n  protocols: ['http', 'https', 'file', 'blob', 'url', 'data']\n};\n","'use strict';\n\nimport AxiosURLSearchParams from '../../../helpers/AxiosURLSearchParams.js';\nexport default typeof URLSearchParams !== 'undefined' ? URLSearchParams : AxiosURLSearchParams;\n","'use strict';\n\nexport default typeof FormData !== 'undefined' ? FormData : null;\n","'use strict'\n\nexport default typeof Blob !== 'undefined' ? Blob : null\n","const hasBrowserEnv = typeof window !== 'undefined' && typeof document !== 'undefined';\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n *\n * @returns {boolean}\n */\nconst hasStandardBrowserEnv = (\n  (product) => {\n    return hasBrowserEnv && ['ReactNative', 'NativeScript', 'NS'].indexOf(product) < 0\n  })(typeof navigator !== 'undefined' && navigator.product);\n\n/**\n * Determine if we're running in a standard browser webWorker environment\n *\n * Although the `isStandardBrowserEnv` method indicates that\n * `allows axios to run in a web worker`, the WebWorker will still be\n * filtered out due to its judgment standard\n * `typeof window !== 'undefined' && typeof document !== 'undefined'`.\n * This leads to a problem when axios post `FormData` in webWorker\n */\nconst hasStandardBrowserWebWorkerEnv = (() => {\n  return (\n    typeof WorkerGlobalScope !== 'undefined' &&\n    // eslint-disable-next-line no-undef\n    self instanceof WorkerGlobalScope &&\n    typeof self.importScripts === 'function'\n  );\n})();\n\nexport {\n  hasBrowserEnv,\n  hasStandardBrowserWebWorkerEnv,\n  hasStandardBrowserEnv\n}\n","import platform from './node/index.js';\nimport * as utils from './common/utils.js';\n\nexport default {\n  ...utils,\n  ...platform\n}\n","'use strict';\n\nimport utils from '../utils.js';\n\n/**\n * It takes a string like `foo[x][y][z]` and returns an array like `['foo', 'x', 'y', 'z']\n *\n * @param {string} name - The name of the property to get.\n *\n * @returns An array of strings.\n */\nfunction parsePropPath(name) {\n  // foo[x][y][z]\n  // foo.x.y.z\n  // foo-x-y-z\n  // foo x y z\n  return utils.matchAll(/\\w+|\\[(\\w*)]/g, name).map(match => {\n    return match[0] === '[]' ? '' : match[1] || match[0];\n  });\n}\n\n/**\n * Convert an array to an object.\n *\n * @param {Array<any>} arr - The array to convert to an object.\n *\n * @returns An object with the same keys and values as the array.\n */\nfunction arrayToObject(arr) {\n  const obj = {};\n  const keys = Object.keys(arr);\n  let i;\n  const len = keys.length;\n  let key;\n  for (i = 0; i < len; i++) {\n    key = keys[i];\n    obj[key] = arr[key];\n  }\n  return obj;\n}\n\n/**\n * It takes a FormData object and returns a JavaScript object\n *\n * @param {string} formData The FormData object to convert to JSON.\n *\n * @returns {Object<string, any> | null} The converted object.\n */\nfunction formDataToJSON(formData) {\n  function buildPath(path, value, target, index) {\n    let name = path[index++];\n    const isNumericKey = Number.isFinite(+name);\n    const isLast = index >= path.length;\n    name = !name && utils.isArray(target) ? target.length : name;\n\n    if (isLast) {\n      if (utils.hasOwnProp(target, name)) {\n        target[name] = [target[name], value];\n      } else {\n        target[name] = value;\n      }\n\n      return !isNumericKey;\n    }\n\n    if (!target[name] || !utils.isObject(target[name])) {\n      target[name] = [];\n    }\n\n    const result = buildPath(path, value, target[name], index);\n\n    if (result && utils.isArray(target[name])) {\n      target[name] = arrayToObject(target[name]);\n    }\n\n    return !isNumericKey;\n  }\n\n  if (utils.isFormData(formData) && utils.isFunction(formData.entries)) {\n    const obj = {};\n\n    utils.forEachEntry(formData, (name, value) => {\n      buildPath(parsePropPath(name), value, obj, 0);\n    });\n\n    return obj;\n  }\n\n  return null;\n}\n\nexport default formDataToJSON;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\nimport transitionalDefaults from './transitional.js';\nimport toFormData from '../helpers/toFormData.js';\nimport toURLEncodedForm from '../helpers/toURLEncodedForm.js';\nimport platform from '../platform/index.js';\nimport formDataToJSON from '../helpers/formDataToJSON.js';\n\n/**\n * It takes a string, tries to parse it, and if it fails, it returns the stringified version\n * of the input\n *\n * @param {any} rawValue - The value to be stringified.\n * @param {Function} parser - A function that parses a string into a JavaScript object.\n * @param {Function} encoder - A function that takes a value and returns a string.\n *\n * @returns {string} A stringified version of the rawValue.\n */\nfunction stringifySafely(rawValue, parser, encoder) {\n  if (utils.isString(rawValue)) {\n    try {\n      (parser || JSON.parse)(rawValue);\n      return utils.trim(rawValue);\n    } catch (e) {\n      if (e.name !== 'SyntaxError') {\n        throw e;\n      }\n    }\n  }\n\n  return (encoder || JSON.stringify)(rawValue);\n}\n\nconst defaults = {\n\n  transitional: transitionalDefaults,\n\n  adapter: ['xhr', 'http'],\n\n  transformRequest: [function transformRequest(data, headers) {\n    const contentType = headers.getContentType() || '';\n    const hasJSONContentType = contentType.indexOf('application/json') > -1;\n    const isObjectPayload = utils.isObject(data);\n\n    if (isObjectPayload && utils.isHTMLForm(data)) {\n      data = new FormData(data);\n    }\n\n    const isFormData = utils.isFormData(data);\n\n    if (isFormData) {\n      if (!hasJSONContentType) {\n        return data;\n      }\n      return hasJSONContentType ? JSON.stringify(formDataToJSON(data)) : data;\n    }\n\n    if (utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      headers.setContentType('application/x-www-form-urlencoded;charset=utf-8', false);\n      return data.toString();\n    }\n\n    let isFileList;\n\n    if (isObjectPayload) {\n      if (contentType.indexOf('application/x-www-form-urlencoded') > -1) {\n        return toURLEncodedForm(data, this.formSerializer).toString();\n      }\n\n      if ((isFileList = utils.isFileList(data)) || contentType.indexOf('multipart/form-data') > -1) {\n        const _FormData = this.env && this.env.FormData;\n\n        return toFormData(\n          isFileList ? {'files[]': data} : data,\n          _FormData && new _FormData(),\n          this.formSerializer\n        );\n      }\n    }\n\n    if (isObjectPayload || hasJSONContentType ) {\n      headers.setContentType('application/json', false);\n      return stringifySafely(data);\n    }\n\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    const transitional = this.transitional || defaults.transitional;\n    const forcedJSONParsing = transitional && transitional.forcedJSONParsing;\n    const JSONRequested = this.responseType === 'json';\n\n    if (data && utils.isString(data) && ((forcedJSONParsing && !this.responseType) || JSONRequested)) {\n      const silentJSONParsing = transitional && transitional.silentJSONParsing;\n      const strictJSONParsing = !silentJSONParsing && JSONRequested;\n\n      try {\n        return JSON.parse(data);\n      } catch (e) {\n        if (strictJSONParsing) {\n          if (e.name === 'SyntaxError') {\n            throw AxiosError.from(e, AxiosError.ERR_BAD_RESPONSE, this, null, this.response);\n          }\n          throw e;\n        }\n      }\n    }\n\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n  maxBodyLength: -1,\n\n  env: {\n    FormData: platform.classes.FormData,\n    Blob: platform.classes.Blob\n  },\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  },\n\n  headers: {\n    common: {\n      'Accept': 'application/json, text/plain, */*',\n      'Content-Type': undefined\n    }\n  }\n};\n\nutils.forEach(['delete', 'get', 'head', 'post', 'put', 'patch'], (method) => {\n  defaults.headers[method] = {};\n});\n\nexport default defaults;\n","'use strict';\n\nimport utils from '../utils.js';\nimport toFormData from './toFormData.js';\nimport platform from '../platform/index.js';\n\nexport default function toURLEncodedForm(data, options) {\n  return toFormData(data, new platform.classes.URLSearchParams(), Object.assign({\n    visitor: function(value, key, path, helpers) {\n      if (platform.isNode && utils.isBuffer(value)) {\n        this.append(key, value.toString('base64'));\n        return false;\n      }\n\n      return helpers.defaultVisitor.apply(this, arguments);\n    }\n  }, options));\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\n// RawAxiosHeaders whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nconst ignoreDuplicateOf = utils.toObjectSet([\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n]);\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} rawHeaders Headers needing to be parsed\n *\n * @returns {Object} Headers parsed into an object\n */\nexport default rawHeaders => {\n  const parsed = {};\n  let key;\n  let val;\n  let i;\n\n  rawHeaders && rawHeaders.split('\\n').forEach(function parser(line) {\n    i = line.indexOf(':');\n    key = line.substring(0, i).trim().toLowerCase();\n    val = line.substring(i + 1).trim();\n\n    if (!key || (parsed[key] && ignoreDuplicateOf[key])) {\n      return;\n    }\n\n    if (key === 'set-cookie') {\n      if (parsed[key]) {\n        parsed[key].push(val);\n      } else {\n        parsed[key] = [val];\n      }\n    } else {\n      parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nimport utils from '../utils.js';\nimport parseHeaders from '../helpers/parseHeaders.js';\n\nconst $internals = Symbol('internals');\n\nfunction normalizeHeader(header) {\n  return header && String(header).trim().toLowerCase();\n}\n\nfunction normalizeValue(value) {\n  if (value === false || value == null) {\n    return value;\n  }\n\n  return utils.isArray(value) ? value.map(normalizeValue) : String(value);\n}\n\nfunction parseTokens(str) {\n  const tokens = Object.create(null);\n  const tokensRE = /([^\\s,;=]+)\\s*(?:=\\s*([^,;]+))?/g;\n  let match;\n\n  while ((match = tokensRE.exec(str))) {\n    tokens[match[1]] = match[2];\n  }\n\n  return tokens;\n}\n\nconst isValidHeaderName = (str) => /^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(str.trim());\n\nfunction matchHeaderValue(context, value, header, filter, isHeaderNameFilter) {\n  if (utils.isFunction(filter)) {\n    return filter.call(this, value, header);\n  }\n\n  if (isHeaderNameFilter) {\n    value = header;\n  }\n\n  if (!utils.isString(value)) return;\n\n  if (utils.isString(filter)) {\n    return value.indexOf(filter) !== -1;\n  }\n\n  if (utils.isRegExp(filter)) {\n    return filter.test(value);\n  }\n}\n\nfunction formatHeader(header) {\n  return header.trim()\n    .toLowerCase().replace(/([a-z\\d])(\\w*)/g, (w, char, str) => {\n      return char.toUpperCase() + str;\n    });\n}\n\nfunction buildAccessors(obj, header) {\n  const accessorName = utils.toCamelCase(' ' + header);\n\n  ['get', 'set', 'has'].forEach(methodName => {\n    Object.defineProperty(obj, methodName + accessorName, {\n      value: function(arg1, arg2, arg3) {\n        return this[methodName].call(this, header, arg1, arg2, arg3);\n      },\n      configurable: true\n    });\n  });\n}\n\nclass AxiosHeaders {\n  constructor(headers) {\n    headers && this.set(headers);\n  }\n\n  set(header, valueOrRewrite, rewrite) {\n    const self = this;\n\n    function setHeader(_value, _header, _rewrite) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!lHeader) {\n        throw new Error('header name must be a non-empty string');\n      }\n\n      const key = utils.findKey(self, lHeader);\n\n      if(!key || self[key] === undefined || _rewrite === true || (_rewrite === undefined && self[key] !== false)) {\n        self[key || _header] = normalizeValue(_value);\n      }\n    }\n\n    const setHeaders = (headers, _rewrite) =>\n      utils.forEach(headers, (_value, _header) => setHeader(_value, _header, _rewrite));\n\n    if (utils.isPlainObject(header) || header instanceof this.constructor) {\n      setHeaders(header, valueOrRewrite)\n    } else if(utils.isString(header) && (header = header.trim()) && !isValidHeaderName(header)) {\n      setHeaders(parseHeaders(header), valueOrRewrite);\n    } else {\n      header != null && setHeader(valueOrRewrite, header, rewrite);\n    }\n\n    return this;\n  }\n\n  get(header, parser) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils.findKey(this, header);\n\n      if (key) {\n        const value = this[key];\n\n        if (!parser) {\n          return value;\n        }\n\n        if (parser === true) {\n          return parseTokens(value);\n        }\n\n        if (utils.isFunction(parser)) {\n          return parser.call(this, value, key);\n        }\n\n        if (utils.isRegExp(parser)) {\n          return parser.exec(value);\n        }\n\n        throw new TypeError('parser must be boolean|regexp|function');\n      }\n    }\n  }\n\n  has(header, matcher) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils.findKey(this, header);\n\n      return !!(key && this[key] !== undefined && (!matcher || matchHeaderValue(this, this[key], key, matcher)));\n    }\n\n    return false;\n  }\n\n  delete(header, matcher) {\n    const self = this;\n    let deleted = false;\n\n    function deleteHeader(_header) {\n      _header = normalizeHeader(_header);\n\n      if (_header) {\n        const key = utils.findKey(self, _header);\n\n        if (key && (!matcher || matchHeaderValue(self, self[key], key, matcher))) {\n          delete self[key];\n\n          deleted = true;\n        }\n      }\n    }\n\n    if (utils.isArray(header)) {\n      header.forEach(deleteHeader);\n    } else {\n      deleteHeader(header);\n    }\n\n    return deleted;\n  }\n\n  clear(matcher) {\n    const keys = Object.keys(this);\n    let i = keys.length;\n    let deleted = false;\n\n    while (i--) {\n      const key = keys[i];\n      if(!matcher || matchHeaderValue(this, this[key], key, matcher, true)) {\n        delete this[key];\n        deleted = true;\n      }\n    }\n\n    return deleted;\n  }\n\n  normalize(format) {\n    const self = this;\n    const headers = {};\n\n    utils.forEach(this, (value, header) => {\n      const key = utils.findKey(headers, header);\n\n      if (key) {\n        self[key] = normalizeValue(value);\n        delete self[header];\n        return;\n      }\n\n      const normalized = format ? formatHeader(header) : String(header).trim();\n\n      if (normalized !== header) {\n        delete self[header];\n      }\n\n      self[normalized] = normalizeValue(value);\n\n      headers[normalized] = true;\n    });\n\n    return this;\n  }\n\n  concat(...targets) {\n    return this.constructor.concat(this, ...targets);\n  }\n\n  toJSON(asStrings) {\n    const obj = Object.create(null);\n\n    utils.forEach(this, (value, header) => {\n      value != null && value !== false && (obj[header] = asStrings && utils.isArray(value) ? value.join(', ') : value);\n    });\n\n    return obj;\n  }\n\n  [Symbol.iterator]() {\n    return Object.entries(this.toJSON())[Symbol.iterator]();\n  }\n\n  toString() {\n    return Object.entries(this.toJSON()).map(([header, value]) => header + ': ' + value).join('\\n');\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'AxiosHeaders';\n  }\n\n  static from(thing) {\n    return thing instanceof this ? thing : new this(thing);\n  }\n\n  static concat(first, ...targets) {\n    const computed = new this(first);\n\n    targets.forEach((target) => computed.set(target));\n\n    return computed;\n  }\n\n  static accessor(header) {\n    const internals = this[$internals] = (this[$internals] = {\n      accessors: {}\n    });\n\n    const accessors = internals.accessors;\n    const prototype = this.prototype;\n\n    function defineAccessor(_header) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!accessors[lHeader]) {\n        buildAccessors(prototype, _header);\n        accessors[lHeader] = true;\n      }\n    }\n\n    utils.isArray(header) ? header.forEach(defineAccessor) : defineAccessor(header);\n\n    return this;\n  }\n}\n\nAxiosHeaders.accessor(['Content-Type', 'Content-Length', 'Accept', 'Accept-Encoding', 'User-Agent', 'Authorization']);\n\n// reserved names hotfix\nutils.reduceDescriptors(AxiosHeaders.prototype, ({value}, key) => {\n  let mapped = key[0].toUpperCase() + key.slice(1); // map `set` => `Set`\n  return {\n    get: () => value,\n    set(headerValue) {\n      this[mapped] = headerValue;\n    }\n  }\n});\n\nutils.freezeMethods(AxiosHeaders);\n\nexport default AxiosHeaders;\n","'use strict';\n\nimport utils from './../utils.js';\nimport defaults from '../defaults/index.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Array|Function} fns A single function or Array of functions\n * @param {?Object} response The response object\n *\n * @returns {*} The resulting transformed data\n */\nexport default function transformData(fns, response) {\n  const config = this || defaults;\n  const context = response || config;\n  const headers = AxiosHeaders.from(context.headers);\n  let data = context.data;\n\n  utils.forEach(fns, function transform(fn) {\n    data = fn.call(config, data, headers.normalize(), response ? response.status : undefined);\n  });\n\n  headers.normalize();\n\n  return data;\n}\n","'use strict';\n\nexport default function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n}\n","'use strict';\n\nimport AxiosError from '../core/AxiosError.js';\nimport utils from '../utils.js';\n\n/**\n * A `CanceledError` is an object that is thrown when an operation is canceled.\n *\n * @param {string=} message The message.\n * @param {Object=} config The config.\n * @param {Object=} request The request.\n *\n * @returns {CanceledError} The created error.\n */\nfunction CanceledError(message, config, request) {\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  AxiosError.call(this, message == null ? 'canceled' : message, AxiosError.ERR_CANCELED, config, request);\n  this.name = 'CanceledError';\n}\n\nutils.inherits(CanceledError, AxiosError, {\n  __CANCEL__: true\n});\n\nexport default CanceledError;\n","import utils from './../utils.js';\nimport platform from '../platform/index.js';\n\nexport default platform.hasStandardBrowserEnv ?\n\n  // Standard browser envs support document.cookie\n  {\n    write(name, value, expires, path, domain, secure) {\n      const cookie = [name + '=' + encodeURIComponent(value)];\n\n      utils.isNumber(expires) && cookie.push('expires=' + new Date(expires).toGMTString());\n\n      utils.isString(path) && cookie.push('path=' + path);\n\n      utils.isString(domain) && cookie.push('domain=' + domain);\n\n      secure === true && cookie.push('secure');\n\n      document.cookie = cookie.join('; ');\n    },\n\n    read(name) {\n      const match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n      return (match ? decodeURIComponent(match[3]) : null);\n    },\n\n    remove(name) {\n      this.write(name, '', Date.now() - 86400000);\n    }\n  }\n\n  :\n\n  // Non-standard browser env (web workers, react-native) lack needed support.\n  {\n    write() {},\n    read() {\n      return null;\n    },\n    remove() {}\n  };\n\n","'use strict';\n\nimport isAbsoluteURL from '../helpers/isAbsoluteURL.js';\nimport combineURLs from '../helpers/combineURLs.js';\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n *\n * @returns {string} The combined full path\n */\nexport default function buildFullPath(baseURL, requestedURL) {\n  if (baseURL && !isAbsoluteURL(requestedURL)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n}\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n *\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nexport default function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d+\\-.]*:)?\\/\\//i.test(url);\n}\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n *\n * @returns {string} The combined URL\n */\nexport default function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n}\n","'use strict';\n\nimport utils from './../utils.js';\nimport platform from '../platform/index.js';\n\nexport default platform.hasStandardBrowserEnv ?\n\n// Standard browser envs have full support of the APIs needed to test\n// whether the request URL is of the same origin as current location.\n  (function standardBrowserEnv() {\n    const msie = /(msie|trident)/i.test(navigator.userAgent);\n    const urlParsingNode = document.createElement('a');\n    let originURL;\n\n    /**\n    * Parse a URL to discover its components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n    function resolveURL(url) {\n      let href = url;\n\n      if (msie) {\n        // IE needs attribute set twice to normalize properties\n        urlParsingNode.setAttribute('href', href);\n        href = urlParsingNode.href;\n      }\n\n      urlParsingNode.setAttribute('href', href);\n\n      // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n      return {\n        href: urlParsingNode.href,\n        protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n        host: urlParsingNode.host,\n        search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n        hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n        hostname: urlParsingNode.hostname,\n        port: urlParsingNode.port,\n        pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n          urlParsingNode.pathname :\n          '/' + urlParsingNode.pathname\n      };\n    }\n\n    originURL = resolveURL(window.location.href);\n\n    /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n    return function isURLSameOrigin(requestURL) {\n      const parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n      return (parsed.protocol === originURL.protocol &&\n          parsed.host === originURL.host);\n    };\n  })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n  (function nonStandardBrowserEnv() {\n    return function isURLSameOrigin() {\n      return true;\n    };\n  })();\n","'use strict';\n\n/**\n * Calculate data maxRate\n * @param {Number} [samplesCount= 10]\n * @param {Number} [min= 1000]\n * @returns {Function}\n */\nfunction speedometer(samplesCount, min) {\n  samplesCount = samplesCount || 10;\n  const bytes = new Array(samplesCount);\n  const timestamps = new Array(samplesCount);\n  let head = 0;\n  let tail = 0;\n  let firstSampleTS;\n\n  min = min !== undefined ? min : 1000;\n\n  return function push(chunkLength) {\n    const now = Date.now();\n\n    const startedAt = timestamps[tail];\n\n    if (!firstSampleTS) {\n      firstSampleTS = now;\n    }\n\n    bytes[head] = chunkLength;\n    timestamps[head] = now;\n\n    let i = tail;\n    let bytesCount = 0;\n\n    while (i !== head) {\n      bytesCount += bytes[i++];\n      i = i % samplesCount;\n    }\n\n    head = (head + 1) % samplesCount;\n\n    if (head === tail) {\n      tail = (tail + 1) % samplesCount;\n    }\n\n    if (now - firstSampleTS < min) {\n      return;\n    }\n\n    const passed = startedAt && now - startedAt;\n\n    return passed ? Math.round(bytesCount * 1000 / passed) : undefined;\n  };\n}\n\nexport default speedometer;\n","'use strict';\n\nimport utils from './../utils.js';\nimport settle from './../core/settle.js';\nimport cookies from './../helpers/cookies.js';\nimport buildURL from './../helpers/buildURL.js';\nimport buildFullPath from '../core/buildFullPath.js';\nimport isURLSameOrigin from './../helpers/isURLSameOrigin.js';\nimport transitionalDefaults from '../defaults/transitional.js';\nimport AxiosError from '../core/AxiosError.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport parseProtocol from '../helpers/parseProtocol.js';\nimport platform from '../platform/index.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport speedometer from '../helpers/speedometer.js';\n\nfunction progressEventReducer(listener, isDownloadStream) {\n  let bytesNotified = 0;\n  const _speedometer = speedometer(50, 250);\n\n  return e => {\n    const loaded = e.loaded;\n    const total = e.lengthComputable ? e.total : undefined;\n    const progressBytes = loaded - bytesNotified;\n    const rate = _speedometer(progressBytes);\n    const inRange = loaded <= total;\n\n    bytesNotified = loaded;\n\n    const data = {\n      loaded,\n      total,\n      progress: total ? (loaded / total) : undefined,\n      bytes: progressBytes,\n      rate: rate ? rate : undefined,\n      estimated: rate && total && inRange ? (total - loaded) / rate : undefined,\n      event: e\n    };\n\n    data[isDownloadStream ? 'download' : 'upload'] = true;\n\n    listener(data);\n  };\n}\n\nconst isXHRAdapterSupported = typeof XMLHttpRequest !== 'undefined';\n\nexport default isXHRAdapterSupported && function (config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    let requestData = config.data;\n    const requestHeaders = AxiosHeaders.from(config.headers).normalize();\n    let {responseType, withXSRFToken} = config;\n    let onCanceled;\n    function done() {\n      if (config.cancelToken) {\n        config.cancelToken.unsubscribe(onCanceled);\n      }\n\n      if (config.signal) {\n        config.signal.removeEventListener('abort', onCanceled);\n      }\n    }\n\n    let contentType;\n\n    if (utils.isFormData(requestData)) {\n      if (platform.hasStandardBrowserEnv || platform.hasStandardBrowserWebWorkerEnv) {\n        requestHeaders.setContentType(false); // Let the browser set it\n      } else if ((contentType = requestHeaders.getContentType()) !== false) {\n        // fix semicolon duplication issue for ReactNative FormData implementation\n        const [type, ...tokens] = contentType ? contentType.split(';').map(token => token.trim()).filter(Boolean) : [];\n        requestHeaders.setContentType([type || 'multipart/form-data', ...tokens].join('; '));\n      }\n    }\n\n    let request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      const username = config.auth.username || '';\n      const password = config.auth.password ? unescape(encodeURIComponent(config.auth.password)) : '';\n      requestHeaders.set('Authorization', 'Basic ' + btoa(username + ':' + password));\n    }\n\n    const fullPath = buildFullPath(config.baseURL, config.url);\n\n    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    function onloadend() {\n      if (!request) {\n        return;\n      }\n      // Prepare the response\n      const responseHeaders = AxiosHeaders.from(\n        'getAllResponseHeaders' in request && request.getAllResponseHeaders()\n      );\n      const responseData = !responseType || responseType === 'text' || responseType === 'json' ?\n        request.responseText : request.response;\n      const response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config,\n        request\n      };\n\n      settle(function _resolve(value) {\n        resolve(value);\n        done();\n      }, function _reject(err) {\n        reject(err);\n        done();\n      }, response);\n\n      // Clean up request\n      request = null;\n    }\n\n    if ('onloadend' in request) {\n      // Use onloadend if available\n      request.onloadend = onloadend;\n    } else {\n      // Listen for ready state to emulate onloadend\n      request.onreadystatechange = function handleLoad() {\n        if (!request || request.readyState !== 4) {\n          return;\n        }\n\n        // The request errored out and we didn't get a response, this will be\n        // handled by onerror instead\n        // With one exception: request that using file: protocol, most browsers\n        // will return status as 0 even though it's a successful request\n        if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n          return;\n        }\n        // readystate handler is calling before onerror or ontimeout handlers,\n        // so we should call onloadend on the next 'tick'\n        setTimeout(onloadend);\n      };\n    }\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(new AxiosError('Request aborted', AxiosError.ECONNABORTED, config, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(new AxiosError('Network Error', AxiosError.ERR_NETWORK, config, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      let timeoutErrorMessage = config.timeout ? 'timeout of ' + config.timeout + 'ms exceeded' : 'timeout exceeded';\n      const transitional = config.transitional || transitionalDefaults;\n      if (config.timeoutErrorMessage) {\n        timeoutErrorMessage = config.timeoutErrorMessage;\n      }\n      reject(new AxiosError(\n        timeoutErrorMessage,\n        transitional.clarifyTimeoutError ? AxiosError.ETIMEDOUT : AxiosError.ECONNABORTED,\n        config,\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if(platform.hasStandardBrowserEnv) {\n      withXSRFToken && utils.isFunction(withXSRFToken) && (withXSRFToken = withXSRFToken(config));\n\n      if (withXSRFToken || (withXSRFToken !== false && isURLSameOrigin(fullPath))) {\n        // Add xsrf header\n        const xsrfValue = config.xsrfHeaderName && config.xsrfCookieName && cookies.read(config.xsrfCookieName);\n\n        if (xsrfValue) {\n          requestHeaders.set(config.xsrfHeaderName, xsrfValue);\n        }\n      }\n    }\n\n    // Remove Content-Type if data is undefined\n    requestData === undefined && requestHeaders.setContentType(null);\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders.toJSON(), function setRequestHeader(val, key) {\n        request.setRequestHeader(key, val);\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(config.withCredentials)) {\n      request.withCredentials = !!config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (responseType && responseType !== 'json') {\n      request.responseType = config.responseType;\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', progressEventReducer(config.onDownloadProgress, true));\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', progressEventReducer(config.onUploadProgress));\n    }\n\n    if (config.cancelToken || config.signal) {\n      // Handle cancellation\n      // eslint-disable-next-line func-names\n      onCanceled = cancel => {\n        if (!request) {\n          return;\n        }\n        reject(!cancel || cancel.type ? new CanceledError(null, config, request) : cancel);\n        request.abort();\n        request = null;\n      };\n\n      config.cancelToken && config.cancelToken.subscribe(onCanceled);\n      if (config.signal) {\n        config.signal.aborted ? onCanceled() : config.signal.addEventListener('abort', onCanceled);\n      }\n    }\n\n    const protocol = parseProtocol(fullPath);\n\n    if (protocol && platform.protocols.indexOf(protocol) === -1) {\n      reject(new AxiosError('Unsupported protocol ' + protocol + ':', AxiosError.ERR_BAD_REQUEST, config));\n      return;\n    }\n\n\n    // Send the request\n    request.send(requestData || null);\n  });\n}\n","import utils from '../utils.js';\nimport httpAdapter from './http.js';\nimport xhrAdapter from './xhr.js';\nimport AxiosError from \"../core/AxiosError.js\";\n\nconst knownAdapters = {\n  http: httpAdapter,\n  xhr: xhrAdapter\n}\n\nutils.forEach(knownAdapters, (fn, value) => {\n  if (fn) {\n    try {\n      Object.defineProperty(fn, 'name', {value});\n    } catch (e) {\n      // eslint-disable-next-line no-empty\n    }\n    Object.defineProperty(fn, 'adapterName', {value});\n  }\n});\n\nconst renderReason = (reason) => `- ${reason}`;\n\nconst isResolvedHandle = (adapter) => utils.isFunction(adapter) || adapter === null || adapter === false;\n\nexport default {\n  getAdapter: (adapters) => {\n    adapters = utils.isArray(adapters) ? adapters : [adapters];\n\n    const {length} = adapters;\n    let nameOrAdapter;\n    let adapter;\n\n    const rejectedReasons = {};\n\n    for (let i = 0; i < length; i++) {\n      nameOrAdapter = adapters[i];\n      let id;\n\n      adapter = nameOrAdapter;\n\n      if (!isResolvedHandle(nameOrAdapter)) {\n        adapter = knownAdapters[(id = String(nameOrAdapter)).toLowerCase()];\n\n        if (adapter === undefined) {\n          throw new AxiosError(`Unknown adapter '${id}'`);\n        }\n      }\n\n      if (adapter) {\n        break;\n      }\n\n      rejectedReasons[id || '#' + i] = adapter;\n    }\n\n    if (!adapter) {\n\n      const reasons = Object.entries(rejectedReasons)\n        .map(([id, state]) => `adapter ${id} ` +\n          (state === false ? 'is not supported by the environment' : 'is not available in the build')\n        );\n\n      let s = length ?\n        (reasons.length > 1 ? 'since :\\n' + reasons.map(renderReason).join('\\n') : ' ' + renderReason(reasons[0])) :\n        'as no adapter specified';\n\n      throw new AxiosError(\n        `There is no suitable adapter to dispatch the request ` + s,\n        'ERR_NOT_SUPPORT'\n      );\n    }\n\n    return adapter;\n  },\n  adapters: knownAdapters\n}\n","// eslint-disable-next-line strict\nexport default null;\n","'use strict';\n\nimport AxiosError from './AxiosError.js';\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n *\n * @returns {object} The response.\n */\nexport default function settle(resolve, reject, response) {\n  const validateStatus = response.config.validateStatus;\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(new AxiosError(\n      'Request failed with status code ' + response.status,\n      [AxiosError.ERR_BAD_REQUEST, AxiosError.ERR_BAD_RESPONSE][Math.floor(response.status / 100) - 4],\n      response.config,\n      response.request,\n      response\n    ));\n  }\n}\n","'use strict';\n\nexport default function parseProtocol(url) {\n  const match = /^([-+\\w]{1,25})(:?\\/\\/|:)/.exec(url);\n  return match && match[1] || '';\n}\n","'use strict';\n\nimport transformData from './transformData.js';\nimport isCancel from '../cancel/isCancel.js';\nimport defaults from '../defaults/index.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport adapters from \"../adapters/adapters.js\";\n\n/**\n * Throws a `CanceledError` if cancellation has been requested.\n *\n * @param {Object} config The config that is to be used for the request\n *\n * @returns {void}\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n\n  if (config.signal && config.signal.aborted) {\n    throw new CanceledError(null, config);\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n *\n * @returns {Promise} The Promise to be fulfilled\n */\nexport default function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  config.headers = AxiosHeaders.from(config.headers);\n\n  // Transform request data\n  config.data = transformData.call(\n    config,\n    config.transformRequest\n  );\n\n  if (['post', 'put', 'patch'].indexOf(config.method) !== -1) {\n    config.headers.setContentType('application/x-www-form-urlencoded', false);\n  }\n\n  const adapter = adapters.getAdapter(config.adapter || defaults.adapter);\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData.call(\n      config,\n      config.transformResponse,\n      response\n    );\n\n    response.headers = AxiosHeaders.from(response.headers);\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData.call(\n          config,\n          config.transformResponse,\n          reason.response\n        );\n        reason.response.headers = AxiosHeaders.from(reason.response.headers);\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n}\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosHeaders from \"./AxiosHeaders.js\";\n\nconst headersToObject = (thing) => thing instanceof AxiosHeaders ? thing.toJSON() : thing;\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n *\n * @returns {Object} New object resulting from merging config2 to config1\n */\nexport default function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  const config = {};\n\n  function getMergedValue(target, source, caseless) {\n    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {\n      return utils.merge.call({caseless}, target, source);\n    } else if (utils.isPlainObject(source)) {\n      return utils.merge({}, source);\n    } else if (utils.isArray(source)) {\n      return source.slice();\n    }\n    return source;\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDeepProperties(a, b, caseless) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(a, b, caseless);\n    } else if (!utils.isUndefined(a)) {\n      return getMergedValue(undefined, a, caseless);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function valueFromConfig2(a, b) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function defaultToConfig2(a, b) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    } else if (!utils.isUndefined(a)) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDirectKeys(a, b, prop) {\n    if (prop in config2) {\n      return getMergedValue(a, b);\n    } else if (prop in config1) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  const mergeMap = {\n    url: valueFromConfig2,\n    method: valueFromConfig2,\n    data: valueFromConfig2,\n    baseURL: defaultToConfig2,\n    transformRequest: defaultToConfig2,\n    transformResponse: defaultToConfig2,\n    paramsSerializer: defaultToConfig2,\n    timeout: defaultToConfig2,\n    timeoutMessage: defaultToConfig2,\n    withCredentials: defaultToConfig2,\n    withXSRFToken: defaultToConfig2,\n    adapter: defaultToConfig2,\n    responseType: defaultToConfig2,\n    xsrfCookieName: defaultToConfig2,\n    xsrfHeaderName: defaultToConfig2,\n    onUploadProgress: defaultToConfig2,\n    onDownloadProgress: defaultToConfig2,\n    decompress: defaultToConfig2,\n    maxContentLength: defaultToConfig2,\n    maxBodyLength: defaultToConfig2,\n    beforeRedirect: defaultToConfig2,\n    transport: defaultToConfig2,\n    httpAgent: defaultToConfig2,\n    httpsAgent: defaultToConfig2,\n    cancelToken: defaultToConfig2,\n    socketPath: defaultToConfig2,\n    responseEncoding: defaultToConfig2,\n    validateStatus: mergeDirectKeys,\n    headers: (a, b) => mergeDeepProperties(headersToObject(a), headersToObject(b), true)\n  };\n\n  utils.forEach(Object.keys(Object.assign({}, config1, config2)), function computeConfigValue(prop) {\n    const merge = mergeMap[prop] || mergeDeepProperties;\n    const configValue = merge(config1[prop], config2[prop], prop);\n    (utils.isUndefined(configValue) && merge !== mergeDirectKeys) || (config[prop] = configValue);\n  });\n\n  return config;\n}\n","export const VERSION = \"1.6.2\";","'use strict';\n\nimport {VERSION} from '../env/data.js';\nimport AxiosError from '../core/AxiosError.js';\n\nconst validators = {};\n\n// eslint-disable-next-line func-names\n['object', 'boolean', 'number', 'function', 'string', 'symbol'].forEach((type, i) => {\n  validators[type] = function validator(thing) {\n    return typeof thing === type || 'a' + (i < 1 ? 'n ' : ' ') + type;\n  };\n});\n\nconst deprecatedWarnings = {};\n\n/**\n * Transitional option validator\n *\n * @param {function|boolean?} validator - set to false if the transitional option has been removed\n * @param {string?} version - deprecated version / removed since version\n * @param {string?} message - some message with additional info\n *\n * @returns {function}\n */\nvalidators.transitional = function transitional(validator, version, message) {\n  function formatMessage(opt, desc) {\n    return '[Axios v' + VERSION + '] Transitional option \\'' + opt + '\\'' + desc + (message ? '. ' + message : '');\n  }\n\n  // eslint-disable-next-line func-names\n  return (value, opt, opts) => {\n    if (validator === false) {\n      throw new AxiosError(\n        formatMessage(opt, ' has been removed' + (version ? ' in ' + version : '')),\n        AxiosError.ERR_DEPRECATED\n      );\n    }\n\n    if (version && !deprecatedWarnings[opt]) {\n      deprecatedWarnings[opt] = true;\n      // eslint-disable-next-line no-console\n      console.warn(\n        formatMessage(\n          opt,\n          ' has been deprecated since v' + version + ' and will be removed in the near future'\n        )\n      );\n    }\n\n    return validator ? validator(value, opt, opts) : true;\n  };\n};\n\n/**\n * Assert object's properties type\n *\n * @param {object} options\n * @param {object} schema\n * @param {boolean?} allowUnknown\n *\n * @returns {object}\n */\n\nfunction assertOptions(options, schema, allowUnknown) {\n  if (typeof options !== 'object') {\n    throw new AxiosError('options must be an object', AxiosError.ERR_BAD_OPTION_VALUE);\n  }\n  const keys = Object.keys(options);\n  let i = keys.length;\n  while (i-- > 0) {\n    const opt = keys[i];\n    const validator = schema[opt];\n    if (validator) {\n      const value = options[opt];\n      const result = value === undefined || validator(value, opt, options);\n      if (result !== true) {\n        throw new AxiosError('option ' + opt + ' must be ' + result, AxiosError.ERR_BAD_OPTION_VALUE);\n      }\n      continue;\n    }\n    if (allowUnknown !== true) {\n      throw new AxiosError('Unknown option ' + opt, AxiosError.ERR_BAD_OPTION);\n    }\n  }\n}\n\nexport default {\n  assertOptions,\n  validators\n};\n","'use strict';\n\nimport utils from './../utils.js';\nimport buildURL from '../helpers/buildURL.js';\nimport InterceptorManager from './InterceptorManager.js';\nimport dispatchRequest from './dispatchRequest.js';\nimport mergeConfig from './mergeConfig.js';\nimport buildFullPath from './buildFullPath.js';\nimport validator from '../helpers/validator.js';\nimport AxiosHeaders from './AxiosHeaders.js';\n\nconst validators = validator.validators;\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n *\n * @return {Axios} A new instance of Axios\n */\nclass Axios {\n  constructor(instanceConfig) {\n    this.defaults = instanceConfig;\n    this.interceptors = {\n      request: new InterceptorManager(),\n      response: new InterceptorManager()\n    };\n  }\n\n  /**\n   * Dispatch a request\n   *\n   * @param {String|Object} configOrUrl The config specific for this request (merged with this.defaults)\n   * @param {?Object} config\n   *\n   * @returns {Promise} The Promise to be fulfilled\n   */\n  request(configOrUrl, config) {\n    /*eslint no-param-reassign:0*/\n    // Allow for axios('example/url'[, config]) a la fetch API\n    if (typeof configOrUrl === 'string') {\n      config = config || {};\n      config.url = configOrUrl;\n    } else {\n      config = configOrUrl || {};\n    }\n\n    config = mergeConfig(this.defaults, config);\n\n    const {transitional, paramsSerializer, headers} = config;\n\n    if (transitional !== undefined) {\n      validator.assertOptions(transitional, {\n        silentJSONParsing: validators.transitional(validators.boolean),\n        forcedJSONParsing: validators.transitional(validators.boolean),\n        clarifyTimeoutError: validators.transitional(validators.boolean)\n      }, false);\n    }\n\n    if (paramsSerializer != null) {\n      if (utils.isFunction(paramsSerializer)) {\n        config.paramsSerializer = {\n          serialize: paramsSerializer\n        }\n      } else {\n        validator.assertOptions(paramsSerializer, {\n          encode: validators.function,\n          serialize: validators.function\n        }, true);\n      }\n    }\n\n    // Set config.method\n    config.method = (config.method || this.defaults.method || 'get').toLowerCase();\n\n    // Flatten headers\n    let contextHeaders = headers && utils.merge(\n      headers.common,\n      headers[config.method]\n    );\n\n    headers && utils.forEach(\n      ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n      (method) => {\n        delete headers[method];\n      }\n    );\n\n    config.headers = AxiosHeaders.concat(contextHeaders, headers);\n\n    // filter out skipped interceptors\n    const requestInterceptorChain = [];\n    let synchronousRequestInterceptors = true;\n    this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n      if (typeof interceptor.runWhen === 'function' && interceptor.runWhen(config) === false) {\n        return;\n      }\n\n      synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;\n\n      requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    const responseInterceptorChain = [];\n    this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n      responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    let promise;\n    let i = 0;\n    let len;\n\n    if (!synchronousRequestInterceptors) {\n      const chain = [dispatchRequest.bind(this), undefined];\n      chain.unshift.apply(chain, requestInterceptorChain);\n      chain.push.apply(chain, responseInterceptorChain);\n      len = chain.length;\n\n      promise = Promise.resolve(config);\n\n      while (i < len) {\n        promise = promise.then(chain[i++], chain[i++]);\n      }\n\n      return promise;\n    }\n\n    len = requestInterceptorChain.length;\n\n    let newConfig = config;\n\n    i = 0;\n\n    while (i < len) {\n      const onFulfilled = requestInterceptorChain[i++];\n      const onRejected = requestInterceptorChain[i++];\n      try {\n        newConfig = onFulfilled(newConfig);\n      } catch (error) {\n        onRejected.call(this, error);\n        break;\n      }\n    }\n\n    try {\n      promise = dispatchRequest.call(this, newConfig);\n    } catch (error) {\n      return Promise.reject(error);\n    }\n\n    i = 0;\n    len = responseInterceptorChain.length;\n\n    while (i < len) {\n      promise = promise.then(responseInterceptorChain[i++], responseInterceptorChain[i++]);\n    }\n\n    return promise;\n  }\n\n  getUri(config) {\n    config = mergeConfig(this.defaults, config);\n    const fullPath = buildFullPath(config.baseURL, config.url);\n    return buildURL(fullPath, config.params, config.paramsSerializer);\n  }\n}\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(mergeConfig(config || {}, {\n      method,\n      url,\n      data: (config || {}).data\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n\n  function generateHTTPMethod(isForm) {\n    return function httpMethod(url, data, config) {\n      return this.request(mergeConfig(config || {}, {\n        method,\n        headers: isForm ? {\n          'Content-Type': 'multipart/form-data'\n        } : {},\n        url,\n        data\n      }));\n    };\n  }\n\n  Axios.prototype[method] = generateHTTPMethod();\n\n  Axios.prototype[method + 'Form'] = generateHTTPMethod(true);\n});\n\nexport default Axios;\n","'use strict';\n\nimport CanceledError from './CanceledError.js';\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @param {Function} executor The executor function.\n *\n * @returns {CancelToken}\n */\nclass CancelToken {\n  constructor(executor) {\n    if (typeof executor !== 'function') {\n      throw new TypeError('executor must be a function.');\n    }\n\n    let resolvePromise;\n\n    this.promise = new Promise(function promiseExecutor(resolve) {\n      resolvePromise = resolve;\n    });\n\n    const token = this;\n\n    // eslint-disable-next-line func-names\n    this.promise.then(cancel => {\n      if (!token._listeners) return;\n\n      let i = token._listeners.length;\n\n      while (i-- > 0) {\n        token._listeners[i](cancel);\n      }\n      token._listeners = null;\n    });\n\n    // eslint-disable-next-line func-names\n    this.promise.then = onfulfilled => {\n      let _resolve;\n      // eslint-disable-next-line func-names\n      const promise = new Promise(resolve => {\n        token.subscribe(resolve);\n        _resolve = resolve;\n      }).then(onfulfilled);\n\n      promise.cancel = function reject() {\n        token.unsubscribe(_resolve);\n      };\n\n      return promise;\n    };\n\n    executor(function cancel(message, config, request) {\n      if (token.reason) {\n        // Cancellation has already been requested\n        return;\n      }\n\n      token.reason = new CanceledError(message, config, request);\n      resolvePromise(token.reason);\n    });\n  }\n\n  /**\n   * Throws a `CanceledError` if cancellation has been requested.\n   */\n  throwIfRequested() {\n    if (this.reason) {\n      throw this.reason;\n    }\n  }\n\n  /**\n   * Subscribe to the cancel signal\n   */\n\n  subscribe(listener) {\n    if (this.reason) {\n      listener(this.reason);\n      return;\n    }\n\n    if (this._listeners) {\n      this._listeners.push(listener);\n    } else {\n      this._listeners = [listener];\n    }\n  }\n\n  /**\n   * Unsubscribe from the cancel signal\n   */\n\n  unsubscribe(listener) {\n    if (!this._listeners) {\n      return;\n    }\n    const index = this._listeners.indexOf(listener);\n    if (index !== -1) {\n      this._listeners.splice(index, 1);\n    }\n  }\n\n  /**\n   * Returns an object that contains a new `CancelToken` and a function that, when called,\n   * cancels the `CancelToken`.\n   */\n  static source() {\n    let cancel;\n    const token = new CancelToken(function executor(c) {\n      cancel = c;\n    });\n    return {\n      token,\n      cancel\n    };\n  }\n}\n\nexport default CancelToken;\n","const HttpStatusCode = {\n  Continue: 100,\n  SwitchingProtocols: 101,\n  Processing: 102,\n  EarlyHints: 103,\n  Ok: 200,\n  Created: 201,\n  Accepted: 202,\n  NonAuthoritativeInformation: 203,\n  NoContent: 204,\n  ResetContent: 205,\n  PartialContent: 206,\n  MultiStatus: 207,\n  AlreadyReported: 208,\n  ImUsed: 226,\n  MultipleChoices: 300,\n  MovedPermanently: 301,\n  Found: 302,\n  SeeOther: 303,\n  NotModified: 304,\n  UseProxy: 305,\n  Unused: 306,\n  TemporaryRedirect: 307,\n  PermanentRedirect: 308,\n  BadRequest: 400,\n  Unauthorized: 401,\n  PaymentRequired: 402,\n  Forbidden: 403,\n  NotFound: 404,\n  MethodNotAllowed: 405,\n  NotAcceptable: 406,\n  ProxyAuthenticationRequired: 407,\n  RequestTimeout: 408,\n  Conflict: 409,\n  Gone: 410,\n  LengthRequired: 411,\n  PreconditionFailed: 412,\n  PayloadTooLarge: 413,\n  UriTooLong: 414,\n  UnsupportedMediaType: 415,\n  RangeNotSatisfiable: 416,\n  ExpectationFailed: 417,\n  ImATeapot: 418,\n  MisdirectedRequest: 421,\n  UnprocessableEntity: 422,\n  Locked: 423,\n  FailedDependency: 424,\n  TooEarly: 425,\n  UpgradeRequired: 426,\n  PreconditionRequired: 428,\n  TooManyRequests: 429,\n  RequestHeaderFieldsTooLarge: 431,\n  UnavailableForLegalReasons: 451,\n  InternalServerError: 500,\n  NotImplemented: 501,\n  BadGateway: 502,\n  ServiceUnavailable: 503,\n  GatewayTimeout: 504,\n  HttpVersionNotSupported: 505,\n  VariantAlsoNegotiates: 506,\n  InsufficientStorage: 507,\n  LoopDetected: 508,\n  NotExtended: 510,\n  NetworkAuthenticationRequired: 511,\n};\n\nObject.entries(HttpStatusCode).forEach(([key, value]) => {\n  HttpStatusCode[value] = key;\n});\n\nexport default HttpStatusCode;\n","'use strict';\n\nimport utils from './utils.js';\nimport bind from './helpers/bind.js';\nimport Axios from './core/Axios.js';\nimport mergeConfig from './core/mergeConfig.js';\nimport defaults from './defaults/index.js';\nimport formDataToJSON from './helpers/formDataToJSON.js';\nimport CanceledError from './cancel/CanceledError.js';\nimport CancelToken from './cancel/CancelToken.js';\nimport isCancel from './cancel/isCancel.js';\nimport {VERSION} from './env/data.js';\nimport toFormData from './helpers/toFormData.js';\nimport AxiosError from './core/AxiosError.js';\nimport spread from './helpers/spread.js';\nimport isAxiosError from './helpers/isAxiosError.js';\nimport AxiosHeaders from \"./core/AxiosHeaders.js\";\nimport adapters from './adapters/adapters.js';\nimport HttpStatusCode from './helpers/HttpStatusCode.js';\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n *\n * @returns {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  const context = new Axios(defaultConfig);\n  const instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context, {allOwnKeys: true});\n\n  // Copy context to instance\n  utils.extend(instance, context, null, {allOwnKeys: true});\n\n  // Factory for creating new instances\n  instance.create = function create(instanceConfig) {\n    return createInstance(mergeConfig(defaultConfig, instanceConfig));\n  };\n\n  return instance;\n}\n\n// Create the default instance to be exported\nconst axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Expose Cancel & CancelToken\naxios.CanceledError = CanceledError;\naxios.CancelToken = CancelToken;\naxios.isCancel = isCancel;\naxios.VERSION = VERSION;\naxios.toFormData = toFormData;\n\n// Expose AxiosError class\naxios.AxiosError = AxiosError;\n\n// alias for CanceledError for backward compatibility\naxios.Cancel = axios.CanceledError;\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\n\naxios.spread = spread;\n\n// Expose isAxiosError\naxios.isAxiosError = isAxiosError;\n\n// Expose mergeConfig\naxios.mergeConfig = mergeConfig;\n\naxios.AxiosHeaders = AxiosHeaders;\n\naxios.formToJSON = thing => formDataToJSON(utils.isHTMLForm(thing) ? new FormData(thing) : thing);\n\naxios.getAdapter = adapters.getAdapter;\n\naxios.HttpStatusCode = HttpStatusCode;\n\naxios.default = axios;\n\n// this module should only have a default export\nexport default axios\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n *\n * @returns {Function}\n */\nexport default function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\n/**\n * Determines whether the payload is an error thrown by Axios\n *\n * @param {*} payload The value to test\n *\n * @returns {boolean} True if the payload is an error thrown by Axios, otherwise false\n */\nexport default function isAxiosError(payload) {\n  return utils.isObject(payload) && (payload.isAxiosError === true);\n}\n","\r\nimport axios from 'axios';\r\nconst log = console; \r\nexport const __serverApi = '';\r\nexport const __isLocal = window.location.host == 'localhost';\r\ntop.__isLocal = __isLocal;\r\nclass WindowUtil{\r\n    #loginRemeber;\r\n    constructor(){\r\n\r\n    }\r\n    async isLogin(callback = () => {}){\r\n        if(this.#loginRemeber){\r\n            return Promise.resolve(callback(this.#loginRemeber));\r\n        }\r\n        return axios.get(__serverApi + '/api/account/search/is-login', {\r\n            headers:{\r\n                'Content-Type': 'application/json'\r\n            }\r\n        })\r\n        .catch(err=>{\r\n            return err.response\r\n        })\r\n        .then(response => {\r\n            if( ! this.responseIsOk(response)){\r\n                return callback({\r\n                    isLogin: false,\r\n                    status: response?.status,\r\n                    statusText: response?.statusText\r\n                });\r\n            }else{\r\n                if(response.data.code == 0){\r\n                    response.isLogin = true;\t\r\n                }else if(response.data.code == 100 || response.data.code == 105 || response.data.code == 106 || response.data.code == 107){\r\n                    response.isLogin = false;\r\n                }else{\r\n                    response.isLogin = false;\r\n                }\r\n\r\n                if(! response.isLogin){\r\n                    axios.defaults.headers.common['Authorization'] = '';\r\n                }else{\r\n                    this.#loginRemeber = response;\r\n                    setTimeout(()=>{\r\n                        this.#loginRemeber = undefined;\r\n                    }, 1000 * 60)\r\n                }\r\n                return callback(response);\r\n            }\r\n        })\r\n    }\r\n\r\n    responseIsOk({status = undefined} = {}){\r\n        if( ! status){\r\n            return false;\r\n        }\r\n        return (status == '200' || status == '201') ;\r\n    }\r\n\r\n    responseCheck(response){\r\n\t\tlet status = response.status;\r\n\t\tlet {code, data} = response.data;\r\n        if(status == '200' || status == '201'){\r\n\t\t\treturn response\r\n\t\t}else{\r\n            log.error(response);\r\n\t\t\tthrow new Error(response.message);\r\n\t\t}\r\n\t}\r\n    resetLoginRemeber(){\r\n        this.#loginRemeber = undefined;\r\n    }\r\n}\r\n\r\nexport const windowUtil = new WindowUtil();","import { windowUtil, __serverApi } from \"../window/windowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\n\r\nclass AccountController {\r\n\tconstructor() {\r\n\r\n\t}\r\n\r\n\tloginProcessing(param){\r\n\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\ttotal[k] = v;\r\n\t\t\t}\r\n\t\t\treturn total;\r\n\t\t},{});\r\n\t\treturn axios.post(__serverApi + '/login-processing', JSON.stringify(param), {\r\n\t\t\theaders:{\r\n\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t}\r\n\t\t})\r\n\t\t.then(response=>{\r\n\t\t\tif(windowUtil.responseIsOk(response) && top.constructor.name == 'Window'){\r\n\t\t\t\treturn response.data;\r\n\t\t\t}\r\n\t\t\treturn response;\t\r\n\t\t}).catch(err=>{\r\n\t\t\tlog.error('loginProcessing error : ', err.message);\r\n\t\t\taxios.defaults.headers.common['Authorization'] = '';\r\n\t\t\tconsole.log(err);\r\n\t\t\tif(err.response){\r\n\t\t\t\treturn err.response.data;\r\n\t\t\t}else{\r\n\t\t\t\treturn err.message\r\n\t\t\t}\r\n\t\t\t\r\n\t\t})\r\n\t}\r\n\tgetAccountInfo(){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/account/search/get-account-info`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response=>response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC getAccountInfo error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tupdateSimpleAccountInfo(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/account/update/simple-account-info`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createPermitWokrspaceInAccount error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n}\r\nexport const accountController = new AccountController();","import { windowUtil, __serverApi } from \"../window/windowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\n\r\nclass ApiS3Controller {\r\n\tconstructor() {\r\n\t}\r\n\tgenerateSecurityPutObjectPresignedUrl(param){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t}\r\n\t\t\t\treturn total;\r\n\t\t\t},{});\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/generate-presigned-url/create/security`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC sendChatting error', err);\r\n\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('sendChatting login error ::: ', error.message);\r\n\t\t\tlog.error('sendChatting login error stack ::: ', error.stack);\r\n\t\t\treturn undefined;\r\n\t\t});\r\n\t}\r\n\tgenerateSecurityGetObjectPresignedUrl(param){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t}\r\n\t\t\t\treturn total;\r\n\t\t\t},{});\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/generate-presigned-url/search/security`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC sendChatting error', err);\r\n\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('sendChatting login error ::: ', error.message);\r\n\t\t\tlog.error('sendChatting login error stack ::: ', error.stack);\r\n\t\t\treturn undefined;\r\n\t\t});\r\n\t}\r\n\tgenerateGetObjectPresignedUrl(param){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t}\r\n\t\t\t\treturn total;\r\n\t\t\t},{});\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/generate-presigned-url/create/`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC sendChatting error', err);\r\n\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('sendChatting login error ::: ', error.message);\r\n\t\t\tlog.error('sendChatting login error stack ::: ', error.stack);\r\n\t\t\treturn undefined;\r\n\t\t});\r\n\t}\r\n}\r\nexport const apiS3Controller = new ApiS3Controller();","import { windowUtil, __serverApi } from \"../window/windowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\n\r\nclass ChattingController {\r\n\tconstructor() {\r\n\r\n\t}\r\n\r\n\tsendChatting(param){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n                    if(v != undefined && v != ''){\r\n                        total[k] = v;\r\n                    }\r\n                    return total;\r\n                },{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/chatting/create/send-chatting`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC sendChatting error', err);\r\n\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('sendChatting login error ::: ', error.message);\r\n\t\t\tlog.error('sendChatting login error stack ::: ', error.stack);\r\n\t\t\treturn undefined;\r\n\t\t});\r\n\t}\t\r\n\tdeleteChatting(param){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n                    if(v != undefined && v != ''){\r\n                        total[k] = v;\r\n                    }\r\n                    return total;\r\n                },{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/chatting/delete/`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC sendChatting error', err);\r\n\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('sendChatting login error ::: ', error.message);\r\n\t\t\tlog.error('sendChatting login error stack ::: ', error.stack);\r\n\t\t\treturn undefined;\r\n\t\t});\r\n\t}\r\n\tsearchChattingList(param){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tlet {workspaceId, roomId} = param;\r\n\t\t\t\tlet queryString = Object.entries(param)\r\n\t\t\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId' && k != 'roomId')\r\n\t\t\t\t\t.map(([k,v]) => `${k}=${v}`).join('&')\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/chatting/search/chatting-list/${workspaceId}/${roomId}?${queryString}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC searchChatting error' , err);\r\n\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('searchChatting login error ::: ', error.message);\r\n\t\t\tlog.error('searchChatting login error stack ::: ', error.stack);\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n}\r\nexport const chattingController = new ChattingController();","import { windowUtil, __serverApi } from \"../window/windowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\n\r\nclass EmoticonController {\r\n\tconstructor() {\r\n    }\r\n\r\n\tcreateEmotionReaction(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/emoticon/create/reaction`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createEmotion error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n    deleteEmotion(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/emoticon/delete/`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC deleteEmotion error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tgetIsReaction(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tlet {workspaceId} = param;\r\n\t\t\t\tlet queryString = Object.entries(param)\r\n\t\t\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId')\r\n\t\t\t\t\t.map(([k,v]) => {\r\n\t\t\t\t\t\tif(v instanceof Array){\r\n\t\t\t\t\t\t\tv = v.map(val=>`${k}=${val}`).join('&')\r\n\t\t\t\t\t\t\treturn v;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn `${k}=${v}`\r\n\t\t\t\t\t}).join('&')\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/emoticon/search/is-reaction?${queryString}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC searchMyJoinedRoomList error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\t\r\n}\r\nexport const emoticonController = new EmoticonController();","import { windowUtil, __serverApi } from \"../window/windowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\n\r\nclass EventStreamController {\r\n    source;\r\n\tprevWorkspaceId;\r\n    #initIntervar;\r\n    constructor(){\r\n    }\r\n\r\n\tinitWorkspaceStream(param, EventSource, eventSendObj){\r\n        let {workspaceId} = param;\r\n        if( ! EventSource) EventSource = top?.EventSource;\r\n\t\t/*if(this.prevWorkspaceId == workspaceId && (this.source?.readyState == 1 || this.source?.readyState == 0)){\r\n            return;\r\n        }else if(this.prevWorkspaceId != workspaceId && (this.source?.readyState == 1 || this.source?.readyState == 0)){\r\n            this.source.close();\r\n        }*/\r\n\r\n        if(this.source) this.source.close();\r\n        \r\n        this.prevWorkspaceId = workspaceId;\r\n\r\n        this.source = new EventSource(`${__serverApi}/api/event-stream/workspace/${workspaceId}`, {\r\n            headers: {\r\n                'Authorization' : axios.defaults.headers.common['Authorization'],\r\n            },\r\n            withCredentials : ! top.__isLocal\r\n        });\r\n        this.source.onmessage = (event) => {\r\n            let {data, lastEventId, origin, type} = event;\r\n            data = JSON.parse(data);\r\n            log.debug('event stream data ::: ', data);\r\n\r\n            let eventName = data.serverSentStreamType.split('_').map((e, i)=>{\r\n                if(i == 0){\r\n                    return e.toLowerCase(); \r\n                }\r\n                return e.charAt(0) + e.substring(1).toLowerCase();\r\n            }).join('');\r\n\r\n            log.debug('on message: ', event.data, 'eventName ::', eventName);\r\n\r\n            if(this[eventName]){\r\n                this[eventName](eventName, data);\r\n                return ;\r\n            }\r\n            if(eventSendObj.webEventSend){\r\n                eventSendObj.webEventSend(eventName, data);\r\n            }else{\r\n                eventSendObj.send(eventName, data);\r\n            }\r\n        };\r\n\r\n        this.source.onerror = (error) => {\r\n            log.error('on stream err: ', error);\r\n            //log.debug('source ::: ', this.source);\r\n            /*this.#isConnectSource = false;\r\n            windowUtil.isLogin( result => {\r\n                if( ! result.isLogin){\r\n                    axios.defaults.headers.common['Authorization'] = '';\r\n                    this.source.close();\r\n                    this.#send('needLoginRequest', result);\r\n                }\r\n            })*/\r\n            //연결 실패되면 계속 시도하기에 임시 조치로 close\r\n            //모바일 웹에서는 연결 실패 후 재시도 안하기에 수동 재시도로 변경\r\n            this.source.close();\r\n            setTimeout(()=>{\r\n                this.initWorkspaceStream(param, EventSource, eventSendObj)\r\n            },500)\r\n            //stop();\r\n        };\r\n        this.source.onopen = (success) => {\r\n            log.debug('on success: ', success)\r\n        }\r\n        /*\r\n        * This will listen only for events\r\n        * similar to the following:\r\n        *\r\n        * event: notice\r\n        * data: useful data\r\n        * id: someid\r\n        this.source.addEventListener(\"notice\", (e) => {\r\n            log.debug('event notice', e.data);\r\n        });\r\n        */\r\n\r\n        /*\r\n        * Similarly, this will listen for events\r\n        * with the field `event: update`\r\n        this.source.addEventListener(\"update\", (e) => {\r\n            log.debug('event update ::: ',e.data);\r\n        });\r\n        */\r\n\r\n        /*\r\n        * The event \"message\" is a special case, as it\r\n        * will capture events without an event field\r\n        * as well as events that have the specific type\r\n        * `event: message` It will not trigger on any\r\n        * other event type.\r\n        this.source.addEventListener(\"message\", (e) => {\r\n            log.debug('message !!!!! : ', e.data);\r\n        });\r\n        */\r\n        //}\r\n        \r\n\t}\r\n    #initEvent(EventSource, eventSendObj){\r\n        \r\n    }\r\n    #closeRequest(){\r\n        this.source.close();\r\n    }\r\n}\r\n\r\n\r\n\r\nexport const eventStreamController = new EventStreamController();","import { windowUtil, __serverApi } from \"../window/windowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\nclass NoticeBoardController {\r\n\tconstructor() {\r\n\r\n    }\r\n\r\n    createNoticeBoardGroup(param = {}){\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                param = Object.entries(param).reduce((total, [k,v]) => {\r\n                    if(v != undefined && v != ''){\r\n                        total[k] = v;\r\n                    }\r\n                    return total;\r\n                },{});\r\n                return axios.post(`${__serverApi}/api/notice-board/create/group`, JSON.stringify(param), {\r\n                    headers:{\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                })\r\n                .then(windowUtil.responseCheck)\r\n                .then(response => response.data)\r\n                .catch(err=>{\r\n                    log.error('IPC createNoticeBoardGroup error : ', JSON.stringify(err));\r\n                    //axios.defaults.headers.common['Authorization'] = '';\r\n                    if(err.response){\r\n                        return err.response.data;\r\n                    }else{\r\n                        return err.message\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n    }\r\n\r\n    createNoticeBoard(param = {}){\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                param = Object.entries(param).reduce((total, [k,v]) => {\r\n                    if(v != undefined && v != ''){\r\n                        total[k] = v;\r\n                    }\r\n                    return total;\r\n                },{});\r\n                return axios.post(`${__serverApi}/api/notice-board/create/`, JSON.stringify(param), {\r\n                    headers:{\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                })\r\n                .then(windowUtil.responseCheck)\r\n                .then(response => response.data)\r\n                .catch(err=>{\r\n                    log.error('IPC createNoticeBoard error : ', JSON.stringify(err));\r\n                    //axios.defaults.headers.common['Authorization'] = '';\r\n                    if(err.response){\r\n                        return err.response.data;\r\n                    }else{\r\n                        return err.message\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n    }\r\n\r\n    createNoticeBoardDetail(param = {}){\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                param = Object.entries(param).reduce((total, [k,v]) => {\r\n                    if(v != undefined && v != ''){\r\n                        total[k] = v;\r\n                    }\r\n                    return total;\r\n                },{});\r\n                return axios.post(`${__serverApi}/api/notice-board/create/detail`, JSON.stringify(param), {\r\n                    headers:{\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                })\r\n                .then(windowUtil.responseCheck)\r\n                .then(response => response.data)\r\n                .catch(err=>{\r\n                    log.error('IPC createNoticeBoardDetail error : ', JSON.stringify(err));\r\n                    //axios.defaults.headers.common['Authorization'] = '';\r\n                    if(err.response){\r\n                        return err.response.data;\r\n                    }else{\r\n                        return err.message\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n    }\r\n    searchNoticeBoardList(param = {}, EventSource, eventSendObj){\r\n        if( ! EventSource) EventSource = top?.EventSource;\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                let {workspaceId, roomId} = param;\r\n                let queryString = Object.entries(param)\r\n                    .filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId' && k != 'roomId')\r\n                    .map(([k,v]) => `${k}=${v}`).join('&')\r\n                    //console.log('queryString ::: ', queryString);\r\n                //return axios.get(`${__serverApi}/api/notice-board/search/notice-board-list/${workspaceId}/${roomId}?${queryString}`, {\r\n                return new Promise(resolve=>{\r\n                    let source = new EventSource(`${__serverApi}/api/notice-board/search/notice-board-list/${workspaceId}/${roomId}?${queryString}`, {\r\n                        headers: {\r\n                            'Authorization' : axios.defaults.headers.common['Authorization'],\r\n                        },\r\n                        withCredentials : ! top.__isLocal\r\n                    });\r\n                    source.onmessage = (event) => {\r\n                        //console.log('test message :::: ',event);\r\n                        let {data, lastEventId, origin, type} = event;\r\n                        data = JSON.parse(data);\r\n                        if(eventSendObj.webEventSend){\r\n\t\t\t\t\t\t\teventSendObj.webEventSend('noticeBoardAccept', data);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\teventSendObj.send('noticeBoardAccept', data);\r\n\t\t\t\t\t\t}\r\n                    }\r\n                    source.onerror = (event) => {\r\n                        //console.log('searchNoticeBoardList error :::: ',event);\r\n                        source.close();\r\n                        resolve('done');\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n            log.error('error ::: ', error.message)\r\n            log.error('error stack :::', error.stack)\r\n            return undefined;\r\n        });\r\n    }\r\n\r\n    searchNoticeBoardDetailList(param = {}, EventSource, eventSendObj){\r\n        if( ! EventSource) EventSource = top?.EventSource;\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                let {workspaceId, roomId, noticeBoardId} = param;\r\n                if(! noticeBoardId){\r\n                    return;\r\n                }\r\n                let queryString = Object.entries(param)\r\n                    .filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId' && k != 'roomId' && k != 'noticeBoardId')\r\n                    .map(([k,v]) => `${k}=${v}`).join('&')\r\n                    //console.log('queryString ::: ', queryString);\r\n                //return axios.get(`${__serverApi}/api/notice-board/search/notice-board-detail-list/${workspaceId}/${roomId}/${noticeBoardId}?${queryString}`, {\r\n                return new Promise(resolve=>{\r\n                    let source = new EventSource(`${__serverApi}/api/notice-board/search/notice-board-detail-list/${workspaceId}/${roomId}/${noticeBoardId}?${queryString}`, {\r\n                        headers: {\r\n                            'Authorization' : axios.defaults.headers.common['Authorization'],\r\n                        },\r\n                        withCredentials : ! top.__isLocal\r\n                    });\r\n                    source.onmessage = (event) => {\r\n                        //console.log('test message :::: ',event);\r\n                        let {data, lastEventId, origin, type} = event;\r\n                        data = JSON.parse(data);\r\n                        if(eventSendObj.webEventSend){\r\n\t\t\t\t\t\t\teventSendObj.webEventSend('noticeBoardDetailAccept', data);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\teventSendObj.send('noticeBoardDetailAccept', data);\r\n\t\t\t\t\t\t}\r\n                    }\r\n                    source.onerror = (event) => {\r\n                        console.log('searchNoticeBoardDetailList error :::: ',event);\r\n                        source.close();\r\n                        resolve('done');\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n            log.error('error ::: ', error.message)\r\n            log.error('error stack :::', error.stack)\r\n            return undefined;\r\n        });\r\n    }\r\n\r\n    deleteNoticeBoard(param = {}){\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                param = Object.entries(param).reduce((total, [k,v]) => {\r\n                    if(v != undefined && v != ''){\r\n                        total[k] = v;\r\n                    }\r\n                    return total;\r\n                },{});\r\n                console.log('delete param',param)\r\n                return axios.post(`${__serverApi}/api/notice-board/delete/`, JSON.stringify(param), {\r\n                    headers:{\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                })\r\n                .then(windowUtil.responseCheck)\r\n                .then(response => response.data)\r\n                .catch(err=>{\r\n                    log.error('IPC deleteNoticeBoard error : ', JSON.stringify(err));\r\n                    //axios.defaults.headers.common['Authorization'] = '';\r\n                    if(err.response){\r\n                        return err.response.data;\r\n                    }else{\r\n                        return err.message\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n    }\r\n    deleteNoticeBoardGroup(param = {}){\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                param = Object.entries(param).reduce((total, [k,v]) => {\r\n                    if(v != undefined && v != ''){\r\n                        total[k] = v;\r\n                    }\r\n                    return total;\r\n                },{});\r\n\r\n                return axios.post(`${__serverApi}/api/notice-board/delete/group`, JSON.stringify(param), {\r\n                    headers:{\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                })\r\n                .then(windowUtil.responseCheck)\r\n                .then(response => response.data)\r\n                .catch(err=>{\r\n                    log.error('IPC deleteNoticeBoardGroup error : ', JSON.stringify(err));\r\n                    //axios.defaults.headers.common['Authorization'] = '';\r\n                    if(err.response){\r\n                        return err.response.data;\r\n                    }else{\r\n                        return err.message\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n    }\r\n    updateNoticeBoardOrder(param = []){\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                console.log('update param',param)\r\n                return axios.post(`${__serverApi}/api/notice-board/update/order`, JSON.stringify(param), {\r\n                    headers:{\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                })\r\n                .then(windowUtil.responseCheck)\r\n                .then(response => response.data)\r\n                .catch(err=>{\r\n                    log.error('IPC updateNoticeBoardOrder error : ', JSON.stringify(err));\r\n                    //axios.defaults.headers.common['Authorization'] = '';\r\n                    if(err.response){\r\n                        return err.response.data;\r\n                    }else{\r\n                        return err.message\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n    }\r\n    updateNoticeBoardDetailOrder(param = []){\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                return axios.post(`${__serverApi}/api/notice-board/update/detail-order`, JSON.stringify(param), {\r\n                    headers:{\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                })\r\n                .then(windowUtil.responseCheck)\r\n                .then(response => response.data)\r\n                .catch(err=>{\r\n                    log.error('IPC updateNoticeBoardDetailOrder error : ', JSON.stringify(err));\r\n                    //axios.defaults.headers.common['Authorization'] = '';\r\n                    if(err.response){\r\n                        return err.response.data;\r\n                    }else{\r\n                        return err.message\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n    }\r\n}\r\nexport const noticeBoardController = new NoticeBoardController();\r\n","import { windowUtil, __serverApi } from \"../window/windowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\nclass RoomController {\r\n\tconstructor() {\r\n    }\r\n\r\n\tcreateRoom(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/room/create/`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createRoom error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tcreateMySelfRoom(param = {}){\r\n\t\tif( ! param.workspaceId || isNaN(parseInt(param.workspaceId))){\r\n\t\t\tlog.error(`createMySelfRoom workspaceId is ::: ${param.workspaceId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/room/create/my-self-room/${param.workspaceId}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createMySelfRoom error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tcreateRoomInAccount(param = []){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/room/create/in-account`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.then(data => {\r\n\t\t\t\t\tlog.debug('createRoomInAccount ::: ',data)\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createRoomInAccount error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tupdateRoomInAccoutOrder(param = []){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/room/update/order`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC updateRoomInAccoutOrder error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tcreateRoomFavorites(param){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/room/create/favorites`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createRoomFavorites error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tupdateRoomFavorites(param = []){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/room/update/favorites-order`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createRoom error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tsearchRoomList(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tlet {roomId} = param;\r\n\t\t\t\tlet queryString = Object.entries(param)\r\n\t\t\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'roomId')\r\n\t\t\t\t\t.map(([k,v]) => `${k}=${v}`).join('&')\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/room/search/list/${roomId}?${queryString}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC searchRoom error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tsearchMyJoinedRoomList(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tlet {workspaceId} = param;\r\n\t\t\t\tlet queryString = Object.entries(param)\r\n\t\t\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId')\r\n\t\t\t\t\t.map(([k,v]) => {\r\n\t\t\t\t\t\tif(v instanceof Array){\r\n\t\t\t\t\t\t\tv = v.map(val=>`${k}=${val}`).join('&')\r\n\t\t\t\t\t\t\treturn v;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn `${k}=${v}`\r\n\t\t\t\t\t}).join('&')\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/room/search/my-joined-list/${workspaceId}?${queryString}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC searchMyJoinedRoomList error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tsearchRoomFavoritesList(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tlet {workspaceId} = param;\r\n\t\t\t\tlet queryString = Object.entries(param)\r\n\t\t\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId')\r\n\t\t\t\t\t.map(([k,v]) => {\r\n\t\t\t\t\t\tif(v instanceof Array){\r\n\t\t\t\t\t\t\tv = v.map(val=>`${k}=${val}`).join('&')\r\n\t\t\t\t\t\t\treturn v;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn `${k}=${v}`\r\n\t\t\t\t\t}).join('&')\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/room/search/favorites-list/${workspaceId}?${queryString}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC searchMyJoinedRoomList error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tsearchRoomJoinedAccountList(param = {}, EventSource, eventSendObj){\r\n\r\n\t\tif( ! param.roomId || isNaN(parseInt(param.roomId))){\r\n\t\t\tlog.error(`searchRoomJoinedAccountList roomId is ::: ${param.roomId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tif( ! EventSource) EventSource = top?.EventSource;\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn new Promise(resolve=>{\r\n\t\t\t\t\tlet source = new EventSource(`${__serverApi}/api/room/search/in-account-list/${param.roomId}`, {\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t'Authorization' : axios.defaults.headers.common['Authorization'],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\twithCredentials : ! top.__isLocal\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsource.onmessage = (event) => {\r\n\t\t\t\t\t\t//console.log('test message :::: ',event);\r\n\t\t\t\t\t\tlet {data, lastEventId, origin, type} = event;\r\n\t\t\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t\t\t\tif(eventSendObj.webEventSend){\r\n\t\t\t\t\t\t\teventSendObj.webEventSend('roomInAccountAccept', data);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\teventSendObj.send('roomInAccountAccept', data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsource.onerror = (event) => {\r\n\t\t\t\t\t\t//console.log('searchRoomJoinedAccountList error :::: ',event);\r\n\t\t\t\t\t\tsource.close();\r\n\t\t\t\t\t\tresolve('done');\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\t\r\n\tgetRoomDetail(param = {}){\r\n\t\tif( ! param.roomId || isNaN(parseInt(param.roomId))){\r\n\t\t\tlog.error(`getRoomDetail roomId is ::: ${param.roomId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/room/search/detail/${param.roomId}`, {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type' : 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tisRoomFavorites(param = {}){\r\n\t\tif( ! param.roomId || isNaN(parseInt(param.roomId))){\r\n\t\t\tlog.error(`isRoomFavorites roomId is ::: ${param.roomId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/room/search/is-room-favorites/${param.roomId}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC isRoomFavorites error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tisRoomOwner(param = {}){\r\n\t\tif( ! param.roomId || isNaN(parseInt(param.roomId))){\r\n\t\t\tlog.error(`isRoomOwner roomId is ::: ${param.roomId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/room/search/is-owner/${param.roomId}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC isRoomOwner error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tisMyAttendRoom(param = {}){\r\n\t\tif( ! param.roomId || isNaN(parseInt(param.roomId))){\r\n\t\t\tlog.error(`isMyAttendRoom roomId is ::: ${param.roomId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/room/search/is-my-attend/${param.roomId}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC isMyAttendRoom error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\troomInAccountOut(param = {}){\r\n\t\tif( ! param.roomId || isNaN(parseInt(param.roomId)) || ! param.accountName){\r\n\t\t\tlog.error(`roomInAccountOut roomId is ::: ${param.roomId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.delete(`${__serverApi}/api/room/delete/out/${param.roomId}/${param.accountName}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC roomInAccountOut error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n}\r\nexport const roomController = new RoomController();","import { windowUtil, __serverApi } from \"../window/windowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\n\r\nclass WorkspaceController {\r\n\tconstructor() {\r\n\t}\r\n\tsearchWorkspaceMyJoined(param = {}){\r\n\t\treturn windowUtil.isLogin((result) => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/workspace/search/my-joined-list?page=${param.page}&size=${param.size}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response=>{\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('error : ', JSON.stringify(err));\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\tif( ! err.response.data.content){\r\n\t\t\t\t\t\t\terr.response.data.content = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tsearchNameSpecificList(param = {}){\r\n\t\treturn windowUtil.isLogin((result) => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/workspace/search/name-specific-list?page=${param.page}&size=${param.size}&workspaceName=${param.workspaceName}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response=>{\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('error : ', JSON.stringify(err));\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\tif( ! err.response.data.content){\r\n\t\t\t\t\t\t\terr.response.data.content = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tsearchWorkspaceInAccount(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tlet queryString = Object.entries(param)\r\n\t\t\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId')\r\n\t\t\t\t\t.map(([k,v]) => `${k}=${v}`).join('&')\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/workspace/search/joined-account-list/${param.workspaceId}?${queryString}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC searchWorkspaceInAccount error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tgetWorkspaceDetail(param = {}){\r\n\t\tif( ! param.workspaceId || isNaN(parseInt(param.workspaceId))){\r\n\t\t\tlog.error(`workspaceId is ::: ${param.workspaceId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/workspace/search/detail/${param.workspaceId}`, {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type' : 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tgetWorkspaceInAccountCount(param = {}){\r\n\t\tif( ! param.workspaceId || isNaN(parseInt(param.workspaceId))){\r\n\t\t\tlog.error(`workspaceId is ::: ${param.workspaceId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/workspace/search/count/${param.workspaceId}`, {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type' : 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tcreatePermitWokrspaceInAccount(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/workspace/create/permit`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createPermitWokrspaceInAccount error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tcreateGiveAdmin(param={}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/workspace/create/give-admin`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createPermitWokrspaceInAccount error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tsearchPermitRequestList(param = {}, EventSource, eventSendObj){\r\n\t\tif( ! param.workspaceId || isNaN(parseInt(param.workspaceId))){\r\n\t\t\tlog.error(`searchPermitRequestList workspaceId is ::: ${param.workspaceId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tif( ! EventSource) EventSource = top?.EventSource;\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\t//return axios.get(`${__serverApi}/api/workspace/search/permit-request-list/${param.workspaceId}`, {\r\n\t\t\t\treturn new Promise(resolve=>{\r\n\t\t\t\t\tlet source = new EventSource(`${__serverApi}/api/workspace/search/permit-request-list/${param.workspaceId}`, {\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t'Authorization' : axios.defaults.headers.common['Authorization'],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\twithCredentials : ! top.__isLocal\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsource.onmessage = (event) => {\r\n\t\t\t\t\t\t//console.log('test message :::: ',event);\r\n\t\t\t\t\t\tlet {data, lastEventId, origin, type} = event;\r\n\t\t\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t\t\t\tif(eventSendObj.webEventSend){\r\n\t\t\t\t\t\t\teventSendObj.webEventSend('workspacePermitRequestAccept', data);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\teventSendObj.send('workspacePermitRequestAccept', data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsource.onerror = (event) => {\r\n\t\t\t\t\t\t//console.log('searchPermitRequestList error :::: ',event);\r\n\t\t\t\t\t\tsource.close();\r\n\t\t\t\t\t\tresolve('done');\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tgetIsAdmin(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tlet queryString = Object.entries(param)\r\n\t\t\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId')\r\n\t\t\t\t\t.map(([k,v]) => `${k}=${v}`).join('&')\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/workspace/search/is-admin/${param.workspaceId}?${queryString}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC getIsAdmin error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tcreateWorkspaceJoined(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/workspace/create/joined`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createPermitWokrspaceInAccount error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\r\n\tcreateWorkspace(param={}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/workspace/create/`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createWorkspace error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n}\r\nexport const workspaceController = new WorkspaceController();","import { accountController } from \"./../controller/AccountController\"\r\nimport { apiS3Controller } from \"./../controller/ApiS3Controller\";\r\nimport { chattingController } from \"./../controller/ChattingController\";\r\nimport { emoticonController } from \"./../controller/EmoticonController\";\r\nimport { eventStreamController } from \"./../controller/EventStreamController\";\r\nimport { noticeBoardController } from \"./../controller/NoticeBoardController\";\r\nimport { roomController } from \"./../controller/RoomController\";\r\nimport { workspaceController } from \"./../controller/WorkspaceController\";\r\n\r\nimport { windowUtil } from \"../window/windowUtil\";\r\n\r\nimport axios from 'axios';\r\n\r\n/**\r\n * @author kimjoohyoung\r\n * @description 기본적으로 사용 할 preload 정의\r\n */\r\n\r\nlet permission;\r\n\r\nwindow.addEventListener('load', () => {\r\n\tNotification.requestPermission().then(result => {\r\n\t\tconsole.log(result);\r\n\t\tpermission = result;\r\n\t})\r\n\tif(globalHandler.loadInitRoomId){\r\n\t\tipcRenderer.webEventSend('roomChange', {roomId:globalHandler.loadInitRoomId});\r\n\t}\r\n\tif(globalHandler.loadInitNoticeBoardId){\r\n\t\tipcRenderer.webEventSend('noticeBoardChange', {noticeBoardId:globalHandler.loadInitNoticeBoardId});\r\n\t}\r\n})\r\n\r\nexport const globalHandler = new class GlobalHandler{\r\n\t#workspaceId;\r\n\tloadInitRoomId;\r\n\tloadInitNoticeBoardId;\r\n\t#option = {};\r\n\tconstructor(){\r\n\t\t//n : name, v : value, c : create_at, u : update_at\r\n\t\tlet queryString = new URLSearchParams(location.search);\r\n\t\tthis.#workspaceId = queryString.get('workspaceId');\r\n\t\tthis.loadInitRoomId = queryString.get('roomId');\r\n\t\tthis.loadInitNoticeBoardId = queryString.get('noticeBoardId');\r\n\t\tthis.#option = JSON.parse(localStorage.getItem('o'))?.reduce((t,e)=>{\r\n\t\t\tt[e.OPTION_NAME] = e;\r\n\t\t\treturn t;\r\n\t\t}, {}) || {};\r\n\r\n\t}\r\n\r\n\tresetWorkspace(){\r\n\t\tthis.#workspaceId = undefined;\r\n\t}\r\n\r\n\tset workspaceId(workspaceId){\r\n\t\tif(this.#workspaceId === workspaceId) return;\r\n\t\tthis.#workspaceId = workspaceId;\r\n\t\tipcRenderer.webEventSend('workspaceChange', {workspaceId : this.workspaceId});\r\n\t}\r\n\tget workspaceId(){\r\n\t\treturn this.#workspaceId\r\n\t}\r\n\r\n\tsetOption({name, value}){\r\n\t\tif( ! this.#option[name]) {\r\n\t\t\tthis.#option[name] = {\r\n\t\t\t\tOPTION_NAME : name,\r\n\t\t\t\tOPTION_VALUE : value,\r\n\t\t\t\tCREATE_AT : new Date().getTime(),\r\n\t\t\t\tUPDATE_AT : new Date().getTime(),\r\n\t\t\t};\r\n\t\t}else{\r\n\t\t\tthis.#option[name].OPTION_VALUE = value,\r\n\t\t\tthis.#option[name].UPDATE_AT = new Date().getTime();\r\n\t\t}\r\n\t\tlocalStorage.setItem('o', JSON.stringify( Object.values(this.#option)) );\r\n\t}\r\n\r\n\tgetOption(name){\r\n\t\t//console.log(this.#option, name);\r\n\t\treturn this.#option[name];\r\n\t}\r\n}\r\n\r\nexport const ipcRenderer = new class IpcRendererWeb{\r\n\t#send = {};\r\n\t#invoke = {};\r\n\t#connection = {};\r\n\tconstructor(){\r\n\r\n\t\t[\r\n\t\t\taccountController, apiS3Controller, \r\n\t\t\tchattingController, emoticonController, \r\n\t\t\teventStreamController, noticeBoardController,\r\n\t\t\troomController, workspaceController\r\n\t\t].flatMap(e=>{\r\n\t\t\treturn Object.getOwnPropertyNames(Object.getPrototypeOf(e)).filter(e=> e != 'constructor').map(name=>{\r\n\t\t\t\treturn [name, e]\r\n\t\t\t});\r\n\t\t}).forEach( ([name, clazz])=>{\r\n\t\t\tthis.#send[name] = clazz\r\n\t\t\tthis.#invoke[name] = clazz \r\n\t\t})\r\n\t}\r\n\tsend(name, param){\r\n\t\tif( ! this.#send[name] || ! this.#send[name] instanceof Function){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.#send[name][name](param, undefined, ipcRenderer);\r\n\t}\r\n\tinvoke(name, param){\r\n\t\tif( ! this.#invoke[name] || ! this.#invoke[name] instanceof Function){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\treturn this.#invoke[name][name](param, undefined, ipcRenderer);\r\n\t}\r\n\twebEventSend(eventName, data){\r\n\t\tif( ! this.#connection[eventName] || ! this.#connection[eventName] instanceof Function){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.#connection[eventName](undefined, data);\r\n\t}\r\n\ton(eventName, callback){\r\n\t\tthis.#connection[eventName] = callback;\r\n\t}\r\n\t/*\r\n\tsend : {},\r\n\tinvoke : {},\r\n\tconnection : {},\r\n\teventSend: (eventName, data) => {\r\n\t\tif( ! ipcRenderer.connection[eventName] instanceof Function){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tipcRenderer.connection[eventName](undefined, data);\r\n\t},\r\n\ton : (eventName, callback) => {\r\n\t\tconnection[eventName] = callback;\r\n\t}*/\r\n};\r\n\r\nconst electronEventTrigger = {\r\n\tobjectEventListener : {},\r\n\tonEvent : {},\r\n\ton : (eventName, callback) => {\r\n\t\telectronEventTrigger.onEvent[eventName] = callback;\r\n\t\tipcRenderer.on(eventName, (event, message) => {\r\n\t\t\telectronEventTrigger.trigger(eventName, event, message);\r\n\t\t})\r\n\t},\r\n\taddElectronEventListener : (eventName, callback) => {\r\n\t\tif(electronEventTrigger.objectEventListener.hasOwnProperty(eventName)){\r\n\t\t\telectronEventTrigger.objectEventListener[eventName].push({ [callback.name] : callback });\r\n\t\t}else{\r\n\t\t\telectronEventTrigger.objectEventListener[eventName] = [{ [callback.name] : callback }];\r\n\t\t}\r\n\t\tipcRenderer.on(eventName, (event, message) => {\r\n\t\t\telectronEventTrigger.trigger(eventName, event, message);\r\n\t\t})\r\n\t},\r\n\tremoveElectronEventListener : (eventName, callback) => {\r\n\t\tif(electronEventTrigger.objectEventListener.hasOwnProperty(eventName)){\r\n\t\t\tif(callback){\r\n\t\t\t\telectronEventTrigger.objectEventListener[eventName] = electronEventTrigger.objectEventListener[eventName].filter(e=> ! e.hasOwnProperty(callback.name))\r\n\t\t\t}else{\r\n\t\t\t\tdelete electronEventTrigger.objectEventListener[eventName]\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\ttrigger : (eventName, event, message) => {\r\n\t\tnew Promise(resolve=> {\r\n\t\t\tif( ! electronEventTrigger.objectEventListener.hasOwnProperty(eventName)){\r\n\t\t\t\tresolve();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telectronEventTrigger.objectEventListener[eventName].forEach(async obj => {\r\n\t\t\t\tObject.values(obj).forEach(async callback => {\r\n\t\t\t\t\tif( ! callback || ! callback instanceof Function){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnew Promise(res=>{\t\r\n\t\t\t\t\t\ttry{\r\n\t\t\t\t\t\t\tcallback(message);\r\n\t\t\t\t\t\t}catch(err){\r\n\t\t\t\t\t\t\tconsole.error(`${eventName} error message ::: `,err.message);\r\n\t\t\t\t\t\t\tconsole.error(`${eventName} error stack ::: `,err.stack);\r\n\t\t\t\t\t\t\tthrow new Error('');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tres();\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\tresolve();\r\n\t\t})\r\n\t\t\r\n\t\tnew Promise(resolve => {\r\n\t\t\tif( ! electronEventTrigger.onEvent[eventName] || ! electronEventTrigger.onEvent[eventName] instanceof Function){\r\n\t\t\t\tresolve();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttry{\r\n\t\t\t\telectronEventTrigger.onEvent[eventName](message);\r\n\t\t\t}catch(err){\r\n\t\t\t\tconsole.error(`${eventName} error message ::: `, err.message);\r\n\t\t\t\tconsole.error(`${eventName} error stack ::: `, err.stack);\r\n\t\t\t}\r\n\t\t\tresolve();\r\n\t\t})\r\n\t\t\r\n\t}\r\n};\r\n\r\nexport const myAPI = {\r\n\t/**\r\n\t * 단방향 ipc 통신\r\n\t * 보안상의 이유로ipcRenderer.send 전체 API를 직접 노출하지 않습니다. \r\n\t * Electron API에 대한 렌더러의 액세스를 가능한 한 많이 제한해야 합니다.\r\n\t */\r\n\t//setTitle : (param) => ipcRenderer.send('setTitle', param),\r\n\t/**\r\n\t * dialog:IPC 채널 이름 의 접두사는 코드에 영향을 미치지 않습니다. \r\n\t * 코드 가독성에 도움이 되는 네임스페이스 역할만 합니다.\r\n\t * 보안상의 이유로ipcRenderer.invoke 전체 API를 직접 노출하지 않습니다. \r\n\t * Electron API에 대한 렌더러의 액세스를 가능한 한 많이 제한해야 합니다. \r\n\t */\r\n\t//openFile : () => ipcRenderer.invoke('dialog:openFile'),\r\n\t\r\n\t/**\r\n\t * key-value가 아닌 함수는 일렉트론에서만쓰고 웹버전에서는 쓰지 않도록 합니다.\r\n\t * event.electronEventTrigger은 일렉트론 + 웹이 함께써야 하는 부분이 있어 예외입니다.\r\n\t */\r\n\r\n\tgetProjectPath : async () => `${location.origin}/`,\r\n\r\n\tcreateSubWindow : async (param) => {\r\n\t\t//open(url?: string | URL, target?: string, features?: string): WindowProxy | null;\r\n\t\tlet queryString = Object.entries(param)\r\n\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'pageName' && k != 'pageId')\r\n\t\t\t.map(([k,v]) => `${k}=${v}`).join('&')\r\n\t\twindow.open(`/web/create-sub-window/${param.pageName}?${queryString}`, param.pageId)\r\n\t},\r\n\r\n\tcloseRequest : async (param) => {},\r\n\t\r\n\tmaximizeRequest : async () => {},\r\n\r\n\tunmaximizeRequest : async () => {},\r\n\t\r\n\tminimizeRequest : async () => {},\r\n\t\r\n\trestoreRequest : async () => {},\r\n\t\r\n\tisMaximize : async () => false,\r\n\r\n\tresetWorkspaceId: async () => {\r\n\t\tglobalHandler.resetWorkspace();\r\n\t},\r\n\r\n\tgetWorkspaceId: async () => {\r\n\t\treturn globalHandler.workspaceId;\r\n\t},\r\n\r\n\tnotifications: async (param) => {\r\n\t\tlet content = param.content.join('\\n');\r\n\t\tcontent = content.substring(0,200) + (content.length > 200 ? '...' : '');\r\n\t\tif(permission == 'granted'){\r\n\t\t\tmyAPI.getProjectPath().then(path=>{\r\n\t\t\t\tlet noti = new Notification(param.fullName, { body: content, icon: path+'image/icon.icon' });\r\n\t\t\t\tnoti.onclick = () => {\r\n\t\t\t\t\tif(globalHandler.workspaceId != param.workspaceId){\r\n\t\t\t\t\t\tipcRenderer.webEventSend('workspaceChange', {workspaceId : param.workspaceId});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tipcRenderer.webEventSend('roomChange', {roomId : param.roomId});\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tnoti.close()\r\n\t\t\t\t}, 4000);\r\n\t\t\t})\r\n\t\t}else{\r\n\t\t\tlet html = Object.assign(document.createElement('div'), {\r\n\t\t\t\tinnerHTML : `\r\n\t\t\t\t\t<h1>${param.fullName}</h1>\r\n\t\t\t\t\t<div>${param.content}</div>\r\n\t\t\t\t`\r\n\t\t\t})\r\n\t\t\tObject.assign(html.style, {\r\n\t\t\t\tposition: 'fixed', right: '2vw', bottom: '2vh', borderRadius : '15px',\r\n\t\t\t\tbackground: '#e1e1e1cf', width: '40%', height: 'auto',\r\n\t\t\t\tzIndex: 9999, whiteSpace: 'break-spaces', overflowWrap: 'anywhere', \r\n\t\t\t\tdisplay: 'flex', flexDirection: 'column', alignItems: 'center',\r\n\t\t\t\tjustifyContent: 'flex-start', fontSize: '13px', paddingBottom: '5vh'\r\n\t\t\t})\r\n\t\t\thtml.onclick = () => {\r\n\t\t\t\tif(globalHandler.workspaceId != param.workspaceId){\r\n\t\t\t\t\tipcRenderer.webEventSend('workspaceChange', {workspaceId : param.workspaceId});\r\n\t\t\t\t}\r\n\t\t\t\tipcRenderer.webEventSend('roomChange', {roomId : param.roomId});\r\n\t\t\t}\r\n\t\t\tdocument.body.append(html);\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\thtml.remove();\r\n\t\t\t}, 4000);\r\n\t\t}\r\n\t},\r\n\r\n\tgetOption: async (optionName) => globalHandler.getOption(optionName),\r\n\tsetOption: async (param) => globalHandler.setOption(param),\r\n\r\n\tisLogin: async () => {\r\n\t\treturn windowUtil.isLogin(result=>{\r\n\t\t\treturn {isLogin : result.isLogin}\r\n\t\t})\r\n\t},\r\n\r\n\tgetServerUrl : async () => `${location.origin}`,\r\n\t\r\n\tlogout : async () => () => {\r\n\t\taxios.defaults.headers.common['Authorization'] = '';\r\n\t\tfetch('/logout', {\r\n\t\t\tmethod: 'GET',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type' : 'application/json'\r\n\t\t\t}}\r\n\t\t).then(response=>{\r\n\t\t\tif( ! response.ok){\r\n\t\t\t\tconsole.error('response is not ok', response);\r\n\t\t\t\talert('로그아웃에 실패하였습니다.');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tmyAPI.pageChange.changeWokrspacePage();\r\n\t\t})\r\n\t},\r\n\r\n\tpageChange : {\r\n\t\tchangeLoginPage : async () => top.location.href = '/web',\r\n\t\tchangeWokrspacePage : async () => top.location.href = '/web',\r\n\t\tchangeMainPage : async (param) => top.location.href = `/web/main?workspaceId=${param.workspaceId}`,\r\n\t},\r\n\t\r\n\tevent : {\r\n\t\telectronEventTrigger : electronEventTrigger,\r\n\t},\r\n\r\n\tstream : {\r\n\t\tinitWorkspaceStream : async (param) => ipcRenderer.send('initWorkspaceStream', param),\r\n\t},\r\n\r\n\taccount : {\r\n\t\tloginProcessing : async (param) => ipcRenderer.invoke('loginProcessing', param),\r\n\t\tgetAccountInfo : async () => ipcRenderer.invoke('getAccountInfo'),\r\n\t\tupdateSimpleAccountInfo : async (param) => ipcRenderer.invoke('updateSimpleAccountInfo', param)\r\n\t},\r\n\r\n\tchatting : {\r\n\t\tsendChatting : async (param) => ipcRenderer.invoke('sendChatting', param),\r\n\t\tdeleteChatting : async (param) => ipcRenderer.invoke('deleteChatting', param),\r\n\t\tsearchChattingList : async (param) => ipcRenderer.invoke('searchChattingList', param),\r\n\t},\r\n\t\r\n\tworkspace : {\r\n\t\tsearchWorkspaceMyJoined : async (param) => ipcRenderer.invoke('searchWorkspaceMyJoined', param),\r\n\t\tsearchNameSpecificList: async (param) => ipcRenderer.invoke('searchNameSpecificList', param),\r\n\t\tsearchWorkspaceInAccount : async (param) => ipcRenderer.invoke('searchWorkspaceInAccount', param),\r\n\t\tgetWorkspaceDetail : async (param) => ipcRenderer.invoke('getWorkspaceDetail', param),\r\n\t\tcreatePermitWokrspaceInAccount: async (param) => ipcRenderer.invoke('createPermitWokrspaceInAccount', param),\r\n\t\tcreateGiveAdmin : async (param) => ipcRenderer.invoke('createGiveAdmin', param),\r\n\t\tsearchPermitRequestList : async (param) => ipcRenderer.invoke('searchPermitRequestList', param),\r\n\t\tgetIsAdmin : async (param) => ipcRenderer.invoke('getIsAdmin', param),\r\n\t\tcreateWorkspaceJoined: async (param) => ipcRenderer.invoke('createWorkspaceJoined', param),\r\n\t\tcreateWorkspace : async (param) => ipcRenderer.invoke('createWorkspace', param),\r\n\t\tgetWorkspaceInAccountCount : async (param) => ipcRenderer.invoke('getWorkspaceInAccountCount', param),\r\n\t},\r\n\r\n\troom : {\r\n\t\tcreateRoom : async (param) => ipcRenderer.invoke('createRoom', param),\r\n\t\tcreateMySelfRoom : async (param)=> ipcRenderer.invoke('createMySelfRoom', param),\r\n\t\tcreateRoomInAccount : async (param) => ipcRenderer.invoke('createRoomInAccount', param),\r\n\t\tcreateRoomFavorites : async (param) => ipcRenderer.invoke('createRoomFavorites', param),\r\n\t\tupdateRoomInAccoutOrder : async (param) => ipcRenderer.invoke('updateRoomInAccoutOrder', param),\r\n\t\tupdateRoomFavorites : async (param) => ipcRenderer.invoke('updateRoomFavorites', param),\r\n\t\tsearchRoom : async (param) => ipcRenderer.invoke('searchRoom', param),\r\n\t\tsearchMyJoinedRoomList : async (param) => ipcRenderer.invoke('searchMyJoinedRoomList', param),\r\n\t\tsearchRoomFavoritesList : async (param) => ipcRenderer.invoke('searchRoomFavoritesList', param),\r\n\t\tsearchRoomJoinedAccountList : async (param) => ipcRenderer.invoke('searchRoomJoinedAccountList', param),\r\n\t\tgetRoomDetail : async (param) => ipcRenderer.invoke('getRoomDetail', param),\r\n\t\tisRoomFavorites : async (param) => ipcRenderer.invoke('isRoomFavorites', param),\r\n\t\tisRoomOwner : async(param) => ipcRenderer.invoke('isRoomOwner', param),\r\n\t\tisMyAttendRoom : async(param) => ipcRenderer.invoke('isMyAttendRoom', param),\r\n\t\troomInAccountOut : async(param) => ipcRenderer.invoke('roomInAccountOut', param),\r\n\t},\r\n\r\n\tnoticeBoard : {\r\n\t\tcreateNoticeBoard : async (param) => ipcRenderer.invoke('createNoticeBoard', param),\r\n\t\tcreateNoticeBoardGroup : async (param) => ipcRenderer.invoke('createNoticeBoardGroup', param),\r\n\t\tcreateNoticeBoardDetail : async (param) => ipcRenderer.invoke('createNoticeBoardDetail', param),\r\n\t\tdeleteNoticeBoard : async (param) => ipcRenderer.invoke('deleteNoticeBoard', param),\r\n\t\tdeleteNoticeBoardGroup : async (param) => ipcRenderer.invoke('deleteNoticeBoardGroup', param),\r\n\t\tupdateNoticeBoardOrder : async (param) => ipcRenderer.invoke('updateNoticeBoardOrder', param),\r\n\t\tupdateNoticeBoardDetailOrder : async (param) => ipcRenderer.invoke('updateNoticeBoardDetailOrder', param),\r\n\t\tsearchNoticeBoardList : async (param) => ipcRenderer.invoke('searchNoticeBoardList', param),\r\n\t\tsearchNoticeBoardDetailList : async (param) => ipcRenderer.invoke('searchNoticeBoardDetailList', param),\r\n\t},\r\n\ts3: {\r\n\t\tgenerateSecurityPutObjectPresignedUrl : async (param) => ipcRenderer.invoke('generateSecurityPutObjectPresignedUrl', param),\r\n\t\tgenerateSecurityGetObjectPresignedUrl : async (param) => ipcRenderer.invoke('generateSecurityGetObjectPresignedUrl', param),\r\n\t\tgenerateGetObjectPresignedUrl : async(param) => ipcRenderer.invoke('generateGetObjectPresignedUrl', param),\r\n\t},\r\n\temoticon: {\r\n\t\tcreateEmotionReaction : async (param) => ipcRenderer.invoke('createEmotionReaction', param),\r\n\t\tgetIsReaction : async (param) => ipcRenderer.invoke('getIsReaction', param)\r\n\t}\r\n}\r\nwindow.myAPI = myAPI;\r\nconsole.log('????????????????');\r\nconsole.log(window.myAPI)","\r\nexport const noticeBoardHandler = new class NoticeBoardHandler{\r\n    #noticeBoardId\r\n    #noticeBoard = [];\r\n    #addNoticeBoardIdChangeListener = {};\r\n    #noticeBoardChangeDone;\r\n    #noticeBoardChangeAwait;\r\n    constructor(){\r\n\r\n    }\r\n\r\n    set addNoticeBoardIdChangeListener({name, callback, runTheFirst}){\r\n        this.#addNoticeBoardIdChangeListener[name] = callback;\r\n        if(runTheFirst && this.#noticeBoardId){\r\n            callback(this);\r\n        }\r\n    }\r\n\r\n    get addNoticeBoardIdChangeListener(){\r\n        return this.#addNoticeBoardIdChangeListener;\r\n    }\r\n\r\n    set noticeBoardId(noticeBoardId){\r\n        if( ! noticeBoardId){\r\n            console.error('noticeBoardId is undefined');\r\n            return;\r\n        }\r\n        this.#noticeBoard = [];\r\n        this.#noticeBoardId = noticeBoardId;\r\n        let startCallbackPromise = Promise.all(\r\n            Object.values(this.#addNoticeBoardIdChangeListener).map(async callback => {\r\n                return new Promise(res => {\r\n                    callback(this);\r\n                    res();\r\n                })\r\n            })\r\n        )\r\n        if( ! this.#noticeBoardChangeAwait){\r\n            this.#noticeBoardChangeAwait = new Promise(resolve=>{\r\n                this.#noticeBoardChangeDone = resolve;\r\n                this.#noticeBoardChangeDone(startCallbackPromise);\r\n            })\r\n        }else{\r\n            this.#noticeBoardChangeAwait.then(() => {\r\n                startCallbackPromise.then(() => {\r\n                    this.#noticeBoardChangeAwait = new Promise(resolve => {\r\n                        this.#noticeBoardChangeDone = resolve;\r\n                    })\r\n                })\r\n            })\r\n        }\r\n    }\r\n\r\n    get noticeBoardId(){\r\n        return this.#noticeBoardId;\r\n    }\r\n\r\n    get noticeBoard(){\r\n        return this.#noticeBoard;\r\n    }\r\n\r\n    removeNoticeBoardIdChangeListener(name){\r\n        delete this.#addNoticeBoardIdChangeListener(name);\r\n    }\r\n\r\n}","\r\nexport default class ToolHandler{\r\n\r\n\t#extendsElement;\r\n\t#defaultClass;\r\n\t#isInline = true;\r\n\t/**\r\n\t * @type {HTMLButtonElement}\r\n\t */\r\n\t#toolButton;\r\n\t#identity;\r\n\t#connectedFriends = [];\r\n\t#buttonMap = {};\r\n\t/**\r\n\t * \r\n\t * @param {FreedomInterface} identity\r\n\t * @returns {FreedomInterface} \r\n\t */\r\n\tconstructor(identity){\r\n\t\tthis.#identity = identity;\r\n\t\t//다른 부분 선택시에 동작하지 않도록 수정 필요(에디터만 셀렉션체인지인 경우)\r\n\t\tdocument.addEventListener(\"selectionchange\", (event) => {\r\n\t\t\tlet selection = window.getSelection();\r\n\t\t\tif(! document.activeElement.classList.contains('free-will-editor')){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * None 현재 선택된 항목이 없습니다.\r\n\t\t\t * Caret 선택 항목이 축소됩니다(예: 캐럿이 일부 텍스트에 배치되지만 범위가 선택되지 않음).\r\n\t\t\t * Range 범위가 선택되었습니다.\r\n\t\t\t */\r\n\t\t\tif(selection.type == 'None' || ! this.#toolButton){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tlet findTarget = this.#connectedFriends.find(e=> selection.containsNode(e, true) || selection.containsNode(e, false))\r\n\t\t\tif(findTarget){\r\n\t\t\t\tthis.#toolButton.dataset.tool_status = 'connected';\r\n\t\t\t}else {\r\n\t\t\t\tthis.#toolButton.dataset.tool_status = 'blur';\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tisLastTool(tool){\r\n\t\tif(this.#identity.prototype.isPrototypeOf(tool)){\r\n\t\t\treturn tool === this.#connectedFriends.at(-1);\r\n\t\t}else{\r\n\t\t\tthrow new Error(`tool is not my identity, this tool name is ${tool.constructor.name}. but my identity name is ${this.#identity.name}`);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\t/**\r\n\t * @param {String}\r\n\t */\r\n\tset extendsElement(extendsElement){\r\n\t\tthis.#extendsElement = extendsElement;\r\n\t}\r\n\t\r\n\tget extendsElement(){\r\n\t\treturn this.#extendsElement;\r\n\t}\r\n\t\r\n\tset defaultClass(defaultClass){\r\n\t\tthis.#defaultClass = defaultClass;\r\n\t}\r\n\r\n\tget defaultClass(){\r\n\t\treturn this.#defaultClass;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {boolean} isInline \r\n\t */\r\n\tset isInline(isInline){\r\n\t\tthis.#isInline = isInline;\r\n\t}\r\n\t\r\n\t/**\r\n\t * @returns {boolean}\r\n\t */\r\n\tget isInline(){\r\n\t\treturn this.#isInline\r\n\t}\r\n\r\n\tset toolButton(toolButton){\r\n\t\tif( ! toolButton || ! toolButton.nodeType || toolButton.nodeType != Node.ELEMENT_NODE){\r\n\t\t\tthrow new Error('toolButton is not element');\r\n\t\t}\r\n\t\tthis.#toolButton = toolButton;\r\n\r\n\t}\r\n\t\r\n\tget toolButton(){\r\n\t\treturn this.#toolButton;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {FreedomInterface}\r\n\t */\r\n\tset connectedFriends(friend){\r\n\t\tif(friend.constructor != this.#identity){\r\n\t\t\tnew TypeError('is not my friend')\r\n\t\t}\r\n\t\t\r\n\t\tif(friend.isConnected){\r\n\t\t\tthis.#connectedFriends.push(friend);\r\n\t\t}else{\r\n\t\t\tthis.#connectedFriends = this.#connectedFriends.filter(e=>e.isConnected);\r\n\t\t}\r\n\t}\r\n\r\n\tget connectedFriends(){\r\n\t\treturn this.#connectedFriends;\r\n\t}\r\n\r\n}","import Line from '../component/Line'\r\n\r\nexport default class FreedomInterface extends HTMLElement {\r\n\r\n\tstatic globalMouseEvent = undefined;\r\n\tstatic lastClickElementPath = undefined;\r\n\tstatic globalClickEventPromiseResolve;\r\n\tstatic globalClickEventPromise = new Promise(resolve=>{\r\n\t\tthis.globalClickEventPromiseResolve = resolve;\r\n\t});\r\n\tstatic globalKeydownEventPromiseResolve;\r\n\tstatic globalKeydownEventPromise = new Promise(resolve=>{\r\n\t\tthis.globalKeydownEventPromiseResolve = resolve;\r\n\t})\r\n\tstatic globalSelectionChangeEventPromiseResolve;\r\n\tstatic globalSelectionChangeEventPromise = new Promise(resolve=>{\r\n\t\tthis.globalSelectionChangeEventPromiseResolve = resolve;\r\n\t})\r\n\t\r\n\tstatic{\r\n\t\tdocument.addEventListener('mousemove', (event) => {\r\n\t\t\t//mousePos = { x: event.clientX, y: event.clientY };\r\n\t\t\t//mousePosText.textContent = `(${mousePos.x}, ${mousePos.y})`;\r\n\t\t\tthis.globalMouseEvent = event;\r\n\t\t});\r\n\t\tdocument.addEventListener('mousedown', (event) => {\r\n\t\t\tthis.lastClickElementPath = event.composedPath();\r\n\t\t\tthis.globalClickEventPromiseResolve(event)\r\n\t\t\tthis.globalClickEventPromise = new Promise(resolve => {\r\n\t\t\t\tthis.globalClickEventPromiseResolve = resolve;\r\n\t\t\t})\r\n\t\t})\r\n\t\twindow.addEventListener('keydown', (event) => {\r\n\t\t\tthis.globalKeydownEventPromiseResolve(event);\r\n\t\t\tthis.globalKeydownEventPromise = new Promise(resolve=>{\r\n\t\t\t\tthis.globalKeydownEventPromiseResolve = resolve;\r\n\t\t\t})\r\n\t\t})\r\n\t\tdocument.addEventListener('selectionchange', (event) => {\r\n\t\t\tthis.globalSelectionChangeEventPromiseResolve(event);\r\n\t\t\tthis.globalSelectionChangeEventPromise = new Promise(resolve=>{\r\n\t\t\t\tthis.globalSelectionChangeEventPromiseResolve = resolve;\r\n\t\t\t})\r\n\t\t});\r\n\r\n\t}\r\n\tstatic isMouseInnerElement(element){\r\n\t\tif( ! this.globalMouseEvent) return;\r\n\t\tlet {clientX, clientY} = this.globalMouseEvent;\r\n\t\tlet {x, y, width, height} = element.getBoundingClientRect();\r\n\t\tlet isMouseInnerX = ((x + width) >= clientX && x <= clientX);\r\n\t\tlet isMouseInnerY = ((y + height) >= clientY && y <= clientY);\r\n\t\treturn (isMouseInnerX && isMouseInnerY);\r\n\t}\r\n\t/**\r\n\t * \r\n\t * @param {HtmlElement} element \r\n\t * @param {Function} callback \r\n\t */\r\n\tstatic globalKeydownEventListener(element, callback = ({oldEvent, newEvent})=>{}){\r\n\t\t\r\n\t\tlet oldEvent = undefined;\r\n\t\tlet newEvent = undefined;\r\n\t\tconst simpleObserver = () => {\r\n\t\t\tthis.globalKeydownEventPromise.then((event)=>{\r\n\t\t\t\tnewEvent = event;\r\n\t\t\t\tcallback({oldEvent, newEvent});\r\n\t\t\t\toldEvent = event;\r\n\t\t\t\tsimpleObserver();\r\n\t\t\t})\r\n\t\t}\r\n\t\tsimpleObserver();\r\n\t}\r\n\tstatic globalSelectionChangeEventListener(element, callback = ({oldEvent, newEvent})=>{}){\r\n\t\tlet oldEvent = undefined;\r\n\t\tlet newEvent = undefined;\r\n\t\tconst simpleObserver = () => {\r\n\t\t\tthis.globalSelectionChangeEventPromise.then((event)=>{\r\n\t\t\t\tnewEvent = event;\r\n\t\t\t\tcallback({oldEvent, newEvent});\r\n\t\t\t\toldEvent = event;\r\n\t\t\t\tsimpleObserver();\r\n\t\t\t})\r\n\t\t}\r\n\t\tsimpleObserver();\r\n\t}\r\n\t/**\r\n\t * \r\n\t * @param {HTMLElement} element \r\n\t * @param {Function} callback \r\n\t */\r\n\tstatic outClickElementListener(element, callback = ({oldEvent, newEvent, isMouseOut = false})=>{}){\r\n\r\n\t\tif(element == undefined || element?.nodeType != Node.ELEMENT_NODE){\r\n\t\t\tthrow new Error('element is not Element');\r\n\t\t}\r\n\r\n\t\tlet oldEvent = undefined;\r\n\t\tlet newEvent = undefined;\r\n\t\tconst simpleObserver = () => {\r\n\t\t\tthis.globalClickEventPromise.then((event)=>{\r\n\t\t\t\tlet isMouseOut = ! this.isMouseInnerElement(element);\r\n\t\t\t\tnewEvent = event;\r\n\t\t\t\tcallback({oldEvent, newEvent, isMouseOut});\r\n\t\t\t\toldEvent = event;\r\n\t\t\t\tsimpleObserver();\r\n\t\t\t})\r\n\t\t}\r\n\t\tsimpleObserver();\r\n\t}\r\n\tstatic isElement(targetObject, checkClazz){\r\n        let check = Object.getPrototypeOf(targetObject)\r\n        let isElement = false;\r\n        while(check != undefined){\r\n\r\n            if(check?.constructor  == checkClazz){\r\n                isElement = true;\r\n                break;\r\n            }else{\r\n                check = Object.getPrototypeOf(check);\r\n            }\r\n        }\r\n        return isElement;\r\n    }\r\n\r\n\tstatic processingElementPosition(element, target){\r\n\t\tlet rect;\r\n\t\tif(FreedomInterface.isElement(target, HTMLElement)){\r\n\t\t\trect = target.getBoundingClientRect();\r\n\t\t}else{\r\n\t\t\trect = target;\r\n\t\t}\r\n\r\n\t\tlet {x, y, height, width} = rect;\r\n\t\t\r\n\t\tlet elementTop = (y - element.clientHeight)\r\n\t\tlet elementLeft = (x - element.clientWidth)\r\n\t\tif(elementTop > 0){\r\n\t\t\telement.style.top = elementTop + 'px';\r\n\t\t}else{\r\n\t\t\telement.style.top = y + height + 'px';\r\n\t\t}\r\n\r\n\t\tif(elementLeft > 0){\r\n\t\t\telement.style.left = elementLeft + 'px'\r\n\t\t}else{\r\n\t\t\telement.style.left = x + width + 'px';\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\tstatic DeleteOption = class DeleteOption{\r\n\t\tstatic #DeleteOptionEnum = class DeleteOptionEnum{\r\n\t\t\tvalue;\r\n\t\t\tconstructor(value){\r\n\t\t\t\tthis.value = value;\r\n\t\t\t\tObject.freeze(this);\r\n\t\t\t}\r\n\t\t}\r\n\t\tstatic EMPTY_CONTENT_IS_DELETE = new this.#DeleteOptionEnum('empty_content_is_delete');\r\n\t\tstatic EMPTY_CONTENT_IS_NOT_DELETE = new this.#DeleteOptionEnum('empty_content_is_not_delete');\r\n\t\tvalue;\r\n\t\tstatic{\r\n\t\t\tObject.freeze(this);\r\n\t\t}\r\n\t\tconstructor(value){\r\n\t\t\tthis.value = value;\r\n\t\t\tObject.freeze(this);\r\n\t\t}\r\n\t}\r\n\r\n\t#isLoaded = false;\r\n\tTool;\r\n\t#connectedAfterCallback = () => {}\r\n\t#connectedAfterOnlyOneCallback = ()=> {}\r\n\t#disconnectedAfterCallback = ()=> {}\r\n\t#connectedChildAfterCallback = () => {}\r\n\t#disconnectedChildAfterCallback = () => {}\r\n\t#deleteOption;\r\n\tparentEditor;\r\n\t#childListObserver = new MutationObserver( (mutationList, observer) => {\r\n\t\tmutationList.forEach((mutation) => {\r\n\t\t\tlet {addedNodes, removedNodes} = mutation;\r\n\t\t\tlet connectedChildPromise = new Promise(resolve => {\r\n\t\t\t\tif(addedNodes.length != 0){\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet resultList;\r\n\t\t\t\t\tif( ! this.constructor.toolHandler.isInline){\r\n\t\t\t\t\t\tlet lastItemIndex;\r\n\t\t\t\t\t\tresultList = [...addedNodes].map((e,i)=>{\r\n\t\t\t\t\t\t\tif( ! e.classList?.contains(Line.toolHandler.defaultClass)){\r\n\t\t\t\t\t\t\t\tlet lineElement = this.parentEditor.createLine();\r\n\t\t\t\t\t\t\t\tlineElement.replaceChildren(e);\r\n\t\t\t\t\t\t\t\tthis.append(lineElement);\r\n\t\t\t\t\t\t\t\tif( i == addedNodes.length - 1){\r\n\t\t\t\t\t\t\t\t\tlastItemIndex = i;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn lineElement;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn e;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t//if(lastItemIndex){\r\n\t\t\t\t\t\t//\tresultList[lastItemIndex].line.lookAtMe();\r\n\t\t\t\t\t\t//}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tresultList = addedNodes;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.connectedChildAfterCallback(resultList);\r\n\t\t\t\t\t//this.connectedChildAfterCallback(addedNodes);\r\n\t\t\t\t}\r\n\t\t\t\tresolve();\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\tlet disconnectedChildPromise = new Promise(resolve => {\r\n\t\t\t\tif(removedNodes.length != 0){\r\n\t\t\t\t\tthis.disconnectedChildAfterCallback(removedNodes);\r\n\t\t\t\t}\r\n\t\t\t\tresolve();\r\n\t\t\t})\r\n\t\t\t\r\n\t\t})\r\n\t});\r\n\tconstructor(Tool, dataset, {deleteOption = FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_DELETE} = {}){\r\n\t\tsuper();\r\n\t\tthis.#childListObserver.disconnect();\r\n\t\tthis.#childListObserver.observe(this, {childList:true})\r\n\t\tthis.#deleteOption = deleteOption;\r\n\t\tthis.Tool = Tool;\r\n\t\tthis.classList.add(this.constructor.toolHandler.defaultClass)\r\n\r\n\t\tdocument.addEventListener('selectionchange', this.removeFun, true);\r\n\r\n\t\tif(dataset){\r\n\t\t\tObject.assign(this.dataset, dataset);\r\n\t\t}\r\n\t\t\r\n\t\tFreedomInterface.globalSelectionChangeEventListener(this, ({oldEvent, newEvent}) => {\r\n\t\t\tif(this.#deleteOption != FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE && this.isToolEmpty()){\r\n\t\t\t\tlet thisLine = this.parentEditor?.getLine(this);\r\n\t\t\t\tthis.remove();\r\n\t\t\t\tif(thisLine){\r\n\t\t\t\t\tthisLine.line.lookAtMe();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t}\r\n\tconnectedCallback(){\r\n\r\n\t\tif( ! this.#isLoaded){\r\n\t\t\t\r\n\t\t\tthis.#isLoaded = true;\r\n\t\t\tthis.constructor.toolHandler.connectedFriends = this;\r\n\t\t\tthis.parentEditor = this.closest('.free-will-editor');\r\n\t\t\tthis.parentLine = this.parentEditor?.getLine(this);\r\n\r\n\t\t\tif(this.childNodes.length == 0 && this.#deleteOption == FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE && (this.innerText.length == 0 || (this.innerText.length == 1 && this.innerText.charAt(0) == '\\n'))){\r\n\t\t\t\tlet sty = window.getComputedStyle(this);\r\n\t\t\t\tif(sty.visibility != 'hidden' || sty.opacity != 0){\r\n\t\t\t\t\tthis.innerText = '\\n';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(this.#deleteOption == FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_DELETE && (this.isToolEmpty() || this.childNodes.length == 0)){\r\n\t\t\t\tlet thisLine = this.parentEditor.getLine(this);\r\n\t\t\t\tthis.remove();\r\n\t\t\t\tif(thisLine){\r\n\t\t\t\t\tthisLine.line.lookAtMe();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\tif(this.shadowRoot){\r\n\t\t\t\t//this.parentLine.prepend(document.createTextNode('\\u00A0'));\r\n\t\t\t\t//this.parentLine.prepend(document.createElement('br'));\r\n\t\t\t\t//this.before(document.createElement('br'));\r\n\t\t\t\t//this.parentLine.before(this.parentEditor.createLine());\r\n\t\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\t\tif( ! nextLine){\r\n\t\t\t\t\tthis.parentEditor.createLine().innerText = '\\n';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tnextLine.line.lookAtMe();\r\n\t\t\t\t}\r\n\t\t\t\t/*this.childNodes.forEach(e=>{\r\n\t\t\t\t\tif(e.nodeType == Node.TEXT_NODE){\r\n\t\t\t\t\t\te.remove()\r\n\t\t\t\t\t}\r\n\t\t\t\t})*/\r\n\t\t\t}\r\n\r\n\t\t\tthis.connectedAfterOnlyOneCallback();\r\n\r\n\t\t\t\r\n\t\t\t/*\r\n\t\t\tif(this.shadowRoot && (this.querySelectorAll('[slot]').length == 0 || this.childNodes.length == 0 || (this.childNodes.length == 1 && this.childNodes[0]?.tagName == 'BR'))){\r\n\t\t\t\t//this.parentLine.prepend(document.createElement('br'));\r\n\t\t\t\t\r\n\t\t\t\tlet slot = Object.assign(document.createElement('slot'),{\r\n\t\t\t\t\tname: 'empty-slot'\r\n\t\t\t\t});\r\n\t\t\t\tlet emptySpan = Object.assign(document.createElement('span'), {\r\n\t\t\t\t\tslot : 'empty-slot'\r\n\t\t\t\t});\r\n\t\t\t\t//emptySpan.style.opacity='0';\r\n\t\t\t\t//emptySpan.append(document.createTextNode('\\u200B'));\r\n\t\t\t\temptySpan.innerText = '\\n'\r\n\t\t\t\tthis.prepend(emptySpan);\r\n\t\t\t\tthis.shadowRoot.append(slot);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t*/\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.connectedAfterCallback();\r\n\t}\r\n\tdisconnectedCallback(){\r\n        this.#isLoaded = false;\r\n\t\ttry{\r\n\t\t\tthis.disconnectedAfterCallback();\r\n\t\t}catch(err){\r\n\t\t\tconsole.error(err)\r\n\t\t}finally{\r\n\t\t\tthis.constructor.toolHandler.connectedFriends = this;\r\n\t\t\tthis.#childListObserver.disconnect(this, {childList:true})\r\n\t\t\tdocument.removeEventListener('selectionchange', this.removeFun, true);\r\n\t\t}\r\n\t}\r\n\r\n\tisToolEmpty(){\r\n\t\tlet sty = window.getComputedStyle(this);\r\n\t\tif(sty.visibility == 'hidden' || sty.opacity == 0){\r\n\t\t\treturn false;\r\n\t\t}\r\n        return this.innerText.length == 0 || (this.innerText.length == 1 && (this.innerText == '\\n' || this.innerText == '\\u200B'));\r\n    }\r\n\r\n\tisCursor(){\r\n\t\tlet selection = window.getSelection();\r\n\t\tif(! document.activeElement.classList.contains('free-will-editor')){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif(selection.type == 'None'){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn selection.containsNode(this, true) || selection.containsNode(this, false)\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Function}\r\n\t */\r\n\tset connectedAfterCallback(connectedAfterCallback){\r\n\t\tthis.#connectedAfterCallback = connectedAfterCallback;\r\n\t}\r\n\r\n\t/**\r\n\t * @returns {Function}\r\n\t */\r\n\tget connectedAfterCallback(){\r\n\t\treturn this.#connectedAfterCallback;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Function}\r\n\t */\r\n\tset connectedAfterOnlyOneCallback(connectedAfterOnlyOneCallback){\r\n\t\tthis.#connectedAfterOnlyOneCallback = connectedAfterOnlyOneCallback;\r\n\t}\r\n\t\r\n\t/**\r\n\t * @returns {Function}\r\n\t */\r\n\tget connectedAfterOnlyOneCallback(){\r\n\t\treturn this.#connectedAfterOnlyOneCallback;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Function}\r\n\t */\r\n\tset disconnectedAfterCallback(disconnectedAfterCallback){\r\n\t\tthis.#disconnectedAfterCallback = disconnectedAfterCallback;\r\n\t}\r\n\r\n\t/**\r\n\t * @returns {Function}\r\n\t */\r\n\tget disconnectedAfterCallback(){\r\n\t\treturn this.#disconnectedAfterCallback;\r\n\t}\r\n \r\n\t/**\r\n\t * @param {Function}\r\n\t */\r\n\tset connectedChildAfterCallback(connectedChildAfterCallback){\r\n\t\tthis.#connectedChildAfterCallback = connectedChildAfterCallback;\r\n\t}\r\n\r\n\t/**\r\n\t * @returns {Function}\r\n\t */\r\n\tget connectedChildAfterCallback(){\r\n\t\treturn this.#connectedChildAfterCallback;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Function}\r\n\t */\r\n\tset disconnectedChildAfterCallback(disconnectedChildAfterCallback){\r\n\t\tthis.#disconnectedChildAfterCallback = disconnectedChildAfterCallback;\r\n\t}\r\n\r\n\t/**\r\n\t * @returns {Function}\r\n\t */\r\n\tget disconnectedChildAfterCallback(){\r\n\t\treturn this.#disconnectedChildAfterCallback;\r\n\t}\r\n}","import ToolHandler from \"../module/ToolHandler\"\r\nimport FreedomInterface from \"../module/FreedomInterface\"\r\nexport default class Line {\r\n\t#isLoaded = false;\r\n\t#prevParent;\r\n\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-line'\r\n\t});\r\n\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-line';\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = ``\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t * @param {HTMLElement} element \r\n\t * @returns {HTMLElement} \r\n\t */\r\n\tstatic getLine(element){\r\n\t\tlet line = undefined;\r\n\t\tif( ! element.parentElement){\r\n\t\t\treturn line;\r\n\t\t}else if(element.classList?.contains(Line.toolHandler.defaultClass)){\r\n\t\t\treturn element;\r\n\t\t}else if(element.parentElement.classList.contains(Line.toolHandler.defaultClass)){\r\n\t\t\tline = element.parentElement;\r\n\t\t}else{\r\n\t\t\tline = element.parentElement.closest(`.${Line.toolHandler.defaultClass}`);\r\n\t\t}\r\n\t\treturn line;\r\n\t}\r\n\t\t/**\r\n\t * \r\n\t * @param {HTMLElement} element \r\n\t * @returns {HTMLElement} \r\n\t */\r\n\t\tstatic getRootLine(element){\r\n\t\t\tlet line = undefined;\r\n\t\t\tif( ! element.parentElement){\r\n\t\t\t\treturn line;\r\n\t\t\t}else if(element.classList?.contains(Line.toolHandler.defaultClass)){\r\n\t\t\t\treturn element;\r\n\t\t\t}else if(element.parentElement.classList.contains(Line.toolHandler.defaultClass)){\r\n\t\t\t\tline = element.parentElement;\r\n\t\t\t}else{\r\n\t\t\t\tline = element.parentElement.closest(`.${Line.toolHandler.defaultClass}`);\r\n\t\t\t}\r\n\t\t\tlet parent = line?.closest(`.${Line.toolHandler.defaultClass}`);\r\n\t\t\tif( ! parent){\r\n\t\t\t\treturn line;\r\n\t\t\t}else{\r\n\t\t\t\treturn Line.getRootLine(line);\r\n\t\t\t}\r\n\t\t}\r\n\tstatic getTool(element, TargetTool){\r\n\t\tlet tool = undefined;\r\n\t\t\r\n\t\tif( ! element.parentElement){\r\n\t\t\treturn tool;\r\n\t\t}else if(element.classList?.contains(TargetTool.toolHandler.defaultClass)){\r\n\t\t\treturn element\r\n\t\t}else if(element.parentElement.classList.contains(TargetTool.toolHandler.defaultClass)){\r\n\t\t\ttool = element.parentElement;\r\n\t\t}else{\r\n\t\t\ttool = element.parentElement.closest(`.${TargetTool.toolHandler.defaultClass}`);\r\n\t\t}\r\n\r\n\t\tif(! tool){\r\n\t\t\ttool = element.parentElement.querySelector(`.${TargetTool.toolHandler.defaultClass}`);\r\n\t\t}\r\n\t\treturn tool;\r\n\t}\r\n\t\r\n\tstatic isElementTextEmpty(element){\r\n        let sty = window.getComputedStyle(element);\r\n\t\tif(sty.visibility == 'hidden' || sty.opacity == 0){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t//let emptyString = (element.innerText.replace(/\\n+/g, '\\n') == '\\n' || element.innerText.replace(/\\u200B+/g, '\\u200B') == '\\u200B');\r\n        return element.innerText.length == 0 || (element.innerText.length == 1 && (element.innerText == '\\n' || element.innerText == '\\u200B'));\r\n    }\r\n\r\n\tlineElement\r\n\r\n\tconstructor(div){\r\n\t\t//super();\r\n\t\tif( ! div){\r\n\t\t\tthis.lineElement = Object.assign(document.createElement('div'),{\r\n\t\t\t\tclassName : Line.toolHandler.defaultClass\r\n\t\t\t})\r\n\t\t}else{\r\n\t\t\tthis.lineElement = div;\r\n\t\t\tthis.lineElement.classList.add(Line.toolHandler.defaultClass);\r\n\t\t}\r\n\t\tthis.lineElement.dataset.is_line = '';\r\n\t\t/*\r\n\t\tObject.getOwnPropertyNames(Object.getPrototypeOf(this)).forEach(functionName=>{\r\n\t\t\tif(functionName == 'constructor') return;\r\n\t\t\tthis.lineElement[functionName] = this[functionName];\r\n\t\t});\r\n\t\t*/\r\n\t\tthis.lineElement.line = this;\r\n\t\t/*\r\n\t\tthis.onkeyup = (event) => {\r\n\t\t\tif(event.key === 'Backspace' && this.innerText.length == 1 && (this.innerText.includes)){\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\t*/\r\n\t\t/*\r\n\t\tlet observer = new MutationObserver( (mutationList, observer) => {\r\n\t\t\tmutationList.forEach((mutation) => {\r\n\t\t\t\tif(Line.isElementTextEmpty(this.lineElement)){\r\n\t\t\t\t\tif(this.lineElement.childElementCount != 0){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//this.lineElement.innerText = '\\n';\r\n\t\t\t\t\twindow.getSelection().setPosition(this.lineElement, 0)\r\n\t\t\t\t\tthis.lineElement.focus();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t});\r\n\t\tobserver.observe(this.lineElement, {\r\n\t\t\tchildList:true,\r\n\t\t\tsubtree: true\r\n\t\t})\r\n\t\t*/\r\n\t}\r\n\t/*\r\n\tconnectedCallback(){\r\n\t\tif( ! this.#isLoaded){\r\n            this.#isLoaded = true;\r\n\r\n\t\t\t\r\n\t\t\tif(this.innerText.length == 0 || (this.innerText.length == 1 && this.innerText.charAt(0) == '\\n')){\r\n\t\t\t\tthis.innerText = '\\n';\r\n\t\t\t\twindow.getSelection().setPosition(this, 1)\r\n\t\t\t\tthis.focus();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\tdisconnectedCallback(){\r\n        this.#isLoaded = false;\r\n    }\r\n\t*/\r\n\t/**\r\n\t * applyTool, cancelTool에서 3가지 경우의 수로 함수를 분기시킬 것 apply mng와 cancel mng class를 새로 만들것, \r\n\t * line이 할 일이 아니니 freedomPlusEditor로 옮길 것\r\n\t * --applyTool\r\n\t * 1. 범위 전체\r\n\t * 2. 범위이되 line이 같을 때 (textNode별로 처리 필요)\r\n\t * 3. start와 end가 다를 때(멀티라인)\r\n\t * --cancelTool\r\n\t * 1. 범위\r\n\t * 2. 범위 중 일부\r\n\t * 3. 멀티라인\r\n\t */\r\n\r\n\t/**\r\n\t * tool이 좌우 옆 또는 자식, 부모에서 동일한 tool임을 감지할 때 합치는 로직 필요\r\n\t */\r\n\t/**\r\n\t * \r\n\t * @param {*} tool \r\n\t * @param {*} range \r\n\t * @returns \r\n\t */\r\n\tasync #applyOnlyOneTool(tool, range){\r\n\t\treturn new Promise(resolve=>{\r\n\t\t\trange.surroundContents(tool);\r\n\t\t\tresolve(tool)\r\n\t\t});\r\n\t}\r\n\t\r\n\tasync #applyOnlyOneLine(range, tool, TargetTool){\r\n\t\treturn new Promise(resolve=>{\r\n\t\t\tlet {startOffset, endOffset, startContainer,endContainer} = range;\r\n\r\n\t\t\tlet selection = window.getSelection();\r\n\r\n\t\t\tlet startNodeToPrevNodeIndex = [...this.lineElement.childNodes].findIndex(e=>selection.containsNode(e, true)) - 1;\r\n\t\t\tlet isFirstNodeToStart = startNodeToPrevNodeIndex < 0;\r\n\r\n\t\t\t\r\n\t\t\tlet nodeList = [];\r\n\t\t\tfor(let i = startNodeToPrevNodeIndex + 1 ; true ; i += 1){\r\n\t\t\t\tif( ! this.lineElement.childNodes[i] || ! selection.containsNode(this.lineElement.childNodes[i], true)){\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tlet iter = document.createNodeIterator(this.lineElement.childNodes[i], NodeFilter.SHOW_TEXT)\r\n\t\t\t\tlet targetNode;\r\n\t\t\t\twhile(targetNode = iter.nextNode()){\r\n\t\t\t\t\tif(targetNode == endContainer){\r\n\t\t\t\t\t\t// this.lineElement.childNodes[i] == endContainer == targetNode\r\n\t\t\t\t\t\tlet clone = targetNode.cloneNode(true);\r\n\t\t\t\t\t\tclone.textContent = targetNode.textContent.substring(endOffset);\r\n\t\t\t\t\t\ttargetNode.after(clone);\r\n\t\t\t\t\t\ttargetNode.textContent = targetNode.textContent.substring(0, endOffset);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tnodeList.push(this.lineElement.childNodes[i]);\r\n\t\t\t}\r\n\t\t\t//nodeList.forEach(e=>e.remove())\r\n\t\t\t//prepend\r\n\t\t\ttool.append(...nodeList);\r\n\t\t\tif(isFirstNodeToStart){\r\n\t\t\t\tthis.lineElement.prepend(tool)\r\n\t\t\t}else{\r\n\t\t\t\tlet startTarget = this.lineElement.childNodes[startNodeToPrevNodeIndex];\r\n\t\t\t\tstartTarget.after(tool);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t/*\r\n\t\t\trange.setStart(startContainer, startOffset);\r\n\t\t\trange.setEnd(startContainer, startContainer.textContent.length);\r\n\t\t\trange.surroundContents(tool);\r\n\t\t\t\r\n\t\t\tlet targetNode = startContainer.nextSibling;\r\n\t\t\t//let lastPrevTool = undefined;\r\n\t\t\twhile(targetNode){\r\n\t\t\t\tconsole.log(targetNode)\r\n\t\t\t\tif(targetNode == endContainer){\r\n\t\t\t\t\tconsole.log(2)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif(targetNode.textContent == '' || TargetTool.prototype.isPrototypeOf(targetNode)){\r\n\t\t\t\t\tconsole.log(3)\r\n\t\t\t\t\ttargetNode = targetNode.nextSibling\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.log(targetNode);\r\n\t\t\t\trange.selectNode(targetNode);\r\n\t\t\t\trange.surroundContents(new TargetTool());\r\n\t\t\t\tconsole.log(4)\r\n\t\t\t\ttargetNode = targetNode.nextSibling\r\n\t\t\t}\r\n\r\n\t\t\tlet endTool = new TargetTool();\r\n\t\t\trange.setStart(endContainer, 0);\r\n\t\t\trange.setEnd(endContainer, endOffset);\r\n\t\t\trange.surroundContents(endTool);\r\n\t\t\tresolve(endTool);\r\n\t\t\t*/\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\tasync #applyMultipleLineAllBlock(range, tool ,TargetTool, endLine){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tlet fragment = range.extractContents();\r\n\t\t\ttool.append(...fragment.childNodes);\r\n\t\t\tthis.lineElement.append(tool);\r\n\t\t\tresolve(tool);\r\n\t\t})\r\n\t}\r\n\tasync #applyMultipleLineAll(range, tool, TargetTool, endLine){\r\n\t\treturn new Promise(resolve=>{\r\n\t\t\tlet {startOffset, endOffset, startContainer,endContainer} = range;\r\n\t\t\t\r\n\t\t\trange.setStart(startContainer, startOffset);\r\n\t\t\trange.setEnd(startContainer, startContainer.textContent.length);\r\n\t\t\trange.surroundContents(tool);\r\n\r\n\t\t\tlet targetStartLineItem = startContainer.nextSibling?.nextSibling;\r\n\t\t\t\r\n\t\t\tif(targetStartLineItem){\r\n\t\t\t\tlet itemRemoveList = [];\r\n\t\t\t\tlet itemAppendList = [];\r\n\t\t\t\twhile(targetStartLineItem){\r\n\t\t\t\t\t//console.log('targetStartLineItem',targetStartLineItem)\r\n\t\t\t\t\tif(targetStartLineItem.nodeType == Node.ELEMENT_NODE){\r\n\t\t\t\t\t\tif(tool == targetStartLineItem){\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttool.append(targetStartLineItem);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\titemAppendList.push(targetStartLineItem.textContent);\r\n\t\t\t\t\t\titemRemoveList.push(targetStartLineItem);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttargetStartLineItem = targetStartLineItem.nextSibling;\t\r\n\r\n\t\t\t\t}\r\n\t\t\t\t[...tool.childNodes].find(e=>e.nodeType == Node.TEXT_NODE)?.appendData(itemAppendList.join(''));\r\n\t\t\t\titemRemoveList.forEach(e=>e.remove())\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(tool.parentElement != this.lineElement && tool.parentElement?.nextSibling){\r\n\t\t\t\t//20230817 멀티라인일시 첫번쨰 라인 중첩 서식 미동작 현상 수정을 위해 내용 변경\r\n\t\t\t\tlet nextTool = new TargetTool();\r\n\t\t\t\tnextTool.append(tool.parentElement.nextSibling);\r\n\t\t\t\ttool.parentElement.after(nextTool);\r\n\t\t\t\tlet nextItem = nextTool.nextSibling;\r\n\t\t\t\t\r\n\t\t\t\tif(nextItem && nextTool != nextItem){\r\n\t\t\t\t\tnextTool.append(nextItem);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tlet targetLine = Line.getLine(startContainer).nextElementSibling; \r\n\t\t\tlet middleTargetTool;\r\n\t\t\t\r\n\t\t\twhile(targetLine){\r\n\t\t\t\t//console.log('targetLine', targetLine)\r\n\t\t\t\tif(targetLine === endLine){\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\t// 아래 주석 지우지 말 것, 중첩 자식 요소에서 미동작 또는 오류 발생시 아래 로직 주석 풀고 테스트 해볼 것\r\n\t\t\t\t// let middleTool = new TargetTool();\r\n\t\t\t\t// middleTool.append(...targetLine.childNodes);\r\n\t\t\t\t// targetLine.append(middleTool);\r\n\t\t\t\tmiddleTargetTool = new TargetTool()\r\n\t\t\t\trange.selectNodeContents(targetLine);\r\n\t\t\t\trange.surroundContents(middleTargetTool);\r\n\t\t\t\ttargetLine = targetLine.nextElementSibling;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(Line.prototype.isPrototypeOf(endContainer.line)){\r\n\t\t\t\tresolve(( ! middleTargetTool ? tool : middleTargetTool ));\r\n\t\t\t}else{\r\n\t\t\t\tlet endTool = new TargetTool();\r\n\t\t\t\trange.setStart(endContainer, 0);\r\n\t\t\t\trange.setEnd(endContainer, endOffset);\r\n\t\t\t\trange.surroundContents(endTool);\r\n\t\t\t\t// 분할 적용 되지 않도록 합친다 ex(<b>1</b><b>2</b> => <b>12</b>) \r\n\t\t\t\tlet targetEndLineItem = endContainer.previousSibling;\r\n\t\t\t\tif(targetEndLineItem){\r\n\t\t\t\t\tlet itemRemoveList = [];\r\n\t\t\t\t\tlet itemAppendList = [];\r\n\r\n\t\t\t\t\twhile(targetEndLineItem){\r\n\t\t\t\t\t\t//console.log('targetEndLineItem', targetEndLineItem)\r\n\t\t\t\t\t\tif(targetEndLineItem.nodeType == Node.ELEMENT_NODE){\r\n\t\t\t\t\t\t\tendTool.prepend(targetEndLineItem);\r\n\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\tlet firstTextNode = [...targetEndLineItem.childNodes].find(e=>e.nodeType == Node.TEXT_NODE);\r\n\t\t\t\t\t\t\tlet moveTextList = [...endTool.childNodes].filter(e=>e.nodeType == Node.TEXT_NODE)\r\n\t\t\t\t\t\t\tmoveTextList.forEach(e=>{\r\n\t\t\t\t\t\t\t\te.textContent = firstTextNode.textContent + e.data\r\n\t\t\t\t\t\t\t\tfirstTextNode.remove();\r\n\t\t\t\t\t\t\t\tfirstTextNode = e;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\ttargetEndLineItem.append(firstTextNode);\r\n\t\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t//endTool.prepend(document.createTextNode(targetEndLineItem.textContent));\r\n\t\t\t\t\t\t\titemRemoveList.push(targetEndLineItem);\r\n\t\t\t\t\t\t\titemAppendList.unshift(targetEndLineItem.textContent)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttargetEndLineItem = targetEndLineItem.previousSibling;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//let targetTextNode = [...endTool.childNodes].find(e=>e.nodeType == Node.TEXT_NODE)\r\n\t\t\t\t\t//itemAppendList.push(targetTextNode.data);\r\n\t\t\t\t\t//targetTextNode.textContent = itemAppendList.join('');\r\n\t\t\t\t\t//endTool.append(targetTextNode)\r\n\t\t\t\t\t[...endTool.childNodes].find(e=>e.nodeType == Node.TEXT_NODE)?.appendData(itemAppendList.join(''));\r\n\t\t\t\t\t//endTool.prepend(document.createTextNode(itemAppendList.join('')))\r\n\t\t\t\t\t//itemRemoveList.forEach(e=>e.remove())\r\n\t\t\t\t}\r\n\t\t\t\tresolve(endTool);\r\n\t\t\t}\r\n\r\n\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t * @param {*} TargetTool \r\n\t * @param {*} range \r\n\t * @returns \r\n\t */\r\n\tasync applyTool(TargetTool, range, endLine){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tlet tool = new TargetTool();\r\n\t\t\tlet {startOffset, endOffset, startContainer,endContainer} = range;\r\n\r\n\t\t\t/*\r\n\t\t\tif(startContainer === endContainer){\r\n\t\t\t\tconsole.log('applyOnlyOneTool');\r\n\t\t\t\tthis.#applyOnlyOneTool(tool, range).then(tool=>{\r\n\t\t\t\t\tresolve(tool)\r\n\t\t\t\t})\r\n\t\t\t}*/\r\n\t\t\tif(this.lineElement.childNodes.length == 1 && this.lineElement.innerText == '\\n' && this.lineElement.childNodes[0].nodeName == 'BR'){\r\n\t\t\t\tthis.lineElement.childNodes[0].remove();\r\n\t\t\t}\r\n\t\t\tif(tool.shadowRoot || ! TargetTool.toolHandler.isInline){\r\n\t\t\t\tresolve(this.#applyMultipleLineAllBlock(range, tool, TargetTool, endLine));\r\n\t\t\t}else if(startContainer === endContainer && this.lineElement.innerText.length != range.toString().length){\r\n\t\t\t\tconsole.log('applyOnlyOneTool');\r\n\t\t\t\tthis.#applyOnlyOneTool(tool, range).then(tool=>{\r\n\t\t\t\t\tresolve(tool)\r\n\t\t\t\t})\r\n\t\t\t}else if(Line.getLine(startContainer) === Line.getLine(endContainer)){\r\n\t\t\t\tconsole.log('applyOnlyOneLine')\r\n\t\t\t\tthis.#applyOnlyOneLine(range, tool, TargetTool).then(endTool => {\r\n\t\t\t\t\tresolve(endTool)\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\tconsole.log('applyMultipleLineAll')\r\n\t\t\t\tthis.#applyMultipleLineAll(range, tool, TargetTool, endLine).then(endTool => {\r\n\t\t\t\t\tresolve(endTool)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tasync #cancelOnlyOneLine(range, tool, TargetTool){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\t// this로 childern 돌려서 TargetTool 타입 체크랑 nodeType로 바깥으로 빼는 로직 만들기\r\n\t\t\tlet {startOffset, endOffset, startContainer, endContainer} = range;\r\n\t\t\tthis.lineElement.childNodes.forEach(e=>{\r\n\t\t\t\tthis.#findCancels(e, TargetTool);\r\n\t\t\t});\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\tasync #cancelOnlyOneTool(range, tool, TargetTool){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tlet {startOffset, endOffset, startContainer, endContainer, commonAncestorContainer} = range;\r\n\t\t\t/*\r\n\t\t\tlet textNode = document.createTextNode(startContainer.textContent.substring(startOffset, endOffset));\r\n\t\t\tlet startNextSibling = (tool?.nextSibling  || endContainer.nextSibling);\r\n\t\t\tlet startPrevSibling = (tool?.previousSibling || startContainer.previousSibling);\r\n\t\t\t*/\r\n\t\t\tlet offset = endOffset - startOffset;\r\n\r\n\t\t\tlet leftText = undefined;\r\n\t\t\tlet rightText = undefined;\r\n\t\t\tlet leftList = [];\r\n\t\t\tlet rightList = [];\r\n\t\t\tlet targetWrap = undefined;\r\n\t\t\tlet targetText;\r\n\t\t\tif(commonAncestorContainer.nodeType == Node.TEXT_NODE && commonAncestorContainer.parentElement != this && ! TargetTool.prototype.isPrototypeOf(commonAncestorContainer.parentElement)){\r\n\t\t\t\tlet cloneRange = range.cloneRange();\r\n\t\t\t\tcloneRange.selectNode(commonAncestorContainer.parentElement);\r\n\t\t\t\ttargetText = cloneRange.cloneContents();\r\n\t\t\t}else{\r\n\t\t\t\ttargetText = range.cloneContents();\r\n\t\t\t}\r\n\r\n\t\t\tlet selection = window.getSelection()\r\n\r\n\t\t\t//if(tool.childNodes.length > 1){\r\n\t\t\tlet list = [...tool.childNodes];\r\n\t\t\tif( ! TargetTool.toolHandler.isInline){\r\n\t\t\t\ttry{\r\n\t\t\t\t\tthis.lineElement.append(...list);\r\n\t\t\t\t}catch(Ignore){\r\n\t\t\t\t\tLine.getLine(tool).append(...list);\r\n\t\t\t\t}\r\n\t\t\t\ttool.remove();\r\n\t\t\t\tresolve();\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tlet index = list.findIndex(e=> selection.containsNode(e, true) || selection.containsNode(e, false))\r\n\t\t\ttargetWrap = list[index]\r\n\t\t\tleftList = list.slice(0, index);\r\n\t\t\trightList = list.slice(index + 1);\r\n\t\t\t//}\r\n\t\t\t\r\n\r\n\t\t\tif(startContainer.textContent.length != offset){\r\n\t\t\t\tleftText = startContainer.textContent.substring(0, startOffset);\t\t\t\r\n\t\t\t\trightText = offset <= 1 ? startContainer.textContent.substring(startOffset + 1) : startContainer.textContent.substring(startOffset + offset);\r\n\t\t\t\tif(targetWrap != undefined){\r\n\t\t\t\t\tlet cloneLeft = targetWrap.cloneNode(false);\r\n\t\t\t\t\tcloneLeft.textContent = leftText;\r\n\t\t\t\t\tleftText = cloneLeft; \r\n\t\t\t\t\tlet cloneRight = targetWrap.cloneNode(false);\r\n\t\t\t\t\tcloneRight.textContent = rightText;\r\n\t\t\t\t\trightText = cloneRight; \r\n\t\t\t\t\ttargetWrap.remove();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tleftText = document.createTextNode(leftText);\r\n\t\t\t\t\trightText = document.createTextNode(rightText);\r\n\t\t\t\t}\r\n\t\t\t\tleftList.unshift(leftText);\r\n\t\t\t\trightList.push(rightText);\r\n\t\t\t}\r\n\t\t\t//tool.replaceChildren(...leftList, targetText, ...rightList)\r\n\r\n\t\t\tlet leftElement = undefined;\r\n\t\t\tif(leftList.length != 0){\r\n\t\t\t\tleftElement = new TargetTool();\r\n\t\t\t\tleftElement.append(...leftList);\r\n\t\t\t}\r\n\t\t\tlet rightElement = undefined;\r\n\t\t\tif(rightList.length != 0){\r\n\t\t\t\trightElement = new TargetTool();\r\n\t\t\t\trightElement.append(...rightList);\r\n\t\t\t}\r\n\r\n\t\t\tlet appendList = [leftElement, targetText, rightElement].filter(e=>e);\r\n\t\t\tif(tool.previousSibling){\r\n\t\t\t\ttool.previousSibling.after(...appendList)\r\n\t\t\t}else if(tool.nextSibling){\r\n\t\t\t\ttool.nextSibling.before(...appendList);\r\n\t\t\t}else{\r\n\t\t\t\tthis.lineElement.append(...appendList);\r\n\t\t\t}\r\n\t\t\t/*\r\n\t\t\tif(startPrevSibling && startPrevSibling.nodeType == Node.TEXT_NODE){\r\n\t\t\t\tconsole.log(1)\r\n\t\t\t\tif(rightText){\r\n\t\t\t\t\tlet rightTool = new TargetTool();\r\n\t\t\t\t\trightTool.textContent = rightText;\r\n\t\t\t\t\tstartPrevSibling.after(rightTool);\r\n\t\t\t\t}\r\n\t\t\t\tstartPrevSibling.after(textNode);\r\n\t\t\t\tif(leftText){\r\n\t\t\t\t\tlet leftTool = new TargetTool()\r\n\t\t\t\t\tleftTool.textContent = leftText \r\n\t\t\t\t\tstartPrevSibling.after(leftTool);\r\n\t\t\t\t}\r\n\t\t\t}else if(startNextSibling && startNextSibling.nodeType == Node.TEXT_NODE){\r\n\t\t\t\tconsole.log(2)\r\n\t\t\t\tif(leftText){\r\n\t\t\t\t\tlet leftTool = new TargetTool()\r\n\t\t\t\t\tleftTool.textContent = leftText \r\n\t\t\t\t\tstartNextSibling.before(leftTool);\r\n\t\t\t\t}\r\n\t\t\t\tstartNextSibling.before(textNode);\r\n\t\t\t\tif(rightText){\r\n\t\t\t\t\tlet rightTool = new TargetTool();\r\n\t\t\t\t\trightTool.textContent = rightText;\r\n\t\t\t\t\tstartNextSibling.before(rightTool);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tconsole.log(3)\r\n\t\t\t\tif(leftText){\r\n\t\t\t\t\tlet leftTool = new TargetTool()\r\n\t\t\t\t\tleftTool.textContent = leftText \r\n\t\t\t\t\tthis.append(leftTool);\r\n\t\t\t\t}\r\n\t\t\t\tthis.append(document.createTextNode(textNode));\r\n\t\t\t\tif(rightText){\r\n\t\t\t\t\tlet rightTool = new TargetTool();\r\n\t\t\t\t\trightTool.textContent = rightText;\r\n\t\t\t\t\tthis.append(rightTool);\r\n\t\t\t\t}\r\n\t\t\t}*/\r\n\t\t\t//startContainer.remove();\r\n\t\t\ttool.remove();\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n\tasync #cancelMultipleLineAll(range, tool, TargetTool, endLine){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tlet {startOffset, endOffset, startContainer, endContainer} = range;\r\n\t\t\t\r\n\t\t\tlet endTool = Line.getTool(endContainer, TargetTool);\r\n\r\n\t\t\t// 파이어폭스에서 startContainer, endContainer가 나노 미세 컨트롤로 커서 위치와 관계 없이 비정상 동작 하는 현상 수정 필요\r\n\t\t\tlet startTextNode = document.createTextNode(startContainer.textContent.substring(startOffset, startContainer.textContent.length));\r\n\t\t\tlet endTextNode = document.createTextNode(endContainer.textContent.substring(0, endOffset));\r\n\t\t\t\r\n\t\t\tlet startLeftText = startContainer.textContent.substring(0, startOffset);\r\n\t\t\tlet endRightText = endContainer.textContent.substring(endOffset, endContainer.textContent.length)\r\n\r\n\t\t\tlet startNextSibling = tool?.nextSibling\r\n\t\t\tlet startPrevSibling = tool?.previousSibling\r\n\r\n\t\t\tlet endNextSibling = endTool?.nextSibling\r\n\t\t\tlet endPrevSibling = endTool?.previousSibling\r\n\r\n\t\t\tif(startOffset == 0){\r\n\t\t\t\t//console.log(1)\r\n\t\t\t\tthis.#findCancels(this.lineElement, TargetTool);\r\n\t\t\t}else\r\n\t\t\tif(startPrevSibling && startPrevSibling.nodeType == Node.TEXT_NODE){\r\n\t\t\t\t//console.log(2)\r\n\t\t\t\tstartPrevSibling.after(startTextNode);\r\n\t\t\t\tif(startLeftText){\r\n\t\t\t\t\tlet leftTool = new TargetTool()\r\n\t\t\t\t\tleftTool.textContent = startLeftText \r\n\t\t\t\t\tstartPrevSibling.after(leftTool);\r\n\t\t\t\t}\r\n\t\t\t}else if(startNextSibling && startNextSibling.nodeType == Node.TEXT_NODE){\r\n\t\t\t\t//console.log(3)\r\n\t\t\t\tif(startLeftText){\r\n\t\t\t\t\tlet leftTool = new TargetTool()\r\n\t\t\t\t\tleftTool.textContent = startLeftText \r\n\t\t\t\t\tstartNextSibling.before(leftTool);\r\n\t\t\t\t}\r\n\t\t\t\tstartNextSibling.before(startTextNode);\r\n\t\t\t}else{\r\n\t\t\t\t/*console.log(4)\r\n\t\t\t\tif(startLeftText){\r\n\t\t\t\t\tlet leftTool = new TargetTool()\r\n\t\t\t\t\tleftTool.textContent = startLeftText \r\n\t\t\t\t\tthis.append(leftTool);\r\n\t\t\t\t}\r\n\t\t\t\tthis.append(startTextNode);\r\n\t\t\t\t*/\r\n\t\t\t}\r\n\t\t\tif(tool){\r\n\t\t\t\ttool.remove();\r\n\t\t\t}\r\n\r\n\t\t\tlet nextLine = this.lineElement.nextElementSibling;\r\n\r\n\r\n\t\t\twhile(nextLine){\r\n\t\t\t\tif(nextLine == endLine){\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tnextLine.childNodes.forEach(e=>{\r\n\t\t\t\t\t//console.log(4);\r\n\t\t\t\t\tthis.#findCancels(e, TargetTool);\r\n\t\t\t\t})\r\n\t\t\t\tnextLine = nextLine.nextElementSibling;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(endOffset == endContainer.length){\r\n\t\t\t\t//console.log(1)\r\n\t\t\t\tthis.#findCancels(endLine, TargetTool);\r\n\t\t\t}else\r\n\t\t\tif(endPrevSibling && endPrevSibling.nodeType == Node.TEXT_NODE){\r\n\t\t\t\t//console.log(2)\r\n\t\t\t\tif(endRightText){\r\n\t\t\t\t\tlet rightTool = new TargetTool();\r\n\t\t\t\t\trightTool.textContent = endRightText;\r\n\t\t\t\t\tendPrevSibling.after(rightTool);\r\n\t\t\t\t}\r\n\t\t\t\tendPrevSibling.after(endTextNode);\r\n\t\t\t}else if(endNextSibling && endNextSibling.nodeType == Node.TEXT_NODE){\r\n\t\t\t\t//console.log(3)\r\n\t\t\t\tendNextSibling.before(endTextNode);\r\n\t\t\t\tif(endRightText){\r\n\t\t\t\t\tlet rightTool = new TargetTool();\r\n\t\t\t\t\trightTool.textContent = endRightText;\r\n\t\t\t\t\tendNextSibling.after(rightTool);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t/*console.log(4)\r\n\t\t\t\tif(endRightText){\r\n\t\t\t\t\tlet rightTool = new TargetTool();\r\n\t\t\t\t\trightTool.textContent = endRightText;\r\n\t\t\t\t\t//endLine.append(rightTool);\r\n\t\t\t\t}\r\n\t\t\t\tendLine.prepend(endTextNode);\r\n\t\t\t\t*/\r\n\t\t\t}\r\n\r\n\t\t\tif(endTool){\r\n\t\t\t\tendTool.remove();\r\n\t\t\t}\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n\tasync cancelTool(TargetTool, selection, endLine){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tlet {isCollapsed, anchorNode, anchorOffset} = selection;\r\n\t\t\tlet range = selection.getRangeAt(0);\r\n\t\t\tlet {startOffset, endOffset, startContainer, endContainer, commonAncestorContainer} = range;\r\n\t\t\tlet tool = Line.getTool(startContainer, TargetTool);\r\n\t\t\t/*\r\n\t\t\tif(startContainer === endContainer){\r\n\t\t\t\tif(startContainer.parentElement.childNodes.length == 1 \r\n\t\t\t\t\t&& startContainer.parentElement.childNodes[0] ==  startContainer\r\n\t\t\t\t\t&& startContainer.parentElement.childNodes[0] ==  endContainer\r\n\t\t\t\t\t&& endContainer.textContent.length == endOffset){\r\n\t\t\t\t\t// tool 범위 전체 선택인 경우\r\n\t\t\t\t\tthis.#cancelOnlyOneLine(range, tool, TargetTool).then(()=>{\r\n\t\t\t\t\t\tconsole.log('cancelOnlyOneLine 1')\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// 범위 중 일부\r\n\t\t\t\t\tthis.#cancelOnlyOneTool(range, tool, TargetTool).then(()=>{\r\n\t\t\t\t\t\tconsole.log('cancelOnlyOneTool')\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t*/\r\n\r\n\t\t\tif( ! tool){\r\n\t\t\t\tTargetTool.toolHandler.toolButton.dataset.tool_status = 'connected'\r\n\t\t\t\tresolve();\r\n\t\t\t}else{\r\n\t\t\t\tif( ! TargetTool.toolHandler.isInline || (startContainer === endContainer && this.lineElement.innerText.length != range.toString().length ) ){\r\n\t\t\t\t\tthis.#cancelOnlyOneTool(range, tool, TargetTool).then(()=>{\r\n\t\t\t\t\t\tconsole.log('cancelOnlyOneTool')\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t})\r\n\t\t\t\t}else if(Line.getLine(startContainer) === Line.getLine(endContainer)){\r\n\t\t\t\t\t// 하나만\r\n\t\t\t\t\t// tool 범위 전체 선택인 경우\r\n\t\t\t\t\tthis.#cancelOnlyOneLine(range, tool, TargetTool).then(()=>{\r\n\t\t\t\t\t\tconsole.log('cancelOnlyOneLine 2')\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.#cancelMultipleLineAll(range, tool, TargetTool, endLine).then(()=>{\r\n\t\t\t\t\t\tconsole.log('cancelMultipleLineAll')\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t}).catch(err=>console.error(err))\r\n\t\t\t\t}\r\n\t\t\t\tresolve();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t#findCancels(element, TargetTool){\r\n\t\tnew Promise(res=>{\r\n\t\t\tif(TargetTool.prototype.isPrototypeOf(element)){\r\n\t\t\t\tif(element.nextSibling){\r\n\t\t\t\t\telement.nextSibling.before(...element.childNodes);\r\n\t\t\t\t} else if(element.previousSibling){\r\n\t\t\t\t\telement.previousSibling.after(...element.childNodes);\r\n\t\t\t\t}else {\r\n\t\t\t\t\telement.parentElement.append(...element.childNodes);\r\n\t\t\t\t}\r\n\t\t\t\telement.remove();\r\n\t\t\t}else{\r\n\t\t\t\tif(element.nodeType == Node.ELEMENT_NODE){\r\n\t\t\t\t\telement.childNodes.forEach(e=>{\r\n\t\t\t\t\t\tthis.#findCancels(e, TargetTool);\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tres();\r\n\t\t})\r\n\t}\r\n\r\n\tlookAtMe(){\r\n\t\tlet sty = window.getComputedStyle(this.lineElement);\r\n\t\tif(sty.visibility == 'hidden' || sty.opacity == 0){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(this.lineElement.innerText.length == 0 || (this.lineElement.innerText.length == 1 && this.lineElement.innerText.charAt(0) == '\\n')){\r\n\t\t\tthis.lineElement.innerText = '\\n';\r\n\t\t}\r\n\t\tif(this.lineElement.isContentEditable){\r\n\t\t\tthis.lineElement.focus()\r\n\t\t\twindow.getSelection().setPosition(this.lineElement, this.lineElement.childNodes.length)\r\n\t\t}\r\n\t}\r\n\r\n}","import Line from '../component/Line'\r\n\r\nexport default class FreeWiilHandler extends HTMLElement{\r\n    static #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor'\r\n\t});\r\n\r\n    static #defaultClass = 'free-will-editor';\r\n\r\n    static createDefaultStyle(){\r\n        let defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle = defaultStyle;\r\n        }\r\n\t\tthis.#defaultStyle.textContent = `\r\n            .${this.defaultClass}{\r\n                height: inherit;\r\n                overflow: auto;\r\n                overflow-wrap: anywhere;\r\n                outline: none;\r\n                background-color: inherit;\r\n                padding-top: 0.6%;\r\n                padding-left: 0.5%;\r\n                padding-right: 0.8%;\r\n                -ms-overflow-style: none;\r\n                scrollbar-width: none;\r\n                display: block;\r\n            }\r\n            .${this.#defaultClass}::-webkit-scrollbar {\r\n                display: none;\r\n            }\r\n\r\n            .${this.#defaultClass} > :nth-child(1)::before{\r\n                content: attr(data-placeholder);\r\n                position: absolute;\r\n                color: #d1d1d1;\r\n                font-weight: 600;\r\n                font-family: revert;\r\n                cursor: text;\r\n            }\r\n\t\t`\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n    static get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n    static get defaultClass(){\r\n        return this.#defaultClass;\r\n    }\r\n\r\n    static set defaultClass(defaultClass){\r\n        this.#defaultClass = defaultClass;\r\n    }\r\n\r\n    constructor({isDefaultStyle = true} = {}){\r\n        super()\r\n        this.classList.add('free-will-editor');\r\n\r\n    }\r\n\r\n    blockBackspaceEvent(event){\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @returns {HTMLDivElement}\r\n     */\r\n    createLine(){\r\n        let line = new Line();\r\n        this.append(line.lineElement);\r\n        return line.lineElement;\r\n    }\r\n\r\n    getLineRange(selection = window.getSelection()){\r\n        return new Promise(resolve => {\r\n            let {anchorNode, focusNode} = selection; \r\n            let startAndEndLineObject;\r\n            if(anchorNode == this){\r\n                console.log(111)\r\n                let allLine = [...this.children].filter(e=>e.classList.contains(`${Line.toolHandler.defaultClass}`))\r\n                startAndEndLineObject = {\r\n                    startLine : allLine[0],\r\n                    endLine : allLine.at(-1)\r\n                }\r\n                let range = selection.getRangeAt(0);\r\n                //selection.removeAllRanges();\r\n                let endLineChildNodes = [...startAndEndLineObject.endLine.childNodes].at(-1);\r\n                range.setStart(startAndEndLineObject.startLine.childNodes[0], 1);\r\n                range.setEnd(endLineChildNodes, endLineChildNodes.nodeType == Node.TEXT_NODE ? endLineChildNodes.textContent.length : startAndEndLineObject.endLine.childNodes.length);\r\n                selection.addRange(range);\r\n            }else{\r\n                console.log(222)\r\n                let anchorNodeLine = Line.getLine(anchorNode);\r\n                let focusNodeLine = Line.getLine(focusNode);\r\n                if(anchorNodeLine == focusNodeLine){\r\n                    //console.log(333)\r\n                    resolve({\r\n                        startLine: anchorNodeLine,\r\n                        endLine: focusNodeLine\r\n                    })\r\n                    return;\r\n                }\r\n                //console.log(4444, anchorNodeLine , focusNodeLine);\r\n                startAndEndLineObject = {startLine : anchorNodeLine, endLine : focusNodeLine};\r\n                let key = 'startLine';\r\n                startAndEndLineObject = [...this.querySelectorAll(`.${Line.toolHandler.defaultClass}`)].reduce((obj,item,index)=>{\r\n                    if(item == anchorNodeLine || item == focusNodeLine){\r\n                        if(obj.hasOwnProperty(key)){\r\n                            obj['endLine'] = item\r\n                        }else{\r\n                            obj[key] = item\r\n                        }\r\n                    }\r\n                    return obj;\r\n                },{})\r\n            }\r\n            resolve(startAndEndLineObject);\r\n        })\r\n    }\r\n\r\n    isNextLineExist(element = window.getSelection(), {isRoot = false} = {}){\r\n        let line = isRoot ? Line.getRootLine(element) : Line.getLine(element);\r\n\r\n        let nextLine = line.nextElementSibling;\r\n        if( ! nextLine){\r\n            return false;\r\n        }\r\n        return Line.prototype.isPrototypeOf(nextLine.line);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLElement} element \r\n     * @param {Object} param1 \r\n     * @returns {HTMLElement}\r\n     */\r\n    getNextLine(element = window.getSelection(), {focus = false, isRoot = false} = {}){\r\n\r\n        let line = isRoot ? Line.getRootLine(element) : Line.getLine(element);\r\n\r\n        if( ! line){\r\n            return undefined;\r\n        }\r\n        \r\n        let nextLine = line.nextElementSibling;\r\n        if(nextLine && Line.prototype.isPrototypeOf(nextLine.line)){\r\n            if(focus){\r\n                nextLine.line.lookAtMe();\r\n            }\r\n            return nextLine;\r\n        }\r\n        return undefined;\r\n    }\r\n    \r\n    /**\r\n     * \r\n     * @param {HTMLElement} element \r\n     * @param {Object} param1 \r\n     * @returns {HTMLElement}\r\n     */\r\n    getPrevLine(element = window.getSelection(), {focus = false, isRoot = false} = {}){\r\n\r\n        let line = isRoot ? Line.getRootLine(element) : Line.getLine(element);\r\n        if( ! line){\r\n            return undefined;\r\n        }\r\n        let nextLine = line.previousElementSibling;\r\n        if(nextLine && Line.prototype.isPrototypeOf(nextLine.line)){\r\n            if(focus){\r\n                nextLine.line.lookAtMe();\r\n            }\r\n            return nextLine;\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    getLine(element = window.getSelection(), {isRoot = false} = {}){\r\n        return isRoot ? Line.getRootLine(element) : Line.getLine(element);\r\n    }\r\n\r\n\tisCursor(){\r\n\t\tlet selection = window.getSelection();\r\n\t\tif(! document.activeElement.classList.contains('free-will-editor')){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif(selection.type == 'None'){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn selection.containsNode(this, true) || selection.containsNode(this, false)\r\n\t}\r\n\r\n    getCurrentLine(element, {isRoot = false} = {}){\r\n\t\tlet selection = window.getSelection();\r\n\t\tif(! document.activeElement.classList.contains('free-will-editor')){\r\n\t\t\treturn ;\r\n\t\t}\r\n\t\tif(selection.type == 'None'){\r\n\t\t\treturn ;\r\n\t\t}\r\n        if( ! element){\r\n            element = selection.focusNode;\r\n        }\r\n\t\tif(selection.containsNode(this, true) || selection.containsNode(this, false)){\r\n            return isRoot ? Line.getRootLine(element) : Line.getLine(element);\r\n        }else{\r\n            return ;\r\n        }\r\n    }\r\n\r\n}","import FreeWillEditor from \"../FreeWillEditor\";\r\nimport Line from '../component/Line'\r\nimport FreedomInterface from \"../module/FreedomInterface\"\r\n\r\n// 추후 indexed db 사용 검토\r\nexport default class UndoManager{\r\n    #editor;\r\n    #history = [];\r\n    #historyIndex = 0;\r\n    #historyLimit = 50;\r\n    #UndoRedo = class UndoRedo{\r\n        #html\r\n        #time\r\n        constructor(html){\r\n            this.#html = html;\r\n            this.#time = new Date().getTime();\r\n        }\r\n        get html(){\r\n            return this.#html;\r\n        }\r\n        get time(){\r\n            return this.#time;\r\n        }\r\n    }\r\n\r\n    #lastCursorPositionRect;\r\n    //#isUndoSwitch = false;\r\n\r\n    /**\r\n     * \r\n     * @param {FreeWillEditor} targetEditor \r\n     */\r\n    //레인지를 저장해뒀다가 쓰기\r\n    constructor(targetEditor){\r\n        this.#editor = targetEditor;\r\n        //if(this.#editor.contentEditable == 'true'){\r\n            this.addCursorMove();\r\n            this.addUndoKey();\r\n            this.addUserInput();\r\n        //}\r\n\r\n    }\r\n\r\n    addCursorMove(){\r\n        /*\r\n        let isFirst = true;\r\n        document.addEventListener(\"selectionchange\", (event) => {\r\n            if(document.activeElement !== this.#editor){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n            let selection = window.getSelection();\r\n            let range = selection.getRangeAt(0);\r\n            let newRect = range.getBoundingClientRect();\r\n            if(this.#lastCursorPositionRect && (this.#lastCursorPositionRect.x != newRect.x || this.#lastCursorPositionRect.y != newRect.y)){\r\n                range.insertNode(this.#cursor);\r\n            }else if(isFirst){\r\n                range.insertNode(this.#cursor);\r\n                isFirst = false;\r\n            }\r\n            this.#lastCursorPositionRect = newRect;\r\n        });\r\n        */\r\n        FreedomInterface.globalSelectionChangeEventListener(this, ({oldEvent, newEvent}) => {\r\n            if(document.activeElement !== this.#editor){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n            this.rememberCursor();\r\n\t\t})\r\n    }\r\n\r\n    rememberCursor(){\r\n        let selection = window.getSelection();\r\n        let range = selection.getRangeAt(0);\r\n        let newRect = range.getBoundingClientRect();\r\n        if(this.#lastCursorPositionRect && (this.#lastCursorPositionRect.x == newRect.x && this.#lastCursorPositionRect.y == newRect.y)){\r\n            return\r\n        }\r\n        let {focusNode, focusOffset} = selection\r\n\r\n        let target;\r\n        let index = (() => {\r\n            if(focusNode.nodeType == Node.TEXT_NODE){\r\n                target = focusNode.parentElement;\r\n                return [...target.childNodes].findIndex(e=>e == focusNode);\r\n            }else if(focusNode.nodeType == Node.ELEMENT_NODE){\r\n                target = focusNode;\r\n                return 0;\r\n            }\r\n        })();\r\n\r\n        if(target == undefined){\r\n            return;\r\n        }else{\r\n            let prevCursorTarget;\r\n            if(this.#editor.hasAttribute('is_cursor')){\r\n                prevCursorTarget = this.#editor;\r\n            }else{\r\n                prevCursorTarget = this.#editor.querySelector('[is_cursor]');\r\n            }\r\n            if(prevCursorTarget && prevCursorTarget != target){\r\n                prevCursorTarget.removeAttribute('is_cursor');\r\n                prevCursorTarget.removeAttribute('cursor_offset');\r\n                prevCursorTarget.removeAttribute('cursor_type');\r\n                prevCursorTarget.removeAttribute('cursor_index');\r\n                prevCursorTarget.removeAttribute('cursor_scroll_x');\r\n                prevCursorTarget.removeAttribute('cursor_scroll_y');\r\n            }\r\n        }\r\n\r\n        /*\r\n            Object.assign(parent.dataset,{\r\n                offset: focusOffset,\r\n                index: childIndex\r\n            })\r\n        */\r\n        target.setAttribute('is_cursor', '');\r\n        target.setAttribute('cursor_offset', focusOffset);\r\n        target.setAttribute('cursor_type', target.nodeType);\r\n        target.setAttribute('cursor_index', index);\r\n        target.setAttribute('cursor_scroll_x', this.#editor.scrollLeft);\r\n        target.setAttribute('cursor_scroll_y', this.#editor.scrollTop);\r\n        this.#lastCursorPositionRect = newRect;\r\n    }\r\n\r\n    addUndoKey(){\r\n        this.#editor.addEventListener('keydown', (event) => {\r\n            if(document.activeElement !== this.#editor){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n            let {ctrlKey, key} = event;\r\n            if( ! ctrlKey || ! (key == 'z' || key == 'y')){\r\n                return;\r\n            }\r\n            event.preventDefault();\r\n            if(key == 'z'){\r\n                this.undoKeyEvent();\r\n            }else{\r\n                this.redoKeyEvent();\r\n            }\r\n\r\n            let cursorTarget = this.#editor.querySelector('[is_cursor]');\r\n            if( ! cursorTarget){\r\n                return;\r\n            }\r\n\r\n            let {'cursor_offset': offset, 'cursor_type': type, 'cursor_index': index, 'cursor_scroll_x': x, 'cursor_scroll_y': y} = cursorTarget.attributes\r\n            let selection = window.getSelection();\r\n            /*if(type.value == Node.TEXT_NODE){\r\n                let textNode = cursorTarget.childNodes[index.value]; \r\n                selection.setPosition(textNode, offset.value);\r\n            }else if(type.value == Node.ELEMENT_NODE){\r\n                console.log(cursorTarget);\r\n                selection.setPosition(cursorTarget, offset.value);\r\n            }*/\r\n            if(type.value == Node.ELEMENT_NODE){\r\n                let node = cursorTarget.childNodes[index.value]; \r\n                if(this.#editor.isEmpty){\r\n                    selection.setPosition(node, 0);\r\n                }else{\r\n                    selection.setPosition(node, offset.value);\r\n                }\r\n            }else if(type.value == Node.TEXT_NODE){\r\n                selection.setPosition(cursorTarget, offset.value);\r\n            }\r\n            this.#editor.scrollTo(Number(x.value), Number(y.value));\r\n        });\r\n    }\r\n\r\n    undoKeyEvent(){\r\n        if(this.#history.length == 0){\r\n            return;\r\n        }\r\n        this.#historyIndex += 1;\r\n        if(this.#historyIndex > this.#history.length - 1){\r\n            this.#historyIndex = this.#history.length - 1\r\n        }\r\n        let undoRedo = this.#history[this.#historyIndex];\r\n       \r\n        //console.log('z key undo',undoRedo.html);\r\n        this.#editor.innerHTML = undoRedo.html;\r\n    }\r\n    redoKeyEvent(){\r\n        if(this.#history.length == 0){\r\n            return;\r\n        }\r\n        this.#historyIndex -= 1;\r\n        if(this.#historyIndex < 0){\r\n            this.#historyIndex = 0\r\n        }\r\n        let undoRedo = this.#history[this.#historyIndex];\r\n\r\n        //console.log('y key redo',undoRedo.html)\r\n        this.#editor.innerHTML = undoRedo.html;\r\n    }\r\n    addUndoRedo(isCheckSkip = false){\r\n        if(document.activeElement !== this.#editor && ! isCheckSkip){\r\n            return;\r\n        }\r\n\r\n        this.rememberCursor();\r\n\r\n        let undoRedo = new this.#UndoRedo(this.#editor.innerHTML.trim());\r\n        this.#history.unshift(undoRedo);\r\n        \r\n        if(this.#history.length > this.#historyLimit){\r\n            this.#history = this.#history.splice(0, this.#historyLimit);\r\n        }\r\n        \r\n        //console.log('history', this.#history);\r\n    }\r\n    addUserInput(){\r\n        let prevMils = new Date().getTime();\r\n        this.#editor.addEventListener('keydown', (event) => {\r\n            if(document.activeElement !== this.#editor || (new Date().getTime() - prevMils) < 500){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n            prevMils = new Date().getTime();\r\n            let {ctrlKey, key, altKey} = event;\r\n            if(ctrlKey || altKey || ctrlKey && (key == 'z' || key == 'y')){\r\n                return;\r\n            }\r\n            \r\n            if(this.#history.length != 0 && this.#history[0].html.trim() == this.#editor.innerHTML.trim()){\r\n                return;\r\n            }\r\n            this.addUndoRedo();\r\n        });\r\n        /*\r\n        let addElementObserver = new MutationObserver( (mutationList, observer) => {\r\n            mutationList.forEach((mutation) => {\r\n                let {addedNodes, removedNodes} = mutation;\r\n\r\n                if(this.#isUndoSwitch){\r\n                    this.#isUndoSwitch = false;\r\n                    //return;\r\n                }\r\n\r\n                new Promise(resolve=>{\r\n                    addedNodes.forEach(node=>{\r\n                        if(node.nodeType != Node.ELEMENT_NODE){\r\n                            return;\r\n                        }\r\n                        let tagName = node.tagName.toLowerCase();\r\n                        if(this.#editor.tools.hasOwnProperty(tagName) && this.#history.length != 0 && this.#history[0].html.trim() != this.#editor.innerHTML.trim()){\r\n                            let undoRedo = new this.#UndoRedo(this.#editor.innerHTML.trim());\r\n                            this.#history.unshift(undoRedo);\r\n                            if(this.#history.length > this.#historyLimit){\r\n                                this.#history = this.#history.splice(0, this.#historyLimit);\r\n                            }\r\n                        }\r\n                    });\r\n                    resolve();\r\n                })\r\n            });\r\n        })\r\n        addElementObserver.observe(this.#editor, {\r\n\t\t\tchildList:true,\r\n\t\t\tsubtree: true\r\n\t\t});\r\n        */\r\n    }\r\n\r\n    clearHistory(){\r\n        this.#history = [];\r\n    }\r\n    \r\n    clearEditor(){\r\n        this.#editor.innerHTML = '';\r\n    }\r\n\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nexport default class Strong extends FreedomInterface {\r\n\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-strong-style'\r\n\t});\r\n\tstatic isDefaultStyle = true;\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-strong';\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: 'B',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Bold'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else{\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} {\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tconstructor(dataset, {isDefaultStyle = true} = {}){\r\n\t\tsuper(Strong, dataset);\r\n\t}\r\n\t\r\n}\r\n","\r\nexport default class Palette {\r\n\t\r\n\t#style = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-palette'\r\n\t});\r\n\r\n\t#palette = Object.assign(document.createElement('div'),{\r\n\t\tclassName: 'palette-wrap'\r\n\t});\r\n\r\n\t#componentMap = undefined;\r\n\t\r\n\t#lastPanelPosition = undefined;\r\n\t\r\n\t#lastPaintPosition = undefined;\r\n\t#lastPaintRgb = [255, 0, 0];\r\n\r\n\t#lastBrightnessPosition = undefined;\r\n\r\n\t#r = 255;\r\n\t#g = 0;\r\n\t#b = 0;\r\n\t#a = 1;\r\n\r\n    #openPositionMode;\r\n\t#openPosition;\r\n\t#exampleMode;\r\n\r\n    #applyCallback = () => {}\r\n\r\n\tstatic ExampleMode = class ExampleMode{\r\n\t\tstatic #ExampleModeEnum = class ExampleModeEnum{\r\n\t\t\tvalue;\r\n\t\t\tconstructor(value){\r\n\t\t\t\tthis.value = value;\r\n\t\t\t\tObject.freeze(this);\r\n\t\t\t}\r\n\t\t}\r\n\t\tstatic TEXT_COLOR = new this.#ExampleModeEnum('color');\r\n\t\tstatic TEXT_BACKGROUND_COLOR = new this.#ExampleModeEnum('background-color');\r\n\t\tstatic TEXT_UNDERLINE = new this.#ExampleModeEnum('text-decoration');\r\n\t\tstatic TEXT_LINE_THROUGH = new this.#ExampleModeEnum('text-decoration');\r\n\t\tvalue;\r\n\t\tstatic{\r\n\t\t\tObject.freeze(this);\r\n\t\t}\r\n\t\tconstructor(value){\r\n\t\t\tthis.value = value;\r\n\t\t\tObject.freeze(this);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic OpenPositionMode = class OpenPositionMode{\r\n\t\tstatic BUTTON = new OpenPositionMode('button')\r\n\t\tstatic WRAPPER = new OpenPositionMode('wrapper')\r\n\t\t/**\r\n\t\t * @returns {String}\r\n\t\t */\r\n\t\tvalue;\r\n\t\tstatic{\r\n\t\t\tObject.freeze(this);\r\n\t\t}\r\n\t\tconstructor(value){\r\n\t\t\tthis.value = value;\r\n\t\t\tObject.freeze(this);\r\n\t\t}\r\n\t}\r\n\r\n    constructor({\r\n\t\topenPositionMode = Palette.OpenPositionMode.BUTTON,\r\n\t\topenPosition,\r\n\t\texampleMode = Palette.ExampleMode.TEXT_COLOR\r\n\t}={}){\r\n\t\t\r\n        this.#openPositionMode = openPositionMode;\r\n\t\tif( ! this.#openPositionMode ){//|| ! (this.#openPositionMode instanceof Palette.OpenPositionMode)){\r\n\t\t\tthrow new Error('this is not OpenPositionMode');\r\n\t\t}\r\n\t\tthis.#openPosition = openPosition;\r\n        if( ! this.#openPosition || ! this.#openPosition.nodeType || this.#openPosition.nodeType != Node.ELEMENT_NODE){\r\n            throw new Error('openPosition is not element');\r\n        }\r\n\t\tthis.#exampleMode = exampleMode;\r\n\t\t\r\n\t\tif(this.#openPositionMode == Palette.OpenPositionMode.BUTTON){\r\n\t\t\tthis.#palette.style.position = \"fixed\";\r\n\t\t}\r\n\r\n        let style = document.querySelector(`#${this.#style.id}`);\r\n        if(! style){\r\n            document.head.append(this.createStyle());\r\n        }else{\r\n            this.#style = style;\r\n        }\r\n\r\n        document.addEventListener(\"scroll\", () => {\r\n\t\t\tif(this.#palette.isConnected){\r\n\t\t\t\tthis.#processingPalettePosition(this.#palette);\r\n\t\t\t}\r\n\t\t});\r\n\r\n        window.addEventListener('resize', (event) => {\r\n            if(this.#palette.isConnected){\r\n                this.reset();\r\n                this.#palette.replaceChildren();\r\n                let done = setTimeout(()=>{\r\n                    this.open();\r\n                    clearTimeout(done);\r\n                    done = undefined\r\n                },200)\r\n            }\r\n\t\t})\r\n\r\n        new Array('mouseup', 'touchend').forEach(eventName => {\r\n\t\t\twindow.addEventListener(eventName, () => {\r\n\t\t\t\tif( ! this.#componentMap){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.#componentMap.colorPanel?.removeAttribute('data-is_mouse_down');\r\n\t\t\t\tthis.#componentMap.colorPaint?.removeAttribute('data-is_mouse_down');\r\n\t\t\t\tthis.#componentMap.colorBrightness?.removeAttribute('data-is_mouse_down');\r\n\t\t\t})\r\n\t\t})\r\n\t\t\r\n\t\tnew Array('mousemove', 'touchmove').forEach(eventName=>{\r\n\t\t\twindow.addEventListener(eventName, (event) => {\r\n\t\t\t\tif( ! this.#componentMap){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(this.#componentMap.colorPanel && this.#componentMap.colorPanel.hasAttribute('data-is_mouse_down')){\r\n\t\t\t\t\tthis.#colorPanelMoveEvent(event)\r\n\t\t\t\t}\r\n\t\t\t\tif(this.#componentMap.colorPaint && this.#componentMap.colorPaint.hasAttribute('data-is_mouse_down')){\r\n\t\t\t\t\tthis.#colorPaintMoveEvent(event);\r\n\t\t\t\t}\r\n\t\t\t\tif(this.#componentMap.colorBrightness && this.#componentMap.colorBrightness.hasAttribute('data-is_mouse_down')){\r\n\t\t\t\t\tthis.#colorBrightnessMoveEvent(event);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n    }\r\n\r\n    #createPalette(palette, itemMap){\r\n\t\tlet {\r\n\t\t\ttopTextWrap, selectionRgbBg, previousRgbBg, \r\n\t\t\tcolorWrap, colorPanel, colorPaint, \r\n\t\t\tcolorBrightnessWrap, colorBrightness,\r\n\t\t\tbottomTextWrap, selectionRgbText, previousRgbText,\r\n\t\t\tapplyWrap, cancelButton, applyButton\r\n\t\t} = itemMap\r\n\t\tpalette.replaceChildren(topTextWrap, colorWrap, colorBrightnessWrap, bottomTextWrap, applyWrap);\r\n\t\tthis.#settingCanvas();\r\n\t\tthis.#settingApplyEvent(palette, cancelButton, applyButton, selectionRgbText);\r\n\t}\r\n\r\n    #createPaletteItems(){\r\n\r\n\t\t// 팔레트 상단 텍스트 영역\r\n\t\tlet {topTextWrap, selectionRgbBg, previousRgbBg} = this.#createRgbaTopTextWrap()\r\n\t\t\r\n\t\t// 팔레트 중단 컬러 설정 집합 영역\r\n\t\tlet colorWrap = Object.assign(document.createElement('div'),{\r\n\t\t\tclassName: 'color-wrap'\r\n\t\t})\r\n\r\n\t\tlet colorPanel = this.#createColorPanel();\r\n\t\tlet colorPaint = this.#createColorPaint();\r\n\t\tcolorWrap.append(colorPanel, colorPanel.__colorPanelSelected, colorPanel.__colorPanelSelectedPointer,\r\n\t\t\tcolorPaint, colorPaint.__colorPaintSelectedPointer);\r\n\r\n\t\t// 팔레트 색상 명도 조절 설정 캔버스 영역\r\n\t\tlet {colorBrightnessWrap, colorBrightness} = this.#createColorBrightness()\r\n\r\n\t\t// 팔레트 하단 텍스트 영역\r\n\t\tlet {bottomTextWrap, selectionRgbText, previousRgbText} = this.#createRgbaBottomTextWrap();\r\n\t\t\r\n\t\tlet {applyWrap, cancelButton, applyButton} = this.#createApplyButtonWrap();\r\n\r\n\t\treturn {\r\n\t\t\ttopTextWrap, selectionRgbBg, previousRgbBg, \r\n\t\t\tcolorWrap, colorPanel, colorPaint, \r\n\t\t\tcolorBrightnessWrap, colorBrightness,\r\n\t\t\tbottomTextWrap, selectionRgbText, previousRgbText,\r\n\t\t\tapplyWrap, cancelButton, applyButton\r\n\t\t};\r\n\t}\r\n\r\n    #createColorPanel(){\r\n\t\tlet colorPanel = Object.assign(document.createElement('canvas'),{\r\n\t\t\tclassName: 'palette-panel'\r\n\t\t})\r\n\t\tlet colorPanelSelected = Object.assign(document.createElement('canvas'),{\r\n\t\t\tclassName: 'panel-selected'\r\n\t\t})\r\n\t\tlet colorPanelSelectedPointer = Object.assign(document.createElement('div'),{\r\n\t\t\tclassName: 'panel-selected-pointer'\r\n\t\t});\r\n\r\n\t\tcolorPanel.__colorPanelSelected = colorPanelSelected;\r\n\t\tcolorPanel.__colorPanelSelectedPointer = colorPanelSelectedPointer;\r\n\r\n\t\treturn colorPanel;\r\n\t}\r\n\r\n    #createColorPaint(){\r\n\t\tlet colorPaint = Object.assign(document.createElement('canvas'),{\r\n\t\t\tclassName: 'palette-paint'\r\n\t\t});\r\n\r\n\t\tlet colorPaintSelectedPointer = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'paint-selected-pointer'\r\n\t\t})\r\n\t\tcolorPaintSelectedPointer.append(Object.assign(document.createElement('div'),{\r\n\t\t\tclassName: 'paint-selected-pointer-child'\r\n\t\t}));\r\n\t\tcolorPaint.__colorPaintSelectedPointer = colorPaintSelectedPointer\r\n\r\n\t\treturn colorPaint;\r\n\t}\r\n\r\n    #createColorBrightness(){\r\n\t\tlet colorBrightnessWrap = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'brightness-wrap'\r\n\t\t});\r\n\t\tlet colorBrightness = Object.assign(document.createElement('canvas'), {\r\n\t\t\tclassName: 'brightness-color'\r\n\t\t})\r\n\t\tlet colorBrightnessSelectedPointer = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'brightness-selected-pointer'\r\n\t\t});\r\n\t\tcolorBrightnessSelectedPointer.append(Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'brightness-selected-pointer-child'\r\n\t\t}));\r\n\t\tcolorBrightness.__colorBrightnessSelectedPointer = colorBrightnessSelectedPointer;\r\n\t\tcolorBrightnessWrap.append(colorBrightness, colorBrightness.__colorBrightnessSelectedPointer)\r\n\r\n\t\treturn {colorBrightnessWrap, colorBrightness};\r\n\t}\r\n\r\n    #createRgbaTopTextWrap(){\r\n\t\tlet topTextWrap = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'top-text-wrap'\r\n\t\t});\r\n\t\t\r\n\t\tlet blackOrWhite = this.#blackOrWhite(this.#r, this.#g, this.#b);\r\n\r\n\t\tlet selectionRgbBg = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'selection-rgb-bg',\r\n\t\t\ttextContent: this.selectedColor\r\n\t\t});\r\n\t\tselectionRgbBg.style.background = this.selectedColor;\r\n\t\tselectionRgbBg.style.color = `rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`\r\n\r\n\r\n\t\tlet previousRgbBg = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName : 'previous-rgb-bg',\r\n\t\t});\r\n\t\tpreviousRgbBg.style.background = this.selectedColor;\r\n\r\n\t\ttopTextWrap.append(selectionRgbBg, previousRgbBg)\r\n\r\n\t\treturn {topTextWrap, selectionRgbBg, previousRgbBg}\r\n\t}\r\n\r\n    #createRgbaBottomTextWrap(){\r\n\t\tlet bottomTextWrap = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'bottom-text-wrap'\r\n\t\t});\r\n\t\tlet selection = window.getSelection();\r\n\t\tlet sampleText = '';\r\n\t\tif(selection.rangeCount != 0 && selection.isCollapsed == false){\r\n\t\t\tlet range = selection.getRangeAt(0)\r\n\t\t\tlet aticle = document.createElement('aticle');\r\n\t\t\tlet rangeClone = range.cloneContents();\r\n\t\t\taticle.append(rangeClone);\r\n\t\t\tsampleText = aticle\r\n\t\t}\r\n\t\tsampleText = sampleText == '' ? '가 나다 라 A BC D' : sampleText;\r\n\t\tlet blackOrWhite = this.#blackOrWhite(this.#r, this.#g, this.#b);\r\n\t\t\r\n\t\tlet selectionRgbText = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'selection-rgb-text',\r\n\t\t});\r\n\t\tthis.#applyExampleTextColor(selectionRgbText, this.selectedColor, blackOrWhite);\r\n\r\n\t\tlet previousRgbText = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'previous-rgb-text',\r\n\t\t});\r\n\t\tthis.#applyExampleTextColor(previousRgbText, this.selectedColor, blackOrWhite);\r\n\r\n\t\tif(sampleText.nodeType && sampleText.nodeType == Node.ELEMENT_NODE){\r\n\t\t\tselectionRgbText.innerHTML = sampleText.innerHTML;\r\n\t\t\tpreviousRgbText.innerHTML = sampleText.innerHTML;\r\n\t\t}else{\r\n\t\t\tselectionRgbText.textContent = sampleText;\r\n\t\t\tpreviousRgbText.textContent = sampleText;\r\n\t\t}\r\n\r\n\r\n\t\tbottomTextWrap.append(selectionRgbText, previousRgbText)\r\n\r\n\t\treturn {bottomTextWrap, selectionRgbText, previousRgbText}\r\n\t}\r\n\r\n    #createApplyButtonWrap(){\r\n\t\tlet applyWrap = Object.assign(document.createElement('div'),{\r\n\t\t\tclassName: 'button-wrap'\r\n\t\t})\r\n\t\tlet cancelButton = Object.assign(document.createElement('button'), {\r\n\t\t\tclassName: 'cancel-button',\r\n\t\t\ttype: 'button',\r\n\t\t\ttextContent: 'cancel'\r\n\t\t})\r\n\t\tlet applyButton = Object.assign(document.createElement('button'), {\r\n\t\t\tclassName: 'apply-button',\r\n\t\t\ttype: 'button',\r\n\t\t\ttextContent: 'apply'\r\n\t\t})\r\n\t\tapplyWrap.append(cancelButton, applyButton);\r\n\t\treturn {applyWrap, cancelButton, applyButton};\r\n\t}\r\n\r\n    #settingCanvas(){\r\n\t\treturn new Promise(resolve=> {\r\n\t\t\tthis.#settingColorPanel()\r\n\t\t\tthis.#settingColorPaint()\r\n\t\t\tthis.#settingColorBrightness();\r\n\t\t\tresolve();\r\n\t\t})\r\n\t}\r\n\r\n    #settingColorPanel(){\r\n\t\treturn new Promise(resolve=>{\r\n\t\t\tlet {\r\n\t\t\t\ttopTextWrap, selectionRgbBg, previousRgbBg, \r\n\t\t\t\tcolorWrap, colorPanel, colorPaint, \r\n\t\t\t\tcolorBrightnessWrap, colorBrightness,\r\n\t\t\t\tbottomTextWrap, selectionRgbText, previousRgbText\r\n\t\t\t} = this.#componentMap;\r\n\r\n\t\t\tconst setPanelSelectePosition = () => {\r\n\t\t\t\tlet colorPanelRect = colorPanel.getBoundingClientRect();\r\n\t\t\t\tlet colorPanelSelected = colorPanel.__colorPanelSelected;\r\n\t\t\t\tcolorPanelSelected.style.top = colorPanelRect.y + 'px';\r\n\t\t\t\tcolorPanelSelected.style.left = colorPanelRect.x + 'px';\r\n\t\t\t\tcolorPanelSelected.style.width = colorPanelRect.width + 'px';\r\n\t\t\t\tcolorPanelSelected.style.height = colorPanelRect.height + 'px';\r\n\t\t\t\tcolorPanelSelected.width = colorPanelRect.width;\r\n\t\t\t\tcolorPanelSelected.height = colorPanelRect.height;\r\n\t\t\t}\r\n\r\n\t\t\tcolorPanel.onmousedown = (event)=>{\r\n\t\t\t\tcolorPanel.setAttribute('data-is_mouse_down', '');\r\n\t\t\t\tlet {x, y} = this.#getEventXY(event);\r\n\t\t\t\tcolorPanel.__colorPanelSelectedPointer.style.top = y\r\n\t\t\t\tcolorPanel.__colorPanelSelectedPointer.style.left = x\r\n\t\t\t\tsetPanelSelectePosition()\r\n\t\t\t\tthis.#colorPanelMoveEvent(event);\r\n\t\t\t}\r\n\t\t\tcolorPanel.ontouchstart = colorPanel.onmousedown;\r\n\r\n\t\t\tcolorPanel.__colorPanelSelected.onmousedown = colorPanel.onmousedown;\r\n\t\t\tcolorPanel.__colorPanelSelected.ontouchstart = colorPanel.onmousedown;\r\n\t\t\t\r\n\t\t\tcolorPanel.__colorPanelSelectedPointer.onmousedown = colorPanel.onmousedown;\r\n\t\t\tcolorPanel.__colorPanelSelectedPointer.ontouchstart = colorPanel.onmousedown;\r\n\r\n\t\t\tresolve(setTimeout(()=>{\r\n\t\t\t\tlet panelContext = colorPanel.getContext('2d', { willReadFrequently: true });\r\n\t\t\t\tlet colorPanelRect = colorPanel.getBoundingClientRect();\r\n\t\t\t\tcolorPanel.width = colorPanelRect.width;\r\n\t\t\t\tcolorPanel.height = colorPanelRect.height;\r\n                setPanelSelectePosition();\r\n\t\t\t\tthis.#changeColorPanel(panelContext)\r\n\r\n\t\t\t\tlet blackOrWhite = this.#blackOrWhite(this.#r, this.#g, this.#b);\r\n\t\t\t\tlet context = colorPanel.__colorPanelSelected.getContext('2d', { willReadFrequently: true })\r\n\t\t\t\tif(this.#lastPanelPosition){\r\n\t\t\t\t\tthis.#processingColorPanelSeleter(context, this.#lastPanelPosition.x - colorPanelRect.x, this.#lastPanelPosition.y - colorPanelRect.y, blackOrWhite);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.#processingColorPanelSeleter(context, colorPanelRect.width - 1, 0.1, blackOrWhite);\r\n\t\t\t\t\tthis.#lastPanelPosition = {x:colorPanelRect.right - 1, y:colorPanelRect.top}\r\n                    colorPanel.__colorPanelSelectedPointer.style.top = this.#lastPanelPosition.y + 'px';\r\n                    colorPanel.__colorPanelSelectedPointer.style.left = this.#lastPanelPosition.x + 'px';\r\n                }\r\n\t\t\t},200))\r\n\t\t});\r\n\t}\r\n\r\n    #changeColorPanel(context){\r\n\t\tcontext.clearRect(0, 0, context.canvas.width, context.canvas.height);\r\n\t\tlet [r,g,b] = this.#lastPaintRgb\r\n\t\t// 가로 그라데이션\r\n\t\tlet gradientH = context.createLinearGradient(2, 0, context.canvas.width - 2, 0);\r\n\t\tgradientH.addColorStop(0, 'white');\r\n\t\tgradientH.addColorStop(1, `rgba(${r}, ${g}, ${b}, ${this.#a})`);\r\n\t\tcontext.fillStyle = gradientH;\r\n\t\tcontext.fillRect(0, 0, context.canvas.width, context.canvas.height);\r\n\t\t// 수직 그라데이션\r\n\t\tlet gradientV = context.createLinearGradient(0, 2, 0, context.canvas.height - 2);\r\n\t\tgradientV.addColorStop(0, 'rgba(0,0,0,0)');\r\n\t\tgradientV.addColorStop(1, 'black');\r\n\t\tcontext.fillStyle = gradientV;\r\n\t\tcontext.fillRect(0, 0, context.canvas.width, context.canvas.height);\r\n\t}\r\n\r\n    #processingColorPanelSeleter(colorPanelSelectedContext, x, y, [r = 0, g = 0, b = 0] = []){\r\n\t\tnew Promise(resolve=>{\r\n\t\t\tcolorPanelSelectedContext.clearRect(0, 0, colorPanelSelectedContext.canvas.width, colorPanelSelectedContext.canvas.height);\r\n\t\t\tcolorPanelSelectedContext.lineWidth = 1;\r\n\t\t\tcolorPanelSelectedContext.beginPath();\r\n\t\t\tcolorPanelSelectedContext.arc(x, y, 10, 0, 2 * Math.PI);\r\n\t\t\tcolorPanelSelectedContext.strokeStyle = `rgb(${r}, ${g}, ${b})`\r\n\t\t\tcolorPanelSelectedContext.stroke();\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n    #colorPanelMoveEvent(event){\r\n\t\tnew Promise(resolve => {\r\n\t\t\tlet {\r\n\t\t\t\ttopTextWrap, selectionRgbBg, previousRgbBg, \r\n\t\t\t\tcolorWrap, colorPanel, colorPaint, \r\n\t\t\t\tcolorBrightnessWrap, colorBrightness,\r\n\t\t\t\tbottomTextWrap, selectionRgbText, previousRgbText\r\n\t\t\t} = this.#componentMap;\r\n\t\t\tlet rect = colorPanel.getBoundingClientRect();\r\n\t\t\tlet {x:pageX, y:pageY} = this.#getEventXY(event);\r\n\r\n\t\t\tlet isLeftOver = pageX < rect.left;\r\n\t\t\tlet isRightOver = pageX > rect.right - 1;\r\n\t\t\tlet isTopOver = pageY < rect.top;\r\n\t\t\tlet isBottomOver = pageY > rect.bottom;\r\n\r\n\t\t\tcolorPanel.__colorPanelSelectedPointer.style.left = pageX + 'px';\r\n\t\t\tcolorPanel.__colorPanelSelectedPointer.style.top = pageY + 'px';\r\n\r\n\t\t\tlet {x : reProcessingRectX, y : reProcessingRectY} = colorPanel.__colorPanelSelectedPointer.getBoundingClientRect();\r\n\t\t\t\r\n\t\t\tlet x = reProcessingRectX - rect.x\r\n\t\t\tlet y = reProcessingRectY - rect.y\r\n\r\n\r\n\t\t\tif(isLeftOver){\r\n\t\t\t\tx = 0\r\n\t\t\t\treProcessingRectX = rect.left\r\n\t\t\t}\r\n\t\t\tif(isRightOver){\r\n\t\t\t\tx = rect.width - 1\r\n\t\t\t\treProcessingRectX = rect.right - 1\r\n\t\t\t}\r\n\t\t\tif(isTopOver){\r\n\t\t\t\ty = 0\r\n\t\t\t\treProcessingRectY = rect.top\r\n\t\t\t}\r\n\t\t\tif(isBottomOver){\r\n\t\t\t\ty = rect.height\r\n\t\t\t\treProcessingRectY = rect.bottom\r\n\t\t\t}\r\n\r\n\t\t\tthis.#lastPanelPosition = {x : reProcessingRectX, y : reProcessingRectY};\r\n\t\t\tlet context = colorPanel.getContext('2d', { willReadFrequently: true });\r\n\t\t\t\r\n\t\t\t/*if(isLeftOver && isTopOver){\r\n\t\t\t\t[this.#r, this.#g, this.#b] = [255,255,255];\r\n\t\t\t//}else if(isRightOver && isTopOver){\r\n\t\t\t//\t[this.#r, this.#g, this.#b] = this.#lastPaintRgb\r\n\t\t\t}else if((isRightOver && isBottomOver) || (isLeftOver && isBottomOver) || isBottomOver){\r\n\t\t\t\t[this.#r, this.#g, this.#b] = [0,0,0];\r\n\t\t\t}else{*/\r\n\t\t\t\t[this.#r, this.#g, this.#b] = context.getImageData(x, y, 1, 1).data;\r\n\t\t\t//}\r\n\r\n\t\t\tlet selectedColor = `rgba(${this.#r}, ${this.#g}, ${this.#b}, ${this.#a})`;\r\n\t\t\tlet blackOrWhite = this.#blackOrWhite(this.#r,this.#g,this.#b);\r\n\r\n\t\t\tthis.#processingColorPanelSeleter(\r\n\t\t\t\tcolorPanel.__colorPanelSelected.getContext('2d', { willReadFrequently: true })\r\n\t\t\t\t, x, y, blackOrWhite);\r\n\r\n\t\t\tselectionRgbBg.textContent = selectedColor;\r\n\t\t\tselectionRgbBg.style.color = `rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`\r\n\t\t\tselectionRgbBg.style.background = selectedColor;\r\n\t\t\t\r\n\t\t\tthis.#applyExampleTextColor(selectionRgbText, selectedColor, blackOrWhite);\r\n\r\n\t\t\tif(this.#a < 0.75){\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.children[0].style.border = 'solid 1px white';\r\n\t\t\t}else{\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.children[0].style.border = `solid 1px rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`;\r\n\t\t\t}\r\n\r\n\t\t\tthis.#changeColorBrightness(colorBrightness.getContext('2d', { willReadFrequently: true }), [this.#r, this.#g, this.#b]);\r\n\r\n\t\t\tresolve();\r\n\t\t})\r\n\t}\r\n\r\n    #settingColorPaint(){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tlet {\r\n\t\t\t\ttopTextWrap, selectionRgbBg, previousRgbBg, \r\n\t\t\t\tcolorWrap, colorPanel, colorPaint, \r\n\t\t\t\tcolorBrightnessWrap, colorBrightness,\r\n\t\t\t\tbottomTextWrap, selectionRgbText, previousRgbText\r\n\t\t\t} = this.#componentMap;\r\n\r\n\t\t\tcolorPaint.onmousedown = (event) => {\r\n\t\t\t\tcolorPaint.setAttribute('data-is_mouse_down', '');\r\n\t\t\t\tlet {x, y} = this.#getEventXY(event);\r\n\t\t\t\tcolorPaint.__colorPaintSelectedPointer.style.top = y + 'px';\r\n\t\t\t\tthis.#colorPaintMoveEvent(event);\r\n\t\t\t}\r\n\t\t\tcolorPaint.ontouchstart = colorPaint.onmousedown;\r\n\r\n\t\t\tcolorPaint.__colorPaintSelectedPointer.onmousedown = colorPaint.onmousedown;\r\n\t\t\tcolorPaint.__colorPaintSelectedPointer.ontouchstart = colorPaint.ontouchstart;\r\n\t\t\t\r\n\t\t\tresolve(setTimeout(()=>{\r\n\t\t\t\tlet colorPaintRect = colorPaint.getBoundingClientRect();\r\n\t\t\t\tcolorPaint.width = colorPaintRect.width;\r\n\t\t\t\tcolorPaint.height = colorPaintRect.height;\r\n\t\r\n\t\t\t\tlet context = colorPaint.getContext('2d', { willReadFrequently: true } );\r\n                context.clearRect(0, 0, colorPaint.width, colorPaint.height);\r\n\r\n                let gradient = context.createLinearGradient(0, 2, 0, colorPaint.height - 2); \r\n\t\r\n\t\t\t\tgradient.addColorStop(0, 'rgb(255, 0, 0)') // red\r\n\t\t\t\tgradient.addColorStop(0.15, 'rgb(255, 0, 255)') // violet\r\n\t\t\t\tgradient.addColorStop(0.35, 'rgb(0, 0, 255)') // blue\r\n\t\t\t\tgradient.addColorStop(0.45, 'rgb(0, 255, 255)') // Sky blue\r\n\t\t\t\tgradient.addColorStop(0.65, 'rgb(0, 255, 0)') // green\r\n\t\t\t\tgradient.addColorStop(0.85, 'rgb(255, 255, 0)') // yellow\r\n\t\t\t\tgradient.addColorStop(0.9, 'orange')\r\n\t\t\t\tgradient.addColorStop(1, 'rgb(255, 0, 0)') // red\r\n\t\t\t\tcontext.fillStyle = gradient;\r\n\t\t\t\tcontext.fillRect(0, 0, colorPaint.width, colorPaint.height);\r\n\r\n\t\t\t\tif(this.#lastPaintPosition){\r\n\t\t\t\t\tcolorPaint.__colorPaintSelectedPointer.style.top = this.#lastPaintPosition.y + 'px';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcolorPaint.__colorPaintSelectedPointer.style.top = colorPaintRect.y + 'px';\r\n\t\t\t\t\tthis.#lastPaintPosition = colorPaintRect.y;\r\n\t\t\t\t}\r\n\t\t\t\tcolorPaint.__colorPaintSelectedPointer.style.left = colorPaintRect.x + 'px';\r\n\t\t\t\tcolorPaint.__colorPaintSelectedPointer.style.width = colorPaintRect.width + 'px';\r\n\t\t\t\tlet [r,g,b] = this.#blackOrWhite(...this.#lastPaintRgb);\r\n\t\t\t\tcolorPaint.__colorPaintSelectedPointer.children[0].style.border = `solid 1px rgb(${r}, ${g}, ${b})`\r\n\t\t\t},200));\r\n\t\t});\r\n\t}\r\n\r\n    #colorPaintMoveEvent(event){\r\n\t\tnew Promise(resolve => {\r\n\t\t\tlet {\r\n\t\t\t\ttopTextWrap, selectionRgbBg, previousRgbBg, \r\n\t\t\t\tcolorWrap, colorPanel, colorPaint, \r\n\t\t\t\tcolorBrightnessWrap, colorBrightness,\r\n\t\t\t\tbottomTextWrap, selectionRgbText, previousRgbText\r\n\t\t\t} = this.#componentMap;\r\n\t\t\tlet rect = colorPaint.getBoundingClientRect();\r\n\t\t\tlet pageY = this.#getEventXY(event).y;\r\n\r\n\t\t\tlet isTopOver = pageY < rect.top;\r\n\t\t\tlet isBottomOver = pageY > rect.bottom - 1;\r\n\r\n\t\t\tcolorPaint.__colorPaintSelectedPointer.style.top = pageY + 'px';\r\n\r\n\t\t\tlet {y : reProcessingRectY} = colorPaint.__colorPaintSelectedPointer.getBoundingClientRect();\r\n\t\t\t\r\n\t\t\tlet y = reProcessingRectY - rect.y\r\n\r\n\r\n\t\t\tlet isOver = false;\r\n\t\t\tif(isTopOver){\r\n\t\t\t\ty = 0;\r\n\t\t\t\treProcessingRectY = rect.top;\r\n\t\t\t\tisOver = true;\r\n\t\t\t}\r\n\t\t\tif(isBottomOver){\r\n\t\t\t\ty = rect.height - 1\r\n\t\t\t\treProcessingRectY = rect.bottom - 1\r\n\t\t\t\tisOver = true;\r\n\t\t\t}\r\n\r\n\t\t\tthis.#lastPaintPosition = {y: reProcessingRectY}\r\n\t\t\tlet context = colorPaint.getContext('2d', { willReadFrequently: true });\r\n\t\t\tlet r,g,b;\r\n\t\t\tif(isOver){\r\n\t\t\t\t[r,g,b] = [255, 0, 0];\r\n\t\t\t}else{\r\n\t\t\t\t[r,g,b] = context.getImageData(1, y, 1, 1).data;\r\n\t\t\t}\r\n\t\t\tthis.#lastPaintRgb = [r,g,b]\r\n\r\n\t\t\tcolorPaint.__colorPaintSelectedPointer.style.top = reProcessingRectY + 'px';\r\n\r\n\t\t\tlet blackOrWhite = this.#blackOrWhite(r,g,b);\r\n\r\n\t\t\tcolorPaint.__colorPaintSelectedPointer.children[0].style.border = `solid 1px rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`\r\n\r\n\t\t\tif(this.#a < 0.75){\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.children[0].style.border = 'solid 1px white';\r\n\t\t\t}else{\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.children[0].style.border = `solid 1px rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`;\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\r\n\t\t\tthis.#changeColorBrightness(colorBrightness.getContext('2d', { willReadFrequently: true }), [r,g,b]);\r\n\r\n\t\t\tthis.#changeColorPanel(colorPanel.getContext('2d', { willReadFrequently: true }));\r\n\t\t\tlet colorPanelRect = colorPanel.getBoundingClientRect();\r\n\t\t\tthis.#processingColorPanelSeleter(\r\n\t\t\t\tcolorPanel.__colorPanelSelected.getContext('2d', { willReadFrequently: true }),\r\n\t\t\t\tthis.#lastPanelPosition.x - colorPanelRect.x,\r\n\t\t\t\tthis.#lastPanelPosition.y - colorPanelRect.y,\r\n\t\t\t)\r\n\t\t\tthis.#colorPanelMoveEvent({x:this.#lastPanelPosition.x, y:this.#lastPanelPosition.y})\r\n\t\t\tresolve();\r\n\t\t})\r\n\t}\r\n\r\n    #settingColorBrightness(){\r\n\t\tnew Promise(resolve => {\r\n\t\t\tlet {\r\n\t\t\t\ttopTextWrap, selectionRgbBg, previousRgbBg, \r\n\t\t\t\tcolorWrap, colorPanel, colorPaint, \r\n\t\t\t\tcolorBrightnessWrap, colorBrightness,\r\n\t\t\t\tbottomTextWrap, selectionRgbText, previousRgbText\r\n\t\t\t} = this.#componentMap;\r\n\r\n\t\t\tcolorBrightness.onmousedown = (event) => {\r\n\t\t\t\tcolorBrightness.setAttribute('data-is_mouse_down', '');\r\n\t\t\t\tlet {x, y} = this.#getEventXY(event);\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.style.left = x + 'px';\r\n\t\t\t\tthis.#colorBrightnessMoveEvent(event);\r\n\t\t\t}\r\n\t\t\tcolorBrightness.ontouchstart = colorBrightness.onmousedown;\r\n\r\n\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.onmousedown = colorBrightness.onmousedown\r\n\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.ontouchstart = colorBrightness.onmousedown\r\n\t\t\t\r\n\t\t\tsetTimeout(() => {\r\n                let blackOrWhite = this.#blackOrWhite(this.#r, this.#g, this.#b);\r\n\t\t\t\tlet colorBrightnessRect = colorBrightness.getBoundingClientRect()\r\n\t\t\t\tcolorBrightness.width = colorBrightnessRect.width;\r\n\t\t\t\tcolorBrightness.height = colorBrightnessRect.height;\r\n\t\r\n\t\t\t\tlet context = colorBrightness.getContext('2d', { willReadFrequently: true });\r\n\t\t\t\tthis.#changeColorBrightness(context, [this.#r, this.#g, this.#b]);\r\n\r\n\t\t\t\tif(this.#lastBrightnessPosition){\r\n\t\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.style.left = this.#lastBrightnessPosition.x + 'px';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.style.left = colorBrightnessRect.right + 'px';\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.style.top = colorBrightnessRect.y + 'px';\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.style.height = colorBrightnessRect.height + 'px';\r\n                colorBrightness.__colorBrightnessSelectedPointer.children[0].style.border = `solid 1px rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`\r\n            }, 200)\r\n\t\t\t\r\n\t\t\tresolve();\r\n\t\t})\r\n\t}\r\n\r\n    #changeColorBrightness(context, [r = 255, g=0, b=0]){\r\n\t\tcontext.clearRect(0, 0, context.canvas.width, context.canvas.height);\r\n\t\tlet gradient = context.createLinearGradient(0, 0, context.canvas.width, 0) \r\n\t\tgradient.addColorStop(0, 'rgba(0,0,0,0)');\r\n\t\tgradient.addColorStop(1, `rgba(${r}, ${g}, ${b}, ${this.#a})`); // 페인트 컬러로 변경 필요\r\n\t\tcontext.fillStyle = gradient;\r\n\t\tcontext.fillRect(0, 0, context.canvas.width, context.canvas.height);\r\n\t}\r\n\r\n    #colorBrightnessMoveEvent(event){\r\n\t\tnew Promise(resolve=> {\r\n\t\t\tlet {\r\n\t\t\t\ttopTextWrap, selectionRgbBg, previousRgbBg, \r\n\t\t\t\tcolorWrap, colorPanel, colorPaint, \r\n\t\t\t\tcolorBrightnessWrap, colorBrightness,\r\n\t\t\t\tbottomTextWrap, selectionRgbText, previousRgbText\r\n\t\t\t} = this.#componentMap;\r\n\t\t\tlet rect = colorBrightness.getBoundingClientRect();\r\n\r\n\t\t\tlet {x:pageX, y:pageY} = this.#getEventXY(event);\r\n\r\n\t\t\tlet isLeftOver = pageX < rect.left;\r\n\t\t\tlet isRightOver = pageX > rect.right;\r\n\r\n\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.style.left = pageX + 'px';\r\n\r\n\t\t\tlet {x : reProcessingRectX} = colorBrightness.__colorBrightnessSelectedPointer.getBoundingClientRect();\r\n\t\t\t\r\n\t\t\tlet x = rect.x - reProcessingRectX\r\n\r\n\t\t\tif(isLeftOver){\r\n\t\t\t\tx = rect.x\r\n\t\t\t\treProcessingRectX = rect.x\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.style.left = rect.x + 'px'\r\n\t\t\t\tthis.#a = 0\r\n\t\t\t}else if(isRightOver){\r\n\t\t\t\tx = rect.right\r\n\t\t\t\treProcessingRectX = rect.right\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.style.left = rect.right + 'px';\r\n\t\t\t\tthis.#a = 1\r\n\t\t\t}else{\r\n\t\t\t\tthis.#a = ((reProcessingRectX - rect.x) / rect.width).toFixed(2)\r\n\t\t\t}\r\n\r\n\t\t\tlet blackOrWhite = this.#blackOrWhite(this.#r, this.#g, this.#b);\r\n\t\t\t\r\n\t\t\tselectionRgbBg.textContent = this.selectedColor;\r\n\t\t\tselectionRgbBg.style.background = this.selectedColor;\r\n\r\n\t\t\tselectionRgbText.style.color = this.selectedColor;\r\n\t\t\tthis.#applyExampleTextColor(selectionRgbText, this.selectedColor, blackOrWhite);\r\n\t\t\tif(this.#a < 0.75){\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.children[0].style.border = 'solid 1px white';\r\n\t\t\t}else{\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.children[0].style.border = `solid 1px rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`;\r\n\t\t\t}\r\n\r\n\t\t\tresolve()\r\n\t\t});\r\n\t}\r\n\r\n    #settingApplyEvent(palette, cancelButton, applyButton, selectionRgbText){\r\n\t\tcancelButton.onclick = () => {\r\n\t\t\tthis.close();\r\n\t\t\t//palette.remove();\r\n\t\t}\r\n\t\tapplyButton.onclick = (event) => {\r\n            this.applyCallback(event);\r\n\t\t}\r\n\t}\r\n\r\n    #processingPalettePosition(palette){\r\n\t\tif(this.#openPositionMode == Palette.OpenPositionMode.BUTTON){\r\n\t\t\tlet {x, y, height} = this.#openPosition.getBoundingClientRect();\r\n\t\t\t//let paletteWidthPx = document.documentElement.clientHeight * (this.#paletteVw / 100);\r\n\t\t\t//let paletteHeightPx = document.documentElement.clientHeight * (this.#paletteVh / 100);\r\n\t\t\tlet paletteHeightPx = palette.clientHeight;\r\n\t\t\tlet paletteTop = (y - paletteHeightPx)\r\n\t\t\tif(paletteTop > 0){\r\n\t\t\t\tpalette.style.top = paletteTop + 'px';\r\n\t\t\t}else{\r\n\t\t\t\tpalette.style.top = y + height + 'px';\r\n\t\t\t}\r\n\t\t\tpalette.style.left = x + 'px';\r\n\t\t}else if(this.#openPositionMode == Palette.OpenPositionMode.WRAPPER){\r\n\t\t\tthis.#openPosition.append(palette);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @see https://stackoverflow.com/a/3943023\r\n\t * @param  {...any} rgb \r\n\t * @returns \r\n\t */\r\n    #blackOrWhite(...rgb){\r\n\t\tlet [r,g,b] = rgb;\r\n\t\treturn (r * 0.299 + g * 0.587 + b * 0.114) > 186\r\n            ? [0, 0, 0]\r\n            : [255, 255, 255];\r\n\t}\r\n\r\n    #getEventXY(event){\r\n\t\tlet x;\r\n\t\tlet y;\r\n\t\tif(window.TouchEvent && event.constructor == window.TouchEvent){\r\n\t\t\tx = event.touches[0].pageX\r\n\t\t\ty = event.touches[0].pageY\r\n\t\t\tevent.preventDefault();\r\n\t\t}else{\r\n\t\t\tx = event.x\r\n\t\t\ty = event.y\r\n\t\t}\r\n\t\treturn {x,y};\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t * @param {HTMLElement} text \r\n\t * @param {String} color \r\n\t * @param {Array<Number>} blackOrWhite \r\n\t */\r\n\t#applyExampleTextColor(text, color, blackOrWhite){\r\n\t\tif(this.#exampleMode == Palette.ExampleMode.TEXT_COLOR){\r\n\t\t\ttext.style.color = color\r\n\t\t\tif(blackOrWhite && blackOrWhite.length != 0){\r\n\t\t\t\ttext.style.backgroundColor = `rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`\r\n\t\t\t}\r\n\t\t}else if(this.#exampleMode == Palette.ExampleMode.TEXT_BACKGROUND_COLOR){\r\n\t\t\ttext.style.backgroundColor = color\r\n\t\t\tif(blackOrWhite && blackOrWhite.length != 0){\r\n\t\t\t\ttext.style.color = `rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`\r\n\t\t\t}\r\n\t\t}else if(this.#exampleMode == Palette.ExampleMode.TEXT_UNDERLINE){\r\n\t\t\ttext.style.textDecoration = 'underline'\r\n\t\t\ttext.style.textDecorationColor = color\r\n\t\t\t\r\n\t\t\tif(blackOrWhite && blackOrWhite.length != 0){\r\n\t\t\t\ttext.style.color = `rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`\r\n\t\t\t\ttext.style.backgroundColor = 'rgba(255, 255, 255, 0.25)'\r\n\t\t\t\t/*if(blackOrWhite.filter(e=>e==255).length == 3){\r\n\t\t\t\t\ttext.style.backgroundColor = 'rgba(0, 0, 0, 0.3)'\r\n\t\t\t\t}else{\r\n\t\t\t\t\ttext.style.backgroundColor = 'rgba(255, 255, 255, 0.25)'\r\n\t\t\t\t}*/\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}else if(this.#exampleMode == Palette.ExampleMode.TEXT_LINE_THROUGH){\r\n\t\t\ttext.style.textDecoration = 'line-through'\r\n\t\t\ttext.style.textDecorationColor = color;\r\n\t\t\t\r\n\t\t\tif(blackOrWhite && blackOrWhite.length != 0){\r\n\t\t\t\ttext.style.color = `rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`\r\n\t\t\t\ttext.style.backgroundColor = 'rgba(255, 255, 255, 0.25)'\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n    get selectedColor(){\r\n\t\treturn `rgba(${this.#r}, ${this.#g}, ${this.#b}, ${this.#a})`;\r\n\t}\r\n\r\n    get palette(){\r\n        return this.#palette;\r\n    }\r\n\r\n    get isConnected(){\r\n        return this.#palette.isConnected;\r\n    }\r\n\r\n    set applyCallback(applyCallback){\r\n        this.#applyCallback = applyCallback;\r\n    }\r\n\r\n    get applyCallback(){\r\n        return this.#applyCallback;\r\n    }\r\n\r\n\tget style(){\r\n\t\treturn this.#style;\r\n\t}\r\n\r\n\tset style(style){\r\n        this.#style.textContent = style;\r\n    }\r\n\r\n\tset insertStyle(style){\r\n\t\tthis.#style.sheet.insertRule(style);\r\n\t}\r\n\r\n\tget r(){\r\n\t\treturn this.#r;\r\n\t}\r\n\tget g(){\r\n\t\treturn this.#g;\r\n\t}\r\n\tget b(){\r\n\t\treturn this.#b;\r\n\t}\r\n\tget a(){\r\n\t\treturn this.#a;\r\n\t}\r\n\r\n    reset(){\r\n\t\tthis.#r = 255;\r\n\t\tthis.#g = 0;\r\n\t\tthis.#b = 0;\r\n\t\tthis.#a = 1;\r\n\t\tthis.#lastPaintRgb = [255, 0, 0];\r\n\t\tthis.#lastPanelPosition = undefined;\r\n\t\tthis.#lastPaintPosition = undefined;\r\n\t\tthis.#lastBrightnessPosition = undefined;\r\n        this.#componentMap = undefined;\r\n        \r\n\t}\r\n\r\n    close(){\r\n        this.#palette.remove();\r\n    }\r\n\r\n    open(){\r\n        this.#componentMap = this.#createPaletteItems();\r\n        document.body.append(this.#palette);\r\n        this.#createPalette(this.#palette, this.#componentMap);\r\n        this.#processingPalettePosition(this.#palette);\r\n    }\r\n\r\n    createStyle(){\r\n\t\t//position: fixed; 제거 20230517\r\n\t\tthis.#style.textContent = `\r\n\t\t\t.palette-wrap{\r\n\t\t\t\tbackground: #343434;\r\n\t\t\t\tpadding: 0.9%;\r\n\t\t\t\twidth: 35dvw;\r\n\t\t\t\theight: fit-content;\r\n\t\t\t\tcolor: white;\r\n\t\t\t\tfont-size: 0.9rem;\r\n\t\t\t\tz-index: 999;\r\n\t\t\t\tmin-width: 20vmax;\r\n\t\t\t\t-webkit-user-select: none;\r\n\t\t\t\t-moz-user-select: none;\r\n\t\t\t\t-ms-user-select: none;\r\n\t\t\t\tuser-select: none;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .palette-panel{\r\n\t\t\t\twidth: 90%;\r\n\t\t\t\tposition: relative;\r\n\t\t\t}\r\n\r\n\t\t\t/* 상단 텍스트 영역 [S] */\r\n\t\t\t.palette-wrap .top-text-wrap{\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\tmargin-bottom: 2%;\r\n\t\t\t\theight: 8%;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .top-text-wrap .selection-rgb-bg{\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\ttext-align-last: center;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\ttext-wrap: nowrap;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .top-text-wrap .previous-rgb-bg{\r\n\t\t\t\ttext-align-last: center;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\twidth: 11.5%;\r\n\t\t\t}\r\n\t\t\t/* 상단 텍스트 영역 [E] */\r\n\r\n\t\t\t/* 컬러 영역 영역 [S] */\r\n\t\t\t.palette-wrap .color-wrap{\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\tmargin-bottom: 2%;\r\n\t\t\t}\r\n\r\n\t\t\t.palette-wrap .color-wrap .panel-selected{\r\n\t\t\t\tposition: fixed;\r\n\t\t\t\tz-index: 9000;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .color-wrap .panel-selected-pointer{\r\n\t\t\t\tposition: fixed;\r\n\t\t\t\twidth: 1px;\r\n\t\t\t\theight: 1px;\r\n\t\t\t}\r\n\r\n\t\t\t.palette-wrap .color-wrap .palette-paint{\r\n\t\t\t\twidth: 5%;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .color-wrap .paint-selected-pointer{\r\n\t\t\t\tposition: fixed;\r\n\t\t\t\theight: 1px;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\tbackground-color: #faebd700;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .color-wrap .paint-selected-pointer-child{\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tborder: solid 1px;\r\n\t\t\t\theight: 2px;\r\n\t\t\t\twidth: inherit;\r\n\t\t\t}\r\n\t\t\t/* 컬러 영역 영역 [E] */\r\n\r\n\t\t\t/* 투명도 영역 [S] */\r\n\t\t\t.palette-wrap .brightness-wrap{\r\n\t\t\t\tmargin-bottom: 2%;\r\n\t\t\t\tbackground-image: /* tint image */ linear-gradient(to right, rgb(192 192 192 / 20%), rgb(192 192 192 / 20%)), /* checkered effect */ linear-gradient(to right, #505050 50%, #a1a1a1 50%), linear-gradient(to bottom, #505050 50%, #a1a1a1 50%);\r\n\t\t\t\tbackground-blend-mode: normal, difference, normal;\r\n\t\t\t\tbackground-size: 2em 2em;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .brightness-wrap .brightness-color{\r\n\t\t\t\theight: 2vh;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tmin-height: 17px;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .brightness-wrap .brightness-selected-pointer{\r\n\t\t\t\tposition: fixed;\r\n\t\t\t\twidth: 1px;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\tbackground-color: #faebd700;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .brightness-wrap .brightness-selected-pointer-child{\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tborder: solid 1px;\r\n\t\t\t\theight: inherit;\r\n\t\t\t\twidth: 2px;\r\n\t\t\t\tbackground: inherit;\r\n\t\t\t}\r\n\t\t\t/* 투명도 영역 [E] */\r\n\r\n\t\t\t/* 하단 텍스트 영역 [S] */\r\n\t\t\t.palette-wrap .bottom-text-wrap{\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tmargin-bottom: 2%;\r\n\t\t\t\ttext-wrap: nowrap;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .bottom-text-wrap .selection-rgb-text{\r\n\t\t\t\tmargin-right: 5%;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .bottom-text-wrap .selection-rgb-text, .palette-wrap .bottom-text-wrap .previous-rgb-text{\r\n\t\t\t\toverflow-x: hidden;\r\n\t\t\t\tmax-width: 40%;\r\n\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\twidth: fit-content;\r\n\t\t\t\tbackground: rgba(255, 255, 255, 0.25);\r\n\t\t\t\tcolor: rgba(255, 255, 255, 0.25);\r\n\t\t\t}\r\n\t\t\t.palette-wrap .bottom-text-wrap .selection-rgb-text *, .palette-wrap .bottom-text-wrap .previous-rgb-text *{\r\n\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\toverflow-x: hidden;\r\n\t\t\t}\r\n\t\t\t/* 하단 텍스트 영역 [E] */\r\n\r\n\t\t\t/* 버튼 영역 [S] */\r\n\t\t\t.palette-wrap .button-wrap {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-around;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .cancel-button, .palette-wrap .apply-button{\r\n\t\t\t\tbackground: none;\r\n\t\t\t\tborder: revert;\r\n\t\t\t\tcolor: #b9b9b9;\r\n\t\t\t\tborder-color: #464646;\r\n\t\t\t}\r\n\t\t\t/* 버튼 영역 [E] */\r\n\t\t`;\r\n\t\treturn this.#style;\r\n\t}\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport Palette from \"../component/Palette\"\r\n\r\nexport default class Color extends FreedomInterface {\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-color-style'\r\n\t});\r\n\r\n\tstatic palette;\r\n\tstatic isDefaultStyle = true;\r\n\tstatic{\r\n\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-color';\r\n\t\t\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: 'C',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Font Color'\r\n        });\r\n\r\n\t\tthis.palette = new Palette({\r\n            openPositionMode: Palette.OpenPositionMode.BUTTON, \r\n            openPosition : this.toolHandler.toolButton\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else if(this.palette.isConnected){\r\n\t\t\t\tthis.palette.close();\r\n\t\t\t}else{\r\n\t\t\t\tthis.palette.open();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.palette.applyCallback = (event) => {\r\n\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active'\r\n\t\t\tthis.palette.close();\r\n\t\t}\r\n\r\n\t\tsuper.outClickElementListener(this.palette.palette, ({oldEvent, newEvent, isMouseOut})=>{\r\n\t\t\tif(isMouseOut && this.palette.palette.isConnected && ! super.isMouseInnerElement(this.toolHandler.toolButton)){\r\n\t\t\t\tthis.palette.close();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Color, dataset);\r\n\t\tif( ! dataset && Object.entries(this.dataset).length == 0){\r\n\t\t\tthis.dataset.rgba = Color.palette.r + ',' + Color.palette.g + ',' + Color.palette.b + ',' + Color.palette.a;\r\n\t\t}\r\n\t\tthis.style.color = `rgba(${this.dataset.rgba})`;\r\n\t}\r\n\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport Palette from \"../component/Palette\"\r\n\r\nexport default class Background extends FreedomInterface {\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-background-style'\r\n\t});\r\n\r\n\tstatic palette;\r\n\r\n\tstatic isDefaultStyle = true;\r\n\r\n\tstatic{\r\n\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-background';\r\n\t\t\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: 'G',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Background Color'\r\n        });\r\n\r\n\t\tthis.palette = new Palette({\r\n            openPositionMode: Palette.OpenPositionMode.BUTTON, \r\n            openPosition: this.toolHandler.toolButton,\r\n\t\t\texampleMode: Palette.ExampleMode.TEXT_BACKGROUND_COLOR\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else if(this.palette.isConnected){\r\n\t\t\t\tthis.palette.close();\r\n\t\t\t}else{\r\n\t\t\t\tthis.palette.open();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.palette.applyCallback = (event) => {\r\n\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active'\r\n\t\t\tthis.palette.close();\r\n\t\t}\r\n\r\n\t\tsuper.outClickElementListener(this.palette.palette, ({oldEvent, newEvent, isMouseOut})=>{\r\n\t\t\tif(isMouseOut && this.palette.palette.isConnected && ! super.isMouseInnerElement(this.toolHandler.toolButton)){\r\n\t\t\t\tthis.palette.close();\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Background, dataset);\r\n\r\n\t\tif( ! dataset && Object.entries(this.dataset).length == 0){\r\n\t\t\tthis.dataset.rgba = Background.palette.r + ',' + Background.palette.g + ',' + Background.palette.b + ',' + Background.palette.a;\r\n\t\t}\r\n\t\tthis.style.backgroundColor = `rgba(${this.dataset.rgba})`;\r\n\t}\r\n\r\n\r\n\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport Palette from \"../component/Palette\"\r\n\r\nexport default class Strikethrough extends FreedomInterface {\r\n\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-strikethrough-style'\r\n\t});\r\n\r\n    static palette;\r\n\tstatic isDefaultStyle = true;\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-strikethrough';\r\n\t\t\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: 'S',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Strikethrough'\r\n        });\r\n\r\n\t\tthis.palette = new Palette({\r\n            openPositionMode: Palette.OpenPositionMode.BUTTON, \r\n            openPosition: this.toolHandler.toolButton,\r\n\t\t\texampleMode: Palette.ExampleMode.TEXT_LINE_THROUGH\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else if(this.palette.isConnected){\r\n\t\t\t\tthis.palette.close();\r\n\t\t\t}else{\r\n\t\t\t\tthis.palette.open();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.palette.applyCallback = (event) => {\r\n\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active'\r\n\t\t\tthis.palette.close();\r\n\t\t}\r\n\r\n\t\tsuper.outClickElementListener(this.palette.palette, ({oldEvent, newEvent, isMouseOut})=>{\r\n\t\t\tif(isMouseOut && this.palette.palette.isConnected && ! super.isMouseInnerElement(this.toolHandler.toolButton)){\r\n\t\t\t\tthis.palette.close();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t\ttext-decoration: 1px line-through;\r\n\t\t\t\ttext-decoration-color: #404040;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Strikethrough, dataset);\r\n\t\tif( ! dataset && Object.entries(this.dataset).length == 0){\r\n\t\t\tthis.dataset.rgba = Strikethrough.palette.r + ',' + Strikethrough.palette.g + ',' + Strikethrough.palette.b + ',' + Strikethrough.palette.a;\r\n\t\t}\r\n\r\n\t\tthis.style.textDecoration = `line-through rgba(${this.dataset.rgba}) 1px`;\r\n\t}\r\n\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport Palette from \"../component/Palette\"\r\n\r\nexport default class Underline extends FreedomInterface {\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-underline-style'\r\n\t});\r\n\r\n\tstatic palette;\r\n\tstatic isDefaultStyle = true;\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-underline';\r\n\t\t\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: 'U',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Underline'\r\n        });\r\n\r\n\t\tthis.palette = new Palette({\r\n            openPositionMode: Palette.OpenPositionMode.BUTTON, \r\n            openPosition: this.toolHandler.toolButton,\r\n\t\t\texampleMode: Palette.ExampleMode.TEXT_UNDERLINE\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else if(this.palette.isConnected){\r\n\t\t\t\tthis.palette.close();\r\n\t\t\t}else{\r\n\t\t\t\tthis.palette.open();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.palette.applyCallback = (event) => {\r\n\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active'\r\n\t\t\tthis.palette.close();\r\n\t\t}\r\n\r\n\t\tsuper.outClickElementListener(this.palette.palette, ({oldEvent, newEvent, isMouseOut})=>{\r\n\t\t\tif(isMouseOut && this.palette.palette.isConnected && ! super.isMouseInnerElement(this.toolHandler.toolButton)){\r\n\t\t\t\tthis.palette.close();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t\ttext-decoration: 1px underline;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} {\r\n\t\t\t\twidth: fit-content;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tconstructor(dataset, {isDefaultStyle = true} = {}){\r\n\t\tsuper(Underline, dataset);\r\n\t\tif( ! dataset && Object.entries(this.dataset).length == 0){\r\n\t\t\tthis.dataset.rgba = Underline.palette.r + ',' + Underline.palette.g + ',' + Underline.palette.b + ',' + Underline.palette.a;\r\n\t\t}\r\n\t\tthis.style.borderBottom = `solid 2px rgba(${this.dataset.rgba})`\r\n\t\t//this.style.backgroundImage = `linear-gradient(to right, rgba(${this.dataset.rgba}), rgba(${this.dataset.rgba}))`\r\n\t\t//this.style.textDecoration = `underline rgba(${this.dataset.rgba}) 1px`;\r\n\t}\r\n\r\n}","export default class FontFamilyBox {\r\n    \r\n    #style = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-font-family-box'\r\n\t});\r\n\r\n    #fontFamilyBoxVw = 20;\r\n\r\n    #fontList = [];\r\n    #fontFamilyBox = Object.assign(document.createElement('div'), {\r\n        className: 'font-box-wrap',\r\n    })\r\n    #fontFamilyBoxContainer = Object.assign(document.createElement('ul'), {\r\n        className: 'font-box-container'\r\n    })\r\n    /*\r\n    #searchInputText = Object.assign(document.createElement('input'), {\r\n        autocomplete: 'off',\r\n        placeholder: 'search font',\r\n        type: 'text',\r\n        name: 'font-box-search',\r\n        className: 'font-box-search'\r\n    })\r\n    */\r\n    #fontElementList = [];\r\n    #selectedFont;\r\n\r\n    #defaultSampleText = '가나 다라 ab cd'\r\n    #sampleText = this.#defaultSampleText;\r\n\r\n    #applyCallback = () => {}\r\n\r\n    constructor(fontList){\r\n        if( ! fontList){\r\n            throw new Error('fontList is undefined');\r\n        }\r\n        this.#fontList = fontList;\r\n\r\n        let style = document.querySelector(`#${this.#style.id}`);\r\n        if(! style){\r\n            document.head.append(this.createStyle());\r\n        }else{\r\n            this.#style = style;\r\n        }\r\n\r\n        /*\r\n        let searchWrap = Object.assign(document.createElement('div'),{\r\n            className: 'font-box-search-wrap'\r\n        });\r\n        searchWrap.append(this.#searchInputText);\r\n        \r\n        this.#fontFamilyBox.append(searchWrap, this.#fontFamilyBoxContainer);\r\n        */\r\n        this.#fontFamilyBox.append(this.#fontFamilyBoxContainer);\r\n\r\n    }\r\n\r\n    searchInputTextEvent(event){\r\n        \r\n    }\r\n\r\n    #addFontItemEvent(item){\r\n        return new Promise(res=>{\r\n            item.onclick = (event) => {\r\n                this.#selectedFont = item;\r\n                this.applyCallback(event);\r\n            }\r\n            res(item);\r\n        })\r\n    }\r\n\r\n    #createFontElementList(sampleText){\r\n        return new Promise(resolve=> {\r\n            const createFontItem = () => {\r\n                let li = Object.assign(document.createElement('li'),{\r\n                    className: 'font-family-item',\r\n                });\r\n                if(sampleText.nodeType && sampleText.nodeType == Node.ELEMENT_NODE){\r\n                    li.innerHTML = sampleText.innerHTML;\r\n                }else{\r\n                    li.textContent = sampleText;\r\n                }\r\n                this.#addFontItemEvent(li)\r\n                return li;\r\n            }\r\n            this.#fontElementList = this.#fontList.map(fontFamily=>{\r\n                let li = createFontItem();\r\n                li.style.fontFamily = fontFamily;\r\n                return li;\r\n            });\r\n\r\n            let defaultFont = createFontItem();\r\n            this.#fontElementList.push(defaultFont)\r\n\r\n            resolve(this.#fontElementList);\r\n        })\r\n    }\r\n\r\n    async open(){\r\n        let selection = window.getSelection();\r\n        if(selection.rangeCount != 0 && selection.isCollapsed == false){\r\n            let range = selection.getRangeAt(0)\r\n            let aticle = document.createElement('aticle');\r\n            let rangeClone = range.cloneContents();\r\n            aticle.append(rangeClone);\r\n            this.#sampleText = aticle;\r\n        }\r\n        this.#sampleText = this.#sampleText == '' ? this.#defaultSampleText : this.#sampleText;\r\n    \r\n        document.body.append(this.#fontFamilyBox);\r\n\r\n        return await this.#createFontElementList(this.#sampleText).then(fontElementList => {\r\n            this.#fontFamilyBoxContainer.replaceChildren(...fontElementList);\r\n            return this.#fontFamilyBoxContainer;\r\n        });\r\n        \r\n    }\r\n    close(){\r\n        this.#fontFamilyBox.remove();\r\n    }\r\n\r\n    set applyCallback(applyCallback){\r\n        this.#applyCallback = applyCallback;\r\n    }\r\n\r\n    get applyCallback(){\r\n        return this.#applyCallback;\r\n    }\r\n\r\n    get fontFamilyBox(){\r\n        return this.#fontFamilyBox;\r\n    }\r\n\r\n    get selectedFont(){\r\n        return this.#selectedFont;\r\n    }\r\n\r\n\tget style(){\r\n\t\treturn this.#style;\r\n\t}\r\n\r\n\tset style(style){\r\n        this.#style.textContent = style;\r\n    }\r\n\r\n\tset insertStyle(style){\r\n\t\tthis.#style.sheet.insertRule(style);\r\n\t}\r\n\r\n\r\n    createStyle(){\r\n        this.#style.textContent = `\r\n            .font-box-wrap{\r\n                background: #000000bf;\r\n                position: fixed;\r\n\t\t\t\tpadding: 0.9%;\r\n\t\t\t\twidth: ${this.#fontFamilyBoxVw}vw;\r\n                height: 25vh;\r\n\t\t\t\tcolor: white;\r\n\t\t\t\tfont-size: 13px;\r\n\t\t\t\tmin-width: 300px;\r\n                overflow-y: auto;\r\n\t\t\t\t-webkit-user-select:none;\r\n\t\t\t\t-moz-user-select:none;\r\n\t\t\t\t-ms-user-select:none;\r\n\t\t\t\tuser-select:none;\r\n                z-index: 999;\r\n            }\r\n            .font-box-wrap .font-box-container{\r\n                list-style-type: none;\r\n                padding: 0;\r\n                margin: 0;\r\n            }\r\n            .font-box-wrap .font-family-item{\r\n                margin-bottom: 1%;\r\n            }\r\n            .font-box-wrap .font-family-item:hover{\r\n                background-color: #747474;\r\n                cursor: pointer;\r\n            }\r\n\r\n        `\r\n        return this.#style;\r\n    }\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport FontFamilyBox from \"../component/FontFamilyBox\";\r\n\r\nexport default class FontFamily extends FreedomInterface {\r\n    static toolHandler = new ToolHandler(this);\r\n\r\n    static #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-font-family-style'\r\n\t});\r\n\r\n    static fontFamilyBox;\r\n\r\n    static #fontList = [\r\n        'Arial, Helvetica, Sans-Serif',\r\n        'Arial Black, Gadget, Sans-Serif',\r\n        'Comic Sans MS, Textile, Cursive',\r\n        'Courier New, Courier, Monospace',\r\n        'Georgia, Times New Roman, Times, Serif',\r\n        'Impact, Charcoal, Sans-Serif',\r\n        'Lucida Console, Monaco, Monospace',\r\n        'Lucida Sans Unicode, Lucida Grande, Sans-Serif',\r\n        'Palatino Linotype, Book Antiqua, Palatino, Serif',\r\n        'Tahoma, Geneva, Sans-Serif',\r\n        'Times New Roman, Times, Serif',\r\n        'Trebuchet MS, Helvetica, Sans-Serif',\r\n        'Verdana, Geneva, Sans-Serif',\r\n        'MS Sans Serif, Geneva, Sans-Serif',\r\n        'MS Serif, New York, Serif'\r\n    ]\r\n    static isDefaultStyle = true;\r\n    static{\r\n        \r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-font-family';\r\n\t\t\r\n        this.fontFamilyBox = new FontFamilyBox(this.#fontList);\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: 'F',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n            title: 'Font Family'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else if(this.fontFamilyBox.fontFamilyBox.isConnected){\r\n\t\t\t\tthis.fontFamilyBox.close();\r\n\t\t\t}else{\r\n\t\t\t\tthis.fontFamilyBox.open().then(fontFamilyBoxContainer=>{\r\n\t\t\t\t    super.processingElementPosition(this.fontFamilyBox.fontFamilyBox, this.toolHandler.toolButton);\r\n                });\r\n\t\t\t}\r\n\t\t}\r\n\r\n        this.fontFamilyBox.applyCallback = (event) => {\r\n\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active'\r\n\t\t\tthis.fontFamilyBox.close();\r\n\t\t}\r\n\r\n        document.addEventListener(\"scroll\", () => {\r\n\t\t\tif(this.fontFamilyBox.fontFamilyBox.isConnected){\r\n                super.processingElementPosition(this.fontFamilyBox.fontFamilyBox, this.toolHandler.toolButton);\r\n\t\t\t}\r\n\t\t});\r\n        window.addEventListener('resize', (event) => {\r\n            if(this.fontFamilyBox.fontFamilyBox.isConnected){\r\n                this.fontFamilyBox.open().then(fontFamilyBoxContainer=>{\r\n                    super.processingElementPosition(this.fontFamilyBox.fontFamilyBox, this.toolHandler.toolButton);\r\n                });\r\n            }\r\n\t\t})\r\n\r\n\t\tsuper.outClickElementListener(this.fontFamilyBox.fontFamilyBox, ({oldEvent, newEvent, isMouseOut})=>{\r\n\t\t\tif(isMouseOut && this.fontFamilyBox.fontFamilyBox.isConnected && ! super.isMouseInnerElement(this.toolHandler.toolButton)){\r\n                this.fontFamilyBox.close();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n    static createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n            .${this.#defaultStyle.id}-button{\r\n                font-size: 0.8rem;\r\n            }\r\n        `\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n    static get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(FontFamily, dataset);\r\n\t\tif( ! dataset && Object.entries(this.dataset).length == 0){\r\n            this.dataset.font_family = FontFamily.fontFamilyBox.selectedFont?.style.fontFamily;\r\n        }\r\n        this.style.fontFamily = this.dataset.font_family\r\n    }\r\n\t\r\n}\r\n","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\n\r\nexport default class Quote extends FreedomInterface {\r\n\t//static extendsElement = 'strong';\r\n\t//static defaultClass = 'line';\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-quote-style'\r\n\t});\r\n\tstatic isDefaultStyle = true;\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-quote';\r\n\t\tthis.toolHandler.isInline = false;\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: 'Q',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Quote'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else{\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tpadding-left: 0.5em;\r\n\t\t\t\tborder-left: 3px solid #d7d7db;\r\n\t\t\t\tmargin-inline: 1.5em;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tparentLine;\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Quote, dataset, {deleteOption : FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE});\r\n\r\n\t\t/*\r\n\t\tsuper.connectedAfterOnlyOneCallback = () => {\r\n\t\t\tthis.dataset.index = Quote.toolHandler.connectedFriends.length;\r\n\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tthis.parentEditor.createLine();\r\n\t\t\t}else{\r\n\t\t\t\tnextLine.line.lookAtMe();\r\n\t\t\t}\r\n\t\t}\r\n\r\n        super.disconnectedChildAfterCallback = () => {\r\n\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tthis.parentEditor.createLine();\r\n\t\t\t}\r\n        }\r\n\t\t*/\r\n\t}\r\n\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\n\r\nexport default class NumericPoint extends FreedomInterface {\r\n\t//static extendsElement = 'strong';\r\n\t//static defaultClass = 'line';\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\t\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-numeric-point-style'\r\n\t});\r\n\tstatic isDefaultStyle = true;\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-numeric-point';\r\n\t\tthis.toolHandler.isInline = false;\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: '1.',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Numeric Point'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else{\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n    //list-style-type: disc;\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tmargin-inline: 1.3em;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} > * {\r\n\t\t\t\tmargin-inline: 1.3em;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} > *:before{\r\n\t\t\t\tcontent: attr(data-order)\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\t\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tparentLine;\r\n\t\r\n\tconstructor(dataset){\r\n\t\tsuper(NumericPoint, dataset, {deleteOption : FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE});\r\n\t\tsuper.connectedChildAfterCallback = (list) => {\r\n\t\t\tnew Promise(r=>{\r\n\t\t\t\t[...this.children].forEach((e,i)=>{\r\n\t\t\t\t\te.dataset.order = (i + 1) + '. ';\r\n\t\t\t\t});\r\n\t\t\t\tr();\r\n\t\t\t});\r\n\t\t\tlet lastItem = list.at(-1);\r\n\t\t\tif(lastItem.nodeType == Node.ELEMENT_NODE){\r\n\t\t\t\tlet inter = setInterval(()=>{\r\n\t\t\t\t\tif(lastItem.isConnected){\r\n\t\t\t\t\t\tclearInterval(inter);\r\n\t\t\t\t\t\twindow.getSelection().setPosition(lastItem, lastItem.childNodes.length)\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 50);\r\n\t\t\t}else if(lastItem.nodeType == Node.TEXT_NODE){\r\n\t\t\t\tlet inter = setInterval(()=>{\r\n\t\t\t\t\tif(lastItem.isConnected){\r\n\t\t\t\t\t\tclearInterval(inter);\r\n\t\t\t\t\t\twindow.getSelection().setPosition(lastItem, lastItem.length)\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 50);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\tsuper.connectedAfterOnlyOneCallback = () => {\r\n\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tthis.parentEditor.createLine();\r\n\t\t\t}else{\r\n\t\t\t\tnextLine.line.lookAtMe();\r\n\t\t\t}\r\n\t\t}\r\n\t\t/*\r\n\t\tsuper.disconnectedChildAfterCallback = (removedNodes) => {\r\n\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tthis.parentEditor.createLine();\r\n\t\t\t}\r\n        }\r\n\t\t*/\r\n\t}\r\n\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\n\r\nexport default class BulletPoint extends FreedomInterface {\r\n\t//static extendsElement = 'strong';\r\n\t//static defaultClass = 'line';\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\t\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-bullet-point-style'\r\n\t});\r\n\tstatic isDefaultStyle = true;\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-bullet-point';\r\n\t\tthis.toolHandler.isInline = false;\r\n\t\t\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: '●',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Bullet Point'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else{\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\r\n\t\t\t.${this.toolHandler.defaultClass} {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tpadding-left: 1em;\r\n\t\t\t\tmargin-inline: 2.5em;\r\n\t\t\t\tlist-style-type: disc;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} > *{\r\n\t\t\t\tdisplay: list-item;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\t\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tparentLine;\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(BulletPoint, dataset, {deleteOption : FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE});\r\n\t\t/*\r\n\t\tsuper.connectedAfterOnlyOneCallback = () => {\r\n\t\t\tthis.dataset.index = BulletPoint.toolHandler.connectedFriends.length;\r\n\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tthis.parentEditor.createLine();\r\n\t\t\t}else{\r\n\t\t\t\tnextLine.line.lookAtMe();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsuper.disconnectedChildAfterCallback = (removedNodes) => {\r\n\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tthis.parentEditor.createLine();\r\n\t\t\t}\r\n        }\r\n\t\t*/\r\n\t}\r\n\r\n}","export default class SortBox {\r\n    \r\n    #style = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-sort-box'\r\n\t});\r\n\r\n    #sortBox = Object.assign(document.createElement('div'), {\r\n        className: 'sort-box-wrap',\r\n    })\r\n\r\n    #sortBoxContainer = Object.assign(document.createElement('ul'),{\r\n        className: 'sort-box-container',\r\n    })\r\n\r\n    #sortBoxItems = [/*'left',*/ 'center', 'right'].map(e=>Object.assign(document.createElement('li'),{\r\n        textContent: e,\r\n    }));\r\n\r\n    #selectedSort;\r\n\r\n    #applyCallback = () => {}\r\n    \r\n    constructor(){\r\n        let style = document.querySelector(`#${this.#style.id}`);\r\n        \r\n        if(! style){\r\n            document.head.append(this.createStyle());\r\n        }else{\r\n            this.#style = style;\r\n        }\r\n\r\n        this.#sortBox.append(this.#sortBoxContainer);\r\n        this.#sortBoxContainer.replaceChildren(...this.#sortBoxItems);\r\n        this.#sortBoxItems.forEach(e=>{\r\n            e.onclick = (event) => {\r\n                this.#selectedSort = e; \r\n                this.applyCallback(event);\r\n            }\r\n        });\r\n    }\r\n\r\n    open(){\r\n        document.body.append(this.#sortBox);\r\n    }\r\n\r\n    close(){\r\n        this.#sortBox.remove();\r\n    }\r\n\r\n    set applyCallback(applyCallback){\r\n        this.#applyCallback = applyCallback;\r\n    }\r\n\r\n    get applyCallback(){\r\n        return this.#applyCallback;\r\n    }\r\n\r\n    get sortBox(){\r\n        return this.#sortBox;\r\n    }\r\n\r\n    get selectedSort(){\r\n        return this.#selectedSort;\r\n    }\r\n\r\n\tget style(){\r\n\t\treturn this.#style;\r\n\t}\r\n\r\n\tset style(style){\r\n        this.#style.textContent = style;\r\n    }\r\n\r\n\tset insertStyle(style){\r\n\t\tthis.#style.sheet.insertRule(style);\r\n\t}\r\n    \r\n    \r\n    createStyle(){\r\n        this.#style.textContent = `\r\n            .sort-box-wrap {\r\n                background: #000000bf;\r\n                position: fixed;\r\n                padding: 0.9%;\r\n                height: fit-content;\r\n                color: white;\r\n                font-size: 13px;\r\n                min-width: 85px;\r\n                -webkit-user-select: none;\r\n                -moz-user-select: none;\r\n                -ms-user-select: none;\r\n                user-select: none;\r\n                z-index: 999;\r\n            }\r\n            .sort-box-wrap .sort-box-container {\r\n                list-style-type: none;\r\n                padding: 0;\r\n                margin: 0;\r\n                display: flex;\r\n                gap: 1vw;\r\n            }\r\n            \r\n            .sort-box-wrap .sort-box-container li{\r\n                transition: all 0.5s;\r\n                padding: 1% 2% 1% 2%;\r\n                margin-right: 1vw;\r\n            }\r\n            .sort-box-wrap .sort-box-container li:hover{\r\n                background-color: #95959591;\r\n                cursor: pointer;\r\n            }\r\n\r\n        `\r\n        return this.#style;\r\n    }\r\n\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport SortBox from \"../component/SortBox\";\r\n\r\nexport default class Sort extends FreedomInterface {\r\n    static toolHandler = new ToolHandler(this);\r\n\t\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-index-style'\r\n\t});\r\n\r\n    static sortBox; \r\n\tstatic isDefaultStyle = true;\r\n    static{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-index';\r\n\t\tthis.toolHandler.isInline = false;\r\n\r\n        this.sortBox = new SortBox();\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: 'Ξ',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'align'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else if(this.sortBox.sortBox.isConnected){\r\n\t\t\t\tthis.sortBox.close();\r\n\t\t\t}else{\r\n\t\t\t\tthis.sortBox.open();\r\n                super.processingElementPosition(this.sortBox.sortBox, this.toolHandler.toolButton);\r\n\t\t\t}\r\n\t\t}\r\n\r\n        this.sortBox.applyCallback = (event) => {\r\n\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active'\r\n\t\t\tthis.sortBox.close();\r\n\t\t}\r\n\r\n        document.addEventListener(\"scroll\", () => {\r\n\t\t\tif(this.sortBox.sortBox.isConnected){\r\n\t\t\t\tthis.toolHandler.processingPalettePosition(this.sortBox.sortBox);\r\n\t\t\t}\r\n\t\t});\r\n        window.addEventListener('resize', (event) => {\r\n            if(this.sortBox.sortBox.isConnected){\r\n                this.sortBox.open();\r\n                super.processingElementPosition(this.sortBox.sortBox, this.toolHandler.toolButton);\r\n            }\r\n\t\t})\r\n\r\n\t\tsuper.outClickElementListener(this.sortBox.sortBox, ({oldEvent, newEvent, isMouseOut})=>{\r\n\t\t\tif(isMouseOut && this.sortBox.sortBox.isConnected && ! super.isMouseInnerElement(this.toolHandler.toolButton)){\r\n\t\t\t\tthis.sortBox.close();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n    static createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\r\n            .${this.toolHandler.defaultClass} {\r\n                display: block;\r\n            }\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n    static get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Sort, dataset, {deleteOption : FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE});\r\n\r\n\t\tif( ! dataset && Object.entries(this.dataset).length == 0){\r\n            this.dataset.text_align = Sort.sortBox.selectedSort?.textContent;\r\n        }\r\n        this.style.textAlign = this.dataset.text_align;\r\n\r\n\t\t/*\r\n\t\tsuper.connectedAfterOnlyOneCallback = () => {\r\n\t\t\tthis.dataset.index = Sort.toolHandler.connectedFriends.length;\r\n\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tthis.parentEditor.createLine();\r\n\t\t\t}else{\r\n\t\t\t\tnextLine.line.lookAtMe();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsuper.disconnectedChildAfterCallback = (removedNodes) => {\r\n\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tthis.parentEditor.createLine();\r\n\t\t\t}\r\n        }\r\n\t\t*/\r\n\t}\r\n\r\n}","export default class FontSizeBox {\r\n    \r\n    #style = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-font-size-box'\r\n\t});\r\n\r\n    #fontSizeBoxVw = 30;\r\n\r\n    #fontSizeBox = Object.assign(document.createElement('div'), {\r\n        className: 'font-size-wrap',\r\n    })\r\n    #fontSizeBoxContainer = Object.assign(document.createElement('ul'), {\r\n        className: 'font-size-container'\r\n    })\r\n    \r\n    #searchInputText = Object.assign(document.createElement('input'), {\r\n        autocomplete: 'off',\r\n        placeholder: 'search your font size',\r\n        type: 'number',\r\n        name: 'font-size-search',\r\n        className: 'font-size-search',\r\n        oninput: (event) => this.#searchInputTextEvent(event),\r\n        onkeyup: (event) => {\r\n            if(event.key == 'Enter' && this.#searchInputText.value != ''){\r\n                let item = this.#fontSizeBoxContainer.querySelector(`[data-size=\"${this.#searchInputText.value}\"]`);\r\n                this.#apply(item, event);\r\n            }\r\n        },\r\n    })\r\n\r\n    #selectedFont;\r\n\r\n    #defaultSampleText = '가나 다라 ab cd'\r\n    #sampleText = this.#defaultSampleText;\r\n\r\n    #applyCallback = () => {}\r\n\r\n    #lastSelectionRange;\r\n\r\n    #fontSizeObject;\r\n\r\n    constructor(fontSizeObject){\r\n        this.#fontSizeObject = fontSizeObject\r\n        let style = document.querySelector(`#${this.#style.id}`);\r\n        if(! style){\r\n            document.head.append(this.createStyle());\r\n        }else{\r\n            this.#style = style;\r\n        }\r\n\r\n        \r\n        let searchWrap = Object.assign(document.createElement('div'),{\r\n            className: 'font-size-search-wrap'\r\n        });\r\n        searchWrap.append(this.#searchInputText);\r\n        \r\n        this.#fontSizeBox.append(searchWrap, this.#fontSizeBoxContainer);\r\n        \r\n        this.#fontSizeBox.append(this.#fontSizeBoxContainer);\r\n\r\n    }\r\n\r\n    #searchInputTextEvent(event){\r\n        let number = Number(this.#searchInputText.value);\r\n        if( ! this.#searchInputText.value || this.#searchInputText.value == '') {     \r\n            this.#createFontElementList(this.#sampleText).then(fontElementList => {\r\n                this.#fontSizeBoxContainer.replaceChildren(...fontElementList);\r\n            });\r\n            return;\r\n        }else if(isNaN(number) || this.#fontSizeObject.min > number || this.#fontSizeObject.max < number){\r\n            this.#fontSizeBoxContainer.replaceChildren();\r\n            return;\r\n        }\r\n\r\n        let li = Object.assign(document.createElement('li'),{\r\n            className: 'font-size-item',\r\n        });\r\n        if(this.#sampleText.nodeType && this.#sampleText.nodeType == Node.ELEMENT_NODE){\r\n            li.innerHTML = this.#sampleText.innerHTML;\r\n        }else{\r\n            li.textContent = this.#sampleText;\r\n        }\r\n        li.style.fontSize = number + this.#fontSizeObject.unit;\r\n        li.dataset.size = number;\r\n        this.#addFontItemEvent(li);\r\n        this.#fontSizeBoxContainer.replaceChildren(li);\r\n        this.#searchInputText.focus();\r\n    }\r\n\r\n    #addFontItemEvent(item){\r\n        return new Promise(res=>{\r\n            item.onclick = (event) => this.#apply(item, event);\r\n            res(item);\r\n        });\r\n    }\r\n\r\n    #apply(item, event){\r\n        this.#selectedFont = item;\r\n        if(this.#lastSelectionRange){\r\n            let selection = window.getSelection();\r\n            selection.removeAllRanges();\r\n            selection.addRange(this.#lastSelectionRange);\r\n        }\r\n        this.applyCallback(event);\r\n    }\r\n\r\n    #createFontElementList(sampleText){\r\n        return new Promise(resolve=> {\r\n            let list = [];\r\n            let fixedLength = String(this.#fontSizeObject.weight).replace('.', '').length;\r\n            for(let i = this.#fontSizeObject.min, len = this.#fontSizeObject.max + this.#fontSizeObject.weight ; \r\n                i < len ;\r\n                i = parseFloat( (i + this.#fontSizeObject.weight).toFixed(fixedLength) )\r\n            ){\r\n                console.log(i);\r\n                let li = Object.assign(document.createElement('li'),{\r\n                    className: 'font-size-item',\r\n                });\r\n                if(sampleText.nodeType && sampleText.nodeType == Node.ELEMENT_NODE){\r\n                    li.innerHTML = sampleText.innerHTML;\r\n                }else{\r\n                    li.textContent = sampleText;\r\n                }\r\n                li.style.fontSize = i + this.#fontSizeObject.unit;\r\n                this.#addFontItemEvent(li);\r\n                list.push(li);\r\n            }\r\n            resolve(list);\r\n        })\r\n    }\r\n\r\n    async open(){\r\n        this.#searchInputText.step = this.#fontSizeObject.weight;\r\n        this.#searchInputText.min = this.#fontSizeObject.min;\r\n        this.#searchInputText.max = this.#fontSizeObject.max;\r\n        \r\n        let selection = window.getSelection();\r\n        if(selection.rangeCount != 0 && selection.isCollapsed == false){\r\n            let range = selection.getRangeAt(0);\r\n            this.#lastSelectionRange = range.cloneRange();\r\n            let aticle = document.createElement('aticle');\r\n            let rangeCloneContent = range.cloneContents();\r\n            aticle.append(rangeCloneContent);\r\n            this.#sampleText = aticle;\r\n        }\r\n        this.#sampleText = this.#sampleText == '' ? this.#defaultSampleText : this.#sampleText;\r\n    \r\n        document.body.append(this.#fontSizeBox);\r\n\r\n        return await this.#createFontElementList(this.#sampleText).then(fontElementList => {\r\n            this.#fontSizeBoxContainer.replaceChildren(...fontElementList);\r\n            return this.#fontSizeBoxContainer;\r\n        });\r\n    }\r\n\r\n    close(){\r\n        this.#fontSizeBox.remove();\r\n    }\r\n\r\n    set applyCallback(applyCallback){\r\n        this.#applyCallback = applyCallback;\r\n    }\r\n\r\n    get applyCallback(){\r\n        return this.#applyCallback;\r\n    }\r\n\r\n    get fontSizeBox(){\r\n        return this.#fontSizeBox;\r\n    }\r\n\r\n    get selectedFont(){\r\n        return this.#selectedFont;\r\n    }\r\n\r\n\tget style(){\r\n\t\treturn this.#style;\r\n\t}\r\n\r\n\tset style(style){\r\n        this.#style.textContent = style;\r\n    }\r\n\r\n\tset insertStyle(style){\r\n\t\tthis.#style.sheet.insertRule(style);\r\n\t}\r\n\r\n\r\n    createStyle(){\r\n        this.#style.textContent = `\r\n            .font-size-wrap{\r\n                background: #000000bf;\r\n                position: fixed;\r\n\t\t\t\tpadding: 0.9%;\r\n\t\t\t\twidth: ${this.#fontSizeBoxVw}vw;\r\n\t\t\t\theight: 25vh;\r\n\t\t\t\tcolor: white;\r\n                min-width: 200px;\r\n                overflow-y: auto;\r\n                -webkit-user-select: none;\r\n                -moz-user-select: none;\r\n                -ms-user-select: none;\r\n                user-select: none;\r\n                overflow-x: hidden;\r\n                z-index: 999;\r\n            }\r\n\r\n            .font-size-wrap .font-size-search-wrap{\r\n                margin-bottom: 2%;\r\n                overflow-x: hidden;\r\n            }\r\n            .font-size-wrap .font-size-search-wrap [name=\"font-size-search\"]{\r\n                outline: none;\r\n                -moz-appearance: textfield;\r\n                width: 100%;\r\n                color: white;\r\n            }\r\n            .font-size-wrap .font-size-search-wrap [name=\"font-size-search\"]::-webkit-outer-spin-button,\r\n            .font-size-wrap .font-size-search-wrap [name=\"font-size-search\"]::-webkit-inner-spin-button{\r\n                -webkit-appearance: none;\r\n                margin: 0;\r\n            }\r\n\r\n            .font-size-wrap .font-size-container{\r\n                list-style-type: none;\r\n                padding: 0;\r\n                margin: 0;\r\n            }\r\n            .font-size-wrap .font-size-container .font-size-item{\r\n                margin-bottom: 1%;\r\n                transition: all 0.5s;\r\n                overflow-x: hidden;\r\n                white-space: nowrap;\r\n                text-overflow: ellipsis;\r\n            }\r\n            .font-size-wrap .font-size-container .font-size-item:hover{\r\n                background-color: #666666;\r\n                cursor: pointer;\r\n                background-color: #666666;\r\n                padding: 2px 0 3px 0;\r\n            }\r\n\r\n        `\r\n        return this.#style;\r\n    }\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport FontSizeBox from \"../component/FontSizeBox\";\r\n\r\nexport default class FontSize extends FreedomInterface {\r\n    static toolHandler = new ToolHandler(this);\r\n\r\n    static #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-font-size-style'\r\n\t});\r\n\r\n    static fontSizeBox;\r\n\r\n\tstatic unit = 'px';\r\n\r\n\tstatic min = 1;\r\n\r\n\tstatic max = 50;\r\n\r\n\tstatic weight = 1;\r\n\tstatic isDefaultStyle = true;\r\n    static{\r\n        \r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-font-size';\r\n\t\t\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: '↑↓',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Font Size'\r\n        });\r\n\r\n\t\tthis.fontSizeBox = new FontSizeBox(this);\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else if(this.fontSizeBox.fontSizeBox.isConnected){\r\n\t\t\t\tthis.fontSizeBox.close();\r\n\t\t\t}else{\r\n\t\t\t\tthis.fontSizeBox.open().then(fontSizeBoxContainer=>{\r\n\t\t\t\t    super.processingElementPosition(this.fontSizeBox.fontSizeBox, this.toolHandler.toolButton);\r\n                });\r\n\t\t\t}\r\n\t\t}\r\n\r\n        this.fontSizeBox.applyCallback = (event) => {\r\n\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active'\r\n\t\t\tthis.fontSizeBox.close();\r\n\t\t}\r\n\r\n        document.addEventListener(\"scroll\", () => {\r\n\t\t\tif(this.fontSizeBox.fontSizeBox.isConnected){\r\n\t\t\t\tsuper.processingElementPosition(this.fontSizeBox.fontSizeBox, this.toolHandler.toolButton);\r\n\t\t\t}\r\n\t\t});\r\n        window.addEventListener('resize', (event) => {\r\n            if(this.fontSizeBox.fontSizeBox.isConnected){\r\n                this.fontSizeBox.open().then(fontSizeBoxContainer=>{\r\n\t\t\t\t\tsuper.processingElementPosition(this.fontSizeBox.fontSizeBox, this.toolHandler.toolButton);\r\n                });\r\n            }\r\n\t\t})\r\n\r\n\t\tsuper.outClickElementListener(this.fontSizeBox.fontSizeBox, ({oldEvent, newEvent, isMouseOut})=>{\r\n\t\t\tif(isMouseOut && this.fontSizeBox.fontSizeBox.isConnected && ! super.isMouseInnerElement(this.toolHandler.toolButton)){\r\n\t\t\t\tthis.fontSizeBox.close();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n    static createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(FontSize, dataset);\r\n\t\tif( ! dataset && Object.keys(this.dataset).length == 0){\r\n            this.dataset.font_size = FontSize.fontSizeBox.selectedFont?.style.fontSize;\r\n        }\r\n        this.style.fontSize = this.dataset.font_size\r\n    }\r\n\t\r\n}\r\n","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nexport default class Italic extends FreedomInterface {\r\n\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-italic-style'\r\n\t});\r\n\tstatic isDefaultStyle = true;\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-italic';\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: 'I',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Italic'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else{\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-style: italic;\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\r\n\t\t\t.${this.toolHandler.defaultClass} {\r\n\t\t\t\tfont-style: italic;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\t\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Italic, dataset);\r\n\t}\r\n\r\n\t\r\n}\r\n","\r\nexport default class ImageBox {\r\n    \r\n    #style = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-image-box'\r\n\t});\r\n\r\n    #imageBox = Object.assign(document.createElement('div'), {\r\n        className: 'image-box-wrap',\r\n        \r\n        innerHTML:`\r\n            <div class=\"image-resize-container\">\r\n                <div>\r\n                    <label class=\"image-box-resize-label\" for=\"image-box-resize-width\">width </label>\r\n                    <input list=\"image-box-resize-datalist\" class=\"image-box-resize-input\" id=\"image-box-resize-width\" type=\"number\" autocomplete=\"off\"/>\r\n                    <div>\r\n                        <label class=\"image-box-resize-label-error-message\" for=\"image-box-resize-width\"></label>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <label class=\"image-box-resize-label\" for=\"image-box-resize-height\">height(auto) </label>\r\n                    <input list=\"image-box-resize-datalist\" class=\"image-box-resize-input\" id=\"image-box-resize-height\" type=\"number\" autocomplete=\"off\" disabled/>\r\n                </div>\r\n            </div>\r\n            <div class=\"image-key-description-container\" style=\"display:none;\">\r\n                <kbd>Ctrl</kbd><kbd>Wheel</kbd>OR<kbd>Shift</kbd><kbd>Wheel</kbd>\r\n            </div>\r\n            <div class=\"image-button-container\">\r\n                <a href=\"javascript:void(0);\" class=\"download\" download>\r\n                    <svg style=\"zoom:125%;\" class=\"download-css-gg-push-down\" width=\"1rem\" height=\"1rem\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <path d=\"M11.0001 1H13.0001V15.4853L16.2428 12.2427L17.657 13.6569L12.0001 19.3137L6.34326 13.6569L7.75748 12.2427L11.0001 15.4853V1Z\" fill=\"#00000073\" />\r\n                        <path d=\"M18 20.2877H6V22.2877H18V20.2877Z\" fill=\"#00000073\" />\r\n                    </svg>\r\n                </a>\r\n                <a href=\"javascript:void(0);\" class=\"new-window\">\r\n                    <svg style=\"zoom: 150%;\" class=\"new-window-css-gg-expand\" width=\"1rem\" height=\"1rem\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <path d=\"M12.3062 16.5933L12.2713 18.593L5.2724 18.4708L5.39457 11.4719L7.39426 11.5068L7.33168 15.092L15.2262 7.46833L11.6938 7.40668L11.7287 5.40698L18.7277 5.52915L18.6055 12.5281L16.6058 12.4932L16.6693 8.85507L8.72095 16.5307L12.3062 16.5933Z\" fill=\"#00000073\" />\r\n                    </svg>\r\n                </a>\r\n                <span class=\"image-editor\">\r\n                    <svg class=\"image-editor-css-gg-pen\" width=\"1rem\" height=\"1rem\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M21.2635 2.29289C20.873 1.90237 20.2398 1.90237 19.8493 2.29289L18.9769 3.16525C17.8618 2.63254 16.4857 2.82801 15.5621 3.75165L4.95549 14.3582L10.6123 20.0151L21.2189 9.4085C22.1426 8.48486 22.338 7.1088 21.8053 5.99367L22.6777 5.12132C23.0682 4.7308 23.0682 4.09763 22.6777 3.70711L21.2635 2.29289ZM16.9955 10.8035L10.6123 17.1867L7.78392 14.3582L14.1671 7.9751L16.9955 10.8035ZM18.8138 8.98525L19.8047 7.99429C20.1953 7.60376 20.1953 6.9706 19.8047 6.58007L18.3905 5.16586C18 4.77534 17.3668 4.77534 16.9763 5.16586L15.9853 6.15683L18.8138 8.98525Z\" fill=\"#00000073\" />\r\n                        <path d=\"M2 22.9502L4.12171 15.1717L9.77817 20.8289L2 22.9502Z\" fill=\"#00000073\" />\r\n                    </svg>\r\n                </span>\r\n            </div>\r\n        `\r\n        /* 리사이즈 있는 버전 주석처리 20230821\r\n        innerHTML: `\r\n            <div class=\"image-resize-container\">\r\n                <div>\r\n                    <label class=\"image-box-resize-label\" for=\"image-box-resize-width\">width : </label>\r\n                    <input list=\"image-box-resize-datalist\" class=\"image-box-resize-input\" id=\"image-box-resize-width\" type=\"number\" autocomplete=\"off\"/>\r\n                </div>\r\n                <div>\r\n                    <label class=\"image-box-resize-label\" for=\"image-box-resize-height\">height(auto) : </label>\r\n                    <input list=\"image-box-resize-datalist\" class=\"image-box-resize-input\" id=\"image-box-resize-height\" type=\"number\" autocomplete=\"off\" disabled/>\r\n                </div>\r\n            </div>\r\n            <div class=\"image-button-container\">\r\n                <a href=\"javascript:void(0);\" class=\"download-css-gg-push-down\" download></a>\r\n                <a href=\"javascript:void(0);\" class=\"new-window-css-gg-path-trim\"></a>\r\n            </div>\r\n        `\r\n        */\r\n    });\r\n\r\n    /*\r\n    #removeEventPromiseResolve;\r\n    #removeEventPromise = new Promise(resolve=>{\r\n\t\tthis.#removeEventPromiseResolve = resolve;\r\n\t});\r\n    */\r\n    #image;\r\n    #resizeRememberTarget;\r\n\r\n    constructor(){\r\n        let style = document.querySelector(`#${this.#style.id}`);\r\n        if(! style){\r\n            document.head.append(this.createStyle());\r\n        }else{\r\n            this.#style = style;\r\n        }\r\n\r\n        document.addEventListener('keydown',(event)=>{\r\n            if(this.#imageBox.hasAttribute('data-is_shft')){\r\n                return;\r\n            }\r\n            let {key} = event;\r\n            if(key === 'Shift'){\r\n                this.#imageBox.dataset.is_shft = '';\r\n            }\r\n        })\r\n\r\n        document.addEventListener('keyup', (event)=>{\r\n            if( ! this.#imageBox.hasAttribute('data-is_shft')){\r\n                return;\r\n            }    \r\n            let {key} = event;\r\n            if(key === 'Shift'){\r\n                this.#imageBox.removeAttribute('data-is_shft');\r\n            }\r\n        })\r\n        \r\n        this.#imageBox.addEventListener('wheel', (event) => {\r\n            if(this.#imageBox.hasAttribute('data-is_shft')){\r\n                return;\r\n            }\r\n            //event.preventDefault();\r\n            let {deltaY} = event;\r\n            \r\n            this.#imageBox.scrollTo(\r\n                this.#imageBox.scrollLeft + deltaY, undefined\r\n            );\r\n        }, {passive: true})\r\n        let [width, height] = this.#imageBox.querySelectorAll('#image-box-resize-width, #image-box-resize-height');\r\n        \r\n        window.addEventListener('keyup', (event) => {\r\n            if( ! this.image || ! this.resizeRememberTarget || ! width.hasAttribute('data-is_ctrl') || ! this.image.parentElement.matches(':hover')){//|| this.image.getRootNode()?.activeElement != width){\r\n                return;\r\n            }\r\n            width.removeAttribute('data-is_ctrl');\r\n        })\r\n\r\n        window.addEventListener('keydown', (event) => {\r\n            \r\n            let eventPath = event.composedPath()\r\n\r\n            if( ! this.image || ! this.resizeRememberTarget || eventPath[0] == width || ! this.image.parentElement.matches(':hover')){//|| this.image.getRootNode()?.activeElement != width){\r\n                return;\r\n            }\r\n            if(event.ctrlKey){\r\n                width.dataset.is_ctrl = '';\r\n            }else{\r\n                width.removeAttribute('data-is_ctrl');\r\n            }\r\n        })\r\n        \r\n        /**\r\n         * @see https://www.chromestatus.com/feature/6662647093133312\r\n         */\r\n        window.addEventListener('wheel', (event) => {\r\n            \r\n            if( ! this.image || ! this.resizeRememberTarget || ! this.image.parentElement.hasAttribute('data-is_resize_click') || event.composedPath()[0] == width || ! this.image.parentElement.matches(':hover')){// || this.image.getRootNode()?.activeElement != width){\r\n                return;\r\n            }\r\n            if(width.hasAttribute('data-is_ctrl')){\r\n                width.value = Number(width.value) + (event.deltaY * -1)\r\n            }else{\r\n                width.value = Number(width.value) + ((event.deltaY * -1) / 100)\r\n            }\r\n            this.oninputEvent(this.image, width, width, height, this.resizeRememberTarget);\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLImageElement} image \r\n     */\r\n    addImageHoverEvent(image, resizeRememberTarget){\r\n        //image.parentElement.onmouseover = () => {\r\n        let keyDescription = this.#imageBox.querySelector('.image-key-description-container')   \r\n        image.parentElement.onmouseenter = () => {\r\n            if(! image.src || image.src == '' || image.hasAttribute('data-error')){\r\n                return;\r\n            }\r\n             let root = image.getRootNode();\r\n            if(root != document){\r\n                root.append(this.#style);\r\n            }else{\r\n                document.head.append(this.#style);\r\n            }\r\n\r\n            if(image.parentElement && (image.parentElement !== this.#imageBox.parentElement || ! this.#imageBox.classList.contains('start'))){\r\n                image.parentElement.append(this.#imageBox);\r\n\r\n                this.#addRresizeEvent(image, resizeRememberTarget)\r\n                this.#addButtonIconEvent(image)\r\n                let appendAwait = setInterval(()=>{\r\n                    if(this.#imageBox.isConnected && image.complete && image.parentElement === this.#imageBox.parentElement && ! this.#imageBox.classList.contains('start')){\r\n                        this.#imageBox.classList.add('start');\r\n                        this.image = image;\r\n                        this.resizeRememberTarget = resizeRememberTarget;\r\n                        image.parentElement.onclick = (event) => {\r\n                            if(! image.src || image.src == '' || event.composedPath()[0] != image || image.hasAttribute('data-error')){\r\n                                return;\r\n                            }\r\n                            this.#imageBox.classList.add('start');\r\n                            image.parentElement.toggleAttribute('data-is_resize_click');\r\n                            this.falsh(image.parentElement);\r\n                            if(image.parentElement.hasAttribute('data-is_resize_click')){\r\n                                keyDescription.style.display = '';\r\n                            }else {\r\n                                keyDescription.style.display = 'none';\r\n                            }\r\n                        }\r\n                        clearInterval(appendAwait);\r\n                    }\r\n                }, 50)\r\n            }\r\n        }\r\n        image.parentElement.onmouseleave = () => {\r\n            this.#imageBox.classList.remove('start');\r\n            if(image.parentElement.hasAttribute('data-is_resize_click')){\r\n                keyDescription.style.display = 'none';\r\n                this.falsh(image.parentElement);\r\n            }\r\n            image.parentElement.removeAttribute('data-is_resize_click');\r\n            /*if(this.#imageBox.isConnected && image.parentElement === this.#imageBox.parentElement){\r\n                \r\n                this.#imageBox.classList.remove('start');\r\n                this.#imageBox.ontransitionend = () => {\r\n                    if(this.#imageBox.isConnected){\r\n                        this.#imageBox.remove();\r\n                    }\r\n                }\r\n                \r\n            }*/\r\n        }\r\n    }\r\n\r\n    falsh(target){\r\n        return new Promise(resolve => {\r\n            let flash = document.createElement('div');\r\n            Object.assign(flash.style, {\r\n                position: 'absolute',top: '0px',left: '0px',\r\n                width: '100%',height: '100%', background: 'rgba(255, 255, 255, 0.4)',\r\n                transition: 'opacity 0.2s ease 0s', opacity: 0\r\n            })\r\n            target.append(flash);\r\n            let flashAwait = setInterval(()=>{\r\n                if( ! flash.isConnected){\r\n                    return; \r\n                }\r\n                clearInterval(flashAwait);\r\n                flash.style.opacity = 1;\r\n                flash.ontransitionend = () => {\r\n                    flash.style.opacity = 0;\r\n                    flash.ontransitionend = () => {\r\n                        flash.remove();\r\n                        resolve();\r\n                    }\r\n                }\r\n            }, 50)\r\n        });\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLImageElement} image \r\n     */\r\n    //리사이즈 있는 버전 주석 처리 20230821\r\n    #addRresizeEvent(image, resizeRememberTarget){\r\n        return new Promise(resolve => {\r\n            let [width, height] = this.#imageBox.querySelectorAll('#image-box-resize-width, #image-box-resize-height');\r\n            width.value = image.width, height.value = image.height;\r\n            \r\n            width.labels[0].textContent = 'width : ';\r\n            width.labels[1].textContent = '';\r\n            \r\n            this.prevValue = undefined;\r\n\r\n            width.oninput = (event) => this.oninputEvent(image, event.target, width, height, resizeRememberTarget);\r\n            width.onkeydown = (event) => {\r\n                if(event.ctrlKey){\r\n                    width.dataset.is_ctrl = '';\r\n                }else{\r\n                    width.removeAttribute('data-is_ctrl');\r\n                }\r\n            }\r\n            width.onkeyup = (event) => {\r\n                width.removeAttribute('data-is_ctrl');\r\n            }\r\n            width.onblur = () => {\r\n                width.removeAttribute('data-is_ctrl');\r\n            }\r\n            width.onwheel = (event) => {\r\n                event.preventDefault();\r\n                if(width.hasAttribute('data-is_ctrl')){\r\n                    width.value = Number(width.value) + (event.deltaY * -1)\r\n                }else{\r\n                    width.value = Number(width.value) + ((event.deltaY * -1) / 100)\r\n                }\r\n                this.oninputEvent(image, event.target, width, height, resizeRememberTarget);\r\n            }\r\n            //height.oninput = (event) => oninputEvent(event);\r\n            resolve({width, height});\r\n        });\r\n    }\r\n    oninputEvent(image, target, width, height, resizeRememberTarget) {\r\n        if(isNaN(Number(target.value))){\r\n            target.value = target.value.replace(/\\D/g, '');\r\n            return;\r\n        }else if(Number(target.value) < 50){\r\n            width.labels[1].textContent = '(min 50)';\r\n            target.value = 50;\r\n        }else{\r\n            width.labels[1].textContent = '';\r\n        }\r\n        let sizeName = target.id.includes('width') ? 'width': 'height';\r\n        image[sizeName] = target.value;\r\n\r\n        let imageRect = image.getBoundingClientRect();\r\n\r\n        //width.value = image.width, height.value = image.height;\r\n        if(this.prevValue && parseInt(this.prevValue) == parseInt(imageRect.width)){\r\n            width.value = parseInt(this.prevValue);\r\n            width.labels[1].textContent = `(max ${parseInt(this.prevValue)}) : `\r\n        }\r\n        this.prevValue = imageRect.width;\r\n        resizeRememberTarget.dataset.width = width.value;\r\n    }\r\n    #addButtonIconEvent(image){\r\n        return new Promise(resolve => {\r\n            let [download, newWindow] = [...this.#imageBox.querySelectorAll('.download-css-gg-push-down, .new-window-css-gg-expand')]\r\n                .map(e=>e.parentElement)\r\n            download.href = image.src, newWindow.href = image.src\r\n            download.download = image.dataset.image_name;\r\n            newWindow.target = '_blank';\r\n            resolve({download, newWindow});\r\n        })\r\n    }\r\n\r\n    get imageBox(){\r\n        return this.#imageBox;\r\n    }\r\n\r\n\tget style(){\r\n\t\treturn this.#style;\r\n\t}\r\n\r\n\tset style(style){\r\n        this.#style.textContent = style;\r\n    }\r\n\r\n\tset insertStyle(style){\r\n\t\tthis.#style.sheet.insertRule(style);\r\n\t}\r\n    \r\n    set image(image){\r\n        this.#image = image; \r\n    }\r\n\r\n    get image(){\r\n        return this.#image;\r\n    }\r\n    set resizeRememberTarget(resizeRememberTarget){\r\n        this.#resizeRememberTarget = resizeRememberTarget;\r\n    }\r\n    get resizeRememberTarget(){\r\n        return this.#resizeRememberTarget;\r\n    }\r\n\r\n    createStyle(){\r\n        this.#style.textContent = `\r\n            .image-box-wrap{\r\n                position: absolute;\r\n                display: flex;\r\n                justify-content: space-between;\r\n                width: 100%;\r\n                background: linear-gradient(to bottom, #ff8787 -73%, #ffffffcf 115%);\r\n                color: white;\r\n                top:-20%;\r\n                opacity: 0;\r\n                transition: all 1s;\r\n                white-space: nowrap;\r\n                overflow-y: clip;\r\n                overflow-x: auto;\r\n            }\r\n            .image-box-wrap::-webkit-scrollbar{\r\n                display: none;\r\n            }\r\n            .image-box-wrap:hover::-webkit-scrollbar{\r\n                display: initial;\r\n                width: 7px;\r\n                height: 7px;\r\n            }\r\n            .image-box-wrap:hover::-webkit-scrollbar-track{\r\n                background: #00000040;\r\n                border-radius: 100px;\r\n                box-shadow: inset 0 0 5px #000000fc;\r\n            }\r\n            .image-box-wrap:hover::-webkit-scrollbar-thumb {\r\n                background: #0c0c0c38;\r\n                border-radius: 100px;\r\n                box-shadow: inset 0 0 5px #000000;\r\n            }\r\n            .image-box-wrap:hover::-webkit-scrollbar-thumb:hover {\r\n                /*background: #44070757;*/\r\n                background: #34000075; \r\n            }\r\n            .image-box-wrap.start{\r\n                top: 0;\r\n                opacity: 1;\r\n                transition: all 0.5s;\r\n            }\r\n            .image-box-wrap .image-button-container,\r\n            .image-box-wrap .image-resize-container, \r\n            .image-box-wrap .image-key-description-container{\r\n                display: flex;\r\n                gap: 1.5vw;\r\n                padding: 1.7%;\r\n                align-items: center;\r\n            }\r\n            .image-box-wrap .image-resize-container .image-box-resize-label{\r\n                background: linear-gradient(to right, #e50bff, #004eff);\r\n                -webkit-background-clip: text;\r\n                -webkit-text-fill-color: transparent;\r\n            }\r\n            .image-box-wrap .image-resize-container .image-box-resize-input{\r\n                outline: none;\r\n                border: none;\r\n                background-image: linear-gradient(#fff1f1d4, #ffffffeb), linear-gradient(to right, #a189890d 0%,  #ed89b275 100%);\r\n                background-origin: border-box;\r\n                background-clip: content-box, border-box;\r\n                background-color: #00000000; \r\n                width: 3.2rem;\r\n                height: 100%;\r\n                color: #ffb6b6;\r\n                font-size: 0.9rem;\r\n                text-align: center;\r\n            }\r\n            .image-box-wrap .image-button-container .new-window,\r\n            .image-box-wrap .image-button-container .download,\r\n            .image-box-wrap .image-button-container .image-editor{\r\n                display: flex;\r\n                align-items: center;\r\n                border: none;\r\n                background:none;\r\n                position:relative;\r\n                cursor: pointer;\r\n            }\r\n\r\n            .image-box-wrap kbd {\r\n                background-color: #eee;\r\n                border-radius: 3px;\r\n                border: 1px solid #b4b4b4;\r\n                box-shadow:\r\n                0 1px 1px rgba(0, 0, 0, 0.2),\r\n                0 2px 0 0 rgba(255, 255, 255, 0.7) inset;\r\n                color: #333;\r\n                display: inline-block;\r\n                font-size: 0.85em;\r\n                font-weight: 700;\r\n                line-height: 1;\r\n                padding: 2px 4px;\r\n                white-space: nowrap;\r\n                height: fit-content;\r\n            }\r\n        `\r\n        return this.#style;\r\n    }\r\n}","\r\nimport FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport ImageBox from \"../component/ImageBox\"\r\nexport default class Image extends FreedomInterface {\r\n\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n    static imageBox = new ImageBox();\r\n\r\n    static customImageCallback; \r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-image-style'\r\n\t});\r\n\r\n    static slotName = 'free-will-editor-image-description-slot';\r\n\r\n    static #selectedFile = Object.assign(document.createElement('input'), {\r\n        type: 'file',\r\n        accept: 'image/*'\r\n    });\r\n\r\n    static get selectedFile(){\r\n        return this.#selectedFile;\r\n    }\r\n    static isDefaultStyle = true;\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-image';\r\n        //this.toolHandler.isInline = false;\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: '',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n            innerHTML: `\r\n            <svg class=\"${this.#defaultStyle.id} css-gg-image-icon\"\r\n                width=\"0.9rem\"\r\n                height=\"0.9rem\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                >\r\n                <path\r\n                    fill-rule=\"evenodd\"\r\n                    clip-rule=\"evenodd\"\r\n                    d=\"M7 7C5.34315 7 4 8.34315 4 10C4 11.6569 5.34315 13 7 13C8.65685 13 10 11.6569 10 10C10 8.34315 8.65685 7 7 7ZM6 10C6 9.44772 6.44772 9 7 9C7.55228 9 8 9.44772 8 10C8 10.5523 7.55228 11 7 11C6.44772 11 6 10.5523 6 10Z\"\r\n                    fill=\"currentColor\"\r\n                />\r\n                <path\r\n                    fill-rule=\"evenodd\"\r\n                    clip-rule=\"evenodd\"\r\n                    d=\"M3 3C1.34315 3 0 4.34315 0 6V18C0 19.6569 1.34315 21 3 21H21C22.6569 21 24 19.6569 24 18V6C24 4.34315 22.6569 3 21 3H3ZM21 5H3C2.44772 5 2 5.44772 2 6V18C2 18.5523 2.44772 19 3 19H7.31374L14.1924 12.1214C15.364 10.9498 17.2635 10.9498 18.435 12.1214L22 15.6863V6C22 5.44772 21.5523 5 21 5ZM21 19H10.1422L15.6066 13.5356C15.9971 13.145 16.6303 13.145 17.0208 13.5356L21.907 18.4217C21.7479 18.7633 21.4016 19 21 19Z\"\r\n                    fill=\"currentColor\"\r\n                />\r\n            </svg>\r\n            `,\r\n            title: 'Image'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else{\r\n                this.#selectedFile.click();\r\n                this.#selectedFile.onchange = ()=> {\r\n                    //let url = URL.createObjectURL(this.#selectedFile.files[0])\r\n                    this.toolHandler.toolButton.dataset.tool_status = 'active';\r\n                }\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n            .${this.toolHandler.defaultClass} {\r\n                position: relative;\r\n            }\r\n            .${this.#defaultStyle.id}.css-gg-image-icon {\r\n                zoom:120%;\r\n            }\r\n            .${this.#defaultStyle.id}.image-description{            \r\n                cursor: pointer;\r\n                display: inline-flex;\r\n                align-items: center;\r\n            }\r\n\r\n            .${this.#defaultStyle.id}.image-description::after{\r\n                margin-left: 0.5em;\r\n                content: ' ['attr(data-file_name)'] 'attr(data-open_status);\r\n                font-size: small;\r\n                color: #bdbdbd;\r\n            }\r\n\r\n            .${this.#defaultStyle.id}.image-contanier{\r\n                width: fit-content;\r\n                transition: height 0.5s ease-in-out;\r\n                overflow: hidden;\r\n                position: relative;\r\n            }\r\n            .${this.#defaultStyle.id}.image-contanier img{\r\n                max-width: 100%;\r\n                height: auto;\r\n                aspect-ratio: attr(width) / attr(height);\r\n                image-rendering: auto;\r\n            }\r\n        ` \r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n    static get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n    #file;\r\n\r\n    imgLoadEndCallback = (event) => {};\r\n\r\n    image = document.createElement('img');\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Image, dataset, {deleteOption : FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE});\r\n        \r\n        if( ! dataset && Object.keys(this.dataset).length == 0){\r\n            this.#file = Image.selectedFile.cloneNode(true);\r\n            Image.selectedFile.files = new DataTransfer().files;\r\n            \r\n            this.dataset.url = URL.createObjectURL(this.#file.files[0]);\r\n            this.dataset.name = this.#file.files[0].name;\r\n            this.dataset.last_modified = this.#file.files[0].lastModified;\r\n            this.dataset.size = this.#file.files[0].size;\r\n            this.dataset.content_type = this.#file.files[0].type;\r\n\r\n            let url = URL.createObjectURL(this.#file.files[0], this.dataset.content_type);\r\n            this.dataset.url = url;\r\n            this.image.type = this.dataset.content_type;\r\n            this.image.src = this.dataset.url;\r\n            /*fetch(this.dataset.url).then(res=>res.blob()).then(blob => {\r\n                const reader = new FileReader();\r\n                reader.readAsDataURL(blob);\r\n                reader.onloadend = () => {\r\n                    this.dataset.base64 = reader.result;\r\n                }\r\n            })*/\r\n            \r\n        }else if(( ! this.dataset.url || this.dataset.url.startsWith('blob:file')) && this.dataset.base64){\r\n            fetch(this.dataset.base64)\r\n            .then(async res=>{\r\n                return res.blob().then(blob=>{\r\n                    let imgUrl = URL.createObjectURL(blob, res.headers.get('Content-Type'))\r\n                    this.dataset.url = imgUrl;\r\n                    this.image.src = this.dataset.url;\r\n                })\r\n            })\r\n        }else if(Image.customImageCallback && typeof Image.customImageCallback == 'function'){\r\n            Image.customImageCallback(this);\r\n        }else if(this.dataset.url){\r\n            this.image.src = this.dataset.url;\r\n        }\r\n\r\n        if(! this.dataset.name){\r\n            this.remove();\r\n            throw new Error(`this file is undefined ${this.dataset.name}`);\r\n        }\r\n        \r\n        this.attachShadow({ mode : 'open' });\r\n        this.shadowRoot.append(Image.defaultStyle.cloneNode(true));\r\n        \r\n        this.createDefaultContent().then(({wrap, description, slot, aticle})=>{\r\n            this.connectedChildAfterCallback = (addedList) => {\r\n                aticle.append(...addedList);\r\n            }\r\n        });\r\n        \r\n        this.disconnectedAfterCallback = () => {\r\n            if(this.dataset.url.startsWith('blob:file')){\r\n                setTimeout(() => {\r\n                    URL.revokeObjectURL(this.dataset.url);\r\n                }, 1000 * 60 * 2)\r\n            }\r\n        }\r\n\t}\r\n\r\n    createDefaultContent(){\r\n        return new Promise(resolve=>{\r\n            let wrap = Object.assign(document.createElement('div'),{\r\n\r\n            });\r\n            wrap.draggable = false\r\n\r\n            this.shadowRoot.append(wrap);\r\n\r\n            let imageContanier = Object.assign(document.createElement('div'),{\r\n                className: `${Image.defaultStyle.id} image-contanier`\r\n            });\r\n\r\n            /*let image = Object.assign(document.createElement('img'), {\r\n                //src :`https://developer.mozilla.org/pimg/aHR0cHM6Ly9zLnprY2RuLm5ldC9BZHZlcnRpc2Vycy9iMGQ2NDQyZTkyYWM0ZDlhYjkwODFlMDRiYjZiY2YwOS5wbmc%3D.PJLnFds93tY9Ie%2BJ%2BaukmmFGR%2FvKdGU54UJJ27KTYSw%3D`\r\n                //src: this.dataset.url\r\n                //src: imgUrl\r\n            });*/\r\n\r\n            //if(this.#selectedFile.files.length != 0){\r\n            this.image.dataset.image_name = this.dataset.name\r\n            //}\r\n\r\n            imageContanier.append(this.image);\r\n\r\n            this.image.onload = () => {\r\n                if(this.dataset.width){\r\n                    this.image.width = this.dataset.width;\r\n                }\r\n                /*let applyToolAfterSelection = window.getSelection(), range = applyToolAfterSelection.getRangeAt(0);\r\n                let scrollTarget;\r\n                if(range.endContainer.nodeType == Node.TEXT_NODE){\r\n                    scrollTarget = range.endContainer.parentElement\r\n                }else{\r\n                    scrollTarget = range.endContainer;\r\n                }\r\n                scrollTarget.scrollIntoView({ behavior: \"instant\", block: \"end\", inline: \"nearest\" });\r\n                */\r\n            //this.imgLoadEndCallback();\r\n                //imageContanier.style.height = window.getComputedStyle(image).height;\r\n            }\r\n            this.image.onerror = () => {\r\n                //imageContanier.style.height = window.getComputedStyle(image).height;\r\n                this.image.dataset.error = '';\r\n            }\r\n\r\n            let {description, slot, aticle} = this.createDescription(this.image, imageContanier);\r\n\r\n            this.connectedAfterOnlyOneCallback = () => {\r\n                if(this.childNodes.length != 0 && this.childNodes[0]?.tagName != 'BR'){\r\n                    aticle.append(...[...this.childNodes].filter(e=>e!=aticle));\r\n                }\r\n                wrap.replaceChildren(...[description,imageContanier].filter(e=>e != undefined));\r\n                \r\n                Image.imageBox.addImageHoverEvent(this.image, this);\r\n                if(this.nextSibling?.tagName == 'BR'){\r\n                    this.nextSibling.remove()\r\n                }\r\n\r\n                resolve({wrap, description, slot, aticle})\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLImageElement} image \r\n     * @param {HTMLDivElement} imageContanier \r\n     * @returns {HTMLDivElement}\r\n     */\r\n    createDescription(image, imageContanier){\r\n        let description = Object.assign(document.createElement('div'),{\r\n            className: `${Image.defaultStyle.id} image-description`\r\n        });\r\n\r\n        description.dataset.file_name = this.dataset.name\r\n        description.dataset.open_status = this.dataset.open_status || '▼'; // '▼';\r\n        imageContanier.style.height = this.dataset.height || 'auto'\r\n        \r\n        let {slot, aticle} = this.createSlot();\r\n        \r\n        description.append(slot)\r\n\r\n        description.onclick = (event) => {\r\n            if(description.dataset.open_status == '▼'){\r\n                description.dataset.open_status = '▶'\r\n                imageContanier.style.height = window.getComputedStyle(image).height;\r\n                setTimeout(()=>{\r\n                    imageContanier.style.height = '0px';\r\n                    this.dataset.height = '0px';\r\n                },100)\r\n\r\n            }else{\r\n                description.dataset.open_status = '▼';\r\n                setTimeout(()=>{\r\n                    imageContanier.style.height = window.getComputedStyle(image).height;\r\n                    this.dataset.height = 'auto'\r\n                },100)\r\n                \r\n                image.style.opacity = '';\r\n                image.style.visibility = '';\r\n            }\r\n            this.dataset.open_status = description.dataset.open_status;\r\n        }\r\n\r\n        imageContanier.ontransitionend = () => {\r\n            if(description.dataset.open_status == '▼'){\r\n                imageContanier.style.height = 'auto';\r\n            }else{\r\n                image.style.opacity = 0;\r\n                image.style.visibility = 'hidden';\r\n            }\r\n        }\r\n\r\n        return {description, slot, aticle};\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @returns {HTMLSlotElement}\r\n     */\r\n    createSlot(){\r\n        let aticle = document.createElement('div');\r\n        \r\n        aticle.contentEditable = 'false';\r\n        aticle.draggable = 'false'; \r\n\r\n        //if(this.childNodes.length != 0 && this.childNodes[0]?.tagName != 'BR'){\r\n            let randomId = Array.from(\r\n                window.crypto.getRandomValues(new Uint32Array(16)),\r\n                (e)=>e.toString(32).padStart(2, '0')\r\n            ).join('');\r\n            //aticle.append(...[...this.childNodes].map(e=>e.cloneNode(true)));\r\n            aticle.append(...this.childNodes);\r\n            aticle.slot = Image.slotName + '-' + randomId\r\n            this.append(aticle);\r\n            \r\n            let slot = Object.assign(document.createElement('slot'),{\r\n                name: Image.slotName + '-' + randomId\r\n            });\r\n            return {slot, aticle};\r\n        //}else{\r\n        //    return undefined\r\n        //}\r\n\r\n    }\r\n    /**\r\n     * @returns {HTMLInputElement}\r\n     */\r\n    get selectedFile(){\r\n        return this.#file\r\n    }\r\n}\r\n","import FreedomInterface from \"../module/FreedomInterface\"\r\n\r\nexport default class VideoBox {\r\n    \r\n    #style = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-video-box'\r\n\t});\r\n\r\n    #videoBox = Object.assign(document.createElement('div'), {\r\n        className: 'video-box-wrap',\r\n        \r\n        innerHTML:`\r\n            <div class=\"video-resize-container\">\r\n                <div>\r\n                    <label class=\"video-box-resize-label\" for=\"video-box-resize-width\">width : </label>\r\n                    <input list=\"video-box-resize-datalist\" class=\"video-box-resize-input\" id=\"video-box-resize-width\" type=\"number\" autocomplete=\"off\"/>\r\n                    <div>\r\n                        <label class=\"video-box-resize-label-error-message\" for=\"video-box-resize-width\"></label>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <label class=\"video-box-resize-label\" for=\"video-box-resize-height\">height(auto) : </label>\r\n                    <input list=\"video-box-resize-datalist\" class=\"video-box-resize-input\" id=\"video-box-resize-height\" type=\"number\" autocomplete=\"off\" disabled/>\r\n                </div>\r\n            </div>\r\n            <div class=\"video-key-description-container\" style=\"display:none;\">\r\n                <kbd>Ctrl</kbd><kbd>Wheel</kbd>OR<kbd>Shift</kbd><kbd>Wheel</kbd>\r\n            </div>\r\n            <div class=\"video-button-container\">\r\n                <a href=\"javascript:void(0);\" class=\"download\" download>\r\n                    <svg style=\"zoom:140%;\" class=\"download-css-gg-push-down\"\r\n                        width=\"1rem\"\r\n                        height=\"1rem\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                    >\r\n                        <path\r\n                        d=\"M11.0001 1H13.0001V15.4853L16.2428 12.2427L17.657 13.6569L12.0001 19.3137L6.34326 13.6569L7.75748 12.2427L11.0001 15.4853V1Z\"\r\n                        fill=\"#00000073\"\r\n                        />\r\n                        <path d=\"M18 20.2877H6V22.2877H18V20.2877Z\" fill=\"#00000073\" />\r\n                    </svg>\r\n                </a>\r\n                <a href=\"javascript:void(0);\" class=\"new-window\">\r\n                    <svg style=\"zoom: 150%;\" class=\"new-window-css-gg-expand\"\r\n                        width=\"1rem\"\r\n                        height=\"1rem\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                    >\r\n                        <path\r\n                        d=\"M12.3062 16.5933L12.2713 18.593L5.2724 18.4708L5.39457 11.4719L7.39426 11.5068L7.33168 15.092L15.2262 7.46833L11.6938 7.40668L11.7287 5.40698L18.7277 5.52915L18.6055 12.5281L16.6058 12.4932L16.6693 8.85507L8.72095 16.5307L12.3062 16.5933Z\"\r\n                        fill=\"#00000073\"\r\n                        />\r\n                    </svg>\r\n                </a>\r\n            </div>\r\n        `\r\n        /* 리사이즈 있는 버전 주석처리 20230821 <i class=\"download-css-gg-push-down\"></i>\r\n        innerHTML: `\r\n            <div class=\"video-resize-container\">\r\n                <div>\r\n                    <label class=\"video-box-resize-label\" for=\"video-box-resize-width\">width : </label>\r\n                    <input list=\"video-box-resize-datalist\" class=\"video-box-resize-input\" id=\"video-box-resize-width\" type=\"number\" autocomplete=\"off\"/>\r\n                </div>\r\n                <div>\r\n                    <label class=\"video-box-resize-label\" for=\"video-box-resize-height\">height(auto) : </label>\r\n                    <input list=\"video-box-resize-datalist\" class=\"video-box-resize-input\" id=\"video-box-resize-height\" type=\"number\" autocomplete=\"off\" disabled/>\r\n                </div>\r\n            </div>\r\n            <div class=\"video-button-container\">\r\n                <a href=\"javascript:void(0);\" class=\"download-css-gg-push-down\" download></a>\r\n                <a href=\"javascript:void(0);\" class=\"new-window-css-gg-path-trim\"></a>\r\n            </div>\r\n        `\r\n        */\r\n    });\r\n    /*\r\n    #removeEventPromiseResolve;\r\n    #removeEventPromise = new Promise(resolve=>{\r\n\t\tthis.#removeEventPromiseResolve = resolve;\r\n\t});\r\n    */\r\n    #video;\r\n    #resizeRememberTarget;\r\n\r\n    constructor(){\r\n        let style = document.querySelector(`#${this.#style.id}`);\r\n        if(! style){\r\n            document.head.append(this.createStyle());\r\n        }else{\r\n            this.#style = style;\r\n        }\r\n        document.addEventListener('keydown',(event)=>{\r\n            if(this.#videoBox.hasAttribute('data-is_shft')){\r\n                return;\r\n            }\r\n            let {key} = event;\r\n            if(key === 'Shift'){\r\n                this.#videoBox.dataset.is_shft = '';\r\n            }\r\n        })\r\n\r\n        document.addEventListener('keyup', (event)=>{\r\n            if( ! this.#videoBox.hasAttribute('data-is_shft')){\r\n                return;\r\n            }    \r\n            let {key} = event;\r\n            if(key === 'Shift'){\r\n                this.#videoBox.removeAttribute('data-is_shft');\r\n            }\r\n        })\r\n        \r\n        this.#videoBox.addEventListener('wheel', (event) => {\r\n            if(this.#videoBox.hasAttribute('data-is_shft')){\r\n                return;\r\n            }\r\n            //event.preventDefault();\r\n            let {deltaY} = event;\r\n            \r\n            this.#videoBox.scrollTo(\r\n                this.#videoBox.scrollLeft + deltaY, undefined\r\n            );\r\n        }, {passive: true});\r\n        let [width, height] = this.#videoBox.querySelectorAll('#video-box-resize-width, #video-box-resize-height');\r\n        \r\n        window.addEventListener('keyup', (event) => {\r\n            if( ! this.video || ! this.resizeRememberTarget || ! width.hasAttribute('data-is_ctrl') || ! this.video.parentElement.matches(':hover')){//|| this.video.getRootNode()?.activeElement != width){\r\n                return;\r\n            }\r\n            width.removeAttribute('data-is_ctrl');\r\n        })\r\n\r\n        window.addEventListener('keydown', (event) => {\r\n            \r\n            let eventPath = event.composedPath()\r\n\r\n            if( ! this.video || ! this.resizeRememberTarget || eventPath[0] == width || ! this.video.parentElement.matches(':hover')){//|| this.video.getRootNode()?.activeElement != width){\r\n                return;\r\n            }\r\n            if(event.ctrlKey){\r\n                width.dataset.is_ctrl = '';\r\n            }else{\r\n                width.removeAttribute('data-is_ctrl');\r\n            }\r\n        })\r\n        \r\n        /**\r\n         * @see https://www.chromestatus.com/feature/6662647093133312\r\n         */\r\n        window.addEventListener('wheel', (event) => {\r\n\r\n            if( ! this.video || ! this.resizeRememberTarget || ! this.video.parentElement.hasAttribute('data-is_resize_click') || event.composedPath()[0] == width || ! this.video.parentElement.matches(':hover')){// || this.video.getRootNode()?.activeElement != width){\r\n                return;\r\n            }\r\n            if(width.hasAttribute('data-is_ctrl')){\r\n                width.value = Number(width.value) + (event.deltaY * -1)\r\n            }else{\r\n                width.value = Number(width.value) + ((event.deltaY * -1) / 100)\r\n            }\r\n            this.oninputEvent(this.video, width, height, this.resizeRememberTarget);\r\n            \r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLVideoElement} video \r\n     */\r\n    addVideoHoverEvent(video, resizeRememberTarget){\r\n        //video.parentElement.onmouseover = () => {\r\n        let keyDescription = this.#videoBox.querySelector('.video-key-description-container')\r\n        video.parentElement.onmouseenter = () => {\r\n            if(! video.src || video.src == '' || video.hasAttribute('data-error')){\r\n                return;\r\n            }\r\n            let root = video.getRootNode();\r\n            if(root != document){\r\n                root.append(this.#style);\r\n            }else{\r\n                document.head.append(this.#style);\r\n            }\r\n\r\n            if(video.parentElement && (video.parentElement !== this.#videoBox.parentElement || ! this.#videoBox.classList.contains('start'))){\r\n                video.parentElement.append(this.#videoBox);\r\n\r\n                this.#addRresizeEvent(video, resizeRememberTarget)\r\n                this.#addButtonIconEvent(video)\r\n                let appendAwait = setInterval(()=>{\r\n                    if(this.#videoBox.isConnected && video.readyState == 4 && video.parentElement === this.#videoBox.parentElement && ! this.#videoBox.classList.contains('start')){\r\n                        this.#videoBox.classList.add('start');\r\n                        this.video = video;\r\n                        this.resizeRememberTarget = resizeRememberTarget;\r\n                        video.parentElement.onclick = (event) => {\r\n                            if(! video.src || video.src == '' || event.composedPath()[0] != video || video.hasAttribute('data-error')){\r\n                                return;\r\n                            }\r\n                            video.parentElement.toggleAttribute('data-is_resize_click');\r\n                            this.falsh(video.parentElement);\r\n                            if(video.parentElement.hasAttribute('data-is_resize_click')){\r\n                                keyDescription.style.display = '';\r\n                            }else {\r\n                                keyDescription.style.display = 'none';\r\n                            }\r\n                        }\r\n                        clearInterval(appendAwait);\r\n                    }\r\n                }, 50)\r\n            }\r\n        }\r\n        video.parentElement.onmouseleave = () => {\r\n            this.#videoBox.classList.remove('start');\r\n            if(video.parentElement.hasAttribute('data-is_resize_click')){\r\n                keyDescription.style.display = 'none';\r\n                this.falsh(video.parentElement);\r\n            }\r\n            video.parentElement.removeAttribute('data-is_resize_click');\r\n            /*if(this.#videoBox.isConnected && video.parentElement === this.#videoBox.parentElement){\r\n                \r\n                this.#videoBox.classList.remove('start');\r\n                this.#videoBox.ontransitionend = () => {\r\n                    if(this.#videoBox.isConnected){\r\n                        this.#videoBox.remove();\r\n                    }\r\n                }\r\n                \r\n            }*/\r\n        }\r\n    }\r\n\r\n    falsh(target){\r\n        return new Promise(resolve => {\r\n            let flash = document.createElement('div');\r\n            Object.assign(flash.style, {\r\n                position: 'absolute',top: '0px',left: '0px',\r\n                width: '100%',height: '100%', background: 'rgba(255, 255, 255, 0.4)',\r\n                transition: 'opacity 0.2s ease 0s', opacity: 0\r\n            })\r\n            target.append(flash);\r\n            let flashAwait = setInterval(()=>{\r\n                if( ! flash.isConnected){\r\n                    return; \r\n                }\r\n                clearInterval(flashAwait);\r\n                flash.style.opacity = 1;\r\n                flash.ontransitionend = () => {\r\n                    flash.style.opacity = 0;\r\n                    flash.ontransitionend = () => {\r\n                        flash.remove();\r\n                        resolve();\r\n                    }\r\n                }\r\n            }, 50)\r\n        });\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLVideoElement} video \r\n     */\r\n    //리사이즈 있는 버전 주석 처리 20230821\r\n    #addRresizeEvent(video, resizeRememberTarget){\r\n        return new Promise(resolve => {\r\n            let [width, height] = this.#videoBox.querySelectorAll('#video-box-resize-width, #video-box-resize-height');\r\n            let rect = video.getBoundingClientRect();\r\n            width.value = parseInt(rect.width), height.value = parseInt(rect.height);\r\n            \r\n            width.labels[0].textContent = 'width : ';\r\n            width.labels[1].textContent = '';\r\n\r\n            this.prevValue = undefined;\r\n\r\n            width.oninput = (event) => this.oninputEvent(video, width, height, resizeRememberTarget);\r\n            width.onkeydown = (event) => {\r\n                if(event.ctrlKey){\r\n                    width.dataset.is_ctrl = '';\r\n                }else{\r\n                    width.removeAttribute('data-is_ctrl');\r\n                }\r\n            }\r\n            width.onkeyup = (event) => {\r\n                width.removeAttribute('data-is_ctrl');\r\n            }\r\n            width.onblur = () => {\r\n                width.removeAttribute('data-is_ctrl');\r\n            }\r\n            width.onwheel = (event) => {\r\n                event.preventDefault();\r\n                if(width.hasAttribute('data-is_ctrl')){\r\n                    width.value = Number(width.value) + (event.deltaY * -1)\r\n                }else{\r\n                    width.value = Number(width.value) + ((event.deltaY * -1) / 100)\r\n                }\r\n\r\n                this.oninputEvent(video, width, height, resizeRememberTarget);\r\n            }\r\n            //height.oninput = (event) => oninputEvent(event);\r\n            resolve({width, height});\r\n        });\r\n    }\r\n    oninputEvent(video, width, height, resizeRememberTarget) {\r\n        if(isNaN(Number(width.value))){\r\n            width.value = width.value.replace(/\\D/g, '');\r\n            return;\r\n        }else if(Number(width.value) < 50){\r\n            width.labels[1].textContent = '(min 50)';\r\n            width.value = 50;\r\n        }else{\r\n            width.labels[1].textContent = '';\r\n        }\r\n        let sizeName = width.id.includes('width') ? 'width': 'height';\r\n        video[sizeName] = width.value;\r\n\r\n        let videoRect = video.getBoundingClientRect();\r\n\r\n        if(this.prevValue && parseInt(this.prevValue) == parseInt(videoRect.width)){\r\n            width.value = parseInt(this.prevValue);\r\n            width.labels[1].textContent = `(max ${parseInt(this.prevValue)}) : `\r\n        }\r\n        this.prevValue = videoRect.width\r\n\r\n        resizeRememberTarget.dataset.width = width.value;\r\n    }\r\n    #addButtonIconEvent(video){\r\n        return new Promise(resolve => {\r\n            let [download, newWindow] = [...this.#videoBox.querySelectorAll('.download-css-gg-push-down, .new-window-css-gg-expand')]\r\n                .map(e=>e.parentElement)\r\n            download.href = video.src, newWindow.href = video.src;\r\n            download.download = video.dataset.video_name;\r\n            newWindow.target = '_blank';\r\n            resolve({download, newWindow});\r\n        })\r\n    }\r\n\r\n    get videoBox(){\r\n        return this.#videoBox;\r\n    }\r\n\r\n\tget style(){\r\n\t\treturn this.#style;\r\n\t}\r\n\r\n\tset style(style){\r\n        this.#style.textContent = style;\r\n    }\r\n\r\n\tset insertStyle(style){\r\n\t\tthis.#style.sheet.insertRule(style);\r\n\t}\r\n    \r\n    set video(video){\r\n        this.#video = video; \r\n    }\r\n\r\n    get video(){\r\n        return this.#video;\r\n    }\r\n    set resizeRememberTarget(resizeRememberTarget){\r\n        this.#resizeRememberTarget = resizeRememberTarget;\r\n    }\r\n    get resizeRememberTarget(){\r\n        return this.#resizeRememberTarget;\r\n    }\r\n\r\n    createStyle(){\r\n        this.#style.textContent = `\r\n            .video-box-wrap{\r\n                position: absolute;\r\n                display: flex;\r\n                justify-content: space-between;\r\n                width: 100%;\r\n                background: linear-gradient(to bottom, #ff8787 -73%, #ffffffcf 115%);\r\n                color: white;\r\n                top:-20%;\r\n                opacity: 0;\r\n                transition: all 1s;\r\n                white-space: nowrap;\r\n                overflow-y: clip;\r\n                overflow-x: auto;\r\n            }\r\n            .video-box-wrap::-webkit-scrollbar{\r\n                display: none;\r\n            }\r\n            .video-box-wrap:hover::-webkit-scrollbar{\r\n                display: initial;\r\n                width: 7px;\r\n                height: 7px;\r\n            }\r\n            .video-box-wrap:hover::-webkit-scrollbar-track{\r\n                background: #00000040;\r\n                border-radius: 100px;\r\n                box-shadow: inset 0 0 5px #000000fc;\r\n            }\r\n            .video-box-wrap:hover::-webkit-scrollbar-thumb {\r\n                background: #0c0c0c38;\r\n                border-radius: 100px;\r\n                box-shadow: inset 0 0 5px #000000;\r\n            }\r\n            .video-box-wrap:hover::-webkit-scrollbar-thumb:hover {\r\n                /*background: #44070757;*/\r\n                background: #34000075; \r\n            }\r\n            .video-box-wrap.start{\r\n                top: 0;\r\n                opacity: 1;\r\n                transition: all 0.5s;\r\n            }\r\n            .video-box-wrap .video-button-container, \r\n            .video-box-wrap .video-resize-container,\r\n            .video-box-wrap .video-key-description-container{\r\n                display: flex;\r\n                gap: 1.5vw;\r\n                padding: 1.7%;\r\n                align-items: center;\r\n            }\r\n            .video-box-wrap .video-resize-container .video-box-resize-label{\r\n                background: linear-gradient(to right, #e50bff, #004eff);\r\n                -webkit-background-clip: text;\r\n                -webkit-text-fill-color: transparent;\r\n            }\r\n            .video-box-wrap .video-resize-container .video-box-resize-input{\r\n                outline: none;\r\n                border: none;\r\n                background-image: linear-gradient(#fff1f1d4, #ffffffeb), linear-gradient(to right, #a189890d 0%,  #ed89b275 100%);\r\n                background-origin: border-box;\r\n                background-clip: content-box, border-box;\r\n                background-color: #00000000; \r\n                width: 3.2rem;\r\n                height: 100%;\r\n                color: #ffb6b6;\r\n                font-size: 0.9rem;\r\n                text-align: center;\r\n            }\r\n            .video-box-wrap .video-button-container .new-window,\r\n            .video-box-wrap .video-button-container .download{\r\n                display: flex;\r\n                align-items: center;\r\n                border: none;\r\n                background:none;\r\n                position:relative;\r\n                cursor: pointer;\r\n            }\r\n\r\n            .video-box-wrap kbd {\r\n                background-color: #eee;\r\n                border-radius: 3px;\r\n                border: 1px solid #b4b4b4;\r\n                box-shadow:\r\n                0 1px 1px rgba(0, 0, 0, 0.2),\r\n                0 2px 0 0 rgba(255, 255, 255, 0.7) inset;\r\n                color: #333;\r\n                display: inline-block;\r\n                font-size: 0.85em;\r\n                font-weight: 700;\r\n                line-height: 1;\r\n                padding: 2px 4px;\r\n                white-space: nowrap;\r\n                height: fit-content;\r\n            }\r\n        `\r\n        return this.#style;\r\n    }\r\n\r\n}","\r\nimport FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport VideoBox from \"../component/VideoBox\"\r\nexport default class Video extends FreedomInterface {\r\n\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n    static videoBox = new VideoBox();\r\n\r\n    static customVideoCallback;\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-video-style'\r\n\t});\r\n\r\n    static descriptionName = 'free-will-editor-video-description-slot';\r\n\r\n    static #selectedFile = Object.assign(document.createElement('input'), {\r\n        type: 'file',\r\n        accept: 'video/*'\r\n    });\r\n\r\n    static get selectedFile(){\r\n        return this.#selectedFile;\r\n    }\r\n    static isDefaultStyle = true;\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-video';\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: '',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n            innerHTML: `\r\n            <svg class=\"${this.#defaultStyle.id} css-gg-video-icon\"\r\n            width=\"0.9rem\"\r\n            height=\"0.9rem\"\r\n            viewBox=\"0 0 24 24\"\r\n            fill=\"none\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            >\r\n                <path\r\n                    fill-rule=\"evenodd\"\r\n                    clip-rule=\"evenodd\"\r\n                    d=\"M4 4.5V6.5H12V7.5H3C1.34315 7.5 0 8.84315 0 10.5V16.5C0 18.1569 1.34315 19.5 3 19.5H15C16.5731 19.5 17.8634 18.2892 17.9898 16.7487L24 17.5V9.5L17.9898 10.2513C17.8634 8.71078 16.5731 7.5 15 7.5H14V5.5C14 4.94772 13.5523 4.5 13 4.5H4ZM18 12.2656V14.7344L22 15.2344V11.7656L18 12.2656ZM16 10.5C16 9.94772 15.5523 9.5 15 9.5H3C2.44772 9.5 2 9.94772 2 10.5V16.5C2 17.0523 2.44772 17.5 3 17.5H15C15.5523 17.5 16 17.0523 16 16.5V10.5Z\"\r\n                    fill=\"currentColor\"\r\n                />\r\n            </svg>\r\n            `,\r\n            title: 'Video'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else{\r\n                this.#selectedFile.onchange = ()=> {\r\n                    //let url = URL.createObjectURL(this.#selectedFile.files[0])\r\n                    this.toolHandler.toolButton.dataset.tool_status = 'active';\r\n                }\r\n                this.#selectedFile.click();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n            .${this.toolHandler.defaultClass} {\r\n                position: relative;\r\n            }\r\n            .${this.#defaultStyle.id}.css-gg-video-icon {\r\n                zoom:120%;\r\n            }\r\n            .${this.#defaultStyle.id}.video-description{            \r\n                cursor: pointer;\r\n                display: inline-flex;\r\n                align-items: center;\r\n            }\r\n            .${this.#defaultStyle.id}.video-description::after{\r\n                margin-left: 0.5em;\r\n                content: ' ['attr(data-file_name)'] 'attr(data-open_status);\r\n                font-size: small;\r\n                color: #bdbdbd;\r\n            }\r\n\r\n            .${this.#defaultStyle.id}.video-contanier{\r\n                width: fit-content;\r\n                transition: height 0.5s ease-in-out;\r\n                overflow: hidden;\r\n                position: relative;\r\n            }\r\n            .${this.#defaultStyle.id}.video-contanier video{\r\n                max-width: 100%;\r\n                height: auto;\r\n                aspect-ratio: attr(width) / attr(height);\r\n            }\r\n        `\r\n        let defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n    static get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n    \r\n\r\n    #file;\r\n\r\n    videoLoadEndCallback = (event) => {};\r\n\r\n    video = Object.assign(document.createElement('video'), {\r\n        loop: true,\r\n        controls: true\r\n    });\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Video, dataset, {deleteOption : FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE});\r\n\r\n\t\tif( ! dataset && Object.entries(this.dataset).length == 0){\r\n            this.#file = Video.selectedFile.cloneNode(true);\r\n            Video.selectedFile.files = new DataTransfer().files;\r\n            \r\n            this.dataset.url = URL.createObjectURL(this.#file.files[0]);\r\n            this.dataset.name = this.#file.files[0].name;\r\n            this.dataset.lastModified = this.#file.files[0].lastModified;\r\n            this.dataset.size = this.#file.files[0].size;\r\n            this.dataset.content_type = this.#file.files[0].type;\r\n\r\n            let url = URL.createObjectURL(this.#file.files[0], this.dataset.content_type);\r\n            this.dataset.url = url;\r\n            this.video.type = this.dataset.content_type;\r\n            this.video.src = this.dataset.url;\r\n            /*fetch(this.dataset.url).then(res=>res.blob()).then(blob => {\r\n                const reader = new FileReader();\r\n                reader.readAsDataURL(blob);\r\n                reader.onloadend = () => {\r\n                    this.dataset.base64 = reader.result;\r\n                }\r\n            })*/\r\n            \r\n        }else if(( ! this.dataset.url || this.dataset.url.startsWith('blob:file')) && this.dataset.base64){\r\n            fetch(this.dataset.base64)\r\n            .then(async res=>{\r\n                return res.blob().then(blob=>{\r\n                    let videoUrl = URL.createObjectURL(blob, res.headers.get('Content-Type'))\r\n                    this.dataset.url = videoUrl;\r\n                    this.video.src = this.dataset.url;\r\n                })\r\n            })\r\n        }else if(Video.customVideoCallback && typeof Video.customVideoCallback == 'function'){\r\n            Video.customVideoCallback(this);\r\n        }else if(this.dataset.url){\r\n            this.video.src = this.dataset.url;\r\n        }\r\n\r\n        if(! this.dataset.name){\r\n            this.remove();\r\n            throw new Error(`this file is undefined ${this.dataset.name}`);\r\n        }\r\n\r\n        this.attachShadow({ mode : 'open' });\r\n        this.shadowRoot.append(Video.defaultStyle.cloneNode(true));\r\n\r\n        this.createDefaultContent().then(({wrap, description, slot, aticle})=>{\r\n            this.connectedChildAfterCallback = (addedList) => {\r\n                aticle.append(...addedList);\r\n            }\r\n        });\r\n\r\n        this.disconnectedAfterCallback = () => {\r\n            if(this.dataset.url.startsWith('blob:file')){\r\n                setTimeout(() => {\r\n                    URL.revokeObjectURL(this.dataset.url);\r\n                }, 1000 * 60 * 2)\r\n            }\r\n        }\r\n\t}\r\n\r\n    createDefaultContent(){\r\n        return new Promise(resolve=>{\r\n            let wrap = Object.assign(document.createElement('div'),{\r\n\r\n            });\r\n            wrap.draggable = false\r\n\r\n            this.shadowRoot.append(wrap);\r\n\r\n            let videoContanier = Object.assign(document.createElement('div'),{\r\n                className: `${Video.defaultStyle.id} video-contanier`\r\n            });\r\n\r\n            this.video.dataset.video_name = this.dataset.name\r\n\r\n            videoContanier.append(this.video);\r\n            this.video.onload = () => {\r\n                if(\r\n                    (this.file.length != 0 && video.canPlayType(this.file.files[0].type) == '') ||\r\n                    (\r\n                        this.dataset.name && \r\n                        this.video.canPlayType(\r\n                            `video/${this.dataset.name.substring(this.dataset.name.lastIndexOf('.') + 1)}`\r\n                        ) == ''\r\n                    )\r\n                ){\r\n                    this.videoIsNotWorking();\r\n                }\r\n            }\r\n            this.video.onloadeddata = () => {\r\n                //videoContanier.style.height = window.getComputedStyle(video).height;\r\n                /*let applyToolAfterSelection = window.getSelection(), range = applyToolAfterSelection.getRangeAt(0);\r\n                let scrollTarget;\r\n                if(range.endContainer.nodeType == Node.TEXT_NODE){\r\n                    scrollTarget = range.endContainer.parentElement\r\n                }else{\r\n                    scrollTarget = range.endContainer;\r\n                }\r\n                scrollTarget.scrollIntoView({ behavior: \"instant\", block: \"end\", inline: \"nearest\" });\r\n                */\r\n                this.video.play();\r\n                if(this.dataset.width){\r\n                    this.video.width = this.dataset.width;\r\n                }\r\n            }\r\n            this.video.onerror = () => {\r\n                //videoContanier.style.height = window.getComputedStyle(video).height;\r\n            }\r\n\r\n            let {description, slot, aticle} = this.createDescription(this.video, videoContanier);\r\n\r\n            this.connectedAfterOnlyOneCallback = () => {\r\n                if(this.childNodes.length != 0 && this.childNodes[0]?.tagName != 'BR'){\r\n                    aticle.append(...[...this.childNodes].filter(e=>e!=aticle));\r\n                }\r\n                wrap.replaceChildren(...[description,videoContanier].filter(e=>e != undefined));\r\n                \r\n                Video.videoBox.addVideoHoverEvent(this.video, this);\r\n                if(this.nextSibling?.tagName == 'BR'){\r\n                    this.nextSibling.remove()\r\n                }\r\n\r\n                resolve({wrap, description, slot, aticle})\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLVideoElement} image \r\n     * @param {HTMLDivElement} imageContanier \r\n     * @returns {HTMLDivElement}\r\n     */\r\n    createDescription(video, videoContanier){\r\n        let description = Object.assign(document.createElement('div'), {\r\n            className : `${Video.defaultStyle.id} video-description`\r\n        });\r\n\r\n        description.dataset.file_name = this.dataset.name\r\n        description.dataset.open_status = this.dataset.open_status || '▼'\r\n        videoContanier.style.height = this.dataset.height || 'auto'\r\n\r\n        let {slot, aticle} = this.createSlot()\r\n        \r\n        if(slot){\r\n            description.append(slot);\r\n        }\r\n\r\n        description.onclick = (event) => {\r\n\r\n            if(description.dataset.open_status == '▼'){\r\n                description.dataset.open_status = '▶'\r\n                videoContanier.style.height = window.getComputedStyle(video).height;\r\n                setTimeout(()=>{\r\n                    videoContanier.style.height = '0px';\r\n                    this.dataset.height = '0px';\r\n                },100)\r\n\r\n            }else{\r\n                description.dataset.open_status = '▼';\r\n                setTimeout(()=>{\r\n                    videoContanier.style.height = window.getComputedStyle(video).height;\r\n                    this.dataset.height = 'auto';\r\n                },100)\r\n                \r\n                video.style.opacity = '';\r\n                video.style.visibility = '';\r\n            }\r\n\r\n            this.dataset.open_status = description.dataset.open_status;\r\n        }\r\n\r\n        videoContanier.ontransitionend = () => {\r\n            if(description.dataset.open_status == '▼'){\r\n                videoContanier.style.height = 'auto';\r\n            }else{\r\n                video.style.opacity = 0;\r\n                video.style.visibility = 'hidden';\r\n            }\r\n        }\r\n\r\n        return {description, slot, aticle};\r\n    }\r\n\r\n    createSlot(){\r\n        let aticle = document.createElement('div');\r\n        \r\n        aticle.contentEditable = 'false';\r\n        aticle.draggable = 'false';\r\n\r\n        //if(this.childNodes.length != 0 && this.childNodes[0]?.tagName != 'BR'){\r\n            let randomId = Array.from(\r\n                window.crypto.getRandomValues(new Uint32Array(16)),\r\n                (e)=>e.toString(32).padStart(2, '0')\r\n            ).join('');\r\n            //aticle.append(...[...this.childNodes].map(e=>e.cloneNode(true)));\r\n            aticle.append(...this.childNodes);\r\n            aticle.slot = Video.descriptionName + '-' + randomId;\r\n            this.append(aticle);\r\n            \r\n            let slot = Object.assign(document.createElement('slot'),{\r\n                name: Video.descriptionName + '-' + randomId\r\n            });\r\n\r\n            return {slot, aticle};\r\n        //}else{\r\n        //    return undefined;\r\n        //}\r\n    }\r\n\r\n    videoIsNotWorking(){\r\n        alert(`${this.dataset.name}은 호환되지 않는 영상입니다.`);\r\n        this.remove();\r\n    }\r\n\r\n    /**\r\n     * @returns {HTMLInputElement}\r\n     */\r\n    get selectedFile(){\r\n        return this.#file\r\n    }\r\n}\r\n","\r\nimport FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\n\r\nexport default class Resources extends FreedomInterface {\r\n\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n    static customResourcesCallback = () => {}; \r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-resources-style'\r\n\t});\r\n\r\n    static slotName = 'free-will-editor-resources-description-slot';\r\n\r\n    static #selectedFile = Object.assign(document.createElement('input'), {\r\n        type: 'file'\r\n    });\r\n\r\n    static get selectedFile(){\r\n        return this.#selectedFile;\r\n    }\r\n\r\n    static #resourcesCallback = () => {};\r\n\r\n    static #sizeLimitOverCallback = () => {};\r\n    static isDefaultStyle = true;\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-resources';\r\n        //this.toolHandler.isInline = false;\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: '',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n            innerHTML: `\r\n            <svg class=\"${this.#defaultStyle.id} css-gg-file-add-icon\" width=\"0.9rem\" height=\"0.9rem\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path d=\"M10 18V16H8V14H10V12H12V14H14V16H12V18H10Z\" fill=\"currentColor\" />\r\n                <path\r\n                    fill-rule=\"evenodd\"\r\n                    clip-rule=\"evenodd\"\r\n                    d=\"M6 2C4.34315 2 3 3.34315 3 5V19C3 20.6569 4.34315 22 6 22H18C19.6569 22 21 20.6569 21 19V9C21 5.13401 17.866 2 14 2H6ZM6 4H13V9H19V19C19 19.5523 18.5523 20 18 20H6C5.44772 20 5 19.5523 5 19V5C5 4.44772 5.44772 4 6 4ZM15 4.10002C16.6113 4.4271 17.9413 5.52906 18.584 7H15V4.10002Z\"\r\n                    fill=\"currentColor\"\r\n                />\r\n            </svg>\r\n            `,\r\n            title: 'Resources'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else{\r\n                this.#selectedFile.click();\r\n                this.#selectedFile.onchange = ()=> {\r\n                    //let url = URL.createObjectURL(this.#selectedFile.files[0])\r\n\r\n                    this.toolHandler.toolButton.dataset.tool_status = 'active';\r\n                }\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n            .${this.toolHandler.defaultClass} {\r\n                position: relative;\r\n            }\r\n            .${this.#defaultStyle.id}.css-gg-file-add-icon {\r\n                zoom:120%;\r\n            }\r\n            .${this.#defaultStyle.id}.resources-description{            \r\n                cursor: pointer;\r\n                display: inline-flex;\r\n                align-items: center;\r\n            }\r\n\r\n            .${this.#defaultStyle.id}.resources-description::after{\r\n                margin-left: 0.5em;\r\n                content: ' ['attr(data-file_name)'] 'attr(data-open_status);\r\n                font-size: small;\r\n                color: #bdbdbd;\r\n            }\r\n            .${this.#defaultStyle.id}.resources-download-button, .${this.#defaultStyle.id}.resources-preview-button{\r\n                margin-left: 1vw;\r\n                border: solid 2px #e5e5e5;\r\n                cursor: pointer;\r\n                background: none;\r\n            }\r\n            .${this.#defaultStyle.id}.resources-contanier{\r\n                width: auto;\r\n                transition: height 0.5s ease-in-out;\r\n                overflow: hidden;\r\n                position: relative;\r\n                margin-top: 0.7vh;\r\n            }\r\n            .${this.#defaultStyle.id}.resources-contanier object{\r\n                width: 99%;\r\n                height: auto;\r\n                aspect-ratio: attr(width) / attr(height);\r\n                border: solid 2px #efefef;\r\n            }\r\n            .${this.#defaultStyle.id}.resources-contanier object.unload{\r\n                width: auto;\r\n            }\r\n\r\n        ` \r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n    static get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n    static set resourcesCallback(callback){\r\n        this.#resourcesCallback = callback;\r\n    }\r\n    static get resourcesCallback(){\r\n        return this.#resourcesCallback;\r\n    }\r\n\r\n    static set sizeLimitOverCallback(callback){\r\n        this.#sizeLimitOverCallback = callback;\r\n    }\r\n    static get sizeLimitOverCallback(){\r\n        return this.#sizeLimitOverCallback;\r\n    }\r\n\r\n    #file;\r\n    \r\n    imgLoadEndCallback = (event) => {};\r\n\r\n    resources = Object.assign(document.createElement('object'), {\r\n\r\n    });\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Resources, dataset, {deleteOption : FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE});\r\n        \r\n        if( ! dataset && Object.keys(this.dataset).length == 0){\r\n            this.#file = Resources.selectedFile.cloneNode(true);\r\n            Resources.selectedFile.files = new DataTransfer().files;\r\n\r\n            this.dataset.url = URL.createObjectURL(this.#file.files[0]);\r\n            this.dataset.name = this.#file.files[0].name;\r\n            this.dataset.last_modified = this.#file.files[0].lastModified;\r\n            this.dataset.size = this.#file.files[0].size;\r\n            this.dataset.content_type = this.#file.files[0].type;\r\n\r\n            let url = URL.createObjectURL(this.#file.files[0], this.dataset.content_type);\r\n            this.dataset.url = url;\r\n            /*fetch(this.dataset.url).then(res=>res.blob()).then(blob => {\r\n                const reader = new FileReader();\r\n                reader.readAsDataURL(blob);\r\n                reader.onloadend = () => {\r\n                    this.dataset.base64 = reader.result;\r\n                }\r\n            })*/\r\n           \r\n        }else if(Resources.customResourcesCallback && typeof Resources.customResourcesCallback == 'function'){\r\n            Resources.customResourcesCallback(this);\r\n        }else if(this.dataset.url){\r\n        }\r\n        this.resources.type = this.dataset.content_type;\r\n        this.resources.data = this.dataset.url;\r\n        this.resources.dataset.resources_name = this.dataset.name\r\n\r\n        if(! this.dataset.name){\r\n            this.remove();\r\n            throw new Error(`this file is undefined ${this.dataset.name}`);\r\n        }\r\n        \r\n        this.attachShadow({ mode : 'open' });\r\n        this.shadowRoot.append(Resources.defaultStyle.cloneNode(true));\r\n        \r\n        this.createDefaultContent().then(({wrap, description, slot, aticle})=>{\r\n            this.connectedChildAfterCallback = (addedList) => {\r\n                aticle.append(...addedList);\r\n            }\r\n        });\r\n        \r\n        this.disconnectedAfterCallback = () => {\r\n            this.resources.remove();\r\n            if(this.dataset.url.startsWith('blob:file')){\r\n                //setTimeout(() => {\r\n                    //URL.revokeObjectURL(this.dataset.url);\r\n                //}, 1000 * 60 * 2)\r\n            }\r\n        }\r\n\r\n\t}\r\n\r\n    createDefaultContent(){\r\n        return new Promise(resolve => {\r\n            let wrap = Object.assign(document.createElement('div'),{\r\n\r\n            });\r\n            wrap.draggable = false\r\n\r\n            this.shadowRoot.append(wrap);\r\n\r\n            let resourcesContanier = Object.assign(document.createElement('div'),{\r\n                className: `${Resources.defaultStyle.id} resources-contanier`\r\n            });\r\n\r\n            /*let resources = Object.assign(document.createElement('img'), {\r\n                //src :`https://developer.mozilla.org/pimg/aHR0cHM6Ly9zLnprY2RuLm5ldC9BZHZlcnRpc2Vycy9iMGQ2NDQyZTkyYWM0ZDlhYjkwODFlMDRiYjZiY2YwOS5wbmc%3D.PJLnFds93tY9Ie%2BJ%2BaukmmFGR%2FvKdGU54UJJ27KTYSw%3D`\r\n                //src: this.dataset.url\r\n                //src: imgUrl\r\n            });*/\r\n\r\n            //if(this.file.files.length != 0){\r\n\r\n            //}\r\n\r\n            //resourcesContanier.append(this.resources);\r\n\r\n            this.resources.onload = (event) => {\r\n                if(this.dataset.width){\r\n                    this.resources.width = this.dataset.width;\r\n                }\r\n                //console.log(this.resources.contentWindow);\r\n                if( ! this.resources.contentWindow){\r\n                    this.resources.classList.add('unload')\r\n                }else{\r\n                    this.resources.contentWindow.document.body.style.contentVisibility = 'auto'\r\n                    this.resources.contentWindow.document.body.style.containIntrinsicSize = '1px 5000px'\r\n                }\r\n\r\n                Resources.resourcesCallback({status : 'load', resources : this.resources});\r\n                /*let applyToolAfterSelection = window.getSelection(), range = applyToolAfterSelection.getRangeAt(0);\r\n                let scrollTarget;\r\n                if(range.endContainer.nodeType == Node.TEXT_NODE){\r\n                    scrollTarget = range.endContainer.parentElement\r\n                }else{\r\n                    scrollTarget = range.endContainer;\r\n                }\r\n                scrollTarget.scrollIntoView({ behavior: \"instant\", block: \"end\", inline: \"nearest\" });\r\n                */\r\n            //this.imgLoadEndCallback();\r\n                //resourcesContanier.style.height = window.getComputedStyle(resources).height;\r\n            }\r\n            this.resources.onerror = (event) => {\r\n                //console.log(event);\r\n                //resourcesContanier.style.height = window.getComputedStyle(resources).height;\r\n                this.resources.dataset.error = '';\r\n                if( ! this.resources.contentWindow){\r\n                    this.resources.classList.add('unload')\r\n                }\r\n                Resources.resourcesCallback({status : 'error', resources : this.resources});\r\n                \r\n            }\r\n\r\n            let {description, slot, aticle} = this.createDescription(this.resources, resourcesContanier);\r\n            let downloadButton = Object.assign(document.createElement('button'), {\r\n                className: `${Resources.defaultStyle.id} resources-download-button`,\r\n                innerHTML : `<b>Download</b>`,\r\n                onclick : () => {\r\n                    fetch(this.resources.data).then(res=>res.blob()).then(blob => {\r\n                        let url = URL.createObjectURL(blob, this.dataset.content_type);\r\n                        let a = document.createElement('a');\r\n                        a.href = url;\r\n                        a.download = this.dataset.name;\r\n                        a.click();\r\n                        a.remove();\r\n                        setTimeout(() => {\r\n                            URL.revokeObjectURL(url);\r\n                        }, 1000 * 60 * 5)\r\n                    })\r\n                }\r\n            });\r\n            let previewButton = Object.assign(document.createElement('button'), {\r\n                className: `${Resources.defaultStyle.id} resources-preview-button`,\r\n                innerHTML : `<b>Preview</b>`,\r\n                onclick : () => {\r\n                    resourcesContanier.append(this.resources);\r\n                }\r\n            });\r\n\r\n            this.connectedAfterOnlyOneCallback = () => {\r\n                if(this.childNodes.length != 0 && this.childNodes[0]?.tagName != 'BR'){\r\n                    aticle.append(...[...this.childNodes].filter(e=>e!=aticle));\r\n                }\r\n                wrap.replaceChildren(...[description,downloadButton,previewButton,resourcesContanier].filter(e=>e != undefined));\r\n                \r\n                if(this.nextSibling?.tagName == 'BR'){\r\n                    this.nextSibling.remove()\r\n                }\r\n\r\n                resolve({wrap, description, slot, aticle})\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLObjectElement} resources \r\n     * @param {HTMLDivElement} resourcesContanier \r\n     * @returns \r\n     */\r\n    createDescription(resources, resourcesContanier){\r\n        let description = Object.assign(document.createElement('div'),{\r\n            className: `${Resources.defaultStyle.id} resources-description`\r\n        });\r\n\r\n        description.dataset.file_name = this.dataset.name\r\n        description.dataset.open_status = this.dataset.open_status || '▼'\r\n        resourcesContanier.style.height = this.dataset.height || 'auto'\r\n        \r\n        description.dataset.open_status = '▼';\r\n        \r\n        let {slot, aticle} = this.createSlot();\r\n        \r\n        description.append(slot)\r\n\r\n        description.onclick = (event) => {\r\n            /*if(event.composedPath().some(e=> e== downloadButton)){\r\n                return;\r\n            }*/\r\n            if(description.dataset.open_status == '▼'){\r\n                description.dataset.open_status = '▶'\r\n                resourcesContanier.style.height = window.getComputedStyle(resources).height;\r\n                setTimeout(()=>{\r\n                    resourcesContanier.style.height = '0px';\r\n                    this.dataset.height = '0px';\r\n                },100)\r\n\r\n            }else{\r\n                description.dataset.open_status = '▼';\r\n                setTimeout(()=>{\r\n                    resourcesContanier.style.height = window.getComputedStyle(resources).height;\r\n                    this.dataset.height = 'auto';\r\n                },100)\r\n                \r\n                resources.style.opacity = '';\r\n                resources.style.visibility = '';\r\n\r\n            }\r\n            this.dataset.open_status = description.dataset.open_status;\r\n        }\r\n\r\n        resourcesContanier.ontransitionend = () => {\r\n            if(description.dataset.open_status == '▼'){\r\n                resourcesContanier.style.height = 'auto';\r\n            }else{\r\n                resources.style.opacity = 0;\r\n                resources.style.visibility = 'hidden';\r\n            }\r\n        }\r\n\r\n        return {description, slot, aticle};\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @returns {HTMLSlotElement}\r\n     */\r\n    createSlot(){\r\n        let aticle = document.createElement('div');\r\n        \r\n        aticle.contentEditable = 'false';\r\n        aticle.draggable = 'false'; \r\n\r\n        //if(this.childNodes.length != 0 && this.childNodes[0]?.tagName != 'BR'){\r\n            let randomId = Array.from(\r\n                window.crypto.getRandomValues(new Uint32Array(16)),\r\n                (e)=>e.toString(32).padStart(2, '0')\r\n            ).join('');\r\n            //aticle.append(...[...this.childNodes].map(e=>e.cloneNode(true)));\r\n            aticle.append(...this.childNodes);\r\n            aticle.slot = Resources.slotName + '-' + randomId\r\n            this.append(aticle);\r\n            \r\n            let slot = Object.assign(document.createElement('slot'),{\r\n                name: Resources.slotName + '-' + randomId\r\n            });\r\n            return {slot, aticle};\r\n        //}else{\r\n        //   return undefined\r\n        //}\r\n\r\n    }\r\n    /**\r\n     * @returns {HTMLInputElement}\r\n     */\r\n    get selectedFile(){\r\n        return this.#file\r\n    }\r\n    \r\n    set resourcesUrl(url){\r\n        let clone = this.resources.cloneNode(true);\r\n        clone.data = url;\r\n        this.resources.after(clone);\r\n        this.resources.remove();\r\n        this.resources = clone;\r\n        clone.onload = () => {\r\n            if(this.resources == clone) return;\r\n            if(this.dataset.width){\r\n                clone.width = this.dataset.width;\r\n            }\r\n            if( ! clone.contentWindow){\r\n                clone.classList.add('unload')\r\n            }\r\n        }\r\n        clone.onerror = () => {\r\n            clone.dataset.error = '';\r\n            if( ! clone.contentWindow){\r\n                clone.classList.add('unload')\r\n            }\r\n        }\r\n    }\r\n    get resourcesUrl(){\r\n        this.resources.data;\r\n    }\r\n}\r\n","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\n\r\nexport default class Code extends FreedomInterface {\r\n\t//static extendsElement = 'strong';\r\n\t//static defaultClass = 'line';\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-code-style'\r\n\t});\r\n    static isDefaultStyle = true;\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-code';\r\n\t\tthis.toolHandler.isInline = false;\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: '',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n            innerHTML: `\r\n            <svg class=\"${this.#defaultStyle.id} css-gg-code-icon\"\r\n            width=\"0.9rem\"\r\n            height=\"0.9rem\"\r\n            viewBox=\"0 0 24 24\"\r\n            fill=\"none\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            >\r\n                <path\r\n                d=\"M13.325 3.05011L8.66741 20.4323L10.5993 20.9499L15.2568 3.56775L13.325 3.05011Z\"\r\n                fill=\"currentColor\"\r\n                />\r\n                <path\r\n                d=\"M7.61197 18.3608L8.97136 16.9124L8.97086 16.8933L3.87657 12.1121L8.66699 7.00798L7.20868 5.63928L1.04956 12.2017L7.61197 18.3608Z\"\r\n                fill=\"currentColor\"\r\n                />\r\n                <path\r\n                d=\"M16.388 18.3608L15.0286 16.9124L15.0291 16.8933L20.1234 12.1121L15.333 7.00798L16.7913 5.63928L22.9504 12.2017L16.388 18.3608Z\"\r\n                fill=\"currentColor\"\r\n                />\r\n            </svg>\r\n            `,\r\n            title: 'Code Block'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else{\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n            .${this.#defaultStyle.id}-button{\r\n            }\r\n            .${this.#defaultStyle.id}.css-gg-code-icon{\r\n                zoom:120%;\r\n            }\r\n\t\t\t.${this.toolHandler.defaultClass} {\r\n                display: block;\r\n                background-color: #e7e7e7;\r\n                margin-inline: 0.5em;\r\n                border: solid 1px #d1d1d1;\r\n                border-radius: 4px;\r\n                white-space: pre-wrap;\r\n                font-family: monospace;\r\n                box-shadow: 0px 0px 3px 0px #d1d1d1;\r\n                padding: 0.5em 1em 0.5em 1em;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tparentLine;\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Code, dataset, {deleteOption : FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE});\r\n        /*\r\n\t\tsuper.connectedAfterOnlyOneCallback = () => {\r\n\t\t\tthis.dataset.index = Code.toolHandler.connectedFriends.length;\r\n\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tthis.parentEditor.createLine();\r\n\t\t\t}else{\r\n\t\t\t\tnextLine.line.lookAtMe();\r\n\t\t\t}\r\n\t\t}\r\n\r\n        super.disconnectedChildAfterCallback = () => {\r\n\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tthis.parentEditor.createLine();\r\n\t\t\t}\r\n        }\r\n        */\r\n\t}\r\n\r\n}","export default class HyperlinkBox{\r\n\t#style = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-hyperlink-box'\r\n\t});\r\n\r\n\t#hyperlinkBox = Object.assign(document.createElement('div'),{\r\n\t\tclassName: 'hyperlink-box-wrap'\r\n\t});\r\n\r\n\t#hyperlinkBoxVw = 20;\r\n\r\n\t#urlInputText = Object.assign(document.createElement('input'), {\r\n        autocomplete: 'off',\r\n        placeholder: 'Please enter your link ',\r\n        type: 'url',\r\n        name: 'hyperlink-url-input',\r\n        className: 'hyperlink-url-input',\r\n\t\trequired: false,\r\n        /*\r\n\t\toninput: (event) => this.#searchInputTextEvent(event),\r\n        onkeyup: (event) => {\r\n            if(event.key == 'Enter' && this.#searchInputText.value != ''){\r\n                let item = this.#fontSizeBoxContainer.querySelector(`[data-size=\"${this.#searchInputText.value}\"]`);\r\n                this.#apply(item, event);\r\n            }\r\n        },\r\n\t\t*/\r\n    });\r\n\r\n\t#invalidUrlMessage = Object.assign(document.createElement('span'), {\r\n\r\n\t})\r\n\r\n\t#applyCallback = () => {}\r\n\t\r\n    #lastSelectionRange;\r\n\r\n\t#lastUrl;\r\n\r\n\tconstructor(){\r\n\t\tlet style = document.querySelector(`#${this.#style.id}`);\r\n        if(! style){\r\n            document.head.append(this.createStyle());\r\n        }else{\r\n            this.#style = style;\r\n        }\r\n\t\tlet urlInputTextWrapper = Object.assign(document.createElement('div'), {\r\n\t\t\t//id: 'url-input-text-wrapper',\r\n\t\t\tclassName: 'url-input-text-wrapper',\r\n\t\t\t/*onsubmit : (event) => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tapplyButton.click();\r\n\t\t\t}*/\r\n\t\t})\r\n\t\turlInputTextWrapper.append(this.#urlInputText);\r\n\t\tthis.#urlInputText.oninput = (event) => {\r\n\t\t\tif(this.#invalidUrlMessage.isConnected){\r\n\t\t\t\tthis.#invalidUrlMessage.remove();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.#urlInputText.onkeydown = (event) => {\r\n\t\t\tif(event.key == 'Enter'){\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tapplyButton.onclick();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tlet cancelButton = Object.assign(document.createElement('button'), {\r\n\t\t\tclassName: 'cancel-button',\r\n\t\t\ttype: 'button',\r\n\t\t\ttextContent: 'cancel'\r\n\t\t})\r\n\t\tcancelButton.onclick = () => {\r\n\t\t\tthis.close();\r\n\t\t}\r\n\t\tlet applyButton = Object.assign(document.createElement('button'), {\r\n\t\t\tclassName: 'apply-button',\r\n\t\t\ttype: 'button',\r\n\t\t\ttextContent: 'apply'\r\n\t\t})\r\n\t\tapplyButton.onclick = (event) => {\r\n\t\t\tif( ! this.#urlInputText.checkValidity()){\r\n\t\t\t\tlet prevValue = this.#urlInputText.value\r\n\t\t\t\tthis.#urlInputText.value = `https://${this.#urlInputText.value}`;\r\n\t\t\t\tif(! this.#urlInputText.checkValidity()){\r\n\t\t\t\t\tthis.#urlInputText.value = prevValue;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.lastUrl = this.#urlInputText.value;\r\n\t\t\tthis.#urlInputText.value = '';\r\n\t\t\tif(this.#lastSelectionRange){\r\n\t\t\t\tlet selection = window.getSelection();\r\n\t\t\t\tselection.removeAllRanges();\r\n\t\t\t\tselection.addRange(this.#lastSelectionRange);\r\n\t\t\t}\r\n\t\t\tthis.applyCallback(event);\r\n\t\t}\r\n\t\tlet buttonWrapeer = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'button-wrap',\r\n\t\t})\r\n\t\tbuttonWrapeer.append(cancelButton, applyButton);\r\n\t\tthis.#hyperlinkBox.append(urlInputTextWrapper, buttonWrapeer)\r\n\t}\r\n\r\n    async open(){\r\n\t\tlet selection = window.getSelection();\r\n\t\tif(selection.rangeCount != 0 && selection.isCollapsed == false){\r\n\t\t\tlet range = selection.getRangeAt(0);\r\n\t\t\tthis.#lastSelectionRange = range.cloneRange();\r\n\t\t}\r\n\t\tdocument.body.append(this.#hyperlinkBox);\r\n\t\tlet appendAwait = setInterval(()=>{\r\n\t\t\tif( ! this.#hyperlinkBox.isConnected){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tclearInterval(appendAwait);\r\n\t\t\tthis.#urlInputText.focus();\r\n\t\t},50)\r\n    }\r\n\r\n    close(){\r\n        this.#hyperlinkBox.remove();\r\n    }\r\n    \r\n\tset applyCallback(applyCallback){\r\n        this.#applyCallback = applyCallback;\r\n    }\r\n\r\n    get applyCallback(){\r\n        return this.#applyCallback;\r\n    }\r\n\r\n\tget hyperlinkBox(){\r\n\t\treturn this.#hyperlinkBox;\r\n\t}\r\n\r\n\tcreateStyle(){\r\n\t\tthis.#style.textContent = `\r\n\t\t\t.hyperlink-box-wrap{\r\n\t\t\t\tbackground: #343434;\r\n\t\t\t\tposition: fixed;\r\n\t\t\t\tpadding: 0.9%;\r\n\t\t\t\twidth: ${this.#hyperlinkBoxVw}vw;\r\n\t\t\t\theight: auto;\r\n\t\t\t\tcolor: white;\r\n\t\t\t\tmin-width: 100px;\r\n\t\t\t\toverflow-y: auto;\r\n\t\t\t\t-webkit-user-select: none;\r\n\t\t\t\t-moz-user-select: none;\r\n\t\t\t\t-ms-user-select: none;\r\n\t\t\t\tuser-select: none;\r\n\t\t\t\toverflow-x: hidden;\r\n\t\t\t\tdisplay: grid;\r\n\t\t\t\tgap: 1vh;\r\n\t\t\t\talign-content: center;\r\n\t\t\t\tjustify-content: space-around;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-items: center;\r\n                z-index: 999;\r\n\t\t\t}\r\n\t\t\t.hyperlink-box-wrap .url-input-text-wrapper{\r\n\t\t\t\twidth: inherit;\r\n\t\t\t}\r\n\t\t\t.hyperlink-box-wrap .url-input-text-wrapper .hyperlink-url-input{\r\n\t\t\t\twidth: -webkit-fill-available;\r\n\t\t\t\tbackground-color: #ffffff00;\r\n\t\t\t\tcolor: #b9b9b9;\r\n\t\t\t\tborder-bottom: solid 1px #4c4c4c;\r\n\t\t\t\tborder-left: solid 1px #4c4c4c;\r\n\t\t\t}\r\n\t\t\t.hyperlink-box-wrap .button-wrap{\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-around;\r\n\t\t\t\twidth: inherit;\r\n\t\t\t}\r\n\t\t\t.hyperlink-box-wrap .button-wrap .apply-button,\r\n\t\t\t.hyperlink-box-wrap .button-wrap .cancel-button {\r\n\t\t\t\tbackground: none;\r\n\t\t\t\tborder: revert;\r\n\t\t\t\tcolor: #b9b9b9;\r\n\t\t\t\tborder-color: #464646;\r\n\t\t\t}\r\n\t\t`\r\n\t\treturn this.#style;\r\n\t}\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport HyperlinkBox from \"../component/HyperlinkBox\";\r\n\r\nexport default class Hyperlink extends FreedomInterface {\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-link-style'\r\n\t});\r\n\r\n    static hyperlinkBox;\r\n\tstatic isDefaultStyle = true;\r\n\tstatic{\r\n\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-link';\r\n\t\t\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\tinnerHTML: `\r\n\t\t\t\t<svg class=\"${this.#defaultStyle.id} css-gg-link-icon\"\r\n\t\t\t\twidth=\"0.9rem\"\r\n\t\t\t\theight=\"0.9rem\"\r\n\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\tfill=\"none\"\r\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=\"M14.8284 12L16.2426 13.4142L19.071 10.5858C20.6331 9.02365 20.6331 6.49099 19.071 4.9289C17.509 3.3668 14.9763 3.3668 13.4142 4.9289L10.5858 7.75732L12 9.17154L14.8284 6.34311C15.6095 5.56206 16.8758 5.56206 17.6568 6.34311C18.4379 7.12416 18.4379 8.39049 17.6568 9.17154L14.8284 12Z\"\r\n\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=\"M12 14.8285L13.4142 16.2427L10.5858 19.0711C9.02372 20.6332 6.49106 20.6332 4.92896 19.0711C3.36686 17.509 3.36686 14.9764 4.92896 13.4143L7.75739 10.5858L9.1716 12L6.34317 14.8285C5.56212 15.6095 5.56212 16.8758 6.34317 17.6569C7.12422 18.4379 8.39055 18.4379 9.1716 17.6569L12 14.8285Z\"\r\n\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=\"M14.8285 10.5857C15.219 10.1952 15.219 9.56199 14.8285 9.17147C14.4379 8.78094 13.8048 8.78094 13.4142 9.17147L9.1716 13.4141C8.78107 13.8046 8.78107 14.4378 9.1716 14.8283C9.56212 15.2188 10.1953 15.2188 10.5858 14.8283L14.8285 10.5857Z\"\r\n\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</svg>\r\n\t\t\t`,\r\n\t\t\ttitle: 'Hyperlink'\r\n        });\r\n\t\t\r\n\t\tthis.hyperlinkBox = new HyperlinkBox();\r\n\t\t\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else if(this.hyperlinkBox.hyperlinkBox.isConnected){\r\n\t\t\t\tthis.hyperlinkBox.close();\r\n\t\t\t}else{\r\n\t\t\t\tthis.hyperlinkBox.open().then(()=>{\r\n\t\t\t\t\tsuper.processingElementPosition(this.hyperlinkBox.hyperlinkBox, this.toolHandler.toolButton);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdocument.addEventListener(\"scroll\", () => {\r\n\t\t\tif(this.hyperlinkBox.hyperlinkBox.isConnected){\r\n\t\t\t\tsuper.processingElementPosition(this.hyperlinkBox.hyperlinkBox, this.toolHandler.toolButton);\r\n\t\t\t}\r\n\t\t});\r\n        window.addEventListener('resize', (event) => {\r\n            if(this.hyperlinkBox.hyperlinkBox.isConnected){\r\n\t\t\t\tsuper.processingElementPosition(this.hyperlinkBox.hyperlinkBox, this.toolHandler.toolButton);\r\n            }\r\n\t\t})\r\n\r\n\t\tthis.hyperlinkBox.applyCallback = (event) => {\r\n\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active'\r\n\t\t\tthis.hyperlinkBox.close();\r\n\t\t}\r\n\r\n\t\tsuper.outClickElementListener(this.hyperlinkBox.hyperlinkBox, ({oldEvent, newEvent, isMouseOut})=>{\r\n\t\t\tif(isMouseOut && this.hyperlinkBox.hyperlinkBox.isConnected && ! super.isMouseInnerElement(this.toolHandler.toolButton)){\r\n\t\t\t\tthis.hyperlinkBox.close();\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t}\r\n\t\t\t.${this.#defaultStyle.id}.css-gg-link-icon{\r\n\t\t\t\tzoom:120%;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} {\r\n\t\t\t\tcolor: -webkit-link;\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t\ttext-decoration: underline;\r\n\t\t\t\tdisplay: grid;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} > [data-hyperlink_child=\"${Hyperlink.toolHandler.defaultClass}-child\"]{\r\n\t\t\t\tall: initial;\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t\tmargin-left: 1em;\r\n\t\t\t\tpadding-left: 1em;\r\n\t\t\t\tborder-left: 5px solid #d7d7db;\r\n\t\t\t\twidth: 95%;\r\n\t\t\t\tfloat: left;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} > [data-hyperlink_child=\"${Hyperlink.toolHandler.defaultClass}-child\"] > *{\r\n\t\t\t\tfont-size: 14px;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} > [data-hyperlink_child=\"${Hyperlink.toolHandler.defaultClass}-child\"] img{\r\n\t\t\t\tmax-width: 100%;\r\n                height: auto;\r\n                aspect-ratio: attr(width) / attr(height);\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass}-preview-url{\r\n\t\t\t\tposition: fixed;\r\n\t\t\t\tz-index: 9000;\r\n\t\t\t\twidth: 50vw;\r\n\t\t\t\theight: 50vh;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\t#aTag = Object.assign(document.createElement('a'), {\r\n\t\ttarget: '_blank'\r\n\t});\r\n\r\n\t/*\r\n\t#previewUrl = Object.assign(document.createElement('iframe'), {\r\n\t\tclassName: `${Hyperlink.toolHandler.defaultClass}-preview-url`,\r\n\t\t//referrerpolicy: 'origin',\r\n\t\t//allow: 'Permissions-Policy',\r\n\t\t//width: 100,\r\n\t\t//height: 100,\r\n\t});\r\n\t*/\r\n\t/*HyperlinkChild = class HyperlinkChild extends HTMLElement{\r\n\t\tconstructor(){\r\n\t\t\tsuper();\r\n\t\t\tthis.className = `${Hyperlink.toolHandler.defaultClass}-child`;\r\n\t\t\tthis.attachShadow({ mode : 'open' });\r\n\t\t\tthis.shadowRoot.append(Hyperlink.defaultStyle.cloneNode(true));\r\n\t\t}\r\n\t};*/\r\n\r\n\t//#hyperlinkChild;\r\n\tconstructor(dataset){\r\n\t\tsuper(Hyperlink, dataset);\r\n\t\t/*\r\n\t\tif( ! window.customElements.get(`${Hyperlink.toolHandler.defaultClass}-child`)){\r\n\t\t\twindow.customElements.define(`${Hyperlink.toolHandler.defaultClass}-child`, this.HyperlinkChild);\r\n\t\t}\r\n\t\t\r\n\t\tthis.#hyperlinkChild = new this.HyperlinkChild();\r\n\t\t\r\n\t\t*/\r\n\t\tlet getUrlMetadataPromise;\r\n\r\n\t\tif( ! dataset && Object.keys(this.dataset).length == 0){\r\n\t\t\tthis.dataset.href = Hyperlink.hyperlinkBox.lastUrl;\r\n\t\t\tgetUrlMetadataPromise = fetch(this.dataset.href, {\r\n\t\t\t\tmode: 'no-cors',\r\n\t\t\t}).then(response => {\r\n\t\t\t\treturn response.text();\r\n\t\t\t}).then(htmlText => {\r\n\t\t\t\tlet dom = new DOMParser().parseFromString(htmlText, 'text/html');\r\n\t\t\t\tthis.dataset.title = dom.querySelector('meta[name=\"og:title\"]')?.getAttribute('content') \r\n\t\t\t\t\t|| dom.querySelector('meta[name=\"twitter:title\"]')?.getAttribute('content')\r\n\t\t\t\t\t|| dom.querySelector('title')?.textContent\r\n\t\t\t\t\t|| '';\r\n\r\n\t\t\t\tthis.dataset.description = dom.querySelector('meta[name=\"description\"]')?.getAttribute('content') \r\n\t\t\t\t\t|| dom.querySelector('meta[name=\"og:description\"]')?.getAttribute('content') \r\n\t\t\t\t\t|| dom.querySelector('meta[name=\"twitter:description\"]')?.getAttribute('content')\r\n\t\t\t\t\t|| ''\r\n\t\r\n\t\t\t\tthis.dataset.image = dom.querySelector('meta[name=\"og:image\"]')?.getAttribute('content')\r\n\t\t\t\t\t|| dom.querySelector('meta[name=\"twitter:image\"]')?.getAttribute('content')\r\n\t\t\t\t\t|| ''\r\n\r\n\t\r\n\t\t\t\tthis.dataset.favicon = dom.querySelector('link[rel=\"icon\"]')?.getAttribute('href') || '';\r\n\r\n\t\t\t\tthis.dataset.siteName = new URL(this.dataset.href).hostname;\r\n\t\r\n\t\t\t\tlet p = document.createElement('p')\r\n\t\t\t\t//this.parentEditor.createLine();\r\n\t\t\t\t//this.#hyperlinkChild.shadowRoot.append(line);\r\n\t\t\t\t//this.append(line);\r\n\t\t\t\treturn p;\r\n\t\t\t}).catch(error=>{\r\n\t\t\t\tconsole.error(error);\r\n\t\t\t\t//this.style.color = 'red';\r\n\t\t\t\t//this.title = 'unknown site';\r\n\t\t\t\treturn undefined\r\n\t\t\t});\r\n        }else{\r\n\t\t\tgetUrlMetadataPromise = Promise.resolve().then(()=>{\r\n\t\t\t\t//let line = this.parentEditor.createLine();\r\n\t\t\t\t//line.contenteditable = false;\r\n\t\t\t\t//this.#hyperlinkChild.shadowRoot.append(line);\r\n\t\t\t\t//this.append(line);\r\n\t\t\t\t//let p = document.createElement('p')\r\n\t\t\t\t//return p\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.#aTag.href = this.dataset.href\r\n\t\tsuper.connectedAfterOnlyOneCallback = () => {\r\n\t\t\tgetUrlMetadataPromise.then(p => {\r\n\t\t\t\tif(! p){\r\n\t\t\t\t\tp = this.querySelector(`[data-hyperlink_child=\"${Hyperlink.toolHandler.defaultClass}-child\"]`);\r\n\t\t\t\t\tif( ! p){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tlet title;\r\n\t\t\t\tif(this.dataset.title != ''){\r\n\t\t\t\t\ttitle = Object.assign(document.createElement('p'), {\r\n\t\t\t\t\t\ttextContent: this.dataset.title\r\n\t\t\t\t\t})\r\n\t\t\t\t\ttitle.style.fontWeight = 'bold';\r\n\t\t\t\t}\r\n\t\t\t\tlet description;\r\n\t\t\t\tif(this.dataset.description != ''){\r\n\t\t\t\t\tdescription = Object.assign(document.createElement('p'),{\r\n\t\t\t\t\t\ttextContent: this.dataset.description\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tlet image;\r\n\t\t\t\tif(this.dataset.image != ''){\r\n\t\t\t\t\timage = Object.assign(document.createElement('p'),{\r\n\t\t\t\t\t\tinnerHTML: `\r\n\t\t\t\t\t\t\t<img data-image src=\"${this.dataset.image}\"/>\r\n\t\t\t\t\t\t`\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tlet favicon;\r\n\t\t\t\tif(this.dataset.favicon != ''){\r\n\t\t\t\t\tfavicon = Object.assign(document.createElement('span'), {\r\n\t\t\t\t\t\tinnerHTML: `\r\n\t\t\t\t\t\t\t<img data-favicon src=\"${this.dataset.favicon}\" style=\"width: 1.1em; vertical-align: text-bottom;\"/>\r\n\t\t\t\t\t\t`\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tlet siteName = Object.assign(document.createElement('span'), {\r\n\t\t\t\t\ttextContent: this.dataset.siteName\r\n\t\t\t\t});\r\n\t\t\t\tsiteName.style.fontSize = '12px';\r\n\t\t\t\tsiteName.style.fontWeight = 'bold';\r\n\t\t\t\t//this.#hyperlinkChild.shadowRoot.append(line);\r\n\t\t\t\tthis.append(p);\r\n\t\t\t\tp.dataset.hyperlink_child = `${Hyperlink.toolHandler.defaultClass}-child`;\r\n\t\t\t\tp.contenteditable = false;\r\n\t\t\t\tp.replaceChildren(...[\r\n\t\t\t\t\tfavicon, siteName,\r\n\t\t\t\t\ttitle,\r\n\t\t\t\t\tdescription,\r\n\t\t\t\t\timage\r\n\t\t\t\t].filter(e=>e!=undefined))\r\n\r\n\t\t\t\tthis.onclick = (event) => {\r\n\t\t\t\t\tif( ! event.composedPath().some(e=>e==p)){\r\n\t\t\t\t\t\tthis.#aTag.click();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}) \r\n\t\t}\r\n\r\n\t}\r\n\r\n}","import Line from './component/Line'\r\nimport FreeWiilHandler from './module/FreeWiilHandler'\r\nimport UndoManager from './fragment/UndoManager'\r\n\r\nimport Strong from \"./tools/Strong\"\r\nimport Color from \"./tools/Color\"\r\nimport Background from \"./tools/Background\"\r\nimport Strikethrough from \"./tools/Strikethrough\"\r\nimport Underline from \"./tools/Underline\"\r\nimport FontFamily from \"./tools/FontFamily\"\r\nimport Quote from \"./tools/Quote\"\r\nimport NumericPoint from \"./tools/NumericPoint\"\r\nimport BulletPoint from \"./tools/BulletPoint\"\r\nimport Sort from \"./tools/Sort\"\r\nimport FontSize from \"./tools/FontSize\"\r\nimport Italic from \"./tools/Italic\"\r\nimport Image from \"./tools/Image\"\r\nimport Video from \"./tools/Video\"\r\nimport Resources from './tools/Resources'\r\nimport Code from \"./tools/Code\"\r\nimport Hyperlink from \"./tools/Hyperlink\"\r\n\r\nimport FreedomInterface from './module/FreedomInterface'\r\n\r\nexport default class FreeWillEditor extends FreeWiilHandler {\r\n\t\r\n\tstatic componentsMap = {};\r\n\tstatic toolsMap = {};\r\n\r\n\tstatic LineBreakMode = class LineBreakMode{\r\n\t\tstatic #LineBreakModeEnum = class LineBreakModeEnum{\r\n\t\t\tvalue;\r\n\t\t\tconstructor(value){\r\n\t\t\t\tthis.value = value;\r\n\t\t\t\tObject.freeze(this);\r\n\t\t\t}\r\n\t\t}\r\n\t\tstatic NO_CHANGE = new this.#LineBreakModeEnum(1)\r\n\t\tstatic NEXT_LINE_FIRST = new this.#LineBreakModeEnum(2);\r\n\t\tstatic NEXT_LINE_LAST = new this.#LineBreakModeEnum(3);\r\n\t}\r\n\r\n\tstatic async getLowDoseJSON(targetElement, {afterCallback = (json)=> {}} = {}){\r\n\t\treturn Promise.all([...targetElement.childNodes]\r\n\t\t\t.map(async (node, index)=>{\r\n\t\t\t\treturn new Promise(resolve =>{\r\n\t\t\t\t\t//if(targetElement == this && node.nodeType == Node.TEXT_NODE){\r\n\t\t\t\t\t//\tresolve(undefined);\r\n\t\t\t\t\t//}\r\n\t\t\t\t\tresolve( FreeWillEditor.#toJSON(node, {afterCallback}) )\r\n\t\t\t\t})\r\n\t\t\t})).then(jsonList=>jsonList.filter(e=>e != undefined).map(e=> {\r\n\t\t\t\tdelete e.node;\r\n\t\t\t\treturn e;\r\n\t\t\t}))\r\n\t}\r\n\r\n\tstatic async #toJSON(node, {afterCallback}){\r\n\t\treturn new Promise(resolve=>{\r\n\t\t\tlet obj = {};\r\n\t\t\tif(node.nodeType == Node.TEXT_NODE && node.textContent != '' && node.textContent){\r\n\t\t\t\tobj.type = Node.TEXT_NODE;\r\n\t\t\t\tobj.name = node.constructor.name;\r\n\t\t\t\tobj.text = node.textContent\r\n\t\t\t\tobj.node = node;\r\n\t\t\t\tafterCallback(obj);\r\n\t\t\t\tresolve(obj);\r\n\t\t\t}else if(node.nodeType == Node.ELEMENT_NODE){\r\n\t\t\t\tobj.type = Node.ELEMENT_NODE;\r\n\t\t\t\tobj.name = node.constructor.name;\r\n\t\t\t\tobj.tagName = node.localName;\r\n\t\t\t\tobj.data = Object.assign({}, node.dataset);\r\n\t\t\t\tobj.node = node;\r\n\t\t\t\tif(node.hasAttribute('is_cursor')){\r\n\t\t\t\t\tobj.cursor_offset = node.getAttribute('cursor_offset');\r\n\t\t\t\t\tobj.cursor_type = node.getAttribute('cursor_type');\r\n\t\t\t\t\tobj.cursor_index = node.getAttribute('cursor_index');\r\n\t\t\t\t\tobj.cursor_scroll_x = node.getAttribute('cursor__scroll_x');\r\n\t\t\t\t\tobj.cursor_scroll_y = node.getAttribute('cursor_scroll_y');\r\n\t\t\t\t}\r\n\t\t\t\tthis.getLowDoseJSON(node, {afterCallback})\r\n\t\t\t\t.then(jsonList => {\r\n\t\t\t\t\tobj.childs = jsonList.filter(e=> e != undefined)\r\n\t\t\t\t\tafterCallback(obj);\r\n\t\t\t\t\tresolve(obj);\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\t//afterCallback(undefined)\r\n\t\t\t\tresolve(undefined);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t})\r\n\t}\r\n\r\n\tstatic async parseLowDoseJSON(target, json, {beforeCallback = (json) => {}, afterCallback = (node)=> {}} = {}){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tlet jsonObj = json;\r\n\t\t\tif(typeof json == 'string'){\r\n\t\t\t\tjsonObj = JSON.parse(json);\r\n\t\t\t}\r\n\r\n\t\t\tif(jsonObj instanceof Array){\r\n\t\t\t\tresolve(\r\n\t\t\t\t\tPromise.all(FreeWillEditor.#toHTML(jsonObj, {beforeCallback, afterCallback}))\r\n\t\t\t\t\t.then(htmlList => {\r\n\t\t\t\t\t\ttarget.append(...htmlList.filter(e=> e != undefined))\r\n\t\t\t\t\t\treturn htmlList;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tresolve(undefined);\r\n\t\t})\r\n\t}\r\n\r\n\tstatic #toHTML(objList, {beforeCallback, afterCallback}){\r\n\t\treturn objList.filter(e=>e!=undefined).map(async jsonNode => {\r\n\t\t\treturn new Promise(resolve => {\r\n\t\t\t\tbeforeCallback(jsonNode);\r\n\t\t\t\tlet node = undefined;\r\n\t\t\t\tif(jsonNode.type == Node.TEXT_NODE){\r\n\t\t\t\t\tnode = document.createTextNode(jsonNode.text);\r\n\t\t\t\t}else if(jsonNode.type == Node.ELEMENT_NODE){\r\n\t\t\t\t\t//let EditorTarget = FreeWillEditor.componentsMap[jsonNode.name] || FreeWillEditor.toolsMap[jsonNode.name]\r\n\t\t\t\t\tlet editorTarget = window.customElements.get(jsonNode.tagName);\r\n\t\t\t\t\tif(editorTarget && editorTarget.toolHandler){\r\n\t\t\t\t\t\tnode = new editorTarget.prototype.constructor(jsonNode.data);\r\n\t\t\t\t\t}else if(jsonNode.data.hasOwnProperty('is_line')){\r\n\t\t\t\t\t\tlet line = new Line(document.createElement(jsonNode.tagName));\r\n\t\t\t\t\t\tnode = line.lineElement;\r\n\t\t\t\t\t\tObject.assign(node.dataset, jsonNode.data);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t//node = document.createElement(jsonNode.name.replaceAll(/HTML|Element/g, '').toLowerCase());\r\n\t\t\t\t\t\tnode = document.createElement(jsonNode.tagName);\r\n\t\t\t\t\t\tObject.assign(node.dataset, jsonNode.data);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tafterCallback(node)\r\n\t\t\t\t\tif(jsonNode.childs.length != 0){\r\n\t\t\t\t\t\tPromise.all(FreeWillEditor.#toHTML(jsonNode.childs, {beforeCallback, afterCallback})).then(childList => {\r\n\t\t\t\t\t\t\tnode.append(...childList);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tresolve(node);\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\t#isLoaded = false;\r\n\tcomponents;\r\n\ttools;\r\n\t#placeholder;\r\n\t#undoManager;\r\n\tisDefaultStyle = true;\r\n\t#toolButtonObserver = new MutationObserver( (mutationList, observer) => {\r\n\t\tmutationList.forEach((mutation) => {\r\n\t\t\t//if(mutation.oldValue == mutation.mutation.target.dataset.tool_status){\r\n\t\t\t\t// 동일한 동작이 수행되지 않도록 추가 2023 05 25\r\n\t\t\t//\treturn;\r\n\t\t\t//}\r\n\t\t\t//console.log('111111111111111111111111111111')\r\n\t\t\tif(this.contentEditable == 'false' || (mutation.target.dataset.tool_status == 'connected' &&  mutation.oldValue == mutation.target.dataset.tool_status == 'connected')){\r\n\t\t\t\t//console.log('??????????????')\r\n\t\t\t\t//observer.disconnect();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet selection = window.getSelection();\r\n\t\t\t/*if( ! selection.containsNode(this, true)){\r\n\t\t\t\tconsole.log(222)\r\n\t\t\t\treturn;\r\n\t\t\t}*/\r\n\t\t\tlet focusNode = selection.focusNode;\r\n\t\t\tlet Tool = mutation.target.__Tool;\r\n\t\t\tif(mutation.target.dataset.tool_status == 'active' && mutation.oldValue != 'active' && Tool.prototype.isPrototypeOf(focusNode.parentElement) == false){\r\n\t\t\t\tthis.#renderingTools(Tool);\r\n\t\t\t}else if(mutation.target.dataset.tool_status == 'cancel' && mutation.oldValue != 'cancel'){// && window.getSelection().isCollapsed == false){\r\n\t\t\t\tthis.#removerTools(Tool);\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\t#keydownEventCallback;\r\n\tnumberIndexMapper = ['`', '1', '2', '3', '4', '5', '6', '7', '8', '9'];\r\n\tnumberToSpecialMapper = ['~','!', '@', '#', '$', '%', '^', '&', '*', '('];\r\n\tconstructor(\r\n\t\ttools = [\r\n\t\t\tStrong,\r\n\t\t\tColor,\r\n\t\t\tBackground,\r\n\t\t\tStrikethrough,\r\n\t\t\tUnderline,\r\n\t\t\tFontFamily,\r\n\t\t\tQuote,\r\n\t\t\tNumericPoint,\r\n\t\t\tBulletPoint,\r\n\t\t\tSort,\r\n\t\t\tFontSize,\r\n\t\t\tItalic,\r\n\t\t\tImage,\r\n\t\t\tVideo,\r\n\t\t\tResources,\r\n\t\t\tCode,\r\n\t\t\tHyperlink,\r\n\t\t],\r\n\t\t{isDefaultStyle = true, isDefaultShortcutKeyEvent = true} = {},\r\n\t\tkeydownEventCallback\r\n\t){\r\n\t\tsuper();\r\n\t\tthis.keydownEventCallback = keydownEventCallback;\r\n\t\tif(isDefaultStyle){\r\n\t\t\tFreeWiilHandler.createDefaultStyle();\r\n\t\t}\r\n\t\tnew Promise(resolve => {\r\n\t\t\tthis.isDefaultStyle = isDefaultStyle;\r\n\t\t\tthis.components = {\r\n\t\t\t\t'free-will-editor-line' : Line\r\n\t\t\t};\r\n\t\t\tthis.tools = tools;\r\n\t\t\tthis.classList.add('free-will-editor');\r\n\r\n\t\t\tObject.entries(this.components).forEach( ([className, Component]) => {\r\n\t\t\t\tif(className.includes(' ')){\r\n\t\t\t\t\tthrow new DOMException(`The token provided ('${className}') contains HTML space characters, which are not valid in tokens.`);\r\n\t\t\t\t}\r\n\t\t\t\tif(FreeWillEditor.componentsMap[Component.name]){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tComponent.toolHandler.defaultClass = className;\r\n\t\t\t\tif( ! window.customElements.get(className)){\r\n\t\t\t\t\twindow.customElements.define(className, Component, Component.toolHandler.extendsElement && Component.toolHandler.extendsElement != '' ? {extends:Component.toolHandler.extendsElement} : undefined);\r\n\t\t\t\t}\t\r\n\t\t\t\tFreeWillEditor.componentsMap[Component.name] = Component;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.tools.forEach( (Tool) => {\r\n\t\t\t\tif(FreeWillEditor.toolsMap[Tool.name]){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(Tool.isDefaultStyle){\r\n\t\t\t\t\tTool.createDefaultStyle();\r\n\t\t\t\t}\r\n\t\t\t\tTool.toolHandler.toolButton.__Tool = Tool;\r\n\t\t\t\t// attribute에 value가 없어서 oldvalue가 ''이 나옵니다.\r\n\t\t\t\t// oldvalue로 구분할 수 있게 합시다.\r\n\t\t\t\tthis.#toolButtonObserver.observe(Tool.toolHandler.toolButton, {\r\n\t\t\t\t\tattributeFilter:['data-tool_status'],\r\n\t\t\t\t\tattributeOldValue:true\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tif( ! window.customElements.get(Tool.toolHandler.defaultClass)){\r\n\t\t\t\t\twindow.customElements.define(Tool.toolHandler.defaultClass, Tool, Tool.toolHandler.extendsElement && Tool.toolHandler.extendsElement != '' ? {extends:Tool.toolHandler.extendsElement} : undefined);\r\n\t\t\t\t}\r\n\t\t\t\tFreeWillEditor.toolsMap[Tool.name] = Tool;\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t\r\n\r\n\t\t\tlet observer = new MutationObserver( (mutationList, observer) => {\r\n\t\t\t\tmutationList.forEach((mutation) => {\r\n\t\t\t\t\t//if(this.contentEditable == 'false'){\r\n\t\t\t\t\t//\treturn;\r\n\t\t\t\t\t//}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(this.childElementCount == 0){\r\n\t\t\t\t\t\tthis.startFirstLine();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif( ! this.firstElementChild.line){\r\n\t\t\t\t\t\tnew Line(this.firstElementChild.line);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.querySelectorAll('[data-placeholder]').forEach(async e => {\r\n\t\t\t\t\t\te.removeAttribute('data-placeholder')\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif(this.isEmpty){\r\n\t\t\t\t\t\tthis.placeholder = this.#placeholder;\r\n\t\t\t\t\t\t//this.firstElementChild.dataset.placeholder = this.#placeholder\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.firstElementChild.setAttribute('data-placeholder', '');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//console.log(mutation.target);\r\n\t\t\t\t\tmutation.addedNodes.forEach(async element=>{\r\n\t\t\t\t\t\tnew Promise(resolve=>{\r\n\t\t\t\t\t\t\tif(element.nodeType != Node.ELEMENT_NODE) return;\r\n\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\tlet sty = window.getComputedStyle(element);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif(sty.visibility == 'hidden' || sty.opacity == 0){\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t\tif(element.classList.contains(Line.toolHandler.defaultClass)){\r\n\t\t\t\t\t\t\t\tif( ! element.line){\r\n\t\t\t\t\t\t\t\t\tnew Line(element);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(element.innerText.length == 0){\r\n\t\t\t\t\t\t\t\t\telement.innerText = '\\n';\r\n\t\t\t\t\t\t\t\t\twindow.getSelection().setPosition(element, 1)\r\n\t\t\t\t\t\t\t\t\telement.focus();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\t/*mutation.removedNodes.forEach(element=>{\r\n\r\n\t\t\t\t\t})*/\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t\tobserver.observe(this, {\r\n\t\t\t\tchildList:true,\r\n\t\t\t\tsubtree: true\r\n\t\t\t})\r\n\t\t\tresolve();\r\n\t\t});\r\n\t\t\r\n\t\tconst arrowDownEvent = (event) => {\r\n\t\t\tif(! this.isCursor() || event.key != 'ArrowDown') return;\r\n\r\n\t\t\tlet currentLine = this.getCurrentLine(undefined, {isRoot : true});\r\n\t\t\tif( ! currentLine) return;\r\n\t\t\tlet nextLine = currentLine.nextElementSibling;\r\n\t\t\twhile(nextLine){\r\n\t\t\t\tif(nextLine.contentEditable == 'false'){\r\n\t\t\t\t\tnextLine = nextLine.nextElementSibling;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tlet nextLine = super.createLine();\r\n\t\t\t\tnextLine.line?.lookAtMe();\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(isDefaultShortcutKeyEvent){\r\n\r\n\t\t\tFreedomInterface.globalKeydownEventListener(this, ({oldEvent, newEvent}) => {\r\n\t\t\t\tif(! this.isCursor()) return;\r\n\t\t\t\tlet isKeyAddEvent = false;\r\n\t\t\t\tif(this.keydownEventCallback != null){\r\n\t\t\t\t\tisKeyAddEvent = this.keydownEventCallback(newEvent);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(isKeyAddEvent) return;\r\n\t\t\t\t\r\n\t\t\t\t//let selection = window.getSelection();\r\n\r\n\t\t\t\tarrowDownEvent(newEvent);\r\n\t\t\t\tlet {ctrlKey, shiftKey, altKey, key} = newEvent;\r\n\r\n\t\t\t\tif(ctrlKey && key.toLowerCase() == 'b'){\r\n\t\t\t\t\tnewEvent.preventDefault()\r\n\t\t\t\t\tStrong.toolHandler.toolButton.click();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}else if(ctrlKey && key.toLowerCase == 'u'){\r\n\t\t\t\t\tnewEvent.preventDefault()\r\n\t\t\t\t\tUnderline.toolHandler.toolButton.click();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}else if(ctrlKey && key.toLowerCase == 'i'){\r\n\t\t\t\t\tnewEvent.preventDefault()\r\n\t\t\t\t\tItalic.toolHandler.toolButton.click();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet clone = [...tools];\r\n\t\t\t\tnew Promise(res=>{\r\n\t\t\t\t\tlet firstKeyGroupList = clone.splice(0,10);\r\n\t\t\t\t\tlet isStop = false;\r\n\t\t\t\t\tfor(let i = 0, len = firstKeyGroupList.length ; i < len ; i += 1){\r\n\t\t\t\t\t\tlet s = String(i), index = s.substring(s.length - 1);\r\n\t\t\t\t\t\tif(ctrlKey && altKey && key == this.numberIndexMapper[index]){\r\n\t\t\t\t\t\t\tlet e = firstKeyGroupList[i];\r\n\t\t\t\t\t\t\tnewEvent.preventDefault();\r\n\t\t\t\t\t\t\te.toolHandler.toolButton.click();\r\n\t\t\t\t\t\t\tisStop = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(isStop) {\r\n\t\t\t\t\t\tres(); \r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor(let i = 0, len = clone.length ; i < len ; i += 1){\r\n\t\t\t\t\t\tlet s = String(i), index = s.substring(s.length - 1);\r\n\t\t\t\t\t\tif(ctrlKey && shiftKey && key == this.numberToSpecialMapper[index]){\r\n\t\t\t\t\t\t\tlet e = clone[i];\r\n\t\t\t\t\t\t\tnewEvent.preventDefault();\r\n\t\t\t\t\t\t\te.toolHandler.toolButton.click();\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tres();\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tconnectedCallback(){\r\n\t\tthis.#undoManager = new UndoManager(this);\r\n\t\tif( ! this.#isLoaded){\r\n            this.#isLoaded = true;\r\n\t\t\tif(this.contentEditable == 'inherit' || this.contentEditable == true){\r\n\t\t\t\tthis.contentEditable = true;\r\n\t\t\t\tthis.tabIndex = 1;\r\n\t\t\t\tthis.focus()\r\n\t\t\t\tif(this.isEmpty){\r\n\t\t\t\t\tthis.startFirstLine();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tdisconnectedCallback(){\r\n\t\tthis.#undoManager = null;\r\n        this.#isLoaded = false;\r\n\t\t//this.contentEditable = false;\r\n\t\t//this.#toolButtonObserver.disconnect();\r\n    }\r\n\r\n\tstartFirstLine(){\r\n\t\tlet lineElement = super.createLine();\r\n\t\tlineElement.line.isFirstLine = true;\r\n\t\tthis.placeholder = this.#placeholder;\r\n\t\treturn lineElement;\r\n\t}\r\n\r\n\t#removeAfterSelectionMove(targetElement){\r\n\t\tlet selection = document.getSelection()\r\n\t\tlet range =  new Range();//document.createRange()\r\n\t\tlet targetLine = Line.getLine(targetElement);\r\n\t\trange.setStartAfter(targetLine)\r\n\t\trange.setEnd(targetLine, targetElement.textContent.length - 1);\r\n\t\tselection.removeAllRanges()\r\n\t\tselection.addRange(range) \r\n\t}\r\n\r\n\t#addAfterSelectionMove(targetElement){\r\n\t\tlet selection = document.getSelection()\r\n\t\tlet range =  new Range();//document.createRange()\r\n\t\tif( ! targetElement){\r\n\t\t//\treturn;\r\n\t\t}\r\n\t\tif(targetElement && targetElement.nodeType == Node.ELEMENT_NODE && targetElement.textContent.length == 0){\r\n\t\t\t//let emptyElement = document.createTextNode('\\u200B')\r\n\t\t\t//targetElement.textContent = '\\u200B'; //.append(emptyElement)\r\n\t\t}\r\n\t\t\r\n\t\trange.selectNodeContents(targetElement)\r\n\t\trange.setStart(targetElement, targetElement.length);\r\n\t\trange.setEnd(targetElement, targetElement.length);\r\n\t\tselection.removeAllRanges()\r\n\t\tselection.addRange(range)\r\n\t\ttargetElement.removeAttribute('tabIndex');\r\n\t\t//cursor\r\n\t\t/*\r\n\t\tlet observer = new MutationObserver( (mutationList, observer) => {\r\n\t\t\tmutationList.forEach((mutation) => {\r\n\t\t\t\tif(mutation.target.textContent.includes('\\u200B')){\r\n\t\t\t\t\tif(targetElement.toolHandler && targetElement.toolHandler.toolButton ? true: false){\r\n\t\t\t\t\t\ttargetElement.toolHandler.toolButton.setAttribute('data-is_alive', '');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmutation.target.textContent = mutation.target.textContent.replace('\\u200B', '');\r\n\t\t\t\t\tconsole.log('146 :: targetElement.isConnected',targetElement.isConnected);\r\n\t\t\t\t\tconsole.log('147 :: targetElement',targetElement);\r\n\t\t\t\t\tif(targetElement.isConnected){\r\n\t\t\t\t\t\tselection.modify('move', 'forward', 'line')\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttargetElement.removeAttribute('tabIndex');\r\n\t\t\t\t\tobserver.disconnect();\r\n\t\t\t\t}else{\r\n\t\t\t\t\ttargetElement.removeAttribute('tabIndex');\r\n\t\t\t\t\tobserver.disconnect();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t})\r\n\r\n\t\tobserver.observe(targetElement, {\r\n\t\t\tcharacterData: true,\r\n\t\t\tcharacterDataOldValue: true,\r\n\t\t\tchildList:true,\r\n\t\t\tsubtree: true\r\n\t\t})\r\n\t\t*/\r\n\t}\r\n\r\n\t#renderingTools(TargetTool){\r\n\t\tlet selection = window.getSelection();\r\n\t\tlet {isCollapsed, anchorNode, focusNode} = selection;\r\n\t\t// 범위 선택 x인 경우 넘어가기\r\n\t\tif(isCollapsed && TargetTool.toolHandler.isInline){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsuper.getLineRange(selection)\r\n\t\t.then(({startLine, endLine}) => { \r\n\t\t\tif( ! startLine){\r\n\t\t\t\tstartLine = endLine\r\n\t\t\t}\r\n\t\t\tif( ! startLine.line){\r\n\t\t\t\tnew Line(startLine);\r\n\t\t\t}\r\n\t\t\tif( ! endLine.line){\r\n\t\t\t\tnew Line(endLine);\r\n\t\t\t}\r\n\t\t\treturn startLine.line.applyTool(TargetTool, selection.getRangeAt(0), endLine)\r\n\t\t})\r\n\t\t.then(lastApplyTool=> {\r\n\t\t\tif( ! this.#undoManager){\r\n\t\t\t\tthis.#undoManager = new UndoManager(this);\r\n\t\t\t}\r\n\t\t\tthis.#undoManager.addUndoRedo(true);\r\n\t\t\tlet applyToolAfterSelection = window.getSelection(), range = applyToolAfterSelection.getRangeAt(0);\r\n\t\t\tlet scrollTarget;\r\n\t\t\tif(range.endContainer.nodeType == Node.TEXT_NODE){\r\n\t\t\t\tscrollTarget = range.endContainer.parentElement\r\n\t\t\t}else{\r\n\t\t\t\tscrollTarget = range.endContainer;\r\n\t\t\t}\r\n\t\t\tscrollTarget.scrollIntoView({ behavior: \"instant\", block: \"end\", inline: \"nearest\" });\r\n\t\t\tapplyToolAfterSelection.setPosition(scrollTarget, scrollTarget.childNodes.length - 1);\r\n\t\t\t//selection.setPosition(lastApplyTool, 0)\r\n\t\t})\r\n\t\t/*\r\n\t\t.then(tool=>{\r\n\t\t\tthis.querySelectorAll(`.${TargetTool.toolHandler.defaultClass}`).forEach(async e =>{\r\n\t\t\t\tawait new Promise(resolve=>{\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\t//this.#addAfterSelectionMove(tool);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\t#removerTools(TargetTool){\r\n\t\tlet selection = window.getSelection();\r\n\t\tlet {isCollapsed, anchorNode, focusNode} = selection;\r\n\t\t\r\n\t\t// 범위 선택 x인 경우 넘어가기\r\n\t\tif(isCollapsed && TargetTool.toolHandler.isInline){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsuper.getLineRange(selection).then(({startLine, endLine})=> {\r\n\t\t\t//console.log(endLine);\r\n\t\t\tif( ! startLine){\r\n\t\t\t\tstartLine = endLine\r\n\t\t\t}\r\n\t\t\tif( ! startLine.line){\r\n\t\t\t\tnew Line(startLine);\r\n\t\t\t}\r\n\t\t\tif( ! endLine.line){\r\n\t\t\t\tnew Line(endLine);\r\n\t\t\t}\r\n\t\t\tconsole.log(startLine, endLine);\r\n\t\t\tstartLine.line.cancelTool(TargetTool, selection, endLine)\r\n\t\t\t.then(()=>{\r\n\t\t\t\tif( ! this.#undoManager){\r\n\t\t\t\t\tthis.#undoManager = new UndoManager(this);\r\n\t\t\t\t}\r\n\t\t\t\tthis.#undoManager.addUndoRedo(true);\r\n\t\t\t\twindow.getSelection().setPosition(startLine, startLine.childElementCount);\r\n\t\t\t\t/*[...this.children]\r\n\t\t\t\t.filter(e=>e.classList.contains(`${Line.toolHandler.defaultClass}`))\r\n\t\t\t\t.forEach(lineElement=>{\r\n\t\t\t\t\tif(lineElement.line.isLineEmpty()){\r\n\t\t\t\t\t\t//lineElement.line = undefined;\r\n\t\t\t\t\t\t//lineElement.remove();\r\n\t\t\t\t\t}\r\n\t\t\t\t})*/\r\n\t\t\t});\r\n\t\t})\r\n\t}\r\n\r\n    async lineBreak(LineBreakMode = FreeWillEditor.LineBreakMode.NEXT_LINE_FIRST){\r\n\t\tlet selection = window.getSelection();\r\n\t\treturn super.getLineRange(selection)\r\n\t\t.then(({startLine, endLine}) => { \r\n\t\t\tif( ! startLine.line){\r\n\t\t\t\tnew Line(startLine);\r\n\t\t\t}\r\n\t\t\tif( ! endLine.line){\r\n\t\t\t\tnew Line(endLine);\r\n\t\t\t}\r\n\t\t\tlet range = selection.getRangeAt(0);\r\n\t\t\tlet {startOffset, endOffset, startContainer,endContainer} = range;\r\n\t\t\tlet lastItem = startLine.lastChild\r\n\t\t\tlet lastItemEndOffset = lastItem.nodeType == Node.TEXT_NODE ? lastItem.length : lastItem.childNodes.length;\r\n\t\t\trange.setStart(startContainer, startOffset);\r\n\t\t\trange.setEnd(lastItem, lastItemEndOffset);\r\n\t\t\tlet lineElement = super.createLine();\r\n\t\t\tlineElement.append(range.extractContents());\r\n\t\t\tstartLine.after(lineElement);\r\n\t\t\tif(LineBreakMode == FreeWillEditor.LineBreakMode.NEXT_LINE_FIRST){\r\n\t\t\t\twindow.getSelection().setPosition(lineElement, 0);\r\n\t\t\t}else if(LineBreakMode == FreeWillEditor.LineBreakMode.NEXT_LINE_LAST){\r\n\t\t\t\tlineElement.line.lookAtMe();\r\n\t\t\t}\r\n\r\n\t\t})\r\n\t}\r\n\r\n\tset placeholder(placeholder){\r\n\t\tthis.#placeholder = placeholder;\r\n\t\tif(this.firstElementChild && this.contentEditable != false){\r\n\t\t\tthis.firstElementChild.setAttribute('data-placeholder', this.#placeholder);\r\n\t\t}\r\n\t}\r\n\r\n\tget firstLine(){\r\n\t\treturn this.firstElementChild;\r\n\t}\r\n\r\n\tget isEmpty(){\r\n\t\treturn Line.isElementTextEmpty(this) && ! [...this.querySelectorAll('*')].some(e=>this.tools.hasOwnProperty(e.localName));\r\n\t}\r\n\r\n\tget isLoaded(){\r\n\t\treturn this.#isLoaded;\r\n\t}\r\n\r\n\tset keydownEventCallback(callback){\r\n\t\tthis.#keydownEventCallback = callback;\r\n\t}\r\n\tget keydownEventCallback(){\r\n\t\treturn this.#keydownEventCallback;\r\n\t}\r\n}\r\n","\r\nexport const workspaceHandler = new class WorkspaceHandler{\r\n    #workspace;\r\n    #workspaceId;\r\n    #addWorkspaceIdChangedListener = {};\r\n    #workspaceChangeDone;\r\n    #workspaceChangeAwait;\r\n    constructor(){\r\n        //window.addEventListener(\"DOMContentLoaded\", (event) => {\r\n            window.myAPI.getWorkspaceId().then(workspaceId=>{\r\n                this.workspaceId = workspaceId;\r\n            })\r\n            window.myAPI.event.electronEventTrigger.addElectronEventListener('workspaceChange', event => {\r\n                this.workspaceId = event.workspaceId;\r\n            })\r\n        //});\r\n    }\r\n\r\n    set addWorkspaceIdChangedListener({name, callback, runTheFirst}){\r\n        this.#addWorkspaceIdChangedListener[name] = callback;\r\n        if(runTheFirst && this.workspaceId){\r\n            callback(this);\r\n        }\r\n    }\r\n    get addWorkspaceIdChangedListener(){\r\n        return this.#addWorkspaceIdChangedListener;\r\n    }\r\n\r\n    set workspaceId(workspaceId){\r\n        if(!workspaceId)return;\r\n        this.#workspaceId = workspaceId;\r\n        window.myAPI.workspace.getWorkspaceDetail({workspaceId}).then((workspace) => {\r\n            this.#workspace = workspace;\r\n            let startCallbackPromise = Promise.all(Object.values(this.#addWorkspaceIdChangedListener).map(async callback => {\r\n                return new Promise(res => {\r\n                    callback(this);\r\n                    res();\r\n                });\r\n            }));\r\n            if( ! this.#workspaceChangeAwait){\r\n                this.#workspaceChangeAwait = new Promise(resolve=>{\r\n                    this.#workspaceChangeDone = resolve;\r\n                    this.#workspaceChangeDone(startCallbackPromise);\r\n                })\r\n            }else{\r\n                this.#workspaceChangeAwait.then(() => {\r\n                    startCallbackPromise.then(() => {\r\n                        this.#workspaceChangeAwait = new Promise(resolve => {\r\n                            this.#workspaceChangeDone = resolve;\r\n                        })\r\n                    })\r\n                })\r\n            }\r\n        });\r\n    }\r\n    get workspaceId(){\r\n        return Number(this.#workspaceId);\r\n    }\r\n    get workspace(){\r\n        return this.#workspace;\r\n    }\r\n    removeWorkspaceIdChangedListener(name){\r\n        delete this.#addWorkspaceIdChangedListener(name);\r\n    }\r\n};","export const roomHandler = new class RoomHandler{\r\n    #roomId\r\n    #room;\r\n    #addRoomIdChangeListener = {};\r\n\r\n    #roomChangeDone;\r\n    #roomChangeAwait = new Promise(resolve=>{\r\n        this.#roomChangeDone = resolve;\r\n    });\r\n\r\n    #isOwner;\r\n\r\n    constructor(){\r\n\r\n        window.myAPI.event.electronEventTrigger.addElectronEventListener('roomChange', event => {\r\n            this.roomId = event.roomId\r\n        })\r\n\r\n    }\r\n\r\n    set addRoomIdChangeListener({name, callback, runTheFirst}){\r\n        this.#addRoomIdChangeListener[name] = callback;\r\n        if(runTheFirst && this.#roomId){\r\n            callback(this);\r\n        }\r\n    }\r\n\r\n    get addRoomIdChangeListener(){\r\n        return this.#addRoomIdChangeListener;\r\n    }\r\n\r\n    set roomId(roomId){\r\n        if( ! roomId){\r\n            throw new Error('roomId is undefined')\r\n        }\r\n        this.#roomId = roomId;\r\n        window.myAPI.room.isRoomOwner({roomId}).then(result => {\r\n            this.#isOwner = result.data;\r\n            window.myAPI.room.getRoomDetail({roomId}).then(result => {\r\n                this.#room = result.data;\r\n                window.myAPI.setOption({\r\n                    name: 'lastRoomInfo', value : JSON.stringify(this.#room)\r\n                })\r\n                let startCallbackPromise = Promise.all(\r\n                    Object.values(this.#addRoomIdChangeListener).map(async callback => {\r\n                        return new Promise(res => {\r\n                            callback(this);\r\n                            res();\r\n                        })\r\n                    })\r\n                )\r\n                startCallbackPromise.then(()=>{\r\n                    this.#roomChangeDone();\r\n                })\r\n                this.#roomChangeAwait.then(()=>{\r\n                    this.#roomChangeAwait = new Promise(resolve=>{\r\n                        this.#roomChangeDone = resolve;\r\n                    })\r\n                })\r\n                //window.myAPI.setTitle({title:this.#room.roomName})\r\n                \r\n            });\r\n        });\r\n    }\r\n\r\n    get roomId(){\r\n        return Number(this.#roomId);\r\n    }\r\n\r\n    get room(){\r\n        return this.#room;\r\n    }\r\n    removeRoomIdChangeListener(name){\r\n        delete this.#addRoomIdChangeListener(name);\r\n    }\r\n    get roomChangeAwait(){\r\n        return this.#roomChangeAwait;\r\n    }\r\n    \r\n    get isOwner(){\r\n        return this.#isOwner;\r\n    }\r\n}","export default new class Common{\r\n\t#keyRegx = /[A-Z]?[a-z]+|[0-9]+|[A-Z]+(?![a-z])/g;\r\n\r\n\tconstructor(){\r\n\r\n\t}\r\n\r\n\tjsonToSaveElementDataset(data, element){\r\n\t\tif( ! element){\r\n\t\t\tthrow new Error('element is undefined')\r\n\t\t} else if(element.nodeType != Node.ELEMENT_NODE){\r\n\t\t\tthrow new Error(`element is not element node type ::: ${element.nodeType}`);\r\n\t\t}\r\n\t\treturn new Promise(resolve=>{\r\n\t\t\tlet underbarKeyNameObject = Object.entries(data).reduce((total, [k,v]) => {\r\n\t\t\t\tlet key = k.match(this.#keyRegx).map(e=> e.toLowerCase()).join('_');\r\n\t\t\t\ttotal[key] = v;\r\n\t\t\t\treturn total;\r\n\t\t\t}, {});\r\n\t\t\tObject.assign(element.dataset, underbarKeyNameObject);\r\n\t\t\tresolve(element);\r\n\t\t})\r\n\t}\r\n\tasync underbarNameToCamelName(obj){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tresolve(Object.entries(obj).reduce((total, [k,v]) => {\r\n\t\t\t\tlet key = k.split('_').map((e,i)=>{\r\n\t\t\t\t\tif(i == 0){\r\n\t\t\t\t\t\treturn e.charAt(0).toLowerCase() + e.substring(1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn e.charAt(0).toUpperCase() + e.substring(1)\r\n\t\t\t\t}).join('');\r\n\t\t\t\ttotal[key] = v;\r\n\t\t\t\treturn total;\r\n\t\t\t}, {}))\r\n\t\t})\r\n\t}\r\n\t/**\r\n\t * @returns {Promise<String>}\r\n\t */\r\n\tasync getProjectPathPromise(){\r\n\t\treturn await window.myAPI.getProjectPath().then((data) => {\r\n\t\t\treturn data\r\n\t\t}).catch(error=>{\r\n\t\t\tconsole.error(error);\r\n\t\t\treturn '';\r\n\t\t})\r\n\t}\r\n\r\n\tprocessingElementPosition(element, target){\r\n\t\tlet rect;\r\n\t\tif(this.isElement(target, HTMLElement)){\r\n\t\t\trect = target.getBoundingClientRect();\r\n\t\t}else{\r\n\t\t\trect = target;\r\n\t\t}\r\n\r\n\t\tlet {x, y, height, width} = rect;\r\n\t\tlet elementTop = (y - element.clientHeight)\r\n\t\tlet elementLeft = (x - element.clientWidth)\r\n\t\tif(elementTop > 0){\r\n\t\t\telement.style.top = elementTop + 'px';\r\n\t\t}else{\r\n\t\t\telement.style.top = y + height + 'px';\r\n\t\t}\r\n\t\tif(elementLeft > 0){\r\n\t\t\telement.style.left = elementLeft + 'px'\r\n\t\t}else{\r\n\t\t\telement.style.left = x + width + 'px';\r\n\t\t}\r\n\t\t\r\n\t}\r\n    isElement(targetObject, checkClazz){\r\n        let check = Object.getPrototypeOf(targetObject)\r\n        let isElement = false;\r\n        while(check != undefined){\r\n\r\n            if(check?.constructor  == checkClazz){\r\n                isElement = true;\r\n                break;\r\n            }else{\r\n                check = Object.getPrototypeOf(check);\r\n            }\r\n        }\r\n        return isElement;\r\n    }\r\n\r\n\tshortenBytes(byte) {\r\n\t\tconst rank = byte > 0 ? Math.floor((Math.log2(byte)/10)) : 0;\r\n\t\tconst rankText = ( (rank > 0 ? 'KMGTPEZY'[rank - 1] : '') || (rank >= 9 ? 'Y' : '') ) + 'B';\r\n\t\tconst size = Math.floor(byte / Math.pow(1024, (rank >= 9 ? 8 : rank) ));\r\n\t\treturn {size, rank, rankText};\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t * @param {Array<string>} text \r\n\t */\r\n\tshowToastMessage(textList){\r\n\t\tlet div = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'toast_message'\r\n\t\t});\r\n\t\tdiv.append(...textList.map(e=>Object.assign(document.createElement('div'), {\r\n\t\t\ttextContent : e\r\n\t\t})));\r\n\t\tdocument.body.append(div);\r\n\t\tlet appendAwait = setInterval(()=>{\r\n\t\t\tif( ! div.isConnected) return;\r\n\t\t\tclearInterval(appendAwait);\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tdiv.style.opacity = 0;\r\n\t\t\t\tdiv.ontransitionend = () => {\r\n\t\t\t\t\tdiv.remove();\r\n\t\t\t\t}\r\n\t\t\t},1000)\r\n\t\t}, 50)\r\n\r\n\t}\r\n\r\n}","export default class PositionChanger{\r\n\t#wrapper;\r\n\t#targetItem;\r\n\t#childList = [];\r\n\t#onDropEndChangePositionCallback = (changeList) => {};\r\n\t#onDropDocumentOutCallback = (target) => {console.log('out!!', target)}; \r\n\t#onIfCancelCallback = (target) => {return false;};\r\n\tconstructor({wrapper}){\r\n\t\tif( ! wrapper){\r\n\t\t\tthrow new Error('wrapper is undefined');\r\n\t\t}/*else if(childList.length == 0){\r\n\t\t\tthrow new Error('child list is empty');\r\n\t\t}*/\r\n\t\tthis.#wrapper = wrapper;\r\n\t}\r\n\r\n\taddPositionChangeEvent(child, wrapper){\r\n\t\tif(child.length == 0){\r\n\t\t\tthrow new Error('child is empty');\r\n\t\t}else if(child.some(e=>Number(e.dataset.order_sort) == undefined || isNaN(Number(e.dataset.order_sort)))){\r\n\t\t\tconsole.error(child);\r\n\t\t\tthrow new Error('data-order_sort is not defined or is not number')\r\n\t\t}\r\n\t\tlet parent = wrapper || this.#wrapper;\r\n\t\tparent.dataset.is_position_change = '';\r\n\t\tlet pointerEventTargetList = [];\r\n\t\treturn new Promise(resolve => {\r\n\t\t\t\r\n\t\t\tlet lastItem = [...parent.children].filter(e=>e.hasAttribute('data-order_sort')).pop() // or at(-1)\r\n\t\t\tchild.forEach((item, index)=>{\r\n\t\t\t\titem.draggable = true;\r\n\t\t\t\titem.ondragstart = (event) => {\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\t//event.preventDefault();\r\n\t\t\t\t\tthis.#targetItem = item;\r\n\t\t\t\t\t//this.#targetItem = event.target;\r\n\t\t\t\t\tchild.forEach(async e => {\r\n\t\t\t\t\t\t[...e.children].forEach((ee)=>{\r\n\t\t\t\t\t\t\tif(ee.hasAttribute('data-is_position_change')) {\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tee.style.pointerEvents = 'none';\r\n\t\t\t\t\t\t\tee.dataset.is_pointer_target = ''\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\titem.ondragend = (event) => {\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\t//event.preventDefault();\r\n\t\t\t\t\tif(\r\n\t\t\t\t\t\tevent.x < 0 || event.y < 0 ||\r\n\t\t\t\t\t\twindow.outerWidth < event.x || window.outerHeight < event.y\r\n\t\t\t\t\t){\r\n\t\t\t\t\t\tthis.#onDropDocumentOutCallback({\r\n\t\t\t\t\t\t\ttarget:item,\r\n\t\t\t\t\t\t\tevent\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.#targetItem = undefined;\r\n\t\t\t\t\t\r\n\t\t\t\t\tnew Promise(res => {\r\n\t\t\t\t\t\tdocument.querySelectorAll('[data-is_pointer_target]').forEach(e=>{\r\n\t\t\t\t\t\t\te.style.pointerEvents = '';\r\n\t\t\t\t\t\t\te.removeAttribute('data-is_pointer_target');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tres();\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif(item.__dragendCallback){\r\n\t\t\t\t\t\titem.__dragendCallback();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\titem.ondragover = (event) => {\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t\titem.ondragenter = (event) => {\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tevent.target.style.borderTop = 'solid #0000009c';\r\n\t\t\t\t}\r\n\t\t\t\titem.ondragleave = (event) => {\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tevent.target.style.borderTop = '';\r\n\t\t\t\t}\r\n\t\t\t\titem.ondrop = (event) => {\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tevent.target.style.borderTop = '';\r\n\r\n\t\t\t\t\tif(! this.#targetItem){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//return;\r\n\t\t\t\t\tlet target = this.#targetItem;\r\n\t\t\t\t\tlet cancle = this.onIfCancelCallback(target, item)\r\n\t\t\t\t\tif((typeof cancle) != 'boolean'){\r\n\t\t\t\t\t\tthrow new Error('onIfCancelCallback is only return Boolean');\r\n\t\t\t\t\t}else if(cancle){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//item.before(target);\r\n\t\t\t\t\tevent.target.closest('[data-order_sort]').before(target);\r\n\t\t\t\t\tthis.#targetItem = undefined;\r\n\t\t\t\t\tnew Promise(res=>{\r\n\t\t\t\t\t\tlet nowLastItem = [...parent.children].filter(e=>e.hasAttribute('data-order_sort')).pop(); // or at(-1)\r\n\t\t\t\t\t\t//let nowLastItem = [...target.closest('ul').children].filter(e=>e.hasAttribute('data-order_sort')).pop(); // or at(-1)\r\n\t\t\t\t\t\t//this.#wrapper.querySelector('[data-order_sort]:last-child');\r\n\t\t\t\t\t\tif( ! lastItem){\r\n\t\t\t\t\t\t\tlastItem = nowLastItem;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet prevOrderSort = Number(lastItem.dataset.order_sort);\r\n\t\t\t\t\t\tif(target == lastItem && lastItem != nowLastItem){\r\n\t\t\t\t\t\t\tnowLastItem.dataset.order_sort = lastItem.dataset.order_sort;\r\n\t\t\t\t\t\t\tprevOrderSort = Number(lastItem.dataset.order_sort);\r\n\t\t\t\t\t\t\t//prevOrderSort -= 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlastItem = nowLastItem\r\n\t\t\t\t\t\tlet prevItem = lastItem?.previousElementSibling;\r\n\t\t\t\t\t\twhile(prevItem){\r\n\t\t\t\t\t\t\tprevOrderSort += 1;\r\n\t\t\t\t\t\t\tprevItem.dataset.prev_order_sort = prevItem.dataset.order_sort\r\n\t\t\t\t\t\t\tprevItem.dataset.order_sort = prevOrderSort ;\r\n\t\t\t\t\t\t\tif(prevItem.previousElementSibling === prevItem){\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tprevItem = prevItem.previousElementSibling;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tres();\r\n\t\t\t\t\t}).then(()=>{\r\n\t\t\t\t\t\tthis.#onDropEndChangePositionCallback(\r\n\t\t\t\t\t\t\t[...new Set([...child.filter(e=>e.dataset.order_sort != e.dataset.prev_order_sort && e != target), target])],\r\n\t\t\t\t\t\t\t{item, target, parent}\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n\tset onDropEndChangePositionCallback(callback){\r\n\t\tthis.#onDropEndChangePositionCallback = callback;\r\n\t}\r\n\tget onDropEndChangePositionCallback(){\r\n\t\treturn this.#onDropEndChangePositionCallback;\r\n\t}\r\n\r\n\tset onDropDocumentOutCallback(callback){\r\n\t\tthis.#onDropDocumentOutCallback = callback;\r\n\t}\r\n\tget onDropDocumentOutCallback(){\r\n\t\treturn this.#onDropDocumentOutCallback;\r\n\t}\r\n\r\n\tset onIfCancelCallback(callback){\r\n\t\tthis.#onIfCancelCallback = callback\r\n\t}\r\n\tget onIfCancelCallback(){\r\n\t\treturn this.#onIfCancelCallback;\r\n\t}\r\n\r\n}","export const accountHandler = new class AccountHandler{\r\n    #accountInfo = this.searchAccountInfo();\r\n    static #accountInfoChangeAcceptResolve;\r\n    static accountInfoChangeAcceptPromise = new Promise(resolve => {\r\n        this.#accountInfoChangeAcceptResolve = resolve;\r\n    });\r\n\r\n    static {\r\n        window.myAPI.event.electronEventTrigger.addElectronEventListener('accountInfoChangeAccept', data => {\r\n            console.log(data);\r\n            let {content} = data;\r\n            this.#accountInfoChangeAcceptResolve(content);\r\n            this.accountInfoChangeAcceptPromise = new Promise(resolve=>{\r\n                this.#accountInfoChangeAcceptResolve = resolve;\r\n            })\r\n        })\r\n    }\r\n\r\n    constructor(){\r\n\r\n    }\r\n\r\n    accountInfoChangeAcceptEventListener(callback = ({oldData, newData}) => {}){\r\n        let oldData = undefined;\r\n\t\tlet newData = undefined;\r\n\t\tconst simpleObserver = () => {\r\n\t\t\tAccountHandler.accountInfoChangeAcceptPromise.then((event)=>{\r\n\t\t\t\tnewData = event;\r\n\t\t\t\tcallback({oldData, newData});\r\n\t\t\t\toldData = event;\r\n\t\t\t\tsimpleObserver();\r\n\t\t\t})\r\n\t\t}\r\n\t\tsimpleObserver();\r\n    }\r\n\r\n    async searchAccountInfo(){\r\n        this.#accountInfo = await window.myAPI.account.getAccountInfo().then(result => {\r\n            return result.data;\r\n        });\r\n        return this.#accountInfo;\r\n    }\r\n\r\n    get accountInfo(){\r\n        return this.#accountInfo;\r\n    }\r\n\r\n};","\r\nexport const s3EncryptionUtil = new class S3EncryptionUtil{\r\n\r\n\tencoder = new TextEncoder();\r\n\tdecoder = new TextDecoder();\r\n\r\n\tsignAlgorithm = {\r\n\t\tname: \"RSASSA-PKCS1-v1_5\",\r\n\t\t// Consider using a 4096-bit key for systems that require long-term security\r\n\t\tmodulusLength: 2048,\r\n\t\tpublicExponent: new Uint8Array([0x01, 0x00, 0x01]),\r\n\t\thash: \"SHA-256\",\r\n\t}\r\n\r\n\tsecretAlgorithm = {\r\n\t\tname: \"RSA-OAEP\",\r\n\t\tmodulusLength: 2048,\r\n\t\tpublicExponent: new Uint8Array([0x01, 0x00, 0x01]),\r\n\t\thash: \"SHA-256\",\r\n\t}\r\n\r\n\tasync generateKeyPair(algorithm, keyUsages){\r\n\t\treturn window.crypto.subtle.generateKey(\r\n\t\t\talgorithm,\r\n\t\t\ttrue,\r\n\t\t\tkeyUsages//[\"sign\", \"verify\"]\r\n\t\t);\r\n\t}\r\n\r\n\tasync keySign(data, privateKey){\r\n\t\tlet message = this.encoder.encode(data);\r\n\t\treturn window.crypto.subtle.sign(this.signAlgorithm.name, privateKey, message).then(signature=>{\r\n\t\t\treturn {message, signature};\r\n\t\t})\r\n\t}\r\n\r\n\tasync decryptMessage(privateKey, ciphertext, algorithm) {\r\n\t\treturn window.crypto.subtle.decrypt(\r\n\t\t\t{ name: algorithm.name },\r\n\t\t\tprivateKey,\r\n\t\t\tciphertext,\r\n\t\t).catch(err=>{\r\n\t\t\tconsole.error(err.message);\r\n\t\t\tconsole.error(err.stack);\r\n\t\t});\r\n\t}\r\n\r\n\t\r\n\tasync convertBase64ToBuffer(base64){\r\n\t\treturn fetch(`data:application/octet-binary;base64,${base64}`)\r\n\t\t.then(res=>res.arrayBuffer())\r\n\t\t.then(buffer=>new Uint8Array(buffer))\r\n\t}\r\n\r\n\tasync exportKey(exportType, key){\r\n\t\treturn window.crypto.subtle.exportKey(exportType, key).then(exportKey => {\r\n\t\t\treturn new Promise( resolve => resolve(String.fromCharCode(...new Uint8Array(exportKey))) );\r\n\t\t}).then(exportKeyString => {\r\n\t\t\treturn new Promise( resolve => resolve(window.btoa(exportKeyString)) );\r\n\t\t});\r\n\t}\r\n\tasync callS3PresignedUrl(callFunction, signData, callFunctionParam = {} ){//,fileName, accountName){\r\n\t\tconsole.log('callFunctionParam !!! ',callFunctionParam);\r\n\t\treturn Promise.all( [this.generateKeyPair(this.signAlgorithm, [\"sign\", \"verify\"]), this.generateKeyPair(this.secretAlgorithm, [\"encrypt\", \"decrypt\"])] )\r\n\t\t.then( ([signKeyPair, encDncKeyPair]) => {\r\n\t\t\treturn Promise.all( [\r\n\t\t\t\tthis.exportKey('spki', signKeyPair.publicKey),\r\n\t\t\t\tthis.exportKey('spki', encDncKeyPair.publicKey), \r\n\t\t\t\tPromise.resolve(encDncKeyPair), \r\n\t\t\t\tPromise.resolve(signKeyPair)\r\n\t\t\t] )\t\t\r\n\t\t}).then( async ([exportSignKey, exportEncKey, encDncKeyPair, signKeyPair]) => {\r\n\r\n\t\t\tlet sign = await this.keySign(\r\n\t\t\t\t`${signData}:${exportEncKey}`, \r\n\t\t\t\tsignKeyPair.privateKey\r\n\t\t\t)\r\n\t\t\t\r\n\t\t\tlet result = await callFunction(Object.assign(callFunctionParam, {\r\n\t\t\t\tdata: window.btoa(String.fromCodePoint(...sign.message)), \r\n\t\t\t\tdataKey: exportSignKey, \r\n\t\t\t\tsign: window.btoa( String.fromCodePoint(...new Uint8Array(sign.signature)) ), \r\n\t\t\t}))\r\n\r\n\t\t\tlet {code, data} = result;\r\n\t\t\t\r\n\t\t\tif(code != 0){\r\n\t\t\t\treturn ;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn {data, encDncKeyPair};\r\n\t\t})\r\n\t}\r\n\r\n\tasync fetchPutObject(putUrl, key, md5, fileData){\r\n\t\treturn fetch(putUrl, {\r\n\t\t\tmethod:\"PUT\",\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Encoding' : 'base64',\r\n\t\t\t\t'Content-Type' : 'application/octet-stream',\r\n\t\t\t\t'x-amz-server-side-encryption-customer-algorithm': 'AES256',\r\n\t\t\t\t'x-amz-server-side-encryption-customer-key': key,\r\n\t\t\t\t'x-amz-server-side-encryption-customer-key-md5': md5,\r\n\t\t\t},\r\n\t\t\tbody: fileData\r\n\t\t})\r\n\t}\r\n}","import FreeWillEditor from \"@handler/editor/FreeWillEditor\";\r\nimport Strong from \"@handler/editor/tools/Strong\"\r\nimport Color from \"@handler/editor/tools/Color\"\r\nimport Background from \"@handler/editor/tools/Background\"\r\nimport Strikethrough from \"@handler/editor/tools/Strikethrough\"\r\nimport Underline from \"@handler/editor/tools/Underline\"\r\nimport FontFamily from \"@handler/editor/tools/FontFamily\"\r\nimport Quote from \"@handler/editor/tools/Quote\"\r\nimport NumericPoint from \"@handler/editor/tools/NumericPoint\"\r\nimport BulletPoint from \"@handler/editor/tools/BulletPoint\"\r\nimport Sort from \"@handler/editor/tools/Sort\"\r\nimport FontSize from \"@handler/editor/tools/FontSize\"\r\nimport Italic from \"@handler/editor/tools/Italic\"\r\nimport Image from \"@handler/editor/tools/Image\"\r\nimport Video from \"@handler/editor/tools/Video\"\r\nimport Resources from \"@handler/editor/tools/Resources\";\r\nimport Code from \"@handler/editor/tools/Code\"\r\nimport Hyperlink from \"@handler/editor/tools/Hyperlink\"\r\n\r\nimport {workspaceHandler} from \"@handler/workspace/WorkspaceHandler\";\r\nimport {roomHandler} from \"@handler/room/RoomHandler\";\r\nimport common from \"@root/js/common\"\r\nimport PositionChanger from \"@handler/PositionChangeer\";\r\nimport {noticeBoardHandler} from \"@handler/notice_board/NoticeBoardHandler\";\r\n\r\nimport { accountHandler } from \"@handler/account/AccountHandler\";\r\nimport { s3EncryptionUtil } from \"@handler/S3EncryptionUtil\";\r\n\r\nexport class NoticeBoardLine extends FreeWillEditor{\r\n    static{\r\n        window.customElements.define('notice-board-line', NoticeBoardLine);\r\n    }\r\n\tstatic tools = [\r\n        Strong,\r\n        Color,\r\n        Background,\r\n        Strikethrough,\r\n        Underline,\r\n        FontFamily,\r\n        Quote,\r\n        NumericPoint,\r\n        BulletPoint,\r\n        Sort,\r\n        FontSize,\r\n        Italic,\r\n        Image,\r\n        Video,\r\n        Resources,\r\n        Code,\r\n        Hyperlink,\r\n    ]\r\n\r\n    static option = {\r\n        isDefaultStyle : true\r\n    }\r\n    \r\n    __parentWrapper;\r\n\r\n    constructor(parent){\r\n\r\n\t\tsuper(NoticeBoardLine.tools, NoticeBoardLine.option);\r\n\r\n        this.__parentWrapper = parent;\r\n        \r\n        super.placeholder = ''\r\n        super.spellcheck = true\r\n    }\r\n\r\n}\r\n\r\nexport const noticeBoardDetail = new class NoticeBoardDetail{\r\n\t#memory = {}\r\n\r\n    #element = Object.assign(document.createElement('div'), {\r\n        id: 'notice_board_detail_wrapper',\r\n        innerHTML: `\r\n            <div class=\"notice_board_detail_container list_scroll list_scroll-y\" data-bind_name=\"noticeBoardDetailContainer\">\r\n                <ul class=\"notice_board_detail_content\" data-bind_name=\"noticeBoardDetailList\">\r\n \r\n                </ul>\r\n                <div class=\"toolbar\" style=\"position: fixed; z-index: 2000;\" data-bind_name=\"toolbar\"></div>\r\n            </div>\r\n        `\r\n    })\r\n\r\n\t#elementMap = (()=>{\r\n\t\treturn \t[...this.#element.querySelectorAll('[data-bind_name]')].reduce((total, element) => {\r\n\t\t\ttotal[element.dataset.bind_name] = element;\r\n\t\t\treturn total;\r\n\t\t}, {})\r\n\t})();\r\n\r\n    #positionChanger;\r\n\r\n    /*#prevRange;\r\n    #prevContent;\r\n    #prevStartOffset;\r\n    #prevEndOffset;*/\r\n\r\n    constructor(){\r\n        this.#positionChanger = new PositionChanger({wrapper: this.#elementMap.noticeBoardDetailList});\r\n\t\tthis.#positionChanger.onDropEndChangePositionCallback = (changeList, {item, target, wrapper}) => {\r\n            window.myAPI.noticeBoard.updateNoticeBoardDetailOrder(\r\n                changeList.map(e=>{\r\n                    return {\r\n                        id: e.dataset.id,\r\n                        workspaceId: e.dataset.workspace_id,\r\n                        roomId: e.dataset.room_id,\r\n                        orderSort: e.dataset.order_sort,\r\n                    }\r\n                })\r\n            ).then(result => {\r\n                console.log(result);\r\n            })\r\n        };\r\n\r\n        window.myAPI.event.electronEventTrigger.addElectronEventListener('noticeBoardDetailAccept', (data) => {\r\n            //console.log(data);\r\n            let lastTarget = document.activeElement;\r\n            if(lastTarget.__parentWrapper) lastTarget.dataset.is_update = '';\r\n\r\n            let isEventStream\r\n            if(data && data.serverSentStreamType){\r\n                isEventStream = true;\r\n                data = data.content;\r\n            }\r\n            this.createItemElement(data)\r\n            .then(li => {\r\n                this.#addMemory(li, data.workspaceId, data.roomId, data.noticeBoardId, data.id);\r\n                let list = Object.values(this.#memory[data.workspaceId]?.[data.roomId]?.[data.noticeBoardId] || {})\r\n                .sort((a,b) => Number(b.dataset.order_sort) - Number(a.dataset.order_sort));\r\n                \r\n                this.#positionChanger.addPositionChangeEvent(list);\r\n\r\n                let listObserver = new MutationObserver( (mutationList, observer) => {\r\n                    mutationList.forEach((mutation) => {\r\n                        let {addedNodes, removedNodes} = mutation;\r\n                        let isAddedActiveTarget = [...addedNodes].some(e=> e == lastTarget.__parentWrapper)\r\n                        if( ! isAddedActiveTarget) return;\r\n                        lastTarget.contentEditable = true;\r\n                        let cursorTarget = lastTarget.hasAttribute('is_cursor') ? lastTarget : lastTarget.querySelector('[is_cursor]');\r\n                        if( ! cursorTarget) return;\r\n                        let {'cursor_offset': offset, 'cursor_type': type, 'cursor_index': index, 'cursor_scroll_x': x, 'cursor_scroll_y': y} = cursorTarget.attributes;\r\n                        let selection = window.getSelection();\r\n                        if(type.value == Node.ELEMENT_NODE){\r\n                            let node = cursorTarget.childNodes[index.value]; \r\n                            selection.setPosition(node, offset.value);\r\n                        }else if(type.value == Node.TEXT_NODE){\r\n                            selection.setPosition(cursorTarget, offset.value);\r\n                        }\r\n                    })\r\n                });\r\n                if(lastTarget && lastTarget.__parentWrapper){   \r\n                    listObserver.observe(this.#elementMap.noticeBoardDetailList, {childList:true});\r\n                }\r\n\r\n                this.#elementMap.noticeBoardDetailList.replaceChildren(...list);\r\n\r\n                let appendAwait = setInterval(()=>{\r\n                    if( ! li.isConnected){\r\n                        return;\r\n                    }\r\n                    clearInterval(appendAwait);\r\n                    listObserver.disconnect();\r\n                    lastTarget.removeAttribute('data-is_update');\r\n                }, 50)\r\n            })\r\n        })\r\n\r\n        this.#elementMap.noticeBoardDetailList\r\n        noticeBoardHandler.addNoticeBoardIdChangeListener = {\r\n            name: 'noticeBoardDetailIdChange',\r\n            callback: (handler, data)=>{\r\n                this.#elementMap.noticeBoardDetailList.replaceChildren();\r\n                this.refresh();\r\n                /*if(this.#memory[workspaceHandler.workspaceId]?.[roomHandler.roomId]?.[noticeBoardHandler.noticeBoardId]){\r\n                    this.#memory[workspaceHandler.workspaceId][roomHandler.roomId][noticeBoardHandler.noticeBoardId] = {};\r\n                }*/\r\n            }\r\n        }\r\n\r\n        let toolList = Object.values(NoticeBoardLine.tools).map(e=>e.toolHandler.toolButton);\r\n\r\n        document.addEventListener('selectionchange', event => {\r\n            if(document.activeElement.constructor != NoticeBoardLine){\r\n                return;\r\n            }\r\n            let selection = window.getSelection();\r\n            if (selection.rangeCount == 0){\r\n                return;\r\n            }\r\n            \r\n            /*let range = selection.getRangeAt(0);\r\n\r\n            this.#prevRange = range.cloneRange();\r\n            this.#prevStartOffset = range.startOffset;\r\n            this.#prevEndOffset = range.endOffset;\r\n            this.#prevContent = range.commonAncestorContainer;*/\r\n\r\n            if( ! selection.isCollapsed){\r\n                this.#elementMap.noticeBoardDetailContainer.append(this.#elementMap.toolbar);\r\n                this.#elementMap.toolbar.replaceChildren(...toolList);\r\n                common.processingElementPosition(this.#elementMap.toolbar, window.getSelection().getRangeAt(0).getBoundingClientRect())\r\n            }else{\r\n                this.#elementMap.toolbar.remove();\r\n            }\r\n        })\r\n        this.#elementMap.noticeBoardDetailContainer.addEventListener(\"scroll\", () => {\r\n\t\t\tif(this.#elementMap.toolbar.childElementCount == 0)return;\r\n\t\t\tcommon.processingElementPosition(this.#elementMap.toolbar, window.getSelection().getRangeAt(0).getBoundingClientRect());\r\n\t\t});\r\n        window.addEventListener('resize', (event) => {\r\n\t\t\tif(this.#elementMap.toolbar.childElementCount == 0)return;\r\n            common.processingElementPosition(this.#elementMap.toolbar, window.getSelection().getRangeAt(0).getBoundingClientRect());\r\n\t\t})\r\n    }\r\n\r\n    createItemElement(data){\r\n        return new Promise(resolve=>{\r\n            let li = Object.assign(document.createElement('li'),{\r\n                className : 'notice_board_detail_item'\r\n            });\r\n            li.dataset.is_not_visible_target = '';\r\n            li.style.minHeight = (parseInt(window.getComputedStyle(document.body).fontSize) || 16) * 2 + 'px';\r\n            \r\n            resolve(this.#addItemEvent(li, data));\r\n        })\r\n    }\r\n\r\n    #addItemEvent(li, data){\r\n        return new Promise(resolve=> {\r\n            let addButton = Object.assign(document.createElement('button'), {\r\n                className: 'notice_board_detail_item_add_content',\r\n                textContent: '+'\r\n            });\r\n            let editor = new NoticeBoardLine(li);\r\n            let positionChangeIcon = Object.assign(document.createElement('span'),{\r\n                className: 'notice_board_detail_item_position_change_icon pointer',\r\n                textContent: '〓'\r\n            })\r\n\r\n            let datasetPromise = common.jsonToSaveElementDataset(data, li);\r\n            //console.log(data.content);\r\n            if(data.content){\r\n                let {content} = data;\r\n                delete data.content;\r\n                datasetPromise.then(() => {\r\n                    li.removeAttribute('data-content');\r\n                    \r\n                    NoticeBoardLine.parseLowDoseJSON(editor, content).then(() => {\r\n                        editor.contentEditable = false;\r\n                        li.append(editor);\r\n                        let appendAwait = setInterval(()=>{\r\n                            if( ! editor.isConnected) return;\r\n                            clearInterval(appendAwait);\r\n                            if(editor.isEmpty){\r\n                                editor.remove();\r\n                                li.prepend(addButton);\r\n                            }\r\n                            /*if( ! editor.isEmpty){\r\n                                li.append(positionChangeIcon)\r\n                            }else {\r\n                                editor.remove();\r\n                                li.prepend(addButton);\r\n                            }*/\r\n                        },50)\r\n                    })\r\n                })\r\n            }else{\r\n                li.prepend(addButton);\r\n                editor.startFirstLine();\r\n            }\r\n            li.onmouseenter = () => {\r\n                if(addButton.isConnected){\r\n                    addButton.classList.add('active');\r\n                    return;\r\n                }\r\n                li.draggable = false;\r\n                if( ! editor.isEmpty){\r\n                    li.append(positionChangeIcon)\r\n                }\r\n            }\r\n            li.onmouseleave = () => {\r\n                if(addButton.isConnected){\r\n                    addButton.classList.remove('active');\r\n                    return;\r\n                }\r\n                if(positionChangeIcon.isConnected){\r\n                    positionChangeIcon.remove();\r\n                }\r\n            }\r\n            //let isPositionChangeIconOver = false;\r\n            positionChangeIcon.onmousemove = () => {\r\n                li.draggable = true;\r\n            }\r\n            positionChangeIcon.onmouseover = () => {\r\n                //isPositionChangeIconOver = true;\r\n                li.draggable = true;\r\n            }\r\n            positionChangeIcon.onmouseout = () => {\r\n                //isPositionChangeIconOver = false;\r\n                li.draggable = false;\r\n            }\r\n\r\n            addButton.onclick = (event) => {\r\n                //console.log(event, editor.isConnected);\r\n                editor.contentEditable = true;\r\n                editor.firstLine.innerText = '\\n'\r\n                if(editor.isConnected){\r\n                    return;\r\n                }\r\n                li.append(editor);\r\n                li.append(positionChangeIcon);\r\n                addButton.remove();\r\n                window.getSelection().setPosition(editor, editor.childNodes.length);\r\n            }\r\n            let prevText;\r\n            editor.onclick = () => {\r\n                if(editor.contentEditable == 'false'){\r\n                    editor.contentEditable = true;\r\n                    if(editor.isEmpty){\r\n                        editor.firstLine.innerText = '\\n'\r\n                    }\r\n                    window.getSelection().setPosition(editor, editor.childNodes.length);\r\n                }\r\n            }\r\n            editor.onfocus = (event) => {\r\n                prevText = editor.innerHTML;\r\n            }\r\n            let isScriptBlur = false;\r\n            editor.onblur = (event) => {\r\n                if( ! isScriptBlur && (\r\n                        editor.matches(':hover') || \r\n                        this.#elementMap.toolbar.matches(':hover') || \r\n                        document.activeElement == editor ||\r\n                        editor.hasAttribute('data-is_update')\r\n                    )\r\n                ){\r\n                    event.preventDefault();\r\n                    return;\r\n                }\r\n                if(isScriptBlur){\r\n                    isScriptBlur = ! isScriptBlur;\r\n                }\r\n                this.#elementMap.toolbar.remove();\r\n                editor.contentEditable = false;\r\n                if( ! event.relatedTarget?.hasAttribute('data-tool_status')){\r\n                    this.#elementMap.toolbar.remove();\r\n                }\r\n                if(editor.isEmpty){\r\n                    editor.replaceChildren();\r\n                    editor.remove();\r\n                    positionChangeIcon.remove();\r\n                    li.prepend(addButton);\r\n                    if(li.matches(':hover')){\r\n                        addButton.classList.add('active');\r\n                    }else{\r\n                        addButton.classList.remove('active');\r\n                    }\r\n                    //return ;\r\n                }else if(prevText == editor.innerHTML){\r\n                    return;\r\n                }\r\n                prevText = editor.innerHTML;\r\n                \r\n                let param = {\r\n                    id: li.dataset.id,\r\n                    noticeBoardId: noticeBoardHandler.noticeBoardId,\r\n                    roomId: roomHandler.roomId,\r\n                    workspaceId: workspaceHandler.workspaceId,\r\n                    orderSort: li.dataset.order_sort //([...this.#elementMap.noticeBoardDetailList.children].findIndex(e=>e==li) - 1) * -1,\r\n                };\r\n                this.#uploadNoticeBoard(editor, param);\r\n            }\r\n            editor.onkeydown = (event) => {\r\n                let {altKey, ctrlKey, shiftKey, key} = event;\r\n                if(key == 'Enter' && (altKey || ctrlKey || shiftKey)){\r\n                    event.preventDefault();\r\n                    let LineBreakMode;\r\n                    if(altKey){\r\n                        LineBreakMode = FreeWillEditor.LineBreakMode.NEXT_LINE_FIRST\r\n                    }else if(ctrlKey){\r\n                        LineBreakMode = FreeWillEditor.LineBreakMode.NEXT_LINE_LAST\r\n                    }else{\r\n                        LineBreakMode = FreeWillEditor.LineBreakMode.NO_CHANGE\r\n                    }\r\n                    editor.lineBreak(LineBreakMode);\r\n                }else if(key == 'Enter'){// && editor.innerText.replaceAll('\\n', '') != ''){\r\n                    event.preventDefault();\r\n                    isScriptBlur = true;\r\n                    editor.blur();\r\n                }\r\n            }\r\n\r\n            resolve(li);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {NoticeBoardLine} editor \r\n     * @param {Object} param\r\n     */\r\n    async #uploadNoticeBoard(editor, param){\r\n        let promiseList = [];\r\n\r\n        editor.contentEditable = false;\r\n        NoticeBoardLine.getLowDoseJSON(editor, {\r\n            afterCallback : (json) => {\r\n                if(json.tagName != Image.toolHandler.defaultClass && \r\n                    json.tagName != Video.toolHandler.defaultClass &&\r\n                    json.tagName != Resources.toolHandler.defaultClass\r\n                ){\r\n                    return;\r\n                }else if(json.data.hasOwnProperty('is_upload_end')){\r\n                    return;\r\n                }\r\n                let node = json.node;\r\n                let file = node.selectedFile;\r\n                json.data.is_loading = '';\r\n                console.log(node, file);\r\n                let fileType;\r\n                if(json.tagName == Image.toolHandler.defaultClass){\r\n                    fileType = 'IMAGE';\r\n                }else if(json.tagName == Video.toolHandler.defaultClass){\r\n                    fileType = 'VIDEO';\r\n                }else {\r\n                    fileType = 'FILE';\r\n                }\r\n                promiseList.push(new Promise(async resolve => {\r\n\r\n                    let {name, size, lastModified, contentType, newFileName} = await common.underbarNameToCamelName(json.data);\r\n                    let putSignData = `${roomHandler.roomId}:${workspaceHandler.workspaceId}:${name}:${accountHandler.accountInfo.accountName}`;\r\n                    let isUpload = await s3EncryptionUtil.callS3PresignedUrl(window.myAPI.s3.generateSecurityPutObjectPresignedUrl, putSignData, {newFileName, fileType, uploadType: 'NOTICE'})\r\n                    .then( (result) => {\r\n                        if(! result){\r\n                            return;\r\n                        }\r\n                        let {data, encDncKeyPair} = result;\r\n\r\n                        json.data.new_file_name = data.newFileName;\r\n\r\n                        return Promise.all([\r\n                            s3EncryptionUtil.convertBase64ToBuffer(data.encryptionKey).then( async (buffer) => {\r\n                                return s3EncryptionUtil.decryptMessage(encDncKeyPair.privateKey, buffer, s3EncryptionUtil.secretAlgorithm)\r\n                                    .then(buf=>String.fromCharCode(...new Uint8Array(buf)))\r\n                            }),\r\n                            s3EncryptionUtil.convertBase64ToBuffer(data.encryptionMd).then( async (buffer) => {\r\n                                return s3EncryptionUtil.decryptMessage(encDncKeyPair.privateKey, buffer, s3EncryptionUtil.secretAlgorithm)\r\n                                    .then(buf=>String.fromCharCode(...new Uint8Array(buf)))\r\n                            })\r\n                        ]).then( async ([k,m]) => {\r\n                            /*let base64 = json.data.base64;\r\n                            if(! base64){\r\n                                let blob = await fetch(json.data.url).then(res=>res.blob())\r\n                                base64 = await new Promise(resolve => {\r\n                                    const reader = new FileReader();\r\n                                    reader.readAsDataURL(blob);\r\n                                    reader.onloadend = () => {\r\n                                        resolve(reader.result);\r\n                                    }\r\n                                });\r\n                            }*/\r\n                            let res = await s3EncryptionUtil.fetchPutObject(data.presignedUrl, k, m, file.files[0]);\r\n                            if( ! (res.status == 200 || res.status == 201) ){\r\n                                return;\r\n                            }\r\n                            return true;\r\n                        })\r\n                    })\r\n                    console.log(isUpload);\r\n                    if( ! isUpload){\r\n                        resolve();\r\n                        return;\r\n                    }\r\n                    let getSignData = `${roomHandler.roomId}:${workspaceHandler.workspaceId}:${json.data.new_file_name}:${accountHandler.accountInfo.accountName}`;\r\n                    \r\n                    s3EncryptionUtil.callS3PresignedUrl(window.myAPI.s3.generateSecurityGetObjectPresignedUrl, getSignData, {fileType, uploadType: 'NOTICE'})\r\n                    .then( (result) => {\r\n                        if(! result){\r\n                            return;\r\n                        }\r\n                        let {data, encDncKeyPair} = result;\r\n\r\n                        json.data.url = data.presignedUrl;\r\n                        delete json.data.base64\r\n                        json.data.upload_type = 'NOTICE';\r\n                        resolve(json);\r\n                    })\r\n                }))\r\n            }\r\n        }).then(jsonList => {\r\n\r\n            param.content = JSON.stringify(jsonList);\r\n            if(param.content.length == 0) param.content = undefined\r\n            window.myAPI.noticeBoard.createNoticeBoardDetail(param).then(res=>{\r\n                let {data} = res\r\n                this.innerText = '';\r\n                Promise.all(promiseList).then((fileTargetList) => {\r\n                    console.log(fileTargetList);\r\n                    if(fileTargetList.length == 0){\r\n                        //window.getSelection().setPosition(this, 1)\r\n                        return;\r\n                    }\r\n                    fileTargetList.forEach(e=>{\r\n                        delete e.data.is_loading\r\n                        e.data.is_upload_end = '';\r\n                        e.data.room_id = param.roomId;\r\n                        e.data.workspace_id = param.workspaceId;\r\n                    });\r\n                    param.content = JSON.stringify(jsonList);\r\n                    if(param.content.length == 0) param.content = undefined\r\n                    window.myAPI.noticeBoard.createNoticeBoardDetail(param).then(response=>{\r\n                        //window.getSelection().setPosition(this, 1)\r\n                    });\r\n                })\r\n            });\r\n            \r\n        })\r\n    }\r\n\r\n    #callData(){\r\n        return window.myAPI.noticeBoard.searchNoticeBoardDetailList({\r\n            workspaceId: workspaceHandler.workspaceId, \r\n            roomId: roomHandler.roomId,\r\n            noticeBoardId : noticeBoardHandler.noticeBoardId\r\n        })\r\n    }\r\n\r\n    #addMemory(data, workspaceId, roomId, noticeBoardId, id){\r\n\t\tif( ! this.#memory.hasOwnProperty(workspaceId)){\r\n\t\t\tthis.#memory[workspaceId] = {};\r\n\t\t}\r\n\t\tif( ! this.#memory[workspaceId].hasOwnProperty(roomId)){\r\n\t\t\tthis.#memory[workspaceId][roomId] = {} ;\r\n\t\t}\r\n        if( ! this.#memory[workspaceId][roomId].hasOwnProperty(noticeBoardId)){\r\n            this.#memory[workspaceId][roomId][noticeBoardId] = {}\r\n        }\r\n        \r\n        this.#memory[workspaceId][roomId][noticeBoardId][id] = data;\r\n\t\t\r\n    }\r\n    async refresh(){\r\n        let list = Object.values(this.#memory[workspaceHandler.workspaceId]?.[roomHandler.roomId]?.[noticeBoardHandler.noticeBoardId] || {})\r\n        .sort((a,b) => Number(b.dataset.order_sort) - Number(a.dataset.order_sort));\r\n        if(list.length == 0){\r\n            this.#callData();\r\n            return;\r\n        }\r\n        this.#positionChanger.addPositionChangeEvent(list);\r\n        this.#elementMap.noticeBoardDetailList.replaceChildren(...list);  \r\n\r\n\t}\r\n\r\n\tget element(){\r\n\t\treturn this.#element;\r\n\t}\r\n\t\r\n\tget elementMap(){\r\n\t\treturn this.#elementMap;\r\n\t}\r\n}","/**\r\n * indexedDB 템플릿 (미완성)\r\n * @author mou123\r\n * @constructor\r\n */\r\nexport default class IndexedDBHandler{\r\n\t/**\r\n\t * indexed db에서 사용할 db 식별 명칭\r\n\t */\r\n\t#dbName;\r\n\r\n\t/**\r\n\t * indexed db의 store에서 사용 할 컬럼 정보\r\n\t */\r\n\t#columnInfo;\r\n\r\n\t/**\r\n\t * store 식별 명칭\r\n\t */\r\n\t#storeName;\r\n\r\n\t#db;\r\n\r\n\tisOpen = false;\r\n\r\n\t#container;\r\n\r\n\t#keyPathNameList\r\n\r\n\t#pkAutoIncrement\r\n\r\n\t/**\r\n\t * 생성자\r\n\t * @author mozu123\r\n\t * @example \t\r\n\t#columnInfo = {\r\n\t\tboTempId:['boTempId','boTempId',{unique : true}],\r\n\t\tboTempName:['boTempName','boTempName'],\r\n\t\tboTempInsertTime:['boTempInsertTime','boTempInsertTime'],\r\n\t\tboTempData:['boTempData','boTempData']\r\n\t};\r\n\t */\r\n\tconstructor({\r\n\t\tdbName = undefined,\r\n\t\tcolumnInfo = undefined,\r\n\t\tstoreName = undefined,\r\n\t\tkeyPathNameList = [],\r\n\t\tpkAutoIncrement = true\r\n\t}){\r\n\t\tif( ! dbName ){\r\n\t\t\tthrow new Error('dbName is undefined');\r\n\t\t}else if( ! columnInfo ){\r\n\t\t\tthrow new Error('columnInfo is undefined');\r\n\t\t}else if( ! storeName ){\r\n\t\t\tthrow new Error('storeName is undefined')\r\n\t\t}else if( keyPathNameList.length == 0 ){\r\n\t\t\tthrow new Error('keyPathName is undefined')\r\n\t\t}else if(keyPathNameList.filter(e=>columnInfo[e]).length != keyPathNameList.length){\r\n\t\t\tthrow new Error('invalid key path name')\r\n\t\t}else if(pkAutoIncrement == true && keyPathNameList.length > 1){\r\n\t\t\tthrow new Error('multiple key not use autoIncrement : true');\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.#dbName = dbName;\r\n\t\t\tthis.#columnInfo = columnInfo;\r\n\t\t\tthis.#storeName = storeName;\t\r\n\t\t\tthis.#container = JSON.stringify(\r\n\t\t\t\tObject.entries(columnInfo).reduce((obj, [k,v], idx) => {\r\n\t\t\t\t\tobj[k] = undefined;\r\n\t\t\t\t\treturn obj;\r\n\t\t\t\t}, {})\r\n\t\t\t)\r\n\t\t\tthis.#keyPathNameList = keyPathNameList;\r\n\t\t\tthis.#pkAutoIncrement = pkAutoIncrement;\r\n\t\t}\r\n\t}\r\n\r\n\topen(){\r\n\t\treturn new Promise( (resolve, reject) => {\r\n\r\n\t\t\tconst dbOpenRequest = indexedDB.open(this.DB_NAME);\r\n\t\t\t/**\r\n\t\t\t * db open시 기존 버전 정보를 비교하였을 때, 업그레이드가 필요한 경우 동작하는 이벤트를 정의한다.\r\n\t\t\t * @author mozu123\r\n\t\t\t * @param {Event} e \r\n\t\t\t * @returns \r\n\t\t\t * @see this.upgradeneeded()\r\n\t\t\t */\r\n\t\t\tdbOpenRequest.onupgradeneeded = (e) => this.upgradeneeded(e,{});\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * db open시 동작하는 이벤트를 정의한다.\r\n\t\t\t * @param {Event} e \r\n\t\t\t */\r\n\t\t\tdbOpenRequest.onsuccess = (e) => {\r\n\r\n\t\t\t\tthis.isOpen = true;\r\n\t\t\t\tthis.#db = e.target.result;\r\n\t\t\t\tlet storeName = Object.entries(this.#db.objectStoreNames).find(([idx, storeName]) => storeName == this.DB_STORE_NAME)\r\n\t\t\t\tlet isNewAddStore = ! storeName;\r\n\r\n\t\t\t\tlet isNeedChangeIndex = false;\r\n\r\n\t\t\t\tif( ! isNewAddStore){\r\n\t\t\t\t\tlet store = this.#db.transaction(this.DB_STORE_NAME, 'readwrite').objectStore(this.DB_STORE_NAME);\r\n\t\t\t\t\tlet indexNamesMapper = Object.entries(store.indexNames).reduce((t,[idx,indexName])=>{\r\n\t\t\t\t\t\tt[indexName]=idx\r\n\t\t\t\t\t\treturn t;\r\n\t\t\t\t\t},{});\r\n\t\t\t\t\tisNeedChangeIndex = \r\n\t\t\t\t\t\tObject.entries(indexNamesMapper).findIndex(([name,idx]) => ! this.#columnInfo[name] ) != -1 ||\r\n\t\t\t\t\t\tObject.entries(this.#columnInfo).findIndex(([k,v])=> ! indexNamesMapper[k] ) != -1\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif( isNewAddStore || isNeedChangeIndex ){\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet newVersion = Number(this.#db.version) + 1;\r\n\t\t\t\t\tconsole.log(this.#storeName, newVersion);\r\n\t\t\t\t\t// 기존 버전과 비교하였을 때 변경사항이 있어서 업그레이드(기존 정보 마이그레이션)가 필요 한 경우\r\n\t\t\t\t\tconsole.log(dbOpenRequest);\r\n\t\t\t\t\tthis.close().then( closeResult => {\r\n\t\t\t\t\t\tconst secondOpenRequest = indexedDB.open(this.DB_NAME, newVersion);\r\n\t\t\t\t\t\tconsole.log(secondOpenRequest)\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * DB에 변동사항이 생겨 업그레이드가 필요하다면, 기존 db를 닫은 후 다시 열어서 신규 정보를 업그레이드 하는 이벤트가 동작하도록 한다.\r\n\t\t\t\t\t\t * @author mozu123\r\n\t\t\t\t\t\t * @param {Event} event \r\n\t\t\t\t\t\t * @returns \r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tsecondOpenRequest.onupgradeneeded = (event) => this.upgradeneeded(event, {isNewAddStore:isNewAddStore});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * 위에 입력된 로직에 따라 업그레이드가 완료된 경우 이 이벤트가 동작한다.\r\n\t\t\t\t\t\t * @author mozu123\r\n\t\t\t\t\t\t * @param {Event} event \r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tsecondOpenRequest.onsuccess = (event) => {\r\n\t\t\t\t\t\t\tthis.isOpen = true;\r\n\t\t\t\t\t\t\tthis.#db = event.target.result;\r\n\t\t\t\t\t\t\tresolve(this.isOpen);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsecondOpenRequest.onblocked = (e) => {\r\n\t\t\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tresolve(this.isOpen);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdbOpenRequest.onblocked = (e) => {\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * db open시 어떤 이유로 인해 오류가 발생할 때 동작하는 이벤트\r\n\t\t\t * @param {Event} e \r\n\t\t\t */\r\n\t\t\tdbOpenRequest.onerror = (e) => {\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t\tthis.isOpen = false;\r\n\t\t\t\tif(e.target.error.name == 'VersionError'){\r\n\t\t\t\t\t//error code\r\n\t\t\t\t\treject(new Error('VersionError: DB 버전을 수동으로 입력해선 안됩니다.'));\r\n\t\t\t\t}else{\r\n\t\t\t\t\t//error code\r\n\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\treject(new Error(`unknownError ${e}`))\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tclose(){\r\n\t\treturn new Promise( resolve => {\r\n\t\t\tif( ! this.#db || ! this.isOpen){\r\n\t\t\t\tresolve(false)\r\n\t\t\t}\r\n\t\t\tthis.#db.onabort = (e) => console.log(e)\r\n\t\t\tthis.#db.onerror = (e) => console.log(e);\r\n\t\t\tthis.#db.close();\r\n\t\t\tthis.isOpen = false;\r\n\t\t\tthis.#db.onclose = (event) => {\r\n\t\t\t\tthis.isOpen = false;\r\n\t\t\t\tresolve(true)\r\n\t\t\t}\r\n\t\t\tresolve(true);\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * DB NAME을 가져오는 getter\r\n\t * @author mou123\r\n\t */\r\n\tget DB_NAME(){\r\n\t\treturn this.#dbName;\r\n\t}\r\n\r\n\t/**\r\n\t * @author mou123\r\n\t */\r\n\tget DB_STORE_NAME(){\r\n\t\treturn this.#storeName;\r\n\t}\r\n\r\n\tget COLUMN_INFO(){\r\n\t\treturn this.#columnInfo;\r\n\t}\r\n\r\n\tget template(){\r\n\t\treturn JSON.parse(this.#container);\r\n\t}\r\n\r\n\t/**\r\n\t * indexed DB를 open 할 때 업그레이드 필요 여부에 따라 동작하는 함수를 정의한다.\r\n\t * @author mou123\r\n\t * @param {Event} event \r\n\t * @param {Object} isNewAddStore : 새롭게 등록되어야 할 store인지 여부 \r\n\t */\r\n\tupgradeneeded(event,{isNewAddStore=false}){\r\n\r\n\t\tlet objectStore;\r\n\t\t// newVersion이 oldVersion과 같지 않고 && oldVersion이 0이 아니며 *(최초 오픈시 0임) && 신규 store를 등록하는 것이 아니라면\r\n\t\tif(event.newVersion != event.oldVersion && event.oldVersion != 0 && ! isNewAddStore){\r\n\t\t\tobjectStore = event.target.transaction.objectStore(this.DB_STORE_NAME);\r\n\t\t\tlet indexNameList = Object.entries(objectStore.indexNames);\r\n\t\t\tlet oldIndexCheckMapper = indexNameList.reduce((t,[idx,indexName])=>{\r\n\t\t\t\tt[indexName]=idx\r\n\t\t\t\treturn t;\r\n\t\t\t},{});\r\n\t\t\t\r\n\t\t\tObject.entries(this.#columnInfo).forEach(([indexName, column])=>{\r\n\t\t\t\tif( ! oldIndexCheckMapper[ column[0] ]){\r\n\t\t\t\t\tobjectStore.createIndex(...column);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tindexNameList.forEach(([k,indexName])=>{\r\n\t\t\t\tif( ! this.#columnInfo[indexName]){\r\n\t\t\t\t\tobjectStore.deleteIndex(indexName);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}else{\r\n\t\t\t//let keyPath = Object.values(this.#columnInfo).find(column => column.some(e=>e.unique))[0];\r\n\t\t\tlet keyPath = this.#pkAutoIncrement || this.#keyPathNameList.length == 1 ? this.#keyPathNameList[0] : this.#keyPathNameList\r\n\t\t\tobjectStore = event.target.result.createObjectStore(this.DB_STORE_NAME, { keyPath , autoIncrement : this.#pkAutoIncrement });\r\n\t\t\tObject.entries(this.#columnInfo).forEach( ([indexName, column]) => objectStore.createIndex(...column) );\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * indexed db에 데이터를 저장하는 함수\r\n\t * @param {Object} data : indexed db에 저장할 데이터 \r\n\t * @returns {Promise}\r\n\t */\r\n\taddItem(data = this.#container){\r\n\t\treturn new Promise( (resolve, reject ) => {\r\n\t\t\tif( ! this.isOpen || ! this.#db){\r\n\t\t\t\treject(new Error('indexedDB가 열려있지 않습니다.'));\r\n\t\t\t}\r\n\t\t\tlet transaction = this.#db.transaction(this.DB_STORE_NAME, 'readwrite')\r\n\t\t\tlet store = transaction.objectStore(this.DB_STORE_NAME);\r\n\t\t\tlet request = store.put(data);\r\n\t\t\trequest.onsuccess = (e) => {\r\n\t\t\t\ttransaction.commit();\r\n\t\t\t}\r\n\t\t\trequest.onerror = (e) => {\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t}\r\n\t\t\ttransaction.oncomplete = (e)=>{\r\n\t\t\t\tif(e.type == 'complete'){\r\n\t\t\t\t\t//alert('임시 저장을 완료하였습니다.');\r\n\t\t\t\t\t//console.log(e.type);\r\n\t\t\t\t}\r\n\t\t\t\tresolve(e);\r\n\t\t\t}\r\n\t\t\ttransaction.onerror = (e)=>{\r\n\t\t\t\t//error code\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t\treject(new Error('commit error'))\r\n\t\t\t}\r\n\t\t\t//return resolve();\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * 임시 저장 버튼 클릭시 동작할 함수\r\n\t * @author mozu123\r\n\t * @param {Object} data \r\n\t */\r\n\t/*tempSaveButtonClickEvent(data){\r\n\t\tif( ! data){\r\n\t\t\tthrow new Error('임시 저장 할 데이터가 비어 있습니다.');\r\n\t\t}\r\n\t\tlet boTempName = window.prompt('임시 저장 내용을 식별할 명칭을 지정해주세요.\\n입력하지 않을시 현재 시간으로 저장됩니다.', new Date().toLocaleString());\r\n\t\tthis.addTempItem(data, boTempName);\r\n\t}*/\r\n\r\n\t/**\r\n\t * 임시 저장 목록에서 특정 조건을 만족하는 데이터만 추출할 떄 사용 할 함수 -> 미완성 (안만듬)\r\n\t * @param {Object} param0 : 필터 검색 조건 데이터 \r\n\t * @returns \r\n\t */\r\n\t//getTempFilterList({boTempId, boTempName, boTempInsertTime, pageNum=1, pageSize=5, startDateTime, endDateTime}){}\r\n\t\r\n\tgetItem(key){\r\n\t\treturn new Promise( (resolve, reject) => {\r\n\t\t\tlet transaction = this.#db.transaction(this.DB_STORE_NAME, 'readonly');\r\n\t\t\tlet objectStore = transaction.objectStore(this.DB_STORE_NAME);\r\n\t\t\tlet request = objectStore.get(key);\r\n\t\t\trequest.onerror = (event) => {\r\n\t\t\t\tconsole.error(event);\r\n\t\t\t\treject(request);\r\n\t\t\t}\r\n\r\n\t\t\trequest.onsuccess = (event) => {\r\n\t\t\t\tresolve(request);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * 임시 저장 목록을 불러오는 함수 pageNum의 기본값은 1, pageSize의 기본값은 5\r\n\t * @author mozu123\r\n\t * @param {Object} param0 : 페이지 정보를 가지고 있는 객체\r\n\t */\r\n\tgetList({pageNum=1, pageSize=5, callback, readOption = 'readonly'} = {}){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\r\n\t\t\tlet start = (pageSize * (pageNum - 1));\r\n\t\t\tlet isEnableAdvanced = start != 0; \r\n\t\t\tlet count = 0;\r\n\t\t\tlet transaction = this.#db.transaction(this.DB_STORE_NAME, readOption)\r\n\t\t\tlet store = transaction.objectStore(this.DB_STORE_NAME);\r\n\t\t\tlet result = {\r\n\t\t\t\tdata:[],\r\n\t\t\t\tevent:undefined\r\n\t\t\t};\r\n\t\t\tlet cursorRequest = store.openCursor()\r\n\t\t\tcursorRequest.onsuccess = (event) => {\r\n\t\t\t\tconst cursor = event.target.result;\r\n\t\t\t\tif( ! cursor ){\r\n\t\t\t\t\treturn ;\r\n\t\t\t\t}else if(isEnableAdvanced){\r\n\t\t\t\t\tisEnableAdvanced = ! isEnableAdvanced\r\n\t\t\t\t\tcursor.advance(start);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(callback instanceof Function){\r\n\t\t\t\t\tcallback(cursor);\r\n\t\t\t\t}\r\n\t\t\t\tlet value = cursor.value;\r\n\t\t\t\tresult.data.push(value);\r\n\t\t\t\tcount += 1;\r\n\t\t\t\t\r\n\t\t\t\tif(count >= pageSize){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcursor.continue();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\ttransaction.oncomplete = (event) => {\r\n\t\t\t\tresult.event = event;\r\n\t\t\t\treturn resolve(result);\r\n\t\t\t}\r\n\t\t\ttransaction.onerror = (e) => reject(e);\r\n\t\t\ttransaction.onabort = (e) => reject(e);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * 임시 저장 목록 중 특정 row를 삭제하는 함수\r\n\t * @author mozu123\r\n\t * @param  {...String} idList : 삭제 할 id 목록\r\n\t * @returns {Promise} result : 삭제 몇건 했는지 count 한 정보를 담은 Object\r\n\t */\r\n\tdeleteList(...idList){\r\n\t\tif(idList.length == 0){\r\n\t\t\treturn Promise.resolve()\r\n\t\t}\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tlet transaction = this.#db.transaction(this.DB_STORE_NAME, 'readwrite')\r\n\t\t\tlet store = transaction.objectStore(this.DB_STORE_NAME);\r\n\t\t\tlet result = {successCount:0, failedCount:0};\r\n\t\t\tidList.forEach(id=>{\r\n\t\t\t\tlet request = store.delete([id]);\r\n\t\t\t\trequest.onsuccess = (e)=>{\r\n\t\t\t\t\tresult.successCount += 1;\r\n\t\t\t\t\ttransaction = e.target.transaction;\r\n\t\t\t\t}\r\n\t\t\t\trequest.onerror = (e)=>{\r\n\t\t\t\t\tresult.failedCount += 1;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\ttransaction.commit();\r\n\t\t\ttransaction.oncomplete = (event) => {\r\n\t\t\t\tresult.event = event;\r\n\t\t\t\treturn resolve(result);\r\n\t\t\t}\r\n\t\t\ttransaction.onerror = (e) => reject(e);\r\n\t\t\ttransaction.onabort = (e) => reject(e);\r\n\t\t})\r\n\t}\r\n\r\n\tdeleteDatabase(dbName){\r\n\t\treturn new Promise( (resolve, reject) => {\r\n\t\t\t\r\n\t\t\tlet deleteReuqest = indexedDB.deleteDatabase(dbName);\r\n\t\t\tdeleteReuqest.onerror = (event) => {\r\n\t\t\t\tconsole.error(event);\r\n\t\t\t\treject(event);\r\n\t\t\t}\r\n\t\t\tdeleteReuqest.onsuccess = (event) => {\r\n\t\t\t\tconsole.log(event);\r\n\t\t\t\tresolve(event);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n}","\r\nimport {roomHandler} from \"@handler/room/RoomHandler\"\r\n\r\nimport Image from \"@handler/editor/tools/Image\"\r\nimport Video from \"@handler/editor/tools/Video\"\r\nimport Resources from \"@handler/editor/tools/Resources\"\r\nimport FontSize from \"@handler/editor/tools/FontSize\"\r\n\r\nimport { accountHandler } from \"@handler/account/AccountHandler\"\r\nimport { s3EncryptionUtil } from \"@handler/S3EncryptionUtil\"\r\nimport {workspaceHandler} from \"@handler/workspace/WorkspaceHandler\"\r\nimport IndexedDBHandler from \"@handler/IndexedDBHandler\"\r\n\r\nimport common from \"@root/js/common\";\r\n\r\nFontSize.unit = 'rem';\r\nFontSize.min = 0.1;\r\nFontSize.max = 5;\r\nFontSize.weight = 0.1;\r\n\r\nexport default class CommonInit{\r\n\t#oneDay = 1000 * 60 * 60 * 24;\r\n\tconstructor(pageName){\r\n\t\t/*\r\n\t\tindexedDBHandler.open().then(()=>{\r\n\t\t\tindexedDBHandler.addItem({\r\n\t\t\t\tfileName:'test',\r\n\t\t\t\tlastModified:'1111',\r\n\t\t\t\ttargetId: '1',\r\n\t\t\t\tuploadType: 'abcd'\r\n\t\t\t});\r\n\t\t})\r\n\t\t*/\r\n\t\twindow.addEventListener('load', async () => {\r\n\t\t\tconst indexedDBHandler = new IndexedDBHandler({\r\n\t\t\t\tdbName: 'fileDB-main-page',\r\n\t\t\t\tstoreName: `s3Memory-main-page`,\r\n\t\t\t\tcolumnInfo: {\r\n\t\t\t\t\tfileName: ['fileName', 'fileName', {unique : true}],\r\n\t\t\t\t\toriginFileName: ['originFileName', 'originFileName'],\r\n\t\t\t\t\tfileData : ['fileData', 'fileData'],\r\n\t\t\t\t\tlastModified: ['lastModified', 'lastModified'],\r\n\t\t\t\t\tuploadType: ['uploadType', 'uploadType'],\r\n\t\t\t\t\troomId: ['roomId', 'roomId'],\r\n\t\t\t\t\tworkspaceId: ['workspaceId', 'workspaceId']\r\n\t\t\t\t},\r\n\t\t\t\tkeyPathNameList: ['fileName'],\r\n\t\t\t\tpkAutoIncrement : false\r\n\t\t\t});\r\n\t\t\tconst dbOpenPromise = indexedDBHandler.open();\r\n\r\n\t\t\tconst imageOrVideoCallback = async (targetTools) => {\r\n\t\t\t\tif(targetTools.hasAttribute('data-is_loading')){\r\n\t\t\t\t\tlet uploadLoading = targetTools.querySelector('[data-upload_loading]');\r\n\t\t\t\t\tif( ! uploadLoading){\r\n\t\t\t\t\t\tuploadLoading = Object.assign(document.createElement('div'), {\r\n\t\t\t\t\t\t\tclassName: 'upload_loading',\r\n\t\t\t\t\t\t\tinnerHTML: `\r\n\t\t\t\t\t\t\t<div class=\"upload_loading_container\">\r\n\t\t\t\t\t\t\t\t<span>컨텐츠를 업로드 중입니다</span>\r\n\t\t\t\t\t\t\t\t<span class=\"status_text_elipsis\" data-status_text_elipsis></span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tuploadLoading.dataset.upload_loading = '';\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tuploadLoading.className = 'upload_loading'\r\n\t\t\t\t\t\tuploadLoading.querySelector('[data-status_text_elipsis]').className = 'upload_loading'; \r\n\t\t\t\t\t}\r\n\t\t\t\t\ttargetTools.append(uploadLoading);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tlet fileType;\r\n\t\t\t\tif(targetTools.constructor == Image){\r\n\t\t\t\t\tfileType = 'IMAGE';\r\n\t\t\t\t}else if(targetTools.constructor == Video){\r\n\t\t\t\t\tfileType = 'VIDEO';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tfileType = 'FILE';\r\n\t\t\t\t}\r\n\t\t\t\tconst isHasRememberFile = await new Promise(resolve => {\r\n\t\t\t\t\t/*if(targetTools.constructor == Resources){\r\n\t\t\t\t\t\tresolve({result: undefined});\r\n\t\t\t\t\t}*/\r\n\t\t\t\t\tdbOpenPromise.then(() => {\r\n\t\t\t\t\t\tnew Promise(res=>{\r\n\t\t\t\t\t\t\tindexedDBHandler.getList({\r\n\t\t\t\t\t\t\t\tpageNum : 1, \r\n\t\t\t\t\t\t\t\tpageSize : 99999, \r\n\t\t\t\t\t\t\t\treadOption: 'readwrite', \r\n\t\t\t\t\t\t\t\tcallback: (cursor)=>{\r\n\t\t\t\t\t\t\t\t\tif(cursor.value.lastModified < new Date().getTime() - this.#oneDay){\r\n\t\t\t\t\t\t\t\t\t\tcursor.delete();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}).then(result=>{\r\n\t\t\t\t\t\t\t\tres();\r\n\t\t\t\t\t\t\t\t/*let deleteTargetList = result.data.filter(e=>{\r\n\t\t\t\t\t\t\t\t\tlet lastModified = parseInt(e.lastModified);\r\n\t\t\t\t\t\t\t\t\treturn lastModified - this.#oneDay <= new Date().getTime() - this.#oneDay;\r\n\t\t\t\t\t\t\t\t}).map(e=>e.fileName);\r\n\t\t\t\t\t\t\t\tindexedDBHandler.deleteList(deleteTargetList).then((deleteResult) => {\r\n\t\t\t\t\t\t\t\t\tres();\r\n\t\t\t\t\t\t\t\t});*/\r\n\t\t\t\t\t\t\t}).catch((err)=>{\r\n\t\t\t\t\t\t\t\tconsole.error(err)\r\n\t\t\t\t\t\t\t\tres();\r\n\t\t\t\t\t\t\t})\t\r\n\t\t\t\t\t\t}).then(() => {\r\n\t\t\t\t\t\t\tindexedDBHandler.getItem(targetTools.dataset.new_file_name).then(result=>{\r\n\t\t\t\t\t\t\t\tresolve(result);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\r\n\t\t\t\tif(isHasRememberFile.result){\r\n\t\t\t\t\tlet url = window.URL.createObjectURL(isHasRememberFile.result.fileData, targetTools.dataset.content_type)\r\n\t\t\t\t\ttargetTools.dataset.url = url;\r\n\t\t\t\t\tif(targetTools.image){\r\n\t\t\t\t\t\ttargetTools.image.src = url;\r\n\t\t\t\t\t}else if(targetTools.video){\r\n\t\t\t\t\t\ttargetTools.video.src = url;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t//targetTools.resources.data = url;\r\n\t\t\t\t\t\ttargetTools.resourcesUrl = url;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet startPromise = new Promise(resolve => {\r\n\r\n\t\t\t\t\tlet {size, rank, rankText} = common.shortenBytes(targetTools.dataset.size);\r\n\r\n\t\t\t\t\tif(size >= 10 && rank >= 2){\r\n\t\t\t\t\t\tlet filePreview = targetTools.querySelector('[data-file_preview]');\r\n\t\t\t\t\t\tif( ! filePreview){\r\n\t\t\t\t\t\t\tfilePreview = Object.assign(document.createElement('div'), {\r\n\t\t\t\t\t\t\t\tclassName: 'file_preview',\r\n\t\t\t\t\t\t\t\tinnerHTML: `\r\n\t\t\t\t\t\t\t\t<div class=\"file_preview_container\" data-file_preview_container>\r\n\t\t\t\t\t\t\t\t\t<div>10MB 이상의 파일은 당신의 데이터를 위해 미리보기를 제공하지 않습니다.</div>\r\n\t\t\t\t\t\t\t\t\t<div>미리보기를 클릭시 기능 제공을 위해 임시 저장소에 저장을 시작하며, 이는 추후 자동 삭제의 대상이 됩니다.</div>\r\n\t\t\t\t\t\t\t\t\t<div>이 파일의 용량 : ${size}${rankText}</div>\r\n\t\t\t\t\t\t\t\t\t<button class=\"file_preview_button\" data-file_preview_button type=\"button\">미리보기</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tfilePreview.dataset.file_preview = '';\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tfilePreview.querySelector('[data-file_preview_container]').className = 'file_preview_container'\r\n\t\t\t\t\t\t\tfilePreview.querySelector('[data-file_preview_button]').className = 'file_preview_button'; \r\n\t\t\t\t\t\t\tfilePreview.className = 'file_preview';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfilePreview.style.display = 'none';\r\n\t\t\t\t\t\tResources.resourcesCallback = ({status, resources}) => {\r\n\t\t\t\t\t\t\tif(status == 'error'){\r\n\t\t\t\t\t\t\t\tfilePreview.style.display = '';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfilePreview.onclick = (event) => {\r\n\t\t\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfilePreview.dataset.visibility_not = '';\r\n\r\n\t\t\t\t\t\ttargetTools.append(filePreview)\r\n\r\n\t\t\t\t\t\tlet filePreviewButton = filePreview.querySelector('.file_preview_button');\r\n\t\t\t\t\t\t//document.body.onclick = (event) =>{ event}\r\n\t\t\t\t\t\tfilePreviewButton.onclick = (event) => {\r\n\r\n\t\t\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\t\t\tfilePreviewButton.textContent = '';\r\n\t\t\t\t\t\t\tfilePreviewButton.className = 'loading_rotate';\r\n\t\t\t\t\t\t\tresolve(filePreview);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tstartPromise.then((filePreview) => {\r\n\t\t\t\t\tdocument.body.closest\r\n\t\t\t\t\tlet getSignData = `${roomHandler.roomId}:${workspaceHandler.workspaceId}:${targetTools.dataset.new_file_name}:${targetTools.closest('[data-account_name]')?.dataset.account_name}`\r\n\t\t\t\t\ts3EncryptionUtil.callS3PresignedUrl(window.myAPI.s3.generateSecurityGetObjectPresignedUrl, getSignData, {uploadType : targetTools.dataset.upload_type, fileType})\r\n\t\t\t\t\t.then( (result) => {\r\n\t\t\t\t\t\tif(! result){\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet {data, encDncKeyPair} = result;\r\n\t\t\t\t\t\tlet totalLen = 0;\r\n\t\t\t\t\t\tlet size = parseInt(targetTools.dataset.size);\r\n\t\t\t\t\t\tlet progress = Object.assign(document.createElement('progress'), {\r\n\t\t\t\t\t\t\tmax: 100,\r\n\t\t\t\t\t\t\tvalue : 0\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif(filePreview){\r\n\t\t\t\t\t\t\tlet container = filePreview.querySelector('.file_preview_container');\r\n\t\t\t\t\t\t\tcontainer.append(progress)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn Promise.all([\r\n\t\t\t\t\t\t\ts3EncryptionUtil.convertBase64ToBuffer(data.encryptionKey).then( async (buffer) => {\r\n\t\t\t\t\t\t\t\treturn s3EncryptionUtil.decryptMessage(encDncKeyPair.privateKey, buffer, s3EncryptionUtil.secretAlgorithm)\r\n\t\t\t\t\t\t\t\t\t.then(buf=>String.fromCharCode(...new Uint8Array(buf)))\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\ts3EncryptionUtil.convertBase64ToBuffer(data.encryptionMd).then( async (buffer) => {\r\n\t\t\t\t\t\t\t\treturn s3EncryptionUtil.decryptMessage(encDncKeyPair.privateKey, buffer, s3EncryptionUtil.secretAlgorithm)\r\n\t\t\t\t\t\t\t\t\t.then(buf=>String.fromCharCode(...new Uint8Array(buf)))\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t]).then( async ([k,m]) => {\r\n\t\t\t\t\t\t\treturn fetch(data.presignedUrl, {\r\n\t\t\t\t\t\t\t\tmethod:\"GET\",\r\n\t\t\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t\t\t'Content-Encoding' : 'base64',\r\n\t\t\t\t\t\t\t\t\t'Content-Type' : 'application/octet-stream',\r\n\t\t\t\t\t\t\t\t\t'x-amz-server-side-encryption-customer-algorithm': 'AES256',\r\n\t\t\t\t\t\t\t\t\t'x-amz-server-side-encryption-customer-key': k,\r\n\t\t\t\t\t\t\t\t\t'x-amz-server-side-encryption-customer-key-md5': m,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}).then(async response=> {\r\n\t\t\t\t\t\t\t\tif(response.status != 200 && response.status != 201){\r\n\t\t\t\t\t\t\t\t\tthrow new Error('s3 connect failed')\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn response.body;\r\n\t\t\t\t\t\t\t}).then((body) => {\r\n\t\t\t\t\t\t\t\tconst reader = body.getReader();\r\n\t\t\t\t\t\t\t\treturn new ReadableStream(\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tstart(controller) {\r\n\t\t\t\t\t\t\t\t\t\t\treturn pump();\r\n\t\t\t\t\t\t\t\t\t\t\tfunction pump() {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn reader.read().then(({ done, value }) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotalLen += value?.length || 0;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tprogress.value = (totalLen / size) * 100 \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// When no more data needs to be consumed, close the stream\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (done) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontroller.close();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// Enqueue the next data chunk into our target stream\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontroller.enqueue(value);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn pump();\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\tlet newBlob = new Blob([buffer], { type: imageEditor.dataset.content_type });\r\n\t\t\t\t\t\t\t\tlet imgUrl = window.URL.createObjectURL(newBlob);\r\n\t\t\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.then(stream => new Response(stream))\r\n\t\t\t\t\t\t\t.then(res => res.blob())\r\n\t\t\t\t\t\t\t.then(async blob => {\r\n\t\t\t\t\t\t\t\tlet newBlob = new Blob([blob], { type: targetTools.dataset.content_type });\r\n\t\t\t\t\t\t\t\treturn dbOpenPromise.then( async () => {\r\n\t\t\t\t\t\t\t\t\treturn indexedDBHandler.addItem({\r\n\t\t\t\t\t\t\t\t\t\tfileName: targetTools.dataset.new_file_name,\r\n\t\t\t\t\t\t\t\t\t\toriginFileName: targetTools.dataset.name,\r\n\t\t\t\t\t\t\t\t\t\tfileData: newBlob,\r\n\t\t\t\t\t\t\t\t\t\tlastModified: new Date().getTime(),\r\n\t\t\t\t\t\t\t\t\t\tuploadType: targetTools.dataset.upload_type,\r\n\t\t\t\t\t\t\t\t\t\troomId: roomHandler.roomId,\r\n\t\t\t\t\t\t\t\t\t\tworkspaceId: workspaceHandler.workspaceId\r\n\t\t\t\t\t\t\t\t\t}).then(()=>{\r\n\t\t\t\t\t\t\t\t\t\treturn window.URL.createObjectURL(newBlob)\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.then(url => {\r\n\t\t\t\t\t\t\t\t//targetTools.dataset.url = url;\r\n\t\t\t\t\t\t\t\tif(targetTools.image){\r\n\t\t\t\t\t\t\t\t\ttargetTools.image.src = url;\r\n\t\t\t\t\t\t\t\t}else if(targetTools.video){\r\n\t\t\t\t\t\t\t\t\ttargetTools.video.src = url;\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t//targetTools.resources.data = url;\r\n\t\t\t\t\t\t\t\t\ttargetTools.resourcesUrl = url;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif(filePreview){\r\n\t\t\t\t\t\t\t\t\tfilePreview.replaceChildren();\r\n\t\t\t\t\t\t\t\t\tfilePreview.parentElement.removeChild(filePreview);\r\n\t\t\t\t\t\t\t\t\tfilePreview.remove();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch(err=>{\r\n\t\t\t\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\t\t\t\tconsole.error(err.message)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tImage.customImageCallback = (imageEditor) => imageOrVideoCallback(imageEditor)\r\n\t\t\tVideo.customVideoCallback = (videoEditor) => imageOrVideoCallback(videoEditor)\r\n\t\t\tResources.customResourcesCallback = (resourcesEditor) => imageOrVideoCallback(resourcesEditor)\r\n\t\t});\t\r\n\r\n\r\n\t\tconst visibleObserver = new IntersectionObserver((entries, observer) => {\r\n\t\t\tentries.forEach(entry =>{\r\n\t\t\t\tlet {isIntersecting, target} = entry;\r\n\t\t\t\tif(target.hasAttribute('slot') || target.hasAttribute('data-visibility_not')){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (isIntersecting){\r\n\t\t\t\t\ttarget.style.visibility = '';\r\n\t\t\t\t\ttarget.style.opacity = '';\r\n\t\t\t\t\ttarget.dataset.visibility = 'v';\r\n\t\t\t\t}else{\r\n\t\t\t\t\ttarget.style.visibility = 'hidden';\r\n\t\t\t\t\ttarget.style.opacity = 0;\r\n\t\t\t\t\ttarget.dataset.visibility = 'h';\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}, {\r\n\t\t\tthreshold: 0.01,\r\n\t\t\troot: document\r\n\t\t});\r\n\t\tnew MutationObserver( (mutationList, observer) => {\r\n\t\t\tmutationList.forEach((mutation) => {\r\n\t\t\t\tlet {addedNodes, removedNodes} = mutation;\r\n\t\t\t\tnew Promise(resolve=> {\r\n\t\t\t\t\taddedNodes.forEach(async e => {\r\n\t\t\t\t\t\tif(e.nodeType !== Node.ELEMENT_NODE || (e.nodeType === Node.ELEMENT_NODE && e.hasAttribute('data-is_not_visible_target')) || e.isContentEditable){\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnew Promise(res=>{\r\n\t\t\t\t\t\t\tvisibleObserver.observe(e);\r\n\t\t\t\t\t\t\tres();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t})\r\n\t\t\t\tnew Promise(resolve=> {\r\n\t\t\t\t\tremovedNodes.forEach(async e => {\r\n\t\t\t\t\t\tif(e.nodeType !== Node.ELEMENT_NODE || (e.nodeType === Node.ELEMENT_NODE && e.hasAttribute('data-is_not_visible_target')) || e.isContentEditable){\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnew Promise(res=>{\r\n\t\t\t\t\t\t\tvisibleObserver.unobserve(e);\r\n\t\t\t\t\t\t\tres();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}).observe(document, {\r\n\t\t\tchildList: true,\r\n\t\t\tsubtree: true\r\n\t\t})\r\n\r\n\r\n\t}\r\n}","export default class LayerPopupTemplate{\r\n\r\n\t#dim = Object.assign(document.createElement('div'),{\r\n\t\tclassName: 'layer_dim'\r\n\t})\r\n\t#containerBox;\r\n\t#container = (() => {\r\n\t\tlet container = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'layer_container'\r\n\t\t});\r\n\t\tlet containerBox = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'layer_container_box'\r\n\t\t});\r\n\t\tthis.#containerBox = containerBox;\r\n\t\tthis.#dim.append(containerBox);\r\n\t\tcontainerBox.append(container);\r\n\t\treturn container;\r\n\t})();\r\n\t#onOpenCloseCallback = () => {}\r\n\t#dimIsClick = false;\r\n\tconstructor(){\r\n\t\tnew MutationObserver( (mutationList)=> {\r\n\t\t\tmutationList.forEach( (mutation) => {\r\n\t\t\t\tif( ! mutation.target.hasAttribute('open')){\r\n\t\t\t\t\tthis.#dim.remove();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdocument.body.append(this.#dim);\r\n\t\t\t\t\tlet openWait = setInterval(() => {\r\n\t\t\t\t\t\tif(this.#dim.isConnected){\r\n\t\t\t\t\t\t\tthis.#dim.style.opacity = 1;\r\n\t\t\t\t\t\t\tthis.#containerBox.style.opacity = 1;\r\n\t\t\t\t\t\t\tclearInterval(openWait);\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 50);\r\n\t\t\t\t\tif(this.onOpenCloseCallback instanceof Function){\r\n\t\t\t\t\t\tthis.onOpenCloseCallback('open');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}).observe(this.#dim, {\r\n\t\t\tattributeFilter:['open'],\r\n\t\t\tattributeOldValue:true\r\n\t\t});\r\n\t\t\r\n\t\twindow.addEventListener('keyup', (event) => {\r\n\t\t\tif( ! this.#containerBox.isConnected || event.key != 'Escape'){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.close();\r\n\t\t})\r\n\t\t/*\r\n\t\tthis.#containerBox.onkeyup = (event) => {\r\n\t\t\tif(event.key == 'Escape'){\r\n\t\t\t\tthis.close();\r\n\t\t\t}\r\n\t\t}\r\n\t\t*/\r\n\t\tthis.#dim.onclick = (event) => {\r\n\t\t\tif(this.#dimIsClick || event.composedPath().some(e=>e==this.#containerBox)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.#dimIsClick = true;\r\n\t\t\tthis.close();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tset onOpenCloseCallback(onOpenCloseCallback){\r\n\t\tthis.#onOpenCloseCallback = onOpenCloseCallback;\r\n\t}\r\n\tget onOpenCloseCallback(){\r\n\t\treturn this.#onOpenCloseCallback;\r\n\t}\r\n\r\n\tget dim(){\r\n\t\treturn this.#dim;\r\n\t}\r\n\r\n\tget container(){\r\n\t\treturn this.#container;\r\n\t}\r\n\r\n\t/**\r\n\t * 이 레이어를 닫는 함수\r\n\t * @param {Function} callback : 이 레이어를 닫은 후 실행 할 콜백 함수 \r\n\t */\r\n\tclose(callback){\r\n\t\tthis.#containerBox.style.opacity = '';\r\n\t\tthis.#dim.style.opacity = '';\r\n\t\t//this.#containerBox.ontransitionend = '';\r\n\t\tthis.#dim.ontransitionend = '';\r\n\t\tnew Promise(res=>{\r\n\t\t\tif(callback instanceof Function){\r\n\t\t\t\tcallback();\r\n\t\t\t}\r\n\t\t\tres();\r\n\t\t});\r\n\t\tnew Promise(res=>{\r\n\t\t\tif(this.onOpenCloseCallback instanceof Function){\r\n\t\t\t\tthis.onOpenCloseCallback('close');\r\n\t\t\t}\r\n\t\t\tres();\r\n\t\t})\r\n\t\t/*\r\n\t\tthis.#containerBox.ontransitionend = () => {\r\n\t\t\tthis.#dim.removeAttribute('open');\r\n\t\t\tthis.#dim.ontransitionend = () => {\r\n\t\t\t\tthis.#containerBox.ontransitionend = '';\r\n\t\t\t\tthis.#dim.ontransitionend = '';\r\n\t\t\t}\r\n\t\t}\r\n\t\t*/\r\n\t\tthis.#dim.ontransitionend = () => {\r\n\t\t\tthis.#dim.removeAttribute('open');\r\n\t\t\tthis.#containerBox.ontransitionend = '';\r\n\t\t\tthis.#dim.ontransitionend = '';\r\n\t\t\tthis.#dimIsClick = false;\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * 이 레이어를 여는 함수\r\n\t * @param {Function} callback : 이 레이어를 연 후 실행 할 콜백 함수\r\n\t */\r\n\topen(callback){\r\n\t\tthis.#dim.setAttribute('open', '')\r\n\t\tnew Promise(res=>{\r\n\t\t\tif(callback instanceof Function){\r\n\t\t\t\tcallback();\r\n\t\t\t}\r\n\t\t\tres();\r\n\t\t});\r\n\t}\r\n\t\r\n\r\n}","import {workspaceHandler} from \"@handler/workspace/WorkspaceHandler\";\r\nimport LayerPopupTemplate from \"@component/layer/LayerPopupTemplate\";\r\nimport {roomHandler} from \"@handler/room/RoomHandler\";\r\n\r\nimport { accountHandler } from \"@handler/account/AccountHandler\";\r\n\r\nexport default class GiveAdminView extends LayerPopupTemplate{\r\n\r\n\t#layerContent = Object.assign(document.createElement('div'),{\r\n\t\tinnerHTML: `\r\n\t\t\t<style>\r\n\t\t\t\tform#give_admin_view{\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\tgap: 2vh;\r\n\t\t\t\t\tposition: relative;\r\n\t\t\t\t}\r\n\t\t\t\t#give_admin_view_account_list{\r\n\t\t\t\t\twidth: 80%;\r\n\t\t\t\t\theight: 50vh;\r\n\t\t\t\t\toverflow-y: auto;\r\n\t\t\t\t\tmax-height: 1%;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t#give_admin_view_account_list::-webkit-scrollbar{\r\n\t\t\t\t\tdisplay: none;\r\n\t\t\t\t}\r\n\t\t\t\t#give_admin_view_account_list:hover::-webkit-scrollbar{\r\n\t\t\t\t\tdisplay: initial;\r\n\t\t\t\t\twidth: 8px;\r\n\t\t\t\t}\r\n\t\t\t\t#give_admin_view_account_list::-webkit-scrollbar-track{\r\n\t\t\t\t\tbackground: #00000000;\r\n\t\t\t\t}\r\n\t\t\t\t#give_admin_view_account_list::-webkit-scrollbar-thumb {\r\n\t\t\t\t\tbackground: #d8a1b6;\r\n\t\t\t\t\tborder-radius: 100px;\r\n\t\t\t\t\tbox-shadow: inset 0 0 5px #000000;\r\n\t\t\t\t}\r\n\t\t\t\t#give_admin_view_account_list::-webkit-scrollbar-thumb:hover {\r\n\t\t\t\t\t/*background: #44070757;*/\r\n\t\t\t\t\tbackground: #893e3e\r\n\t\t\t\t}\r\n\r\n\t\t\t\t#give_admin_view_account_list > li{\r\n\t\t\t\t\tborder-top: outset 1px;\r\n\t\t\t\t\tposition: relative;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t}\r\n\t\t\t\t#give_admin_view_account_list > li > input.add_account_check{\r\n\t\t\t\t}\r\n\t\t\t\t#give_admin_view_account_list > li .create_room_view_department, \r\n\t\t\t\t#give_admin_view_account_list > li .create_room_view_job_grade,\r\n\t\t\t\t#give_admin_view_account_list > li .create_room_view_account_name{\r\n\t\t\t\t\tcolor: #b1b1b1;\r\n\t\t\t\t}\r\n\t\t\t\t#give_admin_view_account_list > li .create_room_view_department,\r\n\t\t\t\t#give_admin_view_account_list > li .create_room_view_account_name{\r\n\t\t\t\t\tfont-weight: lighter;\r\n\t\t\t\t}\r\n\t\t\t\t#give_admin_view_account_list > li .create_room_view_separator{\r\n\t\t\t\t\tcolor: #6937a16b;\r\n\t\t\t\t}\r\n\t\t\t\t/*#give_admin_view_account_list > li .create_room_view_job_grade,*/\r\n\t\t\t\t#give_admin_view_account_list > li .create_room_view_full_name,\r\n\t\t\t\t#give_admin_view_account_list > li .create_room_view_separator{\r\n\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t}\r\n\t\t\t\t#give_admin_view_account_list > li .create_room_view_full_name{\r\n\t\t\t\t\tcolor: #789bb9b8;\r\n\t\t\t\t}\r\n\t\t\t\t#give_admin_view_account_list > li .create_room_view_account_info{\r\n\t\t\t\t\twidth: 100%\r\n\t\t\t\t}\r\n\t\t\t</style>\r\n\t\t\t<form id=\"give_admin_view\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<label for=\"give_admin_view_search_user\">Please enter the users you want to invite.</label>\r\n\t\t\t\t\t<input type=\"search\" id=\"give_admin_view_search_user\" name=\"fullName\"/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<ul id=\"give_admin_view_account_list\">\r\n\t\t\t\t</ul>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<button type=\"button\" id=\"give_admin_view_button\">Give Admin</button>\r\n\t\t\t\t</div>\r\n\t\t\t</from>\r\n\t\t`\r\n\t})\r\n\r\n\t/**\r\n\t * full 네임으로 검색 ex) ${fullName}(${accountName}) 형식\r\n\t */\r\n\t#accountInviteRoomViewAccountList = this.#layerContent.querySelector('#give_admin_view_account_list');\r\n\tpage = 0;\r\n\tsize = 10;\r\n\t#liList = [];\r\n\tform = this.#layerContent.querySelector('#give_admin_view');\r\n\r\n\t#lastItemVisibleObserver = new IntersectionObserver((entries, observer) => {\r\n\t\tentries.forEach(entry =>{\r\n\t\t\tif (entry.isIntersecting){\r\n\t\t\t\tthis.page += 1;\r\n\t\t\t\tthis.callData(this.page, this.size, workspaceHandler.workspaceId, this.form.fullName.value).then(data=>{\r\n\t\t\t\t\tthis.createPage(data).then(liList=>this.addListItemVisibleEvent(liList))\r\n\t\t\t\t\t.then((liList)=>{\r\n\t\t\t\t\t\tif(this.page >= data.totalPages || liList.length == 0){\r\n\t\t\t\t\t\t\tthis.#lastItemVisibleObserver.disconnect();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}, {\r\n\t\tthreshold: 0.1,\r\n\t\troot: document//this.#elementMap.roomContentList\r\n\t});\r\n\r\n\t#inviteAccountMapper = {};\r\n\r\n\tconstructor(owner){\r\n\t\tsuper(owner);\r\n\t\tsuper.container.append(this.#layerContent)\r\n\t\tworkspaceHandler.addWorkspaceIdChangedListener = {\r\n\t\t\tname: 'giveAdminView',\r\n\t\t\tcallback: (handler) => {\r\n\t\t\t\tthis.workspaceId = handler.workspaceId;\r\n\t\t\t},\r\n\t\t\trunTheFirst: true\r\n\t\t}\r\n\t\tthis.form.onsubmit = (event) => {\r\n\t\t\t//console.log(event);\r\n\t\t\tevent.preventDefault();\r\n\t\t\t/*let fullName = this.form.create_room_search_user.value;\r\n\t\t\tthis.reset();\r\n\t\t\tthis.callData(this.page, this.size, this.#workspaceId, fullName).then(data => {\r\n\t\t\t\tthis.createPage(data).then(liList=>this.addListItemVisibleEvent(liList));\r\n\t\t\t});*/\r\n\t\t};\r\n\t\tthis.form.give_admin_view_search_user.onkeydown = (event) => {\r\n\t\t\tif(event.key != 'Enter'){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet fullName = this.form.give_admin_view_search_user.value;\r\n\t\t\tthis.reset();\r\n\t\t\tthis.callData(this.page, this.size, workspaceHandler.workspaceId, fullName).then(data => {\r\n\t\t\t\tthis.createPage(data).then(liList=>this.addListItemVisibleEvent(liList));\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.form.give_admin_view_search_user.oninput = (event) => {\r\n\t\t\tif(this.form.give_admin_view_search_user.value == ''){\r\n\t\t\t\tthis.reset();\r\n\t\t\t\tthis.callData(this.page, this.size, workspaceHandler.workspaceId).then(data => {\r\n\t\t\t\t\tthis.createPage(data).then(liList=>this.addListItemVisibleEvent(liList));\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.form.give_admin_view_button.onclick = (event) => {\r\n\t\t\t\r\n\t\t\tObject.values(this.#inviteAccountMapper).forEach(e=>{\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t\twindow.myAPI.workspace.createGiveAdmin({\r\n\t\t\t\t\tid:e.id,\r\n\t\t\t\t\tworkspaceId: e.workspace_id\r\n\t\t\t\t}).then((result)=>{\r\n\t\t\t\t\tconsole.log(result)\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\tthis.#inviteAccountMapper = {};\r\n\t\t\tsuper.close();\r\n\t\t}\r\n\t}\r\n\t\r\n\tcallData(page, size, workspaceId, fullName){\r\n\t\tconsole.log({page, size, workspaceId, fullName})\r\n\t\treturn window.myAPI.workspace.searchWorkspaceInAccount({\r\n\t\t\tpage, size, workspaceId, fullName\r\n\t\t}).then((data = {}) =>{\r\n\t\t\tconsole.log(data);\r\n\t\t\treturn data.data;\r\n\t\t});\r\n\t}\r\n\r\n\tcreatePage(data, roomName = ''){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tlet {content = []} = data || {};\r\n\t\t\tif(content.length == 0){\r\n\t\t\t\tresolve(content);\r\n\t\t\t}\r\n\r\n\t\t\tlet liList = content.filter(e=> ! e.isAdmin).map(item => {\r\n\t\t\t\tlet {\r\n\t\t\t\t\tid,\r\n\t\t\t\t\taccountName,\r\n\t\t\t\t\tfullName,\r\n\t\t\t\t\tworkspaceId,\r\n\t\t\t\t\tjobGrade,\r\n\t\t\t\t\tdepartment\r\n\t\t\t\t} = item;\r\n\t\t\t\t\r\n\t\t\t\tlet departmentHtml = department ? `<small class=\"create_room_view_department\">${department}</small>` : '';\r\n\t\t\t\tlet separatorHtml = department && jobGrade ? `<span class=\"create_room_view_separator\">/&nbsp</span>` : '';\r\n\t\t\t\tlet jobGradeHtml = jobGrade ? `${separatorHtml}<small class=\"create_room_view_job_grade\">${jobGrade}</small>` : '';\r\n\r\n\t\t\t\tlet li = Object.assign(document.createElement('li'), {\r\n\t\t\t\t\tclassName: 'pointer',\r\n\t\t\t\t\tinnerHTML: `\r\n\t\t\t\t\t\t<div class=\"create_room_view_account_info\">\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<span class=\"create_room_view_full_name\">${fullName}</span>\r\n\t\t\t\t\t\t\t\t<span class=\"create_room_view_account_name\">(${accountName})</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t${departmentHtml}\r\n\t\t\t\t\t\t\t\t${jobGradeHtml}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<input type=\"checkbox\" name=\"add_account_check\" class=\"add_account_check pointer\" ${this.#inviteAccountMapper.hasOwnProperty(accountName) ? 'checked' : ''}/>\r\n\t\t\t\t\t`\r\n\t\t\t\t});\r\n\t\t\t\tObject.assign(li.dataset,{\r\n\t\t\t\t\tid,\r\n\t\t\t\t\taccount_name: accountName,\r\n\t\t\t\t\tfull_name: fullName,\r\n\t\t\t\t\tworkspace_id: workspaceId,\r\n\t\t\t\t\tjob_grade: jobGrade,\r\n\t\t\t\t\tdepartment\r\n\t\t\t\t});\r\n\t\t\t\tthis.#addItemEvent(li);\r\n\t\t\t\treturn li;\r\n\t\t\t})\r\n\r\n\t\t\tthis.#liList.push(...liList);\r\n\t\t\tthis.#accountInviteRoomViewAccountList.replaceChildren(...this.#liList);\r\n\t\t\tresolve(liList);\r\n\t\t});\r\n\t}\r\n\r\n\taddListItemVisibleEvent(liList){\r\n\t\treturn new  Promise(resolve => {\r\n\t\t\tif(liList.length == 0){\r\n\t\t\t\tresolve(liList);\r\n\t\t\t}\r\n\t\t\tthis.#lastItemVisibleObserver.disconnect();\r\n\t\t\tthis.#lastItemVisibleObserver.observe(liList.at(-1));\r\n\t\t\tresolve(liList);\r\n\t\t})\r\n\t}\r\n\t#addItemEvent(li){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tlet checkbox = li.querySelector('[name=\"add_account_check\"]');\r\n\t\t\tli.onclick = (event) => {\r\n\t\t\t\tif(event.target === checkbox){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tcheckbox.click();\r\n\t\t\t}\r\n\t\t\tcheckbox.onchange = (event) => {\r\n\t\t\t\tif(checkbox.checked){\r\n\t\t\t\t\tthis.#inviteAccountMapper[li.dataset.account_name] = Object.assign({}, li.dataset)\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdelete this.#inviteAccountMapper[li.dataset.account_name]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tresolve(li);\r\n\t\t});\r\n\t}\r\n\treset(){\r\n\t\tthis.page = 0;\r\n\t\tthis.#liList = [];\r\n\t\tthis.#lastItemVisibleObserver.disconnect();\r\n\t\tthis.#accountInviteRoomViewAccountList.replaceChildren();\r\n\t}\r\n\r\n}","import common from \"@root/js/common\";\r\nimport IndexedDBHandler from \"@handler/IndexedDBHandler\";\r\n\r\nimport { accountHandler } from \"@handler/account/AccountHandler\";\r\nimport {workspaceHandler} from \"@handler/workspace/WorkspaceHandler\";\r\n\r\nimport GiveAdminView from \"@component/layer/GiveAdminView\"\r\n\r\n/**\r\n * @author kimjoohyoung\r\n * @description 간단한 옵션 내용 정의\r\n */\r\nexport const simpleOption = new class SimpleOption{\r\n    \r\n    #wrap = Object.assign(document.createElement('div'), {\r\n        className: 'simple_option'\r\n    })\r\n    #container = Object.assign(document.createElement('ul'), {\r\n        className: 'simple_option_container'\r\n    })\r\n\r\n    #componentOption;\r\n\r\n    #dbOpenPromise\r\n\r\n    #indexedDBHandler\r\n\r\n    #attendRequestObject = this.#createPermitRequest();\r\n\r\n    #giveAdminObject = this.#createGiveAdmin();\r\n\r\n    #isAdmin;\r\n\r\n    #giveAdminView = new GiveAdminView(this);\r\n\r\n    constructor(){\r\n        \r\n        /*this.#accountInfoPromise.then((accountInfo)=>{\r\n            console.log(accountInfo); // undefined\r\n        })*/\r\n\r\n        window.myAPI.getOption('componentOption').then((option) => {\r\n            this.componentOption = option?.OPTION_VALUE || 'responsive';\r\n        });\r\n        window.myAPI.event.electronEventTrigger.addElectronEventListener('optionChange', ({name, value}) => {\r\n            if(name == 'componentOption'){\r\n                this.componentOption = value;\r\n            }\r\n        })\r\n        /* 멀티 윈도우에서 동시에 동일한 데이터베이스를 바라볼 수 없어서 주석 처리 20231214\r\n        this.#indexedDBHandler = new IndexedDBHandler({\r\n            dbName: 'simpleOptionDB',\r\n            storeName: 'simpleOption',\r\n            columnInfo: {\r\n                optionName: ['optionName', 'optionName', {unique: true}],\r\n                value: ['value', 'value'],\r\n                lastModified: ['lastModified','lastModified'],\r\n            },\r\n            keyPathNameList: ['optionName'],\r\n            pkAutoIncrement: false\r\n        })\r\n\r\n        this.#dbOpenPromise = this.#indexedDBHandler.open();\r\n\r\n        this.#dbOpenPromise.then(() => {\r\n            this.#indexedDBHandler.getItem('componentOption').then(dbRequest=>{\r\n                if( ! dbRequest.result){\r\n                    this.#componentOption = 'responsive'\r\n                    return;\r\n                }\r\n                this.#componentOption = dbRequest.result.value;\r\n                if(this.#componentOption == 'nomal'){\r\n                    document.body.parentElement.style.fontSize = '100%';\r\n                }else{\r\n                    document.body.parentElement.style.fontSize = '';\r\n                }\r\n            })\r\n        })\r\n        */\r\n\r\n        let simpleMemory = {};\r\n        let {li, attendRequest, attendRequestFilter, attendRequestSearch} = this.#attendRequestObject\r\n        \r\n        attendRequestSearch.oninput = (event) => {\r\n            if(event.constructor.name == Event.name){\r\n                li.dataset.is_not_leave = '';\r\n            }\r\n            let itemList = Object.values(simpleMemory[workspaceHandler.workspaceId]).filter(e=> \r\n                (e.__filterOption.value.includes(attendRequestSearch.value) || e.__filterOption.textContent.includes(attendRequestSearch.value))\r\n            )\r\n            attendRequest.style.minHeight = attendRequest.getBoundingClientRect().height + 'px';;\r\n            attendRequest.replaceChildren(\r\n                ...itemList\r\n            )\r\n            attendRequestFilter.replaceChildren(\r\n                ...itemList.map(e=>e.__filterOption)\r\n            )\r\n            attendRequest.style.minHeight = '';\r\n        }\r\n        \r\n        window.myAPI.event.electronEventTrigger.addElectronEventListener('workspacePermitRequestAccept', (event)=>{\r\n            \r\n            if( ! this.#isAdmin) return;\r\n\r\n            let {content = event} = event;\r\n\r\n            let item = Object.assign(document.createElement('li'),{\r\n                className: 'attend_request_item',\r\n                innerHTML:`\r\n                    <div class=\"attend_request_item_container\">\r\n                        <div class=\"attend_request_item_email\">\r\n                            <span>${content.email}</span>\r\n                        </div>\r\n                        <div class=\"attend_request_item_name\">\r\n                            <span>${content.fullName}</span>\r\n                        </div>\r\n                        <div class=\"attend_request_item_position\">\r\n                            <span>${content.jobGrade}</span>\r\n                            <span>${content.department}</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"attend_request_item_button_wrapper\">\r\n                        <button class=\"attend_request_item_permit\" value=\"PERMIT\">permit</button>\r\n                        <button class=\"attend_request_tiem_reject\" value=\"REJECT\">reject</button>\r\n                    </div>\r\n                `\r\n            })\r\n            item.__filterOption = Object.assign(document.createElement('option'), {\r\n                value : content.fullName,\r\n                textContent: content.email\r\n            });\r\n            //item.__filterOption.__targetLi = item;\r\n\r\n            let [permit, reject] = item.querySelectorAll('.attend_request_item_permit, .attend_request_tiem_reject');\r\n            [permit, reject].forEach(e=>{\r\n                e.onclick = () => {\r\n                    if( ! this.#isAdmin) return;\r\n                    window.myAPI.workspace.createPermitWokrspaceInAccount({\r\n                        id:content.id,\r\n                        workspaceId:content.workspaceId,\r\n                        permitType:e.value,\r\n                        accountName: content.accountName\r\n                    })\r\n                }\r\n            })\r\n            if( ! simpleMemory[content.workspaceId]){\r\n                simpleMemory[content.workspaceId] = {};\r\n            }\r\n\r\n            simpleMemory[content.workspaceId][content.accountName] = item\r\n\r\n            if(workspaceHandler.workspaceId == content.workspaceId){\r\n                //console.log(Object.values(simpleMemory[content.workspaceId]))\r\n                let itemList = Object.values(simpleMemory[content.workspaceId]);\r\n                attendRequest.replaceChildren(\r\n                    ...itemList\r\n                )\r\n                attendRequestFilter.replaceChildren(\r\n                    ...itemList.map(e=>e.__filterOption)\r\n                )\r\n            }\r\n\r\n        })\r\n        window.myAPI.event.electronEventTrigger.addElectronEventListener('workspacePermitResultAccept', (event)=>{\r\n            if( ! this.#isAdmin) return;\r\n            let {content = event} = event;\r\n\r\n            if(workspaceHandler.workspaceId == content.workspaceId){\r\n\r\n                delete simpleMemory[content.workspaceId][content.accountName];\r\n                \r\n                let itemList = Object.values(simpleMemory[content.workspaceId])\r\n                attendRequest.replaceChildren(\r\n                    ...itemList\r\n                );\r\n                attendRequest.replaceChildren(\r\n                    ...itemList.map(e=>e.__filterOption)\r\n                )\r\n            }\r\n        })\r\n        //console.log(workspaceHandler.workspaceId);\r\n        workspaceHandler.addWorkspaceIdChangedListener = {\r\n            name: 'simpleOptuon',\r\n            callback: () => {\r\n                window.myAPI.workspace.getIsAdmin({workspaceId : workspaceHandler.workspaceId}).then(result => {\r\n                    if(result.code == 0){\r\n                        this.#isAdmin = result.data;\r\n                    }else{\r\n                        //alert('admin authentication failed, ::: ' + result.message);\r\n                    }\r\n                    if(this.#isAdmin){\r\n                        window.myAPI.workspace.searchPermitRequestList({workspaceId: workspaceHandler.workspaceId}).then(result=>{\r\n                            console.log('result >>> ', result);\r\n                        });\r\n                    }\r\n                    if(this.#wrap.isConnected) this.open();\r\n                });\r\n                \r\n            },\r\n            runTheFirst: false\r\n        }\r\n\r\n        this.#giveAdminView.onOpenCloseCallback = (status) => {\r\n            this.#giveAdminView.reset();\r\n\t\t\tif(status == 'open'){\r\n\t\t\t\tthis.#giveAdminView.callData(this.#giveAdminView.page, this.#giveAdminView.size, workspaceHandler.workspaceId, this.#giveAdminView.form.fullName.value)\r\n\t\t\t\t.then(data => {\r\n\t\t\t\t\tthis.#giveAdminView.createPage(data).then(liList => {\r\n\t\t\t\t\t\tthis.#giveAdminView.addListItemVisibleEvent(liList);\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}\r\n        }\r\n    }\r\n\r\n    #createComponentOption(){\r\n        let li = Object.assign(document.createElement('li'), {\r\n\r\n        });\r\n        \r\n        let title = Object.assign(document.createElement('span'), {\r\n            textContent: 'Component Option'\r\n        })\r\n\r\n        let optionContainer = Object.assign(document.createElement('div'), {\r\n            className: 'component_option_container',\r\n            innerHTML: `\r\n                <div>\r\n                    <label for=\"component_option_responsive\">Responsive</label>\r\n                    <input type=\"radio\" name=\"component_option\" id=\"component_option_responsive\" value=\"responsive\" ${this.#componentOption == \"responsive\" ? 'checked' : ''}/>\r\n                        \r\n                </div>\r\n                <div>\r\n                    <label for=\"component_option_nomal\">Nomal</label>\r\n                    <input type=\"radio\" name=\"component_option\" id=\"component_option_nomal\" value=\"nomal\" ${this.#componentOption == \"nomal\" ? 'checked' : ''}/>\r\n                </div>\r\n            `\r\n        })\r\n\r\n        optionContainer.onchange = (event) => {\r\n            if(event.target.type != 'radio'){\r\n                return;\r\n            }\r\n            this.componentOption = event.target.value;\r\n\r\n            window.myAPI.setOption({name : 'componentOption', value : this.#componentOption});\r\n\r\n            this.open();\r\n\r\n            /* 멀티 윈도우에서 동시에 동일한 데이터베이스를 바라볼 수 없어서 주석 처리 20231214\r\n            this.#indexedDBHandler.addItem({\r\n                optionName: 'componentOption',\r\n                value: event.target.value,\r\n                lastModified: new Date().getTime()\r\n            })\r\n            */\r\n        }\r\n\r\n        li.onmouseenter = () => {\r\n            li.append(optionContainer)\r\n            this.#positionRemain(optionContainer)\r\n        }\r\n        li.onmouseleave = () => {\r\n            optionContainer.remove();\r\n        }\r\n        li.onclick = (event) => {\r\n            if(event.target != li && event.target != title) return;\r\n\r\n            if(optionContainer.isConnected){\r\n                optionContainer.remove();\r\n            }else {\r\n                li.append(optionContainer)\r\n                this.#positionRemain(optionContainer)\r\n            }\r\n        }\r\n\r\n        li.append(title);\r\n\r\n        return li;\r\n    }\r\n    \r\n    #createSimpleProfile(){\r\n        if( ! accountHandler.accountInfo) return '';\r\n        console.log(accountHandler.accountInfo);\r\n\r\n        let li = Object.assign(document.createElement('li'), {\r\n\r\n        });\r\n        let title = Object.assign(document.createElement('span'), {\r\n            textContent: 'Edit Profile'\r\n        });\r\n        li.append(title);\r\n        let simpleProfileContainer = Object.assign(document.createElement('form'), {\r\n            id : 'simple_profile_container',\r\n            innerHTML : `\r\n            <div class=\"simple_profile_input_container\">\r\n                <img class=\"profile_image\" src=\"${accountHandler.accountInfo.profileImage}\"/>\r\n                <input id=\"simple_profile_image\" type=\"file\" accept=\"image/*\">\r\n            </div>\r\n            <div class=\"simple_profile_input_container\">\r\n                <label for=\"simple_profile_full_name\">Full Name</label>\r\n                <input type=\"text\" id=\"simple_profile_full_name\" name=\"fullName\" value=\"${accountHandler.accountInfo?.fullName || ''}\"/>\r\n            </div>\r\n            <div class=\"simple_profile_input_container\">\r\n                <label for=\"simple_profile_job_grade\">Job Grade</label>\r\n                <input type=\"text\" id=\"simple_profile_job_grade\" name=\"jobGrade\" value=\"${accountHandler.accountInfo?.jobGrade || ''}\"/>\r\n            </div>\r\n            <div class=\"simple_profile_input_container\">\r\n                <label for=\"simple_profile_department\">Department</label>\r\n                <input type=\"text\" id=\"simple_profile_department\" name=\"department\" value=\"${accountHandler.accountInfo?.department || ''}\"/>\r\n            </div>\r\n            <br/>\r\n            <div class=\"simple_profile_button_container\">\r\n                <button type=\"submit\" id=\"simple_profile_apply_button\">apply</button>\r\n                <button type=\"button\" id=\"simple_profile_cancel_button\">cancel</button>\r\n            </div>\r\n            `,\r\n        });\r\n        let profileImageInput = simpleProfileContainer.simple_profile_image;\r\n        let profileImage = simpleProfileContainer.querySelector('.profile_image')\r\n        let imgTempUrlList = []; \r\n        profileImageInput.oninput = (event) => {\r\n            console.log(event);\r\n            if(event.constructor.name == Event.name){\r\n                li.dataset.is_not_leave = '';\r\n            }\r\n            profileImage.src = URL.createObjectURL(profileImageInput.files[0], profileImageInput.files[0].type); \r\n            imgTempUrlList.push(profileImage.src);\r\n        }\r\n        \r\n        simpleProfileContainer.onsubmit = async (event)=>{\r\n            event.preventDefault();\r\n\r\n            let fullName = simpleProfileContainer.simple_profile_full_name.value;\r\n            let jobGrade = simpleProfileContainer.simple_profile_job_grade.value;\r\n            let department = simpleProfileContainer.simple_profile_department.value;\r\n            \r\n            if(\r\n                accountHandler.accountInfo.fullName == fullName &&\r\n                accountHandler.accountInfo.jobGrade == jobGrade &&\r\n                accountHandler.accountInfo.department == department &&\r\n                profileImageInput.files.length == 0\r\n            ){\r\n                common.showToastMessage(['변동 사항이 없습니다.']);\r\n                return;\r\n            }\r\n            let profileImageUrl;\r\n            let profileChangeFailed = false;\r\n            if(profileImageInput.files.length == 0){\r\n                profileImageUrl = accountHandler.accountInfo.profileImage;\r\n            }else{\r\n                profileImageUrl = await window.myAPI.s3.generateGetObjectPresignedUrl({\r\n                    fileName : profileImageInput.files[0].name,\r\n                    uploadType : 'PROFILE'\r\n                }).then(async result=>{\r\n                    if(result.code != 0){\r\n                        common.showToastMessage(result.message.split('\\n'));\r\n                        return ;\r\n                    }\r\n                    return await fetch(result.data, {\r\n                        method: 'PUT',\r\n                        headers: {\r\n                            'Content-Encoding' : 'base64',\r\n\t\t\t\t            'Content-Type' : 'application/octet-stream',\r\n                        },\r\n                        body: profileImageInput.files[0]\r\n                    }).then(res=>{\r\n                        if( ! (res.status == 200 || res.status == 201) ) throw new Error(res.status)\r\n                        return result.data.split('?')[0]\r\n                    }).catch(err=>{\r\n                        console.error(err);\r\n                        return;\r\n                    })\r\n                })\r\n                if( ! profileImageUrl) {\r\n                    profileImageUrl = accountHandler.accountInfo.profileImage;\r\n                    profileChangeFailed = true;\r\n                }\r\n                profileImageInput.files = new DataTransfer().files;\r\n            }\r\n            \r\n            window.myAPI.account.updateSimpleAccountInfo({\r\n                fullName, jobGrade, department, profileImage : profileImageUrl\r\n            }).then(result => {\r\n                console.log('result updateSimpleAccountInfo ::: ', result);\r\n                \r\n                if(accountHandler.accountInfo.fullName != fullName){\r\n                    window.myAPI.room.createMySelfRoom({workspaceId : workspaceHandler.workspaceId});\r\n                }\r\n\r\n                accountHandler.searchAccountInfo();\r\n                imgTempUrlList.forEach(async e=> {\r\n                    URL.revokeObjectURL(e);\r\n                })\r\n                if(profileChangeFailed){ \r\n                    common.showToastMessage([result.message, '그러나 프로필 이미지 변경은 실패하였습니다.']);\r\n                }else{\r\n                    common.showToastMessage([result.message]);\r\n                }\r\n                simpleProfileContainer.remove();\r\n            })\r\n\r\n        }\r\n        simpleProfileContainer.simple_profile_cancel_button.onclick = () => {\r\n            simpleProfileContainer.remove();\r\n        }\r\n        li.append(title);\r\n        li.onmouseenter = () => {\r\n            if(document.activeElement == profileImageInput) {\r\n                return;\r\n            }else if(li.hasAttribute('data-is_not_leave')){\r\n                li.removeAttribute('data-is_not_leave')\r\n                return;\r\n            }\r\n            li.append(simpleProfileContainer)\r\n            this.#positionRemain(simpleProfileContainer)\r\n        }\r\n        li.onmouseleave = () => {\r\n            if(document.activeElement == profileImageInput) {\r\n                return;\r\n            }else if(li.hasAttribute('data-is_not_leave')){\r\n                li.removeAttribute('data-is_not_leave')\r\n                return;\r\n            }\r\n            simpleProfileContainer.remove();\r\n        }\r\n        li.onclick = (event) => {\r\n            if(event.target != li && event.target != title) return;\r\n            \r\n            if(simpleProfileContainer.isConnected){\r\n                simpleProfileContainer.remove()\r\n            }else{\r\n                li.append(simpleProfileContainer)\r\n                this.#positionRemain(simpleProfileContainer)\r\n            }\r\n        }\r\n\r\n        return li;\r\n    }\r\n    #createPermitRequest(){\r\n        let li = Object.assign(document.createElement('li'), {\r\n\r\n        });\r\n        let title = Object.assign(document.createElement('span'),{\r\n            textContent: 'Attend Request'\r\n        })\r\n        \r\n        let attendRequestWrapper = Object.assign(document.createElement('div'), {\r\n            className: 'attend_request_wrapper',\r\n            innerHTML : `\r\n                <div class=\"attend_request_search_container\">\r\n                    <input type=\"search\" placeholder=\"search user\" list=\"attend_request_filter\" class=\"attend_request_search\"/>\r\n                    <datalist id=\"attend_request_filter\" class=\"attend_request_filter\">\r\n                    </datalist>\r\n                </div>\r\n            `\r\n        })\r\n        let attendRequestSearch = attendRequestWrapper.querySelector('.attend_request_search');\r\n        \r\n        let attendRequestFilter = attendRequestWrapper.querySelector('.attend_request_filter');\r\n        \r\n        let attendRequest = Object.assign(document.createElement('ul'), {\r\n            className: 'attend_request_container list_scroll list_scroll-y',\r\n        });\r\n\r\n        attendRequestWrapper.append(attendRequest);\r\n\r\n        li.append(title);\r\n        li.onmouseenter = () => {\r\n            if(document.activeElement == attendRequestSearch) {\r\n                return;\r\n            }else if(li.hasAttribute('data-is_not_leave')){\r\n                li.removeAttribute('data-is_not_leave')\r\n                return;\r\n            }\r\n            li.append(attendRequestWrapper)\r\n            this.#positionRemain(attendRequestWrapper)\r\n        }\r\n        li.onmouseleave = (event) => {\r\n            if(document.activeElement == attendRequestSearch) {\r\n                return;\r\n            }else if(li.hasAttribute('data-is_not_leave')){\r\n                li.removeAttribute('data-is_not_leave')\r\n                return;\r\n            }\r\n            attendRequestWrapper.remove();\r\n        }\r\n\r\n        li.onclick = (event) => {\r\n            if(event.target != li && event.target != title) return;\r\n            \r\n            if(attendRequestWrapper.isConnected){\r\n                attendRequestWrapper.remove()\r\n            }else{\r\n                li.append(attendRequestWrapper)\r\n                this.#positionRemain(attendRequestWrapper)\r\n            }\r\n        }\r\n        return {li, title, attendRequest, attendRequestWrapper, attendRequestSearch, attendRequestFilter};\r\n    }\r\n\r\n    #createGiveAdmin(){\r\n        \r\n        let li = Object.assign(document.createElement('li'), {\r\n            className: 'pointer'\r\n        });\r\n        let title = Object.assign(document.createElement('span'),{\r\n            textContent: 'Give Admin'\r\n        })\r\n\r\n        li.append(title);\r\n        li.onclick = () => {\r\n            this.#giveAdminView.open();\r\n        }\r\n\r\n        return {li, title};\r\n    }\r\n\r\n    #createLogout(){\r\n        let li = Object.assign(document.createElement('li'), {\r\n            className: 'pointer'\r\n        })\r\n        let title = Object.assign(document.createElement('span'), {\r\n            textContent : 'Logout'\r\n        });\r\n        li.append(title);\r\n        li.onclick = () => {\r\n            window.myAPI.logout().then( () => {\r\n                window.myAPI.pageChange.changeWokrspacePage();\r\n            });\r\n        }\r\n\r\n        return li\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLElement} target \r\n     */\r\n    #positionRemain(target){\r\n        target.style.display = 'none';\r\n        let appendAwait = setInterval(()=>{\r\n            if( ! target.isConnected) return;\r\n            target.style.display = '';\r\n            clearInterval(appendAwait);\r\n            let originRect = target.getBoundingClientRect() \r\n\r\n            if(originRect.left < 0){\r\n                target.style.left = '100%';\r\n            }\r\n\r\n            if(target.getBoundingClientRect().right > window.outerWidth){\r\n                target.style.left = '0%';\r\n                target.style.right = '0%';\r\n                if(window.getComputedStyle(target).position != 'fixed'){\r\n                    target.style.top = '100%';\r\n                }\r\n                //target.style.top = this.#container.getBoundingClientRect().bottom + 'px';\r\n                \r\n            }\r\n        },50);\r\n    }\r\n    set componentOption(option){\r\n        this.#componentOption = option;\r\n        if(this.#componentOption == 'nomal'){\r\n            document.body.parentElement.style.fontSize = '100%';\r\n        }else{\r\n            document.body.parentElement.style.fontSize = '';\r\n        }\r\n    }\r\n    get componentOption(){return this.#componentOption;}\r\n\r\n    async open(){\r\n        document.body.append(this.#wrap);\r\n        this.#wrap.append(this.#container)\r\n        let contentList = [this.#createComponentOption(), this.#createSimpleProfile()];\r\n        if(workspaceHandler.workspaceId && this.#isAdmin){\r\n            contentList.push(this.#attendRequestObject.li);\r\n            contentList.push(this.#giveAdminObject.li);\r\n        }\r\n        contentList.push(this.#createLogout());\r\n        this.#container.replaceChildren(...contentList)\r\n    }\r\n\r\n    close(){\r\n        this.#wrap.remove();\r\n    }\r\n\r\n    get wrap(){\r\n        return this.#wrap;\r\n    }\r\n    \r\n\r\n}\r\n","/**\r\n * web용\r\n */\r\nimport { ipcRenderer, myAPI } from \"./../../../browser/preload/preload\"\r\nwindow.myAPI = myAPI;\r\n\r\nimport {noticeBoardHandler} from \"@handler/notice_board/NoticeBoardHandler\"\r\nimport {noticeBoardDetail} from \"@component/notice_board/notice_board_item/NoticeBoardDetail\"\r\n\r\nimport CommonInit from \"@root/js/CommonInit\";\r\n\r\nimport HeaderDefault from \"@component/header/HeaderDefault\"\r\n\r\nnew CommonInit('multipleNoticeBoard');\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", (event) => {\r\n\tlet workspaceIdResolve;\r\n\tlet workspaceIdPromise = new Promise(resolve=>{\r\n\t\tworkspaceIdResolve = resolve;\r\n\t})\r\n\twindow.myAPI.getWorkspaceId().then(workspaceId=>{\r\n\t\tif(workspaceId != undefined){\r\n\t\t\tworkspaceIdResolve(workspaceId);\r\n\t\t}\r\n\t\twindow.myAPI.event.electronEventTrigger.addElectronEventListener('workspaceChange', event => {\r\n\t\t\tlet newWorkspaceId = event.workspaceId\r\n\t\t\tif(workspaceId == newWorkspaceId){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(newWorkspaceId != undefined){\r\n\t\t\t\tworkspaceIdResolve(newWorkspaceId)\r\n\t\t\t}\r\n\t\t\t//event.workspaceId\r\n\t\t})\r\n\t})\r\n\tworkspaceIdPromise.then(workspaceId => {\r\n\t\tdocument.querySelector('#main').append(\r\n            noticeBoardDetail.element\r\n\t\t)\r\n        noticeBoardDetail.element.dataset.is_resize = false;\r\n        noticeBoardDetail.element.grow = 1;\r\n\r\n        window.myAPI.event.electronEventTrigger.addElectronEventListener('noticeBoardChange', event => {\r\n            noticeBoardHandler.noticeBoardId = event.noticeBoardId;\r\n        })\r\n\r\n\t\twindow.myAPI.stream.initWorkspaceStream({workspaceId});\r\n\t})\r\n});\r\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","bind","fn","thisArg","apply","arguments","toString","getPrototypeOf","kindOf","cache","create","thing","str","slice","toLowerCase","kindOfTest","type","typeOfTest","isArray","Array","isUndefined","isArrayBuffer","isString","isFunction","isNumber","isObject","isPlainObject","val","iterator","isDate","isFile","isBlob","isFileList","isURLSearchParams","forEach","allOwnKeys","i","l","length","keys","getOwnPropertyNames","len","findKey","_key","_global","globalThis","self","window","global","isContextDefined","context","isTypedArray","TypedArray","Uint8Array","isHTMLForm","isRegExp","reduceDescriptors","reducer","descriptors","getOwnPropertyDescriptors","reducedDescriptors","descriptor","name","ret","defineProperties","ALPHA","DIGIT","ALPHABET","ALPHA_DIGIT","toUpperCase","isAsyncFn","isBuffer","constructor","isFormData","kind","FormData","append","isArrayBufferView","result","ArrayBuffer","isView","buffer","isBoolean","isStream","pipe","merge","caseless","this","assignValue","targetKey","extend","a","b","trim","replace","stripBOM","content","charCodeAt","inherits","superConstructor","props","assign","toFlatObject","sourceObj","destObj","filter","propFilter","merged","endsWith","searchString","position","String","undefined","lastIndex","indexOf","toArray","arr","forEachEntry","next","done","pair","matchAll","regExp","matches","exec","push","hasOwnProp","freezeMethods","writable","set","Error","toObjectSet","arrayOrString","delimiter","define","split","toCamelCase","m","p1","p2","noop","toFiniteNumber","defaultValue","Number","isFinite","generateString","size","alphabet","Math","random","isSpecCompliantForm","toJSONObject","stack","visit","source","target","reducedValue","isThenable","then","catch","AxiosError","message","code","config","request","response","captureStackTrace","utils","toJSON","description","number","fileName","lineNumber","columnNumber","status","from","error","customProps","axiosError","cause","isVisitable","removeBrackets","renderKey","path","dots","concat","map","token","join","predicates","test","formData","options","TypeError","metaTokens","indexes","option","visitor","defaultVisitor","useBlob","Blob","convertValue","toISOString","Buffer","JSON","stringify","some","isFlatArray","el","index","exposedHelpers","build","pop","encode","charMap","encodeURIComponent","match","AxiosURLSearchParams","params","_pairs","encoder","_encode","buildURL","url","serializeFn","serialize","serializedParams","hashmarkIndex","handlers","use","fulfilled","rejected","synchronous","runWhen","eject","id","clear","h","silentJSONParsing","forcedJSONParsing","clarifyTimeoutError","isBrowser","classes","URLSearchParams","protocols","hasBrowserEnv","document","hasStandardBrowserEnv","product","navigator","hasStandardBrowserWebWorkerEnv","WorkerGlobalScope","importScripts","buildPath","isNumericKey","isLast","arrayToObject","entries","parsePropPath","defaults","transitional","adapter","transformRequest","data","headers","contentType","getContentType","hasJSONContentType","isObjectPayload","setContentType","platform","helpers","isNode","toURLEncodedForm","formSerializer","_FormData","env","rawValue","parser","parse","e","stringifySafely","transformResponse","JSONRequested","responseType","strictJSONParsing","ERR_BAD_RESPONSE","timeout","xsrfCookieName","xsrfHeaderName","maxContentLength","maxBodyLength","validateStatus","common","method","ignoreDuplicateOf","$internals","normalizeHeader","header","normalizeValue","matchHeaderValue","isHeaderNameFilter","AxiosHeaders","valueOrRewrite","rewrite","setHeader","_value","_header","_rewrite","lHeader","setHeaders","rawHeaders","parsed","line","substring","parseHeaders","tokens","tokensRE","parseTokens","has","matcher","deleted","deleteHeader","normalize","format","normalized","w","char","formatHeader","targets","asStrings","first","computed","accessor","accessors","defineAccessor","accessorName","methodName","arg1","arg2","arg3","configurable","buildAccessors","mapped","headerValue","transformData","fns","isCancel","__CANCEL__","CanceledError","ERR_CANCELED","write","expires","domain","secure","cookie","Date","toGMTString","read","RegExp","decodeURIComponent","remove","now","buildFullPath","baseURL","requestedURL","relativeURL","combineURLs","msie","userAgent","urlParsingNode","createElement","originURL","resolveURL","href","setAttribute","protocol","host","search","hash","hostname","port","pathname","charAt","location","requestURL","samplesCount","min","bytes","timestamps","firstSampleTS","head","tail","chunkLength","startedAt","bytesCount","passed","round","progressEventReducer","listener","isDownloadStream","bytesNotified","_speedometer","loaded","total","lengthComputable","progressBytes","rate","progress","estimated","event","knownAdapters","http","xhr","XMLHttpRequest","Promise","resolve","reject","requestData","requestHeaders","onCanceled","withXSRFToken","cancelToken","unsubscribe","signal","removeEventListener","Boolean","auth","username","password","unescape","btoa","fullPath","onloadend","responseHeaders","getAllResponseHeaders","ERR_BAD_REQUEST","floor","settle","err","responseText","statusText","open","paramsSerializer","onreadystatechange","readyState","responseURL","setTimeout","onabort","ECONNABORTED","onerror","ERR_NETWORK","ontimeout","timeoutErrorMessage","ETIMEDOUT","isURLSameOrigin","xsrfValue","cookies","setRequestHeader","withCredentials","onDownloadProgress","addEventListener","onUploadProgress","upload","cancel","abort","subscribe","aborted","parseProtocol","send","renderReason","reason","isResolvedHandle","adapters","nameOrAdapter","rejectedReasons","reasons","state","s","throwIfCancellationRequested","throwIfRequested","dispatchRequest","headersToObject","mergeConfig","config1","config2","getMergedValue","mergeDeepProperties","valueFromConfig2","defaultToConfig2","mergeDirectKeys","mergeMap","timeoutMessage","decompress","beforeRedirect","transport","httpAgent","httpsAgent","socketPath","responseEncoding","configValue","VERSION","validators","deprecatedWarnings","validator","version","formatMessage","opt","desc","opts","ERR_DEPRECATED","console","warn","assertOptions","schema","allowUnknown","ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","Axios","instanceConfig","interceptors","configOrUrl","boolean","function","contextHeaders","requestInterceptorChain","synchronousRequestInterceptors","interceptor","unshift","responseInterceptorChain","promise","chain","newConfig","onFulfilled","onRejected","getUri","generateHTTPMethod","isForm","CancelToken","executor","resolvePromise","_listeners","onfulfilled","_resolve","splice","c","HttpStatusCode","Continue","SwitchingProtocols","Processing","EarlyHints","Ok","Created","Accepted","NonAuthoritativeInformation","NoContent","ResetContent","PartialContent","MultiStatus","AlreadyReported","ImUsed","MultipleChoices","MovedPermanently","Found","SeeOther","NotModified","UseProxy","Unused","TemporaryRedirect","PermanentRedirect","BadRequest","Unauthorized","PaymentRequired","Forbidden","NotFound","MethodNotAllowed","NotAcceptable","ProxyAuthenticationRequired","RequestTimeout","Conflict","Gone","LengthRequired","PreconditionFailed","PayloadTooLarge","UriTooLong","UnsupportedMediaType","RangeNotSatisfiable","ExpectationFailed","ImATeapot","MisdirectedRequest","UnprocessableEntity","Locked","FailedDependency","TooEarly","UpgradeRequired","PreconditionRequired","TooManyRequests","RequestHeaderFieldsTooLarge","UnavailableForLegalReasons","InternalServerError","NotImplemented","BadGateway","ServiceUnavailable","GatewayTimeout","HttpVersionNotSupported","VariantAlsoNegotiates","InsufficientStorage","LoopDetected","NotExtended","NetworkAuthenticationRequired","axios","createInstance","defaultConfig","instance","toFormData","Cancel","all","promises","spread","callback","isAxiosError","payload","formToJSON","getAdapter","default","log","__isLocal","top","windowUtil","isLogin","__serverApi","responseIsOk","responseCheck","resetLoginRemeber","accountController","loginProcessing","param","reduce","k","v","post","getAccountInfo","updateSimpleAccountInfo","apiS3Controller","generateSecurityPutObjectPresignedUrl","generateSecurityGetObjectPresignedUrl","generateGetObjectPresignedUrl","chattingController","sendChatting","deleteChatting","searchChattingList","workspaceId","roomId","queryString","emoticonController","createEmotionReaction","deleteEmotion","getIsReaction","eventStreamController","prevWorkspaceId","initWorkspaceStream","EventSource","eventSendObj","close","onmessage","lastEventId","origin","debug","eventName","serverSentStreamType","webEventSend","onopen","success","noticeBoardController","createNoticeBoardGroup","createNoticeBoard","createNoticeBoardDetail","searchNoticeBoardList","searchNoticeBoardDetailList","noticeBoardId","deleteNoticeBoard","deleteNoticeBoardGroup","updateNoticeBoardOrder","updateNoticeBoardDetailOrder","roomController","createRoom","createMySelfRoom","isNaN","parseInt","createRoomInAccount","updateRoomInAccoutOrder","createRoomFavorites","updateRoomFavorites","searchRoomList","searchMyJoinedRoomList","searchRoomFavoritesList","searchRoomJoinedAccountList","getRoomDetail","isRoomFavorites","isRoomOwner","isMyAttendRoom","roomInAccountOut","accountName","delete","workspaceController","searchWorkspaceMyJoined","page","searchNameSpecificList","workspaceName","searchWorkspaceInAccount","getWorkspaceDetail","getWorkspaceInAccountCount","createPermitWokrspaceInAccount","createGiveAdmin","searchPermitRequestList","getIsAdmin","createWorkspaceJoined","createWorkspace","permission","Notification","requestPermission","globalHandler","loadInitRoomId","ipcRenderer","loadInitNoticeBoardId","localStorage","getItem","t","OPTION_NAME","resetWorkspace","setOption","OPTION_VALUE","UPDATE_AT","getTime","CREATE_AT","setItem","values","getOption","flatMap","clazz","Function","invoke","on","electronEventTrigger","objectEventListener","onEvent","trigger","addElectronEventListener","removeElectronEventListener","async","res","myAPI","getProjectPath","createSubWindow","pageName","pageId","closeRequest","maximizeRequest","unmaximizeRequest","minimizeRequest","restoreRequest","isMaximize","resetWorkspaceId","getWorkspaceId","notifications","noti","fullName","body","icon","onclick","html","innerHTML","style","right","bottom","borderRadius","background","width","height","zIndex","whiteSpace","overflowWrap","display","flexDirection","alignItems","justifyContent","fontSize","paddingBottom","optionName","getServerUrl","logout","fetch","ok","alert","pageChange","changeWokrspacePage","changeLoginPage","changeMainPage","stream","account","chatting","workspace","room","searchRoom","noticeBoard","s3","emoticon","noticeBoardHandler","addNoticeBoardIdChangeListener","runTheFirst","startCallbackPromise","removeNoticeBoardIdChangeListener","ToolHandler","identity","selection","getSelection","activeElement","classList","contains","findTarget","find","containsNode","dataset","tool_status","isLastTool","tool","isPrototypeOf","at","extendsElement","defaultClass","isInline","toolButton","nodeType","Node","ELEMENT_NODE","connectedFriends","friend","isConnected","HTMLElement","static","globalClickEventPromiseResolve","globalKeydownEventPromiseResolve","globalSelectionChangeEventPromiseResolve","globalMouseEvent","lastClickElementPath","composedPath","globalClickEventPromise","globalKeydownEventPromise","globalSelectionChangeEventPromise","isMouseInnerElement","element","clientX","clientY","x","y","getBoundingClientRect","globalKeydownEventListener","oldEvent","newEvent","simpleObserver","globalSelectionChangeEventListener","outClickElementListener","isMouseOut","isElement","targetObject","checkClazz","check","processingElementPosition","rect","elementTop","clientHeight","elementLeft","clientWidth","left","freeze","Tool","parentEditor","MutationObserver","mutationList","observer","mutation","addedNodes","removedNodes","resultList","toolHandler","lastItemIndex","Line","lineElement","createLine","replaceChildren","connectedChildAfterCallback","disconnectedChildAfterCallback","deleteOption","DeleteOption","EMPTY_CONTENT_IS_DELETE","super","disconnect","observe","childList","add","removeFun","EMPTY_CONTENT_IS_NOT_DELETE","isToolEmpty","thisLine","getLine","lookAtMe","connectedCallback","connectedAfterCallback","closest","parentLine","childNodes","innerText","sty","getComputedStyle","visibility","opacity","shadowRoot","nextLine","getNextLine","connectedAfterOnlyOneCallback","disconnectedCallback","disconnectedAfterCallback","isCursor","createDefaultStyle","textContent","defaultStyle","insertDefaultStyle","sheet","insertRule","parentElement","getRootLine","parent","getTool","TargetTool","querySelector","isElementTextEmpty","div","className","is_line","range","surroundContents","startOffset","endOffset","startContainer","endContainer","startNodeToPrevNodeIndex","findIndex","isFirstNodeToStart","nodeList","targetNode","iter","createNodeIterator","NodeFilter","SHOW_TEXT","nextNode","clone","cloneNode","after","prepend","endLine","fragment","extractContents","setStart","setEnd","targetStartLineItem","nextSibling","itemRemoveList","itemAppendList","TEXT_NODE","appendData","nextTool","nextItem","middleTargetTool","targetLine","nextElementSibling","selectNodeContents","endTool","targetEndLineItem","previousSibling","applyTool","nodeName","leftText","rightText","targetWrap","targetText","commonAncestorContainer","offset","leftList","rightList","cloneContents","cloneRange","selectNode","list","Ignore","leftElement","rightElement","cloneLeft","cloneRight","createTextNode","appendList","before","startTextNode","endTextNode","startLeftText","endRightText","startNextSibling","startPrevSibling","endNextSibling","endPrevSibling","leftTool","rightTool","cancelTool","isCollapsed","anchorNode","anchorOffset","getRangeAt","isContentEditable","focus","setPosition","FreeWiilHandler","isDefaultStyle","blockBackspaceEvent","getLineRange","startAndEndLineObject","focusNode","allLine","children","startLine","endLineChildNodes","addRange","anchorNodeLine","focusNodeLine","querySelectorAll","item","isNextLineExist","isRoot","getPrevLine","previousElementSibling","getCurrentLine","UndoManager","time","targetEditor","addCursorMove","addUndoKey","addUserInput","rememberCursor","newRect","focusOffset","prevCursorTarget","hasAttribute","removeAttribute","scrollLeft","scrollTop","ctrlKey","preventDefault","undoKeyEvent","redoKeyEvent","cursorTarget","attributes","node","isEmpty","scrollTo","undoRedo","addUndoRedo","isCheckSkip","prevMils","altKey","clearHistory","clearEditor","Strong","title","Palette","OpenPositionMode","openPositionMode","BUTTON","openPosition","exampleMode","ExampleMode","TEXT_COLOR","createStyle","reset","clearTimeout","colorPanel","colorPaint","colorBrightness","palette","itemMap","topTextWrap","selectionRgbBg","previousRgbBg","colorWrap","colorBrightnessWrap","bottomTextWrap","selectionRgbText","previousRgbText","applyWrap","cancelButton","applyButton","__colorPanelSelected","__colorPanelSelectedPointer","__colorPaintSelectedPointer","colorPanelSelected","colorPanelSelectedPointer","colorPaintSelectedPointer","colorBrightnessSelectedPointer","__colorBrightnessSelectedPointer","blackOrWhite","selectedColor","color","sampleText","rangeCount","aticle","rangeClone","setPanelSelectePosition","colorPanelRect","onmousedown","ontouchstart","panelContext","getContext","willReadFrequently","clearRect","canvas","r","g","gradientH","createLinearGradient","addColorStop","fillStyle","fillRect","gradientV","colorPanelSelectedContext","lineWidth","beginPath","arc","PI","strokeStyle","stroke","pageX","pageY","isLeftOver","isRightOver","isTopOver","isBottomOver","reProcessingRectX","reProcessingRectY","getImageData","border","colorPaintRect","gradient","isOver","colorBrightnessRect","toFixed","applyCallback","paletteTop","WRAPPER","rgb","TouchEvent","touches","text","backgroundColor","TEXT_BACKGROUND_COLOR","TEXT_UNDERLINE","textDecoration","textDecorationColor","TEXT_LINE_THROUGH","insertStyle","Color","rgba","Background","Strikethrough","Underline","borderBottom","FontFamilyBox","fontList","searchInputTextEvent","createFontItem","li","fontFamily","defaultFont","fontElementList","fontFamilyBox","selectedFont","FontFamily","fontFamilyBoxContainer","font_family","Quote","NumericPoint","order","lastItem","inter","setInterval","clearInterval","BulletPoint","SortBox","sortBox","selectedSort","Sort","processingPalettePosition","text_align","textAlign","FontSizeBox","autocomplete","placeholder","oninput","onkeyup","fontSizeObject","searchWrap","max","unit","removeAllRanges","fixedLength","weight","parseFloat","step","rangeCloneContent","fontSizeBox","FontSize","fontSizeBoxContainer","font_size","Italic","ImageBox","is_shft","deltaY","passive","image","resizeRememberTarget","eventPath","is_ctrl","oninputEvent","addImageHoverEvent","keyDescription","onmouseenter","src","root","getRootNode","appendAwait","complete","toggleAttribute","falsh","onmouseleave","flash","transition","flashAwait","ontransitionend","labels","prevValue","onkeydown","onblur","onwheel","includes","imageRect","download","newWindow","image_name","imageBox","Image","accept","selectedFile","click","onchange","imgLoadEndCallback","startsWith","base64","customImageCallback","blob","imgUrl","URL","createObjectURL","files","DataTransfer","last_modified","lastModified","content_type","attachShadow","mode","createDefaultContent","wrap","slot","addedList","revokeObjectURL","draggable","imageContanier","onload","createDescription","tagName","file_name","open_status","createSlot","contentEditable","randomId","crypto","getRandomValues","Uint32Array","padStart","slotName","VideoBox","video","addVideoHoverEvent","videoRect","video_name","videoBox","Video","videoLoadEndCallback","loop","controls","customVideoCallback","videoUrl","videoContanier","file","canPlayType","lastIndexOf","videoIsNotWorking","onloadeddata","play","descriptionName","Resources","resourcesCallback","sizeLimitOverCallback","resources","customResourcesCallback","resources_name","resourcesContanier","contentWindow","contentVisibility","containIntrinsicSize","downloadButton","previewButton","resourcesUrl","Code","HyperlinkBox","required","urlInputTextWrapper","checkValidity","lastUrl","buttonWrapeer","hyperlinkBox","Hyperlink","getUrlMetadataPromise","htmlText","dom","DOMParser","parseFromString","getAttribute","favicon","siteName","p","fontWeight","hyperlink_child","contenteditable","FreeWillEditor","getLowDoseJSON","targetElement","afterCallback","json","jsonList","localName","cursor_offset","cursor_type","cursor_index","cursor_scroll_x","cursor_scroll_y","childs","parseLowDoseJSON","beforeCallback","jsonObj","htmlList","objList","jsonNode","editorTarget","customElements","components","tools","oldValue","__Tool","numberIndexMapper","numberToSpecialMapper","isDefaultShortcutKeyEvent","keydownEventCallback","Component","DOMException","componentsMap","extends","toolsMap","attributeFilter","attributeOldValue","childElementCount","startFirstLine","firstElementChild","subtree","arrowDownEvent","currentLine","isKeyAddEvent","shiftKey","firstKeyGroupList","isStop","tabIndex","isFirstLine","Range","setStartAfter","lastApplyTool","scrollTarget","applyToolAfterSelection","scrollIntoView","behavior","block","inline","lineBreak","LineBreakMode","NEXT_LINE_FIRST","lastChild","lastItemEndOffset","NEXT_LINE_LAST","firstLine","isLoaded","workspaceHandler","addWorkspaceIdChangedListener","removeWorkspaceIdChangedListener","roomHandler","addRoomIdChangeListener","removeRoomIdChangeListener","roomChangeAwait","isOwner","jsonToSaveElementDataset","underbarKeyNameObject","underbarNameToCamelName","getProjectPathPromise","shortenBytes","byte","rank","log2","rankText","pow","showToastMessage","textList","PositionChanger","changeList","wrapper","addPositionChangeEvent","child","order_sort","is_position_change","ondragstart","stopPropagation","ee","pointerEvents","is_pointer_target","ondragend","outerWidth","outerHeight","__dragendCallback","ondragover","ondragenter","borderTop","ondragleave","ondrop","cancle","onIfCancelCallback","nowLastItem","prevOrderSort","prevItem","prev_order_sort","Set","onDropEndChangePositionCallback","onDropDocumentOutCallback","accountHandler","AccountHandler","searchAccountInfo","accountInfoChangeAcceptPromise","accountInfoChangeAcceptEventListener","oldData","newData","accountInfo","s3EncryptionUtil","TextEncoder","decoder","TextDecoder","signAlgorithm","modulusLength","publicExponent","secretAlgorithm","generateKeyPair","algorithm","keyUsages","subtle","generateKey","keySign","privateKey","sign","signature","decryptMessage","ciphertext","decrypt","convertBase64ToBuffer","arrayBuffer","exportKey","exportType","fromCharCode","exportKeyString","callS3PresignedUrl","callFunction","signData","callFunctionParam","signKeyPair","encDncKeyPair","publicKey","exportSignKey","exportEncKey","fromCodePoint","dataKey","fetchPutObject","putUrl","md5","fileData","NoticeBoardLine","__parentWrapper","spellcheck","noticeBoardDetail","bind_name","noticeBoardDetailList","workspace_id","room_id","orderSort","isEventStream","lastTarget","is_update","createItemElement","sort","listObserver","handler","refresh","toolList","toolbar","noticeBoardDetailContainer","is_not_visible_target","minHeight","prevText","addButton","editor","positionChangeIcon","datasetPromise","onmousemove","onmouseover","onmouseout","onfocus","isScriptBlur","relatedTarget","NO_CHANGE","blur","promiseList","fileType","is_loading","newFileName","putSignData","isUpload","uploadType","new_file_name","encryptionKey","buf","encryptionMd","presignedUrl","getSignData","upload_type","fileTargetList","is_upload_end","elementMap","IndexedDBHandler","isOpen","dbName","columnInfo","storeName","keyPathNameList","pkAutoIncrement","idx","dbOpenRequest","indexedDB","DB_NAME","onupgradeneeded","upgradeneeded","onsuccess","isNewAddStore","objectStoreNames","DB_STORE_NAME","isNeedChangeIndex","store","transaction","objectStore","indexNamesMapper","indexNames","indexName","newVersion","closeResult","secondOpenRequest","onblocked","onclose","COLUMN_INFO","template","oldVersion","keyPath","createObjectStore","autoIncrement","column","createIndex","indexNameList","oldIndexCheckMapper","deleteIndex","addItem","put","commit","oncomplete","getList","pageNum","pageSize","readOption","start","isEnableAdvanced","count","openCursor","cursor","advance","continue","deleteList","idList","successCount","failedCount","deleteDatabase","deleteReuqest","LayerPopupTemplate","container","containerBox","openWait","onOpenCloseCallback","dim","GiveAdminView","form","IntersectionObserver","entry","isIntersecting","callData","createPage","liList","addListItemVisibleEvent","totalPages","threshold","owner","onsubmit","give_admin_view_search_user","give_admin_view_button","roomName","isAdmin","jobGrade","department","departmentHtml","jobGradeHtml","account_name","full_name","job_grade","checkbox","checked","componentOption","simpleMemory","attendRequest","attendRequestFilter","attendRequestSearch","Event","is_not_leave","itemList","__filterOption","email","permit","permitType","optionContainer","simpleProfileContainer","profileImage","profileImageInput","simple_profile_image","imgTempUrlList","profileImageUrl","simple_profile_full_name","simple_profile_job_grade","simple_profile_department","profileChangeFailed","simple_profile_cancel_button","attendRequestWrapper","contentList","indexedDBHandler","unique","originFileName","dbOpenPromise","imageOrVideoCallback","targetTools","uploadLoading","upload_loading","isHasRememberFile","filePreview","file_preview","visibility_not","filePreviewButton","totalLen","reader","getReader","ReadableStream","controller","pump","enqueue","Response","newBlob","removeChild","imageEditor","videoEditor","resourcesEditor","visibleObserver","unobserve","workspaceIdResolve","workspaceIdPromise","newWorkspaceId","is_resize","grow"],"sourceRoot":""}