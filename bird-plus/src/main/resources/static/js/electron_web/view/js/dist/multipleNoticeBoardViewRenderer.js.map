{"version":3,"file":"multipleNoticeBoardViewRenderer.js","mappings":";;UAAA;UACA;;;;;WCDA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;;ACNa;;AAEE;AACf;AACA;AACA;AACA;;;ACNa;;AAEwB;;AAErC;;AAEA,OAAO,QAAQ,kBAAE;AACjB,OAAO,gBAAgB;;AAEvB;AACA,gBAAgB,cAAQ;AACxB;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa,SAAS;AACtB;AACA,OAAO,SAAS;;AAEhB;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;;;AAGA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa,QAAQ;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,UAAU;AACrB;AACA,WAAW,SAAS;AACpB,aAAa;AACb;AACA,2BAA2B,oBAAoB,IAAI;AACnD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gCAAgC,OAAO;AACvC;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA,gBAAgB,SAAS;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,SAAS,GAAG,SAAS;AAC5C,4BAA4B;AAC5B;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa,QAAQ;AACrB;AACA;AACA,SAAS,UAAU;AACnB;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,kCAAkC;AAClC,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;;AAEA,wCAAwC,OAAO;AAC/C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA,WAAW,SAAS;AACpB,aAAa,QAAQ;AACrB;AACA,gCAAgC,WAAW,IAAI;AAC/C;AACA;AACA,eAAe,IAAI;AACnB,MAAM;AACN;AACA;AACA,GAAG,GAAG,WAAW;AACjB;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,UAAU;AACrB,WAAW,UAAU;AACrB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,kBAAkB;AAC7B,WAAW,UAAU;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,WAAW,kBAAkB;AAC7B,WAAW,UAAU;AACrB;AACA,aAAa;AACb;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM,oBAAc,MAAM,eAAe;;AAEzC;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,WAAW,QAAQ;AACnB;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS,QAAQ;AACjB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,4CAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB,cAAc,oBAAc;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAC;;;ACltBW;;AAEmB;;AAEhC;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA,aAAa,OAAO;AACpB;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB;AACA;AACA;AACA;AACA,CAAC;;AAED,MAAM,oBAAS;AACf;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB,CAAC;;AAED;AACA,sBAAsB,oBAAS,mBAAmB,YAAY;;AAE9D;AACA;AACA,mCAAmC,oBAAS;;AAE5C,EAAE,KAAK;AACP;AACA,GAAG;AACH;AACA,GAAG;;AAEH;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,sDAAe,UAAU,EAAC;;;ACnG1B;AACA,mDAAe,IAAI,EAAC;;;ACDP;;AAEmB;AACe;AAC/C;AACoE;;AAEpE;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa;AACb;AACA;AACA,SAAS,KAAK,yBAAyB,KAAK;AAC5C;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa,QAAQ;AACrB;AACA;AACA,SAAS,KAAK;AACd;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,WAAW,YAAY;AACvB;AACA,aAAa;AACb;AACA;AACA,SAAS,KAAK;AACd;;AAEA,mBAAmB,KAAK,cAAc,KAAK,IAAI;AAC/C;AACA,CAAC;;AAED;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,WAAW,UAAU;AACrB,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,WAAW,UAAU;AACrB;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA,WAAW,kBAAkB;AAC7B,WAAW,QAAQ;AACnB,WAAW,qBAAqB;AAChC;AACA;AACA;AACA;AACA,OAAO,KAAK;AACZ;AACA;;AAEA;AACA,8BAA8B,YAAgB;;AAE9C;AACA,YAAY,KAAK;AACjB;AACA;AACA;AACA,GAAG;AACH;AACA,YAAY,KAAK;AACjB,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,KAAK;;AAEhC,OAAO,KAAK;AACZ;AACA;;AAEA;AACA;;AAEA,QAAQ,KAAK;AACb;AACA;;AAEA,oBAAoB,KAAK;AACzB,gBAAgB,eAAU;AAC1B;;AAEA,QAAQ,KAAK,yBAAyB,KAAK;AAC3C;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa,GAAG;AAChB,aAAa,eAAe;AAC5B,aAAa,sBAAsB;AACnC,YAAY;AACZ;AACA,eAAe,SAAS;AACxB;AACA;AACA;;AAEA;AACA,UAAU,KAAK,kBAAkB;AACjC;AACA;AACA;AACA;AACA,QAAQ;AACR,SAAS,KAAK;AACd,UAAU,KAAK,sBAAsB,KAAK,gCAAgC,KAAK;AAC/E;AACA;AACA;;AAEA;AACA,YAAY,KAAK;AACjB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,QAAQ,KAAK;;AAEb;AACA;AACA;;AAEA;;AAEA,IAAI,KAAK;AACT,uBAAuB,KAAK;AAC5B,sBAAsB,KAAK;AAC3B;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA,OAAO,KAAK;AACZ;AACA;;AAEA;;AAEA;AACA;;AAEA,yDAAe,UAAU,EAAC;;;AC1Nb;;AAE4B;;AAEzC;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,WAAW,qBAAqB;AAChC,WAAW,qBAAqB;AAChC;AACA,aAAa;AACb;AACA;AACA;;AAEA,YAAY,kBAAU;AACtB;;AAEA,MAAM,8BAAS;;AAEf,8BAAS;AACT;AACA;;AAEA,8BAAS;AACT;AACA;AACA,IAAI;;AAEJ;AACA;AACA,GAAG;AACH;;AAEA,mEAAe,oBAAoB,EAAC;;;ACzDvB;;AAEmB;AACsC;;AAEtE;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa,QAAQ;AACrB;AACA,SAAS,eAAM;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB;AACA,aAAa,QAAQ;AACrB;AACe;AACf;AACA;AACA;AACA;AACA;AACA,+CAA+C,eAAM;;AAErD;;AAEA;;AAEA;AACA;AACA,IAAI;AACJ,uBAAuB,KAAK;AAC5B;AACA,UAAU,4BAAoB;AAC9B;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AC9Da;;AAEqB;;AAElC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,UAAU;AACvB,aAAa,UAAU;AACvB;AACA,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,UAAU;AACvB;AACA,eAAe;AACf;AACA;AACA,IAAI,KAAK;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA,8DAAe,kBAAkB,EAAC;;;ACtErB;;AAEb,4DAAe;AACf;AACA;AACA;AACA,CAAC,EAAC;;;ACNW;;AAE+D;AAC5E,8DAAe,2DAA2D,4BAAoB,EAAC;;;ACHlF;;AAEb,uDAAe,iDAAiD,EAAC;;;ACFrD;;AAEZ,mDAAe,yCAAyC;;;ACFE;AACd;AACR;;AAEpC,8CAAe;AACf;AACA;AACA,mBAAmB;AACnB,YAAY;AACZ,QAAQ;AACR,GAAG;AACH;AACA,CAAC,EAAC;;;ACZF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAMA;;;AC9CsC;AACI;;AAE3C,+CAAe;AACf,KAAK,4BAAK;AACV,KAAK,OAAQ;AACb,CAAC;;;ACNY;;AAEmB;AACS;AACG;;AAE7B;AACf,SAAS,kBAAU,WAAW,QAAQ;AACtC;AACA,UAAU,QAAQ,WAAW,KAAK;AAClC;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;;ACjBa;;AAEmB;;AAEhC;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,KAAK;AACd;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,WAAW,YAAY;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,SAAS;AACvB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa,4BAA4B;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;;AAEzB;AACA,UAAU,KAAK;AACf;AACA,QAAQ;AACR;AACA;;AAEA;AACA;;AAEA,0BAA0B,KAAK;AAC/B;AACA;;AAEA;;AAEA,kBAAkB,KAAK;AACvB;AACA;;AAEA;AACA;;AAEA,MAAM,KAAK,yBAAyB,KAAK;AACzC;;AAEA,IAAI,KAAK;AACT;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;;AAEA,6DAAe,cAAc,EAAC;;;AC3FjB;;AAEmB;AACe;AACM;AACH;AACY;AAClB;AACc;;AAE1D;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,UAAU;AACrB,WAAW,UAAU;AACrB;AACA,aAAa,QAAQ;AACrB;AACA;AACA,MAAM,KAAK;AACX;AACA;AACA,aAAa,KAAK;AAClB,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,gBAAgB,qBAAoB;;AAEpC;;AAEA;AACA;AACA;AACA,4BAA4B,KAAK;;AAEjC,2BAA2B,KAAK;AAChC;AACA;;AAEA,uBAAuB,KAAK;;AAE5B;AACA;AACA;AACA;AACA,iDAAiD,sBAAc;AAC/D;;AAEA,QAAQ,KAAK;AACb,MAAM,KAAK;AACX,MAAM,KAAK;AACX,MAAM,KAAK;AACX,MAAM,KAAK;AACX;AACA;AACA;AACA,QAAQ,KAAK;AACb;AACA;AACA,QAAQ,KAAK;AACb,gEAAgE;AAChE;AACA;;AAEA;;AAEA;AACA;AACA,eAAe,gBAAgB;AAC/B;;AAEA,wBAAwB,KAAK;AAC7B;;AAEA,eAAe,kBAAU;AACzB,wBAAwB,iBAAiB;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA,gBAAgB,KAAK;AACrB;AACA;;AAEA;AACA;AACA,QAAQ;AACR;AACA;AACA,kBAAkB,eAAU,SAAS,eAAU;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,cAAc,QAAQ;AACtB,UAAU,QAAQ;AAClB,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA,CAAC;;AAED,mDAAe,QAAQ,EAAC;;;AC9JX;;AAEqB;;AAElC;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa,QAAQ;AACrB;AACA,mDAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,MAAM;AACN;AACA;AACA,GAAG;;AAEH;AACA,CAAC,EAAC;;;ACtDW;;AAEmB;AACsB;;AAEtD;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS,KAAK;AACd;;AAEA;AACA;AACA,2BAA2B,mBAAmB;AAC9C;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,MAAM,KAAK;AACX;AACA;;AAEA;AACA;AACA;;AAEA,OAAO,KAAK;;AAEZ,MAAM,KAAK;AACX;AACA;;AAEA,MAAM,KAAK;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,uBAAuB,KAAK;;AAE5B;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,kBAAkB,KAAK;;AAEvB;AACA;AACA;AACA;;AAEA;AACA,MAAM,KAAK;;AAEX,QAAQ,KAAK;AACb;AACA,MAAM,QAAQ,KAAK;AACnB,iBAAiB,YAAY;AAC7B,MAAM;AACN;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,kBAAkB,KAAK;;AAEvB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,YAAY,KAAK;AACjB;AACA;;AAEA,YAAY,KAAK;AACjB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,kBAAkB,KAAK;;AAEvB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,oBAAoB,KAAK;;AAEzB;AACA;;AAEA;AACA;AACA;AACA;;AAEA,QAAQ,KAAK;AACb;AACA,MAAM;AACN;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,IAAI,KAAK;AACT,kBAAkB,KAAK;;AAEvB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,IAAI,KAAK;AACT,sEAAsE,KAAK;AAC3E,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,IAAI,KAAK;;AAET;AACA;AACA;;AAEA;;AAEA;AACA,KAAK,6CAA6C,MAAM;AACxD,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,KAAK;;AAEL,wDAAe,YAAY,EAAC;;;ACzSf;;AAEqB;AACU;AACO;;AAEnD;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B,WAAW,SAAS;AACpB;AACA,aAAa,GAAG;AAChB;AACe;AACf,yBAAyB,YAAQ;AACjC;AACA,kBAAkB,iBAAY;AAC9B;;AAEA,EAAE,KAAK;AACP;AACA,GAAG;;AAEH;;AAEA;AACA;;;AC3Ba;;AAEE;AACf;AACA;;;ACJa;;AAEkC;AACf;;AAEhC;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB;AACA,aAAa,eAAe;AAC5B;AACA;AACA;AACA,EAAE,eAAU,oDAAoD,eAAU;AAC1E;AACA;;AAEA,KAAK,yBAAyB,eAAU;AACxC;AACA,CAAC;;AAED,2DAAe,aAAa,EAAC;;;ACxBhB;;AAE4B;;AAEzC;AACA;AACA;AACA,WAAW,UAAU;AACrB,WAAW,UAAU;AACrB,WAAW,QAAQ;AACnB;AACA,aAAa,QAAQ;AACrB;AACe;AACf;AACA;AACA;AACA,IAAI;AACJ,eAAe,eAAU;AACzB;AACA,OAAO,eAAU,kBAAkB,eAAU;AAC7C;AACA;AACA;AACA;AACA;AACA;;;AC1BkC;AACU;;AAE5C,8CAAe,QAAQ;;AAEvB;AACA;AACA;AACA;;AAEA,MAAM,KAAK;;AAEX,MAAM,KAAK;;AAEX,MAAM,KAAK;;AAEX;;AAEA,uCAAuC;AACvC,KAAK;;AAEL;AACA,0DAA0D,wBAAwB;AAClF;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,cAAc;AACd;AACA;AACA,KAAK;AACL;AACA,GAAG,EAAC;;;;ACxCS;;AAEb;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa,SAAS;AACtB;AACe;AACf;AACA;AACA;AACA;AACA;;;ACda;;AAEb;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA,aAAa,QAAQ;AACrB;AACe;AACf;AACA;AACA;AACA;;;ACda;;AAE2C;AACJ;;AAEpD;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA,aAAa,QAAQ;AACrB;AACe;AACf,kBAAkB,aAAa;AAC/B,WAAW,WAAW;AACtB;AACA;AACA;;;ACpBa;;AAEqB;AACU;;AAE5C,sDAAe,QAAQ;;AAEvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,QAAQ;AACtB,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,cAAc,QAAQ;AACtB,gBAAgB,SAAS;AACzB;AACA;AACA,sBAAsB,KAAK;AAC3B;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG,GAAG,EAAC;;;AClEM;;AAEE;AACf,0BAA0B,KAAK;AAC/B;AACA;;;ACLa;;AAEb;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,0DAAe,WAAW,EAAC;;;ACtDd;;AAEqB;AACO;AACK;AACE;AACK;AACS;AACC;AAChB;AACQ;AACC;AACZ;AACO;AACC;;AAEpD;AACA;AACA,uBAAuB,mBAAW;;AAElC;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA,0CAAe;AACf;AACA;AACA,2BAA2B,iBAAY;AACvC,SAAS,6BAA6B;AACtC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,QAAQ,KAAK;AACb,UAAU,QAAQ,0BAA0B,QAAQ;AACpD,8CAA8C;AAC9C,QAAQ;AACR;AACA,oEAAoE;AACpE,yFAAyF;AACzF;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,qBAAqB,aAAa;;AAElC,8CAA8C,QAAQ;;AAEtD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,8BAA8B,iBAAY;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAM,MAAM;AACZ;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;;AAEP;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,eAAU,oBAAoB,eAAU;;AAEzD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,eAAU,kBAAkB,eAAU;;AAEvD;AACA;AACA;;AAEA;AACA;AACA;AACA,kDAAkD,qBAAoB;AACtE;AACA;AACA;AACA,iBAAiB,eAAU;AAC3B;AACA,2CAA2C,eAAU,aAAa,eAAU;AAC5E;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO,QAAQ;AACf,uBAAuB,KAAK;;AAE5B,uDAAuD,eAAe;AACtE;AACA,4EAA4E,OAAO;;AAEnF;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,MAAM,KAAK;AACX;AACA,OAAO;AACP;;AAEA;AACA,SAAS,KAAK;AACd;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,oBAAa;AACzD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,qBAAqB,aAAa;;AAElC,oBAAoB,QAAQ;AAC5B,iBAAiB,eAAU,2CAA2C,eAAU;AAChF;AACA;;;AAGA;AACA;AACA,GAAG;AACH,CAAC;;;ACnQ+B;AACI;AACF;AACa;;AAE/C;AACA,QAAQ,YAAW;AACnB,OAAO,GAAU;AACjB;;AAEA,KAAK;AACL;AACA;AACA,yCAAyC,MAAM;AAC/C,MAAM;AACN;AACA;AACA,8CAA8C,MAAM;AACpD;AACA,CAAC;;AAED,sCAAsC,OAAO;;AAE7C,sCAAsC,KAAK;;AAE3C,+CAAe;AACf;AACA,eAAe,KAAK;;AAEpB,WAAW,QAAQ;AACnB;AACA;;AAEA;;AAEA,oBAAoB,YAAY;AAChC;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,oBAAoB,eAAU,qBAAqB,GAAG;AACtD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,yCAAyC,IAAI;AAC7C;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,eAAU;AAC1B;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA,CAAC;;;AC5EY;;AAEkC;AACF;AACD;AACW;AACJ;AACJ;;AAE/C;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAc,oBAAa;AAC3B;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa,SAAS;AACtB;AACe;AACf;;AAEA,mBAAmB,iBAAY;;AAE/B;AACA,gBAAgB,aAAa;AAC7B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,kBAAkB,QAAQ,8BAA8B,YAAQ;;AAEhE;AACA;;AAEA;AACA,oBAAoB,aAAa;AACjC;AACA;AACA;AACA;;AAEA,uBAAuB,iBAAY;;AAEnC;AACA,GAAG;AACH,SAAS,QAAQ;AACjB;;AAEA;AACA;AACA,+BAA+B,aAAa;AAC5C;AACA;AACA;AACA;AACA,kCAAkC,iBAAY;AAC9C;AACA;;AAEA;AACA,GAAG;AACH;;;AChFa;;AAEmB;AACa;;AAE7C,oDAAoD,iBAAY;;AAEhE;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA,aAAa,QAAQ;AACrB;AACe;AACf;AACA;AACA;;AAEA;AACA,QAAQ,KAAK,0BAA0B,KAAK;AAC5C,aAAa,KAAK,aAAa,SAAS;AACxC,MAAM,SAAS,KAAK;AACpB,aAAa,KAAK,SAAS;AAC3B,MAAM,SAAS,KAAK;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS,KAAK;AACd;AACA,MAAM,UAAU,KAAK;AACrB;AACA;AACA;;AAEA;AACA;AACA,SAAS,KAAK;AACd;AACA;AACA;;AAEA;AACA;AACA,SAAS,KAAK;AACd;AACA,MAAM,UAAU,KAAK;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAE,KAAK,qCAAqC;AAC5C;AACA;AACA,KAAK,KAAK;AACV,GAAG;;AAEH;AACA;;;ACzGO;;ACAM;;AAE0B;AACQ;;AAE/C;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA,WAAW,mBAAmB;AAC9B,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB;AACA,aAAa;AACb;AACA;AACA;AACA,wBAAwB,OAAO;AAC/B;;AAEA;AACA;AACA;AACA,gBAAgB,eAAU;AAC1B;AACA,QAAQ,eAAU;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,UAAU;AACrB;AACA,aAAa;AACb;;AAEA;AACA;AACA,cAAc,eAAU,8BAA8B,eAAU;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,eAAU,yCAAyC,eAAU;AAC/E;AACA;AACA;AACA;AACA,gBAAgB,eAAU,0BAA0B,eAAU;AAC9D;AACA;AACA;;AAEA,gDAAe;AACf;AACA;AACA,CAAC,EAAC;;;AC1FW;;AAEqB;AACY;AACW;AACN;AACR;AACI;AACC;AACH;;AAE7C,MAAM,gBAAU,GAAG,SAAS;;AAE5B;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA,mBAAmB,uBAAkB;AACrC,oBAAoB,uBAAkB;AACtC;AACA;;AAEA;AACA;AACA;AACA,aAAa,eAAe;AAC5B,aAAa,SAAS;AACtB;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA,aAAa,WAAW;;AAExB,WAAW,yCAAyC;;AAEpD;AACA,MAAM,SAAS;AACf,2BAA2B,gBAAU,cAAc,gBAAU;AAC7D,2BAA2B,gBAAU,cAAc,gBAAU;AAC7D,6BAA6B,gBAAU,cAAc,gBAAU;AAC/D,OAAO;AACP;;AAEA;AACA,UAAU,KAAK;AACf;AACA;AACA;AACA,QAAQ;AACR,QAAQ,SAAS;AACjB,kBAAkB,gBAAU;AAC5B,qBAAqB,gBAAU;AAC/B,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA,oCAAoC,KAAK;AACzC;AACA;AACA;;AAEA,eAAe,KAAK;AACpB;AACA;AACA;AACA;AACA;;AAEA,qBAAqB,iBAAY;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA,qBAAqB,eAAe;AACpC;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,eAAe;AAC/B,MAAM;AACN;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,aAAa,WAAW;AACxB,qBAAqB,aAAa;AAClC,WAAW,QAAQ;AACnB;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA,wBAAwB,WAAW,aAAa;AAChD;AACA;AACA,yBAAyB;AACzB,KAAK;AACL;AACA,CAAC;;AAED,KAAK;AACL;;AAEA;AACA;AACA,0BAA0B,WAAW,aAAa;AAClD;AACA;AACA;AACA,UAAU,IAAI;AACd;AACA;AACA,OAAO;AACP;AACA;;AAEA;;AAEA;AACA,CAAC;;AAED,iDAAe,KAAK,EAAC;;;ACxMR;;AAEkC;;AAE/C;AACA;AACA;AACA,WAAW,UAAU;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,yBAAyB,oBAAa;AACtC;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA,yDAAe,WAAW,EAAC;;;ACxHd;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA,WAAW,UAAU;AACrB;AACA,aAAa;AACb;AACe;AACf;AACA;AACA;AACA;;;AC3Ba;;AAEqB;;AAElC;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACe;AACf,SAAS,KAAK;AACd;;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED,6DAAe,cAAc,EAAC;;;ACtEjB;;AAEkB;AACM;AACD;AACY;AACL;AACc;AACH;AACJ;AACN;AACN;AACW;AACH;AACL;AACY;AACH;AACJ;AACW;;AAEzD;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa,OAAO;AACpB;AACA;AACA,sBAAsB,UAAK;AAC3B,mBAAmB,IAAI,CAAC,UAAK;;AAE7B;AACA,EAAE,KAAK,kBAAkB,UAAK,sBAAsB,iBAAiB;;AAErE;AACA,EAAE,KAAK,kCAAkC,iBAAiB;;AAE1D;AACA;AACA,0BAA0B,WAAW;AACrC;;AAEA;AACA;;AAEA;AACA,6BAA6B,YAAQ;;AAErC;AACA,cAAc,UAAK;;AAEnB;AACA,sBAAsB,oBAAa;AACnC,oBAAoB,kBAAW;AAC/B,iBAAiB,QAAQ;AACzB,gBAAgB,OAAO;AACvB,mBAAmB,kBAAU;;AAE7B;AACA,mBAAmB,eAAU;;AAE7B;AACA;;AAEA;AACA;AACA;AACA;;AAEA,eAAe,MAAM;;AAErB;AACA,qBAAqB,YAAY;;AAEjC;AACA,oBAAoB,WAAW;;AAE/B,qBAAqB,iBAAY;;AAEjC,4BAA4B,sBAAc,CAAC,KAAK;;AAEhD,mBAAmB,QAAQ;;AAE3B,uBAAuB,sBAAc;;AAErC;;AAEA;AACA,gDAAe,KAAK;;;ACxFpB;AAC0B;AAC1B;AACO;AACA;AACP;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA,eAAe,SAAK;AACpB;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,oBAAoB,SAAK;AACzB,iBAAiB;AACjB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,kBAAkB,oBAAoB,IAAI;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,YAAY;AACnB;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACO;;ACxEwD;AACrC;AAC1B,MAAM,qBAAG;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,GAAG;AACN,SAAS,SAAK,MAAM,WAAW;AAC/B;AACA;AACA;AACA,GAAG;AACH;AACA,MAAM,UAAU;AAChB;AACA;AACA;AACA,GAAG;AACH,GAAG,qBAAG;AACN,GAAG,SAAK;AACR;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,SAAS,UAAU;AACnB;AACA,WAAW,SAAK,QAAQ,WAAW,CAAC;AACpC;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA;AACA,KAAK,qBAAG;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH;AACA,mCAAmC;AACnC,SAAS,UAAU;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,GAAG;AACR,WAAW,SAAK,SAAS,WAAW,CAAC;AACrC;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA;AACA,KAAK,qBAAG;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH,GAAG,qBAAG;AACN,GAAG,qBAAG;AACN;AACA,GAAG;AACH;AACA;AACO;;ACjGwD;AACrC;AAC1B,MAAM,mBAAG;AACT;AACA;AACA;AACA;AACA;AACA,SAAS,UAAU;AACnB;AACA;AACA;AACA;AACA;AACA,IAAI,GAAG;AACP;AACA,WAAW,SAAK,SAAS,WAAW,CAAC;AACrC;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA;AACA,KAAK;AACL,KAAK,mBAAG;AACR;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH,GAAG,mBAAG;AACN,GAAG,mBAAG;AACN;AACA,GAAG;AACH;AACA;AACA,SAAS,UAAU;AACnB;AACA;AACA;AACA;AACA;AACA,IAAI,GAAG;AACP;AACA,WAAW,SAAK,SAAS,WAAW,CAAC;AACrC;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA;AACA,KAAK;AACL,KAAK,mBAAG;AACR;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH,GAAG,mBAAG;AACN,GAAG,mBAAG;AACN;AACA,GAAG;AACH;AACA;AACO;;ACpEwD;AACrC;AAC1B,MAAM,sBAAG;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,UAAU;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,GAAG;AACpB,WAAW,SAAK,SAAS,WAAW,CAAC;AACrC;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA;AACA,KAAK;AACL,KAAK,sBAAG;AACR;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH,GAAG,sBAAG;AACN,GAAG,sBAAG;AACN;AACA,GAAG;AACH;AACA;AACA,SAAS,UAAU;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,GAAG;AACpB,WAAW,SAAK,SAAS,WAAW,CAAC;AACrC;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA;AACA,KAAK;AACL,KAAK,sBAAG;AACR;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH,GAAG,sBAAG;AACN,GAAG,sBAAG;AACN;AACA,GAAG;AACH;AACA;AACA,SAAS,UAAU;AACnB;AACA,SAAS,qBAAqB;AAC9B;AACA;AACA,wBAAwB,EAAE,GAAG,EAAE;AAC/B,WAAW,SAAK,QAAQ,WAAW,CAAC,qCAAqC,YAAY,GAAG,OAAO,GAAG,YAAY;AAC9G;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA;AACA,KAAK;AACL,KAAK,sBAAG;AACR;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH,GAAG,sBAAG;AACN,GAAG,sBAAG;AACN;AACA,GAAG;AACH;AACA;AACO;;AClGwD;AACrC;AAC1B,MAAM,sBAAG;AACT;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,SAAS,UAAU;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,GAAG;AACR,WAAW,SAAK,SAAS,WAAW,CAAC;AACrC;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA;AACA,KAAK,sBAAG;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH,GAAG,sBAAG;AACN,GAAG,sBAAG;AACN;AACA,GAAG;AACH;AACA,4BAA4B;AAC5B,SAAS,UAAU;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,GAAG;AACR,WAAW,SAAK,SAAS,WAAW,CAAC;AACrC;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA;AACA,KAAK,sBAAG;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH,GAAG,sBAAG;AACN,GAAG,sBAAG;AACN;AACA,GAAG;AACH;AACA,yBAAyB;AACzB,SAAS,UAAU;AACnB;AACA,SAAS,aAAa;AACtB;AACA;AACA;AACA;AACA,yBAAyB,EAAE,GAAG,IAAI;AAClC;AACA;AACA,gBAAgB,EAAE,GAAG,EAAE;AACvB,MAAM;AACN,WAAW,SAAK,QAAQ,WAAW,CAAC,mCAAmC,YAAY;AACnF;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA;AACA,KAAK,sBAAG;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH,GAAG,sBAAG;AACN,GAAG,sBAAG;AACN;AACA,GAAG;AACH;AACA;AACA;AACO;;ACpHwD;AACrC;AAC1B,MAAM,yBAAG;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,aAAa;AAC1B;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,yCAAyC,WAAW,CAAC,8BAA8B,YAAY;AAC/F;AACA,kCAAkC,SAAK;AACvC,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA,iBAAiB,iCAAiC;AAClD;AACA,YAAY,yBAAG;AACf;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,YAAY,yBAAG;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,YAAY,yBAAG;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,YAAY,yBAAG;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACO;;AC5GwD;AACrC;AAC1B,MAAM,yBAAG;AACT;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC,eAAe,UAAU;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,GAAG;AACpB,uBAAuB,SAAK,SAAS,WAAW,CAAC;AACjD;AACA;AACA;AACA,iBAAiB;AACjB,sBAAsB,UAAU;AAChC;AACA;AACA,oBAAoB,yBAAG;AACvB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,wBAAwB;AACxB;AACA,SAAS;AACT,GAAG,yBAAG;AACN,GAAG,yBAAG;AACN;AACA,GAAG;AACH;AACA;AACA,gCAAgC;AAChC,eAAe,UAAU;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,GAAG;AACpB,uBAAuB,SAAK,SAAS,WAAW,CAAC;AACjD;AACA;AACA;AACA,iBAAiB;AACjB,sBAAsB,UAAU;AAChC;AACA;AACA,oBAAoB,yBAAG;AACvB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,wBAAwB;AACxB;AACA,SAAS;AACT,GAAG,yBAAG;AACN,GAAG,yBAAG;AACN;AACA,GAAG;AACH;AACA;AACA,sCAAsC;AACtC,eAAe,UAAU;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,GAAG;AACpB,uBAAuB,SAAK,SAAS,WAAW,CAAC;AACjD;AACA;AACA;AACA,iBAAiB;AACjB,sBAAsB,UAAU;AAChC;AACA;AACA,oBAAoB,yBAAG;AACvB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,wBAAwB;AACxB;AACA,SAAS;AACT,GAAG,yBAAG;AACN,GAAG,yBAAG;AACN;AACA,GAAG;AACH;AACA,oCAAoC;AACpC;AACA,eAAe,UAAU;AACzB;AACA,qBAAqB,qBAAqB;AAC1C;AACA;AACA,uCAAuC,EAAE,GAAG,EAAE;AAC9C;AACA,sCAAsC,YAAY,6CAA6C,YAAY,GAAG,OAAO,GAAG,YAAY;AACpI;AACA,oDAAoD,WAAW,CAAC,6CAA6C,YAAY,GAAG,OAAO,GAAG,YAAY;AAClJ;AACA,8CAA8C,SAAK;AACnD,yBAAyB;AACzB;AACA,qBAAqB;AACrB;AACA;AACA,6BAA6B,iCAAiC;AAC9D;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,wBAAwB;AACxB;AACA,SAAS;AACT,YAAY,yBAAG;AACf,YAAY,yBAAG;AACf;AACA,SAAS;AACT;AACA;AACA,0CAA0C;AAC1C;AACA,eAAe,UAAU;AACzB;AACA,qBAAqB,oCAAoC;AACzD;AACA;AACA;AACA;AACA;AACA,uCAAuC,EAAE,GAAG,EAAE;AAC9C;AACA,sCAAsC,YAAY,oDAAoD,YAAY,GAAG,OAAO,GAAG,cAAc,GAAG,YAAY;AAC5J;AACA,oDAAoD,WAAW,CAAC,oDAAoD,YAAY,GAAG,OAAO,GAAG,cAAc,GAAG,YAAY;AAC1K;AACA,8CAA8C,SAAK;AACnD,yBAAyB;AACzB;AACA,qBAAqB;AACrB;AACA;AACA,6BAA6B,iCAAiC;AAC9D;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,wBAAwB;AACxB;AACA,SAAS;AACT,YAAY,yBAAG;AACf,YAAY,yBAAG;AACf;AACA,SAAS;AACT;AACA;AACA,gCAAgC;AAChC,eAAe,UAAU;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,GAAG;AACpB;AACA,uBAAuB,SAAK,SAAS,WAAW,CAAC;AACjD;AACA;AACA;AACA,iBAAiB;AACjB,sBAAsB,UAAU;AAChC;AACA;AACA,oBAAoB,yBAAG;AACvB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,wBAAwB;AACxB;AACA,SAAS;AACT,GAAG,yBAAG;AACN,GAAG,yBAAG;AACN;AACA,GAAG;AACH;AACA,qCAAqC;AACrC,eAAe,UAAU;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,GAAG;AACpB;AACA,uBAAuB,SAAK,SAAS,WAAW,CAAC;AACjD;AACA;AACA;AACA,iBAAiB;AACjB,sBAAsB,UAAU;AAChC;AACA;AACA,oBAAoB,yBAAG;AACvB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,wBAAwB;AACxB;AACA,SAAS;AACT,GAAG,yBAAG;AACN,GAAG,yBAAG;AACN;AACA,GAAG;AACH;AACA;AACA,eAAe,UAAU;AACzB;AACA;AACA,uBAAuB,SAAK,SAAS,WAAW,CAAC;AACjD;AACA;AACA;AACA,iBAAiB;AACjB,sBAAsB,UAAU;AAChC;AACA;AACA,oBAAoB,yBAAG;AACvB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,wBAAwB;AACxB;AACA,SAAS;AACT,GAAG,yBAAG;AACN,GAAG,yBAAG;AACN;AACA,GAAG;AACH;AACA;AACA,eAAe,UAAU;AACzB;AACA,uBAAuB,SAAK,SAAS,WAAW,CAAC;AACjD;AACA;AACA;AACA,iBAAiB;AACjB,sBAAsB,UAAU;AAChC;AACA;AACA,oBAAoB,yBAAG;AACvB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,wBAAwB;AACxB;AACA,SAAS;AACT,GAAG,yBAAG;AACN,GAAG,yBAAG;AACN;AACA,GAAG;AACH;AACA;AACO;;;ACzUwD;AACrC;AAC1B,MAAM,kBAAG;AACT;AACA;AACA;AACA;AACA,sBAAsB;AACtB,SAAS,UAAU;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,GAAG;AACR,WAAW,SAAK,SAAS,WAAW,CAAC;AACrC;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA;AACA,KAAK,kBAAG;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH,GAAG,kBAAG;AACN,GAAG,kBAAG;AACN;AACA,GAAG;AACH;AACA,4BAA4B;AAC5B;AACA,GAAG,kBAAG,8CAA8C,kBAAkB;AACtE;AACA;AACA,SAAS,UAAU;AACnB;AACA,WAAW,SAAK,SAAS,WAAW,CAAC,gCAAgC,kBAAkB;AACvF;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA;AACA,KAAK,kBAAG;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH,GAAG,kBAAG;AACN,GAAG,kBAAG;AACN;AACA,GAAG;AACH;AACA;AACA,SAAS,UAAU;AACnB;AACA,WAAW,SAAK,SAAS,WAAW,CAAC;AACrC;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA;AACA,KAAK,kBAAG;AACR;AACA,KAAK;AACL;AACA,KAAK,kBAAG;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH,GAAG,kBAAG;AACN,GAAG,kBAAG;AACN;AACA,GAAG;AACH;AACA;AACA,SAAS,UAAU;AACnB;AACA,WAAW,SAAK,SAAS,WAAW,CAAC;AACrC;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA;AACA,KAAK,kBAAG;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH,GAAG,kBAAG;AACN,GAAG,kBAAG;AACN;AACA,GAAG;AACH;AACA;AACA,SAAS,UAAU;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,GAAG;AACR,WAAW,SAAK,SAAS,WAAW,CAAC;AACrC;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA;AACA,KAAK,kBAAG;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH,GAAG,kBAAG;AACN,GAAG,kBAAG;AACN;AACA,GAAG;AACH;AACA;AACA,SAAS,UAAU;AACnB;AACA,WAAW,SAAK,SAAS,WAAW,CAAC;AACrC;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA;AACA,KAAK,kBAAG;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH,GAAG,kBAAG;AACN,GAAG,kBAAG;AACN;AACA,GAAG;AACH;AACA,0BAA0B;AAC1B,SAAS,UAAU;AACnB;AACA,SAAS,QAAQ;AACjB;AACA;AACA,wBAAwB,EAAE,GAAG,EAAE;AAC/B,WAAW,SAAK,QAAQ,WAAW,CAAC,wBAAwB,OAAO,GAAG,YAAY;AAClF;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA;AACA,KAAK,kBAAG;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH,GAAG,kBAAG;AACN,GAAG,kBAAG;AACN;AACA,GAAG;AACH;AACA,kCAAkC;AAClC,SAAS,UAAU;AACnB;AACA,SAAS,aAAa;AACtB;AACA;AACA;AACA;AACA,yBAAyB,EAAE,GAAG,IAAI;AAClC;AACA;AACA,gBAAgB,EAAE,GAAG,EAAE;AACvB,MAAM;AACN,WAAW,SAAK,QAAQ,WAAW,CAAC,kCAAkC,YAAY,GAAG,YAAY;AACjG;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA;AACA,KAAK,kBAAG;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH,GAAG,kBAAG;AACN,GAAG,kBAAG;AACN;AACA,GAAG;AACH;AACA,mCAAmC;AACnC,SAAS,UAAU;AACnB;AACA,SAAS,aAAa;AACtB;AACA;AACA;AACA;AACA,yBAAyB,EAAE,GAAG,IAAI;AAClC;AACA;AACA,gBAAgB,EAAE,GAAG,EAAE;AACvB,MAAM;AACN,WAAW,SAAK,QAAQ,WAAW,CAAC,kCAAkC,YAAY,GAAG,YAAY;AACjG;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA;AACA,KAAK,kBAAG;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH,GAAG,kBAAG;AACN,GAAG,kBAAG;AACN;AACA,GAAG;AACH;AACA,uCAAuC;AACvC;AACA;AACA,GAAG,kBAAG,oDAAoD,aAAa;AACvE;AACA;AACA;AACA,SAAS,UAAU;AACnB;AACA;AACA,qCAAqC,WAAW,CAAC,mCAAmC,aAAa;AACjG;AACA,yBAAyB,SAAK;AAC9B,OAAO;AACP;AACA,MAAM;AACN;AACA;AACA,WAAW,iCAAiC;AAC5C;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH,GAAG,kBAAG;AACN,GAAG,kBAAG;AACN;AACA,GAAG;AACH;AACA;AACA,yBAAyB;AACzB;AACA,GAAG,kBAAG,sCAAsC,aAAa;AACzD;AACA;AACA,SAAS,UAAU;AACnB;AACA,WAAW,SAAK,QAAQ,WAAW,CAAC,0BAA0B,aAAa;AAC3E;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH;AACA,2BAA2B;AAC3B;AACA,GAAG,kBAAG,wCAAwC,aAAa;AAC3D;AACA;AACA,SAAS,UAAU;AACnB;AACA,WAAW,SAAK,QAAQ,WAAW,CAAC,qCAAqC,aAAa;AACtF;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA;AACA,KAAK,kBAAG;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH,GAAG,kBAAG;AACN,GAAG,kBAAG;AACN;AACA,GAAG;AACH;AACA;AACO;;AC7YwD;AACrC;AAC1B,MAAM,uBAAG;AACT;AACA;AACA;AACA;AACA,mCAAmC;AACnC,SAAS,UAAU;AACnB;AACA,WAAW,SAAK,QAAQ,WAAW,CAAC,4CAA4C,WAAW,QAAQ,WAAW;AAC9G;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA;AACA,KAAK;AACL,KAAK,uBAAG;AACR;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH,GAAG,uBAAG;AACN,GAAG,uBAAG;AACN;AACA,GAAG;AACH;AACA,kCAAkC;AAClC,SAAS,UAAU;AACnB;AACA,WAAW,SAAK,QAAQ,WAAW,CAAC,gDAAgD,WAAW,QAAQ,WAAW,iBAAiB,oBAAoB;AACvJ;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA;AACA,KAAK;AACL,KAAK,uBAAG;AACR;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH,GAAG,uBAAG;AACN,GAAG,uBAAG;AACN;AACA,GAAG;AACH;AACA,oCAAoC;AACpC,SAAS,UAAU;AACnB;AACA;AACA;AACA,wBAAwB,EAAE,GAAG,EAAE;AAC/B,WAAW,SAAK,QAAQ,WAAW,CAAC,4CAA4C,kBAAkB,GAAG,YAAY;AACjH;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA;AACA,KAAK;AACL,KAAK,uBAAG;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH,GAAG,uBAAG;AACN,GAAG,uBAAG;AACN;AACA,GAAG;AACH;AACA,8BAA8B;AAC9B;AACA,GAAG,uBAAG,6BAA6B,kBAAkB;AACrD;AACA;AACA,SAAS,UAAU;AACnB;AACA,WAAW,SAAK,QAAQ,WAAW,CAAC,+BAA+B,kBAAkB;AACrF;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH;AACA,sCAAsC;AACtC;AACA,GAAG,uBAAG,6BAA6B,kBAAkB;AACrD;AACA;AACA,SAAS,UAAU;AACnB;AACA,WAAW,SAAK,QAAQ,WAAW,CAAC,8BAA8B,kBAAkB;AACpF;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH;AACA,0CAA0C;AAC1C,SAAS,UAAU;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,GAAG;AACR,WAAW,SAAK,SAAS,WAAW,CAAC;AACrC;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA;AACA,KAAK,uBAAG;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH,GAAG,uBAAG;AACN,GAAG,uBAAG;AACN;AACA,GAAG;AACH;AACA,yBAAyB;AACzB,SAAS,UAAU;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,GAAG;AACR,WAAW,SAAK,SAAS,WAAW,CAAC;AACrC;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA;AACA,KAAK,uBAAG;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH,GAAG,uBAAG;AACN,GAAG,uBAAG;AACN;AACA,GAAG;AACH;AACA,mCAAmC;AACnC;AACA,GAAG,uBAAG,qDAAqD,kBAAkB;AAC7E;AACA;AACA;AACA,SAAS,UAAU;AACnB;AACA,0BAA0B,YAAY,4CAA4C,kBAAkB;AACpG;AACA,qCAAqC,WAAW,CAAC,4CAA4C,kBAAkB;AAC/G;AACA,yBAAyB,SAAK;AAC9B,OAAO;AACP;AACA,MAAM;AACN;AACA;AACA,WAAW,iCAAiC;AAC5C;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH,GAAG,uBAAG;AACN,GAAG,uBAAG;AACN;AACA,GAAG;AACH;AACA,sBAAsB;AACtB,SAAS,UAAU;AACnB;AACA;AACA;AACA,wBAAwB,EAAE,GAAG,EAAE;AAC/B,WAAW,SAAK,QAAQ,WAAW,CAAC,iCAAiC,kBAAkB,GAAG,YAAY;AACtG;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA;AACA,KAAK;AACL,KAAK,uBAAG;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH,GAAG,uBAAG;AACN,GAAG,uBAAG;AACN;AACA,GAAG;AACH;AACA,iCAAiC;AACjC,SAAS,UAAU;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,GAAG;AACR,WAAW,SAAK,SAAS,WAAW,CAAC;AACrC;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA;AACA,KAAK;AACL;AACA,KAAK,uBAAG;AACR;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH,GAAG,uBAAG;AACN,GAAG,uBAAG;AACN;AACA,GAAG;AACH;AACA;AACA,yBAAyB;AACzB,SAAS,UAAU;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,GAAG;AACR,WAAW,SAAK,SAAS,WAAW,CAAC;AACrC;AACA;AACA;AACA,KAAK;AACL,UAAU,UAAU;AACpB;AACA;AACA,KAAK,uBAAG;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,KAAK;AACL,IAAI;AACJ,YAAY;AACZ;AACA,GAAG;AACH,GAAG,uBAAG;AACN,GAAG,uBAAG;AACN;AACA,GAAG;AACH;AACA;AACO;;ACrW8D;AACH;AACM;AACA;AACM;AACA;AACd;AACU;AAC1E;AACoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,0CAA0C,oCAAoC;AAC9E;AACA;AACA,iDAAiD,kDAAkD;AACnG;AACA,CAAC;AACD;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,IAAI;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,+BAA+B;AAC9E;AACA;AACA;AACA;AACA;AACA,YAAY,YAAY;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,iBAAiB,EAAE,eAAe;AACrC,GAAG,kBAAkB,EAAE,kBAAkB;AACzC,GAAG,qBAAqB,EAAE,qBAAqB;AAC/C,GAAG,cAAc,EAAE,mBAAmB;AACtC;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,YAAY;AACZ,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,yBAAyB;AACzB,aAAa;AACb;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;AACF;AACA;AACA,8DAA8D,4BAA4B;AAC1F,GAAG;AACH,4DAA4D,4BAA4B;AACxF;AACA;AACA;AACA,GAAG;AACH,EAAE;AACF;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,wBAAwB,WAAW;AACnC,wBAAwB,WAAW;AACnC;AACA;AACA;AACA,MAAM;AACN,KAAK;AACL,IAAI;AACJ;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,qBAAqB,WAAW;AAChC,qBAAqB,WAAW;AAChC;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,gBAAgB;AACjD;AACA;AACA;AACA;AACA;AACA,sBAAsB,EAAE,GAAG,EAAE;AAC7B,2CAA2C,eAAe,GAAG,YAAY;AACzE,EAAE;AACF;AACA,mCAAmC;AACnC;AACA,iCAAiC;AACjC;AACA,mCAAmC;AACnC;AACA,iCAAiC;AACjC;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,6CAA6C;AAC/F;AACA;AACA,mDAAmD,gCAAgC;AACnF;AACA,6CAA6C,sBAAsB;AACnE;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ,GAAG;AACH;AACA;AACA,WAAW,eAAe;AAC1B,YAAY,cAAc;AAC1B;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,kDAAkD,gCAAgC;AAClF;AACA,4CAA4C,sBAAsB;AAClE;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,SAAS,UAAU;AACnB,WAAW;AACX,GAAG;AACH,EAAE;AACF;AACA,+BAA+B,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,oFAAoF,kBAAkB;AACtG,EAAE;AACF;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/YA;AACA,yDAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,4BAA4B;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjEA;AACe;AACf;AACA;AACA,OAAO,cAAc;AACrB;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,kBAAkB;AAC9B,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,iEAAiE,sBAAsB,4BAA4B,oBAAoB;AACvI;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,SAAS;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzIoC;AACpC;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,kBAAkB;AAClB,oCAAoC,WAAW,IAAI,WAAW;AAC9D;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;AACA;AACA;AACA,OAAO,kBAAkB;AACzB,OAAO,qBAAqB;AAC5B;AACA;AACA;AACA;AACA,yDAAyD,mBAAmB,KAAK;AACjF;AACA;AACA;AACA;AACA;AACA,cAAc,mBAAmB;AACjC;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,iEAAiE,mBAAmB,KAAK;AACzF;AACA;AACA;AACA;AACA;AACA,cAAc,mBAAmB;AACjC;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,YAAY,aAAa;AACzB,YAAY,UAAU;AACtB;AACA,sDAAsD,uCAAuC,KAAK;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,+BAA+B;AAC7C;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,0BAA0B;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,IAAI;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,GAAG;AACH,EAAE;AACF,6BAA6B,sEAAsE,IAAI;AACvG;AACA;AACA,yCAAyC,eAAe;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,mBAAmB;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,uDAAuD,mBAAmB;AAC1E;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,6CAA6C,eAAe;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;;AC5X+C;AACU;AAC1C;AACf;AACA;AACA;AACA,0BAA0B,WAAW;AACrC;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,aAAa;AACzB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH,4CAA4C,8BAA8B;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH,4CAA4C,oCAAoC;AAChF;AACA;AACA;AACA,kDAAkD,oCAAoC;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,GAAG;AACf,YAAY,GAAG;AACf;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,QAAQ,qDAAqD;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,OAAO;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,QAAQ,qDAAqD;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,YAAY,GAAG;AACf,YAAY,GAAG;AACf;AACA;AACA;AACA;AACA;AACA,QAAQ,qDAAqD;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,QAAQ,sDAAsD;AAC9D;AACA;AACA,IAAI;AACJ;AACA,GAAG;AACH;AACA;AACA;AACA,QAAQ,+EAA+E;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,QAAQ,sDAAsD;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,QAAQ,uCAAuC;AAC/C;AACA,QAAQ,+EAA+E;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,KAAK;AACL;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,MAAM;AACN,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,KAAK;AACL;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,KAAK;AACL;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChuBoC;AACpC;AACe;AACf;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA,sDAAsD,sBAAsB;AAC5E;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,mBAAmB;AAClC;AACA;AACA;AACA,eAAe,oBAAoB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,uBAAuB,IAAI;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,uBAAuB,IAAI;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA,mFAAmF,IAAI,0BAA0B;AACjH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,qCAAqC,IAAI;AACzC,oCAAoC,IAAI;AACxC;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,sEAAsE,IAAI,0BAA0B;AACpG;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,iBAAiB,GAAG;AACpB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,mBAAmB,IAAI;AACvB;AACA;AACA;AACA;AACA;AACA,eAAe,IAAI;AACnB;AACA;AACA;AACA;AACA,eAAe,aAAa;AAC5B,eAAe,QAAQ;AACvB,iBAAiB;AACjB;AACA,0BAA0B,eAAe,IAAI;AAC7C,mBAAmB,IAAI;AACvB;AACA;AACA;AACA;AACA;AACA,uBAAuB,IAAI;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,aAAa;AAC5B,eAAe,QAAQ;AACvB,iBAAiB;AACjB;AACA,0BAA0B,eAAe,IAAI;AAC7C,mBAAmB,IAAI;AACvB;AACA;AACA;AACA;AACA,uBAAuB,IAAI;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,IAAI;AACnB;AACA;AACA;;ACtL+C;AACX;AACqB;AACzD;AACA;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,gBAAgB;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,QAAQ,gBAAgB,4CAA4C,mBAAmB;AACvF;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,wBAAwB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,cAAc;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,iHAAiH;AAClI;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1QyD;AACV;AAChC,qBAAqB,gBAAgB;AACpD;AACA,0BAA0B,WAAW;AACrC;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,sBAAsB;AAChD;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,sBAAsB;AAC5B;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,gDAAgD,sBAAsB;AACtE;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,uBAAuB,IAAI;AAClD;AACA;AACA;AACA;;;ACjEA;AACe;AACf;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,GAAG;AACL;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,eAAe;AAC9D;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,4CAA4C;AACnD;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,sCAAsC;AAC7C;AACA;AACA,OAAO,mDAAmD;AAC1D;AACA,OAAO,sCAAsC;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,sCAAsC,gBAAgB,IAAI,gBAAgB,IAAI,gBAAgB;AAC9F;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,MAAM;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,0BAA0B;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,0BAA0B;AAC/F;AACA;AACA,KAAK;AACL;AACA,gCAAgC;AAChC;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,QAAQ;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,EAAE,IAAI,EAAE,IAAI,EAAE;AAChE;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,QAAQ,kBAAkB;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,8CAA8C;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B,+CAA+C,0BAA0B;AACzE;AACA;AACA;AACA,MAAM;AACN;AACA,IAAI;AACJ;AACA,IAAI,KAAK;AACT;AACA;AACA;AACA,+BAA+B,QAAQ,IAAI,QAAQ,IAAI,QAAQ,IAAI,QAAQ;AAC3E;AACA;AACA;AACA,uDAAuD,0BAA0B;AACjF;AACA;AACA;AACA,uCAAuC,gBAAgB,IAAI,gBAAgB,IAAI,gBAAgB;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,iGAAiG,gBAAgB,IAAI,gBAAgB,IAAI,gBAAgB;AACzJ;AACA;AACA,kEAAkE,0BAA0B;AAC5F;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS,MAAM;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,2BAA2B;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF,EAAE,IAAI,EAAE,IAAI,EAAE;AACrG,IAAI;AACJ,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,uBAAuB;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B,+CAA+C,0BAA0B;AACzE;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sFAAsF,gBAAgB,IAAI,gBAAgB,IAAI,gBAAgB;AAC9I;AACA;AACA;AACA,IAAI;AACJ,iGAAiG,gBAAgB,IAAI,gBAAgB,IAAI,gBAAgB;AACzJ;AACA;AACA;AACA;AACA,kEAAkE,0BAA0B;AAC5F;AACA,wDAAwD,0BAA0B;AAClF;AACA;AACA,uDAAuD,0BAA0B;AACjF;AACA;AACA;AACA,8BAA8B,yDAAyD;AACvF;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS,MAAM;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,0BAA0B;AAC/E;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,6GAA6G,gBAAgB,IAAI,gBAAgB,IAAI,gBAAgB;AACrK,aAAa;AACb;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,QAAQ,KAAK;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,QAAQ,kBAAkB;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,uBAAuB;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,iGAAiG,gBAAgB,IAAI,gBAAgB,IAAI,gBAAgB;AACzJ;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,cAAc;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,YAAY,aAAa;AACzB,YAAY,QAAQ;AACpB,YAAY,eAAe;AAC3B;AACA;AACA;AACA;AACA;AACA,wCAAwC,gBAAgB,IAAI,gBAAgB,IAAI,gBAAgB;AAChG;AACA,GAAG;AACH;AACA;AACA,8BAA8B,gBAAgB,IAAI,gBAAgB,IAAI,gBAAgB;AACtF;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,8BAA8B,gBAAgB,IAAI,gBAAgB,IAAI,gBAAgB;AACtF;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,8BAA8B,gBAAgB,IAAI,gBAAgB,IAAI,gBAAgB;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ,IAAI,QAAQ,IAAI,QAAQ,IAAI,QAAQ;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,aAAa,gBAAgB;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxhCyD;AACV;AACL;AAC1C;AACe,oBAAoB,gBAAgB;AACnD,0BAA0B,WAAW;AACrC;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,sBAAsB;AAChD;AACA,SAAS;AACT;AACA,qBAAqB,OAAO;AAC5B,8BAA8B,OAAO;AACrC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,+BAA+B;AACvF;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,MAAM,sBAAsB;AAC5B;AACA;AACA;AACA,gDAAgD,sBAAsB;AACtE;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,kBAAkB;AAC/C;AACA;AACA;;ACxFyD;AACV;AACL;AAC1C;AACe,yBAAyB,gBAAgB;AACxD,0BAA0B,WAAW;AACrC;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,sBAAsB;AAChD;AACA,SAAS;AACT;AACA,qBAAqB,OAAO;AAC5B,8BAA8B,OAAO;AACrC;AACA,gBAAgB,OAAO;AACvB,SAAS;AACT;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,+BAA+B;AACvF;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,MAAM,sBAAsB;AAC5B;AACA;AACA;AACA,gDAAgD,sBAAsB;AACtE;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,kBAAkB;AACzD;AACA;AACA;AACA;AACA;;AC7FyD;AACV;AACL;AAC1C;AACe,4BAA4B,gBAAgB;AAC3D;AACA,0BAA0B,WAAW;AACrC;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,sBAAsB;AAChD;AACA,SAAS;AACT;AACA,qBAAqB,OAAO;AAC5B,8BAA8B,OAAO;AACrC;AACA,gBAAgB,OAAO;AACvB,SAAS;AACT;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,+BAA+B;AACvF;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,MAAM,sBAAsB;AAC5B;AACA;AACA;AACA;AACA;AACA,gDAAgD,sBAAsB;AACtE;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,kBAAkB;AACrE;AACA;AACA;;AC3FyD;AACV;AACL;AAC1C;AACe,wBAAwB,gBAAgB;AACvD,0BAA0B,WAAW;AACrC;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,sBAAsB;AAChD;AACA,SAAS;AACT;AACA,qBAAqB,OAAO;AAC5B,8BAA8B,OAAO;AACrC;AACA,gBAAgB,OAAO;AACvB,SAAS;AACT;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,+BAA+B;AACvF;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,MAAM,sBAAsB;AAC5B;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,gDAAgD,sBAAsB;AACtE;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,uBAAuB,IAAI;AAClD;AACA;AACA;AACA;AACA,8CAA8C,kBAAkB;AAChE,mEAAmE,kBAAkB,UAAU,kBAAkB;AACjH,kDAAkD,kBAAkB;AACpE;AACA;AACA;;AC9Fe;AACf;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,eAAe;AAC9D;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,sBAAsB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxLyD;AACV;AACQ;AACvD;AACe,yBAAyB,gBAAgB;AACxD,6BAA6B,WAAW;AACxC;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,aAAa;AAC9C;AACA;AACA;AACA,0BAA0B,sBAAsB;AAChD;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,GAAG;AACH;AACA,oEAAoE,+BAA+B;AACnG;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,eAAe,sBAAsB;AACrC;AACA;AACA;AACA,gDAAgD,sBAAsB;AACtE;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACrHyD;AACV;AAC/C;AACe,oBAAoB,gBAAgB;AACnD;AACA;AACA,0BAA0B,WAAW;AACrC;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,sBAAsB;AAChD;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,sBAAsB;AAC5B;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,sBAAsB;AACtE;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,eAAe,gBAAgB,0CAA0C;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5FyD;AACV;AAC/C;AACe,2BAA2B,gBAAgB;AAC1D;AACA;AACA,0BAA0B,WAAW;AACrC;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,sBAAsB;AAChD;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,sBAAsB;AAC5B;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM,+BAA+B;AACrC;AACA;AACA;AACA;AACA;AACA,gDAAgD,sBAAsB;AACtE;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,eAAe,gBAAgB,0CAA0C;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChHyD;AACV;AAC/C;AACe,0BAA0B,gBAAgB;AACzD;AACA;AACA,0BAA0B,WAAW;AACrC;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,sBAAsB;AAChD;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,sBAAsB;AAC5B;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,MAAM,+BAA+B;AACrC;AACA;AACA;AACA,gDAAgD,sBAAsB;AACtE;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,eAAe,gBAAgB,0CAA0C;AACxG;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/Fe;AACf;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,eAAe;AAC9D;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpHyD;AACV;AACJ;AAC3C;AACe,mBAAmB,gBAAgB;AAClD,6BAA6B,WAAW;AACxC;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,OAAO;AAClC;AACA;AACA;AACA,0BAA0B,sBAAsB;AAChD;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,wDAAwD,+BAA+B;AACvF;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,MAAM,sBAAsB;AAC5B;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,gDAAgD,sBAAsB;AACtE;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,eAAe,gBAAgB,0CAA0C;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxHe;AACf;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mFAAmF,4BAA4B;AAC/G;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,eAAe;AAC9D;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,UAAU;AACnE;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,oBAAoB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjPyD;AACV;AACI;AACnD;AACe,uBAAuB,gBAAgB;AACtD,6BAA6B,WAAW;AACxC;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,sBAAsB;AAChD;AACA,SAAS;AACT;AACA,yBAAyB,WAAW,EAAE,cAAc;AACpD;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,GAAG;AACH;AACA,gEAAgE,+BAA+B;AAC/F;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,MAAM,sBAAsB;AAC5B;AACA;AACA;AACA,gDAAgD,sBAAsB;AACtE;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACpGyD;AACV;AAChC,qBAAqB,gBAAgB;AACpD;AACA,0BAA0B,WAAW;AACrC;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,sBAAsB;AAChD;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,sBAAsB;AAC5B;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,gDAAgD,sBAAsB;AACtE;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACrEA;AACe;AACf;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E;AAC7E;AACA;AACA;AACA,4CAA4C;AAC5C,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C,4CAA4C;AAC5C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,+CAA+C,eAAe;AAC9D;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qJAAqJ;AACrJ;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,sIAAsI;AACtI;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,oNAAoN;AACpN;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,eAAe,kBAAkB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA,eAAe,kBAAkB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB,cAAc;AACnC,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,yBAAyB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,oBAAoB;AACzC,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACreA;AACyD;AACV;AACH;AAC7B,oBAAoB,gBAAgB;AACnD;AACA,0BAA0B,WAAW;AACrC;AACA,0BAA0B,QAAQ;AAClC;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,sBAAsB;AAChD;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA,eAAe,sBAAsB;AACrC;AACA;AACA,eAAe,sBAAsB;AACrC;AACA;AACA;AACA;AACA;AACA,eAAe,sBAAsB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,sBAAsB;AACrC;AACA;AACA;AACA;AACA;AACA,eAAe,sBAAsB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,sBAAsB;AACtE;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,eAAe,gBAAgB,0CAA0C;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,sDAAsD,kBAAkB;AACxE;AACA;AACA,4BAA4B,eAAe;AAC3C;AACA;AACA,2CAA2C,gCAAgC;AAC3E;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,8BAA8B,uBAAuB;AACrD,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa,EAAE;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,8CAA8C,sDAAsD;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,2BAA2B;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,gCAAgC;AACzD;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,eAAe,kBAAkB;AACjC,eAAe,gBAAgB;AAC/B,iBAAiB;AACjB;AACA;AACA;AACA,0BAA0B,uBAAuB;AACjD,SAAS;AACT;AACA;AACA,2EAA2E;AAC3E;AACA;AACA,aAAa,cAAc;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,oBAAoB;AACpB,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;;AChWyD;AACzD;AACe;AACf;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E;AAC7E;AACA;AACA;AACA,4CAA4C;AAC5C,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C,4CAA4C;AAC5C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,+CAA+C,eAAe;AAC9D;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qJAAqJ;AACrJ;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,sIAAsI;AACtI;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,oNAAoN;AACpN;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,eAAe,kBAAkB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA,eAAe,kBAAkB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,cAAc;AACnC,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,yBAAyB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,oBAAoB;AACzC,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjdA;AACyD;AACV;AACH;AAC7B,oBAAoB,gBAAgB;AACnD;AACA,0BAA0B,WAAW;AACrC;AACA,0BAA0B,QAAQ;AAClC;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,sBAAsB;AAChD;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA,eAAe,sBAAsB;AACrC;AACA;AACA,eAAe,sBAAsB;AACrC;AACA;AACA;AACA;AACA,eAAe,sBAAsB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,sBAAsB;AACrC;AACA;AACA;AACA;AACA;AACA,eAAe,sBAAsB;AACrC;AACA;AACA;AACA;AACA;AACA,sDAAsD,sBAAsB;AAC5E;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,yBAAyB,eAAe,gBAAgB,0CAA0C;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,sDAAsD,kBAAkB;AACxE;AACA;AACA,4BAA4B,eAAe;AAC3C;AACA;AACA,2CAA2C,gCAAgC;AAC3E;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,8BAA8B,uBAAuB;AACrD,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,oEAAoE;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,8CAA8C,sDAAsD;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,2BAA2B;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,gCAAgC;AACzD;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,eAAe,kBAAkB;AACjC,eAAe,gBAAgB;AAC/B,iBAAiB;AACjB;AACA;AACA;AACA,2BAA2B,uBAAuB;AAClD,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa,cAAc;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,oBAAoB;AACpB,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;;ACnWA;AACyD;AACV;AAC/C;AACe,wBAAwB,gBAAgB;AACvD;AACA,0BAA0B,WAAW;AACrC;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,sBAAsB;AAChD;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA,eAAe,sBAAsB;AACrC;AACA;AACA,eAAe,sBAAsB;AACrC;AACA;AACA;AACA;AACA;AACA,eAAe,sBAAsB;AACrC;AACA;AACA;AACA;AACA;AACA,eAAe,sBAAsB,+BAA+B,sBAAsB;AAC1F;AACA;AACA;AACA;AACA;AACA,eAAe,sBAAsB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,sBAAsB;AACrC;AACA;AACA;AACA;AACA;AACA,eAAe,sBAAsB;AACrC;AACA;AACA;AACA;AACA,gDAAgD,sBAAsB;AACtE;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,6BAA6B,eAAe,gBAAgB,0CAA0C;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,kBAAkB;AACxE;AACA;AACA,4BAA4B,eAAe;AAC3C;AACA;AACA,2CAA2C,gCAAgC;AAC3E;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,8BAA8B,2BAA2B;AACzD,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa,EAAE;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,6CAA6C,4CAA4C;AACzF;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,8CAA8C,sDAAsD;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,6CAA6C;AAC1F;AACA;AACA;AACA,iBAAiB,2BAA2B;AAC5C;AACA,8BAA8B,2BAA2B;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA,aAAa;AACb;AACA,8BAA8B,2BAA2B;AACzD;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,gCAAgC;AACzD;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,eAAe,mBAAmB;AAClC,eAAe,gBAAgB;AAC/B;AACA;AACA;AACA;AACA,0BAA0B,2BAA2B;AACrD,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,cAAc;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,oBAAoB;AACpB,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC/ayD;AACV;AAC/C;AACe,mBAAmB,gBAAgB;AAClD;AACA;AACA,0BAA0B,WAAW;AACrC;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,sBAAsB;AAChD;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,sBAAsB;AACrC;AACA,eAAe,sBAAsB;AACrC;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,sBAAsB;AACtE;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,eAAe,gBAAgB,0CAA0C;AACjG;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxHe;AACf;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mFAAmF,4BAA4B;AAC/G;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,eAAe;AACxD;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,0CAA0C,yBAAyB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,qBAAqB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrLyD;AACV;AACM;AACrD;AACe,wBAAwB,gBAAgB;AACvD,0BAA0B,WAAW;AACrC;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,sBAAsB;AAChD;AACA,kBAAkB,uBAAuB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,0BAA0B,YAAY;AACtC;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,+BAA+B;AACjG;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,sBAAsB;AAC5B;AACA,MAAM,sBAAsB;AAC5B;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,MAAM,+BAA+B,2BAA2B,mCAAmC;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,+BAA+B,2BAA2B,mCAAmC;AACnG;AACA;AACA,MAAM,+BAA+B,2BAA2B,mCAAmC;AACnG;AACA;AACA;AACA;AACA,MAAM,8BAA8B;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,sBAAsB;AACtE;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,gBAAgB,mCAAmC;AACnD;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA,uBAAuB,mCAAmC;AAC1D,uBAAuB,eAAe;AACtC;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,qCAAqC,mCAAmC;AACxE,mCAAmC,mCAAmC;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,IAAI;AACJ,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,sDAAsD,mCAAmC;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,8BAA8B,mBAAmB;AACjD;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,gCAAgC,qBAAqB,uBAAuB,4BAA4B;AACxG;AACA,MAAM;AACN;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,mCAAmC,mCAAmC;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,+BAA+B;AAC9F;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AChUmC;AACmB;AACN;AAChD;AACmC;AACF;AACU;AACM;AACR;AACE;AACV;AACc;AACF;AACd;AACQ;AACJ;AACF;AACA;AACQ;AACV;AACU;AACzC;AACe,6BAA6B,eAAe;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,IAAI,0FAA0F;AAC9F;AACA;AACA,GAAG;AACH,EAAE;AACF;AACA;AACA,GAAG,MAAM;AACT,GAAG,KAAK;AACR,GAAG,UAAU;AACb,GAAG,aAAa;AAChB,GAAG,SAAS;AACZ,GAAG,UAAU;AACb,GAAG,KAAK;AACR,GAAG,YAAY;AACf,GAAG,WAAW;AACd,GAAG,IAAI;AACP,GAAG,QAAQ;AACX,GAAG,MAAM;AACT,GAAG,KAAK;AACR,GAAG,KAAK;AACR,GAAG,SAAS;AACZ,GAAG,IAAI;AACP,GAAG,SAAS;AACZ;AACA,GAAG,uBAAuB;AAC1B;AACA;AACA;AACA,GAAG,eAAe;AAClB;AACA;AACA;AACA;AACA,8BAA8B,IAAI;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,UAAU;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA,8IAA8I,8CAA8C;AAC5L;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,mJAAmJ,yCAAyC;AAC5L;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,IAAI;AACd;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,IAAI;AACzC;AACA,aAAa,IAAI;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN;AACA;AACA,MAAM;AACN,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA,GAAG;AACH;AACA;AACA;AACA,0BAA0B,WAAW;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,mBAAmB,IAAI;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,mBAAmB;AAC7B;AACA;AACA;AACA;AACA,QAAQ,IAAI;AACZ;AACA;AACA,QAAQ,IAAI;AACZ;AACA;AACA,GAAG;AACH;AACA;AACA,4BAA4B,WAAW;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,iCAAiC,sDAAsD;AACvF;AACA;AACA,GAAG;AACH;AACA;AACA,6BAA6B,oCAAoC;AACjE;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,OAAO,oCAAoC;AAC3C;AACA;AACA;AACA;AACA,GAAG;AACH,uCAAuC,mBAAmB;AAC1D;AACA;AACA;AACA;AACA;AACA,QAAQ,IAAI;AACZ;AACA;AACA,QAAQ,IAAI;AACZ;AACA;AACA,GAAG;AACH;AACA;AACA,sCAAsC,8BAA8B;AACpE;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,UAAU,mBAAmB;AAC7B;AACA,QAAQ,IAAI;AACZ;AACA;AACA,QAAQ,IAAI;AACZ;AACA;AACA,QAAQ,qDAAqD;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,6CAA6C,6BAA6B,IAAI;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,cAAc;AAChD,KAAK;AACL,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA,sBAAsB,cAAc;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,+BAA+B,6BAA6B,+BAA+B,IAAI;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,8BAA8B;AACtE;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,mBAAmB,8BAA8B;AACjD;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,MAAM;AACN,qBAAqB,IAAI;AACzB;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,8BAA8B;AAC/E;AACA,OAAO;AACP;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,IAAI;AACb;AACA;AACA;AACA;AACA;AACA;;;ACrgBA;AACA,uDAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA,uCAAuC,4BAA4B;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,YAAY;AAC/D;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AChED,kDAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,iCAAiC,4BAA4B;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,OAAO;AAChD;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,qCAAqC,0BAA0B;AAC/D;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzEA,6CAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,2DAA2D,iBAAiB;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,IAAI;AACR;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,IAAI,IAAI;AACR,GAAG;AACH;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,OAAO,qBAAqB;AAC5B;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;;AC7Fe;AACf;AACA;AACA;AACA;AACA,2CAA2C;AAC3C,oCAAoC;AACpC,cAAc,QAAQ;AACtB;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,iGAAiG;AACjG,iHAAiH;AACjH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,QAAQ;AACR;AACA,MAAM;AACN;AACA,IAAI;AACJ;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClKO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK,sBAAsB;AAC3B;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,8CAA8C,SAAS,OAAO;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,yEAAyE,EAAE;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,OAAO,SAAS,GAAG,aAAa;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,QAAQ,YAAY;AACpB;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,GAAG;AACH;AACA;;AC3G4D;AACX;AACF;AACU;AACM;AACR;AACE;AACV;AACc;AACF;AACd;AACQ;AACJ;AACF;AACA;AACS;AACX;AACU;AACvD;AACmE;AACf;AAChB;AACoB;AACkB;AAC1E;AACiE;AACJ;AAC7D;AACA,8BAA8B,cAAc;AAC5C;AACA;AACA;AACA;AACA,QAAQ,MAAM;AACd,QAAQ,KAAK;AACb,QAAQ,UAAU;AAClB,QAAQ,aAAa;AACrB,QAAQ,SAAS;AACjB,QAAQ,UAAU;AAClB,QAAQ,KAAK;AACb,QAAQ,YAAY;AACpB,QAAQ,WAAW;AACnB,QAAQ,IAAI;AACZ,QAAQ,QAAQ;AAChB,QAAQ,MAAM;AACd,QAAQ,KAAK;AACb,QAAQ,KAAK;AACb,QAAQ,SAAS;AACjB,QAAQ,IAAI;AACZ,QAAQ,SAAS;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D;AAC5D;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG,IAAI;AACP,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA,oCAAoC,eAAe,EAAE,gDAAgD;AACrG,wEAAwE,sBAAsB;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kHAAkH;AAClH;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,0BAA0B;AACvD;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,iHAAiH;AACtJ;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA,+BAA+B;AAC/B;AACA,qBAAqB;AACrB,iBAAiB;AACjB,6EAA6E;AAC7E,kFAAkF,eAAe;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA,QAAQ,kBAAkB;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA,gBAAgB,MAAM;AACtB,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA,GAAG,MAAM;AACT,GAAG;AACH;AACA;AACA,YAAY,MAAM;AAClB,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,iCAAiC,MAAM;AACvC;AACA;AACA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,kBAAkB;AACrD,4BAA4B,WAAW;AACvC,iCAAiC,gBAAgB;AACjD;AACA;AACA;AACA;AACA;AACA,qBAAqB,gCAAgC;AACrD;AACA;AACA;AACA;AACA,wCAAwC,cAAc;AACtD,qBAAqB;AACrB,wCAAwC,cAAc;AACtD,qBAAqB;AACrB,wCAAwC,cAAc;AACtD;AACA;AACA,iBAAiB,wBAAwB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,KAAK;AACxC,oCAAoC,KAAK;AACzC,oCAAoC,SAAS;AAC7C;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,KAAK;AACxC;AACA,iBAAiB,wBAAwB,KAAK;AAC9C;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,yBAAyB,oDAAoD,QAAQ,MAAM;AAC3F,yCAAyC,WAAW,QAAQ,GAAG,gBAAgB,aAAa,GAAG,KAAK,GAAG,cAAc,yBAAyB;AAC9I,yCAAyC,gBAAgB,iFAAiF,4CAA4C;AACtL;AACA;AACA;AACA;AACA,6BAA6B,qBAAqB;AAClD;AACA;AACA;AACA;AACA,4BAA4B,gBAAgB;AAC5C,uCAAuC,gBAAgB,kDAAkD,gBAAgB;AACzH;AACA,6BAA6B;AAC7B,4BAA4B,gBAAgB;AAC5C,uCAAuC,gBAAgB,kDAAkD,gBAAgB;AACzH;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,6BAA6B;AAC7B,4CAA4C,gBAAgB;AAC5D;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,yCAAyC,WAAW,QAAQ,GAAG,gBAAgB,aAAa,GAAG,wBAAwB,GAAG,cAAc,yBAAyB;AACjK;AACA,oBAAoB,gBAAgB,iFAAiF,+BAA+B;AACpJ;AACA;AACA;AACA;AACA,6BAA6B,qBAAqB;AAClD;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,qBAAqB,MAAM;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,yBAAyB,gBAAgB;AACzC,oBAAoB,WAAW;AAC/B,4BAA4B,kBAAkB;AAC9C,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,gBAAgB,gBAAgB,WAAW,WAAW,kBAAkB,qBAAqB;AAC3I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACniBA;AACA,sDAAe;AACf;AACA;AACA;AACA;AACA;AACA,QAAQ,SAAS;AACjB,UAAU,sFAAsF;AAChG;AACA;AACA;AACA,UAAU,yFAAyF,wDAAwD,+KAA+K,yEAAyE,EAAE,4EAA4E;AACje;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,GAAG;AACH;AACA;AACA,kCAAkC,eAAe;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AC3CD;AACA;AACA;AACA;AACA;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,cAAc;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA,iEAAiE;AACjE;AACA;AACA;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,GAAG;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB;AACA;AACA,gFAAgF,4BAA4B;AAC5G;AACA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,sCAAsC,EAAE;AACxC;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,QAAQ;AACpB;AACA,sBAAsB,oBAAoB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,GAAG;AACP;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;AACA,6EAA6E,iDAAiD;AAC9H;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,QAAQ;AACpB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,YAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,YAAY,QAAQ;AACpB;AACA;AACA,sBAAsB,0FAA0F;AAChH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,YAAY,QAAQ;AACpB;AACA,UAAU,0DAA0D,IAAI;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,aAAa,WAAW;AACxB,cAAc,SAAS;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AClaA;AACA;AACA;AACuE;AACvE,eAAe,KAAK;AACpB;AACyE;AACzE;AAC2F;AAC3F;AACmD;AACY;AACG;AAClE;AAC+C;AACA;AACQ;AACvD;AACgE;AACJ;AACJ;AACxD;AACqC;AACrC;AACA;AACA;AACA,8BAA8B,gBAAgB;AAC9C;AACA;AACA;AACA,uCAAuC,cAAc;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,KAAK;AACrC;AACA,GAAG,mCAAmC,KAAK;AAC3C;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,aAAa,kBAAkB;AAC/B,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO,EAAE;AACT,MAAM;AACN;AACA;AACA,MAAM;AACN,KAAK;AACL;AACA;AACA,MAAM;AACN,KAAK;AACL,IAAI;AACJ,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,sBAAsB,EAAE,MAAM;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,KAAK,EAAE,SAAS;AACzC;AACA;AACA;AACA,MAAM;AACN;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,wBAAwB,WAAW,QAAQ,GAAG,gBAAgB,aAAa,GAAG,kCAAkC,GAAG,cAAc,yBAAyB;AAC1J,GAAG,gBAAgB,iFAAiF,uDAAuD;AAC3J;AACA;AACA;AACA;AACA,SAAS,qBAAqB;AAC9B;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK,gBAAgB;AACrB,aAAa,gBAAgB,kDAAkD,gBAAgB;AAC/F;AACA,MAAM;AACN,KAAK,gBAAgB;AACrB,aAAa,gBAAgB,kDAAkD,gBAAgB;AAC/F;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,aAAa;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,SAAS;AACT;AACA;AACA;AACA,yCAAyC,wCAAwC;AACjF;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,uCAAuC,wCAAwC;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,WAAW;AAC3B,qBAAqB,gBAAgB;AACrC,QAAQ;AACR;AACA,QAAQ;AACR,OAAO;AACP,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,MAAM;AACN;AACA,KAAK;AACL,IAAI;AACJ;AACA,GAAG;AACH;AACA;AACA;AACA,CAAC,KAAK;AACN,CAAC,KAAK;AACN,CAAC,SAAS;AACV,CAAC;AACD;AACA;AACA;AACA,OAAO,wBAAwB;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,EAAE;AACF,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA,OAAO,0BAA0B;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA,GAAG;AACH,EAAE;AACF,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;AACF;AACA;AACA,YAAY,iBAAiB;AAC7B;AACA,QAAQ,iBAAiB;AACzB,QAAQ,iBAAiB;AACzB;AACA;AACA,YAAY,kBAAkB;AAC9B,SAAS;AACT;AACA,2CAA2C,YAAY;AACvD,EAAE;AACF,CAAC","sources":["webpack://mobile/webpack/bootstrap","webpack://mobile/webpack/runtime/define property getters","webpack://mobile/webpack/runtime/hasOwnProperty shorthand","webpack://mobile/webpack/runtime/make namespace object","webpack://mobile/./node_modules/axios/lib/helpers/bind.js","webpack://mobile/./node_modules/axios/lib/utils.js","webpack://mobile/./node_modules/axios/lib/core/AxiosError.js","webpack://mobile/./node_modules/axios/lib/helpers/null.js","webpack://mobile/./node_modules/axios/lib/helpers/toFormData.js","webpack://mobile/./node_modules/axios/lib/helpers/AxiosURLSearchParams.js","webpack://mobile/./node_modules/axios/lib/helpers/buildURL.js","webpack://mobile/./node_modules/axios/lib/core/InterceptorManager.js","webpack://mobile/./node_modules/axios/lib/defaults/transitional.js","webpack://mobile/./node_modules/axios/lib/platform/browser/classes/URLSearchParams.js","webpack://mobile/./node_modules/axios/lib/platform/browser/classes/FormData.js","webpack://mobile/./node_modules/axios/lib/platform/browser/classes/Blob.js","webpack://mobile/./node_modules/axios/lib/platform/browser/index.js","webpack://mobile/./node_modules/axios/lib/platform/common/utils.js","webpack://mobile/./node_modules/axios/lib/platform/index.js","webpack://mobile/./node_modules/axios/lib/helpers/toURLEncodedForm.js","webpack://mobile/./node_modules/axios/lib/helpers/formDataToJSON.js","webpack://mobile/./node_modules/axios/lib/defaults/index.js","webpack://mobile/./node_modules/axios/lib/helpers/parseHeaders.js","webpack://mobile/./node_modules/axios/lib/core/AxiosHeaders.js","webpack://mobile/./node_modules/axios/lib/core/transformData.js","webpack://mobile/./node_modules/axios/lib/cancel/isCancel.js","webpack://mobile/./node_modules/axios/lib/cancel/CanceledError.js","webpack://mobile/./node_modules/axios/lib/core/settle.js","webpack://mobile/./node_modules/axios/lib/helpers/cookies.js","webpack://mobile/./node_modules/axios/lib/helpers/isAbsoluteURL.js","webpack://mobile/./node_modules/axios/lib/helpers/combineURLs.js","webpack://mobile/./node_modules/axios/lib/core/buildFullPath.js","webpack://mobile/./node_modules/axios/lib/helpers/isURLSameOrigin.js","webpack://mobile/./node_modules/axios/lib/helpers/parseProtocol.js","webpack://mobile/./node_modules/axios/lib/helpers/speedometer.js","webpack://mobile/./node_modules/axios/lib/adapters/xhr.js","webpack://mobile/./node_modules/axios/lib/adapters/adapters.js","webpack://mobile/./node_modules/axios/lib/core/dispatchRequest.js","webpack://mobile/./node_modules/axios/lib/core/mergeConfig.js","webpack://mobile/./node_modules/axios/lib/env/data.js","webpack://mobile/./node_modules/axios/lib/helpers/validator.js","webpack://mobile/./node_modules/axios/lib/core/Axios.js","webpack://mobile/./node_modules/axios/lib/cancel/CancelToken.js","webpack://mobile/./node_modules/axios/lib/helpers/spread.js","webpack://mobile/./node_modules/axios/lib/helpers/isAxiosError.js","webpack://mobile/./node_modules/axios/lib/helpers/HttpStatusCode.js","webpack://mobile/./node_modules/axios/lib/axios.js","webpack://mobile/./browser/window/WindowUtil.js","webpack://mobile/./browser/controller/AccountController.js","webpack://mobile/./browser/controller/ApiS3Controller.js","webpack://mobile/./browser/controller/ChattingController.js","webpack://mobile/./browser/controller/EmoticonController.js","webpack://mobile/./browser/controller/EventStreamController.js","webpack://mobile/./browser/controller/NoticeBoardController.js","webpack://mobile/./browser/controller/RoomController.js","webpack://mobile/./browser/controller/WorkspaceController.js","webpack://mobile/./browser/preload/preload.js","webpack://mobile/./view/js/handler/notice_board/NoticeBoardHandler.js","webpack://mobile/./view/js/handler/editor/module/ToolHandler.js","webpack://mobile/./view/js/handler/editor/module/FreedomInterface.js","webpack://mobile/./view/js/handler/editor/component/Line.js","webpack://mobile/./view/js/handler/editor/module/FreeWiilHandler.js","webpack://mobile/./view/js/handler/editor/fragment/UndoManager.js","webpack://mobile/./view/js/handler/editor/tools/Strong.js","webpack://mobile/./view/js/handler/editor/component/Palette.js","webpack://mobile/./view/js/handler/editor/tools/Color.js","webpack://mobile/./view/js/handler/editor/tools/Background.js","webpack://mobile/./view/js/handler/editor/tools/Strikethrough.js","webpack://mobile/./view/js/handler/editor/tools/Underline.js","webpack://mobile/./view/js/handler/editor/component/FontFamilyBox.js","webpack://mobile/./view/js/handler/editor/tools/FontFamily.js","webpack://mobile/./view/js/handler/editor/tools/Quote.js","webpack://mobile/./view/js/handler/editor/tools/NumericPoint.js","webpack://mobile/./view/js/handler/editor/tools/BulletPoint.js","webpack://mobile/./view/js/handler/editor/component/SortBox.js","webpack://mobile/./view/js/handler/editor/tools/Sort.js","webpack://mobile/./view/js/handler/editor/component/FontSizeBox.js","webpack://mobile/./view/js/handler/editor/tools/FontSize.js","webpack://mobile/./view/js/handler/editor/tools/Italic.js","webpack://mobile/./view/js/handler/editor/component/ImageBox.js","webpack://mobile/./view/js/handler/editor/tools/Image.js","webpack://mobile/./view/js/handler/editor/component/VideoBox.js","webpack://mobile/./view/js/handler/editor/tools/Video.js","webpack://mobile/./view/js/handler/editor/tools/Resources.js","webpack://mobile/./view/js/handler/editor/tools/Code.js","webpack://mobile/./view/js/handler/editor/component/HyperlinkBox.js","webpack://mobile/./view/js/handler/editor/tools/Hyperlink.js","webpack://mobile/./view/js/handler/editor/FreeWillEditor.js","webpack://mobile/./view/js/handler/workspace/WorkspaceHandler.js","webpack://mobile/./view/js/handler/room/RoomHandler.js","webpack://mobile/./view/js/common.js","webpack://mobile/./view/js/handler/PositionChangeer.js","webpack://mobile/./view/js/handler/account/AccountHandler.js","webpack://mobile/./view/js/handler/S3EncryptionUtil.js","webpack://mobile/./view/js/component/notice_board/notice_board_item/NoticeBoardDetail.js","webpack://mobile/./view/js/handler/chatting/ChattingHandler.js","webpack://mobile/./view/js/handler/IndexedDBHandler.js","webpack://mobile/./view/js/renderer/multipleNoticeBoardViewRenderer.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","'use strict';\n\nexport default function bind(fn, thisArg) {\n  return function wrap() {\n    return fn.apply(thisArg, arguments);\n  };\n}\n","'use strict';\n\nimport bind from './helpers/bind.js';\n\n// utils is a library of generic helper functions non-specific to axios\n\nconst {toString} = Object.prototype;\nconst {getPrototypeOf} = Object;\n\nconst kindOf = (cache => thing => {\n    const str = toString.call(thing);\n    return cache[str] || (cache[str] = str.slice(8, -1).toLowerCase());\n})(Object.create(null));\n\nconst kindOfTest = (type) => {\n  type = type.toLowerCase();\n  return (thing) => kindOf(thing) === type\n}\n\nconst typeOfTest = type => thing => typeof thing === type;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n *\n * @returns {boolean} True if value is an Array, otherwise false\n */\nconst {isArray} = Array;\n\n/**\n * Determine if a value is undefined\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nconst isUndefined = typeOfTest('undefined');\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && isFunction(val.constructor.isBuffer) && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nconst isArrayBuffer = kindOfTest('ArrayBuffer');\n\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  let result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (isArrayBuffer(val.buffer));\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a String, otherwise false\n */\nconst isString = typeOfTest('string');\n\n/**\n * Determine if a value is a Function\n *\n * @param {*} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nconst isFunction = typeOfTest('function');\n\n/**\n * Determine if a value is a Number\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Number, otherwise false\n */\nconst isNumber = typeOfTest('number');\n\n/**\n * Determine if a value is an Object\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an Object, otherwise false\n */\nconst isObject = (thing) => thing !== null && typeof thing === 'object';\n\n/**\n * Determine if a value is a Boolean\n *\n * @param {*} thing The value to test\n * @returns {boolean} True if value is a Boolean, otherwise false\n */\nconst isBoolean = thing => thing === true || thing === false;\n\n/**\n * Determine if a value is a plain Object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a plain Object, otherwise false\n */\nconst isPlainObject = (val) => {\n  if (kindOf(val) !== 'object') {\n    return false;\n  }\n\n  const prototype = getPrototypeOf(val);\n  return (prototype === null || prototype === Object.prototype || Object.getPrototypeOf(prototype) === null) && !(Symbol.toStringTag in val) && !(Symbol.iterator in val);\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Date, otherwise false\n */\nconst isDate = kindOfTest('Date');\n\n/**\n * Determine if a value is a File\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFile = kindOfTest('File');\n\n/**\n * Determine if a value is a Blob\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nconst isBlob = kindOfTest('Blob');\n\n/**\n * Determine if a value is a FileList\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFileList = kindOfTest('FileList');\n\n/**\n * Determine if a value is a Stream\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nconst isStream = (val) => isObject(val) && isFunction(val.pipe);\n\n/**\n * Determine if a value is a FormData\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nconst isFormData = (thing) => {\n  let kind;\n  return thing && (\n    (typeof FormData === 'function' && thing instanceof FormData) || (\n      isFunction(thing.append) && (\n        (kind = kindOf(thing)) === 'formdata' ||\n        // detect form-data instance\n        (kind === 'object' && isFunction(thing.toString) && thing.toString() === '[object FormData]')\n      )\n    )\n  )\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nconst isURLSearchParams = kindOfTest('URLSearchParams');\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n *\n * @returns {String} The String freed of excess whitespace\n */\nconst trim = (str) => str.trim ?\n  str.trim() : str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n *\n * @param {Boolean} [allOwnKeys = false]\n * @returns {any}\n */\nfunction forEach(obj, fn, {allOwnKeys = false} = {}) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  let i;\n  let l;\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    const keys = allOwnKeys ? Object.getOwnPropertyNames(obj) : Object.keys(obj);\n    const len = keys.length;\n    let key;\n\n    for (i = 0; i < len; i++) {\n      key = keys[i];\n      fn.call(null, obj[key], key, obj);\n    }\n  }\n}\n\nfunction findKey(obj, key) {\n  key = key.toLowerCase();\n  const keys = Object.keys(obj);\n  let i = keys.length;\n  let _key;\n  while (i-- > 0) {\n    _key = keys[i];\n    if (key === _key.toLowerCase()) {\n      return _key;\n    }\n  }\n  return null;\n}\n\nconst _global = (() => {\n  /*eslint no-undef:0*/\n  if (typeof globalThis !== \"undefined\") return globalThis;\n  return typeof self !== \"undefined\" ? self : (typeof window !== 'undefined' ? window : global)\n})();\n\nconst isContextDefined = (context) => !isUndefined(context) && context !== _global;\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n *\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  const {caseless} = isContextDefined(this) && this || {};\n  const result = {};\n  const assignValue = (val, key) => {\n    const targetKey = caseless && findKey(result, key) || key;\n    if (isPlainObject(result[targetKey]) && isPlainObject(val)) {\n      result[targetKey] = merge(result[targetKey], val);\n    } else if (isPlainObject(val)) {\n      result[targetKey] = merge({}, val);\n    } else if (isArray(val)) {\n      result[targetKey] = val.slice();\n    } else {\n      result[targetKey] = val;\n    }\n  }\n\n  for (let i = 0, l = arguments.length; i < l; i++) {\n    arguments[i] && forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n *\n * @param {Boolean} [allOwnKeys]\n * @returns {Object} The resulting value of object a\n */\nconst extend = (a, b, thisArg, {allOwnKeys}= {}) => {\n  forEach(b, (val, key) => {\n    if (thisArg && isFunction(val)) {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  }, {allOwnKeys});\n  return a;\n}\n\n/**\n * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n *\n * @param {string} content with BOM\n *\n * @returns {string} content value without BOM\n */\nconst stripBOM = (content) => {\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1);\n  }\n  return content;\n}\n\n/**\n * Inherit the prototype methods from one constructor into another\n * @param {function} constructor\n * @param {function} superConstructor\n * @param {object} [props]\n * @param {object} [descriptors]\n *\n * @returns {void}\n */\nconst inherits = (constructor, superConstructor, props, descriptors) => {\n  constructor.prototype = Object.create(superConstructor.prototype, descriptors);\n  constructor.prototype.constructor = constructor;\n  Object.defineProperty(constructor, 'super', {\n    value: superConstructor.prototype\n  });\n  props && Object.assign(constructor.prototype, props);\n}\n\n/**\n * Resolve object with deep prototype chain to a flat object\n * @param {Object} sourceObj source object\n * @param {Object} [destObj]\n * @param {Function|Boolean} [filter]\n * @param {Function} [propFilter]\n *\n * @returns {Object}\n */\nconst toFlatObject = (sourceObj, destObj, filter, propFilter) => {\n  let props;\n  let i;\n  let prop;\n  const merged = {};\n\n  destObj = destObj || {};\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  if (sourceObj == null) return destObj;\n\n  do {\n    props = Object.getOwnPropertyNames(sourceObj);\n    i = props.length;\n    while (i-- > 0) {\n      prop = props[i];\n      if ((!propFilter || propFilter(prop, sourceObj, destObj)) && !merged[prop]) {\n        destObj[prop] = sourceObj[prop];\n        merged[prop] = true;\n      }\n    }\n    sourceObj = filter !== false && getPrototypeOf(sourceObj);\n  } while (sourceObj && (!filter || filter(sourceObj, destObj)) && sourceObj !== Object.prototype);\n\n  return destObj;\n}\n\n/**\n * Determines whether a string ends with the characters of a specified string\n *\n * @param {String} str\n * @param {String} searchString\n * @param {Number} [position= 0]\n *\n * @returns {boolean}\n */\nconst endsWith = (str, searchString, position) => {\n  str = String(str);\n  if (position === undefined || position > str.length) {\n    position = str.length;\n  }\n  position -= searchString.length;\n  const lastIndex = str.indexOf(searchString, position);\n  return lastIndex !== -1 && lastIndex === position;\n}\n\n\n/**\n * Returns new array from array like object or null if failed\n *\n * @param {*} [thing]\n *\n * @returns {?Array}\n */\nconst toArray = (thing) => {\n  if (!thing) return null;\n  if (isArray(thing)) return thing;\n  let i = thing.length;\n  if (!isNumber(i)) return null;\n  const arr = new Array(i);\n  while (i-- > 0) {\n    arr[i] = thing[i];\n  }\n  return arr;\n}\n\n/**\n * Checking if the Uint8Array exists and if it does, it returns a function that checks if the\n * thing passed in is an instance of Uint8Array\n *\n * @param {TypedArray}\n *\n * @returns {Array}\n */\n// eslint-disable-next-line func-names\nconst isTypedArray = (TypedArray => {\n  // eslint-disable-next-line func-names\n  return thing => {\n    return TypedArray && thing instanceof TypedArray;\n  };\n})(typeof Uint8Array !== 'undefined' && getPrototypeOf(Uint8Array));\n\n/**\n * For each entry in the object, call the function with the key and value.\n *\n * @param {Object<any, any>} obj - The object to iterate over.\n * @param {Function} fn - The function to call for each entry.\n *\n * @returns {void}\n */\nconst forEachEntry = (obj, fn) => {\n  const generator = obj && obj[Symbol.iterator];\n\n  const iterator = generator.call(obj);\n\n  let result;\n\n  while ((result = iterator.next()) && !result.done) {\n    const pair = result.value;\n    fn.call(obj, pair[0], pair[1]);\n  }\n}\n\n/**\n * It takes a regular expression and a string, and returns an array of all the matches\n *\n * @param {string} regExp - The regular expression to match against.\n * @param {string} str - The string to search.\n *\n * @returns {Array<boolean>}\n */\nconst matchAll = (regExp, str) => {\n  let matches;\n  const arr = [];\n\n  while ((matches = regExp.exec(str)) !== null) {\n    arr.push(matches);\n  }\n\n  return arr;\n}\n\n/* Checking if the kindOfTest function returns true when passed an HTMLFormElement. */\nconst isHTMLForm = kindOfTest('HTMLFormElement');\n\nconst toCamelCase = str => {\n  return str.toLowerCase().replace(/[-_\\s]([a-z\\d])(\\w*)/g,\n    function replacer(m, p1, p2) {\n      return p1.toUpperCase() + p2;\n    }\n  );\n};\n\n/* Creating a function that will check if an object has a property. */\nconst hasOwnProperty = (({hasOwnProperty}) => (obj, prop) => hasOwnProperty.call(obj, prop))(Object.prototype);\n\n/**\n * Determine if a value is a RegExp object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a RegExp object, otherwise false\n */\nconst isRegExp = kindOfTest('RegExp');\n\nconst reduceDescriptors = (obj, reducer) => {\n  const descriptors = Object.getOwnPropertyDescriptors(obj);\n  const reducedDescriptors = {};\n\n  forEach(descriptors, (descriptor, name) => {\n    let ret;\n    if ((ret = reducer(descriptor, name, obj)) !== false) {\n      reducedDescriptors[name] = ret || descriptor;\n    }\n  });\n\n  Object.defineProperties(obj, reducedDescriptors);\n}\n\n/**\n * Makes all methods read-only\n * @param {Object} obj\n */\n\nconst freezeMethods = (obj) => {\n  reduceDescriptors(obj, (descriptor, name) => {\n    // skip restricted props in strict mode\n    if (isFunction(obj) && ['arguments', 'caller', 'callee'].indexOf(name) !== -1) {\n      return false;\n    }\n\n    const value = obj[name];\n\n    if (!isFunction(value)) return;\n\n    descriptor.enumerable = false;\n\n    if ('writable' in descriptor) {\n      descriptor.writable = false;\n      return;\n    }\n\n    if (!descriptor.set) {\n      descriptor.set = () => {\n        throw Error('Can not rewrite read-only method \\'' + name + '\\'');\n      };\n    }\n  });\n}\n\nconst toObjectSet = (arrayOrString, delimiter) => {\n  const obj = {};\n\n  const define = (arr) => {\n    arr.forEach(value => {\n      obj[value] = true;\n    });\n  }\n\n  isArray(arrayOrString) ? define(arrayOrString) : define(String(arrayOrString).split(delimiter));\n\n  return obj;\n}\n\nconst noop = () => {}\n\nconst toFiniteNumber = (value, defaultValue) => {\n  value = +value;\n  return Number.isFinite(value) ? value : defaultValue;\n}\n\nconst ALPHA = 'abcdefghijklmnopqrstuvwxyz'\n\nconst DIGIT = '0123456789';\n\nconst ALPHABET = {\n  DIGIT,\n  ALPHA,\n  ALPHA_DIGIT: ALPHA + ALPHA.toUpperCase() + DIGIT\n}\n\nconst generateString = (size = 16, alphabet = ALPHABET.ALPHA_DIGIT) => {\n  let str = '';\n  const {length} = alphabet;\n  while (size--) {\n    str += alphabet[Math.random() * length|0]\n  }\n\n  return str;\n}\n\n/**\n * If the thing is a FormData object, return true, otherwise return false.\n *\n * @param {unknown} thing - The thing to check.\n *\n * @returns {boolean}\n */\nfunction isSpecCompliantForm(thing) {\n  return !!(thing && isFunction(thing.append) && thing[Symbol.toStringTag] === 'FormData' && thing[Symbol.iterator]);\n}\n\nconst toJSONObject = (obj) => {\n  const stack = new Array(10);\n\n  const visit = (source, i) => {\n\n    if (isObject(source)) {\n      if (stack.indexOf(source) >= 0) {\n        return;\n      }\n\n      if(!('toJSON' in source)) {\n        stack[i] = source;\n        const target = isArray(source) ? [] : {};\n\n        forEach(source, (value, key) => {\n          const reducedValue = visit(value, i + 1);\n          !isUndefined(reducedValue) && (target[key] = reducedValue);\n        });\n\n        stack[i] = undefined;\n\n        return target;\n      }\n    }\n\n    return source;\n  }\n\n  return visit(obj, 0);\n}\n\nconst isAsyncFn = kindOfTest('AsyncFunction');\n\nconst isThenable = (thing) =>\n  thing && (isObject(thing) || isFunction(thing)) && isFunction(thing.then) && isFunction(thing.catch);\n\nexport default {\n  isArray,\n  isArrayBuffer,\n  isBuffer,\n  isFormData,\n  isArrayBufferView,\n  isString,\n  isNumber,\n  isBoolean,\n  isObject,\n  isPlainObject,\n  isUndefined,\n  isDate,\n  isFile,\n  isBlob,\n  isRegExp,\n  isFunction,\n  isStream,\n  isURLSearchParams,\n  isTypedArray,\n  isFileList,\n  forEach,\n  merge,\n  extend,\n  trim,\n  stripBOM,\n  inherits,\n  toFlatObject,\n  kindOf,\n  kindOfTest,\n  endsWith,\n  toArray,\n  forEachEntry,\n  matchAll,\n  isHTMLForm,\n  hasOwnProperty,\n  hasOwnProp: hasOwnProperty, // an alias to avoid ESLint no-prototype-builtins detection\n  reduceDescriptors,\n  freezeMethods,\n  toObjectSet,\n  toCamelCase,\n  noop,\n  toFiniteNumber,\n  findKey,\n  global: _global,\n  isContextDefined,\n  ALPHABET,\n  generateString,\n  isSpecCompliantForm,\n  toJSONObject,\n  isAsyncFn,\n  isThenable\n};\n","'use strict';\n\nimport utils from '../utils.js';\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [config] The config.\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n *\n * @returns {Error} The created error.\n */\nfunction AxiosError(message, code, config, request, response) {\n  Error.call(this);\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, this.constructor);\n  } else {\n    this.stack = (new Error()).stack;\n  }\n\n  this.message = message;\n  this.name = 'AxiosError';\n  code && (this.code = code);\n  config && (this.config = config);\n  request && (this.request = request);\n  response && (this.response = response);\n}\n\nutils.inherits(AxiosError, Error, {\n  toJSON: function toJSON() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: utils.toJSONObject(this.config),\n      code: this.code,\n      status: this.response && this.response.status ? this.response.status : null\n    };\n  }\n});\n\nconst prototype = AxiosError.prototype;\nconst descriptors = {};\n\n[\n  'ERR_BAD_OPTION_VALUE',\n  'ERR_BAD_OPTION',\n  'ECONNABORTED',\n  'ETIMEDOUT',\n  'ERR_NETWORK',\n  'ERR_FR_TOO_MANY_REDIRECTS',\n  'ERR_DEPRECATED',\n  'ERR_BAD_RESPONSE',\n  'ERR_BAD_REQUEST',\n  'ERR_CANCELED',\n  'ERR_NOT_SUPPORT',\n  'ERR_INVALID_URL'\n// eslint-disable-next-line func-names\n].forEach(code => {\n  descriptors[code] = {value: code};\n});\n\nObject.defineProperties(AxiosError, descriptors);\nObject.defineProperty(prototype, 'isAxiosError', {value: true});\n\n// eslint-disable-next-line func-names\nAxiosError.from = (error, code, config, request, response, customProps) => {\n  const axiosError = Object.create(prototype);\n\n  utils.toFlatObject(error, axiosError, function filter(obj) {\n    return obj !== Error.prototype;\n  }, prop => {\n    return prop !== 'isAxiosError';\n  });\n\n  AxiosError.call(axiosError, error.message, code, config, request, response);\n\n  axiosError.cause = error;\n\n  axiosError.name = error.name;\n\n  customProps && Object.assign(axiosError, customProps);\n\n  return axiosError;\n};\n\nexport default AxiosError;\n","// eslint-disable-next-line strict\nexport default null;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\n// temporary hotfix to avoid circular references until AxiosURLSearchParams is refactored\nimport PlatformFormData from '../platform/node/classes/FormData.js';\n\n/**\n * Determines if the given thing is a array or js object.\n *\n * @param {string} thing - The object or array to be visited.\n *\n * @returns {boolean}\n */\nfunction isVisitable(thing) {\n  return utils.isPlainObject(thing) || utils.isArray(thing);\n}\n\n/**\n * It removes the brackets from the end of a string\n *\n * @param {string} key - The key of the parameter.\n *\n * @returns {string} the key without the brackets.\n */\nfunction removeBrackets(key) {\n  return utils.endsWith(key, '[]') ? key.slice(0, -2) : key;\n}\n\n/**\n * It takes a path, a key, and a boolean, and returns a string\n *\n * @param {string} path - The path to the current key.\n * @param {string} key - The key of the current object being iterated over.\n * @param {string} dots - If true, the key will be rendered with dots instead of brackets.\n *\n * @returns {string} The path to the current key.\n */\nfunction renderKey(path, key, dots) {\n  if (!path) return key;\n  return path.concat(key).map(function each(token, i) {\n    // eslint-disable-next-line no-param-reassign\n    token = removeBrackets(token);\n    return !dots && i ? '[' + token + ']' : token;\n  }).join(dots ? '.' : '');\n}\n\n/**\n * If the array is an array and none of its elements are visitable, then it's a flat array.\n *\n * @param {Array<any>} arr - The array to check\n *\n * @returns {boolean}\n */\nfunction isFlatArray(arr) {\n  return utils.isArray(arr) && !arr.some(isVisitable);\n}\n\nconst predicates = utils.toFlatObject(utils, {}, null, function filter(prop) {\n  return /^is[A-Z]/.test(prop);\n});\n\n/**\n * Convert a data object to FormData\n *\n * @param {Object} obj\n * @param {?Object} [formData]\n * @param {?Object} [options]\n * @param {Function} [options.visitor]\n * @param {Boolean} [options.metaTokens = true]\n * @param {Boolean} [options.dots = false]\n * @param {?Boolean} [options.indexes = false]\n *\n * @returns {Object}\n **/\n\n/**\n * It converts an object into a FormData object\n *\n * @param {Object<any, any>} obj - The object to convert to form data.\n * @param {string} formData - The FormData object to append to.\n * @param {Object<string, any>} options\n *\n * @returns\n */\nfunction toFormData(obj, formData, options) {\n  if (!utils.isObject(obj)) {\n    throw new TypeError('target must be an object');\n  }\n\n  // eslint-disable-next-line no-param-reassign\n  formData = formData || new (PlatformFormData || FormData)();\n\n  // eslint-disable-next-line no-param-reassign\n  options = utils.toFlatObject(options, {\n    metaTokens: true,\n    dots: false,\n    indexes: false\n  }, false, function defined(option, source) {\n    // eslint-disable-next-line no-eq-null,eqeqeq\n    return !utils.isUndefined(source[option]);\n  });\n\n  const metaTokens = options.metaTokens;\n  // eslint-disable-next-line no-use-before-define\n  const visitor = options.visitor || defaultVisitor;\n  const dots = options.dots;\n  const indexes = options.indexes;\n  const _Blob = options.Blob || typeof Blob !== 'undefined' && Blob;\n  const useBlob = _Blob && utils.isSpecCompliantForm(formData);\n\n  if (!utils.isFunction(visitor)) {\n    throw new TypeError('visitor must be a function');\n  }\n\n  function convertValue(value) {\n    if (value === null) return '';\n\n    if (utils.isDate(value)) {\n      return value.toISOString();\n    }\n\n    if (!useBlob && utils.isBlob(value)) {\n      throw new AxiosError('Blob is not supported. Use a Buffer instead.');\n    }\n\n    if (utils.isArrayBuffer(value) || utils.isTypedArray(value)) {\n      return useBlob && typeof Blob === 'function' ? new Blob([value]) : Buffer.from(value);\n    }\n\n    return value;\n  }\n\n  /**\n   * Default visitor.\n   *\n   * @param {*} value\n   * @param {String|Number} key\n   * @param {Array<String|Number>} path\n   * @this {FormData}\n   *\n   * @returns {boolean} return true to visit the each prop of the value recursively\n   */\n  function defaultVisitor(value, key, path) {\n    let arr = value;\n\n    if (value && !path && typeof value === 'object') {\n      if (utils.endsWith(key, '{}')) {\n        // eslint-disable-next-line no-param-reassign\n        key = metaTokens ? key : key.slice(0, -2);\n        // eslint-disable-next-line no-param-reassign\n        value = JSON.stringify(value);\n      } else if (\n        (utils.isArray(value) && isFlatArray(value)) ||\n        ((utils.isFileList(value) || utils.endsWith(key, '[]')) && (arr = utils.toArray(value))\n        )) {\n        // eslint-disable-next-line no-param-reassign\n        key = removeBrackets(key);\n\n        arr.forEach(function each(el, index) {\n          !(utils.isUndefined(el) || el === null) && formData.append(\n            // eslint-disable-next-line no-nested-ternary\n            indexes === true ? renderKey([key], index, dots) : (indexes === null ? key : key + '[]'),\n            convertValue(el)\n          );\n        });\n        return false;\n      }\n    }\n\n    if (isVisitable(value)) {\n      return true;\n    }\n\n    formData.append(renderKey(path, key, dots), convertValue(value));\n\n    return false;\n  }\n\n  const stack = [];\n\n  const exposedHelpers = Object.assign(predicates, {\n    defaultVisitor,\n    convertValue,\n    isVisitable\n  });\n\n  function build(value, path) {\n    if (utils.isUndefined(value)) return;\n\n    if (stack.indexOf(value) !== -1) {\n      throw Error('Circular reference detected in ' + path.join('.'));\n    }\n\n    stack.push(value);\n\n    utils.forEach(value, function each(el, key) {\n      const result = !(utils.isUndefined(el) || el === null) && visitor.call(\n        formData, el, utils.isString(key) ? key.trim() : key, path, exposedHelpers\n      );\n\n      if (result === true) {\n        build(el, path ? path.concat(key) : [key]);\n      }\n    });\n\n    stack.pop();\n  }\n\n  if (!utils.isObject(obj)) {\n    throw new TypeError('data must be an object');\n  }\n\n  build(obj);\n\n  return formData;\n}\n\nexport default toFormData;\n","'use strict';\n\nimport toFormData from './toFormData.js';\n\n/**\n * It encodes a string by replacing all characters that are not in the unreserved set with\n * their percent-encoded equivalents\n *\n * @param {string} str - The string to encode.\n *\n * @returns {string} The encoded string.\n */\nfunction encode(str) {\n  const charMap = {\n    '!': '%21',\n    \"'\": '%27',\n    '(': '%28',\n    ')': '%29',\n    '~': '%7E',\n    '%20': '+',\n    '%00': '\\x00'\n  };\n  return encodeURIComponent(str).replace(/[!'()~]|%20|%00/g, function replacer(match) {\n    return charMap[match];\n  });\n}\n\n/**\n * It takes a params object and converts it to a FormData object\n *\n * @param {Object<string, any>} params - The parameters to be converted to a FormData object.\n * @param {Object<string, any>} options - The options object passed to the Axios constructor.\n *\n * @returns {void}\n */\nfunction AxiosURLSearchParams(params, options) {\n  this._pairs = [];\n\n  params && toFormData(params, this, options);\n}\n\nconst prototype = AxiosURLSearchParams.prototype;\n\nprototype.append = function append(name, value) {\n  this._pairs.push([name, value]);\n};\n\nprototype.toString = function toString(encoder) {\n  const _encode = encoder ? function(value) {\n    return encoder.call(this, value, encode);\n  } : encode;\n\n  return this._pairs.map(function each(pair) {\n    return _encode(pair[0]) + '=' + _encode(pair[1]);\n  }, '').join('&');\n};\n\nexport default AxiosURLSearchParams;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosURLSearchParams from '../helpers/AxiosURLSearchParams.js';\n\n/**\n * It replaces all instances of the characters `:`, `$`, `,`, `+`, `[`, and `]` with their\n * URI encoded counterparts\n *\n * @param {string} val The value to be encoded.\n *\n * @returns {string} The encoded value.\n */\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @param {?object} options\n *\n * @returns {string} The formatted url\n */\nexport default function buildURL(url, params, options) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n  \n  const _encode = options && options.encode || encode;\n\n  const serializeFn = options && options.serialize;\n\n  let serializedParams;\n\n  if (serializeFn) {\n    serializedParams = serializeFn(params, options);\n  } else {\n    serializedParams = utils.isURLSearchParams(params) ?\n      params.toString() :\n      new AxiosURLSearchParams(params, options).toString(_encode);\n  }\n\n  if (serializedParams) {\n    const hashmarkIndex = url.indexOf(\"#\");\n\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\nclass InterceptorManager {\n  constructor() {\n    this.handlers = [];\n  }\n\n  /**\n   * Add a new interceptor to the stack\n   *\n   * @param {Function} fulfilled The function to handle `then` for a `Promise`\n   * @param {Function} rejected The function to handle `reject` for a `Promise`\n   *\n   * @return {Number} An ID used to remove interceptor later\n   */\n  use(fulfilled, rejected, options) {\n    this.handlers.push({\n      fulfilled,\n      rejected,\n      synchronous: options ? options.synchronous : false,\n      runWhen: options ? options.runWhen : null\n    });\n    return this.handlers.length - 1;\n  }\n\n  /**\n   * Remove an interceptor from the stack\n   *\n   * @param {Number} id The ID that was returned by `use`\n   *\n   * @returns {Boolean} `true` if the interceptor was removed, `false` otherwise\n   */\n  eject(id) {\n    if (this.handlers[id]) {\n      this.handlers[id] = null;\n    }\n  }\n\n  /**\n   * Clear all interceptors from the stack\n   *\n   * @returns {void}\n   */\n  clear() {\n    if (this.handlers) {\n      this.handlers = [];\n    }\n  }\n\n  /**\n   * Iterate over all the registered interceptors\n   *\n   * This method is particularly useful for skipping over any\n   * interceptors that may have become `null` calling `eject`.\n   *\n   * @param {Function} fn The function to call for each interceptor\n   *\n   * @returns {void}\n   */\n  forEach(fn) {\n    utils.forEach(this.handlers, function forEachHandler(h) {\n      if (h !== null) {\n        fn(h);\n      }\n    });\n  }\n}\n\nexport default InterceptorManager;\n","'use strict';\n\nexport default {\n  silentJSONParsing: true,\n  forcedJSONParsing: true,\n  clarifyTimeoutError: false\n};\n","'use strict';\n\nimport AxiosURLSearchParams from '../../../helpers/AxiosURLSearchParams.js';\nexport default typeof URLSearchParams !== 'undefined' ? URLSearchParams : AxiosURLSearchParams;\n","'use strict';\n\nexport default typeof FormData !== 'undefined' ? FormData : null;\n","'use strict'\n\nexport default typeof Blob !== 'undefined' ? Blob : null\n","import URLSearchParams from './classes/URLSearchParams.js'\nimport FormData from './classes/FormData.js'\nimport Blob from './classes/Blob.js'\n\nexport default {\n  isBrowser: true,\n  classes: {\n    URLSearchParams,\n    FormData,\n    Blob\n  },\n  protocols: ['http', 'https', 'file', 'blob', 'url', 'data']\n};\n","const hasBrowserEnv = typeof window !== 'undefined' && typeof document !== 'undefined';\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n *\n * @returns {boolean}\n */\nconst hasStandardBrowserEnv = (\n  (product) => {\n    return hasBrowserEnv && ['ReactNative', 'NativeScript', 'NS'].indexOf(product) < 0\n  })(typeof navigator !== 'undefined' && navigator.product);\n\n/**\n * Determine if we're running in a standard browser webWorker environment\n *\n * Although the `isStandardBrowserEnv` method indicates that\n * `allows axios to run in a web worker`, the WebWorker will still be\n * filtered out due to its judgment standard\n * `typeof window !== 'undefined' && typeof document !== 'undefined'`.\n * This leads to a problem when axios post `FormData` in webWorker\n */\nconst hasStandardBrowserWebWorkerEnv = (() => {\n  return (\n    typeof WorkerGlobalScope !== 'undefined' &&\n    // eslint-disable-next-line no-undef\n    self instanceof WorkerGlobalScope &&\n    typeof self.importScripts === 'function'\n  );\n})();\n\nexport {\n  hasBrowserEnv,\n  hasStandardBrowserWebWorkerEnv,\n  hasStandardBrowserEnv\n}\n","import platform from './node/index.js';\nimport * as utils from './common/utils.js';\n\nexport default {\n  ...utils,\n  ...platform\n}\n","'use strict';\n\nimport utils from '../utils.js';\nimport toFormData from './toFormData.js';\nimport platform from '../platform/index.js';\n\nexport default function toURLEncodedForm(data, options) {\n  return toFormData(data, new platform.classes.URLSearchParams(), Object.assign({\n    visitor: function(value, key, path, helpers) {\n      if (platform.isNode && utils.isBuffer(value)) {\n        this.append(key, value.toString('base64'));\n        return false;\n      }\n\n      return helpers.defaultVisitor.apply(this, arguments);\n    }\n  }, options));\n}\n","'use strict';\n\nimport utils from '../utils.js';\n\n/**\n * It takes a string like `foo[x][y][z]` and returns an array like `['foo', 'x', 'y', 'z']\n *\n * @param {string} name - The name of the property to get.\n *\n * @returns An array of strings.\n */\nfunction parsePropPath(name) {\n  // foo[x][y][z]\n  // foo.x.y.z\n  // foo-x-y-z\n  // foo x y z\n  return utils.matchAll(/\\w+|\\[(\\w*)]/g, name).map(match => {\n    return match[0] === '[]' ? '' : match[1] || match[0];\n  });\n}\n\n/**\n * Convert an array to an object.\n *\n * @param {Array<any>} arr - The array to convert to an object.\n *\n * @returns An object with the same keys and values as the array.\n */\nfunction arrayToObject(arr) {\n  const obj = {};\n  const keys = Object.keys(arr);\n  let i;\n  const len = keys.length;\n  let key;\n  for (i = 0; i < len; i++) {\n    key = keys[i];\n    obj[key] = arr[key];\n  }\n  return obj;\n}\n\n/**\n * It takes a FormData object and returns a JavaScript object\n *\n * @param {string} formData The FormData object to convert to JSON.\n *\n * @returns {Object<string, any> | null} The converted object.\n */\nfunction formDataToJSON(formData) {\n  function buildPath(path, value, target, index) {\n    let name = path[index++];\n    const isNumericKey = Number.isFinite(+name);\n    const isLast = index >= path.length;\n    name = !name && utils.isArray(target) ? target.length : name;\n\n    if (isLast) {\n      if (utils.hasOwnProp(target, name)) {\n        target[name] = [target[name], value];\n      } else {\n        target[name] = value;\n      }\n\n      return !isNumericKey;\n    }\n\n    if (!target[name] || !utils.isObject(target[name])) {\n      target[name] = [];\n    }\n\n    const result = buildPath(path, value, target[name], index);\n\n    if (result && utils.isArray(target[name])) {\n      target[name] = arrayToObject(target[name]);\n    }\n\n    return !isNumericKey;\n  }\n\n  if (utils.isFormData(formData) && utils.isFunction(formData.entries)) {\n    const obj = {};\n\n    utils.forEachEntry(formData, (name, value) => {\n      buildPath(parsePropPath(name), value, obj, 0);\n    });\n\n    return obj;\n  }\n\n  return null;\n}\n\nexport default formDataToJSON;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\nimport transitionalDefaults from './transitional.js';\nimport toFormData from '../helpers/toFormData.js';\nimport toURLEncodedForm from '../helpers/toURLEncodedForm.js';\nimport platform from '../platform/index.js';\nimport formDataToJSON from '../helpers/formDataToJSON.js';\n\n/**\n * It takes a string, tries to parse it, and if it fails, it returns the stringified version\n * of the input\n *\n * @param {any} rawValue - The value to be stringified.\n * @param {Function} parser - A function that parses a string into a JavaScript object.\n * @param {Function} encoder - A function that takes a value and returns a string.\n *\n * @returns {string} A stringified version of the rawValue.\n */\nfunction stringifySafely(rawValue, parser, encoder) {\n  if (utils.isString(rawValue)) {\n    try {\n      (parser || JSON.parse)(rawValue);\n      return utils.trim(rawValue);\n    } catch (e) {\n      if (e.name !== 'SyntaxError') {\n        throw e;\n      }\n    }\n  }\n\n  return (encoder || JSON.stringify)(rawValue);\n}\n\nconst defaults = {\n\n  transitional: transitionalDefaults,\n\n  adapter: ['xhr', 'http'],\n\n  transformRequest: [function transformRequest(data, headers) {\n    const contentType = headers.getContentType() || '';\n    const hasJSONContentType = contentType.indexOf('application/json') > -1;\n    const isObjectPayload = utils.isObject(data);\n\n    if (isObjectPayload && utils.isHTMLForm(data)) {\n      data = new FormData(data);\n    }\n\n    const isFormData = utils.isFormData(data);\n\n    if (isFormData) {\n      if (!hasJSONContentType) {\n        return data;\n      }\n      return hasJSONContentType ? JSON.stringify(formDataToJSON(data)) : data;\n    }\n\n    if (utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      headers.setContentType('application/x-www-form-urlencoded;charset=utf-8', false);\n      return data.toString();\n    }\n\n    let isFileList;\n\n    if (isObjectPayload) {\n      if (contentType.indexOf('application/x-www-form-urlencoded') > -1) {\n        return toURLEncodedForm(data, this.formSerializer).toString();\n      }\n\n      if ((isFileList = utils.isFileList(data)) || contentType.indexOf('multipart/form-data') > -1) {\n        const _FormData = this.env && this.env.FormData;\n\n        return toFormData(\n          isFileList ? {'files[]': data} : data,\n          _FormData && new _FormData(),\n          this.formSerializer\n        );\n      }\n    }\n\n    if (isObjectPayload || hasJSONContentType ) {\n      headers.setContentType('application/json', false);\n      return stringifySafely(data);\n    }\n\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    const transitional = this.transitional || defaults.transitional;\n    const forcedJSONParsing = transitional && transitional.forcedJSONParsing;\n    const JSONRequested = this.responseType === 'json';\n\n    if (data && utils.isString(data) && ((forcedJSONParsing && !this.responseType) || JSONRequested)) {\n      const silentJSONParsing = transitional && transitional.silentJSONParsing;\n      const strictJSONParsing = !silentJSONParsing && JSONRequested;\n\n      try {\n        return JSON.parse(data);\n      } catch (e) {\n        if (strictJSONParsing) {\n          if (e.name === 'SyntaxError') {\n            throw AxiosError.from(e, AxiosError.ERR_BAD_RESPONSE, this, null, this.response);\n          }\n          throw e;\n        }\n      }\n    }\n\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n  maxBodyLength: -1,\n\n  env: {\n    FormData: platform.classes.FormData,\n    Blob: platform.classes.Blob\n  },\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  },\n\n  headers: {\n    common: {\n      'Accept': 'application/json, text/plain, */*',\n      'Content-Type': undefined\n    }\n  }\n};\n\nutils.forEach(['delete', 'get', 'head', 'post', 'put', 'patch'], (method) => {\n  defaults.headers[method] = {};\n});\n\nexport default defaults;\n","'use strict';\n\nimport utils from './../utils.js';\n\n// RawAxiosHeaders whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nconst ignoreDuplicateOf = utils.toObjectSet([\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n]);\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} rawHeaders Headers needing to be parsed\n *\n * @returns {Object} Headers parsed into an object\n */\nexport default rawHeaders => {\n  const parsed = {};\n  let key;\n  let val;\n  let i;\n\n  rawHeaders && rawHeaders.split('\\n').forEach(function parser(line) {\n    i = line.indexOf(':');\n    key = line.substring(0, i).trim().toLowerCase();\n    val = line.substring(i + 1).trim();\n\n    if (!key || (parsed[key] && ignoreDuplicateOf[key])) {\n      return;\n    }\n\n    if (key === 'set-cookie') {\n      if (parsed[key]) {\n        parsed[key].push(val);\n      } else {\n        parsed[key] = [val];\n      }\n    } else {\n      parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nimport utils from '../utils.js';\nimport parseHeaders from '../helpers/parseHeaders.js';\n\nconst $internals = Symbol('internals');\n\nfunction normalizeHeader(header) {\n  return header && String(header).trim().toLowerCase();\n}\n\nfunction normalizeValue(value) {\n  if (value === false || value == null) {\n    return value;\n  }\n\n  return utils.isArray(value) ? value.map(normalizeValue) : String(value);\n}\n\nfunction parseTokens(str) {\n  const tokens = Object.create(null);\n  const tokensRE = /([^\\s,;=]+)\\s*(?:=\\s*([^,;]+))?/g;\n  let match;\n\n  while ((match = tokensRE.exec(str))) {\n    tokens[match[1]] = match[2];\n  }\n\n  return tokens;\n}\n\nconst isValidHeaderName = (str) => /^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(str.trim());\n\nfunction matchHeaderValue(context, value, header, filter, isHeaderNameFilter) {\n  if (utils.isFunction(filter)) {\n    return filter.call(this, value, header);\n  }\n\n  if (isHeaderNameFilter) {\n    value = header;\n  }\n\n  if (!utils.isString(value)) return;\n\n  if (utils.isString(filter)) {\n    return value.indexOf(filter) !== -1;\n  }\n\n  if (utils.isRegExp(filter)) {\n    return filter.test(value);\n  }\n}\n\nfunction formatHeader(header) {\n  return header.trim()\n    .toLowerCase().replace(/([a-z\\d])(\\w*)/g, (w, char, str) => {\n      return char.toUpperCase() + str;\n    });\n}\n\nfunction buildAccessors(obj, header) {\n  const accessorName = utils.toCamelCase(' ' + header);\n\n  ['get', 'set', 'has'].forEach(methodName => {\n    Object.defineProperty(obj, methodName + accessorName, {\n      value: function(arg1, arg2, arg3) {\n        return this[methodName].call(this, header, arg1, arg2, arg3);\n      },\n      configurable: true\n    });\n  });\n}\n\nclass AxiosHeaders {\n  constructor(headers) {\n    headers && this.set(headers);\n  }\n\n  set(header, valueOrRewrite, rewrite) {\n    const self = this;\n\n    function setHeader(_value, _header, _rewrite) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!lHeader) {\n        throw new Error('header name must be a non-empty string');\n      }\n\n      const key = utils.findKey(self, lHeader);\n\n      if(!key || self[key] === undefined || _rewrite === true || (_rewrite === undefined && self[key] !== false)) {\n        self[key || _header] = normalizeValue(_value);\n      }\n    }\n\n    const setHeaders = (headers, _rewrite) =>\n      utils.forEach(headers, (_value, _header) => setHeader(_value, _header, _rewrite));\n\n    if (utils.isPlainObject(header) || header instanceof this.constructor) {\n      setHeaders(header, valueOrRewrite)\n    } else if(utils.isString(header) && (header = header.trim()) && !isValidHeaderName(header)) {\n      setHeaders(parseHeaders(header), valueOrRewrite);\n    } else {\n      header != null && setHeader(valueOrRewrite, header, rewrite);\n    }\n\n    return this;\n  }\n\n  get(header, parser) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils.findKey(this, header);\n\n      if (key) {\n        const value = this[key];\n\n        if (!parser) {\n          return value;\n        }\n\n        if (parser === true) {\n          return parseTokens(value);\n        }\n\n        if (utils.isFunction(parser)) {\n          return parser.call(this, value, key);\n        }\n\n        if (utils.isRegExp(parser)) {\n          return parser.exec(value);\n        }\n\n        throw new TypeError('parser must be boolean|regexp|function');\n      }\n    }\n  }\n\n  has(header, matcher) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils.findKey(this, header);\n\n      return !!(key && this[key] !== undefined && (!matcher || matchHeaderValue(this, this[key], key, matcher)));\n    }\n\n    return false;\n  }\n\n  delete(header, matcher) {\n    const self = this;\n    let deleted = false;\n\n    function deleteHeader(_header) {\n      _header = normalizeHeader(_header);\n\n      if (_header) {\n        const key = utils.findKey(self, _header);\n\n        if (key && (!matcher || matchHeaderValue(self, self[key], key, matcher))) {\n          delete self[key];\n\n          deleted = true;\n        }\n      }\n    }\n\n    if (utils.isArray(header)) {\n      header.forEach(deleteHeader);\n    } else {\n      deleteHeader(header);\n    }\n\n    return deleted;\n  }\n\n  clear(matcher) {\n    const keys = Object.keys(this);\n    let i = keys.length;\n    let deleted = false;\n\n    while (i--) {\n      const key = keys[i];\n      if(!matcher || matchHeaderValue(this, this[key], key, matcher, true)) {\n        delete this[key];\n        deleted = true;\n      }\n    }\n\n    return deleted;\n  }\n\n  normalize(format) {\n    const self = this;\n    const headers = {};\n\n    utils.forEach(this, (value, header) => {\n      const key = utils.findKey(headers, header);\n\n      if (key) {\n        self[key] = normalizeValue(value);\n        delete self[header];\n        return;\n      }\n\n      const normalized = format ? formatHeader(header) : String(header).trim();\n\n      if (normalized !== header) {\n        delete self[header];\n      }\n\n      self[normalized] = normalizeValue(value);\n\n      headers[normalized] = true;\n    });\n\n    return this;\n  }\n\n  concat(...targets) {\n    return this.constructor.concat(this, ...targets);\n  }\n\n  toJSON(asStrings) {\n    const obj = Object.create(null);\n\n    utils.forEach(this, (value, header) => {\n      value != null && value !== false && (obj[header] = asStrings && utils.isArray(value) ? value.join(', ') : value);\n    });\n\n    return obj;\n  }\n\n  [Symbol.iterator]() {\n    return Object.entries(this.toJSON())[Symbol.iterator]();\n  }\n\n  toString() {\n    return Object.entries(this.toJSON()).map(([header, value]) => header + ': ' + value).join('\\n');\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'AxiosHeaders';\n  }\n\n  static from(thing) {\n    return thing instanceof this ? thing : new this(thing);\n  }\n\n  static concat(first, ...targets) {\n    const computed = new this(first);\n\n    targets.forEach((target) => computed.set(target));\n\n    return computed;\n  }\n\n  static accessor(header) {\n    const internals = this[$internals] = (this[$internals] = {\n      accessors: {}\n    });\n\n    const accessors = internals.accessors;\n    const prototype = this.prototype;\n\n    function defineAccessor(_header) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!accessors[lHeader]) {\n        buildAccessors(prototype, _header);\n        accessors[lHeader] = true;\n      }\n    }\n\n    utils.isArray(header) ? header.forEach(defineAccessor) : defineAccessor(header);\n\n    return this;\n  }\n}\n\nAxiosHeaders.accessor(['Content-Type', 'Content-Length', 'Accept', 'Accept-Encoding', 'User-Agent', 'Authorization']);\n\n// reserved names hotfix\nutils.reduceDescriptors(AxiosHeaders.prototype, ({value}, key) => {\n  let mapped = key[0].toUpperCase() + key.slice(1); // map `set` => `Set`\n  return {\n    get: () => value,\n    set(headerValue) {\n      this[mapped] = headerValue;\n    }\n  }\n});\n\nutils.freezeMethods(AxiosHeaders);\n\nexport default AxiosHeaders;\n","'use strict';\n\nimport utils from './../utils.js';\nimport defaults from '../defaults/index.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Array|Function} fns A single function or Array of functions\n * @param {?Object} response The response object\n *\n * @returns {*} The resulting transformed data\n */\nexport default function transformData(fns, response) {\n  const config = this || defaults;\n  const context = response || config;\n  const headers = AxiosHeaders.from(context.headers);\n  let data = context.data;\n\n  utils.forEach(fns, function transform(fn) {\n    data = fn.call(config, data, headers.normalize(), response ? response.status : undefined);\n  });\n\n  headers.normalize();\n\n  return data;\n}\n","'use strict';\n\nexport default function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n}\n","'use strict';\n\nimport AxiosError from '../core/AxiosError.js';\nimport utils from '../utils.js';\n\n/**\n * A `CanceledError` is an object that is thrown when an operation is canceled.\n *\n * @param {string=} message The message.\n * @param {Object=} config The config.\n * @param {Object=} request The request.\n *\n * @returns {CanceledError} The created error.\n */\nfunction CanceledError(message, config, request) {\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  AxiosError.call(this, message == null ? 'canceled' : message, AxiosError.ERR_CANCELED, config, request);\n  this.name = 'CanceledError';\n}\n\nutils.inherits(CanceledError, AxiosError, {\n  __CANCEL__: true\n});\n\nexport default CanceledError;\n","'use strict';\n\nimport AxiosError from './AxiosError.js';\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n *\n * @returns {object} The response.\n */\nexport default function settle(resolve, reject, response) {\n  const validateStatus = response.config.validateStatus;\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(new AxiosError(\n      'Request failed with status code ' + response.status,\n      [AxiosError.ERR_BAD_REQUEST, AxiosError.ERR_BAD_RESPONSE][Math.floor(response.status / 100) - 4],\n      response.config,\n      response.request,\n      response\n    ));\n  }\n}\n","import utils from './../utils.js';\nimport platform from '../platform/index.js';\n\nexport default platform.hasStandardBrowserEnv ?\n\n  // Standard browser envs support document.cookie\n  {\n    write(name, value, expires, path, domain, secure) {\n      const cookie = [name + '=' + encodeURIComponent(value)];\n\n      utils.isNumber(expires) && cookie.push('expires=' + new Date(expires).toGMTString());\n\n      utils.isString(path) && cookie.push('path=' + path);\n\n      utils.isString(domain) && cookie.push('domain=' + domain);\n\n      secure === true && cookie.push('secure');\n\n      document.cookie = cookie.join('; ');\n    },\n\n    read(name) {\n      const match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n      return (match ? decodeURIComponent(match[3]) : null);\n    },\n\n    remove(name) {\n      this.write(name, '', Date.now() - 86400000);\n    }\n  }\n\n  :\n\n  // Non-standard browser env (web workers, react-native) lack needed support.\n  {\n    write() {},\n    read() {\n      return null;\n    },\n    remove() {}\n  };\n\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n *\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nexport default function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d+\\-.]*:)?\\/\\//i.test(url);\n}\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n *\n * @returns {string} The combined URL\n */\nexport default function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n}\n","'use strict';\n\nimport isAbsoluteURL from '../helpers/isAbsoluteURL.js';\nimport combineURLs from '../helpers/combineURLs.js';\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n *\n * @returns {string} The combined full path\n */\nexport default function buildFullPath(baseURL, requestedURL) {\n  if (baseURL && !isAbsoluteURL(requestedURL)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n}\n","'use strict';\n\nimport utils from './../utils.js';\nimport platform from '../platform/index.js';\n\nexport default platform.hasStandardBrowserEnv ?\n\n// Standard browser envs have full support of the APIs needed to test\n// whether the request URL is of the same origin as current location.\n  (function standardBrowserEnv() {\n    const msie = /(msie|trident)/i.test(navigator.userAgent);\n    const urlParsingNode = document.createElement('a');\n    let originURL;\n\n    /**\n    * Parse a URL to discover its components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n    function resolveURL(url) {\n      let href = url;\n\n      if (msie) {\n        // IE needs attribute set twice to normalize properties\n        urlParsingNode.setAttribute('href', href);\n        href = urlParsingNode.href;\n      }\n\n      urlParsingNode.setAttribute('href', href);\n\n      // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n      return {\n        href: urlParsingNode.href,\n        protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n        host: urlParsingNode.host,\n        search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n        hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n        hostname: urlParsingNode.hostname,\n        port: urlParsingNode.port,\n        pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n          urlParsingNode.pathname :\n          '/' + urlParsingNode.pathname\n      };\n    }\n\n    originURL = resolveURL(window.location.href);\n\n    /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n    return function isURLSameOrigin(requestURL) {\n      const parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n      return (parsed.protocol === originURL.protocol &&\n          parsed.host === originURL.host);\n    };\n  })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n  (function nonStandardBrowserEnv() {\n    return function isURLSameOrigin() {\n      return true;\n    };\n  })();\n","'use strict';\n\nexport default function parseProtocol(url) {\n  const match = /^([-+\\w]{1,25})(:?\\/\\/|:)/.exec(url);\n  return match && match[1] || '';\n}\n","'use strict';\n\n/**\n * Calculate data maxRate\n * @param {Number} [samplesCount= 10]\n * @param {Number} [min= 1000]\n * @returns {Function}\n */\nfunction speedometer(samplesCount, min) {\n  samplesCount = samplesCount || 10;\n  const bytes = new Array(samplesCount);\n  const timestamps = new Array(samplesCount);\n  let head = 0;\n  let tail = 0;\n  let firstSampleTS;\n\n  min = min !== undefined ? min : 1000;\n\n  return function push(chunkLength) {\n    const now = Date.now();\n\n    const startedAt = timestamps[tail];\n\n    if (!firstSampleTS) {\n      firstSampleTS = now;\n    }\n\n    bytes[head] = chunkLength;\n    timestamps[head] = now;\n\n    let i = tail;\n    let bytesCount = 0;\n\n    while (i !== head) {\n      bytesCount += bytes[i++];\n      i = i % samplesCount;\n    }\n\n    head = (head + 1) % samplesCount;\n\n    if (head === tail) {\n      tail = (tail + 1) % samplesCount;\n    }\n\n    if (now - firstSampleTS < min) {\n      return;\n    }\n\n    const passed = startedAt && now - startedAt;\n\n    return passed ? Math.round(bytesCount * 1000 / passed) : undefined;\n  };\n}\n\nexport default speedometer;\n","'use strict';\n\nimport utils from './../utils.js';\nimport settle from './../core/settle.js';\nimport cookies from './../helpers/cookies.js';\nimport buildURL from './../helpers/buildURL.js';\nimport buildFullPath from '../core/buildFullPath.js';\nimport isURLSameOrigin from './../helpers/isURLSameOrigin.js';\nimport transitionalDefaults from '../defaults/transitional.js';\nimport AxiosError from '../core/AxiosError.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport parseProtocol from '../helpers/parseProtocol.js';\nimport platform from '../platform/index.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport speedometer from '../helpers/speedometer.js';\n\nfunction progressEventReducer(listener, isDownloadStream) {\n  let bytesNotified = 0;\n  const _speedometer = speedometer(50, 250);\n\n  return e => {\n    const loaded = e.loaded;\n    const total = e.lengthComputable ? e.total : undefined;\n    const progressBytes = loaded - bytesNotified;\n    const rate = _speedometer(progressBytes);\n    const inRange = loaded <= total;\n\n    bytesNotified = loaded;\n\n    const data = {\n      loaded,\n      total,\n      progress: total ? (loaded / total) : undefined,\n      bytes: progressBytes,\n      rate: rate ? rate : undefined,\n      estimated: rate && total && inRange ? (total - loaded) / rate : undefined,\n      event: e\n    };\n\n    data[isDownloadStream ? 'download' : 'upload'] = true;\n\n    listener(data);\n  };\n}\n\nconst isXHRAdapterSupported = typeof XMLHttpRequest !== 'undefined';\n\nexport default isXHRAdapterSupported && function (config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    let requestData = config.data;\n    const requestHeaders = AxiosHeaders.from(config.headers).normalize();\n    let {responseType, withXSRFToken} = config;\n    let onCanceled;\n    function done() {\n      if (config.cancelToken) {\n        config.cancelToken.unsubscribe(onCanceled);\n      }\n\n      if (config.signal) {\n        config.signal.removeEventListener('abort', onCanceled);\n      }\n    }\n\n    let contentType;\n\n    if (utils.isFormData(requestData)) {\n      if (platform.hasStandardBrowserEnv || platform.hasStandardBrowserWebWorkerEnv) {\n        requestHeaders.setContentType(false); // Let the browser set it\n      } else if ((contentType = requestHeaders.getContentType()) !== false) {\n        // fix semicolon duplication issue for ReactNative FormData implementation\n        const [type, ...tokens] = contentType ? contentType.split(';').map(token => token.trim()).filter(Boolean) : [];\n        requestHeaders.setContentType([type || 'multipart/form-data', ...tokens].join('; '));\n      }\n    }\n\n    let request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      const username = config.auth.username || '';\n      const password = config.auth.password ? unescape(encodeURIComponent(config.auth.password)) : '';\n      requestHeaders.set('Authorization', 'Basic ' + btoa(username + ':' + password));\n    }\n\n    const fullPath = buildFullPath(config.baseURL, config.url);\n\n    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    function onloadend() {\n      if (!request) {\n        return;\n      }\n      // Prepare the response\n      const responseHeaders = AxiosHeaders.from(\n        'getAllResponseHeaders' in request && request.getAllResponseHeaders()\n      );\n      const responseData = !responseType || responseType === 'text' || responseType === 'json' ?\n        request.responseText : request.response;\n      const response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config,\n        request\n      };\n\n      settle(function _resolve(value) {\n        resolve(value);\n        done();\n      }, function _reject(err) {\n        reject(err);\n        done();\n      }, response);\n\n      // Clean up request\n      request = null;\n    }\n\n    if ('onloadend' in request) {\n      // Use onloadend if available\n      request.onloadend = onloadend;\n    } else {\n      // Listen for ready state to emulate onloadend\n      request.onreadystatechange = function handleLoad() {\n        if (!request || request.readyState !== 4) {\n          return;\n        }\n\n        // The request errored out and we didn't get a response, this will be\n        // handled by onerror instead\n        // With one exception: request that using file: protocol, most browsers\n        // will return status as 0 even though it's a successful request\n        if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n          return;\n        }\n        // readystate handler is calling before onerror or ontimeout handlers,\n        // so we should call onloadend on the next 'tick'\n        setTimeout(onloadend);\n      };\n    }\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(new AxiosError('Request aborted', AxiosError.ECONNABORTED, config, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(new AxiosError('Network Error', AxiosError.ERR_NETWORK, config, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      let timeoutErrorMessage = config.timeout ? 'timeout of ' + config.timeout + 'ms exceeded' : 'timeout exceeded';\n      const transitional = config.transitional || transitionalDefaults;\n      if (config.timeoutErrorMessage) {\n        timeoutErrorMessage = config.timeoutErrorMessage;\n      }\n      reject(new AxiosError(\n        timeoutErrorMessage,\n        transitional.clarifyTimeoutError ? AxiosError.ETIMEDOUT : AxiosError.ECONNABORTED,\n        config,\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if(platform.hasStandardBrowserEnv) {\n      withXSRFToken && utils.isFunction(withXSRFToken) && (withXSRFToken = withXSRFToken(config));\n\n      if (withXSRFToken || (withXSRFToken !== false && isURLSameOrigin(fullPath))) {\n        // Add xsrf header\n        const xsrfValue = config.xsrfHeaderName && config.xsrfCookieName && cookies.read(config.xsrfCookieName);\n\n        if (xsrfValue) {\n          requestHeaders.set(config.xsrfHeaderName, xsrfValue);\n        }\n      }\n    }\n\n    // Remove Content-Type if data is undefined\n    requestData === undefined && requestHeaders.setContentType(null);\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders.toJSON(), function setRequestHeader(val, key) {\n        request.setRequestHeader(key, val);\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(config.withCredentials)) {\n      request.withCredentials = !!config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (responseType && responseType !== 'json') {\n      request.responseType = config.responseType;\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', progressEventReducer(config.onDownloadProgress, true));\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', progressEventReducer(config.onUploadProgress));\n    }\n\n    if (config.cancelToken || config.signal) {\n      // Handle cancellation\n      // eslint-disable-next-line func-names\n      onCanceled = cancel => {\n        if (!request) {\n          return;\n        }\n        reject(!cancel || cancel.type ? new CanceledError(null, config, request) : cancel);\n        request.abort();\n        request = null;\n      };\n\n      config.cancelToken && config.cancelToken.subscribe(onCanceled);\n      if (config.signal) {\n        config.signal.aborted ? onCanceled() : config.signal.addEventListener('abort', onCanceled);\n      }\n    }\n\n    const protocol = parseProtocol(fullPath);\n\n    if (protocol && platform.protocols.indexOf(protocol) === -1) {\n      reject(new AxiosError('Unsupported protocol ' + protocol + ':', AxiosError.ERR_BAD_REQUEST, config));\n      return;\n    }\n\n\n    // Send the request\n    request.send(requestData || null);\n  });\n}\n","import utils from '../utils.js';\nimport httpAdapter from './http.js';\nimport xhrAdapter from './xhr.js';\nimport AxiosError from \"../core/AxiosError.js\";\n\nconst knownAdapters = {\n  http: httpAdapter,\n  xhr: xhrAdapter\n}\n\nutils.forEach(knownAdapters, (fn, value) => {\n  if (fn) {\n    try {\n      Object.defineProperty(fn, 'name', {value});\n    } catch (e) {\n      // eslint-disable-next-line no-empty\n    }\n    Object.defineProperty(fn, 'adapterName', {value});\n  }\n});\n\nconst renderReason = (reason) => `- ${reason}`;\n\nconst isResolvedHandle = (adapter) => utils.isFunction(adapter) || adapter === null || adapter === false;\n\nexport default {\n  getAdapter: (adapters) => {\n    adapters = utils.isArray(adapters) ? adapters : [adapters];\n\n    const {length} = adapters;\n    let nameOrAdapter;\n    let adapter;\n\n    const rejectedReasons = {};\n\n    for (let i = 0; i < length; i++) {\n      nameOrAdapter = adapters[i];\n      let id;\n\n      adapter = nameOrAdapter;\n\n      if (!isResolvedHandle(nameOrAdapter)) {\n        adapter = knownAdapters[(id = String(nameOrAdapter)).toLowerCase()];\n\n        if (adapter === undefined) {\n          throw new AxiosError(`Unknown adapter '${id}'`);\n        }\n      }\n\n      if (adapter) {\n        break;\n      }\n\n      rejectedReasons[id || '#' + i] = adapter;\n    }\n\n    if (!adapter) {\n\n      const reasons = Object.entries(rejectedReasons)\n        .map(([id, state]) => `adapter ${id} ` +\n          (state === false ? 'is not supported by the environment' : 'is not available in the build')\n        );\n\n      let s = length ?\n        (reasons.length > 1 ? 'since :\\n' + reasons.map(renderReason).join('\\n') : ' ' + renderReason(reasons[0])) :\n        'as no adapter specified';\n\n      throw new AxiosError(\n        `There is no suitable adapter to dispatch the request ` + s,\n        'ERR_NOT_SUPPORT'\n      );\n    }\n\n    return adapter;\n  },\n  adapters: knownAdapters\n}\n","'use strict';\n\nimport transformData from './transformData.js';\nimport isCancel from '../cancel/isCancel.js';\nimport defaults from '../defaults/index.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport adapters from \"../adapters/adapters.js\";\n\n/**\n * Throws a `CanceledError` if cancellation has been requested.\n *\n * @param {Object} config The config that is to be used for the request\n *\n * @returns {void}\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n\n  if (config.signal && config.signal.aborted) {\n    throw new CanceledError(null, config);\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n *\n * @returns {Promise} The Promise to be fulfilled\n */\nexport default function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  config.headers = AxiosHeaders.from(config.headers);\n\n  // Transform request data\n  config.data = transformData.call(\n    config,\n    config.transformRequest\n  );\n\n  if (['post', 'put', 'patch'].indexOf(config.method) !== -1) {\n    config.headers.setContentType('application/x-www-form-urlencoded', false);\n  }\n\n  const adapter = adapters.getAdapter(config.adapter || defaults.adapter);\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData.call(\n      config,\n      config.transformResponse,\n      response\n    );\n\n    response.headers = AxiosHeaders.from(response.headers);\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData.call(\n          config,\n          config.transformResponse,\n          reason.response\n        );\n        reason.response.headers = AxiosHeaders.from(reason.response.headers);\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n}\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosHeaders from \"./AxiosHeaders.js\";\n\nconst headersToObject = (thing) => thing instanceof AxiosHeaders ? thing.toJSON() : thing;\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n *\n * @returns {Object} New object resulting from merging config2 to config1\n */\nexport default function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  const config = {};\n\n  function getMergedValue(target, source, caseless) {\n    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {\n      return utils.merge.call({caseless}, target, source);\n    } else if (utils.isPlainObject(source)) {\n      return utils.merge({}, source);\n    } else if (utils.isArray(source)) {\n      return source.slice();\n    }\n    return source;\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDeepProperties(a, b, caseless) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(a, b, caseless);\n    } else if (!utils.isUndefined(a)) {\n      return getMergedValue(undefined, a, caseless);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function valueFromConfig2(a, b) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function defaultToConfig2(a, b) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    } else if (!utils.isUndefined(a)) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDirectKeys(a, b, prop) {\n    if (prop in config2) {\n      return getMergedValue(a, b);\n    } else if (prop in config1) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  const mergeMap = {\n    url: valueFromConfig2,\n    method: valueFromConfig2,\n    data: valueFromConfig2,\n    baseURL: defaultToConfig2,\n    transformRequest: defaultToConfig2,\n    transformResponse: defaultToConfig2,\n    paramsSerializer: defaultToConfig2,\n    timeout: defaultToConfig2,\n    timeoutMessage: defaultToConfig2,\n    withCredentials: defaultToConfig2,\n    withXSRFToken: defaultToConfig2,\n    adapter: defaultToConfig2,\n    responseType: defaultToConfig2,\n    xsrfCookieName: defaultToConfig2,\n    xsrfHeaderName: defaultToConfig2,\n    onUploadProgress: defaultToConfig2,\n    onDownloadProgress: defaultToConfig2,\n    decompress: defaultToConfig2,\n    maxContentLength: defaultToConfig2,\n    maxBodyLength: defaultToConfig2,\n    beforeRedirect: defaultToConfig2,\n    transport: defaultToConfig2,\n    httpAgent: defaultToConfig2,\n    httpsAgent: defaultToConfig2,\n    cancelToken: defaultToConfig2,\n    socketPath: defaultToConfig2,\n    responseEncoding: defaultToConfig2,\n    validateStatus: mergeDirectKeys,\n    headers: (a, b) => mergeDeepProperties(headersToObject(a), headersToObject(b), true)\n  };\n\n  utils.forEach(Object.keys(Object.assign({}, config1, config2)), function computeConfigValue(prop) {\n    const merge = mergeMap[prop] || mergeDeepProperties;\n    const configValue = merge(config1[prop], config2[prop], prop);\n    (utils.isUndefined(configValue) && merge !== mergeDirectKeys) || (config[prop] = configValue);\n  });\n\n  return config;\n}\n","export const VERSION = \"1.6.2\";","'use strict';\n\nimport {VERSION} from '../env/data.js';\nimport AxiosError from '../core/AxiosError.js';\n\nconst validators = {};\n\n// eslint-disable-next-line func-names\n['object', 'boolean', 'number', 'function', 'string', 'symbol'].forEach((type, i) => {\n  validators[type] = function validator(thing) {\n    return typeof thing === type || 'a' + (i < 1 ? 'n ' : ' ') + type;\n  };\n});\n\nconst deprecatedWarnings = {};\n\n/**\n * Transitional option validator\n *\n * @param {function|boolean?} validator - set to false if the transitional option has been removed\n * @param {string?} version - deprecated version / removed since version\n * @param {string?} message - some message with additional info\n *\n * @returns {function}\n */\nvalidators.transitional = function transitional(validator, version, message) {\n  function formatMessage(opt, desc) {\n    return '[Axios v' + VERSION + '] Transitional option \\'' + opt + '\\'' + desc + (message ? '. ' + message : '');\n  }\n\n  // eslint-disable-next-line func-names\n  return (value, opt, opts) => {\n    if (validator === false) {\n      throw new AxiosError(\n        formatMessage(opt, ' has been removed' + (version ? ' in ' + version : '')),\n        AxiosError.ERR_DEPRECATED\n      );\n    }\n\n    if (version && !deprecatedWarnings[opt]) {\n      deprecatedWarnings[opt] = true;\n      // eslint-disable-next-line no-console\n      console.warn(\n        formatMessage(\n          opt,\n          ' has been deprecated since v' + version + ' and will be removed in the near future'\n        )\n      );\n    }\n\n    return validator ? validator(value, opt, opts) : true;\n  };\n};\n\n/**\n * Assert object's properties type\n *\n * @param {object} options\n * @param {object} schema\n * @param {boolean?} allowUnknown\n *\n * @returns {object}\n */\n\nfunction assertOptions(options, schema, allowUnknown) {\n  if (typeof options !== 'object') {\n    throw new AxiosError('options must be an object', AxiosError.ERR_BAD_OPTION_VALUE);\n  }\n  const keys = Object.keys(options);\n  let i = keys.length;\n  while (i-- > 0) {\n    const opt = keys[i];\n    const validator = schema[opt];\n    if (validator) {\n      const value = options[opt];\n      const result = value === undefined || validator(value, opt, options);\n      if (result !== true) {\n        throw new AxiosError('option ' + opt + ' must be ' + result, AxiosError.ERR_BAD_OPTION_VALUE);\n      }\n      continue;\n    }\n    if (allowUnknown !== true) {\n      throw new AxiosError('Unknown option ' + opt, AxiosError.ERR_BAD_OPTION);\n    }\n  }\n}\n\nexport default {\n  assertOptions,\n  validators\n};\n","'use strict';\n\nimport utils from './../utils.js';\nimport buildURL from '../helpers/buildURL.js';\nimport InterceptorManager from './InterceptorManager.js';\nimport dispatchRequest from './dispatchRequest.js';\nimport mergeConfig from './mergeConfig.js';\nimport buildFullPath from './buildFullPath.js';\nimport validator from '../helpers/validator.js';\nimport AxiosHeaders from './AxiosHeaders.js';\n\nconst validators = validator.validators;\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n *\n * @return {Axios} A new instance of Axios\n */\nclass Axios {\n  constructor(instanceConfig) {\n    this.defaults = instanceConfig;\n    this.interceptors = {\n      request: new InterceptorManager(),\n      response: new InterceptorManager()\n    };\n  }\n\n  /**\n   * Dispatch a request\n   *\n   * @param {String|Object} configOrUrl The config specific for this request (merged with this.defaults)\n   * @param {?Object} config\n   *\n   * @returns {Promise} The Promise to be fulfilled\n   */\n  request(configOrUrl, config) {\n    /*eslint no-param-reassign:0*/\n    // Allow for axios('example/url'[, config]) a la fetch API\n    if (typeof configOrUrl === 'string') {\n      config = config || {};\n      config.url = configOrUrl;\n    } else {\n      config = configOrUrl || {};\n    }\n\n    config = mergeConfig(this.defaults, config);\n\n    const {transitional, paramsSerializer, headers} = config;\n\n    if (transitional !== undefined) {\n      validator.assertOptions(transitional, {\n        silentJSONParsing: validators.transitional(validators.boolean),\n        forcedJSONParsing: validators.transitional(validators.boolean),\n        clarifyTimeoutError: validators.transitional(validators.boolean)\n      }, false);\n    }\n\n    if (paramsSerializer != null) {\n      if (utils.isFunction(paramsSerializer)) {\n        config.paramsSerializer = {\n          serialize: paramsSerializer\n        }\n      } else {\n        validator.assertOptions(paramsSerializer, {\n          encode: validators.function,\n          serialize: validators.function\n        }, true);\n      }\n    }\n\n    // Set config.method\n    config.method = (config.method || this.defaults.method || 'get').toLowerCase();\n\n    // Flatten headers\n    let contextHeaders = headers && utils.merge(\n      headers.common,\n      headers[config.method]\n    );\n\n    headers && utils.forEach(\n      ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n      (method) => {\n        delete headers[method];\n      }\n    );\n\n    config.headers = AxiosHeaders.concat(contextHeaders, headers);\n\n    // filter out skipped interceptors\n    const requestInterceptorChain = [];\n    let synchronousRequestInterceptors = true;\n    this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n      if (typeof interceptor.runWhen === 'function' && interceptor.runWhen(config) === false) {\n        return;\n      }\n\n      synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;\n\n      requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    const responseInterceptorChain = [];\n    this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n      responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    let promise;\n    let i = 0;\n    let len;\n\n    if (!synchronousRequestInterceptors) {\n      const chain = [dispatchRequest.bind(this), undefined];\n      chain.unshift.apply(chain, requestInterceptorChain);\n      chain.push.apply(chain, responseInterceptorChain);\n      len = chain.length;\n\n      promise = Promise.resolve(config);\n\n      while (i < len) {\n        promise = promise.then(chain[i++], chain[i++]);\n      }\n\n      return promise;\n    }\n\n    len = requestInterceptorChain.length;\n\n    let newConfig = config;\n\n    i = 0;\n\n    while (i < len) {\n      const onFulfilled = requestInterceptorChain[i++];\n      const onRejected = requestInterceptorChain[i++];\n      try {\n        newConfig = onFulfilled(newConfig);\n      } catch (error) {\n        onRejected.call(this, error);\n        break;\n      }\n    }\n\n    try {\n      promise = dispatchRequest.call(this, newConfig);\n    } catch (error) {\n      return Promise.reject(error);\n    }\n\n    i = 0;\n    len = responseInterceptorChain.length;\n\n    while (i < len) {\n      promise = promise.then(responseInterceptorChain[i++], responseInterceptorChain[i++]);\n    }\n\n    return promise;\n  }\n\n  getUri(config) {\n    config = mergeConfig(this.defaults, config);\n    const fullPath = buildFullPath(config.baseURL, config.url);\n    return buildURL(fullPath, config.params, config.paramsSerializer);\n  }\n}\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(mergeConfig(config || {}, {\n      method,\n      url,\n      data: (config || {}).data\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n\n  function generateHTTPMethod(isForm) {\n    return function httpMethod(url, data, config) {\n      return this.request(mergeConfig(config || {}, {\n        method,\n        headers: isForm ? {\n          'Content-Type': 'multipart/form-data'\n        } : {},\n        url,\n        data\n      }));\n    };\n  }\n\n  Axios.prototype[method] = generateHTTPMethod();\n\n  Axios.prototype[method + 'Form'] = generateHTTPMethod(true);\n});\n\nexport default Axios;\n","'use strict';\n\nimport CanceledError from './CanceledError.js';\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @param {Function} executor The executor function.\n *\n * @returns {CancelToken}\n */\nclass CancelToken {\n  constructor(executor) {\n    if (typeof executor !== 'function') {\n      throw new TypeError('executor must be a function.');\n    }\n\n    let resolvePromise;\n\n    this.promise = new Promise(function promiseExecutor(resolve) {\n      resolvePromise = resolve;\n    });\n\n    const token = this;\n\n    // eslint-disable-next-line func-names\n    this.promise.then(cancel => {\n      if (!token._listeners) return;\n\n      let i = token._listeners.length;\n\n      while (i-- > 0) {\n        token._listeners[i](cancel);\n      }\n      token._listeners = null;\n    });\n\n    // eslint-disable-next-line func-names\n    this.promise.then = onfulfilled => {\n      let _resolve;\n      // eslint-disable-next-line func-names\n      const promise = new Promise(resolve => {\n        token.subscribe(resolve);\n        _resolve = resolve;\n      }).then(onfulfilled);\n\n      promise.cancel = function reject() {\n        token.unsubscribe(_resolve);\n      };\n\n      return promise;\n    };\n\n    executor(function cancel(message, config, request) {\n      if (token.reason) {\n        // Cancellation has already been requested\n        return;\n      }\n\n      token.reason = new CanceledError(message, config, request);\n      resolvePromise(token.reason);\n    });\n  }\n\n  /**\n   * Throws a `CanceledError` if cancellation has been requested.\n   */\n  throwIfRequested() {\n    if (this.reason) {\n      throw this.reason;\n    }\n  }\n\n  /**\n   * Subscribe to the cancel signal\n   */\n\n  subscribe(listener) {\n    if (this.reason) {\n      listener(this.reason);\n      return;\n    }\n\n    if (this._listeners) {\n      this._listeners.push(listener);\n    } else {\n      this._listeners = [listener];\n    }\n  }\n\n  /**\n   * Unsubscribe from the cancel signal\n   */\n\n  unsubscribe(listener) {\n    if (!this._listeners) {\n      return;\n    }\n    const index = this._listeners.indexOf(listener);\n    if (index !== -1) {\n      this._listeners.splice(index, 1);\n    }\n  }\n\n  /**\n   * Returns an object that contains a new `CancelToken` and a function that, when called,\n   * cancels the `CancelToken`.\n   */\n  static source() {\n    let cancel;\n    const token = new CancelToken(function executor(c) {\n      cancel = c;\n    });\n    return {\n      token,\n      cancel\n    };\n  }\n}\n\nexport default CancelToken;\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n *\n * @returns {Function}\n */\nexport default function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\n/**\n * Determines whether the payload is an error thrown by Axios\n *\n * @param {*} payload The value to test\n *\n * @returns {boolean} True if the payload is an error thrown by Axios, otherwise false\n */\nexport default function isAxiosError(payload) {\n  return utils.isObject(payload) && (payload.isAxiosError === true);\n}\n","const HttpStatusCode = {\n  Continue: 100,\n  SwitchingProtocols: 101,\n  Processing: 102,\n  EarlyHints: 103,\n  Ok: 200,\n  Created: 201,\n  Accepted: 202,\n  NonAuthoritativeInformation: 203,\n  NoContent: 204,\n  ResetContent: 205,\n  PartialContent: 206,\n  MultiStatus: 207,\n  AlreadyReported: 208,\n  ImUsed: 226,\n  MultipleChoices: 300,\n  MovedPermanently: 301,\n  Found: 302,\n  SeeOther: 303,\n  NotModified: 304,\n  UseProxy: 305,\n  Unused: 306,\n  TemporaryRedirect: 307,\n  PermanentRedirect: 308,\n  BadRequest: 400,\n  Unauthorized: 401,\n  PaymentRequired: 402,\n  Forbidden: 403,\n  NotFound: 404,\n  MethodNotAllowed: 405,\n  NotAcceptable: 406,\n  ProxyAuthenticationRequired: 407,\n  RequestTimeout: 408,\n  Conflict: 409,\n  Gone: 410,\n  LengthRequired: 411,\n  PreconditionFailed: 412,\n  PayloadTooLarge: 413,\n  UriTooLong: 414,\n  UnsupportedMediaType: 415,\n  RangeNotSatisfiable: 416,\n  ExpectationFailed: 417,\n  ImATeapot: 418,\n  MisdirectedRequest: 421,\n  UnprocessableEntity: 422,\n  Locked: 423,\n  FailedDependency: 424,\n  TooEarly: 425,\n  UpgradeRequired: 426,\n  PreconditionRequired: 428,\n  TooManyRequests: 429,\n  RequestHeaderFieldsTooLarge: 431,\n  UnavailableForLegalReasons: 451,\n  InternalServerError: 500,\n  NotImplemented: 501,\n  BadGateway: 502,\n  ServiceUnavailable: 503,\n  GatewayTimeout: 504,\n  HttpVersionNotSupported: 505,\n  VariantAlsoNegotiates: 506,\n  InsufficientStorage: 507,\n  LoopDetected: 508,\n  NotExtended: 510,\n  NetworkAuthenticationRequired: 511,\n};\n\nObject.entries(HttpStatusCode).forEach(([key, value]) => {\n  HttpStatusCode[value] = key;\n});\n\nexport default HttpStatusCode;\n","'use strict';\n\nimport utils from './utils.js';\nimport bind from './helpers/bind.js';\nimport Axios from './core/Axios.js';\nimport mergeConfig from './core/mergeConfig.js';\nimport defaults from './defaults/index.js';\nimport formDataToJSON from './helpers/formDataToJSON.js';\nimport CanceledError from './cancel/CanceledError.js';\nimport CancelToken from './cancel/CancelToken.js';\nimport isCancel from './cancel/isCancel.js';\nimport {VERSION} from './env/data.js';\nimport toFormData from './helpers/toFormData.js';\nimport AxiosError from './core/AxiosError.js';\nimport spread from './helpers/spread.js';\nimport isAxiosError from './helpers/isAxiosError.js';\nimport AxiosHeaders from \"./core/AxiosHeaders.js\";\nimport adapters from './adapters/adapters.js';\nimport HttpStatusCode from './helpers/HttpStatusCode.js';\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n *\n * @returns {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  const context = new Axios(defaultConfig);\n  const instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context, {allOwnKeys: true});\n\n  // Copy context to instance\n  utils.extend(instance, context, null, {allOwnKeys: true});\n\n  // Factory for creating new instances\n  instance.create = function create(instanceConfig) {\n    return createInstance(mergeConfig(defaultConfig, instanceConfig));\n  };\n\n  return instance;\n}\n\n// Create the default instance to be exported\nconst axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Expose Cancel & CancelToken\naxios.CanceledError = CanceledError;\naxios.CancelToken = CancelToken;\naxios.isCancel = isCancel;\naxios.VERSION = VERSION;\naxios.toFormData = toFormData;\n\n// Expose AxiosError class\naxios.AxiosError = AxiosError;\n\n// alias for CanceledError for backward compatibility\naxios.Cancel = axios.CanceledError;\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\n\naxios.spread = spread;\n\n// Expose isAxiosError\naxios.isAxiosError = isAxiosError;\n\n// Expose mergeConfig\naxios.mergeConfig = mergeConfig;\n\naxios.AxiosHeaders = AxiosHeaders;\n\naxios.formToJSON = thing => formDataToJSON(utils.isHTMLForm(thing) ? new FormData(thing) : thing);\n\naxios.getAdapter = adapters.getAdapter;\n\naxios.HttpStatusCode = HttpStatusCode;\n\naxios.default = axios;\n\n// this module should only have a default export\nexport default axios\n","\r\nimport axios from 'axios';\r\nconst log = console; \r\nexport const __serverApi = '';\r\nexport const __isLocal = window.location.host == 'localhost';\r\ntop.__isLocal = __isLocal;\r\nclass WindowUtil{\r\n    #loginRemeber;\r\n    constructor(){\r\n\r\n    }\r\n    async isLogin(callBack = () => {}){\r\n        if(this.#loginRemeber){\r\n            return Promise.resolve(callBack(this.#loginRemeber));\r\n        }\r\n        return axios.get(__serverApi + '/api/account/search/is-login', {\r\n            headers:{\r\n                'Content-Type': 'application/json'\r\n            }\r\n        })\r\n        .catch(err=>{\r\n            return err.response\r\n        })\r\n        .then(response => {\r\n            if( ! this.responseIsOk(response)){\r\n                return callBack({\r\n                    isLogin: false,\r\n                    status: response?.status,\r\n                    statusText: response?.statusText\r\n                });\r\n            }else{\r\n                if(response.data.code == 0){\r\n                    response.isLogin = true;\t\r\n                }else if(response.data.code == 100 || response.data.code == 105 || response.data.code == 106 || response.data.code == 107){\r\n                    response.isLogin = false;\r\n                }else{\r\n                    response.isLogin = false;\r\n                }\r\n\r\n                if(! response.isLogin){\r\n                    axios.defaults.headers.common['Authorization'] = '';\r\n                }else{\r\n                    this.#loginRemeber = response;\r\n                    setTimeout(()=>{\r\n                        this.#loginRemeber = undefined;\r\n                    }, 1000 * 60)\r\n                }\r\n                return callBack(response);\r\n            }\r\n        })\r\n    }\r\n\r\n    responseIsOk({status = undefined} = {}){\r\n        if( ! status){\r\n            return false;\r\n        }\r\n        return (status == '200' || status == '201') ;\r\n    }\r\n\r\n    responseCheck(response){\r\n\t\tlet status = response.status;\r\n\t\tlet {code, data} = response.data;\r\n        if(status == '200' || status == '201'){\r\n\t\t\treturn response\r\n\t\t}else{\r\n            log.error(response);\r\n\t\t\tthrow new Error(response.message);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport const windowUtil = new WindowUtil();","import { windowUtil, __serverApi } from \"../window/WindowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\n\r\nclass AccountController {\r\n\tconstructor() {\r\n\r\n\t}\r\n\r\n\tloginProcessing(param){\r\n\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\ttotal[k] = v;\r\n\t\t\t}\r\n\t\t\treturn total;\r\n\t\t},{});\r\n\t\treturn axios.post(__serverApi + '/login-processing', JSON.stringify(param), {\r\n\t\t\theaders:{\r\n\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t}\r\n\t\t})\r\n\t\t.then(response=>{\r\n\t\t\tif(windowUtil.responseIsOk(response) && top.constructor.name == 'Window'){\r\n\t\t\t\treturn response.data;\r\n\t\t\t}\r\n\t\t\treturn response;\t\r\n\t\t}).catch(err=>{\r\n\t\t\tlog.error('loginProcessing error : ', err.message);\r\n\t\t\taxios.defaults.headers.common['Authorization'] = '';\r\n\t\t\tconsole.log(err);\r\n\t\t\tif(err.response){\r\n\t\t\t\treturn err.response.data;\r\n\t\t\t}else{\r\n\t\t\t\treturn err.message\r\n\t\t\t}\r\n\t\t\t\r\n\t\t})\r\n\t}\r\n\tgetAccountInfo(){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/account/search/get-account-info`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response=>response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC getAccountInfo error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tupdateSimpleAccountInfo(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/account/update/simple-account-info`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createPermitWokrspaceInAccount error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n}\r\nexport const accountController = new AccountController();","import { windowUtil, __serverApi } from \"../window/WindowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\n\r\nclass ApiS3Controller {\r\n\tconstructor() {\r\n\t}\r\n\tgeneratePutObjectPresignedUrl(param){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t}\r\n\t\t\t\treturn total;\r\n\t\t\t},{});\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/generate-presigned-url/create/`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC sendChatting error', err);\r\n\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('sendChatting login error ::: ', error.message);\r\n\t\t\tlog.error('sendChatting login error stack ::: ', error.stack);\r\n\t\t\treturn undefined;\r\n\t\t});\r\n\t}\r\n\tgenerateGetObjectPresignedUrl(param){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t}\r\n\t\t\t\treturn total;\r\n\t\t\t},{});\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/generate-presigned-url/search/`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC sendChatting error', err);\r\n\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('sendChatting login error ::: ', error.message);\r\n\t\t\tlog.error('sendChatting login error stack ::: ', error.stack);\r\n\t\t\treturn undefined;\r\n\t\t});\r\n\t}\r\n}\r\nexport const apiS3Controller = new ApiS3Controller();","import { windowUtil, __serverApi } from \"../window/WindowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\n\r\nclass ChattingController {\r\n\tconstructor() {\r\n\r\n\t}\r\n\r\n\tsendChatting(param){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n                    if(v != undefined && v != ''){\r\n                        total[k] = v;\r\n                    }\r\n                    return total;\r\n                },{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/chatting/create/send-chatting`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC sendChatting error', err);\r\n\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('sendChatting login error ::: ', error.message);\r\n\t\t\tlog.error('sendChatting login error stack ::: ', error.stack);\r\n\t\t\treturn undefined;\r\n\t\t});\r\n\t}\t\r\n\tdeleteChatting(param){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n                    if(v != undefined && v != ''){\r\n                        total[k] = v;\r\n                    }\r\n                    return total;\r\n                },{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/chatting/delete/`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC sendChatting error', err);\r\n\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('sendChatting login error ::: ', error.message);\r\n\t\t\tlog.error('sendChatting login error stack ::: ', error.stack);\r\n\t\t\treturn undefined;\r\n\t\t});\r\n\t}\r\n\tsearchChattingList(param){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tlet {workspaceId, roomId} = param;\r\n\t\t\t\tlet queryString = Object.entries(param)\r\n\t\t\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId' && k != 'roomId')\r\n\t\t\t\t\t.map(([k,v]) => `${k}=${v}`).join('&')\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/chatting/search/chatting-list/${workspaceId}/${roomId}?${queryString}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC searchChatting error' , err);\r\n\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('searchChatting login error ::: ', error.message);\r\n\t\t\tlog.error('searchChatting login error stack ::: ', error.stack);\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n}\r\nexport const chattingController = new ChattingController();","import { windowUtil, __serverApi } from \"../window/WindowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\n\r\nclass EmoticonController {\r\n\tconstructor() {\r\n    }\r\n\r\n\tcreateEmotionReaction(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/emoticon/create/reaction`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createEmotion error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n    deleteEmotion(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/emoticon/delete/`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC deleteEmotion error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tgetIsReaction(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tlet {workspaceId} = param;\r\n\t\t\t\tlet queryString = Object.entries(param)\r\n\t\t\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId')\r\n\t\t\t\t\t.map(([k,v]) => {\r\n\t\t\t\t\t\tif(v instanceof Array){\r\n\t\t\t\t\t\t\tv = v.map(val=>`${k}=${val}`).join('&')\r\n\t\t\t\t\t\t\treturn v;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn `${k}=${v}`\r\n\t\t\t\t\t}).join('&')\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/emoticon/search/is-reaction?${queryString}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC searchMyJoinedRoomList error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\t\r\n}\r\nexport const emoticonController = new EmoticonController();","import { windowUtil, __serverApi } from \"../window/WindowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\n\r\nclass EventStreamController {\r\n    #source;\r\n    #isConnectSource = false;\r\n\tprevWorkspaceId;\r\n    constructor(){\r\n\r\n    }\r\n\r\n\tinitWorkspaceStream(param, EventSource, eventSendObj){\r\n        let {workspaceId} = param;\r\n        console.log(top.EventSource);\r\n        if( ! EventSource) EventSource = top?.EventSource;\r\n\t\tif(this.prevWorkspaceId == workspaceId && (this.source?.readyState == 1 || this.source?.readyState == 0)){\r\n            return;\r\n        }else if(this.prevWorkspaceId != workspaceId && (this.source?.readyState == 1 || this.source?.readyState == 0)){\r\n            this.source.close();\r\n        }\r\n        \r\n        this.prevWorkspaceId = workspaceId;\r\n\r\n        this.source = new EventSource(`${__serverApi}/api/event-stream/workspace/${workspaceId}`, {\r\n            headers: {\r\n                'Authorization' : axios.defaults.headers.common['Authorization'],\r\n            },\r\n            withCredentials : ! top.__isLocal\r\n        });\r\n\r\n        this.source.onmessage = (event) => {\r\n            let {data, lastEventId, origin, type} = event;\r\n            data = JSON.parse(data);\r\n            log.debug('event stream data ::: ', data);\r\n\r\n            let eventName = data.serverSentStreamType.split('_').map((e, i)=>{\r\n                if(i == 0){\r\n                    return e.toLowerCase(); \r\n                }\r\n                return e.charAt(0) + e.substring(1).toLowerCase();\r\n            }).join('');\r\n\r\n            log.debug('on message: ', event.data, 'eventName ::', eventName);\r\n\r\n            if(this[eventName]){\r\n                this[eventName](eventName, data);\r\n                return ;\r\n            }\r\n            if(eventSendObj.webEventSend){\r\n                eventSendObj.webEventSend(eventName, data);\r\n            }else{\r\n                eventSendObj.send(eventName, data);\r\n            }\r\n        };\r\n\r\n        this.source.onerror = (error) => {\r\n            log.error('on stream err: ', error);\r\n            //log.debug('source ::: ', this.source);\r\n            /*this.#isConnectSource = false;\r\n            windowUtil.isLogin( result => {\r\n                if( ! result.isLogin){\r\n                    axios.defaults.headers.common['Authorization'] = '';\r\n                    this.source.close();\r\n                    this.#send('needLoginRequest', result);\r\n                }\r\n            })*/\r\n            //연결 실패되면 계속 시도하기에 임시 조치로 close\r\n            //this.source.close();\r\n            //stop();\r\n        };\r\n        this.source.onopen = (success) => {\r\n            log.debug('on success: ', success)\r\n        }\r\n        /*\r\n        * This will listen only for events\r\n        * similar to the following:\r\n        *\r\n        * event: notice\r\n        * data: useful data\r\n        * id: someid\r\n        this.source.addEventListener(\"notice\", (e) => {\r\n            log.debug('event notice', e.data);\r\n        });\r\n        */\r\n\r\n        /*\r\n        * Similarly, this will listen for events\r\n        * with the field `event: update`\r\n        this.source.addEventListener(\"update\", (e) => {\r\n            log.debug('event update ::: ',e.data);\r\n        });\r\n        */\r\n\r\n        /*\r\n        * The event \"message\" is a special case, as it\r\n        * will capture events without an event field\r\n        * as well as events that have the specific type\r\n        * `event: message` It will not trigger on any\r\n        * other event type.\r\n        this.source.addEventListener(\"message\", (e) => {\r\n            log.debug('message !!!!! : ', e.data);\r\n        });\r\n        */\r\n        //}\r\n\t}\r\n\r\n}\r\nexport const eventStreamController = new EventStreamController();","import { windowUtil, __serverApi } from \"../window/WindowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\nclass NoticeBoardController {\r\n\tconstructor() {\r\n\r\n    }\r\n\r\n    createNoticeBoardGroup(param = {}){\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                param = Object.entries(param).reduce((total, [k,v]) => {\r\n                    if(v != undefined && v != ''){\r\n                        total[k] = v;\r\n                    }\r\n                    return total;\r\n                },{});\r\n                return axios.post(`${__serverApi}/api/notice-board/create/group`, JSON.stringify(param), {\r\n                    headers:{\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                })\r\n                .then(windowUtil.responseCheck)\r\n                .then(response => response.data)\r\n                .catch(err=>{\r\n                    log.error('IPC createNoticeBoardGroup error : ', JSON.stringify(err));\r\n                    //axios.defaults.headers.common['Authorization'] = '';\r\n                    if(err.response){\r\n                        return err.response.data;\r\n                    }else{\r\n                        return err.message\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n    }\r\n\r\n    createNoticeBoard(param = {}){\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                param = Object.entries(param).reduce((total, [k,v]) => {\r\n                    if(v != undefined && v != ''){\r\n                        total[k] = v;\r\n                    }\r\n                    return total;\r\n                },{});\r\n                return axios.post(`${__serverApi}/api/notice-board/create/`, JSON.stringify(param), {\r\n                    headers:{\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                })\r\n                .then(windowUtil.responseCheck)\r\n                .then(response => response.data)\r\n                .catch(err=>{\r\n                    log.error('IPC createNoticeBoard error : ', JSON.stringify(err));\r\n                    //axios.defaults.headers.common['Authorization'] = '';\r\n                    if(err.response){\r\n                        return err.response.data;\r\n                    }else{\r\n                        return err.message\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n    }\r\n\r\n    createNoticeBoardDetail(param = {}){\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                param = Object.entries(param).reduce((total, [k,v]) => {\r\n                    if(v != undefined && v != ''){\r\n                        total[k] = v;\r\n                    }\r\n                    return total;\r\n                },{});\r\n                return axios.post(`${__serverApi}/api/notice-board/create/detail`, JSON.stringify(param), {\r\n                    headers:{\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                })\r\n                .then(windowUtil.responseCheck)\r\n                .then(response => response.data)\r\n                .catch(err=>{\r\n                    log.error('IPC createNoticeBoardDetail error : ', JSON.stringify(err));\r\n                    //axios.defaults.headers.common['Authorization'] = '';\r\n                    if(err.response){\r\n                        return err.response.data;\r\n                    }else{\r\n                        return err.message\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n    }\r\n    searchNoticeBoardList(param = {}, EventSource, eventSendObj){\r\n        if( ! EventSource) EventSource = top?.EventSource;\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                let {workspaceId, roomId} = param;\r\n                let queryString = Object.entries(param)\r\n                    .filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId' && k != 'roomId')\r\n                    .map(([k,v]) => `${k}=${v}`).join('&')\r\n                    //console.log('queryString ::: ', queryString);\r\n                //return axios.get(`${__serverApi}/api/notice-board/search/notice-board-list/${workspaceId}/${roomId}?${queryString}`, {\r\n                return new Promise(resolve=>{\r\n                    let source = new EventSource(`${__serverApi}/api/notice-board/search/notice-board-list/${workspaceId}/${roomId}?${queryString}`, {\r\n                        headers: {\r\n                            'Authorization' : axios.defaults.headers.common['Authorization'],\r\n                        },\r\n                        withCredentials : ! top.__isLocal\r\n                    });\r\n                    source.onmessage = (event) => {\r\n                        //console.log('test message :::: ',event);\r\n                        let {data, lastEventId, origin, type} = event;\r\n                        data = JSON.parse(data);\r\n                        if(eventSendObj.webEventSend){\r\n\t\t\t\t\t\t\teventSendObj.webEventSend('noticeBoardAccept', data);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\teventSendObj.send('noticeBoardAccept', data);\r\n\t\t\t\t\t\t}\r\n                    }\r\n                    source.onerror = (event) => {\r\n                        //console.log('searchNoticeBoardList error :::: ',event);\r\n                        source.close();\r\n                        resolve('done');\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n            log.error('error ::: ', error.message)\r\n            log.error('error stack :::', error.stack)\r\n            return undefined;\r\n        });\r\n    }\r\n\r\n    searchNoticeBoardDetailList(param = {}, EventSource, eventSendObj){\r\n        if( ! EventSource) EventSource = top?.EventSource;\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                let {workspaceId, roomId, noticeBoardId} = param;\r\n                if(! noticeBoardId){\r\n                    return;\r\n                }\r\n                let queryString = Object.entries(param)\r\n                    .filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId' && k != 'roomId' && k != 'noticeBoardId')\r\n                    .map(([k,v]) => `${k}=${v}`).join('&')\r\n                    //console.log('queryString ::: ', queryString);\r\n                //return axios.get(`${__serverApi}/api/notice-board/search/notice-board-detail-list/${workspaceId}/${roomId}/${noticeBoardId}?${queryString}`, {\r\n                return new Promise(resolve=>{\r\n                    let source = new EventSource(`${__serverApi}/api/notice-board/search/notice-board-detail-list/${workspaceId}/${roomId}/${noticeBoardId}?${queryString}`, {\r\n                        headers: {\r\n                            'Authorization' : axios.defaults.headers.common['Authorization'],\r\n                        },\r\n                        withCredentials : ! top.__isLocal\r\n                    });\r\n                    source.onmessage = (event) => {\r\n                        //console.log('test message :::: ',event);\r\n                        let {data, lastEventId, origin, type} = event;\r\n                        data = JSON.parse(data);\r\n                        if(eventSendObj.webEventSend){\r\n\t\t\t\t\t\t\teventSendObj.webEventSend('noticeBoardDetailAccept', data);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\teventSendObj.send('noticeBoardDetailAccept', data);\r\n\t\t\t\t\t\t}\r\n                    }\r\n                    source.onerror = (event) => {\r\n                        console.log('searchNoticeBoardDetailList error :::: ',event);\r\n                        source.close();\r\n                        resolve('done');\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n            log.error('error ::: ', error.message)\r\n            log.error('error stack :::', error.stack)\r\n            return undefined;\r\n        });\r\n    }\r\n\r\n    deleteNoticeBoard(param = {}){\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                param = Object.entries(param).reduce((total, [k,v]) => {\r\n                    if(v != undefined && v != ''){\r\n                        total[k] = v;\r\n                    }\r\n                    return total;\r\n                },{});\r\n                console.log('delete param',param)\r\n                return axios.post(`${__serverApi}/api/notice-board/delete/`, JSON.stringify(param), {\r\n                    headers:{\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                })\r\n                .then(windowUtil.responseCheck)\r\n                .then(response => response.data)\r\n                .catch(err=>{\r\n                    log.error('IPC deleteNoticeBoard error : ', JSON.stringify(err));\r\n                    //axios.defaults.headers.common['Authorization'] = '';\r\n                    if(err.response){\r\n                        return err.response.data;\r\n                    }else{\r\n                        return err.message\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n    }\r\n    deleteNoticeBoardGroup(param = {}){\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                param = Object.entries(param).reduce((total, [k,v]) => {\r\n                    if(v != undefined && v != ''){\r\n                        total[k] = v;\r\n                    }\r\n                    return total;\r\n                },{});\r\n\r\n                return axios.post(`${__serverApi}/api/notice-board/delete/group`, JSON.stringify(param), {\r\n                    headers:{\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                })\r\n                .then(windowUtil.responseCheck)\r\n                .then(response => response.data)\r\n                .catch(err=>{\r\n                    log.error('IPC deleteNoticeBoardGroup error : ', JSON.stringify(err));\r\n                    //axios.defaults.headers.common['Authorization'] = '';\r\n                    if(err.response){\r\n                        return err.response.data;\r\n                    }else{\r\n                        return err.message\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n    }\r\n    updateNoticeBoardOrder(param = []){\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                console.log('update param',param)\r\n                return axios.post(`${__serverApi}/api/notice-board/update/order`, JSON.stringify(param), {\r\n                    headers:{\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                })\r\n                .then(windowUtil.responseCheck)\r\n                .then(response => response.data)\r\n                .catch(err=>{\r\n                    log.error('IPC updateNoticeBoardOrder error : ', JSON.stringify(err));\r\n                    //axios.defaults.headers.common['Authorization'] = '';\r\n                    if(err.response){\r\n                        return err.response.data;\r\n                    }else{\r\n                        return err.message\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n    }\r\n    updateNoticeBoardDetailOrder(param = []){\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                return axios.post(`${__serverApi}/api/notice-board/update/detail-order`, JSON.stringify(param), {\r\n                    headers:{\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                })\r\n                .then(windowUtil.responseCheck)\r\n                .then(response => response.data)\r\n                .catch(err=>{\r\n                    log.error('IPC updateNoticeBoardDetailOrder error : ', JSON.stringify(err));\r\n                    //axios.defaults.headers.common['Authorization'] = '';\r\n                    if(err.response){\r\n                        return err.response.data;\r\n                    }else{\r\n                        return err.message\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n    }\r\n}\r\nexport const noticeBoardController = new NoticeBoardController();\r\n","import { windowUtil, __serverApi } from \"../window/WindowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\nclass RoomController {\r\n\tconstructor() {\r\n    }\r\n\r\n\tcreateRoom(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/room/create/`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createRoom error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tcreateMySelfRoom(param = {}){\r\n\t\tif( ! param.workspaceId || isNaN(parseInt(param.workspaceId))){\r\n\t\t\tlog.error(`createMySelfRoom workspaceId is ::: ${param.workspaceId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/room/create/my-self-room/${param.workspaceId}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createMySelfRoom error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tcreateRoomInAccount(param = []){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/room/create/in-account`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.then(data => {\r\n\t\t\t\t\tlog.debug('createRoomInAccount ::: ',data)\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createRoomInAccount error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tupdateRoomInAccoutOrder(param = []){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/room/update/order`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC updateRoomInAccoutOrder error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tcreateRoomFavorites(param){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/room/create/favorites`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createRoomFavorites error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tupdateRoomFavorites(param = []){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/room/update/favorites-order`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createRoom error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tsearchRoomList(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tlet {roomId} = param;\r\n\t\t\t\tlet queryString = Object.entries(param)\r\n\t\t\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'roomId')\r\n\t\t\t\t\t.map(([k,v]) => `${k}=${v}`).join('&')\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/room/search/list/${roomId}?${queryString}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC searchRoom error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tsearchMyJoinedRoomList(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tlet {workspaceId} = param;\r\n\t\t\t\tlet queryString = Object.entries(param)\r\n\t\t\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId')\r\n\t\t\t\t\t.map(([k,v]) => {\r\n\t\t\t\t\t\tif(v instanceof Array){\r\n\t\t\t\t\t\t\tv = v.map(val=>`${k}=${val}`).join('&')\r\n\t\t\t\t\t\t\treturn v;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn `${k}=${v}`\r\n\t\t\t\t\t}).join('&')\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/room/search/my-joined-list/${workspaceId}?${queryString}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC searchMyJoinedRoomList error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tsearchRoomFavoritesList(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tlet {workspaceId} = param;\r\n\t\t\t\tlet queryString = Object.entries(param)\r\n\t\t\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId')\r\n\t\t\t\t\t.map(([k,v]) => {\r\n\t\t\t\t\t\tif(v instanceof Array){\r\n\t\t\t\t\t\t\tv = v.map(val=>`${k}=${val}`).join('&')\r\n\t\t\t\t\t\t\treturn v;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn `${k}=${v}`\r\n\t\t\t\t\t}).join('&')\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/room/search/favorites-list/${workspaceId}?${queryString}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC searchMyJoinedRoomList error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tsearchRoomJoinedAccountList(param = {}, EventSource, eventSendObj){\r\n\r\n\t\tif( ! param.roomId || isNaN(parseInt(param.roomId))){\r\n\t\t\tlog.error(`searchRoomJoinedAccountList roomId is ::: ${param.roomId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tif( ! EventSource) EventSource = top?.EventSource;\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn new Promise(resolve=>{\r\n\t\t\t\t\tlet source = new EventSource(`${__serverApi}/api/room/search/in-account-list/${param.roomId}`, {\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t'Authorization' : axios.defaults.headers.common['Authorization'],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\twithCredentials : ! top.__isLocal\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsource.onmessage = (event) => {\r\n\t\t\t\t\t\t//console.log('test message :::: ',event);\r\n\t\t\t\t\t\tlet {data, lastEventId, origin, type} = event;\r\n\t\t\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t\t\t\tif(eventSendObj.webEventSend){\r\n\t\t\t\t\t\t\teventSendObj.webEventSend('roomInAccountAccept', data);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\teventSendObj.send('roomInAccountAccept', data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsource.onerror = (event) => {\r\n\t\t\t\t\t\t//console.log('searchRoomJoinedAccountList error :::: ',event);\r\n\t\t\t\t\t\tsource.close();\r\n\t\t\t\t\t\tresolve('done');\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\t\r\n\tgetRoomDetail(param = {}){\r\n\t\tif( ! param.roomId || isNaN(parseInt(param.roomId))){\r\n\t\t\tlog.error(`getRoomDetail roomId is ::: ${param.roomId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/room/search/detail/${param.roomId}`, {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type' : 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tisRoomFavorites(param = {}){\r\n\t\tif( ! param.roomId || isNaN(parseInt(param.roomId))){\r\n\t\t\tlog.error(`isRoomFavorites roomId is ::: ${param.roomId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/room/search/is-room-favorites/${param.roomId}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC isRoomFavorites error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n}\r\nexport const roomController = new RoomController();","import { windowUtil, __serverApi } from \"../window/WindowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\n\r\nclass WorkspaceController {\r\n\tconstructor() {\r\n\t}\r\n\tsearchWorkspaceMyJoined(param = {}){\r\n\t\treturn windowUtil.isLogin((result) => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/workspace/search/my-joined-list?page=${param.page}&size=${param.size}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response=>{\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('error : ', JSON.stringify(err));\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\tif( ! err.response.data.content){\r\n\t\t\t\t\t\t\terr.response.data.content = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tsearchNameSpecificList(param = {}){\r\n\t\treturn windowUtil.isLogin((result) => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/workspace/search/name-specific-list?page=${param.page}&size=${param.size}&workspaceName=${param.workspaceName}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response=>{\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('error : ', JSON.stringify(err));\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\tif( ! err.response.data.content){\r\n\t\t\t\t\t\t\terr.response.data.content = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tsearchWorkspaceInAccount(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tlet queryString = Object.entries(param)\r\n\t\t\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId')\r\n\t\t\t\t\t.map(([k,v]) => `${k}=${v}`).join('&')\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/workspace/search/joined-account-list/${param.workspaceId}?${queryString}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC searchWorkspaceInAccount error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tgetWorkspaceDetail(param = {}){\r\n\t\tif( ! param.workspaceId || isNaN(parseInt(param.workspaceId))){\r\n\t\t\tlog.error(`workspaceId is ::: ${param.workspaceId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/workspace/search/detail/${param.workspaceId}`, {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type' : 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tgetWorkspaceInAccountCount(param = {}){\r\n\t\tif( ! param.workspaceId || isNaN(parseInt(param.workspaceId))){\r\n\t\t\tlog.error(`workspaceId is ::: ${param.workspaceId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/workspace/search/count/${param.workspaceId}`, {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type' : 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tcreatePermitWokrspaceInAccount(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/workspace/create/permit`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createPermitWokrspaceInAccount error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tcreateGiveAdmin(param={}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/workspace/create/give-admin`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createPermitWokrspaceInAccount error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tsearchPermitRequestList(param = {}, EventSource, eventSendObj){\r\n\t\tif( ! param.workspaceId || isNaN(parseInt(param.workspaceId))){\r\n\t\t\tlog.error(`searchPermitRequestList workspaceId is ::: ${param.workspaceId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tif( ! EventSource) EventSource = top?.EventSource;\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\t//return axios.get(`${__serverApi}/api/workspace/search/permit-request-list/${param.workspaceId}`, {\r\n\t\t\t\treturn new Promise(resolve=>{\r\n\t\t\t\t\tlet source = new EventSource(`${__serverApi}/api/workspace/search/permit-request-list/${param.workspaceId}`, {\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t'Authorization' : axios.defaults.headers.common['Authorization'],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\twithCredentials : ! top.__isLocal\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsource.onmessage = (event) => {\r\n\t\t\t\t\t\t//console.log('test message :::: ',event);\r\n\t\t\t\t\t\tlet {data, lastEventId, origin, type} = event;\r\n\t\t\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t\t\t\tif(eventSendObj.webEventSend){\r\n\t\t\t\t\t\t\teventSendObj.webEventSend('workspacePermitRequestAccept', data);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\teventSendObj.send('workspacePermitRequestAccept', data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsource.onerror = (event) => {\r\n\t\t\t\t\t\t//console.log('searchPermitRequestList error :::: ',event);\r\n\t\t\t\t\t\tsource.close();\r\n\t\t\t\t\t\tresolve('done');\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tgetIsAdmin(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tlet queryString = Object.entries(param)\r\n\t\t\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId')\r\n\t\t\t\t\t.map(([k,v]) => `${k}=${v}`).join('&')\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/workspace/search/is-admin/${param.workspaceId}?${queryString}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC getIsAdmin error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tcreateWorkspaceJoined(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/workspace/create/joined`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createPermitWokrspaceInAccount error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\r\n\tcreateWorkspace(param={}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/workspace/create/`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createWorkspace error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n}\r\nexport const workspaceController = new WorkspaceController();","import { accountController } from \"./../controller/AccountController\"\r\nimport { apiS3Controller } from \"./../controller/ApiS3Controller\";\r\nimport { chattingController } from \"./../controller/ChattingController\";\r\nimport { emoticonController } from \"./../controller/EmoticonController\";\r\nimport { eventStreamController } from \"./../controller/EventStreamController\";\r\nimport { noticeBoardController } from \"./../controller/NoticeBoardController\";\r\nimport { roomController } from \"./../controller/RoomController\";\r\nimport { workspaceController } from \"./../controller/WorkspaceController\";\r\n\r\nimport { windowUtil } from \"./../window/WindowUtil\";\r\n\r\n/**\r\n * @author kimjoohyoung\r\n * @description 기본적으로 사용 할 preload 정의\r\n */\r\n\r\nlet permission;\r\n\r\nwindow.addEventListener('load', () => {\r\n\tNotification.requestPermission().then(result => {\r\n\t\tconsole.log(result);\r\n\t\tpermission = result;\r\n\t})\r\n\tif(globalHandler.loadInitRoomId){\r\n\t\tipcRenderer.webEventSend('roomChange', {roomId:globalHandler.loadInitRoomId});\r\n\t}\r\n\tif(globalHandler.loadInitNoticeBoardId){\r\n\t\tipcRenderer.webEventSend('noticeBoardChange', {noticeBoardId:globalHandler.loadInitNoticeBoardId});\r\n\t}\r\n})\r\n\r\nexport const globalHandler = new class GlobalHandler{\r\n\t#workspaceId;\r\n\tloadInitRoomId;\r\n\tloadInitNoticeBoardId;\r\n\t#option = {};\r\n\tconstructor(){\r\n\t\t//n : name, v : value, c : create_at, u : update_at\r\n\t\tlet queryString = new URLSearchParams(location.search);\r\n\t\tthis.#workspaceId = queryString.get('workspaceId');\r\n\t\tthis.loadInitRoomId = queryString.get('roomId');\r\n\t\tthis.loadInitNoticeBoardId = queryString.get('noticeBoardId');\r\n\t\tthis.#option = JSON.parse(localStorage.getItem('o'))?.reduce((t,e)=>{\r\n\t\t\tt[e.OPTION_NAME] = e;\r\n\t\t\treturn t;\r\n\t\t}, {}) || {};\r\n\r\n\t}\r\n\r\n\tresetWorkspace(){\r\n\t\tthis.#workspaceId = undefined;\r\n\t}\r\n\r\n\tset workspaceId(workspaceId){\r\n\t\tif(this.#workspaceId === workspaceId) return;\r\n\t\tthis.#workspaceId = workspaceId;\r\n\t\tipcRenderer.webEventSend('workspaceChange', {workspaceId : this.workspaceId});\r\n\t}\r\n\tget workspaceId(){\r\n\t\treturn this.#workspaceId\r\n\t}\r\n\r\n\tsetOption({name, value}){\r\n\t\tif( ! this.#option[name]) {\r\n\t\t\tthis.#option[name] = {\r\n\t\t\t\tOPTION_NAME : name,\r\n\t\t\t\tOPTION_VALUE : value,\r\n\t\t\t\tCREATE_AT : new Date().getTime(),\r\n\t\t\t\tUPDATE_AT : new Date().getTime(),\r\n\t\t\t};\r\n\t\t}else{\r\n\t\t\tthis.#option[name].OPTION_VALUE = value,\r\n\t\t\tthis.#option[name].UPDATE_AT = new Date().getTime();\r\n\t\t}\r\n\t\tlocalStorage.setItem('o', JSON.stringify( Object.values(this.#option)) );\r\n\t}\r\n\r\n\tgetOption(name){\r\n\t\t//console.log(this.#option, name);\r\n\t\treturn this.#option[name];\r\n\t}\r\n}\r\n\r\nexport const ipcRenderer = new class IpcRendererWeb{\r\n\t#send = {};\r\n\t#invoke = {};\r\n\t#connection = {};\r\n\tconstructor(){\r\n\r\n\t\t[\r\n\t\t\taccountController, apiS3Controller, \r\n\t\t\tchattingController, emoticonController, \r\n\t\t\teventStreamController, noticeBoardController,\r\n\t\t\troomController, workspaceController\r\n\t\t].flatMap(e=>{\r\n\t\t\treturn Object.getOwnPropertyNames(Object.getPrototypeOf(e)).filter(e=> e != 'constructor').map(name=>{\r\n\t\t\t\treturn [name, e]\r\n\t\t\t});\r\n\t\t}).forEach( ([name, clazz])=>{\r\n\t\t\tthis.#send[name] = clazz[name] \r\n\t\t\tthis.#invoke[name] = clazz[name] \r\n\t\t})\r\n\t}\r\n\tsend(name, param){\r\n\t\tif( ! this.#send[name] || ! this.#send[name] instanceof Function){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.#send[name](param, undefined, ipcRenderer);\r\n\t}\r\n\tinvoke(name, param){\r\n\t\tif( ! this.#invoke[name] || ! this.#invoke[name] instanceof Function){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\treturn this.#invoke[name](param, undefined, ipcRenderer);\r\n\t}\r\n\twebEventSend(eventName, data){\r\n\t\tif( ! this.#connection[eventName] || ! this.#connection[eventName] instanceof Function){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.#connection[eventName](undefined, data);\r\n\t}\r\n\ton(eventName, callback){\r\n\t\tthis.#connection[eventName] = callback;\r\n\t}\r\n\t/*\r\n\tsend : {},\r\n\tinvoke : {},\r\n\tconnection : {},\r\n\teventSend: (eventName, data) => {\r\n\t\tif( ! ipcRenderer.connection[eventName] instanceof Function){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tipcRenderer.connection[eventName](undefined, data);\r\n\t},\r\n\ton : (eventName, callback) => {\r\n\t\tconnection[eventName] = callback;\r\n\t}*/\r\n};\r\n\r\nconst electronEventTrigger = {\r\n\tobjectEventListener : {},\r\n\tonEvent : {},\r\n\ton : (eventName, callBack) => {\r\n\t\telectronEventTrigger.onEvent[eventName] = callBack;\r\n\t\tipcRenderer.on(eventName, (event, message) => {\r\n\t\t\telectronEventTrigger.trigger(eventName, event, message);\r\n\t\t})\r\n\t},\r\n\taddElectronEventListener : (eventName, callBack) => {\r\n\t\tif(electronEventTrigger.objectEventListener.hasOwnProperty(eventName)){\r\n\t\t\telectronEventTrigger.objectEventListener[eventName].push({ [callBack.name] : callBack });\r\n\t\t}else{\r\n\t\t\telectronEventTrigger.objectEventListener[eventName] = [{ [callBack.name] : callBack }];\r\n\t\t}\r\n\t\tipcRenderer.on(eventName, (event, message) => {\r\n\t\t\telectronEventTrigger.trigger(eventName, event, message);\r\n\t\t})\r\n\t},\r\n\tremoveElectronEventListener : (eventName, callBack) => {\r\n\t\tif(electronEventTrigger.objectEventListener.hasOwnProperty(eventName)){\r\n\t\t\tif(callBack){\r\n\t\t\t\telectronEventTrigger.objectEventListener[eventName] = electronEventTrigger.objectEventListener[eventName].filter(e=> ! e.hasOwnProperty(callBack.name))\r\n\t\t\t}else{\r\n\t\t\t\tdelete electronEventTrigger.objectEventListener[eventName]\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\ttrigger : (eventName, event, message) => {\r\n\t\tnew Promise(resolve=> {\r\n\t\t\tif( ! electronEventTrigger.objectEventListener.hasOwnProperty(eventName)){\r\n\t\t\t\tresolve();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telectronEventTrigger.objectEventListener[eventName].forEach(async obj => {\r\n\t\t\t\tObject.values(obj).forEach(async callBack => {\r\n\t\t\t\t\tif( ! callBack || ! callBack instanceof Function){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnew Promise(res=>{\t\r\n\t\t\t\t\t\ttry{\r\n\t\t\t\t\t\t\tif(eventName == 'checkForUpdates' || eventName == 'updateAvailable' || eventName == 'updateDownloaded'){\r\n\t\t\t\t\t\t\t\tcallBack(event,message);\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t\t\t\tcallBack(message);\r\n\t\t\t\t\t\t}catch(err){\r\n\t\t\t\t\t\t\tconsole.error(`${eventName} error message ::: `,err.message);\r\n\t\t\t\t\t\t\tconsole.error(`${eventName} error stack ::: `,err.stack);\r\n\t\t\t\t\t\t\tthrow new Error('');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tres();\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\tresolve();\r\n\t\t})\r\n\t\t\r\n\t\tnew Promise(resolve => {\r\n\t\t\tif( ! electronEventTrigger.onEvent[eventName] || ! electronEventTrigger.onEvent[eventName] instanceof Function){\r\n\t\t\t\tresolve();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttry{\r\n\t\t\t\telectronEventTrigger.onEvent[eventName](message);\r\n\t\t\t}catch(err){\r\n\t\t\t\tconsole.error(`${eventName} error message ::: `, err.message);\r\n\t\t\t\tconsole.error(`${eventName} error stack ::: `, err.stack);\r\n\t\t\t}\r\n\t\t\tresolve();\r\n\t\t})\r\n\t\t\r\n\t}\r\n};\r\n\r\nexport const myAPI = {\r\n\t/**\r\n\t * 단방향 ipc 통신\r\n\t * 보안상의 이유로ipcRenderer.send 전체 API를 직접 노출하지 않습니다. \r\n\t * Electron API에 대한 렌더러의 액세스를 가능한 한 많이 제한해야 합니다.\r\n\t */\r\n\t//setTitle : (param) => ipcRenderer.send('setTitle', param),\r\n\t/**\r\n\t * dialog:IPC 채널 이름 의 접두사는 코드에 영향을 미치지 않습니다. \r\n\t * 코드 가독성에 도움이 되는 네임스페이스 역할만 합니다.\r\n\t * 보안상의 이유로ipcRenderer.invoke 전체 API를 직접 노출하지 않습니다. \r\n\t * Electron API에 대한 렌더러의 액세스를 가능한 한 많이 제한해야 합니다. \r\n\t */\r\n\t//openFile : () => ipcRenderer.invoke('dialog:openFile'),\r\n\t\r\n\t/**\r\n\t * key-value가 아닌 함수는 일렉트론에서만쓰고 웹버전에서는 쓰지 않도록 합니다.\r\n\t * event.electronEventTrigger은 일렉트론 + 웹이 함께써야 하는 부분이 있어 예외입니다.\r\n\t */\r\n\r\n\tgetProjectPath : async () => `${location.origin}/`,\r\n\r\n\tcreateSubWindow : async (param) => {\r\n\t\t//open(url?: string | URL, target?: string, features?: string): WindowProxy | null;\r\n\t\tlet queryString = Object.entries(param)\r\n\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'pageName' && k != 'pageId')\r\n\t\t\t.map(([k,v]) => `${k}=${v}`).join('&')\r\n\t\twindow.open(`/mobile/create-sub-window/${param.pageName}?${queryString}`, param.pageId)\r\n\t},\r\n\r\n\tcloseRequest : async (param) => {},\r\n\t\r\n\tmaximizeRequest : async () => {},\r\n\r\n\tunmaximizeRequest : async () => {},\r\n\t\r\n\tminimizeRequest : async () => {},\r\n\t\r\n\trestoreRequest : async () => {},\r\n\t\r\n\tisMaximize : async () => false,\r\n\r\n\tresetWorkspaceId: async () => {\r\n\t\tglobalHandler.resetWorkspace();\r\n\t},\r\n\r\n\tgetWorkspaceId: async () => {\r\n\t\treturn globalHandler.workspaceId;\r\n\t},\r\n\r\n\tnotifications: async (param) => {\r\n\t\tlet content = param.content.join('\\n');\r\n\t\tcontent = content.substring(0,200) + (content.length > 200 ? '...' : '');\r\n\t\tif(permission == 'granted'){\r\n\t\t\tmyAPI.getProjectPath().then(path=>{\r\n\t\t\t\tlet noti = new Notification(param.fullName, { body: content, icon: path+'image/icon.icon' });\r\n\t\t\t\tnoti.onclick = () => {\r\n\t\t\t\t\tif(globalHandler.workspaceId != param.workspaceId){\r\n\t\t\t\t\t\tipcRenderer.webEventSend('workspaceChange', {workspaceId : param.workspaceId});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tipcRenderer.webEventSend('roomChange', {roomId : param.roomId});\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tnoti.close()\r\n\t\t\t\t}, 4000);\r\n\t\t\t})\r\n\t\t}else{\r\n\t\t\tlet html = Object.assign(document.createElement('div'), {\r\n\t\t\t\tinnerHTML : `\r\n\t\t\t\t\t<h1>${param.fullName}</h1>\r\n\t\t\t\t\t<div>${param.content}</div>\r\n\t\t\t\t`\r\n\t\t\t})\r\n\t\t\tObject.assign(html.style, {\r\n\t\t\t\tposition: 'fixed', right: '2vw', bottom: '2vh', borderRadius : '15px',\r\n\t\t\t\tbackground: '#e1e1e1cf', width: '40%', height: 'auto',\r\n\t\t\t\tzIndex: 9999, whiteSpace: 'break-spaces', overflowWrap: 'anywhere', \r\n\t\t\t\tdisplay: 'flex', flexDirection: 'column', alignItems: 'center',\r\n\t\t\t\tjustifyContent: 'flex-start', fontSize: '13px', paddingBottom: '5vh'\r\n\t\t\t})\r\n\t\t\thtml.onclick = () => {\r\n\t\t\t\tif(globalHandler.workspaceId != param.workspaceId){\r\n\t\t\t\t\tipcRenderer.webEventSend('workspaceChange', {workspaceId : param.workspaceId});\r\n\t\t\t\t}\r\n\t\t\t\tipcRenderer.webEventSend('roomChange', {roomId : param.roomId});\r\n\t\t\t}\r\n\t\t\tdocument.body.append(html);\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\thtml.remove();\r\n\t\t\t}, 4000);\r\n\t\t}\r\n\t},\r\n\r\n\tgetOption: async (optionName) => globalHandler.getOption(optionName),\r\n\tsetOption: async (param) => globalHandler.setOption(param),\r\n\r\n\tisLogin: async () => {\r\n\t\treturn windowUtil.isLogin(result=>{\r\n\t\t\treturn {isLogin : result.isLogin}\r\n\t\t})\r\n\t},\r\n\r\n\tgetServerUrl : async () => `${location.origin}/login-page`,\r\n\r\n\tpageChange : {\r\n\t\tchangeLoginPage : async () => top.location.href = '/mobile',\r\n\t\tchangeWokrspacePage : async () => top.location.href = '/mobile',\r\n\t\tchangeMainPage : async (param) => top.location.href = `/mobile/main?workspaceId=${param.workspaceId}`,\r\n\t},\r\n\t\r\n\tevent : {\r\n\t\telectronEventTrigger : electronEventTrigger,\r\n\t},\r\n\r\n\tstream : {\r\n\t\tinitWorkspaceStream : async (param) => ipcRenderer.send('initWorkspaceStream', param),\r\n\t},\r\n\r\n\r\n\r\n\taccount : {\r\n\t\tloginProcessing : async (param) => ipcRenderer.invoke('loginProcessing', param),\r\n\t\tgetAccountInfo : async () => ipcRenderer.invoke('getAccountInfo'),\r\n\t\tupdateSimpleAccountInfo : async (param) => ipcRenderer.invoke('updateSimpleAccountInfo', param)\r\n\t},\r\n\r\n\tchatting : {\r\n\t\tsendChatting : async (param) => ipcRenderer.invoke('sendChatting', param),\r\n\t\tdeleteChatting : async (param) => ipcRenderer.invoke('deleteChatting', param),\r\n\t\tsearchChattingList : async (param) => ipcRenderer.invoke('searchChattingList', param),\r\n\t},\r\n\t\r\n\tworkspace : {\r\n\t\tsearchWorkspaceMyJoined : async (param) => ipcRenderer.invoke('searchWorkspaceMyJoined', param),\r\n\t\tsearchNameSpecificList: async (param) => ipcRenderer.invoke('searchNameSpecificList', param),\r\n\t\tsearchWorkspaceInAccount : async (param) => ipcRenderer.invoke('searchWorkspaceInAccount', param),\r\n\t\tgetWorkspaceDetail : async (param) => ipcRenderer.invoke('getWorkspaceDetail', param),\r\n\t\tcreatePermitWokrspaceInAccount: async (param) => ipcRenderer.invoke('createPermitWokrspaceInAccount', param),\r\n\t\tcreateGiveAdmin : async (param) => ipcRenderer.invoke('createGiveAdmin', param),\r\n\t\tsearchPermitRequestList : async (param) => ipcRenderer.invoke('searchPermitRequestList', param),\r\n\t\tgetIsAdmin : async (param) => ipcRenderer.invoke('getIsAdmin', param),\r\n\t\tcreateWorkspaceJoined: async (param) => ipcRenderer.invoke('createWorkspaceJoined', param),\r\n\t\tcreateWorkspace : async (param) => ipcRenderer.invoke('createWorkspace', param),\r\n\t\tgetWorkspaceInAccountCount : async (param) => ipcRenderer.invoke('getWorkspaceInAccountCount', param),\r\n\t},\r\n\r\n\troom : {\r\n\t\tcreateRoom : async (param) => ipcRenderer.invoke('createRoom', param),\r\n\t\tcreateMySelfRoom : async (param)=> ipcRenderer.invoke('createMySelfRoom', param),\r\n\t\tcreateRoomInAccount : async (param) => ipcRenderer.invoke('createRoomInAccount', param),\r\n\t\tcreateRoomFavorites : async (param) => ipcRenderer.invoke('createRoomFavorites', param),\r\n\t\tupdateRoomInAccoutOrder : async (param) => ipcRenderer.invoke('updateRoomInAccoutOrder', param),\r\n\t\tupdateRoomFavorites : async (param) => ipcRenderer.invoke('updateRoomFavorites', param),\r\n\t\tsearchRoom : async (param) => ipcRenderer.invoke('searchRoom', param),\r\n\t\tsearchMyJoinedRoomList : async (param) => ipcRenderer.invoke('searchMyJoinedRoomList', param),\r\n\t\tsearchRoomFavoritesList : async (param) => ipcRenderer.invoke('searchRoomFavoritesList', param),\r\n\t\tsearchRoomJoinedAccountList : async (param) => ipcRenderer.invoke('searchRoomJoinedAccountList', param),\r\n\t\tgetRoomDetail : async (param) => ipcRenderer.invoke('getRoomDetail', param),\r\n\t\tisRoomFavorites : async (param) => ipcRenderer.invoke('isRoomFavorites', param)\r\n\t},\r\n\r\n\tnoticeBoard : {\r\n\t\tcreateNoticeBoard : async (param) => ipcRenderer.invoke('createNoticeBoard', param),\r\n\t\tcreateNoticeBoardGroup : async (param) => ipcRenderer.invoke('createNoticeBoardGroup', param),\r\n\t\tcreateNoticeBoardDetail : async (param) => ipcRenderer.invoke('createNoticeBoardDetail', param),\r\n\t\tdeleteNoticeBoard : async (param) => ipcRenderer.invoke('deleteNoticeBoard', param),\r\n\t\tdeleteNoticeBoardGroup : async (param) => ipcRenderer.invoke('deleteNoticeBoardGroup', param),\r\n\t\tupdateNoticeBoardOrder : async (param) => ipcRenderer.invoke('updateNoticeBoardOrder', param),\r\n\t\tupdateNoticeBoardDetailOrder : async (param) => ipcRenderer.invoke('updateNoticeBoardDetailOrder', param),\r\n\t\tsearchNoticeBoardList : async (param) => ipcRenderer.invoke('searchNoticeBoardList', param),\r\n\t\tsearchNoticeBoardDetailList : async (param) => ipcRenderer.invoke('searchNoticeBoardDetailList', param),\r\n\t},\r\n\ts3: {\r\n\t\tgeneratePutObjectPresignedUrl : async (param) => ipcRenderer.invoke('generatePutObjectPresignedUrl', param),\r\n\t\tgenerateGetObjectPresignedUrl : async (param) => ipcRenderer.invoke('generateGetObjectPresignedUrl', param),\r\n\t},\r\n\temoticon: {\r\n\t\tcreateEmotionReaction : async (param) => ipcRenderer.invoke('createEmotionReaction', param),\r\n\t\tgetIsReaction : async (param) => ipcRenderer.invoke('getIsReaction', param)\r\n\t}\r\n\r\n}\r\nwindow.myAPI = myAPI;\r\nconsole.log('????????????????');\r\nconsole.log(window.myAPI)","\r\nexport default new class NoticeBoardHandler{\r\n    #noticeBoardId\r\n    #noticeBoard = [];\r\n    #addNoticeBoardIdChangeListener = {};\r\n    #noticeBoardChangeDone;\r\n    #noticeBoardChangeAwait;\r\n    constructor(){\r\n\r\n    }\r\n\r\n    set addNoticeBoardIdChangeListener({name, callBack, runTheFirst}){\r\n        this.#addNoticeBoardIdChangeListener[name] = callBack;\r\n        if(runTheFirst && this.#noticeBoardId){\r\n            callBack(this);\r\n        }\r\n    }\r\n\r\n    get addNoticeBoardIdChangeListener(){\r\n        return this.#addNoticeBoardIdChangeListener;\r\n    }\r\n\r\n    set noticeBoardId(noticeBoardId){\r\n        if( ! noticeBoardId){\r\n            console.error('noticeBoardId is undefined');\r\n            return;\r\n        }\r\n        this.#noticeBoard = [];\r\n        this.#noticeBoardId = noticeBoardId;\r\n        let startCallbackPromise = Promise.all(\r\n            Object.values(this.#addNoticeBoardIdChangeListener).map(async callBack => {\r\n                return new Promise(res => {\r\n                    callBack(this);\r\n                    res();\r\n                })\r\n            })\r\n        )\r\n        if( ! this.#noticeBoardChangeAwait){\r\n            this.#noticeBoardChangeAwait = new Promise(resolve=>{\r\n                this.#noticeBoardChangeDone = resolve;\r\n                this.#noticeBoardChangeDone(startCallbackPromise);\r\n            })\r\n        }else{\r\n            this.#noticeBoardChangeAwait.then(() => {\r\n                startCallbackPromise.then(() => {\r\n                    this.#noticeBoardChangeAwait = new Promise(resolve => {\r\n                        this.#noticeBoardChangeDone = resolve;\r\n                    })\r\n                })\r\n            })\r\n        }\r\n    }\r\n\r\n    get noticeBoardId(){\r\n        return this.#noticeBoardId;\r\n    }\r\n\r\n    get noticeBoard(){\r\n        return this.#noticeBoard;\r\n    }\r\n\r\n    removeNoticeBoardIdChangeListener(name){\r\n        delete this.#addNoticeBoardIdChangeListener(name);\r\n    }\r\n\r\n}","\r\nexport default class ToolHandler{\r\n\r\n\tstatic processingElementPosition(element, target){\r\n\t\tlet {x, y, height} = target.getBoundingClientRect();\r\n\t\t\r\n\t\tlet elementTop = (y - element.clientHeight)\r\n\t\tlet elementLeft = (x - element.clientWidth)\r\n\t\tif(elementTop > 0){\r\n\t\t\telement.style.top = elementTop + 'px';\r\n\t\t}else{\r\n\t\t\telement.style.top = y + height + 'px';\r\n\t\t}\r\n\r\n\t\tif(elementLeft > 0){\r\n\t\t\telement.style.left = elementLeft + 'px'\r\n\t\t}else{\r\n\t\t\telement.style.left = x + width + 'px';\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\t#extendsElement;\r\n\t#defaultClass;\r\n\t#isInline = true;\r\n\t#toolButton;\r\n\t#identity;\r\n\t#connectedFriends = [];\r\n\t#buttonMap = {};\r\n\t/**\r\n\t * \r\n\t * @param {FreedomInterface} identity\r\n\t * @returns {FreedomInterface} \r\n\t */\r\n\tconstructor(identity){\r\n\t\tthis.#identity = identity;\r\n\t\t//다른 부분 선택시에 동작하지 않도록 수정 필요(에디터만 셀렉션체인지인 경우)\r\n\t\tdocument.addEventListener(\"selectionchange\", (event) => {\r\n\t\t\tlet selection = window.getSelection();\r\n\t\t\tif(! document.activeElement.classList.contains('free-will-editor')){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * None 현재 선택된 항목이 없습니다.\r\n\t\t\t * Caret 선택 항목이 축소됩니다(예: 캐럿이 일부 텍스트에 배치되지만 범위가 선택되지 않음).\r\n\t\t\t * Range 범위가 선택되었습니다.\r\n\t\t\t */\r\n\t\t\tif(selection.type == 'None' || ! this.#toolButton){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tlet findTarget = this.#connectedFriends.find(e=> selection.containsNode(e, true) || selection.containsNode(e, false))\r\n\t\t\tif(findTarget){\r\n\t\t\t\tthis.#toolButton.dataset.tool_status = 'connected';\r\n\t\t\t}else {\r\n\t\t\t\tthis.#toolButton.dataset.tool_status = 'blur';\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprocessingElementPosition(element, target = this.#toolButton){\r\n\t\tToolHandler.processingElementPosition(element, target);\r\n\t}\r\n\r\n\tisLastTool(tool){\r\n\t\tif(this.#identity.prototype.isPrototypeOf(tool)){\r\n\t\t\treturn tool === this.#connectedFriends.at(-1);\r\n\t\t}else{\r\n\t\t\tthrow new Error(`tool is not my identity, this tool name is ${tool.constructor.name}. but my identity name is ${this.#identity.name}`);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\t/**\r\n\t * @param {String}\r\n\t */\r\n\tset extendsElement(extendsElement){\r\n\t\tthis.#extendsElement = extendsElement;\r\n\t}\r\n\t\r\n\tget extendsElement(){\r\n\t\treturn this.#extendsElement;\r\n\t}\r\n\t\r\n\tset defaultClass(defaultClass){\r\n\t\tthis.#defaultClass = defaultClass;\r\n\t}\r\n\r\n\tget defaultClass(){\r\n\t\treturn this.#defaultClass;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {boolean} isInline \r\n\t */\r\n\tset isInline(isInline){\r\n\t\tthis.#isInline = isInline;\r\n\t}\r\n\t\r\n\t/**\r\n\t * @returns {boolean}\r\n\t */\r\n\tget isInline(){\r\n\t\treturn this.#isInline\r\n\t}\r\n\r\n\tset toolButton(toolButton){\r\n\t\tif( ! toolButton || ! toolButton.nodeType || toolButton.nodeType != Node.ELEMENT_NODE){\r\n\t\t\tthrow new Error('toolButton is not element');\r\n\t\t}\r\n\t\tthis.#toolButton = toolButton;\r\n\r\n\t}\r\n\t\r\n\tget toolButton(){\r\n\t\treturn this.#toolButton;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {FreedomInterface}\r\n\t */\r\n\tset connectedFriends(friend){\r\n\t\tif(friend.constructor != this.#identity){\r\n\t\t\tnew TypeError('is not my friend')\r\n\t\t}\r\n\t\t\r\n\t\tif(friend.isConnected){\r\n\t\t\tthis.#connectedFriends.push(friend);\r\n\t\t}else{\r\n\t\t\tthis.#connectedFriends = this.#connectedFriends.filter(e=>e.isConnected);\r\n\t\t}\r\n\t}\r\n\r\n\tget connectedFriends(){\r\n\t\treturn this.#connectedFriends;\r\n\t}\r\n\r\n}","import Line from '../component/Line'\r\n\r\nexport default class FreedomInterface extends HTMLElement {\r\n\r\n\tstatic globalMouseEvent = undefined;\r\n\tstatic lastClickElementPath = undefined;\r\n\tstatic globalClickEventPromiseResolve;\r\n\tstatic globalClickEventPromise = new Promise(resolve=>{\r\n\t\tthis.globalClickEventPromiseResolve = resolve;\r\n\t});\r\n\tstatic globalKeydownEventPromiseResolve;\r\n\tstatic globalKeydownEventPromise = new Promise(resolve=>{\r\n\t\tthis.globalKeydownEventPromiseResolve = resolve;\r\n\t})\r\n\tstatic globalSelectionChangeEventPromiseResolve;\r\n\tstatic globalSelectionChangeEventPromise = new Promise(resolve=>{\r\n\t\tthis.globalSelectionChangeEventPromiseResolve = resolve;\r\n\t})\r\n\tstatic{\r\n\t\tdocument.addEventListener('mousemove', (event) => {\r\n\t\t\t//mousePos = { x: event.clientX, y: event.clientY };\r\n\t\t\t//mousePosText.textContent = `(${mousePos.x}, ${mousePos.y})`;\r\n\t\t\tthis.globalMouseEvent = event;\r\n\t\t});\r\n\t\tdocument.addEventListener('mousedown', (event) => {\r\n\t\t\tthis.lastClickElementPath = event.composedPath();\r\n\t\t\tthis.globalClickEventPromiseResolve(event)\r\n\t\t\tthis.globalClickEventPromise = new Promise(resolve => {\r\n\t\t\t\tthis.globalClickEventPromiseResolve = resolve;\r\n\t\t\t})\r\n\t\t})\r\n\t\twindow.addEventListener('keydown', (event) => {\r\n\t\t\tthis.globalKeydownEventPromiseResolve(event);\r\n\t\t\tthis.globalKeydownEventPromise = new Promise(resolve=>{\r\n\t\t\t\tthis.globalKeydownEventPromiseResolve = resolve;\r\n\t\t\t})\r\n\t\t})\r\n\t\tdocument.addEventListener('selectionchange', (event) => {\r\n\t\t\tthis.globalSelectionChangeEventPromiseResolve(event);\r\n\t\t\tthis.globalSelectionChangeEventPromise = new Promise(resolve=>{\r\n\t\t\t\tthis.globalSelectionChangeEventPromiseResolve = resolve;\r\n\t\t\t})\r\n\t\t});\r\n\r\n\t}\r\n\tstatic isMouseInnerElement(element){\r\n\t\tif( ! this.globalMouseEvent) return;\r\n\t\tlet {clientX, clientY} = this.globalMouseEvent;\r\n\t\tlet {x, y, width, height} = element.getBoundingClientRect();\r\n\t\tlet isMouseInnerX = ((x + width) >= clientX && x <= clientX);\r\n\t\tlet isMouseInnerY = ((y + height) >= clientY && y <= clientY);\r\n\t\treturn (isMouseInnerX && isMouseInnerY);\r\n\t}\r\n\tstatic globalKeydownEventListener(element, callBack = ({oldEvent, newEvent})=>{}){\r\n\t\tlet oldEvent = undefined;\r\n\t\tlet newEvent = undefined;\r\n\t\tconst simpleObserver = () => {\r\n\t\t\tthis.globalKeydownEventPromise.then((event)=>{\r\n\t\t\t\tnewEvent = event;\r\n\t\t\t\tcallBack({oldEvent, newEvent});\r\n\t\t\t\toldEvent = event;\r\n\t\t\t\tsimpleObserver();\r\n\t\t\t})\r\n\t\t}\r\n\t\tsimpleObserver();\r\n\t}\r\n\tstatic globalSelectionChangeEventListener(element, callBack = ({oldEvent, newEvent})=>{}){\r\n\t\tlet oldEvent = undefined;\r\n\t\tlet newEvent = undefined;\r\n\t\tconst simpleObserver = () => {\r\n\t\t\tthis.globalSelectionChangeEventPromise.then((event)=>{\r\n\t\t\t\tnewEvent = event;\r\n\t\t\t\tcallBack({oldEvent, newEvent});\r\n\t\t\t\toldEvent = event;\r\n\t\t\t\tsimpleObserver();\r\n\t\t\t})\r\n\t\t}\r\n\t\tsimpleObserver();\r\n\t}\r\n\t/**\r\n\t * \r\n\t * @param {HTMLElement} element \r\n\t * @param {Function} callBack \r\n\t */\r\n\tstatic outClickElementListener(element, callBack = ({oldEvent, newEvent, isMouseOut = false})=>{}){\r\n\r\n\t\tif(element == undefined || element?.nodeType != Node.ELEMENT_NODE){\r\n\t\t\tthrow new Error('element is not Element');\r\n\t\t}\r\n\r\n\t\tlet oldEvent = undefined;\r\n\t\tlet newEvent = undefined;\r\n\t\tconst simpleObserver = () => {\r\n\t\t\tthis.globalClickEventPromise.then((event)=>{\r\n\t\t\t\tlet isMouseOut = ! this.isMouseInnerElement(element);\r\n\t\t\t\tnewEvent = event;\r\n\t\t\t\tcallBack({oldEvent, newEvent, isMouseOut});\r\n\t\t\t\toldEvent = event;\r\n\t\t\t\tsimpleObserver();\r\n\t\t\t})\r\n\t\t}\r\n\t\tsimpleObserver();\r\n\t}\r\n\t\r\n\tstatic DeleteOption = class DeleteOption{\r\n\t\tstatic #DeleteOptionEnum = class DeleteOptionEnum{\r\n\t\t\tvalue;\r\n\t\t\tconstructor(value){\r\n\t\t\t\tthis.value = value;\r\n\t\t\t\tObject.freeze(this);\r\n\t\t\t}\r\n\t\t}\r\n\t\tstatic EMPTY_CONTENT_IS_DELETE = new this.#DeleteOptionEnum('empty_content_is_delete');\r\n\t\tstatic EMPTY_CONTENT_IS_NOT_DELETE = new this.#DeleteOptionEnum('empty_content_is_not_delete');\r\n\t\tvalue;\r\n\t\tstatic{\r\n\t\t\tObject.freeze(this);\r\n\t\t}\r\n\t\tconstructor(value){\r\n\t\t\tthis.value = value;\r\n\t\t\tObject.freeze(this);\r\n\t\t}\r\n\t}\r\n\r\n\t#isLoaded = false;\r\n\tTool;\r\n\t#connectedAfterCallback = () => {}\r\n\t#connectedAfterOnlyOneCallback = ()=> {}\r\n\t#disconnectedAfterCallback = ()=> {}\r\n\t#connectedChildAfterCallback = () => {}\r\n\t#disconnectedChildAfterCallback = () => {}\r\n\t#deleteOption;\r\n\tparentEditor;\r\n\t#childListObserver = new MutationObserver( (mutationList, observer) => {\r\n\t\tmutationList.forEach((mutation) => {\r\n\t\t\tlet {addedNodes, removedNodes} = mutation;\r\n\t\t\tlet connectedChildPromise = new Promise(resolve => {\r\n\t\t\t\tif(addedNodes.length != 0){\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet resultList;\r\n\t\t\t\t\tif( ! this.constructor.toolHandler.isInline){\r\n\t\t\t\t\t\tlet lastItemIndex;\r\n\t\t\t\t\t\tresultList = [...addedNodes].map((e,i)=>{\r\n\t\t\t\t\t\t\tif( ! e.classList?.contains(Line.toolHandler.defaultClass)){\r\n\t\t\t\t\t\t\t\tlet lineElement = this.parentEditor.createLine();\r\n\t\t\t\t\t\t\t\tlineElement.replaceChildren(e);\r\n\t\t\t\t\t\t\t\tthis.append(lineElement);\r\n\t\t\t\t\t\t\t\tif( i == addedNodes.length - 1){\r\n\t\t\t\t\t\t\t\t\tlastItemIndex = i;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn lineElement;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn e;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t//if(lastItemIndex){\r\n\t\t\t\t\t\t//\tresultList[lastItemIndex].line.lookAtMe();\r\n\t\t\t\t\t\t//}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tresultList = addedNodes;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.connectedChildAfterCallback(resultList);\r\n\t\t\t\t\t//this.connectedChildAfterCallback(addedNodes);\r\n\t\t\t\t}\r\n\t\t\t\tresolve();\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\tlet disconnectedChildPromise = new Promise(resolve => {\r\n\t\t\t\tif(removedNodes.length != 0){\r\n\t\t\t\t\tthis.disconnectedChildAfterCallback(removedNodes);\r\n\t\t\t\t}\r\n\t\t\t\tresolve();\r\n\t\t\t})\r\n\t\t\t\r\n\t\t})\r\n\t});\r\n\tconstructor(Tool, dataset, {deleteOption = FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_DELETE} = {}){\r\n\t\tsuper();\r\n\t\tthis.#childListObserver.disconnect();\r\n\t\tthis.#childListObserver.observe(this, {childList:true})\r\n\t\tthis.#deleteOption = deleteOption;\r\n\t\tthis.Tool = Tool;\r\n\t\tthis.classList.add(this.constructor.toolHandler.defaultClass)\r\n\r\n\t\tdocument.addEventListener('selectionchange', this.removeFun, true);\r\n\r\n\t\tif(dataset){\r\n\t\t\tObject.assign(this.dataset, dataset);\r\n\t\t}\r\n\t\t\r\n\t\tFreedomInterface.globalSelectionChangeEventListener(this, ({oldEvent, newEvent}) => {\r\n\t\t\tif(this.#deleteOption != FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE && this.isToolEmpty()){\r\n\t\t\t\tlet thisLine = this.parentEditor?.getLine(this);\r\n\t\t\t\tthis.remove();\r\n\t\t\t\tif(thisLine){\r\n\t\t\t\t\tthisLine.line.lookAtMe();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tif( ! this.constructor.toolHandler.isInline){\r\n\t\t\tFreedomInterface.globalKeydownEventListener(this, ({oldEvent, newEvent}) => {\r\n\t\t\t\tif(this.isCursor() && newEvent.key == 'ArrowDown' && ! this.parentLine.nextElementSibling){\r\n\t\t\t\t\tlet nextLine = this.parentEditor.createLine();\r\n\t\t\t\t\tnextLine.line?.lookAtMe();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tconnectedCallback(){\r\n\r\n\t\tif( ! this.#isLoaded){\r\n\t\t\t\r\n\t\t\tthis.#isLoaded = true;\r\n\t\t\tthis.constructor.toolHandler.connectedFriends = this;\r\n\t\t\tthis.parentEditor = this.closest('.free-will-editor');\r\n\t\t\tthis.parentLine = this.parentEditor?.getLine(this);\r\n\r\n\t\t\tif(this.childNodes.length == 0 && this.#deleteOption == FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE && (this.innerText.length == 0 || (this.innerText.length == 1 && this.innerText.charAt(0) == '\\n'))){\r\n\t\t\t\tlet sty = window.getComputedStyle(this);\r\n\t\t\t\tif(sty.visibility != 'hidden' || sty.opacity != 0){\r\n\t\t\t\t\tthis.innerText = '\\n';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(this.#deleteOption == FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_DELETE && (this.isToolEmpty() || this.childNodes.length == 0)){\r\n\t\t\t\tlet thisLine = this.parentEditor.getLine(this);\r\n\t\t\t\tthis.remove();\r\n\t\t\t\tif(thisLine){\r\n\t\t\t\t\tthisLine.line.lookAtMe();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\tif(this.shadowRoot){\r\n\t\t\t\t//this.parentLine.prepend(document.createTextNode('\\u00A0'));\r\n\t\t\t\t//this.parentLine.prepend(document.createElement('br'));\r\n\t\t\t\t//this.before(document.createElement('br'));\r\n\t\t\t\t//this.parentLine.before(this.parentEditor.createLine());\r\n\t\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\t\tif( ! nextLine){\r\n\t\t\t\t\tthis.parentEditor.createLine().innerText = '\\n';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tnextLine.line.lookAtMe();\r\n\t\t\t\t}\r\n\t\t\t\t/*this.childNodes.forEach(e=>{\r\n\t\t\t\t\tif(e.nodeType == Node.TEXT_NODE){\r\n\t\t\t\t\t\te.remove()\r\n\t\t\t\t\t}\r\n\t\t\t\t})*/\r\n\t\t\t}\r\n\r\n\t\t\tthis.connectedAfterOnlyOneCallback();\r\n\r\n\t\t\t\r\n\t\t\t/*\r\n\t\t\tif(this.shadowRoot && (this.querySelectorAll('[slot]').length == 0 || this.childNodes.length == 0 || (this.childNodes.length == 1 && this.childNodes[0]?.tagName == 'BR'))){\r\n\t\t\t\t//this.parentLine.prepend(document.createElement('br'));\r\n\t\t\t\t\r\n\t\t\t\tlet slot = Object.assign(document.createElement('slot'),{\r\n\t\t\t\t\tname: 'empty-slot'\r\n\t\t\t\t});\r\n\t\t\t\tlet emptySpan = Object.assign(document.createElement('span'), {\r\n\t\t\t\t\tslot : 'empty-slot'\r\n\t\t\t\t});\r\n\t\t\t\t//emptySpan.style.opacity='0';\r\n\t\t\t\t//emptySpan.append(document.createTextNode('\\u200B'));\r\n\t\t\t\temptySpan.innerText = '\\n'\r\n\t\t\t\tthis.prepend(emptySpan);\r\n\t\t\t\tthis.shadowRoot.append(slot);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t*/\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.connectedAfterCallback();\r\n\t}\r\n\tdisconnectedCallback(){\r\n        this.#isLoaded = false;\r\n\t\ttry{\r\n\t\t\tthis.disconnectedAfterCallback();\r\n\t\t}catch(err){\r\n\t\t\tconsole.error(err)\r\n\t\t}finally{\r\n\t\t\tthis.constructor.toolHandler.connectedFriends = this;\r\n\t\t\tthis.#childListObserver.disconnect(this, {childList:true})\r\n\t\t\tdocument.removeEventListener('selectionchange', this.removeFun, true);\r\n\t\t}\r\n\t}\r\n\r\n\tisToolEmpty(){\r\n\t\tlet sty = window.getComputedStyle(this);\r\n\t\tif(sty.visibility == 'hidden' || sty.opacity == 0){\r\n\t\t\treturn false;\r\n\t\t}\r\n        return this.innerText.length == 0 || (this.innerText.length == 1 && (this.innerText == '\\n' || this.innerText == '\\u200B'));\r\n    }\r\n\r\n\tisCursor(){\r\n\t\tlet selection = window.getSelection();\r\n\t\tif(! document.activeElement.classList.contains('free-will-editor')){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif(selection.type == 'None'){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn selection.containsNode(this, true) || selection.containsNode(this, false)\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Function}\r\n\t */\r\n\tset connectedAfterCallback(connectedAfterCallback){\r\n\t\tthis.#connectedAfterCallback = connectedAfterCallback;\r\n\t}\r\n\r\n\t/**\r\n\t * @returns {Function}\r\n\t */\r\n\tget connectedAfterCallback(){\r\n\t\treturn this.#connectedAfterCallback;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Function}\r\n\t */\r\n\tset connectedAfterOnlyOneCallback(connectedAfterOnlyOneCallback){\r\n\t\tthis.#connectedAfterOnlyOneCallback = connectedAfterOnlyOneCallback;\r\n\t}\r\n\t\r\n\t/**\r\n\t * @returns {Function}\r\n\t */\r\n\tget connectedAfterOnlyOneCallback(){\r\n\t\treturn this.#connectedAfterOnlyOneCallback;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Function}\r\n\t */\r\n\tset disconnectedAfterCallback(disconnectedAfterCallback){\r\n\t\tthis.#disconnectedAfterCallback = disconnectedAfterCallback;\r\n\t}\r\n\r\n\t/**\r\n\t * @returns {Function}\r\n\t */\r\n\tget disconnectedAfterCallback(){\r\n\t\treturn this.#disconnectedAfterCallback;\r\n\t}\r\n \r\n\t/**\r\n\t * @param {Function}\r\n\t */\r\n\tset connectedChildAfterCallback(connectedChildAfterCallback){\r\n\t\tthis.#connectedChildAfterCallback = connectedChildAfterCallback;\r\n\t}\r\n\r\n\t/**\r\n\t * @returns {Function}\r\n\t */\r\n\tget connectedChildAfterCallback(){\r\n\t\treturn this.#connectedChildAfterCallback;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Function}\r\n\t */\r\n\tset disconnectedChildAfterCallback(disconnectedChildAfterCallback){\r\n\t\tthis.#disconnectedChildAfterCallback = disconnectedChildAfterCallback;\r\n\t}\r\n\r\n\t/**\r\n\t * @returns {Function}\r\n\t */\r\n\tget disconnectedChildAfterCallback(){\r\n\t\treturn this.#disconnectedChildAfterCallback;\r\n\t}\r\n}","import ToolHandler from \"../module/ToolHandler\"\r\nimport FreedomInterface from \"../module/FreedomInterface\"\r\nexport default class Line {\r\n\t#isLoaded = false;\r\n\t#prevParent;\r\n\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-line'\r\n\t});\r\n\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-line';\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = ``\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t * @param {HTMLElement} element \r\n\t * @returns {HTMLElement} \r\n\t */\r\n\tstatic getLine(element){\r\n\t\tlet line = undefined;\r\n\t\tif( ! element.parentElement){\r\n\t\t\treturn line;\r\n\t\t}else if(element.classList?.contains(Line.toolHandler.defaultClass)){\r\n\t\t\treturn element;\r\n\t\t}else if(element.parentElement.classList.contains(Line.toolHandler.defaultClass)){\r\n\t\t\tline = element.parentElement;\r\n\t\t}else{\r\n\t\t\tline = element.parentElement.closest(`.${Line.toolHandler.defaultClass}`);\r\n\t\t}\r\n\t\treturn line;\r\n\t}\r\n\tstatic getTool(element, TargetTool){\r\n\t\tlet tool = undefined;\r\n\t\t\r\n\t\tif( ! element.parentElement){\r\n\t\t\treturn tool;\r\n\t\t}else if(element.classList?.contains(TargetTool.toolHandler.defaultClass)){\r\n\t\t\treturn element\r\n\t\t}else if(element.parentElement.classList.contains(TargetTool.toolHandler.defaultClass)){\r\n\t\t\ttool = element.parentElement;\r\n\t\t}else{\r\n\t\t\ttool = element.parentElement.closest(`.${TargetTool.toolHandler.defaultClass}`);\r\n\t\t}\r\n\r\n\t\tif(! tool){\r\n\t\t\ttool = element.parentElement.querySelector(`.${TargetTool.toolHandler.defaultClass}`);\r\n\t\t}\r\n\t\treturn tool;\r\n\t}\r\n\t\r\n\tstatic isElementTextEmpty(element){\r\n        let sty = window.getComputedStyle(element);\r\n\t\tif(sty.visibility == 'hidden' || sty.opacity == 0){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t//let emptyString = (element.innerText.replace(/\\n+/g, '\\n') == '\\n' || element.innerText.replace(/\\u200B+/g, '\\u200B') == '\\u200B');\r\n        return element.innerText.length == 0 || (element.innerText.length == 1 && (element.innerText == '\\n' || element.innerText == '\\u200B'));\r\n    }\r\n\r\n\tlineElement\r\n\r\n\tconstructor(div){\r\n\t\t//super();\r\n\t\tif( ! div){\r\n\t\t\tthis.lineElement = Object.assign(document.createElement('div'),{\r\n\t\t\t\tclassName : Line.toolHandler.defaultClass\r\n\t\t\t})\r\n\t\t}else{\r\n\t\t\tthis.lineElement = div;\r\n\t\t\tthis.lineElement.classList.add(Line.toolHandler.defaultClass);\r\n\t\t}\r\n\t\tthis.lineElement.dataset.is_line = '';\r\n\t\t/*\r\n\t\tObject.getOwnPropertyNames(Object.getPrototypeOf(this)).forEach(functionName=>{\r\n\t\t\tif(functionName == 'constructor') return;\r\n\t\t\tthis.lineElement[functionName] = this[functionName];\r\n\t\t});\r\n\t\t*/\r\n\t\tthis.lineElement.line = this;\r\n\t\t/*\r\n\t\tthis.onkeyup = (event) => {\r\n\t\t\tif(event.key === 'Backspace' && this.innerText.length == 1 && (this.innerText.includes)){\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\t*/\r\n\t\t/*\r\n\t\tlet observer = new MutationObserver( (mutationList, observer) => {\r\n\t\t\tmutationList.forEach((mutation) => {\r\n\t\t\t\tif(Line.isElementTextEmpty(this.lineElement)){\r\n\t\t\t\t\tif(this.lineElement.childElementCount != 0){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//this.lineElement.innerText = '\\n';\r\n\t\t\t\t\twindow.getSelection().setPosition(this.lineElement, 0)\r\n\t\t\t\t\tthis.lineElement.focus();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t});\r\n\t\tobserver.observe(this.lineElement, {\r\n\t\t\tchildList:true,\r\n\t\t\tsubtree: true\r\n\t\t})\r\n\t\t*/\r\n\t}\r\n\t/*\r\n\tconnectedCallback(){\r\n\t\tif( ! this.#isLoaded){\r\n            this.#isLoaded = true;\r\n\r\n\t\t\t\r\n\t\t\tif(this.innerText.length == 0 || (this.innerText.length == 1 && this.innerText.charAt(0) == '\\n')){\r\n\t\t\t\tthis.innerText = '\\n';\r\n\t\t\t\twindow.getSelection().setPosition(this, 1)\r\n\t\t\t\tthis.focus();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\tdisconnectedCallback(){\r\n        this.#isLoaded = false;\r\n    }\r\n\t*/\r\n\t/**\r\n\t * applyTool, cancelTool에서 3가지 경우의 수로 함수를 분기시킬 것 apply mng와 cancel mng class를 새로 만들것, \r\n\t * line이 할 일이 아니니 freedomPlusEditor로 옮길 것\r\n\t * --applyTool\r\n\t * 1. 범위 전체\r\n\t * 2. 범위이되 line이 같을 때 (textNode별로 처리 필요)\r\n\t * 3. start와 end가 다를 때(멀티라인)\r\n\t * --cancelTool\r\n\t * 1. 범위\r\n\t * 2. 범위 중 일부\r\n\t * 3. 멀티라인\r\n\t */\r\n\r\n\t/**\r\n\t * tool이 좌우 옆 또는 자식, 부모에서 동일한 tool임을 감지할 때 합치는 로직 필요\r\n\t */\r\n\t/**\r\n\t * \r\n\t * @param {*} tool \r\n\t * @param {*} range \r\n\t * @returns \r\n\t */\r\n\tasync #applyOnlyOneTool(tool, range){\r\n\t\treturn new Promise(resolve=>{\r\n\t\t\trange.surroundContents(tool);\r\n\t\t\tresolve(tool)\r\n\t\t});\r\n\t}\r\n\t\r\n\tasync #applyOnlyOneLine(range, tool, TargetTool){\r\n\t\treturn new Promise(resolve=>{\r\n\t\t\tlet {startOffset, endOffset, startContainer,endContainer} = range;\r\n\r\n\t\t\tlet selection = window.getSelection();\r\n\r\n\t\t\tlet startNodeToPrevNodeIndex = [...this.lineElement.childNodes].findIndex(e=>selection.containsNode(e, true)) - 1;\r\n\t\t\tlet isFirstNodeToStart = startNodeToPrevNodeIndex < 0;\r\n\r\n\t\t\t\r\n\t\t\tlet nodeList = [];\r\n\t\t\tfor(let i = startNodeToPrevNodeIndex + 1 ; true ; i += 1){\r\n\t\t\t\tif( ! this.lineElement.childNodes[i] || ! selection.containsNode(this.lineElement.childNodes[i], true)){\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tlet iter = document.createNodeIterator(this.lineElement.childNodes[i], NodeFilter.SHOW_TEXT)\r\n\t\t\t\tlet targetNode;\r\n\t\t\t\twhile(targetNode = iter.nextNode()){\r\n\t\t\t\t\tif(targetNode == endContainer){\r\n\t\t\t\t\t\t// this.lineElement.childNodes[i] == endContainer == targetNode\r\n\t\t\t\t\t\tlet clone = targetNode.cloneNode(true);\r\n\t\t\t\t\t\tclone.textContent = targetNode.textContent.substring(endOffset);\r\n\t\t\t\t\t\ttargetNode.after(clone);\r\n\t\t\t\t\t\ttargetNode.textContent = targetNode.textContent.substring(0, endOffset);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tnodeList.push(this.lineElement.childNodes[i]);\r\n\t\t\t}\r\n\t\t\t//nodeList.forEach(e=>e.remove())\r\n\t\t\t//prepend\r\n\t\t\ttool.append(...nodeList);\r\n\t\t\tif(isFirstNodeToStart){\r\n\t\t\t\tthis.lineElement.prepend(tool)\r\n\t\t\t}else{\r\n\t\t\t\tlet startTarget = this.lineElement.childNodes[startNodeToPrevNodeIndex];\r\n\t\t\t\tstartTarget.after(tool);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t/*\r\n\t\t\trange.setStart(startContainer, startOffset);\r\n\t\t\trange.setEnd(startContainer, startContainer.textContent.length);\r\n\t\t\trange.surroundContents(tool);\r\n\t\t\t\r\n\t\t\tlet targetNode = startContainer.nextSibling;\r\n\t\t\t//let lastPrevTool = undefined;\r\n\t\t\twhile(targetNode){\r\n\t\t\t\tconsole.log(targetNode)\r\n\t\t\t\tif(targetNode == endContainer){\r\n\t\t\t\t\tconsole.log(2)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif(targetNode.textContent == '' || TargetTool.prototype.isPrototypeOf(targetNode)){\r\n\t\t\t\t\tconsole.log(3)\r\n\t\t\t\t\ttargetNode = targetNode.nextSibling\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.log(targetNode);\r\n\t\t\t\trange.selectNode(targetNode);\r\n\t\t\t\trange.surroundContents(new TargetTool());\r\n\t\t\t\tconsole.log(4)\r\n\t\t\t\ttargetNode = targetNode.nextSibling\r\n\t\t\t}\r\n\r\n\t\t\tlet endTool = new TargetTool();\r\n\t\t\trange.setStart(endContainer, 0);\r\n\t\t\trange.setEnd(endContainer, endOffset);\r\n\t\t\trange.surroundContents(endTool);\r\n\t\t\tresolve(endTool);\r\n\t\t\t*/\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\tasync #applyMultipleLineAllBlock(range, tool ,TargetTool, endLine){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tlet fragment = range.extractContents();\r\n\t\t\ttool.append(...fragment.childNodes);\r\n\t\t\tthis.lineElement.append(tool);\r\n\t\t\tresolve(tool);\r\n\t\t})\r\n\t}\r\n\tasync #applyMultipleLineAll(range, tool, TargetTool, endLine){\r\n\t\treturn new Promise(resolve=>{\r\n\t\t\tlet {startOffset, endOffset, startContainer,endContainer} = range;\r\n\t\t\t\r\n\t\t\trange.setStart(startContainer, startOffset);\r\n\t\t\trange.setEnd(startContainer, startContainer.textContent.length);\r\n\t\t\trange.surroundContents(tool);\r\n\r\n\t\t\tlet targetStartLineItem = startContainer.nextSibling?.nextSibling;\r\n\t\t\t\r\n\t\t\tif(targetStartLineItem){\r\n\t\t\t\tlet itemRemoveList = [];\r\n\t\t\t\tlet itemAppendList = [];\r\n\t\t\t\twhile(targetStartLineItem){\r\n\t\t\t\t\tif(targetStartLineItem.nodeType == Node.ELEMENT_NODE){\r\n\t\t\t\t\t\tif(tool == targetStartLineItem){\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttool.append(targetStartLineItem);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\titemAppendList.push(targetStartLineItem.textContent);\r\n\t\t\t\t\t\titemRemoveList.push(targetStartLineItem);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttargetStartLineItem = targetStartLineItem.nextSibling;\t\r\n\r\n\t\t\t\t}\r\n\t\t\t\t[...tool.childNodes].find(e=>e.nodeType == Node.TEXT_NODE)?.appendData(itemAppendList.join(''));\r\n\t\t\t\titemRemoveList.forEach(e=>e.remove())\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(tool.parentElement != this.lineElement && tool.parentElement?.nextSibling){\r\n\t\t\t\t//20230817 멀티라인일시 첫번쨰 라인 중첩 서식 미동작 현상 수정을 위해 내용 변경\r\n\t\t\t\tlet nextTool = new TargetTool();\r\n\t\t\t\tnextTool.append(tool.parentElement.nextSibling);\r\n\t\t\t\ttool.parentElement.after(nextTool);\r\n\t\t\t\tlet nextItem = nextTool.nextSibling;\r\n\r\n\t\t\t\twhile(nextItem){\t\t\r\n\t\t\t\t\tif(nextTool == nextItem){\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnextTool.append(nextItem);\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tlet targetLine = Line.getLine(startContainer).nextElementSibling; \r\n\t\t\tlet middleTargetTool;\r\n\t\t\t\r\n\t\t\twhile(targetLine){\r\n\t\t\t\tif(targetLine === endLine){\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\t// 아래 주석 지우지 말 것, 중첩 자식 요소에서 미동작 또는 오류 발생시 아래 로직 주석 풀고 테스트 해볼 것\r\n\t\t\t\t// let middleTool = new TargetTool();\r\n\t\t\t\t// middleTool.append(...targetLine.childNodes);\r\n\t\t\t\t// targetLine.append(middleTool);\r\n\t\t\t\tmiddleTargetTool = new TargetTool()\r\n\t\t\t\trange.selectNodeContents(targetLine);\r\n\t\t\t\trange.surroundContents(middleTargetTool);\r\n\t\t\t\ttargetLine = targetLine.nextElementSibling;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(Line.prototype.isPrototypeOf(endContainer.line)){\r\n\t\t\t\tresolve(( ! middleTargetTool ? tool : middleTargetTool ));\r\n\t\t\t}else{\r\n\t\t\t\tlet endTool = new TargetTool();\r\n\t\t\t\trange.setStart(endContainer, 0);\r\n\t\t\t\trange.setEnd(endContainer, endOffset);\r\n\t\t\t\trange.surroundContents(endTool);\r\n\t\t\t\t// 분할 적용 되지 않도록 합친다 ex(<b>1</b><b>2</b> => <b>12</b>) \r\n\t\t\t\tlet targetEndLineItem = endContainer.previousSibling;\r\n\t\t\t\tif(targetEndLineItem){\r\n\t\t\t\t\tlet itemRemoveList = [];\r\n\t\t\t\t\tlet itemAppendList = [];\r\n\r\n\t\t\t\t\twhile(targetEndLineItem){\r\n\t\t\t\t\t\tif(targetEndLineItem.nodeType == Node.ELEMENT_NODE){\r\n\t\t\t\t\t\t\tendTool.prepend(targetEndLineItem);\r\n\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\tlet firstTextNode = [...targetEndLineItem.childNodes].find(e=>e.nodeType == Node.TEXT_NODE);\r\n\t\t\t\t\t\t\tlet moveTextList = [...endTool.childNodes].filter(e=>e.nodeType == Node.TEXT_NODE)\r\n\t\t\t\t\t\t\tmoveTextList.forEach(e=>{\r\n\t\t\t\t\t\t\t\te.textContent = firstTextNode.textContent + e.data\r\n\t\t\t\t\t\t\t\tfirstTextNode.remove();\r\n\t\t\t\t\t\t\t\tfirstTextNode = e;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\ttargetEndLineItem.append(firstTextNode);\r\n\t\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t//endTool.prepend(document.createTextNode(targetEndLineItem.textContent));\r\n\t\t\t\t\t\t\titemRemoveList.push(targetEndLineItem);\r\n\t\t\t\t\t\t\titemAppendList.unshift(targetEndLineItem.textContent)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttargetEndLineItem = targetEndLineItem.previousSibling;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//let targetTextNode = [...endTool.childNodes].find(e=>e.nodeType == Node.TEXT_NODE)\r\n\t\t\t\t\t//itemAppendList.push(targetTextNode.data);\r\n\t\t\t\t\t//targetTextNode.textContent = itemAppendList.join('');\r\n\t\t\t\t\t//endTool.append(targetTextNode)\r\n\t\t\t\t\t[...endTool.childNodes].find(e=>e.nodeType == Node.TEXT_NODE)?.appendData(itemAppendList.join(''));\r\n\t\t\t\t\t//endTool.prepend(document.createTextNode(itemAppendList.join('')))\r\n\t\t\t\t\t//itemRemoveList.forEach(e=>e.remove())\r\n\t\t\t\t}\r\n\t\t\t\tresolve(endTool);\r\n\t\t\t}\r\n\r\n\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t * @param {*} TargetTool \r\n\t * @param {*} range \r\n\t * @returns \r\n\t */\r\n\tasync applyTool(TargetTool, range, endLine){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tlet tool = new TargetTool();\r\n\t\t\tlet {startOffset, endOffset, startContainer,endContainer} = range;\r\n\r\n\t\t\t/*\r\n\t\t\tif(startContainer === endContainer){\r\n\t\t\t\tconsole.log('applyOnlyOneTool');\r\n\t\t\t\tthis.#applyOnlyOneTool(tool, range).then(tool=>{\r\n\t\t\t\t\tresolve(tool)\r\n\t\t\t\t})\r\n\t\t\t}*/\r\n\t\t\tif(this.lineElement.childNodes.length == 1 && this.lineElement.innerText == '\\n' && this.lineElement.childNodes[0].nodeName == 'BR'){\r\n\t\t\t\tthis.lineElement.childNodes[0].remove();\r\n\t\t\t}\r\n\t\t\tif(tool.shadowRoot || ! TargetTool.toolHandler.isInline){\r\n\t\t\t\tresolve(this.#applyMultipleLineAllBlock(range, tool, TargetTool, endLine));\r\n\t\t\t}else if(startContainer === endContainer && this.lineElement.innerText.length != range.toString().length){\r\n\t\t\t\tconsole.log('applyOnlyOneTool');\r\n\t\t\t\tthis.#applyOnlyOneTool(tool, range).then(tool=>{\r\n\t\t\t\t\tresolve(tool)\r\n\t\t\t\t})\r\n\t\t\t}else if(Line.getLine(startContainer) === Line.getLine(endContainer)){\r\n\t\t\t\tconsole.log('applyOnlyOneLine')\r\n\t\t\t\tthis.#applyOnlyOneLine(range, tool, TargetTool).then(endTool => {\r\n\t\t\t\t\tresolve(endTool)\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\tconsole.log('applyMultipleLineAll')\r\n\t\t\t\tthis.#applyMultipleLineAll(range, tool, TargetTool, endLine).then(endTool => {\r\n\t\t\t\t\tresolve(endTool)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tasync #cancelOnlyOneLine(range, tool, TargetTool){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\t// this로 childern 돌려서 TargetTool 타입 체크랑 nodeType로 바깥으로 빼는 로직 만들기\r\n\t\t\tlet {startOffset, endOffset, startContainer, endContainer} = range;\r\n\t\t\tthis.lineElement.childNodes.forEach(e=>{\r\n\t\t\t\tthis.#findCancels(e, TargetTool);\r\n\t\t\t});\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\tasync #cancelOnlyOneTool(range, tool, TargetTool){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tlet {startOffset, endOffset, startContainer, endContainer, commonAncestorContainer} = range;\r\n\t\t\t/*\r\n\t\t\tlet textNode = document.createTextNode(startContainer.textContent.substring(startOffset, endOffset));\r\n\t\t\tlet startNextSibling = (tool?.nextSibling  || endContainer.nextSibling);\r\n\t\t\tlet startPrevSibling = (tool?.previousSibling || startContainer.previousSibling);\r\n\t\t\t*/\r\n\t\t\tlet offset = endOffset - startOffset;\r\n\r\n\t\t\tlet leftText = undefined;\r\n\t\t\tlet rightText = undefined;\r\n\t\t\tlet leftList = [];\r\n\t\t\tlet rightList = [];\r\n\t\t\tlet targetWrap = undefined;\r\n\t\t\tlet targetText;\r\n\t\t\tif(commonAncestorContainer.nodeType == Node.TEXT_NODE && commonAncestorContainer.parentElement != this && ! TargetTool.prototype.isPrototypeOf(commonAncestorContainer.parentElement)){\r\n\t\t\t\tlet cloneRange = range.cloneRange();\r\n\t\t\t\tcloneRange.selectNode(commonAncestorContainer.parentElement);\r\n\t\t\t\ttargetText = cloneRange.cloneContents();\r\n\t\t\t}else{\r\n\t\t\t\ttargetText = range.cloneContents();\r\n\t\t\t}\r\n\r\n\t\t\tlet selection = window.getSelection()\r\n\r\n\t\t\tif(tool.childNodes.length > 1){\r\n\t\t\t\tlet list = [...tool.childNodes];\r\n\t\t\t\tlet index = list.findIndex(e=> selection.containsNode(e, true) || selection.containsNode(e, false))\r\n\t\t\t\ttargetWrap = list[index]\r\n\t\t\t\tleftList = list.slice(0, index);\r\n\t\t\t\trightList = list.slice(index + 1);\r\n\t\t\t}\r\n\t\t\t\r\n\r\n\t\t\tif(startContainer.textContent.length != offset){\r\n\t\t\t\tleftText = startContainer.textContent.substring(0, startOffset);\t\t\t\r\n\t\t\t\trightText = offset <= 1 ? startContainer.textContent.substring(startOffset + 1) : startContainer.textContent.substring(startOffset + offset);\r\n\t\t\t\tif(targetWrap != undefined){\r\n\t\t\t\t\tlet cloneLeft = targetWrap.cloneNode(false);\r\n\t\t\t\t\tcloneLeft.textContent = leftText;\r\n\t\t\t\t\tleftText = cloneLeft; \r\n\t\t\t\t\tlet cloneRight = targetWrap.cloneNode(false);\r\n\t\t\t\t\tcloneRight.textContent = rightText;\r\n\t\t\t\t\trightText = cloneRight; \r\n\t\t\t\t\ttargetWrap.remove();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tleftText = document.createTextNode(leftText);\r\n\t\t\t\t\trightText = document.createTextNode(rightText);\r\n\t\t\t\t}\r\n\t\t\t\tleftList.unshift(leftText);\r\n\t\t\t\trightList.push(rightText);\r\n\t\t\t}\r\n\t\t\t//tool.replaceChildren(...leftList, targetText, ...rightList)\r\n\r\n\t\t\tlet leftElement = undefined;\r\n\t\t\tif(leftList.length != 0){\r\n\t\t\t\tleftElement = new TargetTool();\r\n\t\t\t\tleftElement.append(...leftList);\r\n\t\t\t}\r\n\t\t\tlet rightElement = undefined;\r\n\t\t\tif(rightList.length != 0){\r\n\t\t\t\trightElement = new TargetTool();\r\n\t\t\t\trightElement.append(...rightList);\r\n\t\t\t}\r\n\r\n\t\t\tlet appendList = [leftElement, targetText, rightElement].filter(e=>e);\r\n\t\t\tif(tool.previousSibling){\r\n\t\t\t\ttool.previousSibling.after(...appendList)\r\n\t\t\t}else if(tool.nextSibling){\r\n\t\t\t\ttool.nextSibling.before(...appendList);\r\n\t\t\t}else{\r\n\t\t\t\tthis.lineElement.append(...appendList);\r\n\t\t\t}\r\n\t\t\t/*\r\n\t\t\tif(startPrevSibling && startPrevSibling.nodeType == Node.TEXT_NODE){\r\n\t\t\t\tconsole.log(1)\r\n\t\t\t\tif(rightText){\r\n\t\t\t\t\tlet rightTool = new TargetTool();\r\n\t\t\t\t\trightTool.textContent = rightText;\r\n\t\t\t\t\tstartPrevSibling.after(rightTool);\r\n\t\t\t\t}\r\n\t\t\t\tstartPrevSibling.after(textNode);\r\n\t\t\t\tif(leftText){\r\n\t\t\t\t\tlet leftTool = new TargetTool()\r\n\t\t\t\t\tleftTool.textContent = leftText \r\n\t\t\t\t\tstartPrevSibling.after(leftTool);\r\n\t\t\t\t}\r\n\t\t\t}else if(startNextSibling && startNextSibling.nodeType == Node.TEXT_NODE){\r\n\t\t\t\tconsole.log(2)\r\n\t\t\t\tif(leftText){\r\n\t\t\t\t\tlet leftTool = new TargetTool()\r\n\t\t\t\t\tleftTool.textContent = leftText \r\n\t\t\t\t\tstartNextSibling.before(leftTool);\r\n\t\t\t\t}\r\n\t\t\t\tstartNextSibling.before(textNode);\r\n\t\t\t\tif(rightText){\r\n\t\t\t\t\tlet rightTool = new TargetTool();\r\n\t\t\t\t\trightTool.textContent = rightText;\r\n\t\t\t\t\tstartNextSibling.before(rightTool);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tconsole.log(3)\r\n\t\t\t\tif(leftText){\r\n\t\t\t\t\tlet leftTool = new TargetTool()\r\n\t\t\t\t\tleftTool.textContent = leftText \r\n\t\t\t\t\tthis.append(leftTool);\r\n\t\t\t\t}\r\n\t\t\t\tthis.append(document.createTextNode(textNode));\r\n\t\t\t\tif(rightText){\r\n\t\t\t\t\tlet rightTool = new TargetTool();\r\n\t\t\t\t\trightTool.textContent = rightText;\r\n\t\t\t\t\tthis.append(rightTool);\r\n\t\t\t\t}\r\n\t\t\t}*/\r\n\t\t\t//startContainer.remove();\r\n\t\t\ttool.remove();\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n\tasync #cancelMultipleLineAll(range, tool, TargetTool, endLine){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tlet {startOffset, endOffset, startContainer, endContainer} = range;\r\n\t\t\t\r\n\t\t\tlet endTool = Line.getTool(endContainer, TargetTool);\r\n\r\n\t\t\t// 파이어폭스에서 startContainer, endContainer가 나노 미세 컨트롤로 커서 위치와 관계 없이 비정상 동작 하는 현상 수정 필요\r\n\t\t\tlet startTextNode = document.createTextNode(startContainer.textContent.substring(startOffset, startContainer.textContent.length));\r\n\t\t\tlet endTextNode = document.createTextNode(endContainer.textContent.substring(0, endOffset));\r\n\t\t\t\r\n\t\t\tlet startLeftText = startContainer.textContent.substring(0, startOffset);\r\n\t\t\tlet endRightText = endContainer.textContent.substring(endOffset, endContainer.textContent.length)\r\n\r\n\t\t\tlet startNextSibling = tool?.nextSibling\r\n\t\t\tlet startPrevSibling = tool?.previousSibling\r\n\r\n\t\t\tlet endNextSibling = endTool?.nextSibling\r\n\t\t\tlet endPrevSibling = endTool?.previousSibling\r\n\r\n\t\t\tif(startOffset == 0){\r\n\t\t\t\t//console.log(1)\r\n\t\t\t\tthis.#findCancels(this.lineElement, TargetTool);\r\n\t\t\t}else\r\n\t\t\tif(startPrevSibling && startPrevSibling.nodeType == Node.TEXT_NODE){\r\n\t\t\t\t//console.log(2)\r\n\t\t\t\tstartPrevSibling.after(startTextNode);\r\n\t\t\t\tif(startLeftText){\r\n\t\t\t\t\tlet leftTool = new TargetTool()\r\n\t\t\t\t\tleftTool.textContent = startLeftText \r\n\t\t\t\t\tstartPrevSibling.after(leftTool);\r\n\t\t\t\t}\r\n\t\t\t}else if(startNextSibling && startNextSibling.nodeType == Node.TEXT_NODE){\r\n\t\t\t\t//console.log(3)\r\n\t\t\t\tif(startLeftText){\r\n\t\t\t\t\tlet leftTool = new TargetTool()\r\n\t\t\t\t\tleftTool.textContent = startLeftText \r\n\t\t\t\t\tstartNextSibling.before(leftTool);\r\n\t\t\t\t}\r\n\t\t\t\tstartNextSibling.before(startTextNode);\r\n\t\t\t}else{\r\n\t\t\t\t/*console.log(4)\r\n\t\t\t\tif(startLeftText){\r\n\t\t\t\t\tlet leftTool = new TargetTool()\r\n\t\t\t\t\tleftTool.textContent = startLeftText \r\n\t\t\t\t\tthis.append(leftTool);\r\n\t\t\t\t}\r\n\t\t\t\tthis.append(startTextNode);\r\n\t\t\t\t*/\r\n\t\t\t}\r\n\t\t\tif(tool){\r\n\t\t\t\ttool.remove();\r\n\t\t\t}\r\n\r\n\t\t\tlet nextLine = this.lineElement.nextElementSibling;\r\n\r\n\r\n\t\t\twhile(nextLine){\r\n\t\t\t\tif(nextLine == endLine){\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tnextLine.childNodes.forEach(e=>{\r\n\t\t\t\t\t//console.log(4);\r\n\t\t\t\t\tthis.#findCancels(e, TargetTool);\r\n\t\t\t\t})\r\n\t\t\t\tnextLine = nextLine.nextElementSibling;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(endOffset == endContainer.length){\r\n\t\t\t\t//console.log(1)\r\n\t\t\t\tthis.#findCancels(endLine, TargetTool);\r\n\t\t\t}else\r\n\t\t\tif(endPrevSibling && endPrevSibling.nodeType == Node.TEXT_NODE){\r\n\t\t\t\t//console.log(2)\r\n\t\t\t\tif(endRightText){\r\n\t\t\t\t\tlet rightTool = new TargetTool();\r\n\t\t\t\t\trightTool.textContent = endRightText;\r\n\t\t\t\t\tendPrevSibling.after(rightTool);\r\n\t\t\t\t}\r\n\t\t\t\tendPrevSibling.after(endTextNode);\r\n\t\t\t}else if(endNextSibling && endNextSibling.nodeType == Node.TEXT_NODE){\r\n\t\t\t\t//console.log(3)\r\n\t\t\t\tendNextSibling.before(endTextNode);\r\n\t\t\t\tif(endRightText){\r\n\t\t\t\t\tlet rightTool = new TargetTool();\r\n\t\t\t\t\trightTool.textContent = endRightText;\r\n\t\t\t\t\tendNextSibling.after(rightTool);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t/*console.log(4)\r\n\t\t\t\tif(endRightText){\r\n\t\t\t\t\tlet rightTool = new TargetTool();\r\n\t\t\t\t\trightTool.textContent = endRightText;\r\n\t\t\t\t\t//endLine.append(rightTool);\r\n\t\t\t\t}\r\n\t\t\t\tendLine.prepend(endTextNode);\r\n\t\t\t\t*/\r\n\t\t\t}\r\n\r\n\t\t\tif(endTool){\r\n\t\t\t\tendTool.remove();\r\n\t\t\t}\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n\tasync cancelTool(TargetTool, selection, endLine){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tlet {isCollapsed, anchorNode, anchorOffset} = selection;\r\n\t\t\tlet range = selection.getRangeAt(0);\r\n\t\t\tlet {startOffset, endOffset, startContainer, endContainer, commonAncestorContainer} = range;\r\n\t\t\tlet tool = Line.getTool(startContainer, TargetTool);\r\n\t\t\t/*\r\n\t\t\tif(startContainer === endContainer){\r\n\t\t\t\tif(startContainer.parentElement.childNodes.length == 1 \r\n\t\t\t\t\t&& startContainer.parentElement.childNodes[0] ==  startContainer\r\n\t\t\t\t\t&& startContainer.parentElement.childNodes[0] ==  endContainer\r\n\t\t\t\t\t&& endContainer.textContent.length == endOffset){\r\n\t\t\t\t\t// tool 범위 전체 선택인 경우\r\n\t\t\t\t\tthis.#cancelOnlyOneLine(range, tool, TargetTool).then(()=>{\r\n\t\t\t\t\t\tconsole.log('cancelOnlyOneLine 1')\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// 범위 중 일부\r\n\t\t\t\t\tthis.#cancelOnlyOneTool(range, tool, TargetTool).then(()=>{\r\n\t\t\t\t\t\tconsole.log('cancelOnlyOneTool')\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t*/\r\n\r\n\t\t\tif( ! tool){\r\n\t\t\t\tTargetTool.toolHandler.toolButton.dataset.tool_status = 'connected'\r\n\t\t\t\tresolve();\r\n\t\t\t}else{\r\n\t\t\t\tif(startContainer === endContainer && this.lineElement.innerText.length != range.toString().length){\r\n\t\t\t\t\tthis.#cancelOnlyOneTool(range, tool, TargetTool).then(()=>{\r\n\t\t\t\t\t\tconsole.log('cancelOnlyOneTool')\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t})\r\n\t\t\t\t}else if(Line.getLine(startContainer) === Line.getLine(endContainer)){\r\n\t\t\t\t\t// 하나만\r\n\t\t\t\t\t// tool 범위 전체 선택인 경우\r\n\t\t\t\t\tthis.#cancelOnlyOneLine(range, tool, TargetTool).then(()=>{\r\n\t\t\t\t\t\tconsole.log('cancelOnlyOneLine 2')\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.#cancelMultipleLineAll(range, tool, TargetTool, endLine).then(()=>{\r\n\t\t\t\t\t\tconsole.log('cancelMultipleLineAll')\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t}).catch(err=>console.error(err))\r\n\t\t\t\t}\r\n\t\t\t\tresolve();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t#findCancels(element, TargetTool){\r\n\t\tnew Promise(res=>{\r\n\t\t\tif(TargetTool.prototype.isPrototypeOf(element)){\r\n\t\t\t\tif(element.nextSibling){\r\n\t\t\t\t\telement.nextSibling.before(...element.childNodes);\r\n\t\t\t\t} else if(element.previousSibling){\r\n\t\t\t\t\telement.previousSibling.after(...element.childNodes);\r\n\t\t\t\t}else {\r\n\t\t\t\t\telement.parentElement.append(...element.childNodes);\r\n\t\t\t\t}\r\n\t\t\t\telement.remove();\r\n\t\t\t}else{\r\n\t\t\t\tif(element.nodeType == Node.ELEMENT_NODE){\r\n\t\t\t\t\telement.childNodes.forEach(e=>{\r\n\t\t\t\t\t\tthis.#findCancels(e, TargetTool);\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tres();\r\n\t\t})\r\n\t}\r\n\r\n\tlookAtMe(){\r\n\t\tlet sty = window.getComputedStyle(this.lineElement);\r\n\t\tif(sty.visibility == 'hidden' || sty.opacity == 0){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(this.lineElement.innerText.length == 0 || (this.lineElement.innerText.length == 1 && this.lineElement.innerText.charAt(0) == '\\n')){\r\n\t\t\tthis.lineElement.innerText = '\\n';\r\n\t\t}\r\n\t\tif(this.lineElement.isContentEditable){\r\n\t\t\tthis.lineElement.focus()\r\n\t\t\twindow.getSelection().setPosition(this.lineElement, this.lineElement.childNodes.length)\r\n\t\t}\r\n\t}\r\n\r\n}","import Line from '../component/Line'\r\n\r\nexport default class FreeWiilHandler extends HTMLElement{\r\n    static #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor'\r\n\t});\r\n\r\n    static #defaultClass = 'free-will-editor';\r\n\r\n    static createDefaultStyle(){\r\n        let defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle = defaultStyle;\r\n        }\r\n\t\tthis.#defaultStyle.textContent = `\r\n            .${this.defaultClass}{\r\n                height: inherit;\r\n                overflow: auto;\r\n                overflow-wrap: anywhere;\r\n                outline: none;\r\n                background-color: inherit;\r\n                padding-top: 0.6%;\r\n                padding-left: 0.5%;\r\n                padding-right: 0.8%;\r\n                -ms-overflow-style: none;\r\n                scrollbar-width: none;\r\n                display: block;\r\n            }\r\n            .${this.#defaultClass}::-webkit-scrollbar {\r\n                display: none;\r\n            }\r\n\r\n            .${this.#defaultClass} > :nth-child(1)::before{\r\n                content: attr(data-placeholder);\r\n                position: absolute;\r\n                color: #d1d1d1;\r\n                font-weight: 600;\r\n                font-family: revert;\r\n                cursor: text;\r\n            }\r\n\t\t`\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n    static get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n    static get defaultClass(){\r\n        return this.#defaultClass;\r\n    }\r\n\r\n    static set defaultClass(defaultClass){\r\n        this.#defaultClass = defaultClass;\r\n    }\r\n\r\n    constructor({isDefaultStyle = true} = {}){\r\n        super()\r\n        this.classList.add('free-will-editor');\r\n\r\n    }\r\n\r\n    blockBackspaceEvent(event){\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @returns {HTMLDivElement}\r\n     */\r\n    createLine(){\r\n        let line = new Line();\r\n        this.append(line.lineElement);\r\n        return line.lineElement;\r\n    }\r\n\r\n    getLineRange(selection = window.getSelection()){\r\n        return new Promise(resolve => {\r\n            let {anchorNode, focusNode} = selection; \r\n            let startAndEndLineObject;\r\n            if(anchorNode == this){\r\n                let allLine = [...this.children].filter(e=>e.classList.contains(`${Line.toolHandler.defaultClass}`))\r\n                startAndEndLineObject = {\r\n                    startLine : allLine[0],\r\n                    endLine : allLine.at(-1)\r\n                }\r\n                let range = selection.getRangeAt(0);\r\n                //selection.removeAllRanges();\r\n                let endLineChildNodes = [...startAndEndLineObject.endLine.childNodes].at(-1);\r\n                range.setStart(startAndEndLineObject.startLine.childNodes[0], 1);\r\n                range.setEnd(endLineChildNodes, endLineChildNodes.nodeType == Node.TEXT_NODE ? endLineChildNodes.textContent.length : startAndEndLineObject.endLine.childNodes.length);\r\n                selection.addRange(range);\r\n            }else{\r\n                let anchorNodeLine = Line.getLine(anchorNode);\r\n                let focusNodeLine = Line.getLine(focusNode);\r\n                if(anchorNodeLine == focusNodeLine){\r\n                    resolve({\r\n                        startLine: anchorNodeLine,\r\n                        endLine: focusNodeLine\r\n                    })\r\n                }\r\n                startAndEndLineObject = [...this.querySelectorAll(`.${Line.toolHandler.defaultClass}`)].reduce((obj,item,index)=>{\r\n                    if(item == anchorNodeLine || item == focusNodeLine){\r\n                        let key = 'startLine';\r\n                        if(obj.hasOwnProperty(key)){\r\n                            obj['endLine'] = item\r\n                        }else{\r\n                            obj[key] = item\r\n                        }\r\n                    }\r\n                    return obj;\r\n                },{})\r\n            }\r\n            resolve(startAndEndLineObject);\r\n        })\r\n    }\r\n\r\n    isNextLineExist(element){\r\n        let line = Line.getLine(element);\r\n\r\n        let nextLine = line.nextElementSibling;\r\n        if( ! nextLine){\r\n            return false;\r\n        }\r\n        return Line.prototype.isPrototypeOf(nextLine.line);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLElement} element \r\n     * @param {Object} param1 \r\n     * @returns {HTMLElement}\r\n     */\r\n    getNextLine(element, {focus = false} = {}){\r\n        let line = Line.getLine(element);\r\n        if( ! line){\r\n            return undefined;\r\n        }\r\n        \r\n        let nextLine = line.nextElementSibling;\r\n        if(nextLine && Line.prototype.isPrototypeOf(nextLine.line)){\r\n            if(focus){\r\n                nextLine.line.lookAtMe();\r\n            }\r\n            return nextLine;\r\n        }\r\n        return undefined;\r\n    }\r\n    \r\n    /**\r\n     * \r\n     * @param {HTMLElement} element \r\n     * @param {Object} param1 \r\n     * @returns {HTMLElement}\r\n     */\r\n    getPrevLine(element, {focus = false} = {}){\r\n        let line = Line.getLine(element);\r\n        if( ! line){\r\n            return undefined;\r\n        }\r\n        let nextLine = line.previousElementSibling;\r\n        if(nextLine && Line.prototype.isPrototypeOf(nextLine.line)){\r\n            if(focus){\r\n                nextLine.line.lookAtMe();\r\n            }\r\n            return nextLine;\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    getLine(element){\r\n        return Line.getLine(element);\r\n    }\r\n\r\n}","import FreeWillEditor from \"../FreeWillEditor\";\r\nimport Line from '../component/Line'\r\nimport FreedomInterface from \"../module/FreedomInterface\"\r\n\r\n// 추후 indexed db 사용 검토\r\nexport default class UndoManager{\r\n    #editor;\r\n    #history = [];\r\n    #historyIndex = 0;\r\n    #historyLimit = 50;\r\n    #UndoRedo = class UndoRedo{\r\n        #html\r\n        #time\r\n        constructor(html){\r\n            this.#html = html;\r\n            this.#time = new Date().getTime();\r\n        }\r\n        get html(){\r\n            return this.#html;\r\n        }\r\n        get time(){\r\n            return this.#time;\r\n        }\r\n    }\r\n\r\n    #lastCursorPositionRect;\r\n    //#isUndoSwitch = false;\r\n\r\n    /**\r\n     * \r\n     * @param {FreeWillEditor} targetEditor \r\n     */\r\n    //레인지를 저장해뒀다가 쓰기\r\n    constructor(targetEditor){\r\n        this.#editor = targetEditor;\r\n        //if(this.#editor.contentEditable == 'true'){\r\n            this.addCursorMove();\r\n            this.addUndoKey();\r\n            this.addUserInput();\r\n        //}\r\n\r\n    }\r\n\r\n    addCursorMove(){\r\n        /*\r\n        let isFirst = true;\r\n        document.addEventListener(\"selectionchange\", (event) => {\r\n            if(document.activeElement !== this.#editor){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n            let selection = window.getSelection();\r\n            let range = selection.getRangeAt(0);\r\n            let newRect = range.getBoundingClientRect();\r\n            if(this.#lastCursorPositionRect && (this.#lastCursorPositionRect.x != newRect.x || this.#lastCursorPositionRect.y != newRect.y)){\r\n                range.insertNode(this.#cursor);\r\n            }else if(isFirst){\r\n                range.insertNode(this.#cursor);\r\n                isFirst = false;\r\n            }\r\n            this.#lastCursorPositionRect = newRect;\r\n        });\r\n        */\r\n        FreedomInterface.globalSelectionChangeEventListener(this, ({oldEvent, newEvent}) => {\r\n            if(document.activeElement !== this.#editor){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n            this.rememberCursor();\r\n\t\t})\r\n    }\r\n\r\n    rememberCursor(){\r\n        let selection = window.getSelection();\r\n        let range = selection.getRangeAt(0);\r\n        let newRect = range.getBoundingClientRect();\r\n        if(this.#lastCursorPositionRect && (this.#lastCursorPositionRect.x == newRect.x && this.#lastCursorPositionRect.y == newRect.y)){\r\n            return\r\n        }\r\n        let {focusNode, focusOffset} = selection\r\n\r\n        let target;\r\n        let index = (() => {\r\n            if(focusNode.nodeType == Node.TEXT_NODE){\r\n                target = focusNode.parentElement;\r\n                return [...target.childNodes].findIndex(e=>e == focusNode);\r\n            }else if(focusNode.nodeType == Node.ELEMENT_NODE){\r\n                target = focusNode;\r\n                return 0;\r\n            }\r\n        })();\r\n\r\n        if(target == undefined){\r\n            return;\r\n        }else{\r\n            let prevCursorTarget;\r\n            if(this.#editor.hasAttribute('is_cursor')){\r\n                prevCursorTarget = this.#editor;\r\n            }else{\r\n                prevCursorTarget = this.#editor.querySelector('[is_cursor]');\r\n            }\r\n            if(prevCursorTarget && prevCursorTarget != target){\r\n                prevCursorTarget.removeAttribute('is_cursor');\r\n                prevCursorTarget.removeAttribute('cursor_offset');\r\n                prevCursorTarget.removeAttribute('cursor_type');\r\n                prevCursorTarget.removeAttribute('cursor_index');\r\n                prevCursorTarget.removeAttribute('cursor_scroll_x');\r\n                prevCursorTarget.removeAttribute('cursor_scroll_y');\r\n            }\r\n        }\r\n\r\n        /*\r\n            Object.assign(parent.dataset,{\r\n                offset: focusOffset,\r\n                index: childIndex\r\n            })\r\n        */\r\n        target.setAttribute('is_cursor', '');\r\n        target.setAttribute('cursor_offset', focusOffset);\r\n        target.setAttribute('cursor_type', target.nodeType);\r\n        target.setAttribute('cursor_index', index);\r\n        target.setAttribute('cursor_scroll_x', this.#editor.scrollLeft);\r\n        target.setAttribute('cursor_scroll_y', this.#editor.scrollTop);\r\n        this.#lastCursorPositionRect = newRect;\r\n    }\r\n\r\n    addUndoKey(){\r\n        this.#editor.addEventListener('keydown', (event) => {\r\n            if(document.activeElement !== this.#editor){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n            let {ctrlKey, key} = event;\r\n            if( ! ctrlKey || ! (key == 'z' || key == 'y')){\r\n                return;\r\n            }\r\n            event.preventDefault();\r\n            if(key == 'z'){\r\n                this.undoKeyEvent();\r\n            }else{\r\n                this.redoKeyEvent();\r\n            }\r\n\r\n            let cursorTarget = this.#editor.querySelector('[is_cursor]');\r\n            if( ! cursorTarget){\r\n                return;\r\n            }\r\n\r\n            let {'cursor_offset': offset, 'cursor_type': type, 'cursor_index': index, 'cursor_scroll_x': x, 'cursor_scroll_y': y} = cursorTarget.attributes\r\n            let selection = window.getSelection();\r\n            /*if(type.value == Node.TEXT_NODE){\r\n                let textNode = cursorTarget.childNodes[index.value]; \r\n                selection.setPosition(textNode, offset.value);\r\n            }else if(type.value == Node.ELEMENT_NODE){\r\n                console.log(cursorTarget);\r\n                selection.setPosition(cursorTarget, offset.value);\r\n            }*/\r\n            if(type.value == Node.ELEMENT_NODE){\r\n                let node = cursorTarget.childNodes[index.value]; \r\n                selection.setPosition(node, offset.value);\r\n            }else if(type.value == Node.TEXT_NODE){\r\n                selection.setPosition(cursorTarget, offset.value);\r\n            }\r\n            this.#editor.scrollTo(Number(x.value), Number(y.value));\r\n        });\r\n    }\r\n\r\n    undoKeyEvent(){\r\n        if(this.#history.length == 0){\r\n            return;\r\n        }\r\n        this.#historyIndex += 1;\r\n        if(this.#historyIndex > this.#history.length - 1){\r\n            this.#historyIndex = this.#history.length - 1\r\n        }\r\n        let undoRedo = this.#history[this.#historyIndex];\r\n       \r\n        //console.log('z key undo',undoRedo.html);\r\n        this.#editor.innerHTML = undoRedo.html;\r\n    }\r\n    redoKeyEvent(){\r\n        if(this.#history.length == 0){\r\n            return;\r\n        }\r\n        this.#historyIndex -= 1;\r\n        if(this.#historyIndex < 0){\r\n            this.#historyIndex = 0\r\n        }\r\n        let undoRedo = this.#history[this.#historyIndex];\r\n\r\n        //console.log('y key redo',undoRedo.html)\r\n        this.#editor.innerHTML = undoRedo.html;\r\n    }\r\n    addUndoRedo(isCheckSkip = false){\r\n        if(document.activeElement !== this.#editor && ! isCheckSkip){\r\n            return;\r\n        }\r\n\r\n        this.rememberCursor();\r\n\r\n        let undoRedo = new this.#UndoRedo(this.#editor.innerHTML.trim());\r\n        this.#history.unshift(undoRedo);\r\n        \r\n        if(this.#history.length > this.#historyLimit){\r\n            this.#history = this.#history.splice(0, this.#historyLimit);\r\n        }\r\n        \r\n        //console.log('history', this.#history);\r\n    }\r\n    addUserInput(){\r\n        let prevMils = new Date().getTime();\r\n        this.#editor.addEventListener('keydown', (event) => {\r\n            if(document.activeElement !== this.#editor || (new Date().getTime() - prevMils) < 500){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n            prevMils = new Date().getTime();\r\n            let {ctrlKey, key, altKey} = event;\r\n            if(ctrlKey || altKey || ctrlKey && (key == 'z' || key == 'y')){\r\n                return;\r\n            }\r\n            \r\n            if(this.#history.length != 0 && this.#history[0].html.trim() == this.#editor.innerHTML.trim()){\r\n                return;\r\n            }\r\n            this.addUndoRedo();\r\n        });\r\n        /*\r\n        let addElementObserver = new MutationObserver( (mutationList, observer) => {\r\n            mutationList.forEach((mutation) => {\r\n                let {addedNodes, removedNodes} = mutation;\r\n\r\n                if(this.#isUndoSwitch){\r\n                    this.#isUndoSwitch = false;\r\n                    //return;\r\n                }\r\n\r\n                new Promise(resolve=>{\r\n                    addedNodes.forEach(node=>{\r\n                        if(node.nodeType != Node.ELEMENT_NODE){\r\n                            return;\r\n                        }\r\n                        let tagName = node.tagName.toLowerCase();\r\n                        if(this.#editor.tools.hasOwnProperty(tagName) && this.#history.length != 0 && this.#history[0].html.trim() != this.#editor.innerHTML.trim()){\r\n                            let undoRedo = new this.#UndoRedo(this.#editor.innerHTML.trim());\r\n                            this.#history.unshift(undoRedo);\r\n                            if(this.#history.length > this.#historyLimit){\r\n                                this.#history = this.#history.splice(0, this.#historyLimit);\r\n                            }\r\n                        }\r\n                    });\r\n                    resolve();\r\n                })\r\n            });\r\n        })\r\n        addElementObserver.observe(this.#editor, {\r\n\t\t\tchildList:true,\r\n\t\t\tsubtree: true\r\n\t\t});\r\n        */\r\n    }\r\n\r\n    clearHistory(){\r\n        this.#history = [];\r\n    }\r\n    \r\n    clearEditor(){\r\n        this.#editor.innerHTML = '';\r\n    }\r\n\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nexport default class Strong extends FreedomInterface {\r\n\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-strong-style'\r\n\t});\r\n\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-strong';\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: 'B',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Bold'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else{\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} {\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tconstructor(dataset, {isDefaultStyle = true} = {}){\r\n\t\tsuper(Strong, dataset);\r\n\t}\r\n\t\r\n}\r\n","\r\nexport default class Palette {\r\n\t\r\n\t#style = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-palette'\r\n\t});\r\n\r\n\t#palette = Object.assign(document.createElement('div'),{\r\n\t\tclassName: 'palette-wrap'\r\n\t});\r\n\r\n\t#paletteVw = 20; \r\n\t#componentMap = undefined;\r\n\t\r\n\t#lastPanelPosition = undefined;\r\n\t\r\n\t#lastPaintPosition = undefined;\r\n\t#lastPaintRgb = [255, 0, 0];\r\n\r\n\t#lastBrightnessPosition = undefined;\r\n\r\n\t#r = 255;\r\n\t#g = 0;\r\n\t#b = 0;\r\n\t#a = 1;\r\n\r\n    #openPositionMode;\r\n\t#openPosition;\r\n\t#exampleMode;\r\n\r\n    #applyCallback = () => {}\r\n\r\n\tstatic ExampleMode = class ExampleMode{\r\n\t\tstatic #ExampleModeEnum = class ExampleModeEnum{\r\n\t\t\tvalue;\r\n\t\t\tconstructor(value){\r\n\t\t\t\tthis.value = value;\r\n\t\t\t\tObject.freeze(this);\r\n\t\t\t}\r\n\t\t}\r\n\t\tstatic TEXT_COLOR = new this.#ExampleModeEnum('color');\r\n\t\tstatic TEXT_BACKGROUND_COLOR = new this.#ExampleModeEnum('background-color');\r\n\t\tstatic TEXT_UNDERLINE = new this.#ExampleModeEnum('text-decoration');\r\n\t\tstatic TEXT_LINE_THROUGH = new this.#ExampleModeEnum('text-decoration');\r\n\t\tvalue;\r\n\t\tstatic{\r\n\t\t\tObject.freeze(this);\r\n\t\t}\r\n\t\tconstructor(value){\r\n\t\t\tthis.value = value;\r\n\t\t\tObject.freeze(this);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic OpenPositionMode = class OpenPositionMode{\r\n\t\tstatic BUTTON = new OpenPositionMode('button')\r\n\t\tstatic WRAPPER = new OpenPositionMode('wrapper')\r\n\t\t/**\r\n\t\t * @returns {String}\r\n\t\t */\r\n\t\tvalue;\r\n\t\tstatic{\r\n\t\t\tObject.freeze(this);\r\n\t\t}\r\n\t\tconstructor(value){\r\n\t\t\tthis.value = value;\r\n\t\t\tObject.freeze(this);\r\n\t\t}\r\n\t}\r\n\r\n    constructor({\r\n\t\topenPositionMode = Palette.OpenPositionMode.BUTTON,\r\n\t\topenPosition,\r\n\t\texampleMode = Palette.ExampleMode.TEXT_COLOR\r\n\t}={}){\r\n\t\t\r\n        this.#openPositionMode = openPositionMode;\r\n\t\tif( ! this.#openPositionMode ){//|| ! (this.#openPositionMode instanceof Palette.OpenPositionMode)){\r\n\t\t\tthrow new Error('this is not OpenPositionMode');\r\n\t\t}\r\n\t\tthis.#openPosition = openPosition;\r\n        if( ! this.#openPosition || ! this.#openPosition.nodeType || this.#openPosition.nodeType != Node.ELEMENT_NODE){\r\n            throw new Error('openPosition is not element');\r\n        }\r\n\t\tthis.#exampleMode = exampleMode;\r\n\t\t\r\n\t\tif(this.#openPositionMode == Palette.OpenPositionMode.BUTTON){\r\n\t\t\tthis.#palette.style.position = \"fixed\";\r\n\t\t}\r\n\r\n        let style = document.querySelector(`#${this.#style.id}`);\r\n        if(! style){\r\n            document.head.append(this.createStyle());\r\n        }else{\r\n            this.#style = style;\r\n        }\r\n\r\n        document.addEventListener(\"scroll\", () => {\r\n\t\t\tif(this.#palette.isConnected){\r\n\t\t\t\tthis.#processingPalettePosition(this.#palette);\r\n\t\t\t}\r\n\t\t});\r\n\r\n        window.addEventListener('resize', (event) => {\r\n            if(this.#palette.isConnected){\r\n                this.reset();\r\n                this.#palette.replaceChildren();\r\n                let done = setTimeout(()=>{\r\n                    this.open();\r\n                    clearTimeout(done);\r\n                    done = undefined\r\n                },200)\r\n            }\r\n\t\t})\r\n\r\n        new Array('mouseup', 'touchend').forEach(eventName => {\r\n\t\t\twindow.addEventListener(eventName, () => {\r\n\t\t\t\tif( ! this.#componentMap){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.#componentMap.colorPanel?.removeAttribute('data-is_mouse_down');\r\n\t\t\t\tthis.#componentMap.colorPaint?.removeAttribute('data-is_mouse_down');\r\n\t\t\t\tthis.#componentMap.colorBrightness?.removeAttribute('data-is_mouse_down');\r\n\t\t\t})\r\n\t\t})\r\n\t\t\r\n\t\tnew Array('mousemove', 'touchmove').forEach(eventName=>{\r\n\t\t\twindow.addEventListener(eventName, (event) => {\r\n\t\t\t\tif( ! this.#componentMap){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(this.#componentMap.colorPanel && this.#componentMap.colorPanel.hasAttribute('data-is_mouse_down')){\r\n\t\t\t\t\tthis.#colorPanelMoveEvent(event)\r\n\t\t\t\t}\r\n\t\t\t\tif(this.#componentMap.colorPaint && this.#componentMap.colorPaint.hasAttribute('data-is_mouse_down')){\r\n\t\t\t\t\tthis.#colorPaintMoveEvent(event);\r\n\t\t\t\t}\r\n\t\t\t\tif(this.#componentMap.colorBrightness && this.#componentMap.colorBrightness.hasAttribute('data-is_mouse_down')){\r\n\t\t\t\t\tthis.#colorBrightnessMoveEvent(event);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n    }\r\n\r\n    #createPalette(palette, itemMap){\r\n\t\tlet {\r\n\t\t\ttopTextWrap, selectionRgbBg, previousRgbBg, \r\n\t\t\tcolorWrap, colorPanel, colorPaint, \r\n\t\t\tcolorBrightnessWrap, colorBrightness,\r\n\t\t\tbottomTextWrap, selectionRgbText, previousRgbText,\r\n\t\t\tapplyWrap, cancelButton, applyButton\r\n\t\t} = itemMap\r\n\t\tpalette.replaceChildren(topTextWrap, colorWrap, colorBrightnessWrap, bottomTextWrap, applyWrap);\r\n\t\tthis.#settingCanvas();\r\n\t\tthis.#settingApplyEvent(palette, cancelButton, applyButton, selectionRgbText);\r\n\t}\r\n\r\n    #createPaletteItems(){\r\n\r\n\t\t// 팔레트 상단 텍스트 영역\r\n\t\tlet {topTextWrap, selectionRgbBg, previousRgbBg} = this.#createRgbaTopTextWrap()\r\n\t\t\r\n\t\t// 팔레트 중단 컬러 설정 집합 영역\r\n\t\tlet colorWrap = Object.assign(document.createElement('div'),{\r\n\t\t\tclassName: 'color-wrap'\r\n\t\t})\r\n\r\n\t\tlet colorPanel = this.#createColorPanel();\r\n\t\tlet colorPaint = this.#createColorPaint();\r\n\t\tcolorWrap.append(colorPanel, colorPanel.__colorPanelSelected, colorPanel.__colorPanelSelectedPointer,\r\n\t\t\tcolorPaint, colorPaint.__colorPaintSelectedPointer);\r\n\r\n\t\t// 팔레트 색상 명도 조절 설정 캔버스 영역\r\n\t\tlet {colorBrightnessWrap, colorBrightness} = this.#createColorBrightness()\r\n\r\n\t\t// 팔레트 하단 텍스트 영역\r\n\t\tlet {bottomTextWrap, selectionRgbText, previousRgbText} = this.#createRgbaBottomTextWrap();\r\n\t\t\r\n\t\tlet {applyWrap, cancelButton, applyButton} = this.#createApplyButtonWrap();\r\n\r\n\t\treturn {\r\n\t\t\ttopTextWrap, selectionRgbBg, previousRgbBg, \r\n\t\t\tcolorWrap, colorPanel, colorPaint, \r\n\t\t\tcolorBrightnessWrap, colorBrightness,\r\n\t\t\tbottomTextWrap, selectionRgbText, previousRgbText,\r\n\t\t\tapplyWrap, cancelButton, applyButton\r\n\t\t};\r\n\t}\r\n\r\n    #createColorPanel(){\r\n\t\tlet colorPanel = Object.assign(document.createElement('canvas'),{\r\n\t\t\tclassName: 'palette-panel'\r\n\t\t})\r\n\t\tlet colorPanelSelected = Object.assign(document.createElement('canvas'),{\r\n\t\t\tclassName: 'panel-selected'\r\n\t\t})\r\n\t\tlet colorPanelSelectedPointer = Object.assign(document.createElement('div'),{\r\n\t\t\tclassName: 'panel-selected-pointer'\r\n\t\t});\r\n\r\n\t\tcolorPanel.__colorPanelSelected = colorPanelSelected;\r\n\t\tcolorPanel.__colorPanelSelectedPointer = colorPanelSelectedPointer;\r\n\r\n\t\treturn colorPanel;\r\n\t}\r\n\r\n    #createColorPaint(){\r\n\t\tlet colorPaint = Object.assign(document.createElement('canvas'),{\r\n\t\t\tclassName: 'palette-paint'\r\n\t\t});\r\n\r\n\t\tlet colorPaintSelectedPointer = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'paint-selected-pointer'\r\n\t\t})\r\n\t\tcolorPaintSelectedPointer.append(Object.assign(document.createElement('div'),{\r\n\t\t\tclassName: 'paint-selected-pointer-child'\r\n\t\t}));\r\n\t\tcolorPaint.__colorPaintSelectedPointer = colorPaintSelectedPointer\r\n\r\n\t\treturn colorPaint;\r\n\t}\r\n\r\n    #createColorBrightness(){\r\n\t\tlet colorBrightnessWrap = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'brightness-wrap'\r\n\t\t});\r\n\t\tlet colorBrightness = Object.assign(document.createElement('canvas'), {\r\n\t\t\tclassName: 'brightness-color'\r\n\t\t})\r\n\t\tlet colorBrightnessSelectedPointer = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'brightness-selected-pointer'\r\n\t\t});\r\n\t\tcolorBrightnessSelectedPointer.append(Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'brightness-selected-pointer-child'\r\n\t\t}));\r\n\t\tcolorBrightness.__colorBrightnessSelectedPointer = colorBrightnessSelectedPointer;\r\n\t\tcolorBrightnessWrap.append(colorBrightness, colorBrightness.__colorBrightnessSelectedPointer)\r\n\r\n\t\treturn {colorBrightnessWrap, colorBrightness};\r\n\t}\r\n\r\n    #createRgbaTopTextWrap(){\r\n\t\tlet topTextWrap = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'top-text-wrap'\r\n\t\t});\r\n\t\t\r\n\t\tlet blackOrWhite = this.#blackOrWhite(this.#r, this.#g, this.#b);\r\n\r\n\t\tlet selectionRgbBg = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'selection-rgb-bg',\r\n\t\t\ttextContent: this.selectedColor\r\n\t\t});\r\n\t\tselectionRgbBg.style.background = this.selectedColor;\r\n\t\tselectionRgbBg.style.color = `rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`\r\n\r\n\r\n\t\tlet previousRgbBg = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName : 'previous-rgb-bg',\r\n\t\t});\r\n\t\tpreviousRgbBg.style.background = this.selectedColor;\r\n\r\n\t\ttopTextWrap.append(selectionRgbBg, previousRgbBg)\r\n\r\n\t\treturn {topTextWrap, selectionRgbBg, previousRgbBg}\r\n\t}\r\n\r\n    #createRgbaBottomTextWrap(){\r\n\t\tlet bottomTextWrap = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'bottom-text-wrap'\r\n\t\t});\r\n\t\tlet selection = window.getSelection();\r\n\t\tlet sampleText = '';\r\n\t\tif(selection.rangeCount != 0 && selection.isCollapsed == false){\r\n\t\t\tlet range = selection.getRangeAt(0)\r\n\t\t\tlet aticle = document.createElement('aticle');\r\n\t\t\tlet rangeClone = range.cloneContents();\r\n\t\t\taticle.append(rangeClone);\r\n\t\t\tsampleText = aticle\r\n\t\t}\r\n\t\tsampleText = sampleText == '' ? '가 나다 라 A BC D' : sampleText;\r\n\t\tlet blackOrWhite = this.#blackOrWhite(this.#r, this.#g, this.#b);\r\n\t\t\r\n\t\tlet selectionRgbText = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'selection-rgb-text',\r\n\t\t});\r\n\t\tthis.#applyExampleTextColor(selectionRgbText, this.selectedColor, blackOrWhite);\r\n\r\n\t\tlet previousRgbText = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'previous-rgb-text',\r\n\t\t});\r\n\t\tthis.#applyExampleTextColor(previousRgbText, this.selectedColor, blackOrWhite);\r\n\r\n\t\tif(sampleText.nodeType && sampleText.nodeType == Node.ELEMENT_NODE){\r\n\t\t\tselectionRgbText.innerHTML = sampleText.innerHTML;\r\n\t\t\tpreviousRgbText.innerHTML = sampleText.innerHTML;\r\n\t\t}else{\r\n\t\t\tselectionRgbText.textContent = sampleText;\r\n\t\t\tpreviousRgbText.textContent = sampleText;\r\n\t\t}\r\n\r\n\r\n\t\tbottomTextWrap.append(selectionRgbText, previousRgbText)\r\n\r\n\t\treturn {bottomTextWrap, selectionRgbText, previousRgbText}\r\n\t}\r\n\r\n    #createApplyButtonWrap(){\r\n\t\tlet applyWrap = Object.assign(document.createElement('div'),{\r\n\t\t\tclassName: 'button-wrap'\r\n\t\t})\r\n\t\tlet cancelButton = Object.assign(document.createElement('button'), {\r\n\t\t\tclassName: 'cancel-button',\r\n\t\t\ttype: 'button',\r\n\t\t\ttextContent: 'cancel'\r\n\t\t})\r\n\t\tlet applyButton = Object.assign(document.createElement('button'), {\r\n\t\t\tclassName: 'apply-button',\r\n\t\t\ttype: 'button',\r\n\t\t\ttextContent: 'apply'\r\n\t\t})\r\n\t\tapplyWrap.append(cancelButton, applyButton);\r\n\t\treturn {applyWrap, cancelButton, applyButton};\r\n\t}\r\n\r\n    #settingCanvas(){\r\n\t\treturn new Promise(resolve=> {\r\n\t\t\tthis.#settingColorPanel()\r\n\t\t\tthis.#settingColorPaint()\r\n\t\t\tthis.#settingColorBrightness();\r\n\t\t\tresolve();\r\n\t\t})\r\n\t}\r\n\r\n    #settingColorPanel(){\r\n\t\treturn new Promise(resolve=>{\r\n\t\t\tlet {\r\n\t\t\t\ttopTextWrap, selectionRgbBg, previousRgbBg, \r\n\t\t\t\tcolorWrap, colorPanel, colorPaint, \r\n\t\t\t\tcolorBrightnessWrap, colorBrightness,\r\n\t\t\t\tbottomTextWrap, selectionRgbText, previousRgbText\r\n\t\t\t} = this.#componentMap;\r\n\r\n\t\t\tconst setPanelSelectePosition = () => {\r\n\t\t\t\tlet colorPanelRect = colorPanel.getBoundingClientRect();\r\n\t\t\t\tlet colorPanelSelected = colorPanel.__colorPanelSelected;\r\n\t\t\t\tcolorPanelSelected.style.top = colorPanelRect.y + 'px';\r\n\t\t\t\tcolorPanelSelected.style.left = colorPanelRect.x + 'px';\r\n\t\t\t\tcolorPanelSelected.style.width = colorPanelRect.width + 'px';\r\n\t\t\t\tcolorPanelSelected.style.height = colorPanelRect.height + 'px';\r\n\t\t\t\tcolorPanelSelected.width = colorPanelRect.width;\r\n\t\t\t\tcolorPanelSelected.height = colorPanelRect.height;\r\n\t\t\t}\r\n\r\n\t\t\tcolorPanel.onmousedown = (event)=>{\r\n\t\t\t\tcolorPanel.setAttribute('data-is_mouse_down', '');\r\n\t\t\t\tlet {x, y} = this.#getEventXY(event);\r\n\t\t\t\tcolorPanel.__colorPanelSelectedPointer.style.top = y\r\n\t\t\t\tcolorPanel.__colorPanelSelectedPointer.style.left = x\r\n\t\t\t\tsetPanelSelectePosition()\r\n\t\t\t\tthis.#colorPanelMoveEvent(event);\r\n\t\t\t}\r\n\t\t\tcolorPanel.ontouchstart = colorPanel.onmousedown;\r\n\r\n\t\t\tcolorPanel.__colorPanelSelected.onmousedown = colorPanel.onmousedown;\r\n\t\t\tcolorPanel.__colorPanelSelected.ontouchstart = colorPanel.onmousedown;\r\n\t\t\t\r\n\t\t\tcolorPanel.__colorPanelSelectedPointer.onmousedown = colorPanel.onmousedown;\r\n\t\t\tcolorPanel.__colorPanelSelectedPointer.ontouchstart = colorPanel.onmousedown;\r\n\r\n\t\t\tresolve(setTimeout(()=>{\r\n\t\t\t\tlet panelContext = colorPanel.getContext('2d', { willReadFrequently: true });\r\n\t\t\t\tlet colorPanelRect = colorPanel.getBoundingClientRect();\r\n\t\t\t\tcolorPanel.width = colorPanelRect.width;\r\n\t\t\t\tcolorPanel.height = colorPanelRect.height;\r\n                setPanelSelectePosition();\r\n\t\t\t\tthis.#changeColorPanel(panelContext)\r\n\r\n\t\t\t\tlet blackOrWhite = this.#blackOrWhite(this.#r, this.#g, this.#b);\r\n\t\t\t\tlet context = colorPanel.__colorPanelSelected.getContext('2d', { willReadFrequently: true })\r\n\t\t\t\tif(this.#lastPanelPosition){\r\n\t\t\t\t\tthis.#processingColorPanelSeleter(context, this.#lastPanelPosition.x - colorPanelRect.x, this.#lastPanelPosition.y - colorPanelRect.y, blackOrWhite);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.#processingColorPanelSeleter(context, colorPanelRect.width - 1, 0.1, blackOrWhite);\r\n\t\t\t\t\tthis.#lastPanelPosition = {x:colorPanelRect.right - 1, y:colorPanelRect.top}\r\n                    colorPanel.__colorPanelSelectedPointer.style.top = this.#lastPanelPosition.y + 'px';\r\n                    colorPanel.__colorPanelSelectedPointer.style.left = this.#lastPanelPosition.x + 'px';\r\n                }\r\n\t\t\t},200))\r\n\t\t});\r\n\t}\r\n\r\n    #changeColorPanel(context){\r\n\t\tcontext.clearRect(0, 0, context.canvas.width, context.canvas.height);\r\n\t\tlet [r,g,b] = this.#lastPaintRgb\r\n\t\t// 가로 그라데이션\r\n\t\tlet gradientH = context.createLinearGradient(2, 0, context.canvas.width - 2, 0);\r\n\t\tgradientH.addColorStop(0, 'white');\r\n\t\tgradientH.addColorStop(1, `rgba(${r}, ${g}, ${b}, ${this.#a})`);\r\n\t\tcontext.fillStyle = gradientH;\r\n\t\tcontext.fillRect(0, 0, context.canvas.width, context.canvas.height);\r\n\t\t// 수직 그라데이션\r\n\t\tlet gradientV = context.createLinearGradient(0, 2, 0, context.canvas.height - 2);\r\n\t\tgradientV.addColorStop(0, 'rgba(0,0,0,0)');\r\n\t\tgradientV.addColorStop(1, 'black');\r\n\t\tcontext.fillStyle = gradientV;\r\n\t\tcontext.fillRect(0, 0, context.canvas.width, context.canvas.height);\r\n\t}\r\n\r\n    #processingColorPanelSeleter(colorPanelSelectedContext, x, y, [r = 0, g = 0, b = 0] = []){\r\n\t\tnew Promise(resolve=>{\r\n\t\t\tcolorPanelSelectedContext.clearRect(0, 0, colorPanelSelectedContext.canvas.width, colorPanelSelectedContext.canvas.height);\r\n\t\t\tcolorPanelSelectedContext.lineWidth = 1;\r\n\t\t\tcolorPanelSelectedContext.beginPath();\r\n\t\t\tcolorPanelSelectedContext.arc(x, y, 10, 0, 2 * Math.PI);\r\n\t\t\tcolorPanelSelectedContext.strokeStyle = `rgb(${r}, ${g}, ${b})`\r\n\t\t\tcolorPanelSelectedContext.stroke();\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n    #colorPanelMoveEvent(event){\r\n\t\tnew Promise(resolve => {\r\n\t\t\tlet {\r\n\t\t\t\ttopTextWrap, selectionRgbBg, previousRgbBg, \r\n\t\t\t\tcolorWrap, colorPanel, colorPaint, \r\n\t\t\t\tcolorBrightnessWrap, colorBrightness,\r\n\t\t\t\tbottomTextWrap, selectionRgbText, previousRgbText\r\n\t\t\t} = this.#componentMap;\r\n\t\t\tlet rect = colorPanel.getBoundingClientRect();\r\n\t\t\tlet {x:pageX, y:pageY} = this.#getEventXY(event);\r\n\r\n\t\t\tlet isLeftOver = pageX < rect.left;\r\n\t\t\tlet isRightOver = pageX > rect.right - 1;\r\n\t\t\tlet isTopOver = pageY < rect.top;\r\n\t\t\tlet isBottomOver = pageY > rect.bottom;\r\n\r\n\t\t\tcolorPanel.__colorPanelSelectedPointer.style.left = pageX + 'px';\r\n\t\t\tcolorPanel.__colorPanelSelectedPointer.style.top = pageY + 'px';\r\n\r\n\t\t\tlet {x : reProcessingRectX, y : reProcessingRectY} = colorPanel.__colorPanelSelectedPointer.getBoundingClientRect();\r\n\t\t\t\r\n\t\t\tlet x = reProcessingRectX - rect.x\r\n\t\t\tlet y = reProcessingRectY - rect.y\r\n\r\n\r\n\t\t\tif(isLeftOver){\r\n\t\t\t\tx = 0\r\n\t\t\t\treProcessingRectX = rect.left\r\n\t\t\t}\r\n\t\t\tif(isRightOver){\r\n\t\t\t\tx = rect.width - 1\r\n\t\t\t\treProcessingRectX = rect.right - 1\r\n\t\t\t}\r\n\t\t\tif(isTopOver){\r\n\t\t\t\ty = 0\r\n\t\t\t\treProcessingRectY = rect.top\r\n\t\t\t}\r\n\t\t\tif(isBottomOver){\r\n\t\t\t\ty = rect.height\r\n\t\t\t\treProcessingRectY = rect.bottom\r\n\t\t\t}\r\n\r\n\t\t\tthis.#lastPanelPosition = {x : reProcessingRectX, y : reProcessingRectY};\r\n\t\t\tlet context = colorPanel.getContext('2d', { willReadFrequently: true });\r\n\t\t\t\r\n\t\t\t/*if(isLeftOver && isTopOver){\r\n\t\t\t\t[this.#r, this.#g, this.#b] = [255,255,255];\r\n\t\t\t//}else if(isRightOver && isTopOver){\r\n\t\t\t//\t[this.#r, this.#g, this.#b] = this.#lastPaintRgb\r\n\t\t\t}else if((isRightOver && isBottomOver) || (isLeftOver && isBottomOver) || isBottomOver){\r\n\t\t\t\t[this.#r, this.#g, this.#b] = [0,0,0];\r\n\t\t\t}else{*/\r\n\t\t\t\t[this.#r, this.#g, this.#b] = context.getImageData(x, y, 1, 1).data;\r\n\t\t\t//}\r\n\r\n\t\t\tlet selectedColor = `rgba(${this.#r}, ${this.#g}, ${this.#b}, ${this.#a})`;\r\n\t\t\tlet blackOrWhite = this.#blackOrWhite(this.#r,this.#g,this.#b);\r\n\r\n\t\t\tthis.#processingColorPanelSeleter(\r\n\t\t\t\tcolorPanel.__colorPanelSelected.getContext('2d', { willReadFrequently: true })\r\n\t\t\t\t, x, y, blackOrWhite);\r\n\r\n\t\t\tselectionRgbBg.textContent = selectedColor;\r\n\t\t\tselectionRgbBg.style.color = `rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`\r\n\t\t\tselectionRgbBg.style.background = selectedColor;\r\n\t\t\t\r\n\t\t\tthis.#applyExampleTextColor(selectionRgbText, selectedColor, blackOrWhite);\r\n\r\n\t\t\tif(this.#a < 0.75){\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.children[0].style.border = 'solid 1px white';\r\n\t\t\t}else{\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.children[0].style.border = `solid 1px rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`;\r\n\t\t\t}\r\n\r\n\t\t\tthis.#changeColorBrightness(colorBrightness.getContext('2d', { willReadFrequently: true }), [this.#r, this.#g, this.#b]);\r\n\r\n\t\t\tresolve();\r\n\t\t})\r\n\t}\r\n\r\n    #settingColorPaint(){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tlet {\r\n\t\t\t\ttopTextWrap, selectionRgbBg, previousRgbBg, \r\n\t\t\t\tcolorWrap, colorPanel, colorPaint, \r\n\t\t\t\tcolorBrightnessWrap, colorBrightness,\r\n\t\t\t\tbottomTextWrap, selectionRgbText, previousRgbText\r\n\t\t\t} = this.#componentMap;\r\n\r\n\t\t\tcolorPaint.onmousedown = (event) => {\r\n\t\t\t\tcolorPaint.setAttribute('data-is_mouse_down', '');\r\n\t\t\t\tlet {x, y} = this.#getEventXY(event);\r\n\t\t\t\tcolorPaint.__colorPaintSelectedPointer.style.top = y + 'px';\r\n\t\t\t\tthis.#colorPaintMoveEvent(event);\r\n\t\t\t}\r\n\t\t\tcolorPaint.ontouchstart = colorPaint.onmousedown;\r\n\r\n\t\t\tcolorPaint.__colorPaintSelectedPointer.onmousedown = colorPaint.onmousedown;\r\n\t\t\tcolorPaint.__colorPaintSelectedPointer.ontouchstart = colorPaint.ontouchstart;\r\n\t\t\t\r\n\t\t\tresolve(setTimeout(()=>{\r\n\t\t\t\tlet colorPaintRect = colorPaint.getBoundingClientRect();\r\n\t\t\t\tcolorPaint.width = colorPaintRect.width;\r\n\t\t\t\tcolorPaint.height = colorPaintRect.height;\r\n\t\r\n\t\t\t\tlet context = colorPaint.getContext('2d', { willReadFrequently: true } );\r\n                context.clearRect(0, 0, colorPaint.width, colorPaint.height);\r\n\r\n                let gradient = context.createLinearGradient(0, 2, 0, colorPaint.height - 2); \r\n\t\r\n\t\t\t\tgradient.addColorStop(0, 'rgb(255, 0, 0)') // red\r\n\t\t\t\tgradient.addColorStop(0.15, 'rgb(255, 0, 255)') // violet\r\n\t\t\t\tgradient.addColorStop(0.35, 'rgb(0, 0, 255)') // blue\r\n\t\t\t\tgradient.addColorStop(0.45, 'rgb(0, 255, 255)') // Sky blue\r\n\t\t\t\tgradient.addColorStop(0.65, 'rgb(0, 255, 0)') // green\r\n\t\t\t\tgradient.addColorStop(0.85, 'rgb(255, 255, 0)') // yellow\r\n\t\t\t\tgradient.addColorStop(0.9, 'orange')\r\n\t\t\t\tgradient.addColorStop(1, 'rgb(255, 0, 0)') // red\r\n\t\t\t\tcontext.fillStyle = gradient;\r\n\t\t\t\tcontext.fillRect(0, 0, colorPaint.width, colorPaint.height);\r\n\r\n\t\t\t\tif(this.#lastPaintPosition){\r\n\t\t\t\t\tcolorPaint.__colorPaintSelectedPointer.style.top = this.#lastPaintPosition.y + 'px';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcolorPaint.__colorPaintSelectedPointer.style.top = colorPaintRect.y + 'px';\r\n\t\t\t\t\tthis.#lastPaintPosition = colorPaintRect.y;\r\n\t\t\t\t}\r\n\t\t\t\tcolorPaint.__colorPaintSelectedPointer.style.left = colorPaintRect.x + 'px';\r\n\t\t\t\tcolorPaint.__colorPaintSelectedPointer.style.width = colorPaintRect.width + 'px';\r\n\t\t\t\tlet [r,g,b] = this.#blackOrWhite(...this.#lastPaintRgb);\r\n\t\t\t\tcolorPaint.__colorPaintSelectedPointer.children[0].style.border = `solid 1px rgb(${r}, ${g}, ${b})`\r\n\t\t\t},200));\r\n\t\t});\r\n\t}\r\n\r\n    #colorPaintMoveEvent(event){\r\n\t\tnew Promise(resolve => {\r\n\t\t\tlet {\r\n\t\t\t\ttopTextWrap, selectionRgbBg, previousRgbBg, \r\n\t\t\t\tcolorWrap, colorPanel, colorPaint, \r\n\t\t\t\tcolorBrightnessWrap, colorBrightness,\r\n\t\t\t\tbottomTextWrap, selectionRgbText, previousRgbText\r\n\t\t\t} = this.#componentMap;\r\n\t\t\tlet rect = colorPaint.getBoundingClientRect();\r\n\t\t\tlet pageY = this.#getEventXY(event).y;\r\n\r\n\t\t\tlet isTopOver = pageY < rect.top;\r\n\t\t\tlet isBottomOver = pageY > rect.bottom - 1;\r\n\r\n\t\t\tcolorPaint.__colorPaintSelectedPointer.style.top = pageY + 'px';\r\n\r\n\t\t\tlet {y : reProcessingRectY} = colorPaint.__colorPaintSelectedPointer.getBoundingClientRect();\r\n\t\t\t\r\n\t\t\tlet y = reProcessingRectY - rect.y\r\n\r\n\r\n\t\t\tlet isOver = false;\r\n\t\t\tif(isTopOver){\r\n\t\t\t\ty = 0;\r\n\t\t\t\treProcessingRectY = rect.top;\r\n\t\t\t\tisOver = true;\r\n\t\t\t}\r\n\t\t\tif(isBottomOver){\r\n\t\t\t\ty = rect.height - 1\r\n\t\t\t\treProcessingRectY = rect.bottom - 1\r\n\t\t\t\tisOver = true;\r\n\t\t\t}\r\n\r\n\t\t\tthis.#lastPaintPosition = {y: reProcessingRectY}\r\n\t\t\tlet context = colorPaint.getContext('2d', { willReadFrequently: true });\r\n\t\t\tlet r,g,b;\r\n\t\t\tif(isOver){\r\n\t\t\t\t[r,g,b] = [255, 0, 0];\r\n\t\t\t}else{\r\n\t\t\t\t[r,g,b] = context.getImageData(1, y, 1, 1).data;\r\n\t\t\t}\r\n\t\t\tthis.#lastPaintRgb = [r,g,b]\r\n\r\n\t\t\tcolorPaint.__colorPaintSelectedPointer.style.top = reProcessingRectY + 'px';\r\n\r\n\t\t\tlet blackOrWhite = this.#blackOrWhite(r,g,b);\r\n\r\n\t\t\tcolorPaint.__colorPaintSelectedPointer.children[0].style.border = `solid 1px rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`\r\n\r\n\t\t\tif(this.#a < 0.75){\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.children[0].style.border = 'solid 1px white';\r\n\t\t\t}else{\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.children[0].style.border = `solid 1px rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`;\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\r\n\t\t\tthis.#changeColorBrightness(colorBrightness.getContext('2d', { willReadFrequently: true }), [r,g,b]);\r\n\r\n\t\t\tthis.#changeColorPanel(colorPanel.getContext('2d', { willReadFrequently: true }));\r\n\t\t\tlet colorPanelRect = colorPanel.getBoundingClientRect();\r\n\t\t\tthis.#processingColorPanelSeleter(\r\n\t\t\t\tcolorPanel.__colorPanelSelected.getContext('2d', { willReadFrequently: true }),\r\n\t\t\t\tthis.#lastPanelPosition.x - colorPanelRect.x,\r\n\t\t\t\tthis.#lastPanelPosition.y - colorPanelRect.y,\r\n\t\t\t)\r\n\t\t\tthis.#colorPanelMoveEvent({x:this.#lastPanelPosition.x, y:this.#lastPanelPosition.y})\r\n\t\t\tresolve();\r\n\t\t})\r\n\t}\r\n\r\n    #settingColorBrightness(){\r\n\t\tnew Promise(resolve => {\r\n\t\t\tlet {\r\n\t\t\t\ttopTextWrap, selectionRgbBg, previousRgbBg, \r\n\t\t\t\tcolorWrap, colorPanel, colorPaint, \r\n\t\t\t\tcolorBrightnessWrap, colorBrightness,\r\n\t\t\t\tbottomTextWrap, selectionRgbText, previousRgbText\r\n\t\t\t} = this.#componentMap;\r\n\r\n\t\t\tcolorBrightness.onmousedown = (event) => {\r\n\t\t\t\tcolorBrightness.setAttribute('data-is_mouse_down', '');\r\n\t\t\t\tlet {x, y} = this.#getEventXY(event);\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.style.left = x + 'px';\r\n\t\t\t\tthis.#colorBrightnessMoveEvent(event);\r\n\t\t\t}\r\n\t\t\tcolorBrightness.ontouchstart = colorBrightness.onmousedown;\r\n\r\n\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.onmousedown = colorBrightness.onmousedown\r\n\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.ontouchstart = colorBrightness.onmousedown\r\n\t\t\t\r\n\t\t\tsetTimeout(() => {\r\n                let blackOrWhite = this.#blackOrWhite(this.#r, this.#g, this.#b);\r\n\t\t\t\tlet colorBrightnessRect = colorBrightness.getBoundingClientRect()\r\n\t\t\t\tcolorBrightness.width = colorBrightnessRect.width;\r\n\t\t\t\tcolorBrightness.height = colorBrightnessRect.height;\r\n\t\r\n\t\t\t\tlet context = colorBrightness.getContext('2d', { willReadFrequently: true });\r\n\t\t\t\tthis.#changeColorBrightness(context, [this.#r, this.#g, this.#b]);\r\n\r\n\t\t\t\tif(this.#lastBrightnessPosition){\r\n\t\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.style.left = this.#lastBrightnessPosition.x + 'px';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.style.left = colorBrightnessRect.right + 'px';\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.style.top = colorBrightnessRect.y + 'px';\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.style.height = colorBrightnessRect.height + 'px';\r\n                colorBrightness.__colorBrightnessSelectedPointer.children[0].style.border = `solid 1px rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`\r\n            }, 200)\r\n\t\t\t\r\n\t\t\tresolve();\r\n\t\t})\r\n\t}\r\n\r\n    #changeColorBrightness(context, [r = 255, g=0, b=0]){\r\n\t\tcontext.clearRect(0, 0, context.canvas.width, context.canvas.height);\r\n\t\tlet gradient = context.createLinearGradient(0, 0, context.canvas.width, 0) \r\n\t\tgradient.addColorStop(0, 'rgba(0,0,0,0)');\r\n\t\tgradient.addColorStop(1, `rgba(${r}, ${g}, ${b}, ${this.#a})`); // 페인트 컬러로 변경 필요\r\n\t\tcontext.fillStyle = gradient;\r\n\t\tcontext.fillRect(0, 0, context.canvas.width, context.canvas.height);\r\n\t}\r\n\r\n    #colorBrightnessMoveEvent(event){\r\n\t\tnew Promise(resolve=> {\r\n\t\t\tlet {\r\n\t\t\t\ttopTextWrap, selectionRgbBg, previousRgbBg, \r\n\t\t\t\tcolorWrap, colorPanel, colorPaint, \r\n\t\t\t\tcolorBrightnessWrap, colorBrightness,\r\n\t\t\t\tbottomTextWrap, selectionRgbText, previousRgbText\r\n\t\t\t} = this.#componentMap;\r\n\t\t\tlet rect = colorBrightness.getBoundingClientRect();\r\n\r\n\t\t\tlet {x:pageX, y:pageY} = this.#getEventXY(event);\r\n\r\n\t\t\tlet isLeftOver = pageX < rect.left;\r\n\t\t\tlet isRightOver = pageX > rect.right;\r\n\r\n\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.style.left = pageX + 'px';\r\n\r\n\t\t\tlet {x : reProcessingRectX} = colorBrightness.__colorBrightnessSelectedPointer.getBoundingClientRect();\r\n\t\t\t\r\n\t\t\tlet x = rect.x - reProcessingRectX\r\n\r\n\t\t\tif(isLeftOver){\r\n\t\t\t\tx = rect.x\r\n\t\t\t\treProcessingRectX = rect.x\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.style.left = rect.x + 'px'\r\n\t\t\t\tthis.#a = 0\r\n\t\t\t}else if(isRightOver){\r\n\t\t\t\tx = rect.right\r\n\t\t\t\treProcessingRectX = rect.right\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.style.left = rect.right + 'px';\r\n\t\t\t\tthis.#a = 1\r\n\t\t\t}else{\r\n\t\t\t\tthis.#a = ((reProcessingRectX - rect.x) / rect.width).toFixed(2)\r\n\t\t\t}\r\n\r\n\t\t\tlet blackOrWhite = this.#blackOrWhite(this.#r, this.#g, this.#b);\r\n\t\t\t\r\n\t\t\tselectionRgbBg.textContent = this.selectedColor;\r\n\t\t\tselectionRgbBg.style.background = this.selectedColor;\r\n\r\n\t\t\tselectionRgbText.style.color = this.selectedColor;\r\n\t\t\tthis.#applyExampleTextColor(selectionRgbText, this.selectedColor, blackOrWhite);\r\n\t\t\tif(this.#a < 0.75){\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.children[0].style.border = 'solid 1px white';\r\n\t\t\t}else{\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.children[0].style.border = `solid 1px rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`;\r\n\t\t\t}\r\n\r\n\t\t\tresolve()\r\n\t\t});\r\n\t}\r\n\r\n    #settingApplyEvent(palette, cancelButton, applyButton, selectionRgbText){\r\n\t\tcancelButton.onclick = () => {\r\n\t\t\tthis.close();\r\n\t\t\t//palette.remove();\r\n\t\t}\r\n\t\tapplyButton.onclick = (event) => {\r\n            this.applyCallback(event);\r\n\t\t}\r\n\t}\r\n\r\n    #processingPalettePosition(palette){\r\n\t\tif(this.#openPositionMode == Palette.OpenPositionMode.BUTTON){\r\n\t\t\tlet {x, y, height} = this.#openPosition.getBoundingClientRect();\r\n\t\t\t//let paletteWidthPx = document.documentElement.clientHeight * (this.#paletteVw / 100);\r\n\t\t\t//let paletteHeightPx = document.documentElement.clientHeight * (this.#paletteVh / 100);\r\n\t\t\tlet paletteHeightPx = palette.clientHeight;\r\n\t\t\tlet paletteTop = (y - paletteHeightPx)\r\n\t\t\tif(paletteTop > 0){\r\n\t\t\t\tpalette.style.top = paletteTop + 'px';\r\n\t\t\t}else{\r\n\t\t\t\tpalette.style.top = y + height + 'px';\r\n\t\t\t}\r\n\t\t\tpalette.style.left = x + 'px';\r\n\t\t}else if(this.#openPositionMode == Palette.OpenPositionMode.WRAPPER){\r\n\t\t\tthis.#openPosition.append(palette);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @see https://stackoverflow.com/a/3943023\r\n\t * @param  {...any} rgb \r\n\t * @returns \r\n\t */\r\n    #blackOrWhite(...rgb){\r\n\t\tlet [r,g,b] = rgb;\r\n\t\treturn (r * 0.299 + g * 0.587 + b * 0.114) > 186\r\n            ? [0, 0, 0]\r\n            : [255, 255, 255];\r\n\t}\r\n\r\n    #getEventXY(event){\r\n\t\tlet x;\r\n\t\tlet y;\r\n\t\tif(window.TouchEvent && event.constructor == window.TouchEvent){\r\n\t\t\tx = event.touches[0].pageX\r\n\t\t\ty = event.touches[0].pageY\r\n\t\t\tevent.preventDefault();\r\n\t\t}else{\r\n\t\t\tx = event.x\r\n\t\t\ty = event.y\r\n\t\t}\r\n\t\treturn {x,y};\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t * @param {HTMLElement} text \r\n\t * @param {String} color \r\n\t * @param {Array<Number>} blackOrWhite \r\n\t */\r\n\t#applyExampleTextColor(text, color, blackOrWhite){\r\n\t\tif(this.#exampleMode == Palette.ExampleMode.TEXT_COLOR){\r\n\t\t\ttext.style.color = color\r\n\t\t\tif(blackOrWhite && blackOrWhite.length != 0){\r\n\t\t\t\ttext.style.backgroundColor = `rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`\r\n\t\t\t}\r\n\t\t}else if(this.#exampleMode == Palette.ExampleMode.TEXT_BACKGROUND_COLOR){\r\n\t\t\ttext.style.backgroundColor = color\r\n\t\t\tif(blackOrWhite && blackOrWhite.length != 0){\r\n\t\t\t\ttext.style.color = `rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`\r\n\t\t\t}\r\n\t\t}else if(this.#exampleMode == Palette.ExampleMode.TEXT_UNDERLINE){\r\n\t\t\ttext.style.textDecoration = 'underline'\r\n\t\t\ttext.style.textDecorationColor = color\r\n\t\t\t\r\n\t\t\tif(blackOrWhite && blackOrWhite.length != 0){\r\n\t\t\t\ttext.style.color = `rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`\r\n\t\t\t\ttext.style.backgroundColor = 'rgba(255, 255, 255, 0.25)'\r\n\t\t\t\t/*if(blackOrWhite.filter(e=>e==255).length == 3){\r\n\t\t\t\t\ttext.style.backgroundColor = 'rgba(0, 0, 0, 0.3)'\r\n\t\t\t\t}else{\r\n\t\t\t\t\ttext.style.backgroundColor = 'rgba(255, 255, 255, 0.25)'\r\n\t\t\t\t}*/\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}else if(this.#exampleMode == Palette.ExampleMode.TEXT_LINE_THROUGH){\r\n\t\t\ttext.style.textDecoration = 'line-through'\r\n\t\t\ttext.style.textDecorationColor = color;\r\n\t\t\t\r\n\t\t\tif(blackOrWhite && blackOrWhite.length != 0){\r\n\t\t\t\ttext.style.color = `rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`\r\n\t\t\t\ttext.style.backgroundColor = 'rgba(255, 255, 255, 0.25)'\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n    get selectedColor(){\r\n\t\treturn `rgba(${this.#r}, ${this.#g}, ${this.#b}, ${this.#a})`;\r\n\t}\r\n\r\n    get palette(){\r\n        return this.#palette;\r\n    }\r\n\r\n    get isConnected(){\r\n        return this.#palette.isConnected;\r\n    }\r\n\r\n    set applyCallback(applyCallback){\r\n        this.#applyCallback = applyCallback;\r\n    }\r\n\r\n    get applyCallback(){\r\n        return this.#applyCallback;\r\n    }\r\n\r\n\tget style(){\r\n\t\treturn this.#style;\r\n\t}\r\n\r\n\tset style(style){\r\n        this.#style.textContent = style;\r\n    }\r\n\r\n\tset insertStyle(style){\r\n\t\tthis.#style.sheet.insertRule(style);\r\n\t}\r\n\r\n\tget r(){\r\n\t\treturn this.#r;\r\n\t}\r\n\tget g(){\r\n\t\treturn this.#g;\r\n\t}\r\n\tget b(){\r\n\t\treturn this.#b;\r\n\t}\r\n\tget a(){\r\n\t\treturn this.#a;\r\n\t}\r\n\r\n    reset(){\r\n\t\tthis.#r = 255;\r\n\t\tthis.#g = 0;\r\n\t\tthis.#b = 0;\r\n\t\tthis.#a = 1;\r\n\t\tthis.#lastPaintRgb = [255, 0, 0];\r\n\t\tthis.#lastPanelPosition = undefined;\r\n\t\tthis.#lastPaintPosition = undefined;\r\n\t\tthis.#lastBrightnessPosition = undefined;\r\n        this.#componentMap = undefined;\r\n        \r\n\t}\r\n\r\n    close(){\r\n        this.#palette.remove();\r\n    }\r\n\r\n    open(){\r\n        this.#componentMap = this.#createPaletteItems();\r\n        document.body.append(this.#palette);\r\n        this.#createPalette(this.#palette, this.#componentMap);\r\n        this.#processingPalettePosition(this.#palette);\r\n    }\r\n\r\n    createStyle(){\r\n\t\t//position: fixed; 제거 20230517\r\n\t\tthis.#style.textContent = `\r\n\t\t\t.palette-wrap{\r\n\t\t\t\tbackground: #343434;\r\n\t\t\t\tpadding: 0.9%;\r\n\t\t\t\twidth: ${this.#paletteVw}vw;\r\n\t\t\t\theight: fit-content;\r\n\t\t\t\tcolor: white;\r\n\t\t\t\tfont-size: 13px;\r\n\t\t\t\tmin-width: 300px;\r\n\t\t\t\tz-index: 999;\r\n\t\t\t\t-webkit-user-select:none;\r\n\t\t\t\t-moz-user-select:none;\r\n\t\t\t\t-ms-user-select:none;\r\n\t\t\t\tuser-select:none\r\n\t\t\t}\r\n\t\t\t.palette-wrap .palette-panel{\r\n\t\t\t\twidth: 90%;\r\n\t\t\t\tposition: relative;\r\n\t\t\t}\r\n\r\n\t\t\t/* 상단 텍스트 영역 [S] */\r\n\t\t\t.palette-wrap .top-text-wrap{\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\tmargin-bottom: 2%;\r\n\t\t\t\theight: 8%;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .top-text-wrap .selection-rgb-bg{\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\ttext-align-last: center;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\talign-items: center;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .top-text-wrap .previous-rgb-bg{\r\n\t\t\t\ttext-align-last: center;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\twidth: 11.5%;\r\n\t\t\t}\r\n\t\t\t/* 상단 텍스트 영역 [E] */\r\n\r\n\t\t\t/* 컬러 영역 영역 [S] */\r\n\t\t\t.palette-wrap .color-wrap{\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\tmargin-bottom: 2%;\r\n\t\t\t}\r\n\r\n\t\t\t.palette-wrap .color-wrap .panel-selected{\r\n\t\t\t\tposition: fixed;\r\n\t\t\t\tz-index: 9999;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .color-wrap .panel-selected-pointer{\r\n\t\t\t\tposition: fixed;\r\n\t\t\t\twidth: 1px;\r\n\t\t\t\theight: 1px;\r\n\t\t\t}\r\n\r\n\t\t\t.palette-wrap .color-wrap .palette-paint{\r\n\t\t\t\twidth: 5%;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .color-wrap .paint-selected-pointer{\r\n\t\t\t\tposition: fixed;\r\n\t\t\t\theight: 1px;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\tbackground-color: #faebd700;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .color-wrap .paint-selected-pointer-child{\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tborder: solid 1px;\r\n\t\t\t\theight: 2px;\r\n\t\t\t\twidth: inherit;\r\n\t\t\t}\r\n\t\t\t/* 컬러 영역 영역 [E] */\r\n\r\n\t\t\t/* 투명도 영역 [S] */\r\n\t\t\t.palette-wrap .brightness-wrap{\r\n\t\t\t\tmargin-bottom: 2%;\r\n\t\t\t\tbackground-image: /* tint image */ linear-gradient(to right, rgb(192 192 192 / 20%), rgb(192 192 192 / 20%)), /* checkered effect */ linear-gradient(to right, #505050 50%, #a1a1a1 50%), linear-gradient(to bottom, #505050 50%, #a1a1a1 50%);\r\n\t\t\t\tbackground-blend-mode: normal, difference, normal;\r\n\t\t\t\tbackground-size: 2em 2em;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .brightness-wrap .brightness-color{\r\n\t\t\t\theight: 2vh;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tmin-height: 17px;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .brightness-wrap .brightness-selected-pointer{\r\n\t\t\t\tposition: fixed;\r\n\t\t\t\twidth: 1px;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\tbackground-color: #faebd700;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .brightness-wrap .brightness-selected-pointer-child{\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tborder: solid 1px;\r\n\t\t\t\theight: inherit;\r\n\t\t\t\twidth: 2px;\r\n\t\t\t\tbackground: inherit;\r\n\t\t\t}\r\n\t\t\t/* 투명도 영역 [E] */\r\n\r\n\t\t\t/* 하단 텍스트 영역 [S] */\r\n\t\t\t.palette-wrap .bottom-text-wrap{\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tmargin-bottom: 2%;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .bottom-text-wrap .selection-rgb-text{\r\n\t\t\t\tmargin-right: 5%;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .bottom-text-wrap .selection-rgb-text, .palette-wrap .bottom-text-wrap .previous-rgb-text{\r\n\t\t\t\toverflow-x: hidden;\r\n\t\t\t\tmax-width: 40%;\r\n\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\twidth: fit-content;\r\n\t\t\t\tbackground: rgba(255, 255, 255, 0.25);\r\n\t\t\t\tcolor: rgba(255, 255, 255, 0.25);\r\n\t\t\t}\r\n\t\t\t.palette-wrap .bottom-text-wrap .selection-rgb-text *, .palette-wrap .bottom-text-wrap .previous-rgb-text *{\r\n\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\toverflow-x: hidden;\r\n\t\t\t}\r\n\t\t\t/* 하단 텍스트 영역 [E] */\r\n\r\n\t\t\t/* 버튼 영역 [S] */\r\n\t\t\t.palette-wrap .button-wrap {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-around;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .cancel-button, .palette-wrap .apply-button{\r\n\t\t\t\tbackground: none;\r\n\t\t\t\tborder: revert;\r\n\t\t\t\tcolor: #b9b9b9;\r\n\t\t\t\tborder-color: #464646;\r\n\t\t\t}\r\n\t\t\t/* 버튼 영역 [E] */\r\n\t\t`;\r\n\t\treturn this.#style;\r\n\t}\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport Palette from \"../component/Palette\"\r\n\r\nexport default class Color extends FreedomInterface {\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-color-style'\r\n\t});\r\n\r\n\tstatic palette;\r\n\r\n\tstatic{\r\n\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-color';\r\n\t\t\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: 'C',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Font Color'\r\n        });\r\n\r\n\t\tthis.palette = new Palette({\r\n            openPositionMode: Palette.OpenPositionMode.BUTTON, \r\n            openPosition : this.toolHandler.toolButton\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else if(this.palette.isConnected){\r\n\t\t\t\tthis.palette.close();\r\n\t\t\t}else{\r\n\t\t\t\tthis.palette.open();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.palette.applyCallback = (event) => {\r\n\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active'\r\n\t\t\tthis.palette.close();\r\n\t\t}\r\n\r\n\t\tsuper.outClickElementListener(this.palette.palette, ({oldEvent, newEvent, isMouseOut})=>{\r\n\t\t\tif(isMouseOut && this.palette.palette.isConnected && ! super.isMouseInnerElement(this.toolHandler.toolButton)){\r\n\t\t\t\tthis.palette.close();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Color, dataset);\r\n\t\tif( ! dataset && Object.entries(this.dataset).length == 0){\r\n\t\t\tthis.dataset.rgba = Color.palette.r + ',' + Color.palette.g + ',' + Color.palette.b + ',' + Color.palette.a;\r\n\t\t}\r\n\t\tthis.style.color = `rgba(${this.dataset.rgba})`;\r\n\t}\r\n\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport Palette from \"../component/Palette\"\r\n\r\nexport default class Background extends FreedomInterface {\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-background-style'\r\n\t});\r\n\r\n\tstatic palette;\r\n\r\n\tstatic{\r\n\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-background';\r\n\t\t\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: 'G',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Background Color'\r\n        });\r\n\r\n\t\tthis.palette = new Palette({\r\n            openPositionMode: Palette.OpenPositionMode.BUTTON, \r\n            openPosition: this.toolHandler.toolButton,\r\n\t\t\texampleMode: Palette.ExampleMode.TEXT_BACKGROUND_COLOR\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else if(this.palette.isConnected){\r\n\t\t\t\tthis.palette.close();\r\n\t\t\t}else{\r\n\t\t\t\tthis.palette.open();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.palette.applyCallback = (event) => {\r\n\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active'\r\n\t\t\tthis.palette.close();\r\n\t\t}\r\n\r\n\t\tsuper.outClickElementListener(this.palette.palette, ({oldEvent, newEvent, isMouseOut})=>{\r\n\t\t\tif(isMouseOut && this.palette.palette.isConnected && ! super.isMouseInnerElement(this.toolHandler.toolButton)){\r\n\t\t\t\tthis.palette.close();\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Background, dataset);\r\n\r\n\t\tif( ! dataset && Object.entries(this.dataset).length == 0){\r\n\t\t\tthis.dataset.rgba = Background.palette.r + ',' + Background.palette.g + ',' + Background.palette.b + ',' + Background.palette.a;\r\n\t\t}\r\n\t\tthis.style.backgroundColor = `rgba(${this.dataset.rgba})`;\r\n\t}\r\n\r\n\r\n\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport Palette from \"../component/Palette\"\r\n\r\nexport default class Strikethrough extends FreedomInterface {\r\n\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-strikethrough-style'\r\n\t});\r\n\r\n    static palette;\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-strikethrough';\r\n\t\t\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: 'S',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Strikethrough'\r\n        });\r\n\r\n\t\tthis.palette = new Palette({\r\n            openPositionMode: Palette.OpenPositionMode.BUTTON, \r\n            openPosition: this.toolHandler.toolButton,\r\n\t\t\texampleMode: Palette.ExampleMode.TEXT_LINE_THROUGH\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else if(this.palette.isConnected){\r\n\t\t\t\tthis.palette.close();\r\n\t\t\t}else{\r\n\t\t\t\tthis.palette.open();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.palette.applyCallback = (event) => {\r\n\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active'\r\n\t\t\tthis.palette.close();\r\n\t\t}\r\n\r\n\t\tsuper.outClickElementListener(this.palette.palette, ({oldEvent, newEvent, isMouseOut})=>{\r\n\t\t\tif(isMouseOut && this.palette.palette.isConnected && ! super.isMouseInnerElement(this.toolHandler.toolButton)){\r\n\t\t\t\tthis.palette.close();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t\ttext-decoration: 1px line-through;\r\n\t\t\t\ttext-decoration-color: #404040;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Strikethrough, dataset);\r\n\t\tif( ! dataset && Object.entries(this.dataset).length == 0){\r\n\t\t\tthis.dataset.rgba = Strikethrough.palette.r + ',' + Strikethrough.palette.g + ',' + Strikethrough.palette.b + ',' + Strikethrough.palette.a;\r\n\t\t}\r\n\r\n\t\tthis.style.textDecoration = `line-through rgba(${this.dataset.rgba}) 1px`;\r\n\t}\r\n\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport Palette from \"../component/Palette\"\r\n\r\nexport default class Underline extends FreedomInterface {\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-underline-style'\r\n\t});\r\n\r\n\tstatic palette;\r\n\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-underline';\r\n\t\t\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: 'U',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Underline'\r\n        });\r\n\r\n\t\tthis.palette = new Palette({\r\n            openPositionMode: Palette.OpenPositionMode.BUTTON, \r\n            openPosition: this.toolHandler.toolButton,\r\n\t\t\texampleMode: Palette.ExampleMode.TEXT_UNDERLINE\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else if(this.palette.isConnected){\r\n\t\t\t\tthis.palette.close();\r\n\t\t\t}else{\r\n\t\t\t\tthis.palette.open();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.palette.applyCallback = (event) => {\r\n\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active'\r\n\t\t\tthis.palette.close();\r\n\t\t}\r\n\r\n\t\tsuper.outClickElementListener(this.palette.palette, ({oldEvent, newEvent, isMouseOut})=>{\r\n\t\t\tif(isMouseOut && this.palette.palette.isConnected && ! super.isMouseInnerElement(this.toolHandler.toolButton)){\r\n\t\t\t\tthis.palette.close();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t\ttext-decoration: 1px underline;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} {\r\n\t\t\t\twidth: fit-content;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tconstructor(dataset, {isDefaultStyle = true} = {}){\r\n\t\tsuper(Underline, dataset);\r\n\t\tif( ! dataset && Object.entries(this.dataset).length == 0){\r\n\t\t\tthis.dataset.rgba = Underline.palette.r + ',' + Underline.palette.g + ',' + Underline.palette.b + ',' + Underline.palette.a;\r\n\t\t}\r\n\t\tthis.style.borderBottom = `solid 2px rgba(${this.dataset.rgba})`\r\n\t\t//this.style.backgroundImage = `linear-gradient(to right, rgba(${this.dataset.rgba}), rgba(${this.dataset.rgba}))`\r\n\t\t//this.style.textDecoration = `underline rgba(${this.dataset.rgba}) 1px`;\r\n\t}\r\n\r\n}","export default class FontFamilyBox {\r\n    \r\n    #style = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-font-family-box'\r\n\t});\r\n\r\n    #fontFamilyBoxVw = 20;\r\n\r\n    #fontList = [];\r\n    #fontFamilyBox = Object.assign(document.createElement('div'), {\r\n        className: 'font-box-wrap',\r\n    })\r\n    #fontFamilyBoxContainer = Object.assign(document.createElement('ul'), {\r\n        className: 'font-box-container'\r\n    })\r\n    /*\r\n    #searchInputText = Object.assign(document.createElement('input'), {\r\n        autocomplete: 'off',\r\n        placeholder: 'search font',\r\n        type: 'text',\r\n        name: 'font-box-search',\r\n        className: 'font-box-search'\r\n    })\r\n    */\r\n    #fontElementList = [];\r\n    #selectedFont;\r\n\r\n    #defaultSampleText = '가나 다라 ab cd'\r\n    #sampleText = this.#defaultSampleText;\r\n\r\n    #applyCallback = () => {}\r\n\r\n    constructor(fontList){\r\n        if( ! fontList){\r\n            throw new Error('fontList is undefined');\r\n        }\r\n        this.#fontList = fontList;\r\n\r\n        let style = document.querySelector(`#${this.#style.id}`);\r\n        if(! style){\r\n            document.head.append(this.createStyle());\r\n        }else{\r\n            this.#style = style;\r\n        }\r\n\r\n        /*\r\n        let searchWrap = Object.assign(document.createElement('div'),{\r\n            className: 'font-box-search-wrap'\r\n        });\r\n        searchWrap.append(this.#searchInputText);\r\n        \r\n        this.#fontFamilyBox.append(searchWrap, this.#fontFamilyBoxContainer);\r\n        */\r\n        this.#fontFamilyBox.append(this.#fontFamilyBoxContainer);\r\n\r\n    }\r\n\r\n    searchInputTextEvent(event){\r\n        \r\n    }\r\n\r\n    #addFontItemEvent(item){\r\n        return new Promise(res=>{\r\n            item.onclick = (event) => {\r\n                this.#selectedFont = item;\r\n                this.applyCallback(event);\r\n            }\r\n            res(item);\r\n        })\r\n    }\r\n\r\n    #createFontElementList(sampleText){\r\n        return new Promise(resolve=> {\r\n            const createFontItem = () => {\r\n                let li = Object.assign(document.createElement('li'),{\r\n                    className: 'font-family-item',\r\n                });\r\n                if(sampleText.nodeType && sampleText.nodeType == Node.ELEMENT_NODE){\r\n                    li.innerHTML = sampleText.innerHTML;\r\n                }else{\r\n                    li.textContent = sampleText;\r\n                }\r\n                this.#addFontItemEvent(li)\r\n                return li;\r\n            }\r\n            this.#fontElementList = this.#fontList.map(fontFamily=>{\r\n                let li = createFontItem();\r\n                li.style.fontFamily = fontFamily;\r\n                return li;\r\n            });\r\n\r\n            let defaultFont = createFontItem();\r\n            this.#fontElementList.push(defaultFont)\r\n\r\n            resolve(this.#fontElementList);\r\n        })\r\n    }\r\n\r\n    async open(){\r\n        let selection = window.getSelection();\r\n        if(selection.rangeCount != 0 && selection.isCollapsed == false){\r\n            let range = selection.getRangeAt(0)\r\n            let aticle = document.createElement('aticle');\r\n            let rangeClone = range.cloneContents();\r\n            aticle.append(rangeClone);\r\n            this.#sampleText = aticle;\r\n        }\r\n        this.#sampleText = this.#sampleText == '' ? this.#defaultSampleText : this.#sampleText;\r\n    \r\n        document.body.append(this.#fontFamilyBox);\r\n\r\n        return await this.#createFontElementList(this.#sampleText).then(fontElementList => {\r\n            this.#fontFamilyBoxContainer.replaceChildren(...fontElementList);\r\n            return this.#fontFamilyBoxContainer;\r\n        });\r\n        \r\n    }\r\n    close(){\r\n        this.#fontFamilyBox.remove();\r\n    }\r\n\r\n    set applyCallback(applyCallback){\r\n        this.#applyCallback = applyCallback;\r\n    }\r\n\r\n    get applyCallback(){\r\n        return this.#applyCallback;\r\n    }\r\n\r\n    get fontFamilyBox(){\r\n        return this.#fontFamilyBox;\r\n    }\r\n\r\n    get selectedFont(){\r\n        return this.#selectedFont;\r\n    }\r\n\r\n\tget style(){\r\n\t\treturn this.#style;\r\n\t}\r\n\r\n\tset style(style){\r\n        this.#style.textContent = style;\r\n    }\r\n\r\n\tset insertStyle(style){\r\n\t\tthis.#style.sheet.insertRule(style);\r\n\t}\r\n\r\n\r\n    createStyle(){\r\n        this.#style.textContent = `\r\n            .font-box-wrap{\r\n                background: #000000bf;\r\n                position: fixed;\r\n\t\t\t\tpadding: 0.9%;\r\n\t\t\t\twidth: ${this.#fontFamilyBoxVw}vw;\r\n                height: 25vh;\r\n\t\t\t\tcolor: white;\r\n\t\t\t\tfont-size: 13px;\r\n\t\t\t\tmin-width: 300px;\r\n                overflow-y: auto;\r\n\t\t\t\t-webkit-user-select:none;\r\n\t\t\t\t-moz-user-select:none;\r\n\t\t\t\t-ms-user-select:none;\r\n\t\t\t\tuser-select:none;\r\n                z-index: 999;\r\n            }\r\n            .font-box-wrap .font-box-container{\r\n                list-style-type: none;\r\n                padding: 0;\r\n                margin: 0;\r\n            }\r\n            .font-box-wrap .font-family-item{\r\n                margin-bottom: 1%;\r\n            }\r\n            .font-box-wrap .font-family-item:hover{\r\n                background-color: #747474;\r\n                cursor: pointer;\r\n            }\r\n\r\n        `\r\n        return this.#style;\r\n    }\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport FontFamilyBox from \"../component/FontFamilyBox\";\r\n\r\nexport default class FontFamily extends FreedomInterface {\r\n    static toolHandler = new ToolHandler(this);\r\n\r\n    static #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-font-family-style'\r\n\t});\r\n\r\n    static fontFamilyBox;\r\n\r\n    static #fontList = [\r\n        'Arial, Helvetica, Sans-Serif',\r\n        'Arial Black, Gadget, Sans-Serif',\r\n        'Comic Sans MS, Textile, Cursive',\r\n        'Courier New, Courier, Monospace',\r\n        'Georgia, Times New Roman, Times, Serif',\r\n        'Impact, Charcoal, Sans-Serif',\r\n        'Lucida Console, Monaco, Monospace',\r\n        'Lucida Sans Unicode, Lucida Grande, Sans-Serif',\r\n        'Palatino Linotype, Book Antiqua, Palatino, Serif',\r\n        'Tahoma, Geneva, Sans-Serif',\r\n        'Times New Roman, Times, Serif',\r\n        'Trebuchet MS, Helvetica, Sans-Serif',\r\n        'Verdana, Geneva, Sans-Serif',\r\n        'MS Sans Serif, Geneva, Sans-Serif',\r\n        'MS Serif, New York, Serif'\r\n    ]\r\n    static{\r\n        \r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-font-family';\r\n\t\t\r\n        this.fontFamilyBox = new FontFamilyBox(this.#fontList);\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: 'F',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n            title: 'Font Family'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else if(this.fontFamilyBox.fontFamilyBox.isConnected){\r\n\t\t\t\tthis.fontFamilyBox.close();\r\n\t\t\t}else{\r\n\t\t\t\tthis.fontFamilyBox.open().then(fontFamilyBoxContainer=>{\r\n\t\t\t\t    this.toolHandler.processingElementPosition(this.fontFamilyBox.fontFamilyBox);\r\n                });\r\n\t\t\t}\r\n\t\t}\r\n\r\n        this.fontFamilyBox.applyCallback = (event) => {\r\n\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active'\r\n\t\t\tthis.fontFamilyBox.close();\r\n\t\t}\r\n\r\n        document.addEventListener(\"scroll\", () => {\r\n\t\t\tif(this.fontFamilyBox.fontFamilyBox.isConnected){\r\n\t\t\t\tthis.toolHandler.processingElementPosition(this.fontFamilyBox.fontFamilyBox);\r\n\t\t\t}\r\n\t\t});\r\n        window.addEventListener('resize', (event) => {\r\n            if(this.fontFamilyBox.fontFamilyBox.isConnected){\r\n                this.fontFamilyBox.open().then(fontFamilyBoxContainer=>{\r\n\t\t\t\t    this.toolHandler.processingElementPosition(this.fontFamilyBox.fontFamilyBox);\r\n                });\r\n            }\r\n\t\t})\r\n\r\n\t\tsuper.outClickElementListener(this.fontFamilyBox.fontFamilyBox, ({oldEvent, newEvent, isMouseOut})=>{\r\n\t\t\tif(isMouseOut && this.fontFamilyBox.fontFamilyBox.isConnected && ! super.isMouseInnerElement(this.toolHandler.toolButton)){\r\n                this.fontFamilyBox.close();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n    static createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n            .${this.#defaultStyle.id}-button{\r\n                font-size: 0.8rem;\r\n            }\r\n        `\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n    static get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(FontFamily, dataset);\r\n\t\tif( ! dataset && Object.entries(this.dataset).length == 0){\r\n            this.dataset.font_family = FontFamily.fontFamilyBox.selectedFont?.style.fontFamily;\r\n        }\r\n        this.style.fontFamily = this.dataset.font_family\r\n    }\r\n\t\r\n}\r\n","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\n\r\nexport default class Quote extends FreedomInterface {\r\n\t//static extendsElement = 'strong';\r\n\t//static defaultClass = 'line';\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-quote-style'\r\n\t});\r\n\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-quote';\r\n\t\tthis.toolHandler.isInline = false;\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: 'Q',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Quote'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else{\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tpadding-left: 1em;\r\n\t\t\t\tborder-left: 3px solid #d7d7db;\r\n\t\t\t\tmargin-inline: 2.5em;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tparentLine;\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Quote, dataset, {deleteOption : FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE});\r\n\r\n\t\t/*\r\n\t\tsuper.connectedAfterOnlyOneCallback = () => {\r\n\t\t\tthis.dataset.index = Quote.toolHandler.connectedFriends.length;\r\n\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tthis.parentEditor.createLine();\r\n\t\t\t}else{\r\n\t\t\t\tnextLine.line.lookAtMe();\r\n\t\t\t}\r\n\t\t}\r\n\r\n        super.disconnectedChildAfterCallback = () => {\r\n\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tthis.parentEditor.createLine();\r\n\t\t\t}\r\n        }\r\n\t\t*/\r\n\t}\r\n\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\n\r\nexport default class NumericPoint extends FreedomInterface {\r\n\t//static extendsElement = 'strong';\r\n\t//static defaultClass = 'line';\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\t\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-numeric-point-style'\r\n\t});\r\n\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-numeric-point';\r\n\t\tthis.toolHandler.isInline = false;\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: '1.',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Numeric Point'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else{\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n    //list-style-type: disc;\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tmargin-inline: 1.3em;\r\n\t\t\t\tlist-style-type: none;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} > * {\r\n\t\t\t\tlist-style-type: decimal;\r\n\t\t\t\tdisplay: list-item;\r\n\t\t\t\tmargin-inline: 1.3em;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\t\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tparentLine;\r\n\t\r\n\tconstructor(dataset){\r\n\t\tsuper(NumericPoint, dataset, {deleteOption : FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE});\r\n\t\tsuper.connectedChildAfterCallback = (list) => {\r\n\t\t\tlet lastItem = list.at(-1);\r\n\t\t\tif(lastItem.nodeType == Node.ELEMENT_NODE){\r\n\t\t\t\tlet inter = setInterval(()=>{\r\n\t\t\t\t\tif(lastItem.isConnected){\r\n\t\t\t\t\t\tclearInterval(inter);\r\n\t\t\t\t\t\twindow.getSelection().setPosition(lastItem, lastItem.childNodes.length)\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 50);\r\n\t\t\t}else if(lastItem.nodeType == Node.TEXT_NODE){\r\n\t\t\t\tlet inter = setInterval(()=>{\r\n\t\t\t\t\tif(lastItem.isConnected){\r\n\t\t\t\t\t\tclearInterval(inter);\r\n\t\t\t\t\t\twindow.getSelection().setPosition(lastItem, lastItem.length)\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 50);\r\n\t\t\t}\r\n\t\t}\r\n\t\t/*\r\n\t\tsuper.connectedAfterOnlyOneCallback = () => {\r\n\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tthis.parentEditor.createLine();\r\n\t\t\t}else{\r\n\t\t\t\tnextLine.line.lookAtMe();\r\n\t\t\t}\r\n\t\t}\r\n\t\t/*\r\n\t\tsuper.disconnectedChildAfterCallback = (removedNodes) => {\r\n\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tthis.parentEditor.createLine();\r\n\t\t\t}\r\n        }\r\n\t\t*/\r\n\t}\r\n\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\n\r\nexport default class BulletPoint extends FreedomInterface {\r\n\t//static extendsElement = 'strong';\r\n\t//static defaultClass = 'line';\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\t\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-bullet-point-style'\r\n\t});\r\n\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-bullet-point';\r\n\t\tthis.toolHandler.isInline = false;\r\n\t\t\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: '●',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Bullet Point'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else{\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\r\n\t\t\t.${this.toolHandler.defaultClass} {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tpadding-left: 1em;\r\n\t\t\t\tmargin-inline: 2.5em;\r\n\t\t\t\tlist-style-type: disc;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} > *{\r\n\t\t\t\tdisplay: list-item;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\t\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tparentLine;\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(BulletPoint, dataset, {deleteOption : FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE});\r\n\t\t/*\r\n\t\tsuper.connectedAfterOnlyOneCallback = () => {\r\n\t\t\tthis.dataset.index = BulletPoint.toolHandler.connectedFriends.length;\r\n\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tthis.parentEditor.createLine();\r\n\t\t\t}else{\r\n\t\t\t\tnextLine.line.lookAtMe();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsuper.disconnectedChildAfterCallback = (removedNodes) => {\r\n\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tthis.parentEditor.createLine();\r\n\t\t\t}\r\n        }\r\n\t\t*/\r\n\t}\r\n\r\n}","export default class SortBox {\r\n    \r\n    #style = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-sort-box'\r\n\t});\r\n\r\n    #sortBox = Object.assign(document.createElement('div'), {\r\n        className: 'sort-box-wrap',\r\n    })\r\n\r\n    #sortBoxContainer = Object.assign(document.createElement('ul'),{\r\n        className: 'sort-box-container',\r\n    })\r\n\r\n    #sortBoxItems = [/*'left',*/ 'center', 'right'].map(e=>Object.assign(document.createElement('li'),{\r\n        textContent: e,\r\n    }));\r\n\r\n    #selectedSort;\r\n\r\n    #applyCallback = () => {}\r\n    \r\n    constructor(){\r\n        let style = document.querySelector(`#${this.#style.id}`);\r\n        \r\n        if(! style){\r\n            document.head.append(this.createStyle());\r\n        }else{\r\n            this.#style = style;\r\n        }\r\n\r\n        this.#sortBox.append(this.#sortBoxContainer);\r\n        this.#sortBoxContainer.replaceChildren(...this.#sortBoxItems);\r\n        this.#sortBoxItems.forEach(e=>{\r\n            e.onclick = (event) => {\r\n                this.#selectedSort = e; \r\n                this.applyCallback(event);\r\n            }\r\n        });\r\n    }\r\n\r\n    open(){\r\n        document.body.append(this.#sortBox);\r\n    }\r\n\r\n    close(){\r\n        this.#sortBox.remove();\r\n    }\r\n\r\n    set applyCallback(applyCallback){\r\n        this.#applyCallback = applyCallback;\r\n    }\r\n\r\n    get applyCallback(){\r\n        return this.#applyCallback;\r\n    }\r\n\r\n    get sortBox(){\r\n        return this.#sortBox;\r\n    }\r\n\r\n    get selectedSort(){\r\n        return this.#selectedSort;\r\n    }\r\n\r\n\tget style(){\r\n\t\treturn this.#style;\r\n\t}\r\n\r\n\tset style(style){\r\n        this.#style.textContent = style;\r\n    }\r\n\r\n\tset insertStyle(style){\r\n\t\tthis.#style.sheet.insertRule(style);\r\n\t}\r\n    \r\n    \r\n    createStyle(){\r\n        this.#style.textContent = `\r\n            .sort-box-wrap {\r\n                background: #000000bf;\r\n                position: fixed;\r\n                padding: 0.9%;\r\n                height: fit-content;\r\n                color: white;\r\n                font-size: 13px;\r\n                min-width: 85px;\r\n                -webkit-user-select: none;\r\n                -moz-user-select: none;\r\n                -ms-user-select: none;\r\n                user-select: none;\r\n                z-index: 999;\r\n            }\r\n            .sort-box-wrap .sort-box-container {\r\n                list-style-type: none;\r\n                padding: 0;\r\n                margin: 0;\r\n                display: flex;\r\n                gap: 1vw;\r\n            }\r\n            \r\n            .sort-box-wrap .sort-box-container li{\r\n                transition: all 0.5s;\r\n                padding: 1% 2% 1% 2%;\r\n                margin-right: 1vw;\r\n            }\r\n            .sort-box-wrap .sort-box-container li:hover{\r\n                background-color: #95959591;\r\n                cursor: pointer;\r\n            }\r\n\r\n        `\r\n        return this.#style;\r\n    }\r\n\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport SortBox from \"../component/SortBox\";\r\n\r\nexport default class Sort extends FreedomInterface {\r\n    static toolHandler = new ToolHandler(this);\r\n\t\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-index-style'\r\n\t});\r\n\r\n    static sortBox; \r\n\r\n    static{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-index';\r\n\t\tthis.toolHandler.isInline = false;\r\n\r\n        this.sortBox = new SortBox();\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: 'Ξ',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'align'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else if(this.sortBox.sortBox.isConnected){\r\n\t\t\t\tthis.sortBox.close();\r\n\t\t\t}else{\r\n\t\t\t\tthis.sortBox.open();\r\n                this.toolHandler.processingElementPosition(this.sortBox.sortBox);\r\n\t\t\t}\r\n\t\t}\r\n\r\n        this.sortBox.applyCallback = (event) => {\r\n\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active'\r\n\t\t\tthis.sortBox.close();\r\n\t\t}\r\n\r\n        document.addEventListener(\"scroll\", () => {\r\n\t\t\tif(this.sortBox.sortBox.isConnected){\r\n\t\t\t\tthis.toolHandler.processingPalettePosition(this.sortBox.sortBox);\r\n\t\t\t}\r\n\t\t});\r\n        window.addEventListener('resize', (event) => {\r\n            if(this.sortBox.sortBox.isConnected){\r\n                this.sortBox.open();\r\n                this.toolHandler.processingElementPosition(this.sortBox.sortBox);\r\n            }\r\n\t\t})\r\n\r\n\t\tsuper.outClickElementListener(this.sortBox.sortBox, ({oldEvent, newEvent, isMouseOut})=>{\r\n\t\t\tif(isMouseOut && this.sortBox.sortBox.isConnected && ! super.isMouseInnerElement(this.toolHandler.toolButton)){\r\n\t\t\t\tthis.sortBox.close();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n    static createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\r\n            .${this.toolHandler.defaultClass} {\r\n                display: block;\r\n            }\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n    static get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Sort, dataset, {deleteOption : FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE});\r\n\r\n\t\tif( ! dataset && Object.entries(this.dataset).length == 0){\r\n            this.dataset.text_align = Sort.sortBox.selectedSort?.textContent;\r\n        }\r\n        this.style.textAlign = this.dataset.text_align;\r\n\r\n\t\tsuper.connectedAfterOnlyOneCallback = () => {\r\n\t\t\tthis.dataset.index = Sort.toolHandler.connectedFriends.length;\r\n\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tthis.parentEditor.createLine();\r\n\t\t\t}else{\r\n\t\t\t\tnextLine.line.lookAtMe();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsuper.disconnectedChildAfterCallback = (removedNodes) => {\r\n\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tthis.parentEditor.createLine();\r\n\t\t\t}\r\n        }\r\n\r\n\t}\r\n\r\n}","export default class FontSizeBox {\r\n    \r\n    #style = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-font-size-box'\r\n\t});\r\n\r\n    #fontSizeBoxVw = 30;\r\n\r\n    #min\r\n    \r\n    #max\r\n\r\n    #fontSizeBox = Object.assign(document.createElement('div'), {\r\n        className: 'font-size-wrap',\r\n    })\r\n    #fontSizeBoxContainer = Object.assign(document.createElement('ul'), {\r\n        className: 'font-size-container'\r\n    })\r\n    \r\n    #searchInputText = Object.assign(document.createElement('input'), {\r\n        autocomplete: 'off',\r\n        placeholder: 'searching your font size',\r\n        type: 'number',\r\n        name: 'font-size-search',\r\n        className: 'font-size-search',\r\n        oninput: (event) => this.#searchInputTextEvent(event),\r\n        onkeyup: (event) => {\r\n            if(event.key == 'Enter' && this.#searchInputText.value != ''){\r\n                let item = this.#fontSizeBoxContainer.querySelector(`[data-size=\"${this.#searchInputText.value}\"]`);\r\n                this.#apply(item, event);\r\n            }\r\n        },\r\n    })\r\n\r\n    #selectedFont;\r\n\r\n    #defaultSampleText = '가나 다라 ab cd'\r\n    #sampleText = this.#defaultSampleText;\r\n\r\n    #applyCallback = () => {}\r\n\r\n    #lastSelectionRange;\r\n\r\n    constructor({min, max}){\r\n        if( ! min || ! max){\r\n            throw new Error('font size is undefined');\r\n        }\r\n        this.#min = min;\r\n        this.#max = max;\r\n\r\n        let style = document.querySelector(`#${this.#style.id}`);\r\n        if(! style){\r\n            document.head.append(this.createStyle());\r\n        }else{\r\n            this.#style = style;\r\n        }\r\n\r\n        \r\n        let searchWrap = Object.assign(document.createElement('div'),{\r\n            className: 'font-size-search-wrap'\r\n        });\r\n        searchWrap.append(this.#searchInputText);\r\n        \r\n        this.#fontSizeBox.append(searchWrap, this.#fontSizeBoxContainer);\r\n        \r\n        this.#fontSizeBox.append(this.#fontSizeBoxContainer);\r\n\r\n    }\r\n\r\n    #searchInputTextEvent(event){\r\n        let number = Number(this.#searchInputText.value);\r\n        if( ! this.#searchInputText.value || this.#searchInputText.value == '') {     \r\n            this.#createFontElementList(this.#sampleText).then(fontElementList => {\r\n                this.#fontSizeBoxContainer.replaceChildren(...fontElementList);\r\n            });\r\n            return;\r\n        }else if(isNaN(number) || this.#min > number || this.#max < number){\r\n            this.#fontSizeBoxContainer.replaceChildren();\r\n            return;\r\n        }\r\n\r\n        let li = Object.assign(document.createElement('li'),{\r\n            className: 'font-size-item',\r\n        });\r\n        if(this.#sampleText.nodeType && this.#sampleText.nodeType == Node.ELEMENT_NODE){\r\n            li.innerHTML = this.#sampleText.innerHTML;\r\n        }else{\r\n            li.textContent = this.#sampleText;\r\n        }\r\n        li.style.fontSize = number + 'px';\r\n        li.dataset.size = number;\r\n        this.#addFontItemEvent(li);\r\n        this.#fontSizeBoxContainer.replaceChildren(li);\r\n        this.#searchInputText.focus();\r\n    }\r\n\r\n    #addFontItemEvent(item){\r\n        return new Promise(res=>{\r\n            item.onclick = (event) => this.#apply(item, event);\r\n            res(item);\r\n        });\r\n    }\r\n\r\n    #apply(item, event){\r\n        this.#selectedFont = item;\r\n        if(this.#lastSelectionRange){\r\n            let selection = window.getSelection();\r\n            selection.removeAllRanges();\r\n            selection.addRange(this.#lastSelectionRange);\r\n        }\r\n        this.applyCallback(event);\r\n    }\r\n\r\n    #createFontElementList(sampleText){\r\n        return new Promise(resolve=> {\r\n            let list = [];\r\n            for(let i = this.#min, len = this.#max + 1 ; i < len ; i += 1){\r\n                let li = Object.assign(document.createElement('li'),{\r\n                    className: 'font-size-item',\r\n                });\r\n                if(sampleText.nodeType && sampleText.nodeType == Node.ELEMENT_NODE){\r\n                    li.innerHTML = sampleText.innerHTML;\r\n                }else{\r\n                    li.textContent = sampleText;\r\n                }\r\n                li.style.fontSize = i + 'px';\r\n                this.#addFontItemEvent(li);\r\n                list.push(li);\r\n            }\r\n            resolve(list);\r\n        })\r\n    }\r\n\r\n    async open(){\r\n        let selection = window.getSelection();\r\n        if(selection.rangeCount != 0 && selection.isCollapsed == false){\r\n            let range = selection.getRangeAt(0);\r\n            this.#lastSelectionRange = range.cloneRange();\r\n            let aticle = document.createElement('aticle');\r\n            let rangeCloneContent = range.cloneContents();\r\n            aticle.append(rangeCloneContent);\r\n            this.#sampleText = aticle;\r\n        }\r\n        this.#sampleText = this.#sampleText == '' ? this.#defaultSampleText : this.#sampleText;\r\n    \r\n        document.body.append(this.#fontSizeBox);\r\n\r\n        return await this.#createFontElementList(this.#sampleText).then(fontElementList => {\r\n            this.#fontSizeBoxContainer.replaceChildren(...fontElementList);\r\n            return this.#fontSizeBoxContainer;\r\n        });\r\n    }\r\n\r\n    close(){\r\n        this.#fontSizeBox.remove();\r\n    }\r\n\r\n    set applyCallback(applyCallback){\r\n        this.#applyCallback = applyCallback;\r\n    }\r\n\r\n    get applyCallback(){\r\n        return this.#applyCallback;\r\n    }\r\n\r\n    get fontSizeBox(){\r\n        return this.#fontSizeBox;\r\n    }\r\n\r\n    get selectedFont(){\r\n        return this.#selectedFont;\r\n    }\r\n\r\n\tget style(){\r\n\t\treturn this.#style;\r\n\t}\r\n\r\n\tset style(style){\r\n        this.#style.textContent = style;\r\n    }\r\n\r\n\tset insertStyle(style){\r\n\t\tthis.#style.sheet.insertRule(style);\r\n\t}\r\n\r\n\r\n    createStyle(){\r\n        this.#style.textContent = `\r\n            .font-size-wrap{\r\n                background: #000000bf;\r\n                position: fixed;\r\n\t\t\t\tpadding: 0.9%;\r\n\t\t\t\twidth: ${this.#fontSizeBoxVw}vw;\r\n\t\t\t\theight: 25vh;\r\n\t\t\t\tcolor: white;\r\n                min-width: 200px;\r\n                overflow-y: auto;\r\n                -webkit-user-select: none;\r\n                -moz-user-select: none;\r\n                -ms-user-select: none;\r\n                user-select: none;\r\n                overflow-x: hidden;\r\n                z-index: 999;\r\n            }\r\n\r\n            .font-size-wrap .font-size-search-wrap{\r\n                margin-bottom: 2%;\r\n                overflow-x: hidden;\r\n            }\r\n            .font-size-wrap .font-size-search-wrap [name=\"font-size-search\"]{\r\n                outline: none;\r\n                -moz-appearance: textfield;\r\n            }\r\n            .font-size-wrap .font-size-search-wrap [name=\"font-size-search\"]::-webkit-outer-spin-button,\r\n            .font-size-wrap .font-size-search-wrap [name=\"font-size-search\"]::-webkit-inner-spin-button{\r\n                -webkit-appearance: none;\r\n                margin: 0;\r\n            }\r\n\r\n            .font-size-wrap .font-size-container{\r\n                list-style-type: none;\r\n                padding: 0;\r\n                margin: 0;\r\n            }\r\n            .font-size-wrap .font-size-container .font-size-item{\r\n                margin-bottom: 1%;\r\n                transition: all 0.5s;\r\n                overflow-x: hidden;\r\n                white-space: nowrap;\r\n                text-overflow: ellipsis;\r\n            }\r\n            .font-size-wrap .font-size-container .font-size-item:hover{\r\n                background-color: #666666;\r\n                cursor: pointer;\r\n                background-color: #666666;\r\n                padding: 2px 0 3px 0;\r\n            }\r\n\r\n        `\r\n        return this.#style;\r\n    }\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport FontSizeBox from \"../component/FontSizeBox\";\r\n\r\nexport default class FontSize extends FreedomInterface {\r\n    static toolHandler = new ToolHandler(this);\r\n\r\n    static #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-font-size-style'\r\n\t});\r\n\r\n    static fontSizeBox;\r\n\r\n    static{\r\n        \r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-font-size';\r\n\t\t\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: '↑↓',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Font Size'\r\n        });\r\n\r\n\t\tthis.fontSizeBox = new FontSizeBox({min:1, max:50});\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else if(this.fontSizeBox.fontSizeBox.isConnected){\r\n\t\t\t\tthis.fontSizeBox.close();\r\n\t\t\t}else{\r\n\t\t\t\tthis.fontSizeBox.open().then(fontSizeBoxContainer=>{\r\n\t\t\t\t    this.toolHandler.processingElementPosition(this.fontSizeBox.fontSizeBox);\r\n                });\r\n\t\t\t}\r\n\t\t}\r\n\r\n        this.fontSizeBox.applyCallback = (event) => {\r\n\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active'\r\n\t\t\tthis.fontSizeBox.close();\r\n\t\t}\r\n\r\n        document.addEventListener(\"scroll\", () => {\r\n\t\t\tif(this.fontSizeBox.fontSizeBox.isConnected){\r\n\t\t\t\tthis.toolHandler.processingElementPosition(this.fontSizeBox.fontSizeBox);\r\n\t\t\t}\r\n\t\t});\r\n        window.addEventListener('resize', (event) => {\r\n            if(this.fontSizeBox.fontSizeBox.isConnected){\r\n                this.fontSizeBox.open().then(fontSizeBoxContainer=>{\r\n\t\t\t\t    this.toolHandler.processingElementPosition(this.fontSizeBox.fontSizeBox);\r\n                });\r\n            }\r\n\t\t})\r\n\r\n\t\tsuper.outClickElementListener(this.fontSizeBox.fontSizeBox, ({oldEvent, newEvent, isMouseOut})=>{\r\n\t\t\tif(isMouseOut && this.fontSizeBox.fontSizeBox.isConnected && ! super.isMouseInnerElement(this.toolHandler.toolButton)){\r\n\t\t\t\tthis.fontSizeBox.close();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n    static createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(FontSize, dataset);\r\n\t\tif( ! dataset && Object.keys(this.dataset).length == 0){\r\n            this.dataset.font_size = FontSize.fontSizeBox.selectedFont?.style.fontSize;\r\n        }\r\n        this.style.fontSize = this.dataset.font_size\r\n    }\r\n\t\r\n}\r\n","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nexport default class Italic extends FreedomInterface {\r\n\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-italic-style'\r\n\t});\r\n\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-italic';\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: 'I',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Italic'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else{\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-style: italic;\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\r\n\t\t\t.${this.toolHandler.defaultClass} {\r\n\t\t\t\tfont-style: italic;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\t\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Italic, dataset);\r\n\t}\r\n\r\n\t\r\n}\r\n","\r\nexport default class ImageBox {\r\n    \r\n    #style = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-image-box'\r\n\t});\r\n\r\n    #imageBox = Object.assign(document.createElement('div'), {\r\n        className: 'image-box-wrap',\r\n        \r\n        innerHTML:`\r\n            <div class=\"image-resize-container\">\r\n                <div>\r\n                    <label class=\"image-box-resize-label\" for=\"image-box-resize-width\">width </label>\r\n                    <input list=\"image-box-resize-datalist\" class=\"image-box-resize-input\" id=\"image-box-resize-width\" type=\"number\" autocomplete=\"off\"/>\r\n                    <div>\r\n                        <label class=\"image-box-resize-label-error-message\" for=\"image-box-resize-width\"></label>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <label class=\"image-box-resize-label\" for=\"image-box-resize-height\">height(auto) </label>\r\n                    <input list=\"image-box-resize-datalist\" class=\"image-box-resize-input\" id=\"image-box-resize-height\" type=\"number\" autocomplete=\"off\" disabled/>\r\n                </div>\r\n            </div>\r\n            <div class=\"image-key-description-container\" style=\"display:none;\">\r\n                <kbd>Ctrl</kbd><kbd>Wheel</kbd>OR<kbd>Shift</kbd><kbd>Wheel</kbd>\r\n            </div>\r\n            <div class=\"image-button-container\">\r\n                <a href=\"javascript:void(0);\" class=\"download\" download>\r\n                    <svg style=\"zoom:125%;\" class=\"download-css-gg-push-down\"\r\n                        width=\"1rem\"\r\n                        height=\"1rem\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                    >\r\n                        <path\r\n                        d=\"M11.0001 1H13.0001V15.4853L16.2428 12.2427L17.657 13.6569L12.0001 19.3137L6.34326 13.6569L7.75748 12.2427L11.0001 15.4853V1Z\"\r\n                        fill=\"#00000073\"\r\n                        />\r\n                        <path d=\"M18 20.2877H6V22.2877H18V20.2877Z\" fill=\"#00000073\" />\r\n                    </svg>\r\n                </a>\r\n                <a href=\"javascript:void(0);\" class=\"new-window\">\r\n                    <svg style=\"zoom: 150%;\" class=\"new-window-css-gg-expand\"\r\n                        width=\"1rem\"\r\n                        height=\"1rem\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                    >\r\n                        <path\r\n                        d=\"M12.3062 16.5933L12.2713 18.593L5.2724 18.4708L5.39457 11.4719L7.39426 11.5068L7.33168 15.092L15.2262 7.46833L11.6938 7.40668L11.7287 5.40698L18.7277 5.52915L18.6055 12.5281L16.6058 12.4932L16.6693 8.85507L8.72095 16.5307L12.3062 16.5933Z\"\r\n                        fill=\"#00000073\"\r\n                        />\r\n                    </svg>\r\n                </a>\r\n                <span class=\"image-editor\">\r\n                    <svg class=\"image-editor-css-gg-pen\"\r\n                        width=\"1rem\"\r\n                        height=\"1rem\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                    >\r\n                        <path\r\n                        fill-rule=\"evenodd\"\r\n                        clip-rule=\"evenodd\"\r\n                        d=\"M21.2635 2.29289C20.873 1.90237 20.2398 1.90237 19.8493 2.29289L18.9769 3.16525C17.8618 2.63254 16.4857 2.82801 15.5621 3.75165L4.95549 14.3582L10.6123 20.0151L21.2189 9.4085C22.1426 8.48486 22.338 7.1088 21.8053 5.99367L22.6777 5.12132C23.0682 4.7308 23.0682 4.09763 22.6777 3.70711L21.2635 2.29289ZM16.9955 10.8035L10.6123 17.1867L7.78392 14.3582L14.1671 7.9751L16.9955 10.8035ZM18.8138 8.98525L19.8047 7.99429C20.1953 7.60376 20.1953 6.9706 19.8047 6.58007L18.3905 5.16586C18 4.77534 17.3668 4.77534 16.9763 5.16586L15.9853 6.15683L18.8138 8.98525Z\"\r\n                        fill=\"#00000073\"\r\n                        />\r\n                        <path\r\n                        d=\"M2 22.9502L4.12171 15.1717L9.77817 20.8289L2 22.9502Z\"\r\n                        fill=\"#00000073\"\r\n                        />\r\n                    </svg>\r\n                </span>\r\n            </div>\r\n        `\r\n        /* 리사이즈 있는 버전 주석처리 20230821\r\n        innerHTML: `\r\n            <div class=\"image-resize-container\">\r\n                <div>\r\n                    <label class=\"image-box-resize-label\" for=\"image-box-resize-width\">width : </label>\r\n                    <input list=\"image-box-resize-datalist\" class=\"image-box-resize-input\" id=\"image-box-resize-width\" type=\"number\" autocomplete=\"off\"/>\r\n                </div>\r\n                <div>\r\n                    <label class=\"image-box-resize-label\" for=\"image-box-resize-height\">height(auto) : </label>\r\n                    <input list=\"image-box-resize-datalist\" class=\"image-box-resize-input\" id=\"image-box-resize-height\" type=\"number\" autocomplete=\"off\" disabled/>\r\n                </div>\r\n            </div>\r\n            <div class=\"image-button-container\">\r\n                <a href=\"javascript:void(0);\" class=\"download-css-gg-push-down\" download></a>\r\n                <a href=\"javascript:void(0);\" class=\"new-window-css-gg-path-trim\"></a>\r\n            </div>\r\n        `\r\n        */\r\n    });\r\n\r\n    /*\r\n    #removeEventPromiseResolve;\r\n    #removeEventPromise = new Promise(resolve=>{\r\n\t\tthis.#removeEventPromiseResolve = resolve;\r\n\t});\r\n    */\r\n    #image;\r\n    #resizeRememberTarget;\r\n\r\n    constructor(){\r\n        let style = document.querySelector(`#${this.#style.id}`);\r\n        if(! style){\r\n            document.head.append(this.createStyle());\r\n        }else{\r\n            this.#style = style;\r\n        }\r\n\r\n        document.addEventListener('keydown',(event)=>{\r\n            if(this.#imageBox.hasAttribute('data-is_shft')){\r\n                return;\r\n            }\r\n            let {key} = event;\r\n            if(key === 'Shift'){\r\n                this.#imageBox.dataset.is_shft = '';\r\n            }\r\n        })\r\n\r\n        document.addEventListener('keyup', (event)=>{\r\n            if( ! this.#imageBox.hasAttribute('data-is_shft')){\r\n                return;\r\n            }    \r\n            let {key} = event;\r\n            if(key === 'Shift'){\r\n                this.#imageBox.removeAttribute('data-is_shft');\r\n            }\r\n        })\r\n        \r\n        this.#imageBox.onwheel = (event) => {\r\n            if(this.#imageBox.hasAttribute('data-is_shft')){\r\n                return;\r\n            }\r\n            event.preventDefault();\r\n            let {deltaY} = event;\r\n            \r\n            this.#imageBox.scrollTo(\r\n                this.#imageBox.scrollLeft + deltaY, undefined\r\n            );\r\n        }\r\n       \r\n        let [width, height] = this.#imageBox.querySelectorAll('#image-box-resize-width, #image-box-resize-height');\r\n        \r\n        window.addEventListener('keyup', (event) => {\r\n            if( ! this.image || ! this.resizeRememberTarget || ! width.hasAttribute('data-is_ctrl') || ! this.image.parentElement.matches(':hover')){//|| this.image.getRootNode()?.activeElement != width){\r\n                return;\r\n            }\r\n            width.removeAttribute('data-is_ctrl');\r\n        })\r\n\r\n        window.addEventListener('keydown', (event) => {\r\n            \r\n            let eventPath = event.composedPath()\r\n\r\n            if( ! this.image || ! this.resizeRememberTarget || eventPath[0] == width || ! this.image.parentElement.matches(':hover')){//|| this.image.getRootNode()?.activeElement != width){\r\n                return;\r\n            }\r\n            if(event.ctrlKey){\r\n                width.dataset.is_ctrl = '';\r\n            }else{\r\n                width.removeAttribute('data-is_ctrl');\r\n            }\r\n        })\r\n        \r\n        /**\r\n         * @see https://www.chromestatus.com/feature/6662647093133312\r\n         */\r\n        window.addEventListener('wheel', (event) => {\r\n            \r\n            if( ! this.image || ! this.resizeRememberTarget || ! this.image.parentElement.hasAttribute('data-is_resize_click') || event.composedPath()[0] == width || ! this.image.parentElement.matches(':hover')){// || this.image.getRootNode()?.activeElement != width){\r\n                return;\r\n            }\r\n            if(width.hasAttribute('data-is_ctrl')){\r\n                width.value = Number(width.value) + (event.deltaY * -1)\r\n            }else{\r\n                width.value = Number(width.value) + ((event.deltaY * -1) / 100)\r\n            }\r\n            this.oninputEvent(this.image, width, width, height, this.resizeRememberTarget);\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLImageElement} image \r\n     */\r\n    addImageHoverEvent(image, resizeRememberTarget){\r\n        //image.parentElement.onmouseover = () => {\r\n        let keyDescription = this.#imageBox.querySelector('.image-key-description-container')   \r\n        image.parentElement.onmouseenter = () => {\r\n            if(! image.src || image.src == '' || image.hasAttribute('data-error')){\r\n                return;\r\n            }\r\n             let root = image.getRootNode();\r\n            if(root != document){\r\n                root.append(this.#style);\r\n            }else{\r\n                document.head.append(this.#style);\r\n            }\r\n\r\n            if(image.parentElement && (image.parentElement !== this.#imageBox.parentElement || ! this.#imageBox.classList.contains('start'))){\r\n                image.parentElement.append(this.#imageBox);\r\n\r\n                this.#addRresizeEvent(image, resizeRememberTarget)\r\n                this.#addButtonIconEvent(image)\r\n                let appendAwait = setInterval(()=>{\r\n                    if(this.#imageBox.isConnected && image.complete && image.parentElement === this.#imageBox.parentElement && ! this.#imageBox.classList.contains('start')){\r\n                        this.#imageBox.classList.add('start');\r\n                        this.image = image;\r\n                        this.resizeRememberTarget = resizeRememberTarget;\r\n                        image.parentElement.onclick = (event) => {\r\n                            if(! image.src || image.src == '' || event.composedPath()[0] != image || image.hasAttribute('data-error')){\r\n                                return;\r\n                            }\r\n                            this.#imageBox.classList.add('start');\r\n                            image.parentElement.toggleAttribute('data-is_resize_click');\r\n                            this.falsh(image.parentElement);\r\n                            if(image.parentElement.hasAttribute('data-is_resize_click')){\r\n                                keyDescription.style.display = '';\r\n                            }else {\r\n                                keyDescription.style.display = 'none';\r\n                            }\r\n                        }\r\n                        clearInterval(appendAwait);\r\n                    }\r\n                }, 50)\r\n            }\r\n        }\r\n        image.parentElement.onmouseleave = () => {\r\n            this.#imageBox.classList.remove('start');\r\n            if(image.parentElement.hasAttribute('data-is_resize_click')){\r\n                keyDescription.style.display = 'none';\r\n                this.falsh(image.parentElement);\r\n            }\r\n            image.parentElement.removeAttribute('data-is_resize_click');\r\n            /*if(this.#imageBox.isConnected && image.parentElement === this.#imageBox.parentElement){\r\n                \r\n                this.#imageBox.classList.remove('start');\r\n                this.#imageBox.ontransitionend = () => {\r\n                    if(this.#imageBox.isConnected){\r\n                        this.#imageBox.remove();\r\n                    }\r\n                }\r\n                \r\n            }*/\r\n        }\r\n    }\r\n\r\n    falsh(target){\r\n        return new Promise(resolve => {\r\n            let flash = document.createElement('div');\r\n            Object.assign(flash.style, {\r\n                position: 'absolute',top: '0px',left: '0px',\r\n                width: '100%',height: '100%', background: 'rgba(255, 255, 255, 0.4)',\r\n                transition: 'opacity 0.2s ease 0s', opacity: 0\r\n            })\r\n            target.append(flash);\r\n            let flashAwait = setInterval(()=>{\r\n                if( ! flash.isConnected){\r\n                    return; \r\n                }\r\n                clearInterval(flashAwait);\r\n                flash.style.opacity = 1;\r\n                flash.ontransitionend = () => {\r\n                    flash.style.opacity = 0;\r\n                    flash.ontransitionend = () => {\r\n                        flash.remove();\r\n                        resolve();\r\n                    }\r\n                }\r\n            }, 50)\r\n        });\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLImageElement} image \r\n     */\r\n    //리사이즈 있는 버전 주석 처리 20230821\r\n    #addRresizeEvent(image, resizeRememberTarget){\r\n        return new Promise(resolve => {\r\n            let [width, height] = this.#imageBox.querySelectorAll('#image-box-resize-width, #image-box-resize-height');\r\n            width.value = image.width, height.value = image.height;\r\n            \r\n            width.labels[0].textContent = 'width : ';\r\n            width.labels[1].textContent = '';\r\n            \r\n            this.prevValue = undefined;\r\n\r\n            width.oninput = (event) => this.oninputEvent(image, event.target, width, height, resizeRememberTarget);\r\n            width.onkeydown = (event) => {\r\n                if(event.ctrlKey){\r\n                    width.dataset.is_ctrl = '';\r\n                }else{\r\n                    width.removeAttribute('data-is_ctrl');\r\n                }\r\n            }\r\n            width.onkeyup = (event) => {\r\n                width.removeAttribute('data-is_ctrl');\r\n            }\r\n            width.onblur = () => {\r\n                width.removeAttribute('data-is_ctrl');\r\n            }\r\n            width.onwheel = (event) => {\r\n                event.preventDefault();\r\n                if(width.hasAttribute('data-is_ctrl')){\r\n                    width.value = Number(width.value) + (event.deltaY * -1)\r\n                }else{\r\n                    width.value = Number(width.value) + ((event.deltaY * -1) / 100)\r\n                }\r\n                this.oninputEvent(image, event.target, width, height, resizeRememberTarget);\r\n            }\r\n            //height.oninput = (event) => oninputEvent(event);\r\n            resolve({width, height});\r\n        });\r\n    }\r\n    oninputEvent(image, target, width, height, resizeRememberTarget) {\r\n        if(isNaN(Number(target.value))){\r\n            target.value = target.value.replace(/\\D/g, '');\r\n            return;\r\n        }else if(Number(target.value) < 50){\r\n            width.labels[1].textContent = '(min 50)';\r\n            target.value = 50;\r\n        }else{\r\n            width.labels[1].textContent = '';\r\n        }\r\n        let sizeName = target.id.includes('width') ? 'width': 'height';\r\n        image[sizeName] = target.value;\r\n\r\n        let imageRect = image.getBoundingClientRect();\r\n\r\n        //width.value = image.width, height.value = image.height;\r\n        if(this.prevValue && parseInt(this.prevValue) == parseInt(imageRect.width)){\r\n            width.value = parseInt(this.prevValue);\r\n            width.labels[1].textContent = `(max ${parseInt(this.prevValue)}) : `\r\n        }\r\n        this.prevValue = imageRect.width;\r\n        resizeRememberTarget.dataset.width = width.value;\r\n    }\r\n    #addButtonIconEvent(image){\r\n        return new Promise(resolve => {\r\n            let [download, newWindow] = [...this.#imageBox.querySelectorAll('.download-css-gg-push-down, .new-window-css-gg-expand')]\r\n                .map(e=>e.parentElement)\r\n            download.href = image.src, newWindow.href = image.src\r\n            download.download = image.dataset.image_name;\r\n            newWindow.target = '_blank';\r\n            resolve({download, newWindow});\r\n        })\r\n    }\r\n\r\n    get imageBox(){\r\n        return this.#imageBox;\r\n    }\r\n\r\n\tget style(){\r\n\t\treturn this.#style;\r\n\t}\r\n\r\n\tset style(style){\r\n        this.#style.textContent = style;\r\n    }\r\n\r\n\tset insertStyle(style){\r\n\t\tthis.#style.sheet.insertRule(style);\r\n\t}\r\n    \r\n    set image(image){\r\n        this.#image = image; \r\n    }\r\n\r\n    get image(){\r\n        return this.#image;\r\n    }\r\n    set resizeRememberTarget(resizeRememberTarget){\r\n        this.#resizeRememberTarget = resizeRememberTarget;\r\n    }\r\n    get resizeRememberTarget(){\r\n        return this.#resizeRememberTarget;\r\n    }\r\n\r\n    createStyle(){\r\n        this.#style.textContent = `\r\n            .image-box-wrap{\r\n                position: absolute;\r\n                display: flex;\r\n                justify-content: space-between;\r\n                width: 100%;\r\n                background: linear-gradient(to bottom, #ff8787 -73%, #ffffffcf 115%);\r\n                color: white;\r\n                top:-20%;\r\n                opacity: 0;\r\n                transition: all 1s;\r\n                white-space: nowrap;\r\n                overflow-y: clip;\r\n                overflow-x: auto;\r\n            }\r\n            .image-box-wrap::-webkit-scrollbar{\r\n                display: none;\r\n            }\r\n            .image-box-wrap:hover::-webkit-scrollbar{\r\n                display: initial;\r\n                width: 7px;\r\n                height: 7px;\r\n            }\r\n            .image-box-wrap:hover::-webkit-scrollbar-track{\r\n                background: #00000040;\r\n                border-radius: 100px;\r\n                box-shadow: inset 0 0 5px #000000fc;\r\n            }\r\n            .image-box-wrap:hover::-webkit-scrollbar-thumb {\r\n                background: #0c0c0c38;\r\n                border-radius: 100px;\r\n                box-shadow: inset 0 0 5px #000000;\r\n            }\r\n            .image-box-wrap:hover::-webkit-scrollbar-thumb:hover {\r\n                /*background: #44070757;*/\r\n                background: #34000075; \r\n            }\r\n            .image-box-wrap.start{\r\n                top: 0;\r\n                opacity: 1;\r\n                transition: all 0.5s;\r\n            }\r\n            .image-box-wrap .image-button-container,\r\n            .image-box-wrap .image-resize-container, \r\n            .image-box-wrap .image-key-description-container{\r\n                display: flex;\r\n                gap: 1.5vw;\r\n                padding: 1.7%;\r\n                align-items: center;\r\n            }\r\n            .image-box-wrap .image-resize-container .image-box-resize-label{\r\n                background: linear-gradient(to right, #e50bff, #004eff);\r\n                -webkit-background-clip: text;\r\n                -webkit-text-fill-color: transparent;\r\n            }\r\n            .image-box-wrap .image-resize-container .image-box-resize-input{\r\n                outline: none;\r\n                border: none;\r\n                background-image: linear-gradient(#fff1f1d4, #ffffffeb), linear-gradient(to right, #a189890d 0%,  #ed89b275 100%);\r\n                background-origin: border-box;\r\n                background-clip: content-box, border-box;\r\n                background-color: #00000000; \r\n                width: 3.2rem;\r\n                height: 100%;\r\n                color: #ffb6b6;\r\n                font-size: 0.9rem;\r\n                text-align: center;\r\n            }\r\n            .image-box-wrap .image-button-container .new-window,\r\n            .image-box-wrap .image-button-container .download,\r\n            .image-box-wrap .image-button-container .image-editor{\r\n                display: flex;\r\n                align-items: center;\r\n                border: none;\r\n                background:none;\r\n                position:relative;\r\n                cursor: pointer;\r\n            }\r\n\r\n            .image-box-wrap kbd {\r\n                background-color: #eee;\r\n                border-radius: 3px;\r\n                border: 1px solid #b4b4b4;\r\n                box-shadow:\r\n                0 1px 1px rgba(0, 0, 0, 0.2),\r\n                0 2px 0 0 rgba(255, 255, 255, 0.7) inset;\r\n                color: #333;\r\n                display: inline-block;\r\n                font-size: 0.85em;\r\n                font-weight: 700;\r\n                line-height: 1;\r\n                padding: 2px 4px;\r\n                white-space: nowrap;\r\n                height: fit-content;\r\n            }\r\n        `\r\n        return this.#style;\r\n    }\r\n}","\r\nimport FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport ImageBox from \"../component/ImageBox\"\r\nexport default class Image extends FreedomInterface {\r\n\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n    static imageBox = new ImageBox();\r\n\r\n    static customImageCallback; \r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-image-style'\r\n\t});\r\n\r\n    static slotName = 'free-will-editor-image-description-slot';\r\n\r\n    static #selectedFile = Object.assign(document.createElement('input'), {\r\n        type: 'file',\r\n        accept: 'image/*'\r\n    });\r\n\r\n    static get selectedFile(){\r\n        return this.#selectedFile;\r\n    }\r\n\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-image';\r\n        //this.toolHandler.isInline = false;\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: '',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n            innerHTML: `\r\n            <svg class=\"${this.#defaultStyle.id} css-gg-image-icon\"\r\n                width=\"0.9rem\"\r\n                height=\"0.9rem\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                >\r\n                <path\r\n                    fill-rule=\"evenodd\"\r\n                    clip-rule=\"evenodd\"\r\n                    d=\"M7 7C5.34315 7 4 8.34315 4 10C4 11.6569 5.34315 13 7 13C8.65685 13 10 11.6569 10 10C10 8.34315 8.65685 7 7 7ZM6 10C6 9.44772 6.44772 9 7 9C7.55228 9 8 9.44772 8 10C8 10.5523 7.55228 11 7 11C6.44772 11 6 10.5523 6 10Z\"\r\n                    fill=\"currentColor\"\r\n                />\r\n                <path\r\n                    fill-rule=\"evenodd\"\r\n                    clip-rule=\"evenodd\"\r\n                    d=\"M3 3C1.34315 3 0 4.34315 0 6V18C0 19.6569 1.34315 21 3 21H21C22.6569 21 24 19.6569 24 18V6C24 4.34315 22.6569 3 21 3H3ZM21 5H3C2.44772 5 2 5.44772 2 6V18C2 18.5523 2.44772 19 3 19H7.31374L14.1924 12.1214C15.364 10.9498 17.2635 10.9498 18.435 12.1214L22 15.6863V6C22 5.44772 21.5523 5 21 5ZM21 19H10.1422L15.6066 13.5356C15.9971 13.145 16.6303 13.145 17.0208 13.5356L21.907 18.4217C21.7479 18.7633 21.4016 19 21 19Z\"\r\n                    fill=\"currentColor\"\r\n                />\r\n            </svg>\r\n            `,\r\n            title: 'Image'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else{\r\n                this.#selectedFile.click();\r\n                this.#selectedFile.onchange = ()=> {\r\n                    //let url = URL.createObjectURL(this.#selectedFile.files[0])\r\n                    this.toolHandler.toolButton.dataset.tool_status = 'active';\r\n                }\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n            .${this.toolHandler.defaultClass} {\r\n                position: relative;\r\n            }\r\n            .${this.#defaultStyle.id}.css-gg-image-icon {\r\n                zoom:120%;\r\n            }\r\n            .${this.#defaultStyle.id}.image-description{            \r\n                cursor: pointer;\r\n                display: inline-flex;\r\n                align-items: center;\r\n            }\r\n\r\n            .${this.#defaultStyle.id}.image-description::after{\r\n                margin-left: 0.5em;\r\n                content: ' ['attr(data-file_name)'] 'attr(data-open_status);\r\n                font-size: small;\r\n                color: #bdbdbd;\r\n            }\r\n\r\n            .${this.#defaultStyle.id}.image-contanier{\r\n                width: fit-content;\r\n                transition: height 0.5s ease-in-out;\r\n                overflow: hidden;\r\n                position: relative;\r\n            }\r\n            .${this.#defaultStyle.id}.image-contanier img{\r\n                max-width: 100%;\r\n                height: auto;\r\n                aspect-ratio: attr(width) / attr(height);\r\n                image-rendering: crisp-edges;\r\n                image-rendering: -webkit-optimize-contrast;\r\n            }\r\n        ` \r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n    static get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n    #file;\r\n\r\n    imgLoadEndCallback = (event) => {};\r\n\r\n    image = document.createElement('img');\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Image, dataset, {deleteOption : FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE});\r\n        \r\n        if( ! dataset && Object.keys(this.dataset).length == 0){\r\n            this.#file = Image.selectedFile.cloneNode(true);\r\n            Image.selectedFile.files = new DataTransfer().files;\r\n            \r\n            this.dataset.url = URL.createObjectURL(this.#file.files[0]);\r\n            this.dataset.name = this.#file.files[0].name;\r\n            this.dataset.last_modified = this.#file.files[0].lastModified;\r\n            this.dataset.size = this.#file.files[0].size;\r\n            this.dataset.content_type = this.#file.files[0].type;\r\n\r\n            let url = URL.createObjectURL(this.#file.files[0], this.dataset.content_type);\r\n            this.dataset.url = url;\r\n            this.image.type = this.dataset.content_type;\r\n            this.image.src = this.dataset.url;\r\n            /*fetch(this.dataset.url).then(res=>res.blob()).then(blob => {\r\n                const reader = new FileReader();\r\n                reader.readAsDataURL(blob);\r\n                reader.onloadend = () => {\r\n                    this.dataset.base64 = reader.result;\r\n                }\r\n            })*/\r\n            \r\n        }else if(( ! this.dataset.url || this.dataset.url.startsWith('blob:file')) && this.dataset.base64){\r\n            fetch(this.dataset.base64)\r\n            .then(async res=>{\r\n                return res.blob().then(blob=>{\r\n                    let imgUrl = URL.createObjectURL(blob, res.headers.get('Content-Type'))\r\n                    this.dataset.url = imgUrl;\r\n                    this.image.src = this.dataset.url;\r\n                })\r\n            })\r\n        }else if(Image.customImageCallback && typeof Image.customImageCallback == 'function'){\r\n            Image.customImageCallback(this);\r\n        }else if(this.dataset.url){\r\n            this.image.src = this.dataset.url;\r\n        }\r\n\r\n        if(! this.dataset.name){\r\n            this.remove();\r\n            throw new Error(`this file is undefined ${this.dataset.name}`);\r\n        }\r\n        \r\n        this.attachShadow({ mode : 'open' });\r\n        this.shadowRoot.append(Image.defaultStyle.cloneNode(true));\r\n        \r\n        this.createDefaultContent().then(({wrap, description, slot, aticle})=>{\r\n            this.connectedChildAfterCallback = (addedList) => {\r\n                aticle.append(...addedList);\r\n            }\r\n        });\r\n        \r\n        this.disconnectedAfterCallback = () => {\r\n            if(this.dataset.url.startsWith('blob:file')){\r\n                setTimeout(() => {\r\n                    URL.revokeObjectURL(this.dataset.url);\r\n                }, 1000 * 60 * 2)\r\n            }\r\n        }\r\n\t}\r\n\r\n    createDefaultContent(){\r\n        return new Promise(resolve=>{\r\n            let wrap = Object.assign(document.createElement('div'),{\r\n\r\n            });\r\n            wrap.draggable = false\r\n\r\n            this.shadowRoot.append(wrap);\r\n\r\n            let imageContanier = Object.assign(document.createElement('div'),{\r\n                className: `${Image.defaultStyle.id} image-contanier`\r\n            });\r\n\r\n            /*let image = Object.assign(document.createElement('img'), {\r\n                //src :`https://developer.mozilla.org/pimg/aHR0cHM6Ly9zLnprY2RuLm5ldC9BZHZlcnRpc2Vycy9iMGQ2NDQyZTkyYWM0ZDlhYjkwODFlMDRiYjZiY2YwOS5wbmc%3D.PJLnFds93tY9Ie%2BJ%2BaukmmFGR%2FvKdGU54UJJ27KTYSw%3D`\r\n                //src: this.dataset.url\r\n                //src: imgUrl\r\n            });*/\r\n\r\n            //if(this.#selectedFile.files.length != 0){\r\n            this.image.dataset.image_name = this.dataset.name\r\n            //}\r\n\r\n            imageContanier.append(this.image);\r\n\r\n            this.image.onload = () => {\r\n                if(this.dataset.width){\r\n                    this.image.width = this.dataset.width;\r\n                }\r\n                /*let applyToolAfterSelection = window.getSelection(), range = applyToolAfterSelection.getRangeAt(0);\r\n                let scrollTarget;\r\n                if(range.endContainer.nodeType == Node.TEXT_NODE){\r\n                    scrollTarget = range.endContainer.parentElement\r\n                }else{\r\n                    scrollTarget = range.endContainer;\r\n                }\r\n                scrollTarget.scrollIntoView({ behavior: \"instant\", block: \"end\", inline: \"nearest\" });\r\n                */\r\n            //this.imgLoadEndCallback();\r\n                //imageContanier.style.height = window.getComputedStyle(image).height;\r\n            }\r\n            this.image.onerror = () => {\r\n                //imageContanier.style.height = window.getComputedStyle(image).height;\r\n                this.image.dataset.error = '';\r\n            }\r\n\r\n            let {description, slot, aticle} = this.createDescription(this.image, imageContanier);\r\n\r\n            this.connectedAfterOnlyOneCallback = () => {\r\n                if(this.childNodes.length != 0 && this.childNodes[0]?.tagName != 'BR'){\r\n                    aticle.append(...[...this.childNodes].filter(e=>e!=aticle));\r\n                }\r\n                wrap.replaceChildren(...[description,imageContanier].filter(e=>e != undefined));\r\n                \r\n                Image.imageBox.addImageHoverEvent(this.image, this);\r\n                if(this.nextSibling?.tagName == 'BR'){\r\n                    this.nextSibling.remove()\r\n                }\r\n\r\n                resolve({wrap, description, slot, aticle})\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLImageElement} image \r\n     * @param {HTMLDivElement} imageContanier \r\n     * @returns {HTMLDivElement}\r\n     */\r\n    createDescription(image, imageContanier){\r\n        let description = Object.assign(document.createElement('div'),{\r\n            className: `${Image.defaultStyle.id} image-description`\r\n        });\r\n\r\n        description.dataset.file_name = this.dataset.name\r\n        description.dataset.open_status = this.dataset.open_status || '▼'; // '▼';\r\n        imageContanier.style.height = this.dataset.height || 'auto'\r\n        \r\n        let {slot, aticle} = this.createSlot();\r\n        \r\n        description.append(slot)\r\n\r\n        description.onclick = (event) => {\r\n            if(description.dataset.open_status == '▼'){\r\n                description.dataset.open_status = '▶'\r\n                imageContanier.style.height = window.getComputedStyle(image).height;\r\n                setTimeout(()=>{\r\n                    imageContanier.style.height = '0px';\r\n                    this.dataset.height = '0px';\r\n                },100)\r\n\r\n            }else{\r\n                description.dataset.open_status = '▼';\r\n                setTimeout(()=>{\r\n                    imageContanier.style.height = window.getComputedStyle(image).height;\r\n                    this.dataset.height = 'auto'\r\n                },100)\r\n                \r\n                image.style.opacity = '';\r\n                image.style.visibility = '';\r\n            }\r\n            this.dataset.open_status = description.dataset.open_status;\r\n        }\r\n\r\n        imageContanier.ontransitionend = () => {\r\n            if(description.dataset.open_status == '▼'){\r\n                imageContanier.style.height = 'auto';\r\n            }else{\r\n                image.style.opacity = 0;\r\n                image.style.visibility = 'hidden';\r\n            }\r\n        }\r\n\r\n        return {description, slot, aticle};\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @returns {HTMLSlotElement}\r\n     */\r\n    createSlot(){\r\n        let aticle = document.createElement('div');\r\n        \r\n        aticle.contentEditable = 'false';\r\n        aticle.draggable = 'false'; \r\n\r\n        //if(this.childNodes.length != 0 && this.childNodes[0]?.tagName != 'BR'){\r\n            let randomId = Array.from(\r\n                window.crypto.getRandomValues(new Uint32Array(16)),\r\n                (e)=>e.toString(32).padStart(2, '0')\r\n            ).join('');\r\n            //aticle.append(...[...this.childNodes].map(e=>e.cloneNode(true)));\r\n            aticle.append(...this.childNodes);\r\n            aticle.slot = Image.slotName + '-' + randomId\r\n            this.append(aticle);\r\n            \r\n            let slot = Object.assign(document.createElement('slot'),{\r\n                name: Image.slotName + '-' + randomId\r\n            });\r\n            return {slot, aticle};\r\n        //}else{\r\n        //    return undefined\r\n        //}\r\n\r\n    }\r\n    /**\r\n     * @returns {HTMLInputElement}\r\n     */\r\n    get selectedFile(){\r\n        return this.#file\r\n    }\r\n}\r\n","import FreedomInterface from \"../module/FreedomInterface\"\r\n\r\nexport default class VideoBox {\r\n    \r\n    #style = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-video-box'\r\n\t});\r\n\r\n    #videoBox = Object.assign(document.createElement('div'), {\r\n        className: 'video-box-wrap',\r\n        \r\n        innerHTML:`\r\n            <div class=\"video-resize-container\">\r\n                <div>\r\n                    <label class=\"video-box-resize-label\" for=\"video-box-resize-width\">width : </label>\r\n                    <input list=\"video-box-resize-datalist\" class=\"video-box-resize-input\" id=\"video-box-resize-width\" type=\"number\" autocomplete=\"off\"/>\r\n                    <div>\r\n                        <label class=\"video-box-resize-label-error-message\" for=\"video-box-resize-width\"></label>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <label class=\"video-box-resize-label\" for=\"video-box-resize-height\">height(auto) : </label>\r\n                    <input list=\"video-box-resize-datalist\" class=\"video-box-resize-input\" id=\"video-box-resize-height\" type=\"number\" autocomplete=\"off\" disabled/>\r\n                </div>\r\n            </div>\r\n            <div class=\"video-key-description-container\" style=\"display:none;\">\r\n                <kbd>Ctrl</kbd><kbd>Wheel</kbd>OR<kbd>Shift</kbd><kbd>Wheel</kbd>\r\n            </div>\r\n            <div class=\"video-button-container\">\r\n                <a href=\"javascript:void(0);\" class=\"download\" download>\r\n                    <svg style=\"zoom:140%;\" class=\"download-css-gg-push-down\"\r\n                        width=\"1rem\"\r\n                        height=\"1rem\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                    >\r\n                        <path\r\n                        d=\"M11.0001 1H13.0001V15.4853L16.2428 12.2427L17.657 13.6569L12.0001 19.3137L6.34326 13.6569L7.75748 12.2427L11.0001 15.4853V1Z\"\r\n                        fill=\"#00000073\"\r\n                        />\r\n                        <path d=\"M18 20.2877H6V22.2877H18V20.2877Z\" fill=\"#00000073\" />\r\n                    </svg>\r\n                </a>\r\n                <a href=\"javascript:void(0);\" class=\"new-window\">\r\n                    <svg style=\"zoom: 150%;\" class=\"new-window-css-gg-expand\"\r\n                        width=\"1rem\"\r\n                        height=\"1rem\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                    >\r\n                        <path\r\n                        d=\"M12.3062 16.5933L12.2713 18.593L5.2724 18.4708L5.39457 11.4719L7.39426 11.5068L7.33168 15.092L15.2262 7.46833L11.6938 7.40668L11.7287 5.40698L18.7277 5.52915L18.6055 12.5281L16.6058 12.4932L16.6693 8.85507L8.72095 16.5307L12.3062 16.5933Z\"\r\n                        fill=\"#00000073\"\r\n                        />\r\n                    </svg>\r\n                </a>\r\n            </div>\r\n        `\r\n        /* 리사이즈 있는 버전 주석처리 20230821 <i class=\"download-css-gg-push-down\"></i>\r\n        innerHTML: `\r\n            <div class=\"video-resize-container\">\r\n                <div>\r\n                    <label class=\"video-box-resize-label\" for=\"video-box-resize-width\">width : </label>\r\n                    <input list=\"video-box-resize-datalist\" class=\"video-box-resize-input\" id=\"video-box-resize-width\" type=\"number\" autocomplete=\"off\"/>\r\n                </div>\r\n                <div>\r\n                    <label class=\"video-box-resize-label\" for=\"video-box-resize-height\">height(auto) : </label>\r\n                    <input list=\"video-box-resize-datalist\" class=\"video-box-resize-input\" id=\"video-box-resize-height\" type=\"number\" autocomplete=\"off\" disabled/>\r\n                </div>\r\n            </div>\r\n            <div class=\"video-button-container\">\r\n                <a href=\"javascript:void(0);\" class=\"download-css-gg-push-down\" download></a>\r\n                <a href=\"javascript:void(0);\" class=\"new-window-css-gg-path-trim\"></a>\r\n            </div>\r\n        `\r\n        */\r\n    });\r\n    /*\r\n    #removeEventPromiseResolve;\r\n    #removeEventPromise = new Promise(resolve=>{\r\n\t\tthis.#removeEventPromiseResolve = resolve;\r\n\t});\r\n    */\r\n    #video;\r\n    #resizeRememberTarget;\r\n\r\n    constructor(){\r\n        let style = document.querySelector(`#${this.#style.id}`);\r\n        if(! style){\r\n            document.head.append(this.createStyle());\r\n        }else{\r\n            this.#style = style;\r\n        }\r\n        document.addEventListener('keydown',(event)=>{\r\n            if(this.#videoBox.hasAttribute('data-is_shft')){\r\n                return;\r\n            }\r\n            let {key} = event;\r\n            if(key === 'Shift'){\r\n                this.#videoBox.dataset.is_shft = '';\r\n            }\r\n        })\r\n\r\n        document.addEventListener('keyup', (event)=>{\r\n            if( ! this.#videoBox.hasAttribute('data-is_shft')){\r\n                return;\r\n            }    \r\n            let {key} = event;\r\n            if(key === 'Shift'){\r\n                this.#videoBox.removeAttribute('data-is_shft');\r\n            }\r\n        })\r\n        \r\n        this.#videoBox.onwheel = (event) => {\r\n            if(this.#videoBox.hasAttribute('data-is_shft')){\r\n                return;\r\n            }\r\n            event.preventDefault();\r\n            let {deltaY} = event;\r\n            \r\n            this.#videoBox.scrollTo(\r\n                this.#videoBox.scrollLeft + deltaY, undefined\r\n            );\r\n        }\r\n        let [width, height] = this.#videoBox.querySelectorAll('#video-box-resize-width, #video-box-resize-height');\r\n        \r\n        window.addEventListener('keyup', (event) => {\r\n            if( ! this.video || ! this.resizeRememberTarget || ! width.hasAttribute('data-is_ctrl') || ! this.video.parentElement.matches(':hover')){//|| this.video.getRootNode()?.activeElement != width){\r\n                return;\r\n            }\r\n            width.removeAttribute('data-is_ctrl');\r\n        })\r\n\r\n        window.addEventListener('keydown', (event) => {\r\n            \r\n            let eventPath = event.composedPath()\r\n\r\n            if( ! this.video || ! this.resizeRememberTarget || eventPath[0] == width || ! this.video.parentElement.matches(':hover')){//|| this.video.getRootNode()?.activeElement != width){\r\n                return;\r\n            }\r\n            if(event.ctrlKey){\r\n                width.dataset.is_ctrl = '';\r\n            }else{\r\n                width.removeAttribute('data-is_ctrl');\r\n            }\r\n        })\r\n        \r\n        /**\r\n         * @see https://www.chromestatus.com/feature/6662647093133312\r\n         */\r\n        window.addEventListener('wheel', (event) => {\r\n\r\n            if( ! this.video || ! this.resizeRememberTarget || ! this.video.parentElement.hasAttribute('data-is_resize_click') || event.composedPath()[0] == width || ! this.video.parentElement.matches(':hover')){// || this.video.getRootNode()?.activeElement != width){\r\n                return;\r\n            }\r\n            if(width.hasAttribute('data-is_ctrl')){\r\n                width.value = Number(width.value) + (event.deltaY * -1)\r\n            }else{\r\n                width.value = Number(width.value) + ((event.deltaY * -1) / 100)\r\n            }\r\n            this.oninputEvent(this.video, width, height, this.resizeRememberTarget);\r\n            \r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLVideoElement} video \r\n     */\r\n    addVideoHoverEvent(video, resizeRememberTarget){\r\n        //video.parentElement.onmouseover = () => {\r\n        let keyDescription = this.#videoBox.querySelector('.video-key-description-container')\r\n        video.parentElement.onmouseenter = () => {\r\n            if(! video.src || video.src == '' || video.hasAttribute('data-error')){\r\n                return;\r\n            }\r\n            let root = video.getRootNode();\r\n            if(root != document){\r\n                root.append(this.#style);\r\n            }else{\r\n                document.head.append(this.#style);\r\n            }\r\n\r\n            if(video.parentElement && (video.parentElement !== this.#videoBox.parentElement || ! this.#videoBox.classList.contains('start'))){\r\n                video.parentElement.append(this.#videoBox);\r\n\r\n                this.#addRresizeEvent(video, resizeRememberTarget)\r\n                this.#addButtonIconEvent(video)\r\n                let appendAwait = setInterval(()=>{\r\n                    if(this.#videoBox.isConnected && video.readyState == 4 && video.parentElement === this.#videoBox.parentElement && ! this.#videoBox.classList.contains('start')){\r\n                        this.#videoBox.classList.add('start');\r\n                        this.video = video;\r\n                        this.resizeRememberTarget = resizeRememberTarget;\r\n                        video.parentElement.onclick = (event) => {\r\n                            if(! video.src || video.src == '' || event.composedPath()[0] != video || video.hasAttribute('data-error')){\r\n                                return;\r\n                            }\r\n                            video.parentElement.toggleAttribute('data-is_resize_click');\r\n                            this.falsh(video.parentElement);\r\n                            if(video.parentElement.hasAttribute('data-is_resize_click')){\r\n                                keyDescription.style.display = '';\r\n                            }else {\r\n                                keyDescription.style.display = 'none';\r\n                            }\r\n                        }\r\n                        clearInterval(appendAwait);\r\n                    }\r\n                }, 50)\r\n            }\r\n        }\r\n        video.parentElement.onmouseleave = () => {\r\n            this.#videoBox.classList.remove('start');\r\n            if(video.parentElement.hasAttribute('data-is_resize_click')){\r\n                keyDescription.style.display = 'none';\r\n                this.falsh(video.parentElement);\r\n            }\r\n            video.parentElement.removeAttribute('data-is_resize_click');\r\n            /*if(this.#videoBox.isConnected && video.parentElement === this.#videoBox.parentElement){\r\n                \r\n                this.#videoBox.classList.remove('start');\r\n                this.#videoBox.ontransitionend = () => {\r\n                    if(this.#videoBox.isConnected){\r\n                        this.#videoBox.remove();\r\n                    }\r\n                }\r\n                \r\n            }*/\r\n        }\r\n    }\r\n\r\n    falsh(target){\r\n        return new Promise(resolve => {\r\n            let flash = document.createElement('div');\r\n            Object.assign(flash.style, {\r\n                position: 'absolute',top: '0px',left: '0px',\r\n                width: '100%',height: '100%', background: 'rgba(255, 255, 255, 0.4)',\r\n                transition: 'opacity 0.2s ease 0s', opacity: 0\r\n            })\r\n            target.append(flash);\r\n            let flashAwait = setInterval(()=>{\r\n                if( ! flash.isConnected){\r\n                    return; \r\n                }\r\n                clearInterval(flashAwait);\r\n                flash.style.opacity = 1;\r\n                flash.ontransitionend = () => {\r\n                    flash.style.opacity = 0;\r\n                    flash.ontransitionend = () => {\r\n                        flash.remove();\r\n                        resolve();\r\n                    }\r\n                }\r\n            }, 50)\r\n        });\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLVideoElement} video \r\n     */\r\n    //리사이즈 있는 버전 주석 처리 20230821\r\n    #addRresizeEvent(video, resizeRememberTarget){\r\n        return new Promise(resolve => {\r\n            let [width, height] = this.#videoBox.querySelectorAll('#video-box-resize-width, #video-box-resize-height');\r\n            let rect = video.getBoundingClientRect();\r\n            width.value = parseInt(rect.width), height.value = parseInt(rect.height);\r\n            \r\n            width.labels[0].textContent = 'width : ';\r\n            width.labels[1].textContent = '';\r\n\r\n            this.prevValue = undefined;\r\n\r\n            width.oninput = (event) => this.oninputEvent(video, width, height, resizeRememberTarget);\r\n            width.onkeydown = (event) => {\r\n                if(event.ctrlKey){\r\n                    width.dataset.is_ctrl = '';\r\n                }else{\r\n                    width.removeAttribute('data-is_ctrl');\r\n                }\r\n            }\r\n            width.onkeyup = (event) => {\r\n                width.removeAttribute('data-is_ctrl');\r\n            }\r\n            width.onblur = () => {\r\n                width.removeAttribute('data-is_ctrl');\r\n            }\r\n            width.onwheel = (event) => {\r\n                event.preventDefault();\r\n                if(width.hasAttribute('data-is_ctrl')){\r\n                    width.value = Number(width.value) + (event.deltaY * -1)\r\n                }else{\r\n                    width.value = Number(width.value) + ((event.deltaY * -1) / 100)\r\n                }\r\n\r\n                this.oninputEvent(video, width, height, resizeRememberTarget);\r\n            }\r\n            //height.oninput = (event) => oninputEvent(event);\r\n            resolve({width, height});\r\n        });\r\n    }\r\n    oninputEvent(video, width, height, resizeRememberTarget) {\r\n        if(isNaN(Number(width.value))){\r\n            width.value = width.value.replace(/\\D/g, '');\r\n            return;\r\n        }else if(Number(width.value) < 50){\r\n            width.labels[1].textContent = '(min 50)';\r\n            width.value = 50;\r\n        }else{\r\n            width.labels[1].textContent = '';\r\n        }\r\n        let sizeName = width.id.includes('width') ? 'width': 'height';\r\n        video[sizeName] = width.value;\r\n\r\n        let videoRect = video.getBoundingClientRect();\r\n\r\n        if(this.prevValue && parseInt(this.prevValue) == parseInt(videoRect.width)){\r\n            width.value = parseInt(this.prevValue);\r\n            width.labels[1].textContent = `(max ${parseInt(this.prevValue)}) : `\r\n        }\r\n        this.prevValue = videoRect.width\r\n\r\n        resizeRememberTarget.dataset.width = width.value;\r\n    }\r\n    #addButtonIconEvent(video){\r\n        return new Promise(resolve => {\r\n            let [download, newWindow] = [...this.#videoBox.querySelectorAll('.download-css-gg-push-down, .new-window-css-gg-expand')]\r\n                .map(e=>e.parentElement)\r\n            download.href = video.src, newWindow.href = video.src;\r\n            download.download = video.dataset.video_name;\r\n            newWindow.target = '_blank';\r\n            resolve({download, newWindow});\r\n        })\r\n    }\r\n\r\n    get videoBox(){\r\n        return this.#videoBox;\r\n    }\r\n\r\n\tget style(){\r\n\t\treturn this.#style;\r\n\t}\r\n\r\n\tset style(style){\r\n        this.#style.textContent = style;\r\n    }\r\n\r\n\tset insertStyle(style){\r\n\t\tthis.#style.sheet.insertRule(style);\r\n\t}\r\n    \r\n    set video(video){\r\n        this.#video = video; \r\n    }\r\n\r\n    get video(){\r\n        return this.#video;\r\n    }\r\n    set resizeRememberTarget(resizeRememberTarget){\r\n        this.#resizeRememberTarget = resizeRememberTarget;\r\n    }\r\n    get resizeRememberTarget(){\r\n        return this.#resizeRememberTarget;\r\n    }\r\n\r\n    createStyle(){\r\n        this.#style.textContent = `\r\n            .video-box-wrap{\r\n                position: absolute;\r\n                display: flex;\r\n                justify-content: space-between;\r\n                width: 100%;\r\n                background: linear-gradient(to bottom, #ff8787 -73%, #ffffffcf 115%);\r\n                color: white;\r\n                top:-20%;\r\n                opacity: 0;\r\n                transition: all 1s;\r\n                white-space: nowrap;\r\n                overflow-y: clip;\r\n                overflow-x: auto;\r\n            }\r\n            .video-box-wrap::-webkit-scrollbar{\r\n                display: none;\r\n            }\r\n            .video-box-wrap:hover::-webkit-scrollbar{\r\n                display: initial;\r\n                width: 7px;\r\n                height: 7px;\r\n            }\r\n            .video-box-wrap:hover::-webkit-scrollbar-track{\r\n                background: #00000040;\r\n                border-radius: 100px;\r\n                box-shadow: inset 0 0 5px #000000fc;\r\n            }\r\n            .video-box-wrap:hover::-webkit-scrollbar-thumb {\r\n                background: #0c0c0c38;\r\n                border-radius: 100px;\r\n                box-shadow: inset 0 0 5px #000000;\r\n            }\r\n            .video-box-wrap:hover::-webkit-scrollbar-thumb:hover {\r\n                /*background: #44070757;*/\r\n                background: #34000075; \r\n            }\r\n            .video-box-wrap.start{\r\n                top: 0;\r\n                opacity: 1;\r\n                transition: all 0.5s;\r\n            }\r\n            .video-box-wrap .video-button-container, \r\n            .video-box-wrap .video-resize-container,\r\n            .video-box-wrap .video-key-description-container{\r\n                display: flex;\r\n                gap: 1.5vw;\r\n                padding: 1.7%;\r\n                align-items: center;\r\n            }\r\n            .video-box-wrap .video-resize-container .video-box-resize-label{\r\n                background: linear-gradient(to right, #e50bff, #004eff);\r\n                -webkit-background-clip: text;\r\n                -webkit-text-fill-color: transparent;\r\n            }\r\n            .video-box-wrap .video-resize-container .video-box-resize-input{\r\n                outline: none;\r\n                border: none;\r\n                background-image: linear-gradient(#fff1f1d4, #ffffffeb), linear-gradient(to right, #a189890d 0%,  #ed89b275 100%);\r\n                background-origin: border-box;\r\n                background-clip: content-box, border-box;\r\n                background-color: #00000000; \r\n                width: 3.2rem;\r\n                height: 100%;\r\n                color: #ffb6b6;\r\n                font-size: 0.9rem;\r\n                text-align: center;\r\n            }\r\n            .video-box-wrap .video-button-container .new-window,\r\n            .video-box-wrap .video-button-container .download{\r\n                display: flex;\r\n                align-items: center;\r\n                border: none;\r\n                background:none;\r\n                position:relative;\r\n                cursor: pointer;\r\n            }\r\n\r\n            .video-box-wrap kbd {\r\n                background-color: #eee;\r\n                border-radius: 3px;\r\n                border: 1px solid #b4b4b4;\r\n                box-shadow:\r\n                0 1px 1px rgba(0, 0, 0, 0.2),\r\n                0 2px 0 0 rgba(255, 255, 255, 0.7) inset;\r\n                color: #333;\r\n                display: inline-block;\r\n                font-size: 0.85em;\r\n                font-weight: 700;\r\n                line-height: 1;\r\n                padding: 2px 4px;\r\n                white-space: nowrap;\r\n                height: fit-content;\r\n            }\r\n        `\r\n        return this.#style;\r\n    }\r\n\r\n}","\r\nimport FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport VideoBox from \"../component/VideoBox\"\r\nexport default class Video extends FreedomInterface {\r\n\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n    static videoBox = new VideoBox();\r\n\r\n    static customVideoCallback;\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-video-style'\r\n\t});\r\n\r\n    static descriptionName = 'free-will-editor-video-description-slot';\r\n\r\n    static #selectedFile = Object.assign(document.createElement('input'), {\r\n        type: 'file',\r\n        accept: 'video/*'\r\n    });\r\n\r\n    static get selectedFile(){\r\n        return this.#selectedFile;\r\n    }\r\n\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-video';\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: '',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n            innerHTML: `\r\n            <svg class=\"${this.#defaultStyle.id} css-gg-video-icon\"\r\n            width=\"0.9rem\"\r\n            height=\"0.9rem\"\r\n            viewBox=\"0 0 24 24\"\r\n            fill=\"none\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            >\r\n                <path\r\n                    fill-rule=\"evenodd\"\r\n                    clip-rule=\"evenodd\"\r\n                    d=\"M4 4.5V6.5H12V7.5H3C1.34315 7.5 0 8.84315 0 10.5V16.5C0 18.1569 1.34315 19.5 3 19.5H15C16.5731 19.5 17.8634 18.2892 17.9898 16.7487L24 17.5V9.5L17.9898 10.2513C17.8634 8.71078 16.5731 7.5 15 7.5H14V5.5C14 4.94772 13.5523 4.5 13 4.5H4ZM18 12.2656V14.7344L22 15.2344V11.7656L18 12.2656ZM16 10.5C16 9.94772 15.5523 9.5 15 9.5H3C2.44772 9.5 2 9.94772 2 10.5V16.5C2 17.0523 2.44772 17.5 3 17.5H15C15.5523 17.5 16 17.0523 16 16.5V10.5Z\"\r\n                    fill=\"currentColor\"\r\n                />\r\n            </svg>\r\n            `,\r\n            title: 'Video'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else{\r\n                this.#selectedFile.onchange = ()=> {\r\n                    //let url = URL.createObjectURL(this.#selectedFile.files[0])\r\n                    this.toolHandler.toolButton.dataset.tool_status = 'active';\r\n                }\r\n                this.#selectedFile.click();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n            .${this.toolHandler.defaultClass} {\r\n                position: relative;\r\n            }\r\n            .${this.#defaultStyle.id}.css-gg-video-icon {\r\n                zoom:120%;\r\n            }\r\n            .${this.#defaultStyle.id}.video-description{            \r\n                cursor: pointer;\r\n                display: inline-flex;\r\n                align-items: center;\r\n            }\r\n            .${this.#defaultStyle.id}.video-description::after{\r\n                margin-left: 0.5em;\r\n                content: ' ['attr(data-file_name)'] 'attr(data-open_status);\r\n                font-size: small;\r\n                color: #bdbdbd;\r\n            }\r\n\r\n            .${this.#defaultStyle.id}.video-contanier{\r\n                width: fit-content;\r\n                transition: height 0.5s ease-in-out;\r\n                overflow: hidden;\r\n                position: relative;\r\n            }\r\n            .${this.#defaultStyle.id}.video-contanier video{\r\n                max-width: 100%;\r\n                height: auto;\r\n                aspect-ratio: attr(width) / attr(height);\r\n            }\r\n        `\r\n        let defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n    static get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n    \r\n\r\n    #file;\r\n\r\n    videoLoadEndCallback = (event) => {};\r\n\r\n    video = Object.assign(document.createElement('video'), {\r\n        loop: true,\r\n        controls: true\r\n    });\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Video, dataset, {deleteOption : FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE});\r\n\r\n\t\tif( ! dataset && Object.entries(this.dataset).length == 0){\r\n            this.#file = Video.selectedFile.cloneNode(true);\r\n            Video.selectedFile.files = new DataTransfer().files;\r\n            \r\n            this.dataset.url = URL.createObjectURL(this.#file.files[0]);\r\n            this.dataset.name = this.#file.files[0].name;\r\n            this.dataset.lastModified = this.#file.files[0].lastModified;\r\n            this.dataset.size = this.#file.files[0].size;\r\n            this.dataset.content_type = this.#file.files[0].type;\r\n\r\n            let url = URL.createObjectURL(this.#file.files[0], this.dataset.content_type);\r\n            this.dataset.url = url;\r\n            this.video.type = this.dataset.content_type;\r\n            this.video.src = this.dataset.url;\r\n            /*fetch(this.dataset.url).then(res=>res.blob()).then(blob => {\r\n                const reader = new FileReader();\r\n                reader.readAsDataURL(blob);\r\n                reader.onloadend = () => {\r\n                    this.dataset.base64 = reader.result;\r\n                }\r\n            })*/\r\n            \r\n        }else if(( ! this.dataset.url || this.dataset.url.startsWith('blob:file')) && this.dataset.base64){\r\n            fetch(this.dataset.base64)\r\n            .then(async res=>{\r\n                return res.blob().then(blob=>{\r\n                    let videoUrl = URL.createObjectURL(blob, res.headers.get('Content-Type'))\r\n                    this.dataset.url = videoUrl;\r\n                    this.video.src = this.dataset.url;\r\n                })\r\n            })\r\n        }else if(Video.customVideoCallback && typeof Video.customVideoCallback == 'function'){\r\n            Video.customVideoCallback(this);\r\n        }else if(this.dataset.url){\r\n            this.video.src = this.dataset.url;\r\n        }\r\n\r\n        if(! this.dataset.name){\r\n            this.remove();\r\n            throw new Error(`this file is undefined ${this.dataset.name}`);\r\n        }\r\n\r\n        this.attachShadow({ mode : 'open' });\r\n        this.shadowRoot.append(Video.defaultStyle.cloneNode(true));\r\n\r\n        this.createDefaultContent().then(({wrap, description, slot, aticle})=>{\r\n            this.connectedChildAfterCallback = (addedList) => {\r\n                aticle.append(...addedList);\r\n            }\r\n        });\r\n\r\n        this.disconnectedAfterCallback = () => {\r\n            if(this.dataset.url.startsWith('blob:file')){\r\n                setTimeout(() => {\r\n                    URL.revokeObjectURL(this.dataset.url);\r\n                }, 1000 * 60 * 2)\r\n            }\r\n        }\r\n\t}\r\n\r\n    createDefaultContent(){\r\n        return new Promise(resolve=>{\r\n            let wrap = Object.assign(document.createElement('div'),{\r\n\r\n            });\r\n            wrap.draggable = false\r\n\r\n            this.shadowRoot.append(wrap);\r\n\r\n            let videoContanier = Object.assign(document.createElement('div'),{\r\n                className: `${Video.defaultStyle.id} video-contanier`\r\n            });\r\n\r\n            this.video.dataset.video_name = this.dataset.name\r\n\r\n            videoContanier.append(this.video);\r\n            this.video.onload = () => {\r\n                if(\r\n                    (this.file.length != 0 && video.canPlayType(this.file.files[0].type) == '') ||\r\n                    (\r\n                        this.dataset.name && \r\n                        this.video.canPlayType(\r\n                            `video/${this.dataset.name.substring(this.dataset.name.lastIndexOf('.') + 1)}`\r\n                        ) == ''\r\n                    )\r\n                ){\r\n                    this.videoIsNotWorking();\r\n                }\r\n            }\r\n            this.video.onloadeddata = () => {\r\n                //videoContanier.style.height = window.getComputedStyle(video).height;\r\n                /*let applyToolAfterSelection = window.getSelection(), range = applyToolAfterSelection.getRangeAt(0);\r\n                let scrollTarget;\r\n                if(range.endContainer.nodeType == Node.TEXT_NODE){\r\n                    scrollTarget = range.endContainer.parentElement\r\n                }else{\r\n                    scrollTarget = range.endContainer;\r\n                }\r\n                scrollTarget.scrollIntoView({ behavior: \"instant\", block: \"end\", inline: \"nearest\" });\r\n                */\r\n                this.video.play();\r\n                if(this.dataset.width){\r\n                    this.video.width = this.dataset.width;\r\n                }\r\n            }\r\n            this.video.onerror = () => {\r\n                //videoContanier.style.height = window.getComputedStyle(video).height;\r\n            }\r\n\r\n            let {description, slot, aticle} = this.createDescription(this.video, videoContanier);\r\n\r\n            this.connectedAfterOnlyOneCallback = () => {\r\n                if(this.childNodes.length != 0 && this.childNodes[0]?.tagName != 'BR'){\r\n                    aticle.append(...[...this.childNodes].filter(e=>e!=aticle));\r\n                }\r\n                wrap.replaceChildren(...[description,videoContanier].filter(e=>e != undefined));\r\n                \r\n                Video.videoBox.addVideoHoverEvent(this.video, this);\r\n                if(this.nextSibling?.tagName == 'BR'){\r\n                    this.nextSibling.remove()\r\n                }\r\n\r\n                resolve({wrap, description, slot, aticle})\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLVideoElement} image \r\n     * @param {HTMLDivElement} imageContanier \r\n     * @returns {HTMLDivElement}\r\n     */\r\n    createDescription(video, videoContanier){\r\n        let description = Object.assign(document.createElement('div'), {\r\n            className : `${Video.defaultStyle.id} video-description`\r\n        });\r\n\r\n        description.dataset.file_name = this.dataset.name\r\n        description.dataset.open_status = this.dataset.open_status || '▼'\r\n        videoContanier.style.height = this.dataset.height || 'auto'\r\n\r\n        let {slot, aticle} = this.createSlot()\r\n        \r\n        if(slot){\r\n            description.append(slot);\r\n        }\r\n\r\n        description.onclick = (event) => {\r\n\r\n            if(description.dataset.open_status == '▼'){\r\n                description.dataset.open_status = '▶'\r\n                videoContanier.style.height = window.getComputedStyle(video).height;\r\n                setTimeout(()=>{\r\n                    videoContanier.style.height = '0px';\r\n                    this.dataset.height = '0px';\r\n                },100)\r\n\r\n            }else{\r\n                description.dataset.open_status = '▼';\r\n                setTimeout(()=>{\r\n                    videoContanier.style.height = window.getComputedStyle(video).height;\r\n                    this.dataset.height = 'auto';\r\n                },100)\r\n                \r\n                video.style.opacity = '';\r\n                video.style.visibility = '';\r\n            }\r\n\r\n            this.dataset.open_status = description.dataset.open_status;\r\n        }\r\n\r\n        videoContanier.ontransitionend = () => {\r\n            if(description.dataset.open_status == '▼'){\r\n                videoContanier.style.height = 'auto';\r\n            }else{\r\n                video.style.opacity = 0;\r\n                video.style.visibility = 'hidden';\r\n            }\r\n        }\r\n\r\n        return {description, slot, aticle};\r\n    }\r\n\r\n    createSlot(){\r\n        let aticle = document.createElement('div');\r\n        \r\n        aticle.contentEditable = 'false';\r\n        aticle.draggable = 'false';\r\n\r\n        //if(this.childNodes.length != 0 && this.childNodes[0]?.tagName != 'BR'){\r\n            let randomId = Array.from(\r\n                window.crypto.getRandomValues(new Uint32Array(16)),\r\n                (e)=>e.toString(32).padStart(2, '0')\r\n            ).join('');\r\n            //aticle.append(...[...this.childNodes].map(e=>e.cloneNode(true)));\r\n            aticle.append(...this.childNodes);\r\n            aticle.slot = Video.descriptionName + '-' + randomId;\r\n            this.append(aticle);\r\n            \r\n            let slot = Object.assign(document.createElement('slot'),{\r\n                name: Video.descriptionName + '-' + randomId\r\n            });\r\n\r\n            return {slot, aticle};\r\n        //}else{\r\n        //    return undefined;\r\n        //}\r\n    }\r\n\r\n    videoIsNotWorking(){\r\n        alert(`${this.dataset.name}은 호환되지 않는 영상입니다.`);\r\n        this.remove();\r\n    }\r\n\r\n    /**\r\n     * @returns {HTMLInputElement}\r\n     */\r\n    get selectedFile(){\r\n        return this.#file\r\n    }\r\n}\r\n","\r\nimport FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\n\r\nexport default class Resources extends FreedomInterface {\r\n\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n    static customResourcesCallback = () => {}; \r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-resources-style'\r\n\t});\r\n\r\n    static slotName = 'free-will-editor-resources-description-slot';\r\n\r\n    static #selectedFile = Object.assign(document.createElement('input'), {\r\n        type: 'file'\r\n    });\r\n\r\n    static get selectedFile(){\r\n        return this.#selectedFile;\r\n    }\r\n\r\n    static #resourcesCallback = () => {};\r\n\r\n    static #sizeLimitOverCallback = () => {};\r\n\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-resources';\r\n        //this.toolHandler.isInline = false;\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: '',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n            innerHTML: `\r\n            <svg class=\"${this.#defaultStyle.id} css-gg-file-add-icon\" width=\"0.9rem\" height=\"0.9rem\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path d=\"M10 18V16H8V14H10V12H12V14H14V16H12V18H10Z\" fill=\"currentColor\" />\r\n                <path\r\n                    fill-rule=\"evenodd\"\r\n                    clip-rule=\"evenodd\"\r\n                    d=\"M6 2C4.34315 2 3 3.34315 3 5V19C3 20.6569 4.34315 22 6 22H18C19.6569 22 21 20.6569 21 19V9C21 5.13401 17.866 2 14 2H6ZM6 4H13V9H19V19C19 19.5523 18.5523 20 18 20H6C5.44772 20 5 19.5523 5 19V5C5 4.44772 5.44772 4 6 4ZM15 4.10002C16.6113 4.4271 17.9413 5.52906 18.584 7H15V4.10002Z\"\r\n                    fill=\"currentColor\"\r\n                />\r\n            </svg>\r\n            `,\r\n            title: 'Resources'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else{\r\n                this.#selectedFile.click();\r\n                this.#selectedFile.onchange = ()=> {\r\n                    //let url = URL.createObjectURL(this.#selectedFile.files[0])\r\n\r\n                    this.toolHandler.toolButton.dataset.tool_status = 'active';\r\n                }\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n            .${this.toolHandler.defaultClass} {\r\n                position: relative;\r\n            }\r\n            .${this.#defaultStyle.id}.css-gg-file-add-icon {\r\n                zoom:120%;\r\n            }\r\n            .${this.#defaultStyle.id}.resources-description{            \r\n                cursor: pointer;\r\n                display: inline-flex;\r\n                align-items: center;\r\n            }\r\n\r\n            .${this.#defaultStyle.id}.resources-description::after{\r\n                margin-left: 0.5em;\r\n                content: ' ['attr(data-file_name)'] 'attr(data-open_status);\r\n                font-size: small;\r\n                color: #bdbdbd;\r\n            }\r\n            .${this.#defaultStyle.id}.resources-download-button, .${this.#defaultStyle.id}.resources-preview-button{\r\n                margin-left: 1vw;\r\n                border: solid 2px #e5e5e5;\r\n                cursor: pointer;\r\n                background: none;\r\n            }\r\n            .${this.#defaultStyle.id}.resources-contanier{\r\n                width: auto;\r\n                transition: height 0.5s ease-in-out;\r\n                overflow: hidden;\r\n                position: relative;\r\n                margin-top: 0.7vh;\r\n            }\r\n            .${this.#defaultStyle.id}.resources-contanier object{\r\n                width: 99%;\r\n                height: auto;\r\n                aspect-ratio: attr(width) / attr(height);\r\n                border: solid 2px #efefef;\r\n            }\r\n            .${this.#defaultStyle.id}.resources-contanier object.unload{\r\n                width: auto;\r\n            }\r\n\r\n        ` \r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n    static get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n    static set resourcesCallback(callback){\r\n        this.#resourcesCallback = callback;\r\n    }\r\n    static get resourcesCallback(){\r\n        return this.#resourcesCallback;\r\n    }\r\n\r\n    static set sizeLimitOverCallback(callback){\r\n        this.#sizeLimitOverCallback = callback;\r\n    }\r\n    static get sizeLimitOverCallback(){\r\n        return this.#sizeLimitOverCallback;\r\n    }\r\n\r\n    #file;\r\n    \r\n    imgLoadEndCallback = (event) => {};\r\n\r\n    resources = Object.assign(document.createElement('object'), {\r\n\r\n    });\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Resources, dataset, {deleteOption : FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE});\r\n        \r\n        if( ! dataset && Object.keys(this.dataset).length == 0){\r\n            this.#file = Resources.selectedFile.cloneNode(true);\r\n            Resources.selectedFile.files = new DataTransfer().files;\r\n\r\n            this.dataset.url = URL.createObjectURL(this.#file.files[0]);\r\n            this.dataset.name = this.#file.files[0].name;\r\n            this.dataset.last_modified = this.#file.files[0].lastModified;\r\n            this.dataset.size = this.#file.files[0].size;\r\n            this.dataset.content_type = this.#file.files[0].type;\r\n\r\n            let url = URL.createObjectURL(this.#file.files[0], this.dataset.content_type);\r\n            this.dataset.url = url;\r\n            /*fetch(this.dataset.url).then(res=>res.blob()).then(blob => {\r\n                const reader = new FileReader();\r\n                reader.readAsDataURL(blob);\r\n                reader.onloadend = () => {\r\n                    this.dataset.base64 = reader.result;\r\n                }\r\n            })*/\r\n           \r\n        }else if(Resources.customResourcesCallback && typeof Resources.customResourcesCallback == 'function'){\r\n            Resources.customResourcesCallback(this);\r\n        }else if(this.dataset.url){\r\n        }\r\n        this.resources.type = this.dataset.content_type;\r\n        this.resources.data = this.dataset.url;\r\n        this.resources.dataset.resources_name = this.dataset.name\r\n\r\n        if(! this.dataset.name){\r\n            this.remove();\r\n            throw new Error(`this file is undefined ${this.dataset.name}`);\r\n        }\r\n        \r\n        this.attachShadow({ mode : 'open' });\r\n        this.shadowRoot.append(Resources.defaultStyle.cloneNode(true));\r\n        \r\n        this.createDefaultContent().then(({wrap, description, slot, aticle})=>{\r\n            this.connectedChildAfterCallback = (addedList) => {\r\n                aticle.append(...addedList);\r\n            }\r\n        });\r\n        \r\n        this.disconnectedAfterCallback = () => {\r\n            this.resources.remove();\r\n            if(this.dataset.url.startsWith('blob:file')){\r\n                //setTimeout(() => {\r\n                    //URL.revokeObjectURL(this.dataset.url);\r\n                //}, 1000 * 60 * 2)\r\n            }\r\n        }\r\n\r\n\t}\r\n\r\n    createDefaultContent(){\r\n        return new Promise(resolve => {\r\n            let wrap = Object.assign(document.createElement('div'),{\r\n\r\n            });\r\n            wrap.draggable = false\r\n\r\n            this.shadowRoot.append(wrap);\r\n\r\n            let resourcesContanier = Object.assign(document.createElement('div'),{\r\n                className: `${Resources.defaultStyle.id} resources-contanier`\r\n            });\r\n\r\n            /*let resources = Object.assign(document.createElement('img'), {\r\n                //src :`https://developer.mozilla.org/pimg/aHR0cHM6Ly9zLnprY2RuLm5ldC9BZHZlcnRpc2Vycy9iMGQ2NDQyZTkyYWM0ZDlhYjkwODFlMDRiYjZiY2YwOS5wbmc%3D.PJLnFds93tY9Ie%2BJ%2BaukmmFGR%2FvKdGU54UJJ27KTYSw%3D`\r\n                //src: this.dataset.url\r\n                //src: imgUrl\r\n            });*/\r\n\r\n            //if(this.file.files.length != 0){\r\n\r\n            //}\r\n\r\n            //resourcesContanier.append(this.resources);\r\n\r\n            this.resources.onload = (event) => {\r\n                if(this.dataset.width){\r\n                    this.resources.width = this.dataset.width;\r\n                }\r\n                //console.log(this.resources.contentWindow);\r\n                if( ! this.resources.contentWindow){\r\n                    this.resources.classList.add('unload')\r\n                }else{\r\n                    this.resources.contentWindow.document.body.style.contentVisibility = 'auto'\r\n                    this.resources.contentWindow.document.body.style.containIntrinsicSize = '1px 5000px'\r\n                }\r\n\r\n                Resources.resourcesCallback({status : 'load', resources : this.resources});\r\n                /*let applyToolAfterSelection = window.getSelection(), range = applyToolAfterSelection.getRangeAt(0);\r\n                let scrollTarget;\r\n                if(range.endContainer.nodeType == Node.TEXT_NODE){\r\n                    scrollTarget = range.endContainer.parentElement\r\n                }else{\r\n                    scrollTarget = range.endContainer;\r\n                }\r\n                scrollTarget.scrollIntoView({ behavior: \"instant\", block: \"end\", inline: \"nearest\" });\r\n                */\r\n            //this.imgLoadEndCallback();\r\n                //resourcesContanier.style.height = window.getComputedStyle(resources).height;\r\n            }\r\n            this.resources.onerror = (event) => {\r\n                //console.log(event);\r\n                //resourcesContanier.style.height = window.getComputedStyle(resources).height;\r\n                this.resources.dataset.error = '';\r\n                if( ! this.resources.contentWindow){\r\n                    this.resources.classList.add('unload')\r\n                }\r\n                Resources.resourcesCallback({status : 'error', resources : this.resources});\r\n                \r\n            }\r\n\r\n            let {description, slot, aticle} = this.createDescription(this.resources, resourcesContanier);\r\n            let downloadButton = Object.assign(document.createElement('button'), {\r\n                className: `${Resources.defaultStyle.id} resources-download-button`,\r\n                innerHTML : `<b>Download</b>`,\r\n                onclick : () => {\r\n                    fetch(this.resources.data).then(res=>res.blob()).then(blob => {\r\n                        let url = URL.createObjectURL(blob, this.dataset.content_type);\r\n                        let a = document.createElement('a');\r\n                        a.href = url;\r\n                        a.download = this.dataset.name;\r\n                        a.click();\r\n                        a.remove();\r\n                        setTimeout(() => {\r\n                            URL.revokeObjectURL(url);\r\n                        }, 1000 * 60 * 5)\r\n                    })\r\n                }\r\n            });\r\n            let previewButton = Object.assign(document.createElement('button'), {\r\n                className: `${Resources.defaultStyle.id} resources-preview-button`,\r\n                innerHTML : `<b>Preview</b>`,\r\n                onclick : () => {\r\n                    resourcesContanier.append(this.resources);\r\n                }\r\n            });\r\n\r\n            this.connectedAfterOnlyOneCallback = () => {\r\n                if(this.childNodes.length != 0 && this.childNodes[0]?.tagName != 'BR'){\r\n                    aticle.append(...[...this.childNodes].filter(e=>e!=aticle));\r\n                }\r\n                wrap.replaceChildren(...[description,downloadButton,previewButton,resourcesContanier].filter(e=>e != undefined));\r\n                \r\n                if(this.nextSibling?.tagName == 'BR'){\r\n                    this.nextSibling.remove()\r\n                }\r\n\r\n                resolve({wrap, description, slot, aticle})\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLObjectElement} resources \r\n     * @param {HTMLDivElement} resourcesContanier \r\n     * @returns \r\n     */\r\n    createDescription(resources, resourcesContanier){\r\n        let description = Object.assign(document.createElement('div'),{\r\n            className: `${Resources.defaultStyle.id} resources-description`\r\n        });\r\n\r\n        description.dataset.file_name = this.dataset.name\r\n        description.dataset.open_status = this.dataset.open_status || '▼'\r\n        resourcesContanier.style.height = this.dataset.height || 'auto'\r\n        \r\n        description.dataset.open_status = '▼';\r\n        \r\n        let {slot, aticle} = this.createSlot();\r\n        \r\n        description.append(slot)\r\n\r\n        description.onclick = (event) => {\r\n            /*if(event.composedPath().some(e=> e== downloadButton)){\r\n                return;\r\n            }*/\r\n            if(description.dataset.open_status == '▼'){\r\n                description.dataset.open_status = '▶'\r\n                resourcesContanier.style.height = window.getComputedStyle(resources).height;\r\n                setTimeout(()=>{\r\n                    resourcesContanier.style.height = '0px';\r\n                    this.dataset.height = '0px';\r\n                },100)\r\n\r\n            }else{\r\n                description.dataset.open_status = '▼';\r\n                setTimeout(()=>{\r\n                    resourcesContanier.style.height = window.getComputedStyle(resources).height;\r\n                    this.dataset.height = 'auto';\r\n                },100)\r\n                \r\n                resources.style.opacity = '';\r\n                resources.style.visibility = '';\r\n\r\n            }\r\n            this.dataset.open_status = description.dataset.open_status;\r\n        }\r\n\r\n        resourcesContanier.ontransitionend = () => {\r\n            if(description.dataset.open_status == '▼'){\r\n                resourcesContanier.style.height = 'auto';\r\n            }else{\r\n                resources.style.opacity = 0;\r\n                resources.style.visibility = 'hidden';\r\n            }\r\n        }\r\n\r\n        return {description, slot, aticle};\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @returns {HTMLSlotElement}\r\n     */\r\n    createSlot(){\r\n        let aticle = document.createElement('div');\r\n        \r\n        aticle.contentEditable = 'false';\r\n        aticle.draggable = 'false'; \r\n\r\n        //if(this.childNodes.length != 0 && this.childNodes[0]?.tagName != 'BR'){\r\n            let randomId = Array.from(\r\n                window.crypto.getRandomValues(new Uint32Array(16)),\r\n                (e)=>e.toString(32).padStart(2, '0')\r\n            ).join('');\r\n            //aticle.append(...[...this.childNodes].map(e=>e.cloneNode(true)));\r\n            aticle.append(...this.childNodes);\r\n            aticle.slot = Resources.slotName + '-' + randomId\r\n            this.append(aticle);\r\n            \r\n            let slot = Object.assign(document.createElement('slot'),{\r\n                name: Resources.slotName + '-' + randomId\r\n            });\r\n            return {slot, aticle};\r\n        //}else{\r\n        //   return undefined\r\n        //}\r\n\r\n    }\r\n    /**\r\n     * @returns {HTMLInputElement}\r\n     */\r\n    get selectedFile(){\r\n        return this.#file\r\n    }\r\n    \r\n    set resourcesUrl(url){\r\n        let clone = this.resources.cloneNode(true);\r\n        clone.data = url;\r\n        this.resources.after(clone);\r\n        this.resources.remove();\r\n        this.resources = clone;\r\n        clone.onload = () => {\r\n            if(this.resources == clone) return;\r\n            if(this.dataset.width){\r\n                clone.width = this.dataset.width;\r\n            }\r\n            if( ! clone.contentWindow){\r\n                clone.classList.add('unload')\r\n            }\r\n        }\r\n        clone.onerror = () => {\r\n            clone.dataset.error = '';\r\n            if( ! clone.contentWindow){\r\n                clone.classList.add('unload')\r\n            }\r\n        }\r\n    }\r\n    get resourcesUrl(){\r\n        this.resources.data;\r\n    }\r\n}\r\n","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\n\r\nexport default class Code extends FreedomInterface {\r\n\t//static extendsElement = 'strong';\r\n\t//static defaultClass = 'line';\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-code-style'\r\n\t});\r\n\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-code';\r\n\t\tthis.toolHandler.isInline = false;\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: '',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n            innerHTML: `\r\n            <svg class=\"${this.#defaultStyle.id} css-gg-code-icon\"\r\n            width=\"0.9rem\"\r\n            height=\"0.9rem\"\r\n            viewBox=\"0 0 24 24\"\r\n            fill=\"none\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            >\r\n                <path\r\n                d=\"M13.325 3.05011L8.66741 20.4323L10.5993 20.9499L15.2568 3.56775L13.325 3.05011Z\"\r\n                fill=\"currentColor\"\r\n                />\r\n                <path\r\n                d=\"M7.61197 18.3608L8.97136 16.9124L8.97086 16.8933L3.87657 12.1121L8.66699 7.00798L7.20868 5.63928L1.04956 12.2017L7.61197 18.3608Z\"\r\n                fill=\"currentColor\"\r\n                />\r\n                <path\r\n                d=\"M16.388 18.3608L15.0286 16.9124L15.0291 16.8933L20.1234 12.1121L15.333 7.00798L16.7913 5.63928L22.9504 12.2017L16.388 18.3608Z\"\r\n                fill=\"currentColor\"\r\n                />\r\n            </svg>\r\n            `,\r\n            title: 'Code Block'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else{\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n            .${this.#defaultStyle.id}-button{\r\n            }\r\n            .${this.#defaultStyle.id}.css-gg-code-icon{\r\n                zoom:120%;\r\n            }\r\n\t\t\t.${this.toolHandler.defaultClass} {\r\n                display: block;\r\n                background-color: #e7e7e7;\r\n                margin-inline: 0.5em;\r\n                border: solid 1px #d1d1d1;\r\n                border-radius: 4px;\r\n                white-space: pre-wrap;\r\n                font-family: monospace;\r\n                box-shadow: 0px 0px 3px 0px #d1d1d1;\r\n                padding: 0.5em 1em 0.5em 1em;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tparentLine;\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Code, dataset, {deleteOption : FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE});\r\n        /*\r\n\t\tsuper.connectedAfterOnlyOneCallback = () => {\r\n\t\t\tthis.dataset.index = Code.toolHandler.connectedFriends.length;\r\n\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tthis.parentEditor.createLine();\r\n\t\t\t}else{\r\n\t\t\t\tnextLine.line.lookAtMe();\r\n\t\t\t}\r\n\t\t}\r\n\r\n        super.disconnectedChildAfterCallback = () => {\r\n\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tthis.parentEditor.createLine();\r\n\t\t\t}\r\n        }\r\n        */\r\n\t}\r\n\r\n}","export default class HyperlinkBox{\r\n\t#style = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-hyperlink-box'\r\n\t});\r\n\r\n\t#hyperlinkBox = Object.assign(document.createElement('div'),{\r\n\t\tclassName: 'hyperlink-box-wrap'\r\n\t});\r\n\r\n\t#hyperlinkBoxVw = 20;\r\n\r\n\t#urlInputText = Object.assign(document.createElement('input'), {\r\n        autocomplete: 'off',\r\n        placeholder: 'Please enter your link ',\r\n        type: 'url',\r\n        name: 'hyperlink-url-input',\r\n        className: 'hyperlink-url-input',\r\n\t\trequired: false,\r\n        /*\r\n\t\toninput: (event) => this.#searchInputTextEvent(event),\r\n        onkeyup: (event) => {\r\n            if(event.key == 'Enter' && this.#searchInputText.value != ''){\r\n                let item = this.#fontSizeBoxContainer.querySelector(`[data-size=\"${this.#searchInputText.value}\"]`);\r\n                this.#apply(item, event);\r\n            }\r\n        },\r\n\t\t*/\r\n    });\r\n\r\n\t#invalidUrlMessage = Object.assign(document.createElement('span'), {\r\n\r\n\t})\r\n\r\n\t#applyCallback = () => {}\r\n\t\r\n    #lastSelectionRange;\r\n\r\n\t#lastUrl;\r\n\r\n\tconstructor(){\r\n\t\tlet style = document.querySelector(`#${this.#style.id}`);\r\n        if(! style){\r\n            document.head.append(this.createStyle());\r\n        }else{\r\n            this.#style = style;\r\n        }\r\n\t\tlet urlInputTextWrapper = Object.assign(document.createElement('div'), {\r\n\t\t\t//id: 'url-input-text-wrapper',\r\n\t\t\tclassName: 'url-input-text-wrapper',\r\n\t\t\t/*onsubmit : (event) => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tapplyButton.click();\r\n\t\t\t}*/\r\n\t\t})\r\n\t\turlInputTextWrapper.append(this.#urlInputText);\r\n\t\tthis.#urlInputText.oninput = (event) => {\r\n\t\t\tif(this.#invalidUrlMessage.isConnected){\r\n\t\t\t\tthis.#invalidUrlMessage.remove();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.#urlInputText.onkeydown = (event) => {\r\n\t\t\tif(event.key == 'Enter'){\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tapplyButton.onclick();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tlet cancelButton = Object.assign(document.createElement('button'), {\r\n\t\t\tclassName: 'cancel-button',\r\n\t\t\ttype: 'button',\r\n\t\t\ttextContent: 'cancel'\r\n\t\t})\r\n\t\tcancelButton.onclick = () => {\r\n\t\t\tthis.close();\r\n\t\t}\r\n\t\tlet applyButton = Object.assign(document.createElement('button'), {\r\n\t\t\tclassName: 'apply-button',\r\n\t\t\ttype: 'button',\r\n\t\t\ttextContent: 'apply'\r\n\t\t})\r\n\t\tapplyButton.onclick = (event) => {\r\n\t\t\tif( ! this.#urlInputText.checkValidity()){\r\n\t\t\t\tlet prevValue = this.#urlInputText.value\r\n\t\t\t\tthis.#urlInputText.value = `https://${this.#urlInputText.value}`;\r\n\t\t\t\tif(! this.#urlInputText.checkValidity()){\r\n\t\t\t\t\tthis.#urlInputText.value = prevValue;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.lastUrl = this.#urlInputText.value;\r\n\t\t\tthis.#urlInputText.value = '';\r\n\t\t\tif(this.#lastSelectionRange){\r\n\t\t\t\tlet selection = window.getSelection();\r\n\t\t\t\tselection.removeAllRanges();\r\n\t\t\t\tselection.addRange(this.#lastSelectionRange);\r\n\t\t\t}\r\n\t\t\tthis.applyCallback(event);\r\n\t\t}\r\n\t\tlet buttonWrapeer = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'button-wrap',\r\n\t\t})\r\n\t\tbuttonWrapeer.append(cancelButton, applyButton);\r\n\t\tthis.#hyperlinkBox.append(urlInputTextWrapper, buttonWrapeer)\r\n\t}\r\n\r\n    async open(){\r\n\t\tlet selection = window.getSelection();\r\n\t\tif(selection.rangeCount != 0 && selection.isCollapsed == false){\r\n\t\t\tlet range = selection.getRangeAt(0);\r\n\t\t\tthis.#lastSelectionRange = range.cloneRange();\r\n\t\t}\r\n\t\tdocument.body.append(this.#hyperlinkBox);\r\n\t\tthis.#urlInputText.focus();\r\n    }\r\n\r\n    close(){\r\n        this.#hyperlinkBox.remove();\r\n    }\r\n    \r\n\tset applyCallback(applyCallback){\r\n        this.#applyCallback = applyCallback;\r\n    }\r\n\r\n    get applyCallback(){\r\n        return this.#applyCallback;\r\n    }\r\n\r\n\tget hyperlinkBox(){\r\n\t\treturn this.#hyperlinkBox;\r\n\t}\r\n\r\n\tcreateStyle(){\r\n\t\tthis.#style.textContent = `\r\n\t\t\t.hyperlink-box-wrap{\r\n\t\t\t\tbackground: #343434;\r\n\t\t\t\tposition: fixed;\r\n\t\t\t\tpadding: 0.9%;\r\n\t\t\t\twidth: ${this.#hyperlinkBoxVw}vw;\r\n\t\t\t\theight: auto;\r\n\t\t\t\tcolor: white;\r\n\t\t\t\tmin-width: 100px;\r\n\t\t\t\toverflow-y: auto;\r\n\t\t\t\t-webkit-user-select: none;\r\n\t\t\t\t-moz-user-select: none;\r\n\t\t\t\t-ms-user-select: none;\r\n\t\t\t\tuser-select: none;\r\n\t\t\t\toverflow-x: hidden;\r\n\t\t\t\tdisplay: grid;\r\n\t\t\t\tgap: 1vh;\r\n\t\t\t\talign-content: center;\r\n\t\t\t\tjustify-content: space-around;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-items: center;\r\n                z-index: 999;\r\n\t\t\t}\r\n\t\t\t.hyperlink-box-wrap .url-input-text-wrapper{\r\n\t\t\t\twidth: inherit;\r\n\t\t\t}\r\n\t\t\t.hyperlink-box-wrap .url-input-text-wrapper .hyperlink-url-input{\r\n\t\t\t\twidth: -webkit-fill-available;\r\n\t\t\t\tbackground-color: #ffffff00;\r\n\t\t\t\tcolor: #b9b9b9;\r\n\t\t\t\tborder-bottom: solid 1px #4c4c4c;\r\n\t\t\t\tborder-left: solid 1px #4c4c4c;\r\n\t\t\t}\r\n\t\t\t.hyperlink-box-wrap .button-wrap{\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-around;\r\n\t\t\t\twidth: inherit;\r\n\t\t\t}\r\n\t\t\t.hyperlink-box-wrap .button-wrap .apply-button,\r\n\t\t\t.hyperlink-box-wrap .button-wrap .cancel-button {\r\n\t\t\t\tbackground: none;\r\n\t\t\t\tborder: revert;\r\n\t\t\t\tcolor: #b9b9b9;\r\n\t\t\t\tborder-color: #464646;\r\n\t\t\t}\r\n\t\t`\r\n\t\treturn this.#style;\r\n\t}\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport HyperlinkBox from \"../component/HyperlinkBox\";\r\n\r\nexport default class Hyperlink extends FreedomInterface {\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-link-style'\r\n\t});\r\n\r\n    static hyperlinkBox;\r\n\r\n\tstatic{\r\n\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-link';\r\n\t\t\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\tinnerHTML: `\r\n\t\t\t\t<svg class=\"${this.#defaultStyle.id} css-gg-link-icon\"\r\n\t\t\t\twidth=\"0.9rem\"\r\n\t\t\t\theight=\"0.9rem\"\r\n\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\tfill=\"none\"\r\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=\"M14.8284 12L16.2426 13.4142L19.071 10.5858C20.6331 9.02365 20.6331 6.49099 19.071 4.9289C17.509 3.3668 14.9763 3.3668 13.4142 4.9289L10.5858 7.75732L12 9.17154L14.8284 6.34311C15.6095 5.56206 16.8758 5.56206 17.6568 6.34311C18.4379 7.12416 18.4379 8.39049 17.6568 9.17154L14.8284 12Z\"\r\n\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=\"M12 14.8285L13.4142 16.2427L10.5858 19.0711C9.02372 20.6332 6.49106 20.6332 4.92896 19.0711C3.36686 17.509 3.36686 14.9764 4.92896 13.4143L7.75739 10.5858L9.1716 12L6.34317 14.8285C5.56212 15.6095 5.56212 16.8758 6.34317 17.6569C7.12422 18.4379 8.39055 18.4379 9.1716 17.6569L12 14.8285Z\"\r\n\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=\"M14.8285 10.5857C15.219 10.1952 15.219 9.56199 14.8285 9.17147C14.4379 8.78094 13.8048 8.78094 13.4142 9.17147L9.1716 13.4141C8.78107 13.8046 8.78107 14.4378 9.1716 14.8283C9.56212 15.2188 10.1953 15.2188 10.5858 14.8283L14.8285 10.5857Z\"\r\n\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</svg>\r\n\t\t\t`,\r\n\t\t\ttitle: 'Hyperlink'\r\n        });\r\n\t\t\r\n\t\tthis.hyperlinkBox = new HyperlinkBox();\r\n\t\t\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else if(this.hyperlinkBox.hyperlinkBox.isConnected){\r\n\t\t\t\tthis.hyperlinkBox.close();\r\n\t\t\t}else{\r\n\t\t\t\tthis.hyperlinkBox.open().then(()=>{\r\n\t\t\t\t\tthis.toolHandler.processingElementPosition(this.hyperlinkBox.hyperlinkBox);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdocument.addEventListener(\"scroll\", () => {\r\n\t\t\tif(this.hyperlinkBox.hyperlinkBox.isConnected){\r\n\t\t\t\tthis.toolHandler.processingElementPosition(this.hyperlinkBox.hyperlinkBox);\r\n\t\t\t}\r\n\t\t});\r\n        window.addEventListener('resize', (event) => {\r\n            if(this.hyperlinkBox.hyperlinkBox.isConnected){\r\n\t\t\t\tthis.toolHandler.processingElementPosition(this.hyperlinkBox.hyperlinkBox);\r\n            }\r\n\t\t})\r\n\r\n\t\tthis.hyperlinkBox.applyCallback = (event) => {\r\n\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active'\r\n\t\t\tthis.hyperlinkBox.close();\r\n\t\t}\r\n\r\n\t\tsuper.outClickElementListener(this.hyperlinkBox.hyperlinkBox, ({oldEvent, newEvent, isMouseOut})=>{\r\n\t\t\tif(isMouseOut && this.hyperlinkBox.hyperlinkBox.isConnected && ! super.isMouseInnerElement(this.toolHandler.toolButton)){\r\n\t\t\t\tthis.hyperlinkBox.close();\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t}\r\n\t\t\t.${this.#defaultStyle.id}.css-gg-link-icon{\r\n\t\t\t\tzoom:120%;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} {\r\n\t\t\t\tcolor: -webkit-link;\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t\ttext-decoration: underline;\r\n\t\t\t\tdisplay: grid;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} > [data-hyperlink_child=\"${Hyperlink.toolHandler.defaultClass}-child\"]{\r\n\t\t\t\tall: initial;\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t\tmargin-left: 1em;\r\n\t\t\t\tpadding-left: 1em;\r\n\t\t\t\tborder-left: 5px solid #d7d7db;\r\n\t\t\t\twidth: 95%;\r\n\t\t\t\tfloat: left;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} > [data-hyperlink_child=\"${Hyperlink.toolHandler.defaultClass}-child\"] > *{\r\n\t\t\t\tfont-size: 14px;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} > [data-hyperlink_child=\"${Hyperlink.toolHandler.defaultClass}-child\"] img{\r\n\t\t\t\tmax-width: 100%;\r\n                height: auto;\r\n                aspect-ratio: attr(width) / attr(height);\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass}-preview-url{\r\n\t\t\t\tposition: fixed;\r\n\t\t\t\tz-index: 9999;\r\n\t\t\t\twidth: 50vw;\r\n\t\t\t\theight: 50vh;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\t#aTag = Object.assign(document.createElement('a'), {\r\n\t\ttarget: '_blank'\r\n\t});\r\n\r\n\t/*\r\n\t#previewUrl = Object.assign(document.createElement('iframe'), {\r\n\t\tclassName: `${Hyperlink.toolHandler.defaultClass}-preview-url`,\r\n\t\t//referrerpolicy: 'origin',\r\n\t\t//allow: 'Permissions-Policy',\r\n\t\t//width: 100,\r\n\t\t//height: 100,\r\n\t});\r\n\t*/\r\n\t/*HyperlinkChild = class HyperlinkChild extends HTMLElement{\r\n\t\tconstructor(){\r\n\t\t\tsuper();\r\n\t\t\tthis.className = `${Hyperlink.toolHandler.defaultClass}-child`;\r\n\t\t\tthis.attachShadow({ mode : 'open' });\r\n\t\t\tthis.shadowRoot.append(Hyperlink.defaultStyle.cloneNode(true));\r\n\t\t}\r\n\t};*/\r\n\r\n\t//#hyperlinkChild;\r\n\tconstructor(dataset){\r\n\t\tsuper(Hyperlink, dataset);\r\n\t\t/*\r\n\t\tif( ! window.customElements.get(`${Hyperlink.toolHandler.defaultClass}-child`)){\r\n\t\t\twindow.customElements.define(`${Hyperlink.toolHandler.defaultClass}-child`, this.HyperlinkChild);\r\n\t\t}\r\n\t\t\r\n\t\tthis.#hyperlinkChild = new this.HyperlinkChild();\r\n\t\t\r\n\t\t*/\r\n\t\tlet getUrlMetadataPromise;\r\n\r\n\t\tif( ! dataset && Object.keys(this.dataset).length == 0){\r\n\t\t\tthis.dataset.href = Hyperlink.hyperlinkBox.lastUrl;\r\n\t\t\tgetUrlMetadataPromise = fetch(this.dataset.href, {\r\n\t\t\t\tmode: 'no-cors',\r\n\t\t\t}).then(response => {\r\n\t\t\t\treturn response.text();\r\n\t\t\t}).then(htmlText => {\r\n\t\t\t\tlet dom = new DOMParser().parseFromString(htmlText, 'text/html');\r\n\t\t\t\tthis.dataset.title = dom.querySelector('meta[name=\"og:title\"]')?.getAttribute('content') \r\n\t\t\t\t\t|| dom.querySelector('meta[name=\"twitter:title\"]')?.getAttribute('content')\r\n\t\t\t\t\t|| dom.querySelector('title')?.textContent\r\n\t\t\t\t\t|| '';\r\n\r\n\t\t\t\tthis.dataset.description = dom.querySelector('meta[name=\"description\"]')?.getAttribute('content') \r\n\t\t\t\t\t|| dom.querySelector('meta[name=\"og:description\"]')?.getAttribute('content') \r\n\t\t\t\t\t|| dom.querySelector('meta[name=\"twitter:description\"]')?.getAttribute('content')\r\n\t\t\t\t\t|| ''\r\n\t\r\n\t\t\t\tthis.dataset.image = dom.querySelector('meta[name=\"og:image\"]')?.getAttribute('content')\r\n\t\t\t\t\t|| dom.querySelector('meta[name=\"twitter:image\"]')?.getAttribute('content')\r\n\t\t\t\t\t|| ''\r\n\r\n\t\r\n\t\t\t\tthis.dataset.favicon = dom.querySelector('link[rel=\"icon\"]')?.getAttribute('href') || '';\r\n\r\n\t\t\t\tthis.dataset.siteName = new URL(this.dataset.href).hostname;\r\n\t\r\n\t\t\t\tlet p = document.createElement('p')\r\n\t\t\t\t//this.parentEditor.createLine();\r\n\t\t\t\t//this.#hyperlinkChild.shadowRoot.append(line);\r\n\t\t\t\t//this.append(line);\r\n\t\t\t\treturn p;\r\n\t\t\t}).catch(error=>{\r\n\t\t\t\tconsole.error(error);\r\n\t\t\t\t//this.style.color = 'red';\r\n\t\t\t\t//this.title = 'unknown site';\r\n\t\t\t\treturn undefined\r\n\t\t\t});\r\n        }else{\r\n\t\t\tgetUrlMetadataPromise = Promise.resolve().then(()=>{\r\n\t\t\t\t//let line = this.parentEditor.createLine();\r\n\t\t\t\t//line.contenteditable = false;\r\n\t\t\t\t//this.#hyperlinkChild.shadowRoot.append(line);\r\n\t\t\t\t//this.append(line);\r\n\t\t\t\t//let p = document.createElement('p')\r\n\t\t\t\t//return p\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.#aTag.href = this.dataset.href\r\n\t\tsuper.connectedAfterOnlyOneCallback = () => {\r\n\t\t\tgetUrlMetadataPromise.then(p => {\r\n\t\t\t\tif(! p){\r\n\t\t\t\t\tp = this.querySelector(`[data-hyperlink_child=\"${Hyperlink.toolHandler.defaultClass}-child\"]`);\r\n\t\t\t\t\tif( ! p){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tlet title;\r\n\t\t\t\tif(this.dataset.title != ''){\r\n\t\t\t\t\ttitle = Object.assign(document.createElement('p'), {\r\n\t\t\t\t\t\ttextContent: this.dataset.title\r\n\t\t\t\t\t})\r\n\t\t\t\t\ttitle.style.fontWeight = 'bold';\r\n\t\t\t\t}\r\n\t\t\t\tlet description;\r\n\t\t\t\tif(this.dataset.description != ''){\r\n\t\t\t\t\tdescription = Object.assign(document.createElement('p'),{\r\n\t\t\t\t\t\ttextContent: this.dataset.description\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tlet image;\r\n\t\t\t\tif(this.dataset.image != ''){\r\n\t\t\t\t\timage = Object.assign(document.createElement('p'),{\r\n\t\t\t\t\t\tinnerHTML: `\r\n\t\t\t\t\t\t\t<img data-image src=\"${this.dataset.image}\"/>\r\n\t\t\t\t\t\t`\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tlet favicon;\r\n\t\t\t\tif(this.dataset.favicon != ''){\r\n\t\t\t\t\tfavicon = Object.assign(document.createElement('span'), {\r\n\t\t\t\t\t\tinnerHTML: `\r\n\t\t\t\t\t\t\t<img data-favicon src=\"${this.dataset.favicon}\" style=\"width: 1.1em; vertical-align: text-bottom;\"/>\r\n\t\t\t\t\t\t`\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tlet siteName = Object.assign(document.createElement('span'), {\r\n\t\t\t\t\ttextContent: this.dataset.siteName\r\n\t\t\t\t});\r\n\t\t\t\tsiteName.style.fontSize = '12px';\r\n\t\t\t\tsiteName.style.fontWeight = 'bold';\r\n\t\t\t\t//this.#hyperlinkChild.shadowRoot.append(line);\r\n\t\t\t\tthis.append(p);\r\n\t\t\t\tp.dataset.hyperlink_child = `${Hyperlink.toolHandler.defaultClass}-child`;\r\n\t\t\t\tp.contenteditable = false;\r\n\t\t\t\tp.replaceChildren(...[\r\n\t\t\t\t\tfavicon, siteName,\r\n\t\t\t\t\ttitle,\r\n\t\t\t\t\tdescription,\r\n\t\t\t\t\timage\r\n\t\t\t\t].filter(e=>e!=undefined))\r\n\r\n\t\t\t\tthis.onclick = (event) => {\r\n\t\t\t\t\tif( ! event.composedPath().some(e=>e==p)){\r\n\t\t\t\t\t\tthis.#aTag.click();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}) \r\n\t\t}\r\n\r\n\r\n\t\t/*\r\n\t\tthis.onmouseenter = () => {\r\n\t\t\tif(this.#previewUrl.src != this.dataset.href){\r\n\t\t\t\tthis.#previewUrl.src = this.dataset.href;\r\n\t\t\t}\r\n\t\t\tif( ! this.#previewUrl.isConnected){\r\n\t\t\t\tdocument.body.append(this.#previewUrl);\r\n\t\t\t\t//this.append(this.#previewUrl);\r\n\t\t\t}\r\n\t\t\tHyperlink.toolHandler.processingElementPosition(this.#previewUrl, this);\r\n\t\t}\t\t\r\n\r\n\t\tFreedomInterface.outClickElementListener(this.#previewUrl, ({oldEvent, newEvent, isMouseOut})=>{\r\n\t\t\tif(isMouseOut && this.#previewUrl.isConnected && ! FreedomInterface.isMouseInnerElement(this)){\r\n\t\t\t\tthis.#previewUrl.remove();\r\n\t\t\t}\r\n\t\t})\r\n\t\tdocument.addEventListener(\"scroll\", () => {\r\n\t\t\tif(this.#previewUrl.isConnected){\r\n\t\t\t\tHyperlink.toolHandler.processingElementPosition(this.#previewUrl, this);\r\n\t\t\t}\r\n\t\t});\r\n\t\twindow.addEventListener('resize', (event) => {\r\n\t\t\tif(this.#previewUrl.isConnected){\r\n\t\t\t\tHyperlink.toolHandler.processingElementPosition(this.#previewUrl, this);\r\n\t\t\t}\r\n\t\t})\r\n\t\t*/\r\n\t}\r\n\r\n}","import Line from './component/Line'\r\nimport FreeWiilHandler from './module/FreeWiilHandler'\r\nimport UndoManager from './fragment/UndoManager'\r\n\r\nimport Strong from \"./tools/Strong\"\r\nimport Color from \"./tools/Color\"\r\nimport Background from \"./tools/Background\"\r\nimport Strikethrough from \"./tools/Strikethrough\"\r\nimport Underline from \"./tools/Underline\"\r\nimport FontFamily from \"./tools/FontFamily\"\r\nimport Quote from \"./tools/Quote\"\r\nimport NumericPoint from \"./tools/NumericPoint\"\r\nimport BulletPoint from \"./tools/BulletPoint\"\r\nimport Sort from \"./tools/Sort\"\r\nimport FontSize from \"./tools/FontSize\"\r\nimport Italic from \"./tools/Italic\"\r\nimport Image from \"./tools/Image\"\r\nimport Video from \"./tools/Video\"\r\nimport Resources from './tools/Resources'\r\nimport Code from \"./tools/Code\"\r\nimport Hyperlink from \"./tools/Hyperlink\"\r\n\r\nexport default class FreeWillEditor extends FreeWiilHandler {\r\n\t\r\n\tstatic componentsMap = {};\r\n\tstatic toolsMap = {};\r\n\r\n\tstatic LineBreakMode = class LineBreakMode{\r\n\t\tstatic #LineBreakModeEnum = class LineBreakModeEnum{\r\n\t\t\tvalue;\r\n\t\t\tconstructor(value){\r\n\t\t\t\tthis.value = value;\r\n\t\t\t\tObject.freeze(this);\r\n\t\t\t}\r\n\t\t}\r\n\t\tstatic NO_CHANGE = new this.#LineBreakModeEnum(1)\r\n\t\tstatic NEXT_LINE_FIRST = new this.#LineBreakModeEnum(2);\r\n\t\tstatic NEXT_LINE_LAST = new this.#LineBreakModeEnum(3);\r\n\t}\r\n\r\n\t#isLoaded = false;\r\n\tcomponents;\r\n\ttools;\r\n\t#placeholder;\r\n\t#undoManager;\r\n\tisDefaultStyle = true;\r\n\t#toolButtonObserver = new MutationObserver( (mutationList, observer) => {\r\n\t\tmutationList.forEach((mutation) => {\r\n\t\t\t//if(mutation.oldValue == mutation.mutation.target.dataset.tool_status){\r\n\t\t\t\t// 동일한 동작이 수행되지 않도록 추가 2023 05 25\r\n\t\t\t//\treturn;\r\n\t\t\t//}\r\n\t\t\tif(this.contentEditable == 'false'){\r\n\t\t\t\t//observer.disconnect();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet selection = window.getSelection();\r\n\t\t\t/*if( ! selection.containsNode(this, true)){\r\n\t\t\t\tconsole.log(222)\r\n\t\t\t\treturn;\r\n\t\t\t}*/\r\n\t\t\tlet focusNode = selection.focusNode;\r\n\t\t\tlet Tool = mutation.target.__Tool;\r\n\t\t\tif(mutation.target.dataset.tool_status == 'active' && mutation.oldValue != 'active' && Tool.prototype.isPrototypeOf(focusNode.parentElement) == false){\r\n\t\t\t\tthis.#renderingTools(Tool);\r\n\t\t\t}else if(mutation.target.dataset.tool_status == 'cancel' && mutation.oldValue != 'cancel'){// && window.getSelection().isCollapsed == false){\r\n\t\t\t\tthis.#removerTools(Tool);\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\tconstructor(\r\n\t\ttools = [\r\n\t\t\tStrong,\r\n\t\t\tColor,\r\n\t\t\tBackground,\r\n\t\t\tStrikethrough,\r\n\t\t\tUnderline,\r\n\t\t\tFontFamily,\r\n\t\t\tQuote,\r\n\t\t\tNumericPoint,\r\n\t\t\tBulletPoint,\r\n\t\t\tSort,\r\n\t\t\tFontSize,\r\n\t\t\tItalic,\r\n\t\t\tImage,\r\n\t\t\tVideo,\r\n\t\t\tResources,\r\n\t\t\tCode,\r\n\t\t\tHyperlink,\r\n\t\t],\r\n\t\t{isDefaultStyle = true} = {}\r\n\t){\r\n\t\tsuper();\r\n\t\tif(isDefaultStyle){\r\n\t\t\tFreeWiilHandler.createDefaultStyle();\r\n\t\t}\r\n\t\tnew Promise(resolve => {\r\n\t\t\tthis.isDefaultStyle = isDefaultStyle;\r\n\t\t\tthis.components = {\r\n\t\t\t\t'free-will-editor-line' : Line\r\n\t\t\t};\r\n\t\t\tthis.tools = tools;\r\n\t\t\tthis.classList.add('free-will-editor');\r\n\r\n\t\t\tObject.entries(this.components).forEach( ([className, Component]) => {\r\n\t\t\t\tif(className.includes(' ')){\r\n\t\t\t\t\tthrow new DOMException(`The token provided ('${className}') contains HTML space characters, which are not valid in tokens.`);\r\n\t\t\t\t}\r\n\t\t\t\tif(FreeWillEditor.componentsMap[Component.name]){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tComponent.toolHandler.defaultClass = className;\r\n\t\t\t\tif( ! window.customElements.get(className)){\r\n\t\t\t\t\twindow.customElements.define(className, Component, Component.toolHandler.extendsElement && Component.toolHandler.extendsElement != '' ? {extends:Component.toolHandler.extendsElement} : undefined);\r\n\t\t\t\t}\t\r\n\t\t\t\tFreeWillEditor.componentsMap[Component.name] = Component;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.tools.forEach( (Tool) => {\r\n\t\t\t\tif(FreeWillEditor.toolsMap[Tool.name]){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(this.isDefaultStyle){\r\n\t\t\t\t\tTool.createDefaultStyle();\r\n\t\t\t\t}\r\n\t\t\t\tTool.toolHandler.toolButton.__Tool = Tool;\r\n\t\t\t\t// attribute에 value가 없어서 oldvalue가 ''이 나옵니다.\r\n\t\t\t\t// oldvalue로 구분할 수 있게 합시다.\r\n\t\t\t\tthis.#toolButtonObserver.observe(Tool.toolHandler.toolButton, {\r\n\t\t\t\t\tattributeFilter:['data-tool_status'],\r\n\t\t\t\t\tattributeOldValue:true\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tif( ! window.customElements.get(Tool.toolHandler.defaultClass)){\r\n\t\t\t\t\twindow.customElements.define(Tool.toolHandler.defaultClass, Tool, Tool.toolHandler.extendsElement && Tool.toolHandler.extendsElement != '' ? {extends:Tool.toolHandler.extendsElement} : undefined);\r\n\t\t\t\t}\r\n\t\t\t\tFreeWillEditor.toolsMap[Tool.name] = Tool;\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t\r\n\r\n\t\t\tlet observer = new MutationObserver( (mutationList, observer) => {\r\n\t\t\t\tmutationList.forEach((mutation) => {\r\n\t\t\t\t\t//if(this.contentEditable == 'false'){\r\n\t\t\t\t\t//\treturn;\r\n\t\t\t\t\t//}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(this.childElementCount == 0){\r\n\t\t\t\t\t\tthis.startFirstLine();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif( ! this.firstElementChild.line){\r\n\t\t\t\t\t\tnew Line(this.firstElementChild.line);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.querySelectorAll('[data-placeholder]').forEach(async e => {\r\n\t\t\t\t\t\te.removeAttribute('data-placeholder')\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif(this.isEmpty){\r\n\t\t\t\t\t\tthis.placeholder = this.#placeholder;\r\n\t\t\t\t\t\t//this.firstElementChild.dataset.placeholder = this.#placeholder\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.firstElementChild.setAttribute('data-placeholder', '');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//console.log(mutation.target);\r\n\t\t\t\t\tmutation.addedNodes.forEach(async element=>{\r\n\t\t\t\t\t\tnew Promise(resolve=>{\r\n\t\t\t\t\t\t\tif(element.nodeType != Node.ELEMENT_NODE) return;\r\n\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\tlet sty = window.getComputedStyle(element);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif(sty.visibility == 'hidden' || sty.opacity == 0){\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t\tif(element.classList.contains(Line.toolHandler.defaultClass)){\r\n\t\t\t\t\t\t\t\tif( ! element.line){\r\n\t\t\t\t\t\t\t\t\tnew Line(element);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(element.innerText.length == 0){\r\n\t\t\t\t\t\t\t\t\telement.innerText = '\\n';\r\n\t\t\t\t\t\t\t\t\twindow.getSelection().setPosition(element, 1)\r\n\t\t\t\t\t\t\t\t\telement.focus();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\t/*mutation.removedNodes.forEach(element=>{\r\n\r\n\t\t\t\t\t})*/\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t\tobserver.observe(this, {\r\n\t\t\t\tchildList:true,\r\n\t\t\t\tsubtree: true\r\n\t\t\t})\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n\tconnectedCallback(){\r\n\t\tthis.#undoManager = new UndoManager(this);\r\n\t\tif( ! this.#isLoaded){\r\n            this.#isLoaded = true;\r\n\t\t\tif(this.contentEditable == 'inherit' || this.contentEditable == true){\r\n\t\t\t\tthis.contentEditable = true;\r\n\t\t\t\tthis.tabIndex = 1;\r\n\t\t\t\tthis.focus()\r\n\t\t\t\tif(this.isEmpty){\r\n\t\t\t\t\tthis.startFirstLine();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tdisconnectedCallback(){\r\n\t\tthis.#undoManager = null;\r\n        this.#isLoaded = false;\r\n\t\t//this.contentEditable = false;\r\n\t\tthis.#toolButtonObserver.disconnect();\r\n    }\r\n\r\n\tstartFirstLine(){\r\n\t\tlet lineElement = super.createLine();\r\n\t\tlineElement.line.isFirstLine = true;\r\n\t\tthis.placeholder = this.#placeholder;\r\n\t\treturn lineElement;\r\n\t}\r\n\r\n\t#removeAfterSelectionMove(targetElement){\r\n\t\tlet selection = document.getSelection()\r\n\t\tlet range =  new Range();//document.createRange()\r\n\t\tlet targetLine = Line.getLine(targetElement);\r\n\t\trange.setStartAfter(targetLine)\r\n\t\trange.setEnd(targetLine, targetElement.textContent.length - 1);\r\n\t\tselection.removeAllRanges()\r\n\t\tselection.addRange(range) \r\n\t}\r\n\r\n\t#addAfterSelectionMove(targetElement){\r\n\t\tlet selection = document.getSelection()\r\n\t\tlet range =  new Range();//document.createRange()\r\n\t\tif( ! targetElement){\r\n\t\t//\treturn;\r\n\t\t}\r\n\t\tif(targetElement && targetElement.nodeType == Node.ELEMENT_NODE && targetElement.textContent.length == 0){\r\n\t\t\t//let emptyElement = document.createTextNode('\\u200B')\r\n\t\t\t//targetElement.textContent = '\\u200B'; //.append(emptyElement)\r\n\t\t}\r\n\t\t\r\n\t\trange.selectNodeContents(targetElement)\r\n\t\trange.setStart(targetElement, targetElement.length);\r\n\t\trange.setEnd(targetElement, targetElement.length);\r\n\t\tselection.removeAllRanges()\r\n\t\tselection.addRange(range)\r\n\t\ttargetElement.removeAttribute('tabIndex');\r\n\t\t//cursor\r\n\t\t/*\r\n\t\tlet observer = new MutationObserver( (mutationList, observer) => {\r\n\t\t\tmutationList.forEach((mutation) => {\r\n\t\t\t\tif(mutation.target.textContent.includes('\\u200B')){\r\n\t\t\t\t\tif(targetElement.toolHandler && targetElement.toolHandler.toolButton ? true: false){\r\n\t\t\t\t\t\ttargetElement.toolHandler.toolButton.setAttribute('data-is_alive', '');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmutation.target.textContent = mutation.target.textContent.replace('\\u200B', '');\r\n\t\t\t\t\tconsole.log('146 :: targetElement.isConnected',targetElement.isConnected);\r\n\t\t\t\t\tconsole.log('147 :: targetElement',targetElement);\r\n\t\t\t\t\tif(targetElement.isConnected){\r\n\t\t\t\t\t\tselection.modify('move', 'forward', 'line')\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttargetElement.removeAttribute('tabIndex');\r\n\t\t\t\t\tobserver.disconnect();\r\n\t\t\t\t}else{\r\n\t\t\t\t\ttargetElement.removeAttribute('tabIndex');\r\n\t\t\t\t\tobserver.disconnect();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t})\r\n\r\n\t\tobserver.observe(targetElement, {\r\n\t\t\tcharacterData: true,\r\n\t\t\tcharacterDataOldValue: true,\r\n\t\t\tchildList:true,\r\n\t\t\tsubtree: true\r\n\t\t})\r\n\t\t*/\r\n\t}\r\n\r\n\t#renderingTools(TargetTool){\r\n\t\tlet selection = window.getSelection();\r\n\t\t//if( ! anchorNodeLine || ! focusNodeLine){\r\n\t\t//\treturn;\r\n\t\t//}\r\n\t\t\r\n\t\tsuper.getLineRange(selection)\r\n\t\t.then(({startLine, endLine}) => { \r\n\t\t\tif( ! startLine){\r\n\t\t\t\tstartLine = endLine\r\n\t\t\t}\r\n\t\t\tif( ! startLine.line){\r\n\t\t\t\tnew Line(startLine);\r\n\t\t\t}\r\n\t\t\tif( ! endLine.line){\r\n\t\t\t\tnew Line(endLine);\r\n\t\t\t}\r\n\t\t\treturn startLine.line.applyTool(TargetTool, selection.getRangeAt(0), endLine)\r\n\t\t})\r\n\t\t.then(lastApplyTool=> {\r\n\t\t\tif( ! this.#undoManager){\r\n\t\t\t\tthis.#undoManager = new UndoManager(this);\r\n\t\t\t}\r\n\t\t\tthis.#undoManager.addUndoRedo(true);\r\n\t\t\tlet applyToolAfterSelection = window.getSelection(), range = applyToolAfterSelection.getRangeAt(0);\r\n\t\t\tlet scrollTarget;\r\n\t\t\tif(range.endContainer.nodeType == Node.TEXT_NODE){\r\n\t\t\t\tscrollTarget = range.endContainer.parentElement\r\n\t\t\t}else{\r\n\t\t\t\tscrollTarget = range.endContainer;\r\n\t\t\t}\r\n\t\t\tscrollTarget.scrollIntoView({ behavior: \"instant\", block: \"end\", inline: \"nearest\" });\r\n\t\t\tapplyToolAfterSelection.setPosition(scrollTarget, scrollTarget.childNodes.length - 1);\r\n\t\t\t//selection.setPosition(lastApplyTool, 0)\r\n\t\t})\r\n\t\t/*\r\n\t\t.then(tool=>{\r\n\t\t\tthis.querySelectorAll(`.${TargetTool.toolHandler.defaultClass}`).forEach(async e =>{\r\n\t\t\t\tawait new Promise(resolve=>{\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\t//this.#addAfterSelectionMove(tool);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\t#removerTools(TargetTool){\r\n\t\tlet selection = window.getSelection();\r\n\t\tlet {isCollapsed, anchorNode, focusNode} = selection;\r\n\t\t/*\r\n\t\t// 범위 선택 x인 경우 넘어가기\r\n\t\tif(isCollapsed){\r\n\t\t\treturn;\r\n\t\t}*/\r\n\t\tsuper.getLineRange(selection).then(({startLine, endLine})=> {\r\n\t\t\tconsole.log(endLine);\r\n\t\t\tif( ! startLine){\r\n\t\t\t\tstartLine = endLine\r\n\t\t\t}\r\n\t\t\tif( ! startLine.line){\r\n\t\t\t\tnew Line(startLine);\r\n\t\t\t}\r\n\t\t\tif( ! endLine.line){\r\n\t\t\t\tnew Line(endLine);\r\n\t\t\t}\r\n\t\t\tstartLine.line.cancelTool(TargetTool, selection, endLine);\r\n\t\t}).then(()=>{\r\n\t\t\tthis.#undoManager.addUndoRedo(true);\r\n\t\t\t/*[...this.children]\r\n\t\t\t.filter(e=>e.classList.contains(`${Line.toolHandler.defaultClass}`))\r\n\t\t\t.forEach(lineElement=>{\r\n\t\t\t\tif(lineElement.line.isLineEmpty()){\r\n\t\t\t\t\t//lineElement.line = undefined;\r\n\t\t\t\t\t//lineElement.remove();\r\n\t\t\t\t}\r\n\t\t\t})*/\r\n\t\t})\r\n\t}\r\n\t\r\n\tasync lineBreak(LineBreakMode = FreeWillEditor.LineBreakMode.NEXT_LINE_FIRST){\r\n\t\tlet selection = window.getSelection();\r\n\t\treturn super.getLineRange(selection)\r\n\t\t.then(({startLine, endLine}) => { \r\n\t\t\tif( ! startLine.line){\r\n\t\t\t\tnew Line(startLine);\r\n\t\t\t}\r\n\t\t\tif( ! endLine.line){\r\n\t\t\t\tnew Line(endLine);\r\n\t\t\t}\r\n\t\t\tlet range = selection.getRangeAt(0);\r\n\t\t\tlet {startOffset, endOffset, startContainer,endContainer} = range;\r\n\t\t\tlet lastItem = startLine.lastChild\r\n\t\t\tlet lastItemEndOffset = lastItem.nodeType == Node.TEXT_NODE ? lastItem.length : lastItem.childNodes.length;\r\n\t\t\trange.setStart(startContainer, startOffset);\r\n\t\t\trange.setEnd(lastItem, lastItemEndOffset);\r\n\t\t\tlet lineElement = super.createLine();\r\n\t\t\tlineElement.append(range.extractContents());\r\n\t\t\tstartLine.after(lineElement);\r\n\t\t\tif(LineBreakMode == FreeWillEditor.LineBreakMode.NEXT_LINE_FIRST){\r\n\t\t\t\twindow.getSelection().setPosition(lineElement, 0);\r\n\t\t\t}else if(LineBreakMode == FreeWillEditor.LineBreakMode.NEXT_LINE_LAST){\r\n\t\t\t\tlineElement.line.lookAtMe();\r\n\t\t\t}\r\n\r\n\t\t})\r\n\t}\r\n\r\n\tasync getLowDoseJSON(targetElement = this, {afterCallback = (json)=> {}} = {}){\r\n\t\tconsole.log(targetElement)\r\n\t\treturn Promise.all([...targetElement.childNodes]\r\n\t\t\t.map(async (node, index)=>{\r\n\t\t\t\treturn new Promise(resolve =>{\r\n\t\t\t\t\tif(targetElement == this && node.nodeType == Node.TEXT_NODE){\r\n\t\t\t\t\t\tresolve(undefined);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresolve( this.#toJSON(node, {afterCallback}) )\r\n\t\t\t\t})\r\n\t\t\t})).then(jsonList=>jsonList.filter(e=>e != undefined).map(e=> {\r\n\t\t\t\tdelete e.node;\r\n\t\t\t\treturn e;\r\n\t\t\t}))\r\n\t}\r\n\r\n\tasync #toJSON(node, {afterCallback}){\r\n\t\treturn new Promise(resolve=>{\r\n\t\t\tlet obj = {};\r\n\t\t\tif(node.nodeType == Node.TEXT_NODE && node.textContent != '' && node.textContent){\r\n\t\t\t\tobj.type = Node.TEXT_NODE;\r\n\t\t\t\tobj.name = node.constructor.name;\r\n\t\t\t\tobj.text = node.textContent\r\n\t\t\t\tobj.node = node;\r\n\t\t\t\tafterCallback(obj);\r\n\t\t\t\tresolve(obj);\r\n\t\t\t}else if(node.nodeType == Node.ELEMENT_NODE){\r\n\t\t\t\tobj.type = Node.ELEMENT_NODE;\r\n\t\t\t\tobj.name = node.constructor.name;\r\n\t\t\t\tobj.tagName = node.localName;\r\n\t\t\t\tobj.data = Object.assign({}, node.dataset);\r\n\t\t\t\tobj.node = node;\r\n\t\t\t\tif(node.hasAttribute('is_cursor')){\r\n\t\t\t\t\tobj.cursor_offset = node.getAttribute('cursor_offset');\r\n\t\t\t\t\tobj.cursor_type = node.getAttribute('cursor_type');\r\n\t\t\t\t\tobj.cursor_index = node.getAttribute('cursor_index');\r\n\t\t\t\t\tobj.cursor_scroll_x = node.getAttribute('cursor__scroll_x');\r\n\t\t\t\t\tobj.cursor_scroll_y = node.getAttribute('cursor_scroll_y');\r\n\t\t\t\t}\r\n\t\t\t\tthis.getLowDoseJSON(node, {afterCallback})\r\n\t\t\t\t.then(jsonList => {\r\n\t\t\t\t\tobj.childs = jsonList.filter(e=> e != undefined)\r\n\t\t\t\t\tafterCallback(obj);\r\n\t\t\t\t\tresolve(obj);\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\t//afterCallback(undefined)\r\n\t\t\t\tresolve(undefined);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t})\r\n\t}\r\n\r\n\tasync parseLowDoseJSON(json, {beforeCallback = (json) => {}, afterCallback = (node)=> {}} = {}){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tlet jsonObj = json;\r\n\t\t\tif(typeof json == 'string'){\r\n\t\t\t\tjsonObj = JSON.parse(json);\r\n\t\t\t}\r\n\r\n\t\t\tif(jsonObj instanceof Array){\r\n\t\t\t\tresolve(\r\n\t\t\t\t\tPromise.all(this.#toHTML(jsonObj, {beforeCallback, afterCallback}))\r\n\t\t\t\t\t.then(htmlList => {\r\n\t\t\t\t\t\tthis.replaceChildren(...htmlList.filter(e=> e != undefined))\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tresolve(undefined);\r\n\t\t})\r\n\t}\r\n\r\n\t#toHTML(objList, {beforeCallback, afterCallback}){\r\n\t\treturn objList.filter(e=>e!=undefined).map(async jsonNode => {\r\n\t\t\treturn new Promise(resolve => {\r\n\t\t\t\tbeforeCallback(jsonNode);\r\n\t\t\t\tlet node = undefined;\r\n\t\t\t\tif(jsonNode.type == Node.TEXT_NODE){\r\n\t\t\t\t\tnode = document.createTextNode(jsonNode.text);\r\n\t\t\t\t}else if(jsonNode.type == Node.ELEMENT_NODE){\r\n\t\t\t\t\tlet EditorTarget = FreeWillEditor.componentsMap[jsonNode.name] || FreeWillEditor.toolsMap[jsonNode.name]\r\n\t\t\t\t\tif(EditorTarget){\r\n\t\t\t\t\t\tnode = new EditorTarget(jsonNode.data);\r\n\t\t\t\t\t}else if(jsonNode.data.hasOwnProperty('is_line')){\r\n\t\t\t\t\t\tlet line = new Line(document.createElement(jsonNode.tagName));\r\n\t\t\t\t\t\tnode = line.lineElement;\r\n\t\t\t\t\t\tObject.assign(node.dataset, jsonNode.data);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t//node = document.createElement(jsonNode.name.replaceAll(/HTML|Element/g, '').toLowerCase());\r\n\t\t\t\t\t\tnode = document.createElement(jsonNode.tagName);\r\n\t\t\t\t\t\tObject.assign(node.dataset, jsonNode.data);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tafterCallback(node)\r\n\t\t\t\t\tif(jsonNode.childs.length != 0){\r\n\t\t\t\t\t\tPromise.all(this.#toHTML(jsonNode.childs, {beforeCallback, afterCallback})).then(childList => {\r\n\t\t\t\t\t\t\tnode.append(...childList);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tresolve(node);\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tset placeholder(placeholder){\r\n\t\tthis.#placeholder = placeholder;\r\n\t\tif(this.firstElementChild && this.contentEditable != false){\r\n\t\t\tthis.firstElementChild.setAttribute('data-placeholder', this.#placeholder);\r\n\t\t}\r\n\t}\r\n\r\n\tget firstLine(){\r\n\t\treturn this.firstElementChild;\r\n\t}\r\n\r\n\tget isEmpty(){\r\n\t\treturn Line.isElementTextEmpty(this) && ! [...this.querySelectorAll('*')].some(e=>this.tools.hasOwnProperty(e.localName));\r\n\t}\r\n\r\n\tget isLoaded(){\r\n\t\treturn this.#isLoaded;\r\n\t}\r\n}\r\n","\r\nexport default new class WorkspaceHandler{\r\n    #workspace;\r\n    #workspaceId;\r\n    #addWorkspaceIdChangedListener = {};\r\n    #workspaceChangeDone;\r\n    #workspaceChangeAwait;\r\n    constructor(){\r\n        //window.addEventListener(\"DOMContentLoaded\", (event) => {\r\n            window.myAPI.getWorkspaceId().then(workspaceId=>{\r\n                this.workspaceId = workspaceId;\r\n            })\r\n            window.myAPI.event.electronEventTrigger.addElectronEventListener('workspaceChange', event => {\r\n                this.workspaceId = event.workspaceId;\r\n            })\r\n        //});\r\n    }\r\n\r\n    set addWorkspaceIdChangedListener({name, callBack, runTheFirst}){\r\n        this.#addWorkspaceIdChangedListener[name] = callBack;\r\n        if(runTheFirst && this.workspaceId){\r\n            callBack(this);\r\n        }\r\n    }\r\n    get addWorkspaceIdChangedListener(){\r\n        return this.#addWorkspaceIdChangedListener;\r\n    }\r\n\r\n    set workspaceId(workspaceId){\r\n        if(!workspaceId)return;\r\n        this.#workspaceId = workspaceId;\r\n        window.myAPI.workspace.getWorkspaceDetail({workspaceId}).then((workspace) => {\r\n            this.#workspace = workspace;\r\n            let startCallbackPromise = Promise.all(Object.values(this.#addWorkspaceIdChangedListener).map(async callBack => {\r\n                return new Promise(res => {\r\n                    callBack(this);\r\n                    res();\r\n                });\r\n            }));\r\n            if( ! this.#workspaceChangeAwait){\r\n                this.#workspaceChangeAwait = new Promise(resolve=>{\r\n                    this.#workspaceChangeDone = resolve;\r\n                    this.#workspaceChangeDone(startCallbackPromise);\r\n                })\r\n            }else{\r\n                this.#workspaceChangeAwait.then(() => {\r\n                    startCallbackPromise.then(() => {\r\n                        this.#workspaceChangeAwait = new Promise(resolve => {\r\n                            this.#workspaceChangeDone = resolve;\r\n                        })\r\n                    })\r\n                })\r\n            }\r\n        });\r\n    }\r\n    get workspaceId(){\r\n        return Number(this.#workspaceId);\r\n    }\r\n    get workspace(){\r\n        return this.#workspace;\r\n    }\r\n    removeWorkspaceIdChangedListener(name){\r\n        delete this.#addWorkspaceIdChangedListener(name);\r\n    }\r\n};","export default new class RoomHandler{\r\n    #roomId\r\n    #room;\r\n    #addRoomIdChangeListener = {};\r\n\r\n    #roomChangeDone;\r\n    #roomChangeAwait = new Promise(resolve=>{\r\n        this.#roomChangeDone = resolve;\r\n    });\r\n\r\n    constructor(){\r\n\r\n        window.myAPI.event.electronEventTrigger.addElectronEventListener('roomChange', event => {\r\n            this.roomId = event.roomId\r\n        })\r\n\r\n    }\r\n\r\n    set addRoomIdChangeListener({name, callBack, runTheFirst}){\r\n        this.#addRoomIdChangeListener[name] = callBack;\r\n        if(runTheFirst && this.#roomId){\r\n            callBack(this);\r\n        }\r\n    }\r\n\r\n    get addRoomIdChangeListener(){\r\n        return this.#addRoomIdChangeListener;\r\n    }\r\n\r\n    set roomId(roomId){\r\n        if( ! roomId){\r\n            throw new Error('roomId is undefined')\r\n        }\r\n        this.#roomId = roomId;\r\n        window.myAPI.room.getRoomDetail({roomId}).then(result => {\r\n            this.#room = result.data;\r\n            window.myAPI.setOption({\r\n                name: 'lastRoomInfo', value : JSON.stringify(this.#room)\r\n            })\r\n            let startCallbackPromise = Promise.all(\r\n                Object.values(this.#addRoomIdChangeListener).map(async callBack => {\r\n                    return new Promise(res => {\r\n                        callBack(this);\r\n                        res();\r\n                    })\r\n                })\r\n            )\r\n            startCallbackPromise.then(()=>{\r\n                this.#roomChangeDone();\r\n            })\r\n            this.#roomChangeAwait.then(()=>{\r\n                this.#roomChangeAwait = new Promise(resolve=>{\r\n                    this.#roomChangeDone = resolve;\r\n                })\r\n            })\r\n            //window.myAPI.setTitle({title:this.#room.roomName})\r\n            \r\n        });\r\n    }\r\n\r\n    get roomId(){\r\n        return Number(this.#roomId);\r\n    }\r\n\r\n    get room(){\r\n        return this.#room;\r\n    }\r\n    removeRoomIdChangeListener(name){\r\n        delete this.#addRoomIdChangeListener(name);\r\n    }\r\n    get roomChangeAwait(){\r\n        return this.#roomChangeAwait;\r\n    }\r\n}","export default new class Common{\r\n\t#keyRegx = /[A-Z]?[a-z]+|[0-9]+|[A-Z]+(?![a-z])/g;\r\n\r\n\tconstructor(){\r\n\r\n\t}\r\n\r\n\tjsonToSaveElementDataset(data, element){\r\n\t\tif( ! element){\r\n\t\t\tthrow new Error('element is undefined')\r\n\t\t} else if(element.nodeType != Node.ELEMENT_NODE){\r\n\t\t\tthrow new Error(`element is not element node type ::: ${element.nodeType}`);\r\n\t\t}\r\n\t\treturn new Promise(resolve=>{\r\n\t\t\tlet underbarKeyNameObject = Object.entries(data).reduce((total, [k,v]) => {\r\n\t\t\t\tlet key = k.match(this.#keyRegx).map(e=> e.toLowerCase()).join('_');\r\n\t\t\t\ttotal[key] = v;\r\n\t\t\t\treturn total;\r\n\t\t\t}, {});\r\n\t\t\tObject.assign(element.dataset, underbarKeyNameObject);\r\n\t\t\tresolve(element);\r\n\t\t})\r\n\t}\r\n\tasync underbarNameToCamelName(obj){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tresolve(Object.entries(obj).reduce((total, [k,v]) => {\r\n\t\t\t\tlet key = k.split('_').map((e,i)=>{\r\n\t\t\t\t\tif(i == 0){\r\n\t\t\t\t\t\treturn e.charAt(0).toLowerCase() + e.substring(1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn e.charAt(0).toUpperCase() + e.substring(1)\r\n\t\t\t\t}).join('');\r\n\t\t\t\ttotal[key] = v;\r\n\t\t\t\treturn total;\r\n\t\t\t}, {}))\r\n\t\t})\r\n\t}\r\n\t/**\r\n\t * @returns {Promise<String>}\r\n\t */\r\n\tasync getProjectPathPromise(){\r\n\t\treturn await window.myAPI.getProjectPath().then((data) => {\r\n\t\t\treturn data;\r\n\t\t}).catch(error=>{\r\n\t\t\tconsole.error(error);\r\n\t\t\treturn '';\r\n\t\t})\r\n\t}\r\n\r\n\tprocessingElementPosition(element, target){\r\n\t\tlet rect;\r\n\t\tif(this.isElement(target, HTMLElement)){\r\n\t\t\trect = target.getBoundingClientRect();\r\n\t\t}else{\r\n\t\t\trect = target;\r\n\t\t}\r\n\r\n\t\tlet {x, y, height, width} = rect;\r\n\t\tlet elementTop = (y - element.clientHeight)\r\n\t\tlet elementLeft = (x - element.clientWidth)\r\n\t\tif(elementTop > 0){\r\n\t\t\telement.style.top = elementTop + 'px';\r\n\t\t}else{\r\n\t\t\telement.style.top = y + height + 'px';\r\n\t\t}\r\n\t\tif(elementLeft > 0){\r\n\t\t\telement.style.left = elementLeft + 'px'\r\n\t\t}else{\r\n\t\t\telement.style.left = x + width + 'px';\r\n\t\t}\r\n\t\t\r\n\t}\r\n    isElement(targetObject, checkClazz){\r\n        let check = Object.getPrototypeOf(targetObject)\r\n        let isElement = false;\r\n        while(check != undefined){\r\n\r\n            if(check?.constructor  == checkClazz){\r\n                isElement = true;\r\n                break;\r\n            }else{\r\n                check = Object.getPrototypeOf(check);\r\n            }\r\n        }\r\n        return isElement;\r\n    }\r\n\r\n\tshortenBytes(byte) {\r\n\t\tconst rank = byte > 0 ? Math.floor((Math.log2(byte)/10)) : 0;\r\n\t\tconst rankText = ( (rank > 0 ? 'KMGTPEZY'[rank - 1] : '') || (rank >= 9 ? 'Y' : '') ) + 'B';\r\n\t\tconst size = Math.floor(byte / Math.pow(1024, (rank >= 9 ? 8 : rank) ));\r\n\t\treturn {size, rank, rankText};\r\n\t}\r\n}","export default class PositionChanger{\r\n\t#wrapper;\r\n\t#targetItem;\r\n\t#childList = [];\r\n\t#onDropEndChangePositionCallback = (changeList) => {};\r\n\t#onDropDocumentOutCallback = (target) => {console.log('out!!', target)}; \r\n\t#onIfCancelCallback = (target) => {return false;};\r\n\tconstructor({wrapper}){\r\n\t\tif( ! wrapper){\r\n\t\t\tthrow new Error('wrapper is undefined');\r\n\t\t}/*else if(childList.length == 0){\r\n\t\t\tthrow new Error('child list is empty');\r\n\t\t}*/\r\n\t\tthis.#wrapper = wrapper;\r\n\t}\r\n\r\n\taddPositionChangeEvent(child, wrapper){\r\n\t\tif(child.length == 0){\r\n\t\t\tthrow new Error('child is empty');\r\n\t\t}else if(child.some(e=>Number(e.dataset.order_sort) == undefined || isNaN(Number(e.dataset.order_sort)))){\r\n\t\t\tconsole.error(child);\r\n\t\t\tthrow new Error('data-order_sort is not defined or is not number')\r\n\t\t}\r\n\t\tlet parent = wrapper || this.#wrapper;\r\n\t\tparent.dataset.is_position_change = '';\r\n\t\tlet pointerEventTargetList = [];\r\n\t\treturn new Promise(resolve => {\r\n\t\t\t\r\n\t\t\tlet lastItem = [...parent.children].filter(e=>e.hasAttribute('data-order_sort')).pop() // or at(-1)\r\n\t\t\tchild.forEach((item, index)=>{\r\n\t\t\t\titem.draggable = true;\r\n\t\t\t\titem.ondragstart = (event) => {\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\t//event.preventDefault();\r\n\t\t\t\t\tthis.#targetItem = item;\r\n\t\t\t\t\t//this.#targetItem = event.target;\r\n\t\t\t\t\tchild.forEach(async e => {\r\n\t\t\t\t\t\t[...e.children].forEach((ee)=>{\r\n\t\t\t\t\t\t\tif(ee.hasAttribute('data-is_position_change')) {\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tee.style.pointerEvents = 'none';\r\n\t\t\t\t\t\t\tee.dataset.is_pointer_target = ''\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\titem.ondragend = (event) => {\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\t//event.preventDefault();\r\n\t\t\t\t\tif(\r\n\t\t\t\t\t\tevent.x < 0 || event.y < 0 ||\r\n\t\t\t\t\t\twindow.outerWidth < event.x || window.outerHeight < event.y\r\n\t\t\t\t\t){\r\n\t\t\t\t\t\tthis.#onDropDocumentOutCallback({\r\n\t\t\t\t\t\t\ttarget:item,\r\n\t\t\t\t\t\t\tevent\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.#targetItem = undefined;\r\n\t\t\t\t\t\r\n\t\t\t\t\tnew Promise(res => {\r\n\t\t\t\t\t\tdocument.querySelectorAll('[data-is_pointer_target]').forEach(e=>{\r\n\t\t\t\t\t\t\te.style.pointerEvents = '';\r\n\t\t\t\t\t\t\te.removeAttribute('data-is_pointer_target');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tres();\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif(item.__dragendCallback){\r\n\t\t\t\t\t\titem.__dragendCallback();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\titem.ondragover = (event) => {\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t\titem.ondragenter = (event) => {\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tevent.target.style.borderTop = 'solid #0000009c';\r\n\t\t\t\t}\r\n\t\t\t\titem.ondragleave = (event) => {\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tevent.target.style.borderTop = '';\r\n\t\t\t\t}\r\n\t\t\t\titem.ondrop = (event) => {\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tevent.target.style.borderTop = '';\r\n\r\n\t\t\t\t\tif(! this.#targetItem){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//return;\r\n\t\t\t\t\tlet target = this.#targetItem;\r\n\t\t\t\t\tlet cancle = this.onIfCancelCallback(target, item)\r\n\t\t\t\t\tif((typeof cancle) != 'boolean'){\r\n\t\t\t\t\t\tthrow new Error('onIfCancelCallback is only return Boolean');\r\n\t\t\t\t\t}else if(cancle){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//item.before(target);\r\n\t\t\t\t\tevent.target.closest('[data-order_sort]').before(target);\r\n\t\t\t\t\tthis.#targetItem = undefined;\r\n\t\t\t\t\tnew Promise(res=>{\r\n\t\t\t\t\t\tlet nowLastItem = [...parent.children].filter(e=>e.hasAttribute('data-order_sort')).pop(); // or at(-1)\r\n\t\t\t\t\t\t//let nowLastItem = [...target.closest('ul').children].filter(e=>e.hasAttribute('data-order_sort')).pop(); // or at(-1)\r\n\t\t\t\t\t\t//this.#wrapper.querySelector('[data-order_sort]:last-child');\r\n\t\t\t\t\t\tif( ! lastItem){\r\n\t\t\t\t\t\t\tlastItem = nowLastItem;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet prevOrderSort = Number(lastItem.dataset.order_sort);\r\n\t\t\t\t\t\tif(target == lastItem && lastItem != nowLastItem){\r\n\t\t\t\t\t\t\tnowLastItem.dataset.order_sort = lastItem.dataset.order_sort;\r\n\t\t\t\t\t\t\tprevOrderSort = Number(lastItem.dataset.order_sort);\r\n\t\t\t\t\t\t\t//prevOrderSort -= 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlastItem = nowLastItem\r\n\t\t\t\t\t\tlet prevItem = lastItem?.previousElementSibling;\r\n\t\t\t\t\t\twhile(prevItem){\r\n\t\t\t\t\t\t\tprevOrderSort += 1;\r\n\t\t\t\t\t\t\tprevItem.dataset.prev_order_sort = prevItem.dataset.order_sort\r\n\t\t\t\t\t\t\tprevItem.dataset.order_sort = prevOrderSort ;\r\n\t\t\t\t\t\t\tif(prevItem.previousElementSibling === prevItem){\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tprevItem = prevItem.previousElementSibling;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tres();\r\n\t\t\t\t\t}).then(()=>{\r\n\t\t\t\t\t\tthis.#onDropEndChangePositionCallback(\r\n\t\t\t\t\t\t\t[...new Set([...child.filter(e=>e.dataset.order_sort != e.dataset.prev_order_sort && e != target), target])],\r\n\t\t\t\t\t\t\t{item, target, parent}\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n\tset onDropEndChangePositionCallback(callBack){\r\n\t\tthis.#onDropEndChangePositionCallback = callBack;\r\n\t}\r\n\tget onDropEndChangePositionCallback(){\r\n\t\treturn this.#onDropEndChangePositionCallback;\r\n\t}\r\n\r\n\tset onDropDocumentOutCallback(callBack){\r\n\t\tthis.#onDropDocumentOutCallback = callBack;\r\n\t}\r\n\tget onDropDocumentOutCallback(){\r\n\t\treturn this.#onDropDocumentOutCallback;\r\n\t}\r\n\r\n\tset onIfCancelCallback(callBack){\r\n\t\tthis.#onIfCancelCallback = callBack\r\n\t}\r\n\tget onIfCancelCallback(){\r\n\t\treturn this.#onIfCancelCallback;\r\n\t}\r\n\r\n}","export const accountHandler = new class AccountHandler{\r\n    #accountInfo = this.searchAccountInfo();\r\n    constructor(){\r\n\r\n    }\r\n\r\n    async searchAccountInfo(){\r\n        this.#accountInfo = await window.myAPI.account.getAccountInfo().then(result => {\r\n            return result.data;\r\n        });\r\n        return this.#accountInfo;\r\n    }\r\n\r\n    get accountInfo(){\r\n        return this.#accountInfo;\r\n    }\r\n};","\r\nexport const s3EncryptionUtil = new class S3EncryptionUtil{\r\n\r\n\tencoder = new TextEncoder();\r\n\tdecoder = new TextDecoder();\r\n\r\n\tsignAlgorithm = {\r\n\t\tname: \"RSASSA-PKCS1-v1_5\",\r\n\t\t// Consider using a 4096-bit key for systems that require long-term security\r\n\t\tmodulusLength: 2048,\r\n\t\tpublicExponent: new Uint8Array([0x01, 0x00, 0x01]),\r\n\t\thash: \"SHA-256\",\r\n\t}\r\n\r\n\tsecretAlgorithm = {\r\n\t\tname: \"RSA-OAEP\",\r\n\t\tmodulusLength: 2048,\r\n\t\tpublicExponent: new Uint8Array([0x01, 0x00, 0x01]),\r\n\t\thash: \"SHA-256\",\r\n\t}\r\n\r\n\tasync generateKeyPair(algorithm, keyUsages){\r\n\t\treturn window.crypto.subtle.generateKey(\r\n\t\t\talgorithm,\r\n\t\t\ttrue,\r\n\t\t\tkeyUsages//[\"sign\", \"verify\"]\r\n\t\t);\r\n\t}\r\n\r\n\tasync keySign(data, privateKey){\r\n\t\tlet message = this.encoder.encode(data);\r\n\t\treturn window.crypto.subtle.sign(this.signAlgorithm.name, privateKey, message).then(signature=>{\r\n\t\t\treturn {message, signature};\r\n\t\t})\r\n\t}\r\n\r\n\tasync decryptMessage(privateKey, ciphertext, algorithm) {\r\n\t\treturn window.crypto.subtle.decrypt(\r\n\t\t\t{ name: algorithm.name },\r\n\t\t\tprivateKey,\r\n\t\t\tciphertext,\r\n\t\t).catch(err=>{\r\n\t\t\tconsole.error(err.message);\r\n\t\t\tconsole.error(err.stack);\r\n\t\t});\r\n\t}\r\n\r\n\t\r\n\tasync convertBase64ToBuffer(base64){\r\n\t\treturn fetch(`data:application/octet-binary;base64,${base64}`)\r\n\t\t.then(res=>res.arrayBuffer())\r\n\t\t.then(buffer=>new Uint8Array(buffer))\r\n\t}\r\n\r\n\tasync exportKey(exportType, key){\r\n\t\treturn window.crypto.subtle.exportKey(exportType, key).then(exportKey => {\r\n\t\t\treturn new Promise( resolve => resolve(String.fromCharCode(...new Uint8Array(exportKey))) );\r\n\t\t}).then(exportKeyString => {\r\n\t\t\treturn new Promise( resolve => resolve(window.btoa(exportKeyString)) );\r\n\t\t});\r\n\t}\r\n\tasync callS3PresignedUrl(callFunction, signData, callFunctionParam = {} ){//,fileName, accountName){\r\n\t\tconsole.log('callFunctionParam !!! ',callFunctionParam);\r\n\t\treturn Promise.all( [this.generateKeyPair(this.signAlgorithm, [\"sign\", \"verify\"]), this.generateKeyPair(this.secretAlgorithm, [\"encrypt\", \"decrypt\"])] )\r\n\t\t.then( ([signKeyPair, encDncKeyPair]) => {\r\n\t\t\treturn Promise.all( [\r\n\t\t\t\tthis.exportKey('spki', signKeyPair.publicKey),\r\n\t\t\t\tthis.exportKey('spki', encDncKeyPair.publicKey), \r\n\t\t\t\tPromise.resolve(encDncKeyPair), \r\n\t\t\t\tPromise.resolve(signKeyPair)\r\n\t\t\t] )\t\t\r\n\t\t}).then( async ([exportSignKey, exportEncKey, encDncKeyPair, signKeyPair]) => {\r\n\r\n\t\t\tlet sign = await this.keySign(\r\n\t\t\t\t`${signData}:${exportEncKey}`, \r\n\t\t\t\tsignKeyPair.privateKey\r\n\t\t\t)\r\n\t\t\t\r\n\t\t\tlet result = await callFunction(Object.assign(callFunctionParam, {\r\n\t\t\t\tdata: window.btoa(String.fromCodePoint(...sign.message)), \r\n\t\t\t\tdataKey: exportSignKey, \r\n\t\t\t\tsign: window.btoa( String.fromCodePoint(...new Uint8Array(sign.signature)) ), \r\n\t\t\t}))\r\n\r\n\t\t\tlet {code, data} = result;\r\n\t\t\t\r\n\t\t\tif(code != 0){\r\n\t\t\t\treturn ;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn {data, encDncKeyPair};\r\n\t\t})\r\n\t}\r\n\r\n\tasync fetchPutObject(putUrl, key, md5, fileData){\r\n\t\treturn fetch(putUrl, {\r\n\t\t\tmethod:\"PUT\",\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Encoding' : 'base64',\r\n\t\t\t\t'Content-Type' : 'application/octet-stream',\r\n\t\t\t\t'x-amz-server-side-encryption-customer-algorithm': 'AES256',\r\n\t\t\t\t'x-amz-server-side-encryption-customer-key': key,\r\n\t\t\t\t'x-amz-server-side-encryption-customer-key-md5': md5,\r\n\t\t\t},\r\n\t\t\tbody: fileData\r\n\t\t})\r\n\t}\r\n}","import FreeWillEditor from \"@handler/editor/FreeWillEditor\";\r\nimport Strong from \"@handler/editor/tools/Strong\"\r\nimport Color from \"@handler/editor/tools/Color\"\r\nimport Background from \"@handler/editor/tools/Background\"\r\nimport Strikethrough from \"@handler/editor/tools/Strikethrough\"\r\nimport Underline from \"@handler/editor/tools/Underline\"\r\nimport FontFamily from \"@handler/editor/tools/FontFamily\"\r\nimport Quote from \"@handler/editor/tools/Quote\"\r\nimport NumericPoint from \"@handler/editor/tools/NumericPoint\"\r\nimport BulletPoint from \"@handler/editor/tools/BulletPoint\"\r\nimport Sort from \"@handler/editor/tools/Sort\"\r\nimport FontSize from \"@handler/editor/tools/FontSize\"\r\nimport Italic from \"@handler/editor/tools/Italic\"\r\nimport Image from \"@handler/editor/tools/Image\"\r\nimport Video from \"@handler/editor/tools/Video\"\r\nimport Resources from \"@handler/editor/tools/Resources\";\r\nimport Code from \"@handler/editor/tools/Code\"\r\nimport Hyperlink from \"@handler/editor/tools/Hyperlink\"\r\n\r\nimport workspaceHandler from \"@handler/workspace/WorkspaceHandler\";\r\nimport roomHandler from \"@handler/room/RoomHandler\";\r\nimport common from \"@root/js/common\"\r\nimport PositionChanger from \"@handler/PositionChangeer\";\r\nimport noticeBoardHandler from \"@handler/notice_board/NoticeBoardHandler\";\r\n\r\nimport { accountHandler } from \"@handler/account/AccountHandler\";\r\nimport { s3EncryptionUtil } from \"@handler/S3EncryptionUtil\";\r\n\r\nclass NoticeBoardLine extends FreeWillEditor{\r\n    static{\r\n        window.customElements.define('notice-board-line', NoticeBoardLine);\r\n    }\r\n\tstatic tools = [\r\n        Strong,\r\n        Color,\r\n        Background,\r\n        Strikethrough,\r\n        Underline,\r\n        FontFamily,\r\n        Quote,\r\n        NumericPoint,\r\n        BulletPoint,\r\n        Sort,\r\n        FontSize,\r\n        Italic,\r\n        Image,\r\n        Video,\r\n        Resources,\r\n        Code,\r\n        Hyperlink,\r\n    ]\r\n\r\n    static option = {\r\n        isDefaultStyle : true\r\n    }\r\n    \r\n    parentLi;\r\n    parentClass;\r\n    constructor(parentLi, parentClass){\r\n\r\n\t\tsuper(NoticeBoardLine.tools, NoticeBoardLine.option);\r\n\r\n        this.parentLi = parentLi;\r\n        this.parentClass = parentClass;\r\n        \r\n        super.placeholder = ''\r\n        super.spellcheck = true\r\n    }\r\n\r\n}\r\n\r\nexport default new class NoticeBoardDetail{\r\n\t#memory = {}\r\n\r\n    #element = Object.assign(document.createElement('div'), {\r\n        id: 'notice_board_detail_wrapper',\r\n        innerHTML: `\r\n            <div class=\"notice_board_detail_container list_scroll list_scroll-y\" data-bind_name=\"noticeBoardDetailContainer\">\r\n                <ul class=\"notice_board_detail_content\" data-bind_name=\"noticeBoardDetailList\">\r\n \r\n                </ul>\r\n                <div class=\"toolbar\" style=\"position: fixed;\" data-bind_name=\"toolbar\"></div>\r\n            </div>\r\n        `\r\n    })\r\n\r\n\t#elementMap = (()=>{\r\n\t\treturn \t[...this.#element.querySelectorAll('[data-bind_name]')].reduce((total, element) => {\r\n\t\t\ttotal[element.dataset.bind_name] = element;\r\n\t\t\treturn total;\r\n\t\t}, {})\r\n\t})();\r\n\r\n    #positionChanger;\r\n\r\n    /*#prevRange;\r\n    #prevContent;\r\n    #prevStartOffset;\r\n    #prevEndOffset;*/\r\n\r\n    constructor(){\r\n        this.#positionChanger = new PositionChanger({wrapper: this.#elementMap.noticeBoardDetailList});\r\n\t\tthis.#positionChanger.onDropEndChangePositionCallback = (changeList, {item, target, wrapper}) => {\r\n            window.myAPI.noticeBoard.updateNoticeBoardDetailOrder(\r\n                changeList.map(e=>{\r\n                    return {\r\n                        id: e.dataset.id,\r\n                        workspaceId: e.dataset.workspace_id,\r\n                        roomId: e.dataset.room_id,\r\n                        orderSort: e.dataset.order_sort,\r\n                    }\r\n                })\r\n            ).then(result => {\r\n                console.log(result);\r\n            })\r\n        };\r\n\r\n        window.myAPI.event.electronEventTrigger.addElectronEventListener('noticeBoardDetailAccept', (data) => {\r\n            //console.log(data);\r\n            let isEventStream\r\n            if(data && data.serverSentStreamType){\r\n                isEventStream = true;\r\n                data = data.content;\r\n            }\r\n            \r\n            let lastTarget = document.activeElement;\r\n            this.createItemElement(data)\r\n            .then(li => {\r\n                this.#addMemory(li, data.workspaceId, data.roomId, data.noticeBoardId, data.id);\r\n                let list = Object.values(this.#memory[data.workspaceId]?.[data.roomId]?.[data.noticeBoardId] || {})\r\n                .sort((a,b) => Number(b.dataset.order_sort) - Number(a.dataset.order_sort));\r\n                \r\n                this.#positionChanger.addPositionChangeEvent(list);\r\n\r\n                let listObserver = new MutationObserver( (mutationList, observer) => {\r\n                    mutationList.forEach((mutation) => {\r\n                        let {addedNodes, removedNodes} = mutation;\r\n                        let isAddedActiveTarget = [...addedNodes].some(e=> e == lastTarget.parentLi)\r\n                        if(isAddedActiveTarget){\r\n                            //setTimeout(()=>{\r\n                                lastTarget.contentEditable = true;\r\n                                let cursorTarget = lastTarget.hasAttribute('is_cursor') ? lastTarget : lastTarget.querySelector('[is_cursor]');\r\n                                if( ! cursorTarget) return;\r\n                                let {'cursor_offset': offset, 'cursor_type': type, 'cursor_index': index, 'cursor_scroll_x': x, 'cursor_scroll_y': y} = cursorTarget.attributes;\r\n                                let selection = window.getSelection();\r\n                                if(type.value == Node.ELEMENT_NODE){\r\n                                    let node = cursorTarget.childNodes[index.value]; \r\n                                    selection.setPosition(node, offset.value);\r\n                                }else if(type.value == Node.TEXT_NODE){\r\n                                    selection.setPosition(cursorTarget, offset.value);\r\n                                }\r\n\r\n                            //},5000)\r\n                        }\r\n                    })\r\n                });\r\n                if(lastTarget && lastTarget.tagName == 'NOTICE-BOARD-LINE'){ //|| ! checkTarget){    \r\n                    listObserver.observe(this.#elementMap.noticeBoardDetailList, {childList:true});\r\n                }\r\n\r\n                this.#elementMap.noticeBoardDetailList.replaceChildren(...list);\r\n\r\n                //this.#elementMap.noticeBoardDetailList.append();\r\n                let appendAwait = setInterval(()=>{\r\n                    if( ! li.isConnected){\r\n                        return;\r\n                    }\r\n                    clearInterval(appendAwait);\r\n                    listObserver.disconnect();\r\n                }, 50)\r\n            })\r\n        })\r\n\r\n        this.#elementMap.noticeBoardDetailList\r\n        noticeBoardHandler.addNoticeBoardIdChangeListener = {\r\n            name: 'noticeBoardDetailIdChange',\r\n            callBack: (handler, data)=>{\r\n                this.#elementMap.noticeBoardDetailList.replaceChildren();\r\n                this.refresh();\r\n                /*if(this.#memory[workspaceHandler.workspaceId]?.[roomHandler.roomId]?.[noticeBoardHandler.noticeBoardId]){\r\n                    this.#memory[workspaceHandler.workspaceId][roomHandler.roomId][noticeBoardHandler.noticeBoardId] = {};\r\n                }*/\r\n            }\r\n        }\r\n\r\n        let toolList = Object.values(NoticeBoardLine.tools).map(e=>e.toolHandler.toolButton);\r\n\r\n        document.addEventListener('selectionchange', event => {\r\n            if(document.activeElement.constructor != NoticeBoardLine){\r\n                return;\r\n            }\r\n            let selection = window.getSelection();\r\n            if (selection.rangeCount == 0){\r\n                return;\r\n            }\r\n            \r\n            /*let range = selection.getRangeAt(0);\r\n\r\n            this.#prevRange = range.cloneRange();\r\n            this.#prevStartOffset = range.startOffset;\r\n            this.#prevEndOffset = range.endOffset;\r\n            this.#prevContent = range.commonAncestorContainer;*/\r\n\r\n            if( ! selection.isCollapsed){\r\n                this.#elementMap.noticeBoardDetailContainer.append(this.#elementMap.toolbar);\r\n                this.#elementMap.toolbar.replaceChildren(...toolList);\r\n                common.processingElementPosition(this.#elementMap.toolbar, window.getSelection().getRangeAt(0).getBoundingClientRect())\r\n            }else{\r\n                this.#elementMap.toolbar.remove();\r\n            }\r\n        })\r\n        this.#elementMap.noticeBoardDetailContainer.addEventListener(\"scroll\", () => {\r\n\t\t\tif(this.#elementMap.toolbar.childElementCount == 0)return;\r\n\t\t\tcommon.processingElementPosition(this.#elementMap.toolbar, window.getSelection().getRangeAt(0).getBoundingClientRect());\r\n\t\t});\r\n        window.addEventListener('resize', (event) => {\r\n\t\t\tif(this.#elementMap.toolbar.childElementCount == 0)return;\r\n            common.processingElementPosition(this.#elementMap.toolbar, window.getSelection().getRangeAt(0).getBoundingClientRect());\r\n\t\t})\r\n    }\r\n\r\n    createItemElement(data){\r\n        return new Promise(resolve=>{\r\n            let li = Object.assign(document.createElement('li'),{\r\n                className : 'notice_board_detail_item'\r\n            });\r\n            li.dataset.is_not_visible_target = '';\r\n            li.style.minHeight = (parseInt(window.getComputedStyle(document.body).fontSize) || 16) * 2 + 'px';\r\n            \r\n            resolve(this.#addItemEvent(li, data));\r\n        })\r\n    }\r\n\r\n    #addItemEvent(li, data){\r\n        return new Promise(resolve=> {\r\n            let addButton = Object.assign(document.createElement('button'), {\r\n                className: 'notice_board_detail_item_add_content',\r\n                textContent: '+'\r\n            });\r\n            let editor = new NoticeBoardLine(li, this);\r\n            let positionChangeIcon = Object.assign(document.createElement('span'),{\r\n                className: 'notice_board_detail_item_position_change_icon pointer',\r\n                textContent: '〓'\r\n            })\r\n\r\n            let datasetPromise = common.jsonToSaveElementDataset(data, li);\r\n            //console.log(data.content);\r\n            if(data.content){\r\n                let {content} = data;\r\n                delete data.content;\r\n                datasetPromise.then(() => {\r\n                    li.removeAttribute('data-content');\r\n                    \r\n                    editor.parseLowDoseJSON(content).then(() => {\r\n                        editor.contentEditable = false;\r\n                        li.append(editor);\r\n                        let appendAwait = setInterval(()=>{\r\n                            if( ! editor.isConnected) return;\r\n                            clearInterval(appendAwait);\r\n                            if( ! editor.isEmpty){\r\n                                li.append(positionChangeIcon)\r\n                            }else {\r\n                                editor.remove();\r\n                                li.prepend(addButton);\r\n                            }\r\n                        },50)\r\n                    })\r\n                })\r\n            }else{\r\n                li.prepend(addButton);\r\n                editor.startFirstLine();\r\n            }\r\n            li.onmouseenter = () => {\r\n                if(addButton.isConnected){\r\n                    addButton.classList.add('active');\r\n                    return;\r\n                }\r\n                li.draggable = false;\r\n            }\r\n            li.onmouseleave = () => {\r\n                if(addButton.isConnected){\r\n                    addButton.classList.remove('active');\r\n                    return;\r\n                }\r\n            }\r\n            //let isPositionChangeIconOver = false;\r\n            positionChangeIcon.onmousemove = () => {\r\n                li.draggable = true;\r\n            }\r\n            positionChangeIcon.onmouseover = () => {\r\n                //isPositionChangeIconOver = true;\r\n                li.draggable = true;\r\n            }\r\n            positionChangeIcon.onmouseout = () => {\r\n                //isPositionChangeIconOver = false;\r\n                li.draggable = false;\r\n            }\r\n\r\n            addButton.onclick = (event) => {\r\n                //console.log(event, editor.isConnected);\r\n                editor.contentEditable = true;\r\n                editor.firstLine.innerText = '\\n'\r\n                if(editor.isConnected){\r\n                    return;\r\n                }\r\n                li.append(editor);\r\n                li.append(positionChangeIcon);\r\n                addButton.remove();\r\n                window.getSelection().setPosition(editor, editor.childNodes.length);\r\n            }\r\n            let prevText;\r\n            editor.onclick = () => {\r\n                if(editor.contentEditable == 'false'){\r\n                    editor.contentEditable = true;\r\n                    if(editor.isEmpty){\r\n                        editor.firstLine.innerText = '\\n'\r\n                    }\r\n                    window.getSelection().setPosition(editor, editor.childNodes.length);\r\n                }\r\n            }\r\n            editor.onfocus = (event) => {\r\n                prevText = editor.innerHTML;\r\n            }\r\n            let isScriptBlur = false;\r\n            editor.onblur = (event) => {\r\n                if( ! isScriptBlur && (editor.matches(':hover') || this.#elementMap.toolbar.matches(':hover') || document.activeElement == editor)){\r\n                    return;\r\n                }\r\n                if(isScriptBlur){\r\n                    isScriptBlur = ! isScriptBlur;\r\n                }\r\n                this.#elementMap.toolbar.remove();\r\n                editor.contentEditable = false;\r\n                if( ! event.relatedTarget?.hasAttribute('data-tool_status')){\r\n                    this.#elementMap.toolbar.remove();\r\n                }\r\n                if(editor.isEmpty){\r\n                    editor.replaceChildren();\r\n                    editor.remove();\r\n                    positionChangeIcon.remove();\r\n                    li.prepend(addButton);\r\n                    if(li.matches(':hover')){\r\n                        addButton.classList.add('active');\r\n                    }else{\r\n                        addButton.classList.remove('active');\r\n                    }\r\n                    //return ;\r\n                }else if(prevText == editor.innerHTML){\r\n                    return;\r\n                }\r\n                prevText = editor.innerHTML;\r\n                \r\n                let param = {\r\n                    id: li.dataset.id,\r\n                    noticeBoardId: noticeBoardHandler.noticeBoardId,\r\n                    roomId: roomHandler.roomId,\r\n                    workspaceId: workspaceHandler.workspaceId,\r\n                    orderSort: li.dataset.order_sort //([...this.#elementMap.noticeBoardDetailList.children].findIndex(e=>e==li) - 1) * -1,\r\n                };\r\n                this.#uploadNoticeBoard(editor, param);\r\n            }\r\n            editor.onkeydown = (event) => {\r\n                let {altKey, ctrlKey, shiftKey, key} = event;\r\n                if(key == 'Enter' && (altKey || ctrlKey || shiftKey)){\r\n                    event.preventDefault();\r\n                    let LineBreakMode;\r\n                    if(altKey){\r\n                        LineBreakMode = FreeWillEditor.LineBreakMode.NEXT_LINE_FIRST\r\n                    }else if(ctrlKey){\r\n                        LineBreakMode = FreeWillEditor.LineBreakMode.NEXT_LINE_LAST\r\n                    }else{\r\n                        LineBreakMode = FreeWillEditor.LineBreakMode.NO_CHANGE\r\n                    }\r\n                    editor.lineBreak(LineBreakMode);\r\n                }else if(key == 'Enter'){// && editor.innerText.replaceAll('\\n', '') != ''){\r\n                    event.preventDefault();\r\n                    isScriptBlur = true;\r\n                    editor.blur();\r\n                }\r\n            }\r\n\r\n            resolve(li);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {NoticeBoardLine} editor \r\n     * @param {Object} param\r\n     */\r\n    async #uploadNoticeBoard(editor, param){\r\n        let promiseList = [];\r\n\r\n        editor.contentEditable = false;\r\n        editor.getLowDoseJSON(editor, {\r\n            afterCallback : (json) => {\r\n                if(json.tagName != Image.toolHandler.defaultClass && \r\n                    json.tagName != Video.toolHandler.defaultClass &&\r\n                    json.tagName != Resources.toolHandler.defaultClass\r\n                ){\r\n                    return;\r\n                }else if(json.data.hasOwnProperty('is_upload_end')){\r\n                    return;\r\n                }\r\n                let node = json.node;\r\n                let file = node.selectedFile;\r\n                json.data.is_loading = '';\r\n                console.log(node, file);\r\n                let fileType;\r\n                if(json.tagName == Image.toolHandler.defaultClass){\r\n                    fileType = 'IMAGE';\r\n                }else if(json.tagName == Video.toolHandler.defaultClass){\r\n                    fileType = 'VIDEO';\r\n                }else {\r\n                    fileType = 'FILE';\r\n                }\r\n                promiseList.push(new Promise(async resolve => {\r\n\r\n                    let {name, size, lastModified, contentType, newFileName} = await common.underbarNameToCamelName(json.data);\r\n                    let putSignData = `${roomHandler.roomId}:${workspaceHandler.workspaceId}:${name}:${accountHandler.accountInfo.accountName}`;\r\n                    let isUpload = await s3EncryptionUtil.callS3PresignedUrl(window.myAPI.s3.generatePutObjectPresignedUrl, putSignData, {newFileName, fileType, uploadType: 'NOTICE'})\r\n                    .then( (result) => {\r\n                        if(! result){\r\n                            return;\r\n                        }\r\n                        let {data, encDncKeyPair} = result;\r\n\r\n                        json.data.new_file_name = data.newFileName;\r\n\r\n                        return Promise.all([\r\n                            s3EncryptionUtil.convertBase64ToBuffer(data.encryptionKey).then( async (buffer) => {\r\n                                return s3EncryptionUtil.decryptMessage(encDncKeyPair.privateKey, buffer, s3EncryptionUtil.secretAlgorithm)\r\n                                    .then(buf=>String.fromCharCode(...new Uint8Array(buf)))\r\n                            }),\r\n                            s3EncryptionUtil.convertBase64ToBuffer(data.encryptionMd).then( async (buffer) => {\r\n                                return s3EncryptionUtil.decryptMessage(encDncKeyPair.privateKey, buffer, s3EncryptionUtil.secretAlgorithm)\r\n                                    .then(buf=>String.fromCharCode(...new Uint8Array(buf)))\r\n                            })\r\n                        ]).then( async ([k,m]) => {\r\n                            /*let base64 = json.data.base64;\r\n                            if(! base64){\r\n                                let blob = await fetch(json.data.url).then(res=>res.blob())\r\n                                base64 = await new Promise(resolve => {\r\n                                    const reader = new FileReader();\r\n                                    reader.readAsDataURL(blob);\r\n                                    reader.onloadend = () => {\r\n                                        resolve(reader.result);\r\n                                    }\r\n                                });\r\n                            }*/\r\n                            let res = await s3EncryptionUtil.fetchPutObject(data.presignedUrl, k, m, file.files[0]);\r\n                            if( ! (res.status == 200 || res.status == 201) ){\r\n                                return;\r\n                            }\r\n                            return true;\r\n                        })\r\n                    })\r\n                    console.log(isUpload);\r\n                    if( ! isUpload){\r\n                        resolve();\r\n                        return;\r\n                    }\r\n                    let getSignData = `${roomHandler.roomId}:${workspaceHandler.workspaceId}:${json.data.new_file_name}:${accountHandler.accountInfo.accountName}`;\r\n                    \r\n                    s3EncryptionUtil.callS3PresignedUrl(window.myAPI.s3.generatePutObjectPresignedUrl, getSignData, {fileType, uploadType: 'NOTICE'})\r\n                    .then( (result) => {\r\n                        if(! result){\r\n                            return;\r\n                        }\r\n                        let {data, encDncKeyPair} = result;\r\n\r\n                        json.data.url = data.presignedUrl;\r\n                        delete json.data.base64\r\n                        json.data.upload_type = 'NOTICE';\r\n                        resolve(json);\r\n                    })\r\n                }))\r\n            }\r\n        }).then(jsonList => {\r\n\r\n            param.content = JSON.stringify(jsonList);\r\n            if(param.content.length == 0) param.content = undefined\r\n            window.myAPI.noticeBoard.createNoticeBoardDetail(param).then(res=>{\r\n                let {data} = res\r\n                this.innerText = '';\r\n                Promise.all(promiseList).then((fileTargetList) => {\r\n                    console.log(fileTargetList);\r\n                    if(fileTargetList.length == 0){\r\n                        //window.getSelection().setPosition(this, 1)\r\n                        return;\r\n                    }\r\n                    fileTargetList.forEach(e=>{\r\n                        delete e.data.is_loading\r\n                        e.data.is_upload_end = '';\r\n                    });\r\n                    param.content = JSON.stringify(jsonList);\r\n                    if(param.content.length == 0) param.content = undefined\r\n                    window.myAPI.noticeBoard.createNoticeBoardDetail(param).then(response=>{\r\n                        //window.getSelection().setPosition(this, 1)\r\n                    });\r\n                })\r\n            });\r\n            \r\n        })\r\n    }\r\n\r\n    #callData(){\r\n        return window.myAPI.noticeBoard.searchNoticeBoardDetailList({\r\n            workspaceId: workspaceHandler.workspaceId, \r\n            roomId: roomHandler.roomId,\r\n            noticeBoardId : noticeBoardHandler.noticeBoardId\r\n        })\r\n    }\r\n\r\n    #addMemory(data, workspaceId, roomId, noticeBoardId, id){\r\n\t\tif( ! this.#memory.hasOwnProperty(workspaceId)){\r\n\t\t\tthis.#memory[workspaceId] = {};\r\n\t\t}\r\n\t\tif( ! this.#memory[workspaceId].hasOwnProperty(roomId)){\r\n\t\t\tthis.#memory[workspaceId][roomId] = {} ;\r\n\t\t}\r\n        if( ! this.#memory[workspaceId][roomId].hasOwnProperty(noticeBoardId)){\r\n            this.#memory[workspaceId][roomId][noticeBoardId] = {}\r\n        }\r\n        \r\n        this.#memory[workspaceId][roomId][noticeBoardId][id] = data;\r\n\t\t\r\n    }\r\n    async refresh(){\r\n        let list = Object.values(this.#memory[workspaceHandler.workspaceId]?.[roomHandler.roomId]?.[noticeBoardHandler.noticeBoardId] || {})\r\n        .sort((a,b) => Number(b.dataset.order_sort) - Number(a.dataset.order_sort));\r\n        if(list.length == 0){\r\n            this.#callData();\r\n            return;\r\n        }\r\n        this.#positionChanger.addPositionChangeEvent(list);\r\n        this.#elementMap.noticeBoardDetailList.replaceChildren(...list);  \r\n\r\n\t}\r\n\r\n\tget element(){\r\n\t\treturn this.#element;\r\n\t}\r\n\t\r\n\tget elementMap(){\r\n\t\treturn this.#elementMap;\r\n\t}\r\n}","\r\nexport default new class ChattingHandler{\r\n\t#lastChattingId;\r\n\t#lastChatting;\r\n    #addChattingEventListener = {};\r\n    constructor(){\r\n\t\twindow.myAPI.event.electronEventTrigger.addElectronEventListener('chattingAccept', data => {\r\n\t\t\tlet {content} = data;\r\n\t\t\t//let {id, accountId, accountName, chatting, createAt, createBy, roomId, updateAt, updateBy} = data.content;\r\n\t\t\tthis.#lastChattingId = content.id;\r\n\t\t\tthis.#lastChatting = content;\r\n\t\t\t/*\r\n\t\t\tdata:\"{\\\"id\\\":null,\\\"accountId\\\":null,\\\"accountName\\\":\\\"test\\\",\\\"roomId\\\":null,\\\"chatting\\\":\\\"[{\\\\\\\"type\\\\\\\":1,\\\\\\\"name\\\\\\\":\\\\\\\"Line\\\\\\\",\\\\\\\"data\\\\\\\":{},\\\\\\\"cursor_offset\\\\\\\":\\\\\\\"10\\\\\\\",\\\\\\\"cursor_type\\\\\\\":\\\\\\\"3\\\\\\\",\\\\\\\"cursor_index\\\\\\\":\\\\\\\"0\\\\\\\",\\\\\\\"cursor_scroll_x\\\\\\\":null,\\\\\\\"cursor_scroll_y\\\\\\\":\\\\\\\"0\\\\\\\",\\\\\\\"childs\\\\\\\":[{\\\\\\\"type\\\\\\\":3,\\\\\\\"name\\\\\\\":\\\\\\\"Text\\\\\\\",\\\\\\\"text\\\\\\\":\\\\\\\"qweasdxzxc\\\\\\\"}]}]\\\",\\\"createAt\\\":null,\\\"createBy\\\":null,\\\"updateAt\\\":null,\\\"updateBy\\\":null}\"\r\n\t\t\tlastEventId: \"\"\r\n\t\t\torigin: \"http://localhost:8079\"\r\n\t\t\ttype: \"message\"\r\n\t\t\t*/\r\n\t\t\t\r\n\t\t\tObject.values(this.#addChattingEventListener).forEach(async callBack => {\r\n                new Promise(res => {\r\n                    callBack(content);\r\n                    res();\r\n                })\r\n            });\r\n\t\t});\r\n    }\r\n\r\n    set addChattingEventListener({name, callBack}){\r\n        this.#addChattingEventListener[name] = callBack;\r\n    }\r\n\r\n    get addChattingEventListener(){\r\n        return this.#addChattingEventListener;\r\n    }\r\n\r\n\tget lastChattingId(){\r\n\t\treturn Number(this.#lastChattingId);\r\n\t}\r\n\r\n\tget lastChatting(){\r\n\t\treturn Number(this.#lastChatting);\r\n\t}\r\n\r\n}\r\n","/**\r\n * indexedDB 템플릿 (미완성)\r\n * @author mou123\r\n * @constructor\r\n */\r\nexport default class IndexedDBHandler{\r\n\t/**\r\n\t * indexed db에서 사용할 db 식별 명칭\r\n\t */\r\n\t#dbName;\r\n\r\n\t/**\r\n\t * indexed db의 store에서 사용 할 컬럼 정보\r\n\t */\r\n\t#columnInfo;\r\n\r\n\t/**\r\n\t * store 식별 명칭\r\n\t */\r\n\t#storeName;\r\n\r\n\t#db;\r\n\r\n\tisOpen = false;\r\n\r\n\t#container;\r\n\r\n\t#keyPathNameList\r\n\r\n\t#pkAutoIncrement\r\n\r\n\t/**\r\n\t * 생성자\r\n\t * @author mozu123\r\n\t * @example \t\r\n\t#columnInfo = {\r\n\t\tboTempId:['boTempId','boTempId',{unique : true}],\r\n\t\tboTempName:['boTempName','boTempName'],\r\n\t\tboTempInsertTime:['boTempInsertTime','boTempInsertTime'],\r\n\t\tboTempData:['boTempData','boTempData']\r\n\t};\r\n\t */\r\n\tconstructor({\r\n\t\tdbName = undefined,\r\n\t\tcolumnInfo = undefined,\r\n\t\tstoreName = undefined,\r\n\t\tkeyPathNameList = [],\r\n\t\tpkAutoIncrement = true\r\n\t}){\r\n\t\tif( ! dbName ){\r\n\t\t\tthrow new Error('dbName is undefined');\r\n\t\t}else if( ! columnInfo ){\r\n\t\t\tthrow new Error('columnInfo is undefined');\r\n\t\t}else if( ! storeName ){\r\n\t\t\tthrow new Error('storeName is undefined')\r\n\t\t}else if( keyPathNameList.length == 0 ){\r\n\t\t\tthrow new Error('keyPathName is undefined')\r\n\t\t}else if(keyPathNameList.filter(e=>columnInfo[e]).length != keyPathNameList.length){\r\n\t\t\tthrow new Error('invalid key path name')\r\n\t\t}else if(pkAutoIncrement == true && keyPathNameList.length > 1){\r\n\t\t\tthrow new Error('multiple key not use autoIncrement : true');\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.#dbName = dbName;\r\n\t\t\tthis.#columnInfo = columnInfo;\r\n\t\t\tthis.#storeName = storeName;\t\r\n\t\t\tthis.#container = JSON.stringify(\r\n\t\t\t\tObject.entries(columnInfo).reduce((obj, [k,v], idx) => {\r\n\t\t\t\t\tobj[k] = undefined;\r\n\t\t\t\t\treturn obj;\r\n\t\t\t\t}, {})\r\n\t\t\t)\r\n\t\t\tthis.#keyPathNameList = keyPathNameList;\r\n\t\t\tthis.#pkAutoIncrement = pkAutoIncrement;\r\n\t\t}\r\n\t}\r\n\r\n\topen(){\r\n\t\treturn new Promise( (resolve, reject) => {\r\n\r\n\t\t\tconst dbOpenRequest = indexedDB.open(this.DB_NAME);\r\n\t\t\t/**\r\n\t\t\t * db open시 기존 버전 정보를 비교하였을 때, 업그레이드가 필요한 경우 동작하는 이벤트를 정의한다.\r\n\t\t\t * @author mozu123\r\n\t\t\t * @param {Event} e \r\n\t\t\t * @returns \r\n\t\t\t * @see this.upgradeneeded()\r\n\t\t\t */\r\n\t\t\tdbOpenRequest.onupgradeneeded = (e) => this.upgradeneeded(e,{});\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * db open시 동작하는 이벤트를 정의한다.\r\n\t\t\t * @param {Event} e \r\n\t\t\t */\r\n\t\t\tdbOpenRequest.onsuccess = (e) => {\r\n\r\n\t\t\t\tthis.isOpen = true;\r\n\t\t\t\tthis.#db = e.target.result;\r\n\t\t\t\tlet storeName = Object.entries(this.#db.objectStoreNames).find(([idx, storeName]) => storeName == this.DB_STORE_NAME)\r\n\t\t\t\tlet isNewAddStore = ! storeName;\r\n\r\n\t\t\t\tlet isNeedChangeIndex = false;\r\n\r\n\t\t\t\tif( ! isNewAddStore){\r\n\t\t\t\t\tlet store = this.#db.transaction(this.DB_STORE_NAME, 'readwrite').objectStore(this.DB_STORE_NAME);\r\n\t\t\t\t\tlet indexNamesMapper = Object.entries(store.indexNames).reduce((t,[idx,indexName])=>{\r\n\t\t\t\t\t\tt[indexName]=idx\r\n\t\t\t\t\t\treturn t;\r\n\t\t\t\t\t},{});\r\n\t\t\t\t\tisNeedChangeIndex = \r\n\t\t\t\t\t\tObject.entries(indexNamesMapper).findIndex(([name,idx]) => ! this.#columnInfo[name] ) != -1 ||\r\n\t\t\t\t\t\tObject.entries(this.#columnInfo).findIndex(([k,v])=> ! indexNamesMapper[k] ) != -1\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif( isNewAddStore || isNeedChangeIndex ){\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet newVersion = Number(this.#db.version) + 1;\r\n\t\t\t\t\tconsole.log(this.#storeName, newVersion);\r\n\t\t\t\t\t// 기존 버전과 비교하였을 때 변경사항이 있어서 업그레이드(기존 정보 마이그레이션)가 필요 한 경우\r\n\t\t\t\t\tconsole.log(dbOpenRequest);\r\n\t\t\t\t\tthis.close().then( closeResult => {\r\n\t\t\t\t\t\tconst secondOpenRequest = indexedDB.open(this.DB_NAME, newVersion);\r\n\t\t\t\t\t\tconsole.log(secondOpenRequest)\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * DB에 변동사항이 생겨 업그레이드가 필요하다면, 기존 db를 닫은 후 다시 열어서 신규 정보를 업그레이드 하는 이벤트가 동작하도록 한다.\r\n\t\t\t\t\t\t * @author mozu123\r\n\t\t\t\t\t\t * @param {Event} event \r\n\t\t\t\t\t\t * @returns \r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tsecondOpenRequest.onupgradeneeded = (event) => this.upgradeneeded(event, {isNewAddStore:isNewAddStore});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * 위에 입력된 로직에 따라 업그레이드가 완료된 경우 이 이벤트가 동작한다.\r\n\t\t\t\t\t\t * @author mozu123\r\n\t\t\t\t\t\t * @param {Event} event \r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tsecondOpenRequest.onsuccess = (event) => {\r\n\t\t\t\t\t\t\tthis.isOpen = true;\r\n\t\t\t\t\t\t\tthis.#db = event.target.result;\r\n\t\t\t\t\t\t\tresolve(this.isOpen);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsecondOpenRequest.onblocked = (e) => {\r\n\t\t\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tresolve(this.isOpen);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdbOpenRequest.onblocked = (e) => {\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * db open시 어떤 이유로 인해 오류가 발생할 때 동작하는 이벤트\r\n\t\t\t * @param {Event} e \r\n\t\t\t */\r\n\t\t\tdbOpenRequest.onerror = (e) => {\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t\tthis.isOpen = false;\r\n\t\t\t\tif(e.target.error.name == 'VersionError'){\r\n\t\t\t\t\t//error code\r\n\t\t\t\t\treject(new Error('VersionError: DB 버전을 수동으로 입력해선 안됩니다.'));\r\n\t\t\t\t}else{\r\n\t\t\t\t\t//error code\r\n\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\treject(new Error(`unknownError ${e}`))\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tclose(){\r\n\t\treturn new Promise( resolve => {\r\n\t\t\tif( ! this.#db || ! this.isOpen){\r\n\t\t\t\tresolve(false)\r\n\t\t\t}\r\n\t\t\tthis.#db.onabort = (e) => console.log(e)\r\n\t\t\tthis.#db.onerror = (e) => console.log(e);\r\n\t\t\tthis.#db.close();\r\n\t\t\tthis.isOpen = false;\r\n\t\t\tthis.#db.onclose = (event) => {\r\n\t\t\t\tthis.isOpen = false;\r\n\t\t\t\tresolve(true)\r\n\t\t\t}\r\n\t\t\tresolve(true);\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * DB NAME을 가져오는 getter\r\n\t * @author mou123\r\n\t */\r\n\tget DB_NAME(){\r\n\t\treturn this.#dbName;\r\n\t}\r\n\r\n\t/**\r\n\t * @author mou123\r\n\t */\r\n\tget DB_STORE_NAME(){\r\n\t\treturn this.#storeName;\r\n\t}\r\n\r\n\tget COLUMN_INFO(){\r\n\t\treturn this.#columnInfo;\r\n\t}\r\n\r\n\tget template(){\r\n\t\treturn JSON.parse(this.#container);\r\n\t}\r\n\r\n\t/**\r\n\t * indexed DB를 open 할 때 업그레이드 필요 여부에 따라 동작하는 함수를 정의한다.\r\n\t * @author mou123\r\n\t * @param {Event} event \r\n\t * @param {Object} isNewAddStore : 새롭게 등록되어야 할 store인지 여부 \r\n\t */\r\n\tupgradeneeded(event,{isNewAddStore=false}){\r\n\r\n\t\tlet objectStore;\r\n\t\t// newVersion이 oldVersion과 같지 않고 && oldVersion이 0이 아니며 *(최초 오픈시 0임) && 신규 store를 등록하는 것이 아니라면\r\n\t\tif(event.newVersion != event.oldVersion && event.oldVersion != 0 && ! isNewAddStore){\r\n\t\t\tobjectStore = event.target.transaction.objectStore(this.DB_STORE_NAME);\r\n\t\t\tlet indexNameList = Object.entries(objectStore.indexNames);\r\n\t\t\tlet oldIndexCheckMapper = indexNameList.reduce((t,[idx,indexName])=>{\r\n\t\t\t\tt[indexName]=idx\r\n\t\t\t\treturn t;\r\n\t\t\t},{});\r\n\t\t\t\r\n\t\t\tObject.entries(this.#columnInfo).forEach(([indexName, column])=>{\r\n\t\t\t\tif( ! oldIndexCheckMapper[ column[0] ]){\r\n\t\t\t\t\tobjectStore.createIndex(...column);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tindexNameList.forEach(([k,indexName])=>{\r\n\t\t\t\tif( ! this.#columnInfo[indexName]){\r\n\t\t\t\t\tobjectStore.deleteIndex(indexName);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}else{\r\n\t\t\t//let keyPath = Object.values(this.#columnInfo).find(column => column.some(e=>e.unique))[0];\r\n\t\t\tlet keyPath = this.#pkAutoIncrement || this.#keyPathNameList.length == 1 ? this.#keyPathNameList[0] : this.#keyPathNameList\r\n\t\t\tobjectStore = event.target.result.createObjectStore(this.DB_STORE_NAME, { keyPath , autoIncrement : this.#pkAutoIncrement });\r\n\t\t\tObject.entries(this.#columnInfo).forEach( ([indexName, column]) => objectStore.createIndex(...column) );\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * indexed db에 데이터를 저장하는 함수\r\n\t * @param {Object} data : indexed db에 저장할 데이터 \r\n\t * @returns {Promise}\r\n\t */\r\n\taddItem(data = this.#container){\r\n\t\treturn new Promise( (resolve, reject ) => {\r\n\t\t\tif( ! this.isOpen || ! this.#db){\r\n\t\t\t\treject(new Error('indexedDB가 열려있지 않습니다.'));\r\n\t\t\t}\r\n\t\t\tlet transaction = this.#db.transaction(this.DB_STORE_NAME, 'readwrite')\r\n\t\t\tlet store = transaction.objectStore(this.DB_STORE_NAME);\r\n\t\t\tlet request = store.put(data);\r\n\t\t\trequest.onsuccess = (e) => {\r\n\t\t\t\ttransaction.commit();\r\n\t\t\t}\r\n\t\t\trequest.onerror = (e) => {\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t}\r\n\t\t\ttransaction.oncomplete = (e)=>{\r\n\t\t\t\tif(e.type == 'complete'){\r\n\t\t\t\t\t//alert('임시 저장을 완료하였습니다.');\r\n\t\t\t\t\t//console.log(e.type);\r\n\t\t\t\t}\r\n\t\t\t\tresolve(e);\r\n\t\t\t}\r\n\t\t\ttransaction.onerror = (e)=>{\r\n\t\t\t\t//error code\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t\treject(new Error('commit error'))\r\n\t\t\t}\r\n\t\t\t//return resolve();\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * 임시 저장 버튼 클릭시 동작할 함수\r\n\t * @author mozu123\r\n\t * @param {Object} data \r\n\t */\r\n\t/*tempSaveButtonClickEvent(data){\r\n\t\tif( ! data){\r\n\t\t\tthrow new Error('임시 저장 할 데이터가 비어 있습니다.');\r\n\t\t}\r\n\t\tlet boTempName = window.prompt('임시 저장 내용을 식별할 명칭을 지정해주세요.\\n입력하지 않을시 현재 시간으로 저장됩니다.', new Date().toLocaleString());\r\n\t\tthis.addTempItem(data, boTempName);\r\n\t}*/\r\n\r\n\t/**\r\n\t * 임시 저장 목록에서 특정 조건을 만족하는 데이터만 추출할 떄 사용 할 함수 -> 미완성 (안만듬)\r\n\t * @param {Object} param0 : 필터 검색 조건 데이터 \r\n\t * @returns \r\n\t */\r\n\t//getTempFilterList({boTempId, boTempName, boTempInsertTime, pageNum=1, pageSize=5, startDateTime, endDateTime}){}\r\n\t\r\n\tgetItem(key){\r\n\t\treturn new Promise( (resolve, reject) => {\r\n\t\t\tlet transaction = this.#db.transaction(this.DB_STORE_NAME, 'readonly');\r\n\t\t\tlet objectStore = transaction.objectStore(this.DB_STORE_NAME);\r\n\t\t\tlet request = objectStore.get(key);\r\n\t\t\trequest.onerror = (event) => {\r\n\t\t\t\tconsole.error(event);\r\n\t\t\t\treject(request);\r\n\t\t\t}\r\n\r\n\t\t\trequest.onsuccess = (event) => {\r\n\t\t\t\tresolve(request);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * 임시 저장 목록을 불러오는 함수 pageNum의 기본값은 1, pageSize의 기본값은 5\r\n\t * @author mozu123\r\n\t * @param {Object} param0 : 페이지 정보를 가지고 있는 객체\r\n\t */\r\n\tgetList({pageNum=1, pageSize=5, callback, readOption = 'readonly'} = {}){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\r\n\t\t\tlet start = (pageSize * (pageNum - 1));\r\n\t\t\tlet isEnableAdvanced = start != 0; \r\n\t\t\tlet count = 0;\r\n\t\t\tlet transaction = this.#db.transaction(this.DB_STORE_NAME, readOption)\r\n\t\t\tlet store = transaction.objectStore(this.DB_STORE_NAME);\r\n\t\t\tlet result = {\r\n\t\t\t\tdata:[],\r\n\t\t\t\tevent:undefined\r\n\t\t\t};\r\n\t\t\tlet cursorRequest = store.openCursor()\r\n\t\t\tcursorRequest.onsuccess = (event) => {\r\n\t\t\t\tconst cursor = event.target.result;\r\n\t\t\t\tif( ! cursor ){\r\n\t\t\t\t\treturn ;\r\n\t\t\t\t}else if(isEnableAdvanced){\r\n\t\t\t\t\tisEnableAdvanced = ! isEnableAdvanced\r\n\t\t\t\t\tcursor.advance(start);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(callback instanceof Function){\r\n\t\t\t\t\tcallback(cursor);\r\n\t\t\t\t}\r\n\t\t\t\tlet value = cursor.value;\r\n\t\t\t\tresult.data.push(value);\r\n\t\t\t\tcount += 1;\r\n\t\t\t\t\r\n\t\t\t\tif(count >= pageSize){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcursor.continue();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\ttransaction.oncomplete = (event) => {\r\n\t\t\t\tresult.event = event;\r\n\t\t\t\treturn resolve(result);\r\n\t\t\t}\r\n\t\t\ttransaction.onerror = (e) => reject(e);\r\n\t\t\ttransaction.onabort = (e) => reject(e);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * 임시 저장 목록 중 특정 row를 삭제하는 함수\r\n\t * @author mozu123\r\n\t * @param  {...String} idList : 삭제 할 id 목록\r\n\t * @returns {Promise} result : 삭제 몇건 했는지 count 한 정보를 담은 Object\r\n\t */\r\n\tdeleteList(...idList){\r\n\t\tif(idList.length == 0){\r\n\t\t\treturn Promise.resolve()\r\n\t\t}\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tlet transaction = this.#db.transaction(this.DB_STORE_NAME, 'readwrite')\r\n\t\t\tlet store = transaction.objectStore(this.DB_STORE_NAME);\r\n\t\t\tlet result = {successCount:0, failedCount:0};\r\n\t\t\tidList.forEach(id=>{\r\n\t\t\t\tlet request = store.delete([id]);\r\n\t\t\t\trequest.onsuccess = (e)=>{\r\n\t\t\t\t\tresult.successCount += 1;\r\n\t\t\t\t\ttransaction = e.target.transaction;\r\n\t\t\t\t}\r\n\t\t\t\trequest.onerror = (e)=>{\r\n\t\t\t\t\tresult.failedCount += 1;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\ttransaction.commit();\r\n\t\t\ttransaction.oncomplete = (event) => {\r\n\t\t\t\tresult.event = event;\r\n\t\t\t\treturn resolve(result);\r\n\t\t\t}\r\n\t\t\ttransaction.onerror = (e) => reject(e);\r\n\t\t\ttransaction.onabort = (e) => reject(e);\r\n\t\t})\r\n\t}\r\n\r\n\tdeleteDatabase(dbName){\r\n\t\treturn new Promise( (resolve, reject) => {\r\n\t\t\t\r\n\t\t\tlet deleteReuqest = indexedDB.deleteDatabase(dbName);\r\n\t\t\tdeleteReuqest.onerror = (event) => {\r\n\t\t\t\tconsole.error(event);\r\n\t\t\t\treject(event);\r\n\t\t\t}\r\n\t\t\tdeleteReuqest.onsuccess = (event) => {\r\n\t\t\t\tconsole.log(event);\r\n\t\t\t\tresolve(event);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n}","/**\r\n * web용\r\n */\r\nimport { ipcRenderer, myAPI } from \"./../../../browser/preload/preload\"\r\nwindow.myAPI = myAPI;\r\n\r\nimport noticeBoardHandler from \"@handler/notice_board/NoticeBoardHandler\"\r\n\r\nimport noticeBoardDetail from \"@component/notice_board/notice_board_item/NoticeBoardDetail\"\r\n\r\nimport roomHandler from \"@handler/room/RoomHandler\"\r\nimport chattingHandler from \"@handler/chatting/ChattingHandler\"\r\nimport workspaceHandler from \"@handler/workspace/WorkspaceHandler\"\r\n\r\nimport Image from \"@handler/editor/tools/Image\"\r\nimport Video from \"@handler/editor/tools/Video\"\r\nimport Resources from \"@handler/editor/tools/Resources\"\r\n\r\nimport { accountHandler } from \"@handler/account/AccountHandler\"\r\nimport { s3EncryptionUtil } from \"@handler/S3EncryptionUtil\"\r\nimport IndexedDBHandler from \"@handler/IndexedDBHandler\"\r\n\r\nimport common from \"@root/js/common\";\r\n\r\nwindow.addEventListener('load', async () => {\r\n\r\n\tconst indexedDBHandler = new IndexedDBHandler({\r\n\t\tdbName: 'fileDB-main-page',\r\n\t\tstoreName: `s3Memory-main-page`,\r\n\t\tcolumnInfo: {\r\n\t\t\tfileName: ['fileName', 'fileName', {unique : true}],\r\n\t\t\toriginFileName: ['originFileName', 'originFileName'],\r\n\t\t\tfileData : ['fileData', 'fileData'],\r\n\t\t\tlastModified: ['lastModified', 'lastModified'],\r\n\t\t\tuploadType: ['uploadType', 'uploadType'],\r\n\t\t\troomId: ['roomId', 'roomId'],\r\n\t\t\tworkspaceId: ['workspaceId', 'workspaceId']\r\n\t\t},\r\n\t\tkeyPathNameList: ['fileName'],\r\n\t\tpkAutoIncrement : false\r\n\t});\r\n\tconst dbOpenPromise = indexedDBHandler.open();\r\n\r\n\tconst imageOrVideoCallback = async (targetTools) => {\r\n\t\tif(targetTools.hasAttribute('data-is_loading')){\r\n\t\t\tlet uploadLoading = targetTools.querySelector('[data-upload_loading]');\r\n\t\t\tif( ! uploadLoading){\r\n\t\t\t\tuploadLoading = Object.assign(document.createElement('div'), {\r\n\t\t\t\t\tclassName: 'upload_loading',\r\n\t\t\t\t\tinnerHTML: `\r\n\t\t\t\t\t<div class=\"upload_loading_container\">\r\n\t\t\t\t\t\t<span>컨텐츠를 업로드 중입니다</span>\r\n\t\t\t\t\t\t<span class=\"status_text_elipsis\" data-status_text_elipsis></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t`\r\n\t\t\t\t})\r\n\t\t\t\tuploadLoading.dataset.upload_loading = '';\r\n\t\t\t}else{\r\n\t\t\t\tuploadLoading.className = 'upload_loading'\r\n\t\t\t\tuploadLoading.querySelector('[data-status_text_elipsis]').className = 'upload_loading'; \r\n\t\t\t}\r\n\t\t\ttargetTools.append(uploadLoading);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\r\n\t\tlet fileType;\r\n\t\tif(targetTools.constructor == Image){\r\n\t\t\tfileType = 'IMAGE';\r\n\t\t}else if(targetTools.constructor == Video){\r\n\t\t\tfileType = 'VIDEO';\r\n\t\t}else{\r\n\t\t\tfileType = 'FILE';\r\n\t\t}\r\n\t\tconst isHasRememberFile = await new Promise(resolve => {\r\n\t\t\t/*if(targetTools.constructor == Resources){\r\n\t\t\t\tresolve({result: undefined});\r\n\t\t\t}*/\r\n\t\t\tdbOpenPromise.then(() => {\r\n\t\t\t\tnew Promise(res=>{\r\n\t\t\t\t\tindexedDBHandler.getList({\r\n\t\t\t\t\t\tpageNum : 1, \r\n\t\t\t\t\t\tpageSize : 99999, \r\n\t\t\t\t\t\treadOption: 'readwrite', \r\n\t\t\t\t\t\tcallBack: (cursor)=>{\r\n\t\t\t\t\t\t\tif(cursor.value.lastModified < new Date().getTime() - oneDay){\r\n\t\t\t\t\t\t\t\tcursor.delete();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).then(result=>{\r\n\t\t\t\t\t\tres();\r\n\t\t\t\t\t\t/*let deleteTargetList = result.data.filter(e=>{\r\n\t\t\t\t\t\t\tlet lastModified = parseInt(e.lastModified);\r\n\t\t\t\t\t\t\treturn lastModified - oneDay <= new Date().getTime() - oneDay;\r\n\t\t\t\t\t\t}).map(e=>e.fileName);\r\n\t\t\t\t\t\tindexedDBHandler.deleteList(deleteTargetList).then((deleteResult) => {\r\n\t\t\t\t\t\t\tres();\r\n\t\t\t\t\t\t});*/\r\n\t\t\t\t\t}).catch((err)=>{\r\n\t\t\t\t\t\tconsole.error(err)\r\n\t\t\t\t\t\tres();\r\n\t\t\t\t\t})\t\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tindexedDBHandler.getItem(targetTools.dataset.new_file_name).then(result=>{\r\n\t\t\t\t\t\tresolve(result);\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t\tif(isHasRememberFile.result){\r\n\t\t\tlet url = URL.createObjectURL(isHasRememberFile.result.fileData, targetTools.dataset.content_type)\r\n\t\t\ttargetTools.dataset.url = url;\r\n\t\t\tif(targetTools.image){\r\n\t\t\t\ttargetTools.image.src = url;\r\n\t\t\t}else if(targetTools.video){\r\n\t\t\t\ttargetTools.video.src = url;\r\n\t\t\t}else{\r\n\t\t\t\t//targetTools.resources.data = url;\r\n\t\t\t\ttargetTools.resourcesUrl = url;\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet startPromise = new Promise(resolve => {\r\n\r\n\t\t\tlet {size, rank, rankText} = common.shortenBytes(targetTools.dataset.size);\r\n\r\n\t\t\tif(size >= 10 && rank >= 2){\r\n\t\t\t\tlet filePreview = targetTools.querySelector('[data-file_preview]');\r\n\t\t\t\tif( ! filePreview){\r\n\t\t\t\t\tfilePreview = Object.assign(document.createElement('div'), {\r\n\t\t\t\t\t\tclassName: 'file_preview',\r\n\t\t\t\t\t\tinnerHTML: `\r\n\t\t\t\t\t\t<div class=\"file_preview_container\" data-file_preview_container>\r\n\t\t\t\t\t\t\t<div>10MB 이상의 파일은 당신의 데이터를 위해 미리보기를 제공하지 않습니다.</div>\r\n\t\t\t\t\t\t\t<div>미리보기를 클릭시 기능 제공을 위해 임시 저장소에 저장을 시작하며, 이는 추후 자동 삭제의 대상이 됩니다.</div>\r\n\t\t\t\t\t\t\t<div>이 파일의 용량 : ${size}${rankText}</div>\r\n\t\t\t\t\t\t\t<button class=\"file_preview_button\" data-file_preview_button type=\"button\">미리보기</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t`\r\n\t\t\t\t\t});\r\n\t\t\t\t\tfilePreview.dataset.file_preview = '';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tfilePreview.querySelector('[data-file_preview_container]').className = 'file_preview_container'\r\n\t\t\t\t\tfilePreview.querySelector('[data-file_preview_button]').className = 'file_preview_button'; \r\n\t\t\t\t\tfilePreview.className = 'file_preview';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfilePreview.onclick = (event) => {\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t}\r\n\t\t\t\tfilePreview.dataset.visibility_not = '';\r\n\r\n\t\t\t\ttargetTools.append(filePreview)\r\n\r\n\t\t\t\tlet filePreviewButton = filePreview.querySelector('.file_preview_button');\r\n\t\t\t\t//document.body.onclick = (event) =>{ event}\r\n\t\t\t\tfilePreviewButton.onclick = (event) => {\r\n\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\tfilePreviewButton.textContent = '';\r\n\t\t\t\t\tfilePreviewButton.className = 'loading_rotate';\r\n\t\t\t\t\tresolve(filePreview);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tresolve();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tstartPromise.then((filePreview) => {\r\n\r\n\t\t\tlet getSignData = `${roomHandler.roomId}:${workspaceHandler.workspaceId}:${targetTools.dataset.new_file_name}:${accountHandler.accountInfo.accountName}`\r\n\t\t\ts3EncryptionUtil.callS3PresignedUrl(window.myAPI.s3.generateGetObjectPresignedUrl, getSignData, {uploadType : targetTools.dataset.upload_type, fileType})\r\n\t\t\t.then( (result) => {\r\n\t\t\t\tif(! result){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet {data, encDncKeyPair} = result;\r\n\t\t\t\tlet totalLen = 0;\r\n\t\t\t\tlet size = parseInt(targetTools.dataset.size);\r\n\t\t\t\tlet progress = Object.assign(document.createElement('progress'), {\r\n\t\t\t\t\tmax: 100,\r\n\t\t\t\t\tvalue : 0\r\n\t\t\t\t});\r\n\t\t\t\tif(filePreview){\r\n\t\t\t\t\tlet container = filePreview.querySelector('.file_preview_container');\r\n\t\t\t\t\tcontainer.append(progress)\r\n\t\t\t\t}\r\n\t\t\t\treturn Promise.all([\r\n\t\t\t\t\ts3EncryptionUtil.convertBase64ToBuffer(data.encryptionKey).then( async (buffer) => {\r\n\t\t\t\t\t\treturn s3EncryptionUtil.decryptMessage(encDncKeyPair.privateKey, buffer, s3EncryptionUtil.secretAlgorithm)\r\n\t\t\t\t\t\t\t.then(buf=>String.fromCharCode(...new Uint8Array(buf)))\r\n\t\t\t\t\t}),\r\n\t\t\t\t\ts3EncryptionUtil.convertBase64ToBuffer(data.encryptionMd).then( async (buffer) => {\r\n\t\t\t\t\t\treturn s3EncryptionUtil.decryptMessage(encDncKeyPair.privateKey, buffer, s3EncryptionUtil.secretAlgorithm)\r\n\t\t\t\t\t\t\t.then(buf=>String.fromCharCode(...new Uint8Array(buf)))\r\n\t\t\t\t\t})\r\n\t\t\t\t]).then( async ([k,m]) => {\r\n\t\t\t\t\treturn fetch(data.presignedUrl, {\r\n\t\t\t\t\t\tmethod:\"GET\",\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t'Content-Encoding' : 'base64',\r\n\t\t\t\t\t\t\t'Content-Type' : 'application/octet-stream',\r\n\t\t\t\t\t\t\t'x-amz-server-side-encryption-customer-algorithm': 'AES256',\r\n\t\t\t\t\t\t\t'x-amz-server-side-encryption-customer-key': k,\r\n\t\t\t\t\t\t\t'x-amz-server-side-encryption-customer-key-md5': m,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).then(async response=> {\r\n\t\t\t\t\t\tif(response.status != 200 && response.status != 201){\r\n\t\t\t\t\t\t\tthrow new Error('s3 connect failed')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn response.body;\r\n\t\t\t\t\t}).then((body) => {\r\n\t\t\t\t\t\tconst reader = body.getReader();\r\n\t\t\t\t\t\treturn new ReadableStream(\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tstart(controller) {\r\n\t\t\t\t\t\t\t\t\treturn pump();\r\n\t\t\t\t\t\t\t\t\tfunction pump() {\r\n\t\t\t\t\t\t\t\t\t\treturn reader.read().then(({ done, value }) => {\r\n\t\t\t\t\t\t\t\t\t\t\ttotalLen += value?.length || 0;\r\n\t\t\t\t\t\t\t\t\t\t\tprogress.value = (totalLen / size) * 100 \r\n\t\t\t\t\t\t\t\t\t\t\t// When no more data needs to be consumed, close the stream\r\n\t\t\t\t\t\t\t\t\t\t\tif (done) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tcontroller.close();\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t// Enqueue the next data chunk into our target stream\r\n\t\t\t\t\t\t\t\t\t\t\tcontroller.enqueue(value);\r\n\t\t\t\t\t\t\t\t\t\t\treturn pump();\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\tlet newBlob = new Blob([buffer], { type: imageEditor.dataset.content_type });\r\n\t\t\t\t\t\tlet imgUrl = URL.createObjectURL(newBlob);\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(stream => new Response(stream))\r\n\t\t\t\t\t.then(res => res.blob())\r\n\t\t\t\t\t.then(async blob => {\r\n\t\t\t\t\t\tconsole.log(totalLen);\r\n\t\t\t\t\t\tlet newBlob = new Blob([blob], { type: targetTools.dataset.content_type });\r\n\t\t\t\t\t\treturn dbOpenPromise.then( async () => {\r\n\t\t\t\t\t\t\treturn indexedDBHandler.addItem({\r\n\t\t\t\t\t\t\t\tfileName: targetTools.dataset.new_file_name,\r\n\t\t\t\t\t\t\t\toriginFileName: targetTools.dataset.name,\r\n\t\t\t\t\t\t\t\tfileData: newBlob,\r\n\t\t\t\t\t\t\t\tlastModified: new Date().getTime(),\r\n\t\t\t\t\t\t\t\tuploadType: targetTools.dataset.upload_type,\r\n\t\t\t\t\t\t\t\troomId: roomHandler.roomId,\r\n\t\t\t\t\t\t\t\tworkspaceId: workspaceHandler.workspaceId\r\n\t\t\t\t\t\t\t}).then(()=>{\r\n\t\t\t\t\t\t\t\treturn URL.createObjectURL(newBlob)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(url => {\r\n\t\t\t\t\t\t//targetTools.dataset.url = url;\r\n\t\t\t\t\t\tif(targetTools.image){\r\n\t\t\t\t\t\t\ttargetTools.image.src = url;\r\n\t\t\t\t\t\t}else if(targetTools.video){\r\n\t\t\t\t\t\t\ttargetTools.video.src = url;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t//targetTools.resources.data = url;\r\n\t\t\t\t\t\t\ttargetTools.resourcesUrl = url;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(filePreview){\r\n\t\t\t\t\t\t\tfilePreview.replaceChildren();\r\n\t\t\t\t\t\t\tfilePreview.parentElement.removeChild(filePreview);\r\n\t\t\t\t\t\t\tfilePreview.remove();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err=>{\r\n\t\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\t\tconsole.error(err.message)\r\n\t\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t})\r\n\r\n\t\t})\r\n\t\t\r\n\t}\r\n\t\r\n\tImage.customImageCallback = (imageEditor) => imageOrVideoCallback(imageEditor)\r\n\tVideo.customVideoCallback = (videoEditor) => imageOrVideoCallback(videoEditor)\r\n\tResources.customResourcesCallback = (resourcesEditor) => imageOrVideoCallback(resourcesEditor)\r\n});\t\r\n\r\nconst visibleObserver = new IntersectionObserver((entries, observer) => {\r\n\tentries.forEach(entry =>{\r\n\t\tlet {isIntersecting, target} = entry;\r\n\t\tif(target.hasAttribute('data-visibility_not')){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (isIntersecting){\r\n\t\t\ttarget.style.visibility = '';\r\n\t\t\ttarget.style.opacity = '';\r\n\t\t\ttarget.dataset.visibility = 'v';\r\n\t\t}else{\r\n\t\t\ttarget.style.visibility = 'hidden';\r\n\t\t\ttarget.style.opacity = 0;\r\n\t\t\ttarget.dataset.visibility = 'h';\r\n\t\t}\r\n\t})\r\n}, {\r\n\tthreshold: 0.01,\r\n\troot: document\r\n});\r\nnew MutationObserver( (mutationList, observer) => {\r\n\tmutationList.forEach((mutation) => {\r\n\t\tlet {addedNodes, removedNodes} = mutation;\r\n\t\tnew Promise(resolve=> {\r\n\t\t\taddedNodes.forEach(async e => {\r\n\t\t\t\tif(e.nodeType !== Node.ELEMENT_NODE || (e.nodeType === Node.ELEMENT_NODE && e.hasAttribute('data-is_not_visible_target'))){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tnew Promise(res=>{\r\n\t\t\t\t\tvisibleObserver.observe(e);\r\n\t\t\t\t\tres();\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\tresolve();\r\n\t\t})\r\n\t\tnew Promise(resolve=> {\r\n\t\t\tremovedNodes.forEach(async e => {\r\n\t\t\t\tif(e.nodeType !== Node.ELEMENT_NODE || (e.nodeType === Node.ELEMENT_NODE && e.hasAttribute('data-is_not_visible_target'))){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tnew Promise(res=>{\r\n\t\t\t\t\tvisibleObserver.unobserve(e);\r\n\t\t\t\t\tres();\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\tresolve();\r\n\t\t})\r\n\t})\r\n}).observe(document, {\r\n\tchildList: true,\r\n\tsubtree: true\r\n})\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", (event) => {\r\n\tlet workspaceIdResolve;\r\n\tlet workspaceIdPromise = new Promise(resolve=>{\r\n\t\tworkspaceIdResolve = resolve;\r\n\t})\r\n\twindow.myAPI.getWorkspaceId().then(workspaceId=>{\r\n\t\tif(workspaceId != undefined){\r\n\t\t\tworkspaceIdResolve(workspaceId);\r\n\t\t}\r\n\t\twindow.myAPI.event.electronEventTrigger.addElectronEventListener('workspaceChange', event => {\r\n\t\t\tlet newWorkspaceId = event.workspaceId\r\n\t\t\tif(workspaceId == newWorkspaceId){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(newWorkspaceId != undefined){\r\n\t\t\t\tworkspaceIdResolve(newWorkspaceId)\r\n\t\t\t}\r\n\t\t\t//event.workspaceId\r\n\t\t})\r\n\t})\r\n\tworkspaceIdPromise.then(workspaceId => {\r\n\t\tdocument.querySelector('#main').append(\r\n            noticeBoardDetail.element\r\n\t\t)\r\n        noticeBoardDetail.element.dataset.is_resize = false;\r\n        noticeBoardDetail.element.grow = 1;\r\n\r\n        window.myAPI.event.electronEventTrigger.addElectronEventListener('noticeBoardChange', event => {\r\n            noticeBoardHandler.noticeBoardId = event.noticeBoardId;\r\n        })\r\n\r\n\t\twindow.myAPI.stream.initWorkspaceStream({workspaceId});\r\n\t})\r\n});\r\n"],"names":[],"sourceRoot":""}