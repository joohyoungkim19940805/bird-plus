{"version":3,"file":"multipleNoticeBoardViewRenderer.js","mappings":"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","sources":["webpack://mobile/webpack/bootstrap","webpack://mobile/webpack/runtime/define property getters","webpack://mobile/webpack/runtime/hasOwnProperty shorthand","webpack://mobile/webpack/runtime/make namespace object","webpack://mobile/./node_modules/axios/lib/helpers/bind.js","webpack://mobile/./node_modules/axios/lib/utils.js","webpack://mobile/./node_modules/axios/lib/core/AxiosError.js","webpack://mobile/./node_modules/axios/lib/helpers/toFormData.js","webpack://mobile/./node_modules/axios/lib/helpers/AxiosURLSearchParams.js","webpack://mobile/./node_modules/axios/lib/helpers/buildURL.js","webpack://mobile/./node_modules/axios/lib/core/InterceptorManager.js","webpack://mobile/./node_modules/axios/lib/defaults/transitional.js","webpack://mobile/./node_modules/axios/lib/platform/browser/index.js","webpack://mobile/./node_modules/axios/lib/platform/browser/classes/URLSearchParams.js","webpack://mobile/./node_modules/axios/lib/platform/browser/classes/FormData.js","webpack://mobile/./node_modules/axios/lib/platform/browser/classes/Blob.js","webpack://mobile/./node_modules/axios/lib/platform/common/utils.js","webpack://mobile/./node_modules/axios/lib/platform/index.js","webpack://mobile/./node_modules/axios/lib/helpers/formDataToJSON.js","webpack://mobile/./node_modules/axios/lib/defaults/index.js","webpack://mobile/./node_modules/axios/lib/helpers/toURLEncodedForm.js","webpack://mobile/./node_modules/axios/lib/helpers/parseHeaders.js","webpack://mobile/./node_modules/axios/lib/core/AxiosHeaders.js","webpack://mobile/./node_modules/axios/lib/core/transformData.js","webpack://mobile/./node_modules/axios/lib/cancel/isCancel.js","webpack://mobile/./node_modules/axios/lib/cancel/CanceledError.js","webpack://mobile/./node_modules/axios/lib/helpers/cookies.js","webpack://mobile/./node_modules/axios/lib/core/buildFullPath.js","webpack://mobile/./node_modules/axios/lib/helpers/isAbsoluteURL.js","webpack://mobile/./node_modules/axios/lib/helpers/combineURLs.js","webpack://mobile/./node_modules/axios/lib/helpers/isURLSameOrigin.js","webpack://mobile/./node_modules/axios/lib/helpers/speedometer.js","webpack://mobile/./node_modules/axios/lib/adapters/xhr.js","webpack://mobile/./node_modules/axios/lib/adapters/adapters.js","webpack://mobile/./node_modules/axios/lib/helpers/null.js","webpack://mobile/./node_modules/axios/lib/core/settle.js","webpack://mobile/./node_modules/axios/lib/helpers/parseProtocol.js","webpack://mobile/./node_modules/axios/lib/core/dispatchRequest.js","webpack://mobile/./node_modules/axios/lib/core/mergeConfig.js","webpack://mobile/./node_modules/axios/lib/env/data.js","webpack://mobile/./node_modules/axios/lib/helpers/validator.js","webpack://mobile/./node_modules/axios/lib/core/Axios.js","webpack://mobile/./node_modules/axios/lib/cancel/CancelToken.js","webpack://mobile/./node_modules/axios/lib/helpers/HttpStatusCode.js","webpack://mobile/./node_modules/axios/lib/axios.js","webpack://mobile/./node_modules/axios/lib/helpers/spread.js","webpack://mobile/./node_modules/axios/lib/helpers/isAxiosError.js","webpack://mobile/./browser/window/windowUtil.js","webpack://mobile/./browser/controller/AccountController.js","webpack://mobile/./browser/controller/ApiS3Controller.js","webpack://mobile/./browser/controller/ChattingController.js","webpack://mobile/./browser/controller/EmoticonController.js","webpack://mobile/./browser/controller/EventStreamController.js","webpack://mobile/./browser/controller/NoticeBoardController.js","webpack://mobile/./browser/controller/RoomController.js","webpack://mobile/./browser/controller/WorkspaceController.js","webpack://mobile/./browser/preload/preload.js","webpack://mobile/./view/js/handler/notice_board/NoticeBoardHandler.js","webpack://mobile/./view/js/handler/editor/module/ToolHandler.js","webpack://mobile/./view/js/handler/editor/module/FreedomInterface.js","webpack://mobile/./view/js/handler/editor/component/Line.js","webpack://mobile/./view/js/handler/editor/module/FreeWiilHandler.js","webpack://mobile/./view/js/handler/editor/fragment/UndoManager.js","webpack://mobile/./view/js/handler/editor/tools/Strong.js","webpack://mobile/./view/js/handler/editor/component/Palette.js","webpack://mobile/./view/js/handler/editor/tools/Color.js","webpack://mobile/./view/js/handler/editor/tools/Background.js","webpack://mobile/./view/js/handler/editor/tools/Strikethrough.js","webpack://mobile/./view/js/handler/editor/tools/Underline.js","webpack://mobile/./view/js/handler/editor/component/FontFamilyBox.js","webpack://mobile/./view/js/handler/editor/tools/FontFamily.js","webpack://mobile/./view/js/handler/editor/tools/Quote.js","webpack://mobile/./view/js/handler/editor/tools/NumericPoint.js","webpack://mobile/./view/js/handler/editor/tools/BulletPoint.js","webpack://mobile/./view/js/handler/editor/component/SortBox.js","webpack://mobile/./view/js/handler/editor/tools/Sort.js","webpack://mobile/./view/js/handler/editor/component/FontSizeBox.js","webpack://mobile/./view/js/handler/editor/tools/FontSize.js","webpack://mobile/./view/js/handler/editor/tools/Italic.js","webpack://mobile/./view/js/handler/editor/component/ImageBox.js","webpack://mobile/./view/js/handler/editor/tools/Image.js","webpack://mobile/./view/js/handler/editor/component/VideoBox.js","webpack://mobile/./view/js/handler/editor/tools/Video.js","webpack://mobile/./view/js/handler/editor/tools/Resources.js","webpack://mobile/./view/js/handler/editor/tools/Code.js","webpack://mobile/./view/js/handler/editor/component/HyperlinkBox.js","webpack://mobile/./view/js/handler/editor/tools/Hyperlink.js","webpack://mobile/./view/js/handler/editor/FreeWillEditor.js","webpack://mobile/./view/js/handler/workspace/WorkspaceHandler.js","webpack://mobile/./view/js/handler/room/RoomHandler.js","webpack://mobile/./view/js/common.js","webpack://mobile/./view/js/handler/PositionChangeer.js","webpack://mobile/./view/js/handler/account/AccountHandler.js","webpack://mobile/./view/js/handler/S3EncryptionUtil.js","webpack://mobile/./view/js/component/notice_board/notice_board_item/NoticeBoardDetail.js","webpack://mobile/./view/js/handler/IndexedDBHandler.js","webpack://mobile/./view/js/CommonInit.js","webpack://mobile/./view/js/renderer/multipleNoticeBoardViewRenderer.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","'use strict';\n\nexport default function bind(fn, thisArg) {\n  return function wrap() {\n    return fn.apply(thisArg, arguments);\n  };\n}\n","'use strict';\n\nimport bind from './helpers/bind.js';\n\n// utils is a library of generic helper functions non-specific to axios\n\nconst {toString} = Object.prototype;\nconst {getPrototypeOf} = Object;\n\nconst kindOf = (cache => thing => {\n    const str = toString.call(thing);\n    return cache[str] || (cache[str] = str.slice(8, -1).toLowerCase());\n})(Object.create(null));\n\nconst kindOfTest = (type) => {\n  type = type.toLowerCase();\n  return (thing) => kindOf(thing) === type\n}\n\nconst typeOfTest = type => thing => typeof thing === type;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n *\n * @returns {boolean} True if value is an Array, otherwise false\n */\nconst {isArray} = Array;\n\n/**\n * Determine if a value is undefined\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nconst isUndefined = typeOfTest('undefined');\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && isFunction(val.constructor.isBuffer) && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nconst isArrayBuffer = kindOfTest('ArrayBuffer');\n\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  let result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (isArrayBuffer(val.buffer));\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a String, otherwise false\n */\nconst isString = typeOfTest('string');\n\n/**\n * Determine if a value is a Function\n *\n * @param {*} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nconst isFunction = typeOfTest('function');\n\n/**\n * Determine if a value is a Number\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Number, otherwise false\n */\nconst isNumber = typeOfTest('number');\n\n/**\n * Determine if a value is an Object\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an Object, otherwise false\n */\nconst isObject = (thing) => thing !== null && typeof thing === 'object';\n\n/**\n * Determine if a value is a Boolean\n *\n * @param {*} thing The value to test\n * @returns {boolean} True if value is a Boolean, otherwise false\n */\nconst isBoolean = thing => thing === true || thing === false;\n\n/**\n * Determine if a value is a plain Object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a plain Object, otherwise false\n */\nconst isPlainObject = (val) => {\n  if (kindOf(val) !== 'object') {\n    return false;\n  }\n\n  const prototype = getPrototypeOf(val);\n  return (prototype === null || prototype === Object.prototype || Object.getPrototypeOf(prototype) === null) && !(Symbol.toStringTag in val) && !(Symbol.iterator in val);\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Date, otherwise false\n */\nconst isDate = kindOfTest('Date');\n\n/**\n * Determine if a value is a File\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFile = kindOfTest('File');\n\n/**\n * Determine if a value is a Blob\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nconst isBlob = kindOfTest('Blob');\n\n/**\n * Determine if a value is a FileList\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFileList = kindOfTest('FileList');\n\n/**\n * Determine if a value is a Stream\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nconst isStream = (val) => isObject(val) && isFunction(val.pipe);\n\n/**\n * Determine if a value is a FormData\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nconst isFormData = (thing) => {\n  let kind;\n  return thing && (\n    (typeof FormData === 'function' && thing instanceof FormData) || (\n      isFunction(thing.append) && (\n        (kind = kindOf(thing)) === 'formdata' ||\n        // detect form-data instance\n        (kind === 'object' && isFunction(thing.toString) && thing.toString() === '[object FormData]')\n      )\n    )\n  )\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nconst isURLSearchParams = kindOfTest('URLSearchParams');\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n *\n * @returns {String} The String freed of excess whitespace\n */\nconst trim = (str) => str.trim ?\n  str.trim() : str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n *\n * @param {Boolean} [allOwnKeys = false]\n * @returns {any}\n */\nfunction forEach(obj, fn, {allOwnKeys = false} = {}) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  let i;\n  let l;\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    const keys = allOwnKeys ? Object.getOwnPropertyNames(obj) : Object.keys(obj);\n    const len = keys.length;\n    let key;\n\n    for (i = 0; i < len; i++) {\n      key = keys[i];\n      fn.call(null, obj[key], key, obj);\n    }\n  }\n}\n\nfunction findKey(obj, key) {\n  key = key.toLowerCase();\n  const keys = Object.keys(obj);\n  let i = keys.length;\n  let _key;\n  while (i-- > 0) {\n    _key = keys[i];\n    if (key === _key.toLowerCase()) {\n      return _key;\n    }\n  }\n  return null;\n}\n\nconst _global = (() => {\n  /*eslint no-undef:0*/\n  if (typeof globalThis !== \"undefined\") return globalThis;\n  return typeof self !== \"undefined\" ? self : (typeof window !== 'undefined' ? window : global)\n})();\n\nconst isContextDefined = (context) => !isUndefined(context) && context !== _global;\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n *\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  const {caseless} = isContextDefined(this) && this || {};\n  const result = {};\n  const assignValue = (val, key) => {\n    const targetKey = caseless && findKey(result, key) || key;\n    if (isPlainObject(result[targetKey]) && isPlainObject(val)) {\n      result[targetKey] = merge(result[targetKey], val);\n    } else if (isPlainObject(val)) {\n      result[targetKey] = merge({}, val);\n    } else if (isArray(val)) {\n      result[targetKey] = val.slice();\n    } else {\n      result[targetKey] = val;\n    }\n  }\n\n  for (let i = 0, l = arguments.length; i < l; i++) {\n    arguments[i] && forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n *\n * @param {Boolean} [allOwnKeys]\n * @returns {Object} The resulting value of object a\n */\nconst extend = (a, b, thisArg, {allOwnKeys}= {}) => {\n  forEach(b, (val, key) => {\n    if (thisArg && isFunction(val)) {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  }, {allOwnKeys});\n  return a;\n}\n\n/**\n * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n *\n * @param {string} content with BOM\n *\n * @returns {string} content value without BOM\n */\nconst stripBOM = (content) => {\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1);\n  }\n  return content;\n}\n\n/**\n * Inherit the prototype methods from one constructor into another\n * @param {function} constructor\n * @param {function} superConstructor\n * @param {object} [props]\n * @param {object} [descriptors]\n *\n * @returns {void}\n */\nconst inherits = (constructor, superConstructor, props, descriptors) => {\n  constructor.prototype = Object.create(superConstructor.prototype, descriptors);\n  constructor.prototype.constructor = constructor;\n  Object.defineProperty(constructor, 'super', {\n    value: superConstructor.prototype\n  });\n  props && Object.assign(constructor.prototype, props);\n}\n\n/**\n * Resolve object with deep prototype chain to a flat object\n * @param {Object} sourceObj source object\n * @param {Object} [destObj]\n * @param {Function|Boolean} [filter]\n * @param {Function} [propFilter]\n *\n * @returns {Object}\n */\nconst toFlatObject = (sourceObj, destObj, filter, propFilter) => {\n  let props;\n  let i;\n  let prop;\n  const merged = {};\n\n  destObj = destObj || {};\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  if (sourceObj == null) return destObj;\n\n  do {\n    props = Object.getOwnPropertyNames(sourceObj);\n    i = props.length;\n    while (i-- > 0) {\n      prop = props[i];\n      if ((!propFilter || propFilter(prop, sourceObj, destObj)) && !merged[prop]) {\n        destObj[prop] = sourceObj[prop];\n        merged[prop] = true;\n      }\n    }\n    sourceObj = filter !== false && getPrototypeOf(sourceObj);\n  } while (sourceObj && (!filter || filter(sourceObj, destObj)) && sourceObj !== Object.prototype);\n\n  return destObj;\n}\n\n/**\n * Determines whether a string ends with the characters of a specified string\n *\n * @param {String} str\n * @param {String} searchString\n * @param {Number} [position= 0]\n *\n * @returns {boolean}\n */\nconst endsWith = (str, searchString, position) => {\n  str = String(str);\n  if (position === undefined || position > str.length) {\n    position = str.length;\n  }\n  position -= searchString.length;\n  const lastIndex = str.indexOf(searchString, position);\n  return lastIndex !== -1 && lastIndex === position;\n}\n\n\n/**\n * Returns new array from array like object or null if failed\n *\n * @param {*} [thing]\n *\n * @returns {?Array}\n */\nconst toArray = (thing) => {\n  if (!thing) return null;\n  if (isArray(thing)) return thing;\n  let i = thing.length;\n  if (!isNumber(i)) return null;\n  const arr = new Array(i);\n  while (i-- > 0) {\n    arr[i] = thing[i];\n  }\n  return arr;\n}\n\n/**\n * Checking if the Uint8Array exists and if it does, it returns a function that checks if the\n * thing passed in is an instance of Uint8Array\n *\n * @param {TypedArray}\n *\n * @returns {Array}\n */\n// eslint-disable-next-line func-names\nconst isTypedArray = (TypedArray => {\n  // eslint-disable-next-line func-names\n  return thing => {\n    return TypedArray && thing instanceof TypedArray;\n  };\n})(typeof Uint8Array !== 'undefined' && getPrototypeOf(Uint8Array));\n\n/**\n * For each entry in the object, call the function with the key and value.\n *\n * @param {Object<any, any>} obj - The object to iterate over.\n * @param {Function} fn - The function to call for each entry.\n *\n * @returns {void}\n */\nconst forEachEntry = (obj, fn) => {\n  const generator = obj && obj[Symbol.iterator];\n\n  const iterator = generator.call(obj);\n\n  let result;\n\n  while ((result = iterator.next()) && !result.done) {\n    const pair = result.value;\n    fn.call(obj, pair[0], pair[1]);\n  }\n}\n\n/**\n * It takes a regular expression and a string, and returns an array of all the matches\n *\n * @param {string} regExp - The regular expression to match against.\n * @param {string} str - The string to search.\n *\n * @returns {Array<boolean>}\n */\nconst matchAll = (regExp, str) => {\n  let matches;\n  const arr = [];\n\n  while ((matches = regExp.exec(str)) !== null) {\n    arr.push(matches);\n  }\n\n  return arr;\n}\n\n/* Checking if the kindOfTest function returns true when passed an HTMLFormElement. */\nconst isHTMLForm = kindOfTest('HTMLFormElement');\n\nconst toCamelCase = str => {\n  return str.toLowerCase().replace(/[-_\\s]([a-z\\d])(\\w*)/g,\n    function replacer(m, p1, p2) {\n      return p1.toUpperCase() + p2;\n    }\n  );\n};\n\n/* Creating a function that will check if an object has a property. */\nconst hasOwnProperty = (({hasOwnProperty}) => (obj, prop) => hasOwnProperty.call(obj, prop))(Object.prototype);\n\n/**\n * Determine if a value is a RegExp object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a RegExp object, otherwise false\n */\nconst isRegExp = kindOfTest('RegExp');\n\nconst reduceDescriptors = (obj, reducer) => {\n  const descriptors = Object.getOwnPropertyDescriptors(obj);\n  const reducedDescriptors = {};\n\n  forEach(descriptors, (descriptor, name) => {\n    let ret;\n    if ((ret = reducer(descriptor, name, obj)) !== false) {\n      reducedDescriptors[name] = ret || descriptor;\n    }\n  });\n\n  Object.defineProperties(obj, reducedDescriptors);\n}\n\n/**\n * Makes all methods read-only\n * @param {Object} obj\n */\n\nconst freezeMethods = (obj) => {\n  reduceDescriptors(obj, (descriptor, name) => {\n    // skip restricted props in strict mode\n    if (isFunction(obj) && ['arguments', 'caller', 'callee'].indexOf(name) !== -1) {\n      return false;\n    }\n\n    const value = obj[name];\n\n    if (!isFunction(value)) return;\n\n    descriptor.enumerable = false;\n\n    if ('writable' in descriptor) {\n      descriptor.writable = false;\n      return;\n    }\n\n    if (!descriptor.set) {\n      descriptor.set = () => {\n        throw Error('Can not rewrite read-only method \\'' + name + '\\'');\n      };\n    }\n  });\n}\n\nconst toObjectSet = (arrayOrString, delimiter) => {\n  const obj = {};\n\n  const define = (arr) => {\n    arr.forEach(value => {\n      obj[value] = true;\n    });\n  }\n\n  isArray(arrayOrString) ? define(arrayOrString) : define(String(arrayOrString).split(delimiter));\n\n  return obj;\n}\n\nconst noop = () => {}\n\nconst toFiniteNumber = (value, defaultValue) => {\n  value = +value;\n  return Number.isFinite(value) ? value : defaultValue;\n}\n\nconst ALPHA = 'abcdefghijklmnopqrstuvwxyz'\n\nconst DIGIT = '0123456789';\n\nconst ALPHABET = {\n  DIGIT,\n  ALPHA,\n  ALPHA_DIGIT: ALPHA + ALPHA.toUpperCase() + DIGIT\n}\n\nconst generateString = (size = 16, alphabet = ALPHABET.ALPHA_DIGIT) => {\n  let str = '';\n  const {length} = alphabet;\n  while (size--) {\n    str += alphabet[Math.random() * length|0]\n  }\n\n  return str;\n}\n\n/**\n * If the thing is a FormData object, return true, otherwise return false.\n *\n * @param {unknown} thing - The thing to check.\n *\n * @returns {boolean}\n */\nfunction isSpecCompliantForm(thing) {\n  return !!(thing && isFunction(thing.append) && thing[Symbol.toStringTag] === 'FormData' && thing[Symbol.iterator]);\n}\n\nconst toJSONObject = (obj) => {\n  const stack = new Array(10);\n\n  const visit = (source, i) => {\n\n    if (isObject(source)) {\n      if (stack.indexOf(source) >= 0) {\n        return;\n      }\n\n      if(!('toJSON' in source)) {\n        stack[i] = source;\n        const target = isArray(source) ? [] : {};\n\n        forEach(source, (value, key) => {\n          const reducedValue = visit(value, i + 1);\n          !isUndefined(reducedValue) && (target[key] = reducedValue);\n        });\n\n        stack[i] = undefined;\n\n        return target;\n      }\n    }\n\n    return source;\n  }\n\n  return visit(obj, 0);\n}\n\nconst isAsyncFn = kindOfTest('AsyncFunction');\n\nconst isThenable = (thing) =>\n  thing && (isObject(thing) || isFunction(thing)) && isFunction(thing.then) && isFunction(thing.catch);\n\nexport default {\n  isArray,\n  isArrayBuffer,\n  isBuffer,\n  isFormData,\n  isArrayBufferView,\n  isString,\n  isNumber,\n  isBoolean,\n  isObject,\n  isPlainObject,\n  isUndefined,\n  isDate,\n  isFile,\n  isBlob,\n  isRegExp,\n  isFunction,\n  isStream,\n  isURLSearchParams,\n  isTypedArray,\n  isFileList,\n  forEach,\n  merge,\n  extend,\n  trim,\n  stripBOM,\n  inherits,\n  toFlatObject,\n  kindOf,\n  kindOfTest,\n  endsWith,\n  toArray,\n  forEachEntry,\n  matchAll,\n  isHTMLForm,\n  hasOwnProperty,\n  hasOwnProp: hasOwnProperty, // an alias to avoid ESLint no-prototype-builtins detection\n  reduceDescriptors,\n  freezeMethods,\n  toObjectSet,\n  toCamelCase,\n  noop,\n  toFiniteNumber,\n  findKey,\n  global: _global,\n  isContextDefined,\n  ALPHABET,\n  generateString,\n  isSpecCompliantForm,\n  toJSONObject,\n  isAsyncFn,\n  isThenable\n};\n","'use strict';\n\nimport utils from '../utils.js';\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [config] The config.\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n *\n * @returns {Error} The created error.\n */\nfunction AxiosError(message, code, config, request, response) {\n  Error.call(this);\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, this.constructor);\n  } else {\n    this.stack = (new Error()).stack;\n  }\n\n  this.message = message;\n  this.name = 'AxiosError';\n  code && (this.code = code);\n  config && (this.config = config);\n  request && (this.request = request);\n  response && (this.response = response);\n}\n\nutils.inherits(AxiosError, Error, {\n  toJSON: function toJSON() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: utils.toJSONObject(this.config),\n      code: this.code,\n      status: this.response && this.response.status ? this.response.status : null\n    };\n  }\n});\n\nconst prototype = AxiosError.prototype;\nconst descriptors = {};\n\n[\n  'ERR_BAD_OPTION_VALUE',\n  'ERR_BAD_OPTION',\n  'ECONNABORTED',\n  'ETIMEDOUT',\n  'ERR_NETWORK',\n  'ERR_FR_TOO_MANY_REDIRECTS',\n  'ERR_DEPRECATED',\n  'ERR_BAD_RESPONSE',\n  'ERR_BAD_REQUEST',\n  'ERR_CANCELED',\n  'ERR_NOT_SUPPORT',\n  'ERR_INVALID_URL'\n// eslint-disable-next-line func-names\n].forEach(code => {\n  descriptors[code] = {value: code};\n});\n\nObject.defineProperties(AxiosError, descriptors);\nObject.defineProperty(prototype, 'isAxiosError', {value: true});\n\n// eslint-disable-next-line func-names\nAxiosError.from = (error, code, config, request, response, customProps) => {\n  const axiosError = Object.create(prototype);\n\n  utils.toFlatObject(error, axiosError, function filter(obj) {\n    return obj !== Error.prototype;\n  }, prop => {\n    return prop !== 'isAxiosError';\n  });\n\n  AxiosError.call(axiosError, error.message, code, config, request, response);\n\n  axiosError.cause = error;\n\n  axiosError.name = error.name;\n\n  customProps && Object.assign(axiosError, customProps);\n\n  return axiosError;\n};\n\nexport default AxiosError;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\n// temporary hotfix to avoid circular references until AxiosURLSearchParams is refactored\nimport PlatformFormData from '../platform/node/classes/FormData.js';\n\n/**\n * Determines if the given thing is a array or js object.\n *\n * @param {string} thing - The object or array to be visited.\n *\n * @returns {boolean}\n */\nfunction isVisitable(thing) {\n  return utils.isPlainObject(thing) || utils.isArray(thing);\n}\n\n/**\n * It removes the brackets from the end of a string\n *\n * @param {string} key - The key of the parameter.\n *\n * @returns {string} the key without the brackets.\n */\nfunction removeBrackets(key) {\n  return utils.endsWith(key, '[]') ? key.slice(0, -2) : key;\n}\n\n/**\n * It takes a path, a key, and a boolean, and returns a string\n *\n * @param {string} path - The path to the current key.\n * @param {string} key - The key of the current object being iterated over.\n * @param {string} dots - If true, the key will be rendered with dots instead of brackets.\n *\n * @returns {string} The path to the current key.\n */\nfunction renderKey(path, key, dots) {\n  if (!path) return key;\n  return path.concat(key).map(function each(token, i) {\n    // eslint-disable-next-line no-param-reassign\n    token = removeBrackets(token);\n    return !dots && i ? '[' + token + ']' : token;\n  }).join(dots ? '.' : '');\n}\n\n/**\n * If the array is an array and none of its elements are visitable, then it's a flat array.\n *\n * @param {Array<any>} arr - The array to check\n *\n * @returns {boolean}\n */\nfunction isFlatArray(arr) {\n  return utils.isArray(arr) && !arr.some(isVisitable);\n}\n\nconst predicates = utils.toFlatObject(utils, {}, null, function filter(prop) {\n  return /^is[A-Z]/.test(prop);\n});\n\n/**\n * Convert a data object to FormData\n *\n * @param {Object} obj\n * @param {?Object} [formData]\n * @param {?Object} [options]\n * @param {Function} [options.visitor]\n * @param {Boolean} [options.metaTokens = true]\n * @param {Boolean} [options.dots = false]\n * @param {?Boolean} [options.indexes = false]\n *\n * @returns {Object}\n **/\n\n/**\n * It converts an object into a FormData object\n *\n * @param {Object<any, any>} obj - The object to convert to form data.\n * @param {string} formData - The FormData object to append to.\n * @param {Object<string, any>} options\n *\n * @returns\n */\nfunction toFormData(obj, formData, options) {\n  if (!utils.isObject(obj)) {\n    throw new TypeError('target must be an object');\n  }\n\n  // eslint-disable-next-line no-param-reassign\n  formData = formData || new (PlatformFormData || FormData)();\n\n  // eslint-disable-next-line no-param-reassign\n  options = utils.toFlatObject(options, {\n    metaTokens: true,\n    dots: false,\n    indexes: false\n  }, false, function defined(option, source) {\n    // eslint-disable-next-line no-eq-null,eqeqeq\n    return !utils.isUndefined(source[option]);\n  });\n\n  const metaTokens = options.metaTokens;\n  // eslint-disable-next-line no-use-before-define\n  const visitor = options.visitor || defaultVisitor;\n  const dots = options.dots;\n  const indexes = options.indexes;\n  const _Blob = options.Blob || typeof Blob !== 'undefined' && Blob;\n  const useBlob = _Blob && utils.isSpecCompliantForm(formData);\n\n  if (!utils.isFunction(visitor)) {\n    throw new TypeError('visitor must be a function');\n  }\n\n  function convertValue(value) {\n    if (value === null) return '';\n\n    if (utils.isDate(value)) {\n      return value.toISOString();\n    }\n\n    if (!useBlob && utils.isBlob(value)) {\n      throw new AxiosError('Blob is not supported. Use a Buffer instead.');\n    }\n\n    if (utils.isArrayBuffer(value) || utils.isTypedArray(value)) {\n      return useBlob && typeof Blob === 'function' ? new Blob([value]) : Buffer.from(value);\n    }\n\n    return value;\n  }\n\n  /**\n   * Default visitor.\n   *\n   * @param {*} value\n   * @param {String|Number} key\n   * @param {Array<String|Number>} path\n   * @this {FormData}\n   *\n   * @returns {boolean} return true to visit the each prop of the value recursively\n   */\n  function defaultVisitor(value, key, path) {\n    let arr = value;\n\n    if (value && !path && typeof value === 'object') {\n      if (utils.endsWith(key, '{}')) {\n        // eslint-disable-next-line no-param-reassign\n        key = metaTokens ? key : key.slice(0, -2);\n        // eslint-disable-next-line no-param-reassign\n        value = JSON.stringify(value);\n      } else if (\n        (utils.isArray(value) && isFlatArray(value)) ||\n        ((utils.isFileList(value) || utils.endsWith(key, '[]')) && (arr = utils.toArray(value))\n        )) {\n        // eslint-disable-next-line no-param-reassign\n        key = removeBrackets(key);\n\n        arr.forEach(function each(el, index) {\n          !(utils.isUndefined(el) || el === null) && formData.append(\n            // eslint-disable-next-line no-nested-ternary\n            indexes === true ? renderKey([key], index, dots) : (indexes === null ? key : key + '[]'),\n            convertValue(el)\n          );\n        });\n        return false;\n      }\n    }\n\n    if (isVisitable(value)) {\n      return true;\n    }\n\n    formData.append(renderKey(path, key, dots), convertValue(value));\n\n    return false;\n  }\n\n  const stack = [];\n\n  const exposedHelpers = Object.assign(predicates, {\n    defaultVisitor,\n    convertValue,\n    isVisitable\n  });\n\n  function build(value, path) {\n    if (utils.isUndefined(value)) return;\n\n    if (stack.indexOf(value) !== -1) {\n      throw Error('Circular reference detected in ' + path.join('.'));\n    }\n\n    stack.push(value);\n\n    utils.forEach(value, function each(el, key) {\n      const result = !(utils.isUndefined(el) || el === null) && visitor.call(\n        formData, el, utils.isString(key) ? key.trim() : key, path, exposedHelpers\n      );\n\n      if (result === true) {\n        build(el, path ? path.concat(key) : [key]);\n      }\n    });\n\n    stack.pop();\n  }\n\n  if (!utils.isObject(obj)) {\n    throw new TypeError('data must be an object');\n  }\n\n  build(obj);\n\n  return formData;\n}\n\nexport default toFormData;\n","'use strict';\n\nimport toFormData from './toFormData.js';\n\n/**\n * It encodes a string by replacing all characters that are not in the unreserved set with\n * their percent-encoded equivalents\n *\n * @param {string} str - The string to encode.\n *\n * @returns {string} The encoded string.\n */\nfunction encode(str) {\n  const charMap = {\n    '!': '%21',\n    \"'\": '%27',\n    '(': '%28',\n    ')': '%29',\n    '~': '%7E',\n    '%20': '+',\n    '%00': '\\x00'\n  };\n  return encodeURIComponent(str).replace(/[!'()~]|%20|%00/g, function replacer(match) {\n    return charMap[match];\n  });\n}\n\n/**\n * It takes a params object and converts it to a FormData object\n *\n * @param {Object<string, any>} params - The parameters to be converted to a FormData object.\n * @param {Object<string, any>} options - The options object passed to the Axios constructor.\n *\n * @returns {void}\n */\nfunction AxiosURLSearchParams(params, options) {\n  this._pairs = [];\n\n  params && toFormData(params, this, options);\n}\n\nconst prototype = AxiosURLSearchParams.prototype;\n\nprototype.append = function append(name, value) {\n  this._pairs.push([name, value]);\n};\n\nprototype.toString = function toString(encoder) {\n  const _encode = encoder ? function(value) {\n    return encoder.call(this, value, encode);\n  } : encode;\n\n  return this._pairs.map(function each(pair) {\n    return _encode(pair[0]) + '=' + _encode(pair[1]);\n  }, '').join('&');\n};\n\nexport default AxiosURLSearchParams;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosURLSearchParams from '../helpers/AxiosURLSearchParams.js';\n\n/**\n * It replaces all instances of the characters `:`, `$`, `,`, `+`, `[`, and `]` with their\n * URI encoded counterparts\n *\n * @param {string} val The value to be encoded.\n *\n * @returns {string} The encoded value.\n */\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @param {?object} options\n *\n * @returns {string} The formatted url\n */\nexport default function buildURL(url, params, options) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n  \n  const _encode = options && options.encode || encode;\n\n  const serializeFn = options && options.serialize;\n\n  let serializedParams;\n\n  if (serializeFn) {\n    serializedParams = serializeFn(params, options);\n  } else {\n    serializedParams = utils.isURLSearchParams(params) ?\n      params.toString() :\n      new AxiosURLSearchParams(params, options).toString(_encode);\n  }\n\n  if (serializedParams) {\n    const hashmarkIndex = url.indexOf(\"#\");\n\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\nclass InterceptorManager {\n  constructor() {\n    this.handlers = [];\n  }\n\n  /**\n   * Add a new interceptor to the stack\n   *\n   * @param {Function} fulfilled The function to handle `then` for a `Promise`\n   * @param {Function} rejected The function to handle `reject` for a `Promise`\n   *\n   * @return {Number} An ID used to remove interceptor later\n   */\n  use(fulfilled, rejected, options) {\n    this.handlers.push({\n      fulfilled,\n      rejected,\n      synchronous: options ? options.synchronous : false,\n      runWhen: options ? options.runWhen : null\n    });\n    return this.handlers.length - 1;\n  }\n\n  /**\n   * Remove an interceptor from the stack\n   *\n   * @param {Number} id The ID that was returned by `use`\n   *\n   * @returns {Boolean} `true` if the interceptor was removed, `false` otherwise\n   */\n  eject(id) {\n    if (this.handlers[id]) {\n      this.handlers[id] = null;\n    }\n  }\n\n  /**\n   * Clear all interceptors from the stack\n   *\n   * @returns {void}\n   */\n  clear() {\n    if (this.handlers) {\n      this.handlers = [];\n    }\n  }\n\n  /**\n   * Iterate over all the registered interceptors\n   *\n   * This method is particularly useful for skipping over any\n   * interceptors that may have become `null` calling `eject`.\n   *\n   * @param {Function} fn The function to call for each interceptor\n   *\n   * @returns {void}\n   */\n  forEach(fn) {\n    utils.forEach(this.handlers, function forEachHandler(h) {\n      if (h !== null) {\n        fn(h);\n      }\n    });\n  }\n}\n\nexport default InterceptorManager;\n","'use strict';\n\nexport default {\n  silentJSONParsing: true,\n  forcedJSONParsing: true,\n  clarifyTimeoutError: false\n};\n","import URLSearchParams from './classes/URLSearchParams.js'\nimport FormData from './classes/FormData.js'\nimport Blob from './classes/Blob.js'\n\nexport default {\n  isBrowser: true,\n  classes: {\n    URLSearchParams,\n    FormData,\n    Blob\n  },\n  protocols: ['http', 'https', 'file', 'blob', 'url', 'data']\n};\n","'use strict';\n\nimport AxiosURLSearchParams from '../../../helpers/AxiosURLSearchParams.js';\nexport default typeof URLSearchParams !== 'undefined' ? URLSearchParams : AxiosURLSearchParams;\n","'use strict';\n\nexport default typeof FormData !== 'undefined' ? FormData : null;\n","'use strict'\n\nexport default typeof Blob !== 'undefined' ? Blob : null\n","const hasBrowserEnv = typeof window !== 'undefined' && typeof document !== 'undefined';\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n *\n * @returns {boolean}\n */\nconst hasStandardBrowserEnv = (\n  (product) => {\n    return hasBrowserEnv && ['ReactNative', 'NativeScript', 'NS'].indexOf(product) < 0\n  })(typeof navigator !== 'undefined' && navigator.product);\n\n/**\n * Determine if we're running in a standard browser webWorker environment\n *\n * Although the `isStandardBrowserEnv` method indicates that\n * `allows axios to run in a web worker`, the WebWorker will still be\n * filtered out due to its judgment standard\n * `typeof window !== 'undefined' && typeof document !== 'undefined'`.\n * This leads to a problem when axios post `FormData` in webWorker\n */\nconst hasStandardBrowserWebWorkerEnv = (() => {\n  return (\n    typeof WorkerGlobalScope !== 'undefined' &&\n    // eslint-disable-next-line no-undef\n    self instanceof WorkerGlobalScope &&\n    typeof self.importScripts === 'function'\n  );\n})();\n\nexport {\n  hasBrowserEnv,\n  hasStandardBrowserWebWorkerEnv,\n  hasStandardBrowserEnv\n}\n","import platform from './node/index.js';\nimport * as utils from './common/utils.js';\n\nexport default {\n  ...utils,\n  ...platform\n}\n","'use strict';\n\nimport utils from '../utils.js';\n\n/**\n * It takes a string like `foo[x][y][z]` and returns an array like `['foo', 'x', 'y', 'z']\n *\n * @param {string} name - The name of the property to get.\n *\n * @returns An array of strings.\n */\nfunction parsePropPath(name) {\n  // foo[x][y][z]\n  // foo.x.y.z\n  // foo-x-y-z\n  // foo x y z\n  return utils.matchAll(/\\w+|\\[(\\w*)]/g, name).map(match => {\n    return match[0] === '[]' ? '' : match[1] || match[0];\n  });\n}\n\n/**\n * Convert an array to an object.\n *\n * @param {Array<any>} arr - The array to convert to an object.\n *\n * @returns An object with the same keys and values as the array.\n */\nfunction arrayToObject(arr) {\n  const obj = {};\n  const keys = Object.keys(arr);\n  let i;\n  const len = keys.length;\n  let key;\n  for (i = 0; i < len; i++) {\n    key = keys[i];\n    obj[key] = arr[key];\n  }\n  return obj;\n}\n\n/**\n * It takes a FormData object and returns a JavaScript object\n *\n * @param {string} formData The FormData object to convert to JSON.\n *\n * @returns {Object<string, any> | null} The converted object.\n */\nfunction formDataToJSON(formData) {\n  function buildPath(path, value, target, index) {\n    let name = path[index++];\n    const isNumericKey = Number.isFinite(+name);\n    const isLast = index >= path.length;\n    name = !name && utils.isArray(target) ? target.length : name;\n\n    if (isLast) {\n      if (utils.hasOwnProp(target, name)) {\n        target[name] = [target[name], value];\n      } else {\n        target[name] = value;\n      }\n\n      return !isNumericKey;\n    }\n\n    if (!target[name] || !utils.isObject(target[name])) {\n      target[name] = [];\n    }\n\n    const result = buildPath(path, value, target[name], index);\n\n    if (result && utils.isArray(target[name])) {\n      target[name] = arrayToObject(target[name]);\n    }\n\n    return !isNumericKey;\n  }\n\n  if (utils.isFormData(formData) && utils.isFunction(formData.entries)) {\n    const obj = {};\n\n    utils.forEachEntry(formData, (name, value) => {\n      buildPath(parsePropPath(name), value, obj, 0);\n    });\n\n    return obj;\n  }\n\n  return null;\n}\n\nexport default formDataToJSON;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\nimport transitionalDefaults from './transitional.js';\nimport toFormData from '../helpers/toFormData.js';\nimport toURLEncodedForm from '../helpers/toURLEncodedForm.js';\nimport platform from '../platform/index.js';\nimport formDataToJSON from '../helpers/formDataToJSON.js';\n\n/**\n * It takes a string, tries to parse it, and if it fails, it returns the stringified version\n * of the input\n *\n * @param {any} rawValue - The value to be stringified.\n * @param {Function} parser - A function that parses a string into a JavaScript object.\n * @param {Function} encoder - A function that takes a value and returns a string.\n *\n * @returns {string} A stringified version of the rawValue.\n */\nfunction stringifySafely(rawValue, parser, encoder) {\n  if (utils.isString(rawValue)) {\n    try {\n      (parser || JSON.parse)(rawValue);\n      return utils.trim(rawValue);\n    } catch (e) {\n      if (e.name !== 'SyntaxError') {\n        throw e;\n      }\n    }\n  }\n\n  return (encoder || JSON.stringify)(rawValue);\n}\n\nconst defaults = {\n\n  transitional: transitionalDefaults,\n\n  adapter: ['xhr', 'http'],\n\n  transformRequest: [function transformRequest(data, headers) {\n    const contentType = headers.getContentType() || '';\n    const hasJSONContentType = contentType.indexOf('application/json') > -1;\n    const isObjectPayload = utils.isObject(data);\n\n    if (isObjectPayload && utils.isHTMLForm(data)) {\n      data = new FormData(data);\n    }\n\n    const isFormData = utils.isFormData(data);\n\n    if (isFormData) {\n      if (!hasJSONContentType) {\n        return data;\n      }\n      return hasJSONContentType ? JSON.stringify(formDataToJSON(data)) : data;\n    }\n\n    if (utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      headers.setContentType('application/x-www-form-urlencoded;charset=utf-8', false);\n      return data.toString();\n    }\n\n    let isFileList;\n\n    if (isObjectPayload) {\n      if (contentType.indexOf('application/x-www-form-urlencoded') > -1) {\n        return toURLEncodedForm(data, this.formSerializer).toString();\n      }\n\n      if ((isFileList = utils.isFileList(data)) || contentType.indexOf('multipart/form-data') > -1) {\n        const _FormData = this.env && this.env.FormData;\n\n        return toFormData(\n          isFileList ? {'files[]': data} : data,\n          _FormData && new _FormData(),\n          this.formSerializer\n        );\n      }\n    }\n\n    if (isObjectPayload || hasJSONContentType ) {\n      headers.setContentType('application/json', false);\n      return stringifySafely(data);\n    }\n\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    const transitional = this.transitional || defaults.transitional;\n    const forcedJSONParsing = transitional && transitional.forcedJSONParsing;\n    const JSONRequested = this.responseType === 'json';\n\n    if (data && utils.isString(data) && ((forcedJSONParsing && !this.responseType) || JSONRequested)) {\n      const silentJSONParsing = transitional && transitional.silentJSONParsing;\n      const strictJSONParsing = !silentJSONParsing && JSONRequested;\n\n      try {\n        return JSON.parse(data);\n      } catch (e) {\n        if (strictJSONParsing) {\n          if (e.name === 'SyntaxError') {\n            throw AxiosError.from(e, AxiosError.ERR_BAD_RESPONSE, this, null, this.response);\n          }\n          throw e;\n        }\n      }\n    }\n\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n  maxBodyLength: -1,\n\n  env: {\n    FormData: platform.classes.FormData,\n    Blob: platform.classes.Blob\n  },\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  },\n\n  headers: {\n    common: {\n      'Accept': 'application/json, text/plain, */*',\n      'Content-Type': undefined\n    }\n  }\n};\n\nutils.forEach(['delete', 'get', 'head', 'post', 'put', 'patch'], (method) => {\n  defaults.headers[method] = {};\n});\n\nexport default defaults;\n","'use strict';\n\nimport utils from '../utils.js';\nimport toFormData from './toFormData.js';\nimport platform from '../platform/index.js';\n\nexport default function toURLEncodedForm(data, options) {\n  return toFormData(data, new platform.classes.URLSearchParams(), Object.assign({\n    visitor: function(value, key, path, helpers) {\n      if (platform.isNode && utils.isBuffer(value)) {\n        this.append(key, value.toString('base64'));\n        return false;\n      }\n\n      return helpers.defaultVisitor.apply(this, arguments);\n    }\n  }, options));\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\n// RawAxiosHeaders whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nconst ignoreDuplicateOf = utils.toObjectSet([\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n]);\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} rawHeaders Headers needing to be parsed\n *\n * @returns {Object} Headers parsed into an object\n */\nexport default rawHeaders => {\n  const parsed = {};\n  let key;\n  let val;\n  let i;\n\n  rawHeaders && rawHeaders.split('\\n').forEach(function parser(line) {\n    i = line.indexOf(':');\n    key = line.substring(0, i).trim().toLowerCase();\n    val = line.substring(i + 1).trim();\n\n    if (!key || (parsed[key] && ignoreDuplicateOf[key])) {\n      return;\n    }\n\n    if (key === 'set-cookie') {\n      if (parsed[key]) {\n        parsed[key].push(val);\n      } else {\n        parsed[key] = [val];\n      }\n    } else {\n      parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nimport utils from '../utils.js';\nimport parseHeaders from '../helpers/parseHeaders.js';\n\nconst $internals = Symbol('internals');\n\nfunction normalizeHeader(header) {\n  return header && String(header).trim().toLowerCase();\n}\n\nfunction normalizeValue(value) {\n  if (value === false || value == null) {\n    return value;\n  }\n\n  return utils.isArray(value) ? value.map(normalizeValue) : String(value);\n}\n\nfunction parseTokens(str) {\n  const tokens = Object.create(null);\n  const tokensRE = /([^\\s,;=]+)\\s*(?:=\\s*([^,;]+))?/g;\n  let match;\n\n  while ((match = tokensRE.exec(str))) {\n    tokens[match[1]] = match[2];\n  }\n\n  return tokens;\n}\n\nconst isValidHeaderName = (str) => /^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(str.trim());\n\nfunction matchHeaderValue(context, value, header, filter, isHeaderNameFilter) {\n  if (utils.isFunction(filter)) {\n    return filter.call(this, value, header);\n  }\n\n  if (isHeaderNameFilter) {\n    value = header;\n  }\n\n  if (!utils.isString(value)) return;\n\n  if (utils.isString(filter)) {\n    return value.indexOf(filter) !== -1;\n  }\n\n  if (utils.isRegExp(filter)) {\n    return filter.test(value);\n  }\n}\n\nfunction formatHeader(header) {\n  return header.trim()\n    .toLowerCase().replace(/([a-z\\d])(\\w*)/g, (w, char, str) => {\n      return char.toUpperCase() + str;\n    });\n}\n\nfunction buildAccessors(obj, header) {\n  const accessorName = utils.toCamelCase(' ' + header);\n\n  ['get', 'set', 'has'].forEach(methodName => {\n    Object.defineProperty(obj, methodName + accessorName, {\n      value: function(arg1, arg2, arg3) {\n        return this[methodName].call(this, header, arg1, arg2, arg3);\n      },\n      configurable: true\n    });\n  });\n}\n\nclass AxiosHeaders {\n  constructor(headers) {\n    headers && this.set(headers);\n  }\n\n  set(header, valueOrRewrite, rewrite) {\n    const self = this;\n\n    function setHeader(_value, _header, _rewrite) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!lHeader) {\n        throw new Error('header name must be a non-empty string');\n      }\n\n      const key = utils.findKey(self, lHeader);\n\n      if(!key || self[key] === undefined || _rewrite === true || (_rewrite === undefined && self[key] !== false)) {\n        self[key || _header] = normalizeValue(_value);\n      }\n    }\n\n    const setHeaders = (headers, _rewrite) =>\n      utils.forEach(headers, (_value, _header) => setHeader(_value, _header, _rewrite));\n\n    if (utils.isPlainObject(header) || header instanceof this.constructor) {\n      setHeaders(header, valueOrRewrite)\n    } else if(utils.isString(header) && (header = header.trim()) && !isValidHeaderName(header)) {\n      setHeaders(parseHeaders(header), valueOrRewrite);\n    } else {\n      header != null && setHeader(valueOrRewrite, header, rewrite);\n    }\n\n    return this;\n  }\n\n  get(header, parser) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils.findKey(this, header);\n\n      if (key) {\n        const value = this[key];\n\n        if (!parser) {\n          return value;\n        }\n\n        if (parser === true) {\n          return parseTokens(value);\n        }\n\n        if (utils.isFunction(parser)) {\n          return parser.call(this, value, key);\n        }\n\n        if (utils.isRegExp(parser)) {\n          return parser.exec(value);\n        }\n\n        throw new TypeError('parser must be boolean|regexp|function');\n      }\n    }\n  }\n\n  has(header, matcher) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils.findKey(this, header);\n\n      return !!(key && this[key] !== undefined && (!matcher || matchHeaderValue(this, this[key], key, matcher)));\n    }\n\n    return false;\n  }\n\n  delete(header, matcher) {\n    const self = this;\n    let deleted = false;\n\n    function deleteHeader(_header) {\n      _header = normalizeHeader(_header);\n\n      if (_header) {\n        const key = utils.findKey(self, _header);\n\n        if (key && (!matcher || matchHeaderValue(self, self[key], key, matcher))) {\n          delete self[key];\n\n          deleted = true;\n        }\n      }\n    }\n\n    if (utils.isArray(header)) {\n      header.forEach(deleteHeader);\n    } else {\n      deleteHeader(header);\n    }\n\n    return deleted;\n  }\n\n  clear(matcher) {\n    const keys = Object.keys(this);\n    let i = keys.length;\n    let deleted = false;\n\n    while (i--) {\n      const key = keys[i];\n      if(!matcher || matchHeaderValue(this, this[key], key, matcher, true)) {\n        delete this[key];\n        deleted = true;\n      }\n    }\n\n    return deleted;\n  }\n\n  normalize(format) {\n    const self = this;\n    const headers = {};\n\n    utils.forEach(this, (value, header) => {\n      const key = utils.findKey(headers, header);\n\n      if (key) {\n        self[key] = normalizeValue(value);\n        delete self[header];\n        return;\n      }\n\n      const normalized = format ? formatHeader(header) : String(header).trim();\n\n      if (normalized !== header) {\n        delete self[header];\n      }\n\n      self[normalized] = normalizeValue(value);\n\n      headers[normalized] = true;\n    });\n\n    return this;\n  }\n\n  concat(...targets) {\n    return this.constructor.concat(this, ...targets);\n  }\n\n  toJSON(asStrings) {\n    const obj = Object.create(null);\n\n    utils.forEach(this, (value, header) => {\n      value != null && value !== false && (obj[header] = asStrings && utils.isArray(value) ? value.join(', ') : value);\n    });\n\n    return obj;\n  }\n\n  [Symbol.iterator]() {\n    return Object.entries(this.toJSON())[Symbol.iterator]();\n  }\n\n  toString() {\n    return Object.entries(this.toJSON()).map(([header, value]) => header + ': ' + value).join('\\n');\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'AxiosHeaders';\n  }\n\n  static from(thing) {\n    return thing instanceof this ? thing : new this(thing);\n  }\n\n  static concat(first, ...targets) {\n    const computed = new this(first);\n\n    targets.forEach((target) => computed.set(target));\n\n    return computed;\n  }\n\n  static accessor(header) {\n    const internals = this[$internals] = (this[$internals] = {\n      accessors: {}\n    });\n\n    const accessors = internals.accessors;\n    const prototype = this.prototype;\n\n    function defineAccessor(_header) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!accessors[lHeader]) {\n        buildAccessors(prototype, _header);\n        accessors[lHeader] = true;\n      }\n    }\n\n    utils.isArray(header) ? header.forEach(defineAccessor) : defineAccessor(header);\n\n    return this;\n  }\n}\n\nAxiosHeaders.accessor(['Content-Type', 'Content-Length', 'Accept', 'Accept-Encoding', 'User-Agent', 'Authorization']);\n\n// reserved names hotfix\nutils.reduceDescriptors(AxiosHeaders.prototype, ({value}, key) => {\n  let mapped = key[0].toUpperCase() + key.slice(1); // map `set` => `Set`\n  return {\n    get: () => value,\n    set(headerValue) {\n      this[mapped] = headerValue;\n    }\n  }\n});\n\nutils.freezeMethods(AxiosHeaders);\n\nexport default AxiosHeaders;\n","'use strict';\n\nimport utils from './../utils.js';\nimport defaults from '../defaults/index.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Array|Function} fns A single function or Array of functions\n * @param {?Object} response The response object\n *\n * @returns {*} The resulting transformed data\n */\nexport default function transformData(fns, response) {\n  const config = this || defaults;\n  const context = response || config;\n  const headers = AxiosHeaders.from(context.headers);\n  let data = context.data;\n\n  utils.forEach(fns, function transform(fn) {\n    data = fn.call(config, data, headers.normalize(), response ? response.status : undefined);\n  });\n\n  headers.normalize();\n\n  return data;\n}\n","'use strict';\n\nexport default function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n}\n","'use strict';\n\nimport AxiosError from '../core/AxiosError.js';\nimport utils from '../utils.js';\n\n/**\n * A `CanceledError` is an object that is thrown when an operation is canceled.\n *\n * @param {string=} message The message.\n * @param {Object=} config The config.\n * @param {Object=} request The request.\n *\n * @returns {CanceledError} The created error.\n */\nfunction CanceledError(message, config, request) {\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  AxiosError.call(this, message == null ? 'canceled' : message, AxiosError.ERR_CANCELED, config, request);\n  this.name = 'CanceledError';\n}\n\nutils.inherits(CanceledError, AxiosError, {\n  __CANCEL__: true\n});\n\nexport default CanceledError;\n","import utils from './../utils.js';\nimport platform from '../platform/index.js';\n\nexport default platform.hasStandardBrowserEnv ?\n\n  // Standard browser envs support document.cookie\n  {\n    write(name, value, expires, path, domain, secure) {\n      const cookie = [name + '=' + encodeURIComponent(value)];\n\n      utils.isNumber(expires) && cookie.push('expires=' + new Date(expires).toGMTString());\n\n      utils.isString(path) && cookie.push('path=' + path);\n\n      utils.isString(domain) && cookie.push('domain=' + domain);\n\n      secure === true && cookie.push('secure');\n\n      document.cookie = cookie.join('; ');\n    },\n\n    read(name) {\n      const match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n      return (match ? decodeURIComponent(match[3]) : null);\n    },\n\n    remove(name) {\n      this.write(name, '', Date.now() - 86400000);\n    }\n  }\n\n  :\n\n  // Non-standard browser env (web workers, react-native) lack needed support.\n  {\n    write() {},\n    read() {\n      return null;\n    },\n    remove() {}\n  };\n\n","'use strict';\n\nimport isAbsoluteURL from '../helpers/isAbsoluteURL.js';\nimport combineURLs from '../helpers/combineURLs.js';\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n *\n * @returns {string} The combined full path\n */\nexport default function buildFullPath(baseURL, requestedURL) {\n  if (baseURL && !isAbsoluteURL(requestedURL)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n}\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n *\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nexport default function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d+\\-.]*:)?\\/\\//i.test(url);\n}\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n *\n * @returns {string} The combined URL\n */\nexport default function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n}\n","'use strict';\n\nimport utils from './../utils.js';\nimport platform from '../platform/index.js';\n\nexport default platform.hasStandardBrowserEnv ?\n\n// Standard browser envs have full support of the APIs needed to test\n// whether the request URL is of the same origin as current location.\n  (function standardBrowserEnv() {\n    const msie = /(msie|trident)/i.test(navigator.userAgent);\n    const urlParsingNode = document.createElement('a');\n    let originURL;\n\n    /**\n    * Parse a URL to discover its components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n    function resolveURL(url) {\n      let href = url;\n\n      if (msie) {\n        // IE needs attribute set twice to normalize properties\n        urlParsingNode.setAttribute('href', href);\n        href = urlParsingNode.href;\n      }\n\n      urlParsingNode.setAttribute('href', href);\n\n      // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n      return {\n        href: urlParsingNode.href,\n        protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n        host: urlParsingNode.host,\n        search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n        hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n        hostname: urlParsingNode.hostname,\n        port: urlParsingNode.port,\n        pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n          urlParsingNode.pathname :\n          '/' + urlParsingNode.pathname\n      };\n    }\n\n    originURL = resolveURL(window.location.href);\n\n    /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n    return function isURLSameOrigin(requestURL) {\n      const parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n      return (parsed.protocol === originURL.protocol &&\n          parsed.host === originURL.host);\n    };\n  })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n  (function nonStandardBrowserEnv() {\n    return function isURLSameOrigin() {\n      return true;\n    };\n  })();\n","'use strict';\n\n/**\n * Calculate data maxRate\n * @param {Number} [samplesCount= 10]\n * @param {Number} [min= 1000]\n * @returns {Function}\n */\nfunction speedometer(samplesCount, min) {\n  samplesCount = samplesCount || 10;\n  const bytes = new Array(samplesCount);\n  const timestamps = new Array(samplesCount);\n  let head = 0;\n  let tail = 0;\n  let firstSampleTS;\n\n  min = min !== undefined ? min : 1000;\n\n  return function push(chunkLength) {\n    const now = Date.now();\n\n    const startedAt = timestamps[tail];\n\n    if (!firstSampleTS) {\n      firstSampleTS = now;\n    }\n\n    bytes[head] = chunkLength;\n    timestamps[head] = now;\n\n    let i = tail;\n    let bytesCount = 0;\n\n    while (i !== head) {\n      bytesCount += bytes[i++];\n      i = i % samplesCount;\n    }\n\n    head = (head + 1) % samplesCount;\n\n    if (head === tail) {\n      tail = (tail + 1) % samplesCount;\n    }\n\n    if (now - firstSampleTS < min) {\n      return;\n    }\n\n    const passed = startedAt && now - startedAt;\n\n    return passed ? Math.round(bytesCount * 1000 / passed) : undefined;\n  };\n}\n\nexport default speedometer;\n","'use strict';\n\nimport utils from './../utils.js';\nimport settle from './../core/settle.js';\nimport cookies from './../helpers/cookies.js';\nimport buildURL from './../helpers/buildURL.js';\nimport buildFullPath from '../core/buildFullPath.js';\nimport isURLSameOrigin from './../helpers/isURLSameOrigin.js';\nimport transitionalDefaults from '../defaults/transitional.js';\nimport AxiosError from '../core/AxiosError.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport parseProtocol from '../helpers/parseProtocol.js';\nimport platform from '../platform/index.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport speedometer from '../helpers/speedometer.js';\n\nfunction progressEventReducer(listener, isDownloadStream) {\n  let bytesNotified = 0;\n  const _speedometer = speedometer(50, 250);\n\n  return e => {\n    const loaded = e.loaded;\n    const total = e.lengthComputable ? e.total : undefined;\n    const progressBytes = loaded - bytesNotified;\n    const rate = _speedometer(progressBytes);\n    const inRange = loaded <= total;\n\n    bytesNotified = loaded;\n\n    const data = {\n      loaded,\n      total,\n      progress: total ? (loaded / total) : undefined,\n      bytes: progressBytes,\n      rate: rate ? rate : undefined,\n      estimated: rate && total && inRange ? (total - loaded) / rate : undefined,\n      event: e\n    };\n\n    data[isDownloadStream ? 'download' : 'upload'] = true;\n\n    listener(data);\n  };\n}\n\nconst isXHRAdapterSupported = typeof XMLHttpRequest !== 'undefined';\n\nexport default isXHRAdapterSupported && function (config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    let requestData = config.data;\n    const requestHeaders = AxiosHeaders.from(config.headers).normalize();\n    let {responseType, withXSRFToken} = config;\n    let onCanceled;\n    function done() {\n      if (config.cancelToken) {\n        config.cancelToken.unsubscribe(onCanceled);\n      }\n\n      if (config.signal) {\n        config.signal.removeEventListener('abort', onCanceled);\n      }\n    }\n\n    let contentType;\n\n    if (utils.isFormData(requestData)) {\n      if (platform.hasStandardBrowserEnv || platform.hasStandardBrowserWebWorkerEnv) {\n        requestHeaders.setContentType(false); // Let the browser set it\n      } else if ((contentType = requestHeaders.getContentType()) !== false) {\n        // fix semicolon duplication issue for ReactNative FormData implementation\n        const [type, ...tokens] = contentType ? contentType.split(';').map(token => token.trim()).filter(Boolean) : [];\n        requestHeaders.setContentType([type || 'multipart/form-data', ...tokens].join('; '));\n      }\n    }\n\n    let request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      const username = config.auth.username || '';\n      const password = config.auth.password ? unescape(encodeURIComponent(config.auth.password)) : '';\n      requestHeaders.set('Authorization', 'Basic ' + btoa(username + ':' + password));\n    }\n\n    const fullPath = buildFullPath(config.baseURL, config.url);\n\n    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    function onloadend() {\n      if (!request) {\n        return;\n      }\n      // Prepare the response\n      const responseHeaders = AxiosHeaders.from(\n        'getAllResponseHeaders' in request && request.getAllResponseHeaders()\n      );\n      const responseData = !responseType || responseType === 'text' || responseType === 'json' ?\n        request.responseText : request.response;\n      const response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config,\n        request\n      };\n\n      settle(function _resolve(value) {\n        resolve(value);\n        done();\n      }, function _reject(err) {\n        reject(err);\n        done();\n      }, response);\n\n      // Clean up request\n      request = null;\n    }\n\n    if ('onloadend' in request) {\n      // Use onloadend if available\n      request.onloadend = onloadend;\n    } else {\n      // Listen for ready state to emulate onloadend\n      request.onreadystatechange = function handleLoad() {\n        if (!request || request.readyState !== 4) {\n          return;\n        }\n\n        // The request errored out and we didn't get a response, this will be\n        // handled by onerror instead\n        // With one exception: request that using file: protocol, most browsers\n        // will return status as 0 even though it's a successful request\n        if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n          return;\n        }\n        // readystate handler is calling before onerror or ontimeout handlers,\n        // so we should call onloadend on the next 'tick'\n        setTimeout(onloadend);\n      };\n    }\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(new AxiosError('Request aborted', AxiosError.ECONNABORTED, config, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(new AxiosError('Network Error', AxiosError.ERR_NETWORK, config, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      let timeoutErrorMessage = config.timeout ? 'timeout of ' + config.timeout + 'ms exceeded' : 'timeout exceeded';\n      const transitional = config.transitional || transitionalDefaults;\n      if (config.timeoutErrorMessage) {\n        timeoutErrorMessage = config.timeoutErrorMessage;\n      }\n      reject(new AxiosError(\n        timeoutErrorMessage,\n        transitional.clarifyTimeoutError ? AxiosError.ETIMEDOUT : AxiosError.ECONNABORTED,\n        config,\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if(platform.hasStandardBrowserEnv) {\n      withXSRFToken && utils.isFunction(withXSRFToken) && (withXSRFToken = withXSRFToken(config));\n\n      if (withXSRFToken || (withXSRFToken !== false && isURLSameOrigin(fullPath))) {\n        // Add xsrf header\n        const xsrfValue = config.xsrfHeaderName && config.xsrfCookieName && cookies.read(config.xsrfCookieName);\n\n        if (xsrfValue) {\n          requestHeaders.set(config.xsrfHeaderName, xsrfValue);\n        }\n      }\n    }\n\n    // Remove Content-Type if data is undefined\n    requestData === undefined && requestHeaders.setContentType(null);\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders.toJSON(), function setRequestHeader(val, key) {\n        request.setRequestHeader(key, val);\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(config.withCredentials)) {\n      request.withCredentials = !!config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (responseType && responseType !== 'json') {\n      request.responseType = config.responseType;\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', progressEventReducer(config.onDownloadProgress, true));\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', progressEventReducer(config.onUploadProgress));\n    }\n\n    if (config.cancelToken || config.signal) {\n      // Handle cancellation\n      // eslint-disable-next-line func-names\n      onCanceled = cancel => {\n        if (!request) {\n          return;\n        }\n        reject(!cancel || cancel.type ? new CanceledError(null, config, request) : cancel);\n        request.abort();\n        request = null;\n      };\n\n      config.cancelToken && config.cancelToken.subscribe(onCanceled);\n      if (config.signal) {\n        config.signal.aborted ? onCanceled() : config.signal.addEventListener('abort', onCanceled);\n      }\n    }\n\n    const protocol = parseProtocol(fullPath);\n\n    if (protocol && platform.protocols.indexOf(protocol) === -1) {\n      reject(new AxiosError('Unsupported protocol ' + protocol + ':', AxiosError.ERR_BAD_REQUEST, config));\n      return;\n    }\n\n\n    // Send the request\n    request.send(requestData || null);\n  });\n}\n","import utils from '../utils.js';\nimport httpAdapter from './http.js';\nimport xhrAdapter from './xhr.js';\nimport AxiosError from \"../core/AxiosError.js\";\n\nconst knownAdapters = {\n  http: httpAdapter,\n  xhr: xhrAdapter\n}\n\nutils.forEach(knownAdapters, (fn, value) => {\n  if (fn) {\n    try {\n      Object.defineProperty(fn, 'name', {value});\n    } catch (e) {\n      // eslint-disable-next-line no-empty\n    }\n    Object.defineProperty(fn, 'adapterName', {value});\n  }\n});\n\nconst renderReason = (reason) => `- ${reason}`;\n\nconst isResolvedHandle = (adapter) => utils.isFunction(adapter) || adapter === null || adapter === false;\n\nexport default {\n  getAdapter: (adapters) => {\n    adapters = utils.isArray(adapters) ? adapters : [adapters];\n\n    const {length} = adapters;\n    let nameOrAdapter;\n    let adapter;\n\n    const rejectedReasons = {};\n\n    for (let i = 0; i < length; i++) {\n      nameOrAdapter = adapters[i];\n      let id;\n\n      adapter = nameOrAdapter;\n\n      if (!isResolvedHandle(nameOrAdapter)) {\n        adapter = knownAdapters[(id = String(nameOrAdapter)).toLowerCase()];\n\n        if (adapter === undefined) {\n          throw new AxiosError(`Unknown adapter '${id}'`);\n        }\n      }\n\n      if (adapter) {\n        break;\n      }\n\n      rejectedReasons[id || '#' + i] = adapter;\n    }\n\n    if (!adapter) {\n\n      const reasons = Object.entries(rejectedReasons)\n        .map(([id, state]) => `adapter ${id} ` +\n          (state === false ? 'is not supported by the environment' : 'is not available in the build')\n        );\n\n      let s = length ?\n        (reasons.length > 1 ? 'since :\\n' + reasons.map(renderReason).join('\\n') : ' ' + renderReason(reasons[0])) :\n        'as no adapter specified';\n\n      throw new AxiosError(\n        `There is no suitable adapter to dispatch the request ` + s,\n        'ERR_NOT_SUPPORT'\n      );\n    }\n\n    return adapter;\n  },\n  adapters: knownAdapters\n}\n","// eslint-disable-next-line strict\nexport default null;\n","'use strict';\n\nimport AxiosError from './AxiosError.js';\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n *\n * @returns {object} The response.\n */\nexport default function settle(resolve, reject, response) {\n  const validateStatus = response.config.validateStatus;\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(new AxiosError(\n      'Request failed with status code ' + response.status,\n      [AxiosError.ERR_BAD_REQUEST, AxiosError.ERR_BAD_RESPONSE][Math.floor(response.status / 100) - 4],\n      response.config,\n      response.request,\n      response\n    ));\n  }\n}\n","'use strict';\n\nexport default function parseProtocol(url) {\n  const match = /^([-+\\w]{1,25})(:?\\/\\/|:)/.exec(url);\n  return match && match[1] || '';\n}\n","'use strict';\n\nimport transformData from './transformData.js';\nimport isCancel from '../cancel/isCancel.js';\nimport defaults from '../defaults/index.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport adapters from \"../adapters/adapters.js\";\n\n/**\n * Throws a `CanceledError` if cancellation has been requested.\n *\n * @param {Object} config The config that is to be used for the request\n *\n * @returns {void}\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n\n  if (config.signal && config.signal.aborted) {\n    throw new CanceledError(null, config);\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n *\n * @returns {Promise} The Promise to be fulfilled\n */\nexport default function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  config.headers = AxiosHeaders.from(config.headers);\n\n  // Transform request data\n  config.data = transformData.call(\n    config,\n    config.transformRequest\n  );\n\n  if (['post', 'put', 'patch'].indexOf(config.method) !== -1) {\n    config.headers.setContentType('application/x-www-form-urlencoded', false);\n  }\n\n  const adapter = adapters.getAdapter(config.adapter || defaults.adapter);\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData.call(\n      config,\n      config.transformResponse,\n      response\n    );\n\n    response.headers = AxiosHeaders.from(response.headers);\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData.call(\n          config,\n          config.transformResponse,\n          reason.response\n        );\n        reason.response.headers = AxiosHeaders.from(reason.response.headers);\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n}\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosHeaders from \"./AxiosHeaders.js\";\n\nconst headersToObject = (thing) => thing instanceof AxiosHeaders ? thing.toJSON() : thing;\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n *\n * @returns {Object} New object resulting from merging config2 to config1\n */\nexport default function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  const config = {};\n\n  function getMergedValue(target, source, caseless) {\n    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {\n      return utils.merge.call({caseless}, target, source);\n    } else if (utils.isPlainObject(source)) {\n      return utils.merge({}, source);\n    } else if (utils.isArray(source)) {\n      return source.slice();\n    }\n    return source;\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDeepProperties(a, b, caseless) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(a, b, caseless);\n    } else if (!utils.isUndefined(a)) {\n      return getMergedValue(undefined, a, caseless);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function valueFromConfig2(a, b) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function defaultToConfig2(a, b) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    } else if (!utils.isUndefined(a)) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDirectKeys(a, b, prop) {\n    if (prop in config2) {\n      return getMergedValue(a, b);\n    } else if (prop in config1) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  const mergeMap = {\n    url: valueFromConfig2,\n    method: valueFromConfig2,\n    data: valueFromConfig2,\n    baseURL: defaultToConfig2,\n    transformRequest: defaultToConfig2,\n    transformResponse: defaultToConfig2,\n    paramsSerializer: defaultToConfig2,\n    timeout: defaultToConfig2,\n    timeoutMessage: defaultToConfig2,\n    withCredentials: defaultToConfig2,\n    withXSRFToken: defaultToConfig2,\n    adapter: defaultToConfig2,\n    responseType: defaultToConfig2,\n    xsrfCookieName: defaultToConfig2,\n    xsrfHeaderName: defaultToConfig2,\n    onUploadProgress: defaultToConfig2,\n    onDownloadProgress: defaultToConfig2,\n    decompress: defaultToConfig2,\n    maxContentLength: defaultToConfig2,\n    maxBodyLength: defaultToConfig2,\n    beforeRedirect: defaultToConfig2,\n    transport: defaultToConfig2,\n    httpAgent: defaultToConfig2,\n    httpsAgent: defaultToConfig2,\n    cancelToken: defaultToConfig2,\n    socketPath: defaultToConfig2,\n    responseEncoding: defaultToConfig2,\n    validateStatus: mergeDirectKeys,\n    headers: (a, b) => mergeDeepProperties(headersToObject(a), headersToObject(b), true)\n  };\n\n  utils.forEach(Object.keys(Object.assign({}, config1, config2)), function computeConfigValue(prop) {\n    const merge = mergeMap[prop] || mergeDeepProperties;\n    const configValue = merge(config1[prop], config2[prop], prop);\n    (utils.isUndefined(configValue) && merge !== mergeDirectKeys) || (config[prop] = configValue);\n  });\n\n  return config;\n}\n","export const VERSION = \"1.6.2\";","'use strict';\n\nimport {VERSION} from '../env/data.js';\nimport AxiosError from '../core/AxiosError.js';\n\nconst validators = {};\n\n// eslint-disable-next-line func-names\n['object', 'boolean', 'number', 'function', 'string', 'symbol'].forEach((type, i) => {\n  validators[type] = function validator(thing) {\n    return typeof thing === type || 'a' + (i < 1 ? 'n ' : ' ') + type;\n  };\n});\n\nconst deprecatedWarnings = {};\n\n/**\n * Transitional option validator\n *\n * @param {function|boolean?} validator - set to false if the transitional option has been removed\n * @param {string?} version - deprecated version / removed since version\n * @param {string?} message - some message with additional info\n *\n * @returns {function}\n */\nvalidators.transitional = function transitional(validator, version, message) {\n  function formatMessage(opt, desc) {\n    return '[Axios v' + VERSION + '] Transitional option \\'' + opt + '\\'' + desc + (message ? '. ' + message : '');\n  }\n\n  // eslint-disable-next-line func-names\n  return (value, opt, opts) => {\n    if (validator === false) {\n      throw new AxiosError(\n        formatMessage(opt, ' has been removed' + (version ? ' in ' + version : '')),\n        AxiosError.ERR_DEPRECATED\n      );\n    }\n\n    if (version && !deprecatedWarnings[opt]) {\n      deprecatedWarnings[opt] = true;\n      // eslint-disable-next-line no-console\n      console.warn(\n        formatMessage(\n          opt,\n          ' has been deprecated since v' + version + ' and will be removed in the near future'\n        )\n      );\n    }\n\n    return validator ? validator(value, opt, opts) : true;\n  };\n};\n\n/**\n * Assert object's properties type\n *\n * @param {object} options\n * @param {object} schema\n * @param {boolean?} allowUnknown\n *\n * @returns {object}\n */\n\nfunction assertOptions(options, schema, allowUnknown) {\n  if (typeof options !== 'object') {\n    throw new AxiosError('options must be an object', AxiosError.ERR_BAD_OPTION_VALUE);\n  }\n  const keys = Object.keys(options);\n  let i = keys.length;\n  while (i-- > 0) {\n    const opt = keys[i];\n    const validator = schema[opt];\n    if (validator) {\n      const value = options[opt];\n      const result = value === undefined || validator(value, opt, options);\n      if (result !== true) {\n        throw new AxiosError('option ' + opt + ' must be ' + result, AxiosError.ERR_BAD_OPTION_VALUE);\n      }\n      continue;\n    }\n    if (allowUnknown !== true) {\n      throw new AxiosError('Unknown option ' + opt, AxiosError.ERR_BAD_OPTION);\n    }\n  }\n}\n\nexport default {\n  assertOptions,\n  validators\n};\n","'use strict';\n\nimport utils from './../utils.js';\nimport buildURL from '../helpers/buildURL.js';\nimport InterceptorManager from './InterceptorManager.js';\nimport dispatchRequest from './dispatchRequest.js';\nimport mergeConfig from './mergeConfig.js';\nimport buildFullPath from './buildFullPath.js';\nimport validator from '../helpers/validator.js';\nimport AxiosHeaders from './AxiosHeaders.js';\n\nconst validators = validator.validators;\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n *\n * @return {Axios} A new instance of Axios\n */\nclass Axios {\n  constructor(instanceConfig) {\n    this.defaults = instanceConfig;\n    this.interceptors = {\n      request: new InterceptorManager(),\n      response: new InterceptorManager()\n    };\n  }\n\n  /**\n   * Dispatch a request\n   *\n   * @param {String|Object} configOrUrl The config specific for this request (merged with this.defaults)\n   * @param {?Object} config\n   *\n   * @returns {Promise} The Promise to be fulfilled\n   */\n  request(configOrUrl, config) {\n    /*eslint no-param-reassign:0*/\n    // Allow for axios('example/url'[, config]) a la fetch API\n    if (typeof configOrUrl === 'string') {\n      config = config || {};\n      config.url = configOrUrl;\n    } else {\n      config = configOrUrl || {};\n    }\n\n    config = mergeConfig(this.defaults, config);\n\n    const {transitional, paramsSerializer, headers} = config;\n\n    if (transitional !== undefined) {\n      validator.assertOptions(transitional, {\n        silentJSONParsing: validators.transitional(validators.boolean),\n        forcedJSONParsing: validators.transitional(validators.boolean),\n        clarifyTimeoutError: validators.transitional(validators.boolean)\n      }, false);\n    }\n\n    if (paramsSerializer != null) {\n      if (utils.isFunction(paramsSerializer)) {\n        config.paramsSerializer = {\n          serialize: paramsSerializer\n        }\n      } else {\n        validator.assertOptions(paramsSerializer, {\n          encode: validators.function,\n          serialize: validators.function\n        }, true);\n      }\n    }\n\n    // Set config.method\n    config.method = (config.method || this.defaults.method || 'get').toLowerCase();\n\n    // Flatten headers\n    let contextHeaders = headers && utils.merge(\n      headers.common,\n      headers[config.method]\n    );\n\n    headers && utils.forEach(\n      ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n      (method) => {\n        delete headers[method];\n      }\n    );\n\n    config.headers = AxiosHeaders.concat(contextHeaders, headers);\n\n    // filter out skipped interceptors\n    const requestInterceptorChain = [];\n    let synchronousRequestInterceptors = true;\n    this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n      if (typeof interceptor.runWhen === 'function' && interceptor.runWhen(config) === false) {\n        return;\n      }\n\n      synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;\n\n      requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    const responseInterceptorChain = [];\n    this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n      responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    let promise;\n    let i = 0;\n    let len;\n\n    if (!synchronousRequestInterceptors) {\n      const chain = [dispatchRequest.bind(this), undefined];\n      chain.unshift.apply(chain, requestInterceptorChain);\n      chain.push.apply(chain, responseInterceptorChain);\n      len = chain.length;\n\n      promise = Promise.resolve(config);\n\n      while (i < len) {\n        promise = promise.then(chain[i++], chain[i++]);\n      }\n\n      return promise;\n    }\n\n    len = requestInterceptorChain.length;\n\n    let newConfig = config;\n\n    i = 0;\n\n    while (i < len) {\n      const onFulfilled = requestInterceptorChain[i++];\n      const onRejected = requestInterceptorChain[i++];\n      try {\n        newConfig = onFulfilled(newConfig);\n      } catch (error) {\n        onRejected.call(this, error);\n        break;\n      }\n    }\n\n    try {\n      promise = dispatchRequest.call(this, newConfig);\n    } catch (error) {\n      return Promise.reject(error);\n    }\n\n    i = 0;\n    len = responseInterceptorChain.length;\n\n    while (i < len) {\n      promise = promise.then(responseInterceptorChain[i++], responseInterceptorChain[i++]);\n    }\n\n    return promise;\n  }\n\n  getUri(config) {\n    config = mergeConfig(this.defaults, config);\n    const fullPath = buildFullPath(config.baseURL, config.url);\n    return buildURL(fullPath, config.params, config.paramsSerializer);\n  }\n}\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(mergeConfig(config || {}, {\n      method,\n      url,\n      data: (config || {}).data\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n\n  function generateHTTPMethod(isForm) {\n    return function httpMethod(url, data, config) {\n      return this.request(mergeConfig(config || {}, {\n        method,\n        headers: isForm ? {\n          'Content-Type': 'multipart/form-data'\n        } : {},\n        url,\n        data\n      }));\n    };\n  }\n\n  Axios.prototype[method] = generateHTTPMethod();\n\n  Axios.prototype[method + 'Form'] = generateHTTPMethod(true);\n});\n\nexport default Axios;\n","'use strict';\n\nimport CanceledError from './CanceledError.js';\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @param {Function} executor The executor function.\n *\n * @returns {CancelToken}\n */\nclass CancelToken {\n  constructor(executor) {\n    if (typeof executor !== 'function') {\n      throw new TypeError('executor must be a function.');\n    }\n\n    let resolvePromise;\n\n    this.promise = new Promise(function promiseExecutor(resolve) {\n      resolvePromise = resolve;\n    });\n\n    const token = this;\n\n    // eslint-disable-next-line func-names\n    this.promise.then(cancel => {\n      if (!token._listeners) return;\n\n      let i = token._listeners.length;\n\n      while (i-- > 0) {\n        token._listeners[i](cancel);\n      }\n      token._listeners = null;\n    });\n\n    // eslint-disable-next-line func-names\n    this.promise.then = onfulfilled => {\n      let _resolve;\n      // eslint-disable-next-line func-names\n      const promise = new Promise(resolve => {\n        token.subscribe(resolve);\n        _resolve = resolve;\n      }).then(onfulfilled);\n\n      promise.cancel = function reject() {\n        token.unsubscribe(_resolve);\n      };\n\n      return promise;\n    };\n\n    executor(function cancel(message, config, request) {\n      if (token.reason) {\n        // Cancellation has already been requested\n        return;\n      }\n\n      token.reason = new CanceledError(message, config, request);\n      resolvePromise(token.reason);\n    });\n  }\n\n  /**\n   * Throws a `CanceledError` if cancellation has been requested.\n   */\n  throwIfRequested() {\n    if (this.reason) {\n      throw this.reason;\n    }\n  }\n\n  /**\n   * Subscribe to the cancel signal\n   */\n\n  subscribe(listener) {\n    if (this.reason) {\n      listener(this.reason);\n      return;\n    }\n\n    if (this._listeners) {\n      this._listeners.push(listener);\n    } else {\n      this._listeners = [listener];\n    }\n  }\n\n  /**\n   * Unsubscribe from the cancel signal\n   */\n\n  unsubscribe(listener) {\n    if (!this._listeners) {\n      return;\n    }\n    const index = this._listeners.indexOf(listener);\n    if (index !== -1) {\n      this._listeners.splice(index, 1);\n    }\n  }\n\n  /**\n   * Returns an object that contains a new `CancelToken` and a function that, when called,\n   * cancels the `CancelToken`.\n   */\n  static source() {\n    let cancel;\n    const token = new CancelToken(function executor(c) {\n      cancel = c;\n    });\n    return {\n      token,\n      cancel\n    };\n  }\n}\n\nexport default CancelToken;\n","const HttpStatusCode = {\n  Continue: 100,\n  SwitchingProtocols: 101,\n  Processing: 102,\n  EarlyHints: 103,\n  Ok: 200,\n  Created: 201,\n  Accepted: 202,\n  NonAuthoritativeInformation: 203,\n  NoContent: 204,\n  ResetContent: 205,\n  PartialContent: 206,\n  MultiStatus: 207,\n  AlreadyReported: 208,\n  ImUsed: 226,\n  MultipleChoices: 300,\n  MovedPermanently: 301,\n  Found: 302,\n  SeeOther: 303,\n  NotModified: 304,\n  UseProxy: 305,\n  Unused: 306,\n  TemporaryRedirect: 307,\n  PermanentRedirect: 308,\n  BadRequest: 400,\n  Unauthorized: 401,\n  PaymentRequired: 402,\n  Forbidden: 403,\n  NotFound: 404,\n  MethodNotAllowed: 405,\n  NotAcceptable: 406,\n  ProxyAuthenticationRequired: 407,\n  RequestTimeout: 408,\n  Conflict: 409,\n  Gone: 410,\n  LengthRequired: 411,\n  PreconditionFailed: 412,\n  PayloadTooLarge: 413,\n  UriTooLong: 414,\n  UnsupportedMediaType: 415,\n  RangeNotSatisfiable: 416,\n  ExpectationFailed: 417,\n  ImATeapot: 418,\n  MisdirectedRequest: 421,\n  UnprocessableEntity: 422,\n  Locked: 423,\n  FailedDependency: 424,\n  TooEarly: 425,\n  UpgradeRequired: 426,\n  PreconditionRequired: 428,\n  TooManyRequests: 429,\n  RequestHeaderFieldsTooLarge: 431,\n  UnavailableForLegalReasons: 451,\n  InternalServerError: 500,\n  NotImplemented: 501,\n  BadGateway: 502,\n  ServiceUnavailable: 503,\n  GatewayTimeout: 504,\n  HttpVersionNotSupported: 505,\n  VariantAlsoNegotiates: 506,\n  InsufficientStorage: 507,\n  LoopDetected: 508,\n  NotExtended: 510,\n  NetworkAuthenticationRequired: 511,\n};\n\nObject.entries(HttpStatusCode).forEach(([key, value]) => {\n  HttpStatusCode[value] = key;\n});\n\nexport default HttpStatusCode;\n","'use strict';\n\nimport utils from './utils.js';\nimport bind from './helpers/bind.js';\nimport Axios from './core/Axios.js';\nimport mergeConfig from './core/mergeConfig.js';\nimport defaults from './defaults/index.js';\nimport formDataToJSON from './helpers/formDataToJSON.js';\nimport CanceledError from './cancel/CanceledError.js';\nimport CancelToken from './cancel/CancelToken.js';\nimport isCancel from './cancel/isCancel.js';\nimport {VERSION} from './env/data.js';\nimport toFormData from './helpers/toFormData.js';\nimport AxiosError from './core/AxiosError.js';\nimport spread from './helpers/spread.js';\nimport isAxiosError from './helpers/isAxiosError.js';\nimport AxiosHeaders from \"./core/AxiosHeaders.js\";\nimport adapters from './adapters/adapters.js';\nimport HttpStatusCode from './helpers/HttpStatusCode.js';\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n *\n * @returns {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  const context = new Axios(defaultConfig);\n  const instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context, {allOwnKeys: true});\n\n  // Copy context to instance\n  utils.extend(instance, context, null, {allOwnKeys: true});\n\n  // Factory for creating new instances\n  instance.create = function create(instanceConfig) {\n    return createInstance(mergeConfig(defaultConfig, instanceConfig));\n  };\n\n  return instance;\n}\n\n// Create the default instance to be exported\nconst axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Expose Cancel & CancelToken\naxios.CanceledError = CanceledError;\naxios.CancelToken = CancelToken;\naxios.isCancel = isCancel;\naxios.VERSION = VERSION;\naxios.toFormData = toFormData;\n\n// Expose AxiosError class\naxios.AxiosError = AxiosError;\n\n// alias for CanceledError for backward compatibility\naxios.Cancel = axios.CanceledError;\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\n\naxios.spread = spread;\n\n// Expose isAxiosError\naxios.isAxiosError = isAxiosError;\n\n// Expose mergeConfig\naxios.mergeConfig = mergeConfig;\n\naxios.AxiosHeaders = AxiosHeaders;\n\naxios.formToJSON = thing => formDataToJSON(utils.isHTMLForm(thing) ? new FormData(thing) : thing);\n\naxios.getAdapter = adapters.getAdapter;\n\naxios.HttpStatusCode = HttpStatusCode;\n\naxios.default = axios;\n\n// this module should only have a default export\nexport default axios\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n *\n * @returns {Function}\n */\nexport default function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\n/**\n * Determines whether the payload is an error thrown by Axios\n *\n * @param {*} payload The value to test\n *\n * @returns {boolean} True if the payload is an error thrown by Axios, otherwise false\n */\nexport default function isAxiosError(payload) {\n  return utils.isObject(payload) && (payload.isAxiosError === true);\n}\n","\r\nimport axios from 'axios';\r\nconst log = console; \r\nexport const __serverApi = '';\r\nexport const __isLocal = window.location.host == 'localhost';\r\ntop.__isLocal = __isLocal;\r\nclass WindowUtil{\r\n    #loginRemeber;\r\n    constructor(){\r\n\r\n    }\r\n    async isLogin(callback = () => {}){\r\n        if(this.#loginRemeber){\r\n            return Promise.resolve(callback(this.#loginRemeber));\r\n        }\r\n        return axios.get(__serverApi + '/api/account/search/is-login', {\r\n            headers:{\r\n                'Content-Type': 'application/json'\r\n            }\r\n        })\r\n        .catch(err=>{\r\n            return err.response\r\n        })\r\n        .then(response => {\r\n            if( ! this.responseIsOk(response)){\r\n                return callback({\r\n                    isLogin: false,\r\n                    status: response?.status,\r\n                    statusText: response?.statusText\r\n                });\r\n            }else{\r\n                if(response.data.code == 0){\r\n                    response.isLogin = true;\t\r\n                }else if(response.data.code == 100 || response.data.code == 105 || response.data.code == 106 || response.data.code == 107){\r\n                    response.isLogin = false;\r\n                }else{\r\n                    response.isLogin = false;\r\n                }\r\n\r\n                if(! response.isLogin){\r\n                    axios.defaults.headers.common['Authorization'] = '';\r\n                }else{\r\n                    this.#loginRemeber = response;\r\n                    setTimeout(()=>{\r\n                        this.#loginRemeber = undefined;\r\n                    }, 1000 * 60)\r\n                }\r\n                return callback(response);\r\n            }\r\n        })\r\n    }\r\n\r\n    responseIsOk({status = undefined} = {}){\r\n        if( ! status){\r\n            return false;\r\n        }\r\n        return (status == '200' || status == '201') ;\r\n    }\r\n\r\n    responseCheck(response){\r\n\t\tlet status = response.status;\r\n\t\tlet {code, data} = response.data;\r\n        if(status == '200' || status == '201'){\r\n\t\t\treturn response\r\n\t\t}else{\r\n            log.error(response);\r\n\t\t\tthrow new Error(response.message);\r\n\t\t}\r\n\t}\r\n    resetLoginRemeber(){\r\n        this.#loginRemeber = undefined;\r\n    }\r\n}\r\n\r\nexport const windowUtil = new WindowUtil();","import { windowUtil, __serverApi } from \"../window/windowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\n\r\nclass AccountController {\r\n\tconstructor() {\r\n\r\n\t}\r\n\r\n\tloginProcessing(param){\r\n\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\ttotal[k] = v;\r\n\t\t\t}\r\n\t\t\treturn total;\r\n\t\t},{});\r\n\t\treturn axios.post(__serverApi + '/login-processing', JSON.stringify(param), {\r\n\t\t\theaders:{\r\n\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t}\r\n\t\t})\r\n\t\t.then(response=>{\r\n\t\t\tif(windowUtil.responseIsOk(response) && top.constructor.name == 'Window'){\r\n\t\t\t\treturn response.data;\r\n\t\t\t}\r\n\t\t\treturn response;\t\r\n\t\t}).catch(err=>{\r\n\t\t\tlog.error('loginProcessing error : ', err.message);\r\n\t\t\taxios.defaults.headers.common['Authorization'] = '';\r\n\t\t\tconsole.log(err);\r\n\t\t\tif(err.response){\r\n\t\t\t\treturn err.response.data;\r\n\t\t\t}else{\r\n\t\t\t\treturn err.message\r\n\t\t\t}\r\n\t\t\t\r\n\t\t})\r\n\t}\r\n\tgetAccountInfo(){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/account/search/get-account-info`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response=>response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC getAccountInfo error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tupdateSimpleAccountInfo(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/account/update/simple-account-info`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createPermitWokrspaceInAccount error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n}\r\nexport const accountController = new AccountController();","import { windowUtil, __serverApi } from \"../window/windowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\n\r\nclass ApiS3Controller {\r\n\tconstructor() {\r\n\t}\r\n\tgenerateSecurityPutObjectPresignedUrl(param){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t}\r\n\t\t\t\treturn total;\r\n\t\t\t},{});\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/generate-presigned-url/create/security`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC sendChatting error', err);\r\n\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('sendChatting login error ::: ', error.message);\r\n\t\t\tlog.error('sendChatting login error stack ::: ', error.stack);\r\n\t\t\treturn undefined;\r\n\t\t});\r\n\t}\r\n\tgenerateSecurityGetObjectPresignedUrl(param){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t}\r\n\t\t\t\treturn total;\r\n\t\t\t},{});\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/generate-presigned-url/search/security`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC sendChatting error', err);\r\n\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('sendChatting login error ::: ', error.message);\r\n\t\t\tlog.error('sendChatting login error stack ::: ', error.stack);\r\n\t\t\treturn undefined;\r\n\t\t});\r\n\t}\r\n\tgenerateGetObjectPresignedUrl(param){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t}\r\n\t\t\t\treturn total;\r\n\t\t\t},{});\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/generate-presigned-url/create/`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC sendChatting error', err);\r\n\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('sendChatting login error ::: ', error.message);\r\n\t\t\tlog.error('sendChatting login error stack ::: ', error.stack);\r\n\t\t\treturn undefined;\r\n\t\t});\r\n\t}\r\n}\r\nexport const apiS3Controller = new ApiS3Controller();","import { windowUtil, __serverApi } from \"../window/windowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\n\r\nclass ChattingController {\r\n\tconstructor() {\r\n\r\n\t}\r\n\r\n\tsendChatting(param){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n                    if(v != undefined && v != ''){\r\n                        total[k] = v;\r\n                    }\r\n                    return total;\r\n                },{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/chatting/create/send-chatting`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC sendChatting error', err);\r\n\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('sendChatting login error ::: ', error.message);\r\n\t\t\tlog.error('sendChatting login error stack ::: ', error.stack);\r\n\t\t\treturn undefined;\r\n\t\t});\r\n\t}\t\r\n\tdeleteChatting(param){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n                    if(v != undefined && v != ''){\r\n                        total[k] = v;\r\n                    }\r\n                    return total;\r\n                },{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/chatting/delete/`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC sendChatting error', err);\r\n\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('sendChatting login error ::: ', error.message);\r\n\t\t\tlog.error('sendChatting login error stack ::: ', error.stack);\r\n\t\t\treturn undefined;\r\n\t\t});\r\n\t}\r\n\tsearchChattingList(param){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tlet {workspaceId, roomId} = param;\r\n\t\t\t\tlet queryString = Object.entries(param)\r\n\t\t\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId' && k != 'roomId')\r\n\t\t\t\t\t.map(([k,v]) => `${k}=${v}`).join('&')\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/chatting/search/chatting-list/${workspaceId}/${roomId}?${queryString}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC searchChatting error' , err);\r\n\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('searchChatting login error ::: ', error.message);\r\n\t\t\tlog.error('searchChatting login error stack ::: ', error.stack);\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n}\r\nexport const chattingController = new ChattingController();","import { windowUtil, __serverApi } from \"../window/windowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\n\r\nclass EmoticonController {\r\n\tconstructor() {\r\n    }\r\n\r\n\tcreateEmotionReaction(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/emoticon/create/reaction`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createEmotion error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n    deleteEmotion(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/emoticon/delete/`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC deleteEmotion error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tgetIsReaction(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tlet {workspaceId} = param;\r\n\t\t\t\tlet queryString = Object.entries(param)\r\n\t\t\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId')\r\n\t\t\t\t\t.map(([k,v]) => {\r\n\t\t\t\t\t\tif(v instanceof Array){\r\n\t\t\t\t\t\t\tv = v.map(val=>`${k}=${val}`).join('&')\r\n\t\t\t\t\t\t\treturn v;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn `${k}=${v}`\r\n\t\t\t\t\t}).join('&')\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/emoticon/search/is-reaction?${queryString}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC searchMyJoinedRoomList error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\t\r\n}\r\nexport const emoticonController = new EmoticonController();","import { windowUtil, __serverApi } from \"../window/windowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\n\r\n\r\nclass EventStreamController {\r\n    source;\r\n\tprevWorkspaceId;\r\n    constructor(){\r\n    }\r\n\r\n\tinitWorkspaceStream(param, EventSource, eventSendObj){\r\n        let {workspaceId} = param;\r\n        if( ! EventSource) EventSource = top?.EventSource;\r\n\t\tif(this.prevWorkspaceId == workspaceId && (this.source?.readyState == 1 || this.source?.readyState == 0)){\r\n            return;\r\n        }else if(this.prevWorkspaceId != workspaceId && (this.source?.readyState == 1 || this.source?.readyState == 0)){\r\n            this.source.close();\r\n        }\r\n        \r\n        this.prevWorkspaceId = workspaceId;\r\n\r\n        this.source = new EventSource(`${__serverApi}/api/event-stream/workspace/${workspaceId}`, {\r\n            headers: {\r\n                'Authorization' : axios.defaults.headers.common['Authorization'],\r\n            },\r\n            withCredentials : ! top.__isLocal\r\n        });\r\n\r\n        this.source.onmessage = (event) => {\r\n            let {data, lastEventId, origin, type} = event;\r\n            data = JSON.parse(data);\r\n            log.debug('event stream data ::: ', data);\r\n\r\n            let eventName = data.serverSentStreamType.split('_').map((e, i)=>{\r\n                if(i == 0){\r\n                    return e.toLowerCase(); \r\n                }\r\n                return e.charAt(0) + e.substring(1).toLowerCase();\r\n            }).join('');\r\n\r\n            log.debug('on message: ', event.data, 'eventName ::', eventName);\r\n\r\n            if(this[eventName]){\r\n                this[eventName](eventName, data);\r\n                return ;\r\n            }\r\n            if(eventSendObj.webEventSend){\r\n                eventSendObj.webEventSend(eventName, data);\r\n            }else{\r\n                eventSendObj.send(eventName, data);\r\n            }\r\n        };\r\n\r\n        this.source.onerror = (error) => {\r\n            log.error('on stream err: ', error);\r\n            log.error(error.message);\r\n            this.source = new EventSource(`${__serverApi}/api/event-stream/workspace/${workspaceId}`, {\r\n                headers: {\r\n                    'Authorization' : axios.defaults.headers.common['Authorization'],\r\n                },\r\n                withCredentials : ! top.__isLocal\r\n            });\r\n            //log.debug('source ::: ', this.source);\r\n            /*this.#isConnectSource = false;\r\n            windowUtil.isLogin( result => {\r\n                if( ! result.isLogin){\r\n                    axios.defaults.headers.common['Authorization'] = '';\r\n                    this.source.close();\r\n                    this.#send('needLoginRequest', result);\r\n                }\r\n            })*/\r\n            //연결 실패되면 계속 시도하기에 임시 조치로 close\r\n            //모바일 웹에서는 연결 실패 후 재시도 안하기에 수동 재시도로 변경\r\n            /*this.source.close();\r\n            */\r\n            //stop();\r\n        };\r\n        this.source.onopen = (success) => {\r\n            log.debug('on success: ', success)\r\n        }\r\n        /*\r\n        * This will listen only for events\r\n        * similar to the following:\r\n        *\r\n        * event: notice\r\n        * data: useful data\r\n        * id: someid\r\n        this.source.addEventListener(\"notice\", (e) => {\r\n            log.debug('event notice', e.data);\r\n        });\r\n        */\r\n\r\n        /*\r\n        * Similarly, this will listen for events\r\n        * with the field `event: update`\r\n        this.source.addEventListener(\"update\", (e) => {\r\n            log.debug('event update ::: ',e.data);\r\n        });\r\n        */\r\n\r\n        /*\r\n        * The event \"message\" is a special case, as it\r\n        * will capture events without an event field\r\n        * as well as events that have the specific type\r\n        * `event: message` It will not trigger on any\r\n        * other event type.\r\n        this.source.addEventListener(\"message\", (e) => {\r\n            log.debug('message !!!!! : ', e.data);\r\n        });\r\n        */\r\n        //}\r\n\t}\r\n\r\n}\r\n\r\n\r\n\r\nexport const eventStreamController = new EventStreamController();","import { windowUtil, __serverApi } from \"../window/windowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\nclass NoticeBoardController {\r\n\tconstructor() {\r\n\r\n    }\r\n\r\n    createNoticeBoardGroup(param = {}){\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                param = Object.entries(param).reduce((total, [k,v]) => {\r\n                    if(v != undefined && v != ''){\r\n                        total[k] = v;\r\n                    }\r\n                    return total;\r\n                },{});\r\n                return axios.post(`${__serverApi}/api/notice-board/create/group`, JSON.stringify(param), {\r\n                    headers:{\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                })\r\n                .then(windowUtil.responseCheck)\r\n                .then(response => response.data)\r\n                .catch(err=>{\r\n                    log.error('IPC createNoticeBoardGroup error : ', JSON.stringify(err));\r\n                    //axios.defaults.headers.common['Authorization'] = '';\r\n                    if(err.response){\r\n                        return err.response.data;\r\n                    }else{\r\n                        return err.message\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n    }\r\n\r\n    createNoticeBoard(param = {}){\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                param = Object.entries(param).reduce((total, [k,v]) => {\r\n                    if(v != undefined && v != ''){\r\n                        total[k] = v;\r\n                    }\r\n                    return total;\r\n                },{});\r\n                return axios.post(`${__serverApi}/api/notice-board/create/`, JSON.stringify(param), {\r\n                    headers:{\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                })\r\n                .then(windowUtil.responseCheck)\r\n                .then(response => response.data)\r\n                .catch(err=>{\r\n                    log.error('IPC createNoticeBoard error : ', JSON.stringify(err));\r\n                    //axios.defaults.headers.common['Authorization'] = '';\r\n                    if(err.response){\r\n                        return err.response.data;\r\n                    }else{\r\n                        return err.message\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n    }\r\n\r\n    createNoticeBoardDetail(param = {}){\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                param = Object.entries(param).reduce((total, [k,v]) => {\r\n                    if(v != undefined && v != ''){\r\n                        total[k] = v;\r\n                    }\r\n                    return total;\r\n                },{});\r\n                return axios.post(`${__serverApi}/api/notice-board/create/detail`, JSON.stringify(param), {\r\n                    headers:{\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                })\r\n                .then(windowUtil.responseCheck)\r\n                .then(response => response.data)\r\n                .catch(err=>{\r\n                    log.error('IPC createNoticeBoardDetail error : ', JSON.stringify(err));\r\n                    //axios.defaults.headers.common['Authorization'] = '';\r\n                    if(err.response){\r\n                        return err.response.data;\r\n                    }else{\r\n                        return err.message\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n    }\r\n    searchNoticeBoardList(param = {}, EventSource, eventSendObj){\r\n        if( ! EventSource) EventSource = top?.EventSource;\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                let {workspaceId, roomId} = param;\r\n                let queryString = Object.entries(param)\r\n                    .filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId' && k != 'roomId')\r\n                    .map(([k,v]) => `${k}=${v}`).join('&')\r\n                    //console.log('queryString ::: ', queryString);\r\n                //return axios.get(`${__serverApi}/api/notice-board/search/notice-board-list/${workspaceId}/${roomId}?${queryString}`, {\r\n                return new Promise(resolve=>{\r\n                    let source = new EventSource(`${__serverApi}/api/notice-board/search/notice-board-list/${workspaceId}/${roomId}?${queryString}`, {\r\n                        headers: {\r\n                            'Authorization' : axios.defaults.headers.common['Authorization'],\r\n                        },\r\n                        withCredentials : ! top.__isLocal\r\n                    });\r\n                    source.onmessage = (event) => {\r\n                        //console.log('test message :::: ',event);\r\n                        let {data, lastEventId, origin, type} = event;\r\n                        data = JSON.parse(data);\r\n                        if(eventSendObj.webEventSend){\r\n\t\t\t\t\t\t\teventSendObj.webEventSend('noticeBoardAccept', data);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\teventSendObj.send('noticeBoardAccept', data);\r\n\t\t\t\t\t\t}\r\n                    }\r\n                    source.onerror = (event) => {\r\n                        //console.log('searchNoticeBoardList error :::: ',event);\r\n                        source.close();\r\n                        resolve('done');\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n            log.error('error ::: ', error.message)\r\n            log.error('error stack :::', error.stack)\r\n            return undefined;\r\n        });\r\n    }\r\n\r\n    searchNoticeBoardDetailList(param = {}, EventSource, eventSendObj){\r\n        if( ! EventSource) EventSource = top?.EventSource;\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                let {workspaceId, roomId, noticeBoardId} = param;\r\n                if(! noticeBoardId){\r\n                    return;\r\n                }\r\n                let queryString = Object.entries(param)\r\n                    .filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId' && k != 'roomId' && k != 'noticeBoardId')\r\n                    .map(([k,v]) => `${k}=${v}`).join('&')\r\n                    //console.log('queryString ::: ', queryString);\r\n                //return axios.get(`${__serverApi}/api/notice-board/search/notice-board-detail-list/${workspaceId}/${roomId}/${noticeBoardId}?${queryString}`, {\r\n                return new Promise(resolve=>{\r\n                    let source = new EventSource(`${__serverApi}/api/notice-board/search/notice-board-detail-list/${workspaceId}/${roomId}/${noticeBoardId}?${queryString}`, {\r\n                        headers: {\r\n                            'Authorization' : axios.defaults.headers.common['Authorization'],\r\n                        },\r\n                        withCredentials : ! top.__isLocal\r\n                    });\r\n                    source.onmessage = (event) => {\r\n                        //console.log('test message :::: ',event);\r\n                        let {data, lastEventId, origin, type} = event;\r\n                        data = JSON.parse(data);\r\n                        if(eventSendObj.webEventSend){\r\n\t\t\t\t\t\t\teventSendObj.webEventSend('noticeBoardDetailAccept', data);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\teventSendObj.send('noticeBoardDetailAccept', data);\r\n\t\t\t\t\t\t}\r\n                    }\r\n                    source.onerror = (event) => {\r\n                        console.log('searchNoticeBoardDetailList error :::: ',event);\r\n                        source.close();\r\n                        resolve('done');\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n            log.error('error ::: ', error.message)\r\n            log.error('error stack :::', error.stack)\r\n            return undefined;\r\n        });\r\n    }\r\n\r\n    deleteNoticeBoard(param = {}){\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                param = Object.entries(param).reduce((total, [k,v]) => {\r\n                    if(v != undefined && v != ''){\r\n                        total[k] = v;\r\n                    }\r\n                    return total;\r\n                },{});\r\n                console.log('delete param',param)\r\n                return axios.post(`${__serverApi}/api/notice-board/delete/`, JSON.stringify(param), {\r\n                    headers:{\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                })\r\n                .then(windowUtil.responseCheck)\r\n                .then(response => response.data)\r\n                .catch(err=>{\r\n                    log.error('IPC deleteNoticeBoard error : ', JSON.stringify(err));\r\n                    //axios.defaults.headers.common['Authorization'] = '';\r\n                    if(err.response){\r\n                        return err.response.data;\r\n                    }else{\r\n                        return err.message\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n    }\r\n    deleteNoticeBoardGroup(param = {}){\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                param = Object.entries(param).reduce((total, [k,v]) => {\r\n                    if(v != undefined && v != ''){\r\n                        total[k] = v;\r\n                    }\r\n                    return total;\r\n                },{});\r\n\r\n                return axios.post(`${__serverApi}/api/notice-board/delete/group`, JSON.stringify(param), {\r\n                    headers:{\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                })\r\n                .then(windowUtil.responseCheck)\r\n                .then(response => response.data)\r\n                .catch(err=>{\r\n                    log.error('IPC deleteNoticeBoardGroup error : ', JSON.stringify(err));\r\n                    //axios.defaults.headers.common['Authorization'] = '';\r\n                    if(err.response){\r\n                        return err.response.data;\r\n                    }else{\r\n                        return err.message\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n    }\r\n    updateNoticeBoardOrder(param = []){\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                console.log('update param',param)\r\n                return axios.post(`${__serverApi}/api/notice-board/update/order`, JSON.stringify(param), {\r\n                    headers:{\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                })\r\n                .then(windowUtil.responseCheck)\r\n                .then(response => response.data)\r\n                .catch(err=>{\r\n                    log.error('IPC updateNoticeBoardOrder error : ', JSON.stringify(err));\r\n                    //axios.defaults.headers.common['Authorization'] = '';\r\n                    if(err.response){\r\n                        return err.response.data;\r\n                    }else{\r\n                        return err.message\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n    }\r\n    updateNoticeBoardDetailOrder(param = []){\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                return axios.post(`${__serverApi}/api/notice-board/update/detail-order`, JSON.stringify(param), {\r\n                    headers:{\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                })\r\n                .then(windowUtil.responseCheck)\r\n                .then(response => response.data)\r\n                .catch(err=>{\r\n                    log.error('IPC updateNoticeBoardDetailOrder error : ', JSON.stringify(err));\r\n                    //axios.defaults.headers.common['Authorization'] = '';\r\n                    if(err.response){\r\n                        return err.response.data;\r\n                    }else{\r\n                        return err.message\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n    }\r\n}\r\nexport const noticeBoardController = new NoticeBoardController();\r\n","import { windowUtil, __serverApi } from \"../window/windowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\nclass RoomController {\r\n\tconstructor() {\r\n    }\r\n\r\n\tcreateRoom(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/room/create/`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createRoom error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tcreateMySelfRoom(param = {}){\r\n\t\tif( ! param.workspaceId || isNaN(parseInt(param.workspaceId))){\r\n\t\t\tlog.error(`createMySelfRoom workspaceId is ::: ${param.workspaceId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/room/create/my-self-room/${param.workspaceId}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createMySelfRoom error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tcreateRoomInAccount(param = []){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/room/create/in-account`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.then(data => {\r\n\t\t\t\t\tlog.debug('createRoomInAccount ::: ',data)\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createRoomInAccount error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tupdateRoomInAccoutOrder(param = []){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/room/update/order`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC updateRoomInAccoutOrder error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tcreateRoomFavorites(param){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/room/create/favorites`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createRoomFavorites error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tupdateRoomFavorites(param = []){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/room/update/favorites-order`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createRoom error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tsearchRoomList(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tlet {roomId} = param;\r\n\t\t\t\tlet queryString = Object.entries(param)\r\n\t\t\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'roomId')\r\n\t\t\t\t\t.map(([k,v]) => `${k}=${v}`).join('&')\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/room/search/list/${roomId}?${queryString}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC searchRoom error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tsearchMyJoinedRoomList(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tlet {workspaceId} = param;\r\n\t\t\t\tlet queryString = Object.entries(param)\r\n\t\t\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId')\r\n\t\t\t\t\t.map(([k,v]) => {\r\n\t\t\t\t\t\tif(v instanceof Array){\r\n\t\t\t\t\t\t\tv = v.map(val=>`${k}=${val}`).join('&')\r\n\t\t\t\t\t\t\treturn v;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn `${k}=${v}`\r\n\t\t\t\t\t}).join('&')\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/room/search/my-joined-list/${workspaceId}?${queryString}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC searchMyJoinedRoomList error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tsearchRoomFavoritesList(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tlet {workspaceId} = param;\r\n\t\t\t\tlet queryString = Object.entries(param)\r\n\t\t\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId')\r\n\t\t\t\t\t.map(([k,v]) => {\r\n\t\t\t\t\t\tif(v instanceof Array){\r\n\t\t\t\t\t\t\tv = v.map(val=>`${k}=${val}`).join('&')\r\n\t\t\t\t\t\t\treturn v;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn `${k}=${v}`\r\n\t\t\t\t\t}).join('&')\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/room/search/favorites-list/${workspaceId}?${queryString}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC searchMyJoinedRoomList error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tsearchRoomJoinedAccountList(param = {}, EventSource, eventSendObj){\r\n\r\n\t\tif( ! param.roomId || isNaN(parseInt(param.roomId))){\r\n\t\t\tlog.error(`searchRoomJoinedAccountList roomId is ::: ${param.roomId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tif( ! EventSource) EventSource = top?.EventSource;\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn new Promise(resolve=>{\r\n\t\t\t\t\tlet source = new EventSource(`${__serverApi}/api/room/search/in-account-list/${param.roomId}`, {\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t'Authorization' : axios.defaults.headers.common['Authorization'],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\twithCredentials : ! top.__isLocal\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsource.onmessage = (event) => {\r\n\t\t\t\t\t\t//console.log('test message :::: ',event);\r\n\t\t\t\t\t\tlet {data, lastEventId, origin, type} = event;\r\n\t\t\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t\t\t\tif(eventSendObj.webEventSend){\r\n\t\t\t\t\t\t\teventSendObj.webEventSend('roomInAccountAccept', data);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\teventSendObj.send('roomInAccountAccept', data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsource.onerror = (event) => {\r\n\t\t\t\t\t\t//console.log('searchRoomJoinedAccountList error :::: ',event);\r\n\t\t\t\t\t\tsource.close();\r\n\t\t\t\t\t\tresolve('done');\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\t\r\n\tgetRoomDetail(param = {}){\r\n\t\tif( ! param.roomId || isNaN(parseInt(param.roomId))){\r\n\t\t\tlog.error(`getRoomDetail roomId is ::: ${param.roomId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/room/search/detail/${param.roomId}`, {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type' : 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tisRoomFavorites(param = {}){\r\n\t\tif( ! param.roomId || isNaN(parseInt(param.roomId))){\r\n\t\t\tlog.error(`isRoomFavorites roomId is ::: ${param.roomId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/room/search/is-room-favorites/${param.roomId}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC isRoomFavorites error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tisRoomOwner(param = {}){\r\n\t\tif( ! param.roomId || isNaN(parseInt(param.roomId))){\r\n\t\t\tlog.error(`isRoomOwner roomId is ::: ${param.roomId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/room/search/is-owner/${param.roomId}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC isRoomOwner error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n}\r\nexport const roomController = new RoomController();","import { windowUtil, __serverApi } from \"../window/windowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\n\r\nclass WorkspaceController {\r\n\tconstructor() {\r\n\t}\r\n\tsearchWorkspaceMyJoined(param = {}){\r\n\t\treturn windowUtil.isLogin((result) => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/workspace/search/my-joined-list?page=${param.page}&size=${param.size}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response=>{\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('error : ', JSON.stringify(err));\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\tif( ! err.response.data.content){\r\n\t\t\t\t\t\t\terr.response.data.content = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tsearchNameSpecificList(param = {}){\r\n\t\treturn windowUtil.isLogin((result) => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/workspace/search/name-specific-list?page=${param.page}&size=${param.size}&workspaceName=${param.workspaceName}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response=>{\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('error : ', JSON.stringify(err));\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\tif( ! err.response.data.content){\r\n\t\t\t\t\t\t\terr.response.data.content = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tsearchWorkspaceInAccount(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tlet queryString = Object.entries(param)\r\n\t\t\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId')\r\n\t\t\t\t\t.map(([k,v]) => `${k}=${v}`).join('&')\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/workspace/search/joined-account-list/${param.workspaceId}?${queryString}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC searchWorkspaceInAccount error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tgetWorkspaceDetail(param = {}){\r\n\t\tif( ! param.workspaceId || isNaN(parseInt(param.workspaceId))){\r\n\t\t\tlog.error(`workspaceId is ::: ${param.workspaceId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/workspace/search/detail/${param.workspaceId}`, {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type' : 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tgetWorkspaceInAccountCount(param = {}){\r\n\t\tif( ! param.workspaceId || isNaN(parseInt(param.workspaceId))){\r\n\t\t\tlog.error(`workspaceId is ::: ${param.workspaceId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/workspace/search/count/${param.workspaceId}`, {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type' : 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tcreatePermitWokrspaceInAccount(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/workspace/create/permit`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createPermitWokrspaceInAccount error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tcreateGiveAdmin(param={}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/workspace/create/give-admin`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createPermitWokrspaceInAccount error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tsearchPermitRequestList(param = {}, EventSource, eventSendObj){\r\n\t\tif( ! param.workspaceId || isNaN(parseInt(param.workspaceId))){\r\n\t\t\tlog.error(`searchPermitRequestList workspaceId is ::: ${param.workspaceId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tif( ! EventSource) EventSource = top?.EventSource;\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\t//return axios.get(`${__serverApi}/api/workspace/search/permit-request-list/${param.workspaceId}`, {\r\n\t\t\t\treturn new Promise(resolve=>{\r\n\t\t\t\t\tlet source = new EventSource(`${__serverApi}/api/workspace/search/permit-request-list/${param.workspaceId}`, {\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t'Authorization' : axios.defaults.headers.common['Authorization'],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\twithCredentials : ! top.__isLocal\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsource.onmessage = (event) => {\r\n\t\t\t\t\t\t//console.log('test message :::: ',event);\r\n\t\t\t\t\t\tlet {data, lastEventId, origin, type} = event;\r\n\t\t\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t\t\t\tif(eventSendObj.webEventSend){\r\n\t\t\t\t\t\t\teventSendObj.webEventSend('workspacePermitRequestAccept', data);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\teventSendObj.send('workspacePermitRequestAccept', data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsource.onerror = (event) => {\r\n\t\t\t\t\t\t//console.log('searchPermitRequestList error :::: ',event);\r\n\t\t\t\t\t\tsource.close();\r\n\t\t\t\t\t\tresolve('done');\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tgetIsAdmin(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tlet queryString = Object.entries(param)\r\n\t\t\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId')\r\n\t\t\t\t\t.map(([k,v]) => `${k}=${v}`).join('&')\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/workspace/search/is-admin/${param.workspaceId}?${queryString}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC getIsAdmin error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tcreateWorkspaceJoined(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/workspace/create/joined`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createPermitWokrspaceInAccount error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\r\n\tcreateWorkspace(param={}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/workspace/create/`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createWorkspace error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n}\r\nexport const workspaceController = new WorkspaceController();","import { accountController } from \"./../controller/AccountController\"\r\nimport { apiS3Controller } from \"./../controller/ApiS3Controller\";\r\nimport { chattingController } from \"./../controller/ChattingController\";\r\nimport { emoticonController } from \"./../controller/EmoticonController\";\r\nimport { eventStreamController } from \"./../controller/EventStreamController\";\r\nimport { noticeBoardController } from \"./../controller/NoticeBoardController\";\r\nimport { roomController } from \"./../controller/RoomController\";\r\nimport { workspaceController } from \"./../controller/WorkspaceController\";\r\n\r\nimport { windowUtil } from \"../window/windowUtil\";\r\n\r\nimport axios from 'axios';\r\n\r\n/**\r\n * @author kimjoohyoung\r\n * @description 기본적으로 사용 할 preload 정의\r\n */\r\n\r\nlet permission;\r\n\r\nwindow.addEventListener('load', () => {\r\n\tNotification.requestPermission().then(result => {\r\n\t\tconsole.log(result);\r\n\t\tpermission = result;\r\n\t})\r\n\tif(globalHandler.loadInitRoomId){\r\n\t\tipcRenderer.webEventSend('roomChange', {roomId:globalHandler.loadInitRoomId});\r\n\t}\r\n\tif(globalHandler.loadInitNoticeBoardId){\r\n\t\tipcRenderer.webEventSend('noticeBoardChange', {noticeBoardId:globalHandler.loadInitNoticeBoardId});\r\n\t}\r\n})\r\n\r\nexport const globalHandler = new class GlobalHandler{\r\n\t#workspaceId;\r\n\tloadInitRoomId;\r\n\tloadInitNoticeBoardId;\r\n\t#option = {};\r\n\tconstructor(){\r\n\t\t//n : name, v : value, c : create_at, u : update_at\r\n\t\tlet queryString = new URLSearchParams(location.search);\r\n\t\tthis.#workspaceId = queryString.get('workspaceId');\r\n\t\tthis.loadInitRoomId = queryString.get('roomId');\r\n\t\tthis.loadInitNoticeBoardId = queryString.get('noticeBoardId');\r\n\t\tthis.#option = JSON.parse(localStorage.getItem('o'))?.reduce((t,e)=>{\r\n\t\t\tt[e.OPTION_NAME] = e;\r\n\t\t\treturn t;\r\n\t\t}, {}) || {};\r\n\r\n\t}\r\n\r\n\tresetWorkspace(){\r\n\t\tthis.#workspaceId = undefined;\r\n\t}\r\n\r\n\tset workspaceId(workspaceId){\r\n\t\tif(this.#workspaceId === workspaceId) return;\r\n\t\tthis.#workspaceId = workspaceId;\r\n\t\tipcRenderer.webEventSend('workspaceChange', {workspaceId : this.workspaceId});\r\n\t}\r\n\tget workspaceId(){\r\n\t\treturn this.#workspaceId\r\n\t}\r\n\r\n\tsetOption({name, value}){\r\n\t\tif( ! this.#option[name]) {\r\n\t\t\tthis.#option[name] = {\r\n\t\t\t\tOPTION_NAME : name,\r\n\t\t\t\tOPTION_VALUE : value,\r\n\t\t\t\tCREATE_AT : new Date().getTime(),\r\n\t\t\t\tUPDATE_AT : new Date().getTime(),\r\n\t\t\t};\r\n\t\t}else{\r\n\t\t\tthis.#option[name].OPTION_VALUE = value,\r\n\t\t\tthis.#option[name].UPDATE_AT = new Date().getTime();\r\n\t\t}\r\n\t\tlocalStorage.setItem('o', JSON.stringify( Object.values(this.#option)) );\r\n\t}\r\n\r\n\tgetOption(name){\r\n\t\t//console.log(this.#option, name);\r\n\t\treturn this.#option[name];\r\n\t}\r\n}\r\n\r\nexport const ipcRenderer = new class IpcRendererWeb{\r\n\t#send = {};\r\n\t#invoke = {};\r\n\t#connection = {};\r\n\tconstructor(){\r\n\r\n\t\t[\r\n\t\t\taccountController, apiS3Controller, \r\n\t\t\tchattingController, emoticonController, \r\n\t\t\teventStreamController, noticeBoardController,\r\n\t\t\troomController, workspaceController\r\n\t\t].flatMap(e=>{\r\n\t\t\treturn Object.getOwnPropertyNames(Object.getPrototypeOf(e)).filter(e=> e != 'constructor').map(name=>{\r\n\t\t\t\treturn [name, e]\r\n\t\t\t});\r\n\t\t}).forEach( ([name, clazz])=>{\r\n\t\t\tthis.#send[name] = clazz[name] \r\n\t\t\tthis.#invoke[name] = clazz[name] \r\n\t\t})\r\n\t}\r\n\tsend(name, param){\r\n\t\tif( ! this.#send[name] || ! this.#send[name] instanceof Function){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.#send[name](param, undefined, ipcRenderer);\r\n\t}\r\n\tinvoke(name, param){\r\n\t\tif( ! this.#invoke[name] || ! this.#invoke[name] instanceof Function){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\treturn this.#invoke[name](param, undefined, ipcRenderer);\r\n\t}\r\n\twebEventSend(eventName, data){\r\n\t\tif( ! this.#connection[eventName] || ! this.#connection[eventName] instanceof Function){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.#connection[eventName](undefined, data);\r\n\t}\r\n\ton(eventName, callback){\r\n\t\tthis.#connection[eventName] = callback;\r\n\t}\r\n\t/*\r\n\tsend : {},\r\n\tinvoke : {},\r\n\tconnection : {},\r\n\teventSend: (eventName, data) => {\r\n\t\tif( ! ipcRenderer.connection[eventName] instanceof Function){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tipcRenderer.connection[eventName](undefined, data);\r\n\t},\r\n\ton : (eventName, callback) => {\r\n\t\tconnection[eventName] = callback;\r\n\t}*/\r\n};\r\n\r\nconst electronEventTrigger = {\r\n\tobjectEventListener : {},\r\n\tonEvent : {},\r\n\ton : (eventName, callback) => {\r\n\t\telectronEventTrigger.onEvent[eventName] = callback;\r\n\t\tipcRenderer.on(eventName, (event, message) => {\r\n\t\t\telectronEventTrigger.trigger(eventName, event, message);\r\n\t\t})\r\n\t},\r\n\taddElectronEventListener : (eventName, callback) => {\r\n\t\tif(electronEventTrigger.objectEventListener.hasOwnProperty(eventName)){\r\n\t\t\telectronEventTrigger.objectEventListener[eventName].push({ [callback.name] : callback });\r\n\t\t}else{\r\n\t\t\telectronEventTrigger.objectEventListener[eventName] = [{ [callback.name] : callback }];\r\n\t\t}\r\n\t\tipcRenderer.on(eventName, (event, message) => {\r\n\t\t\telectronEventTrigger.trigger(eventName, event, message);\r\n\t\t})\r\n\t},\r\n\tremoveElectronEventListener : (eventName, callback) => {\r\n\t\tif(electronEventTrigger.objectEventListener.hasOwnProperty(eventName)){\r\n\t\t\tif(callback){\r\n\t\t\t\telectronEventTrigger.objectEventListener[eventName] = electronEventTrigger.objectEventListener[eventName].filter(e=> ! e.hasOwnProperty(callback.name))\r\n\t\t\t}else{\r\n\t\t\t\tdelete electronEventTrigger.objectEventListener[eventName]\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\ttrigger : (eventName, event, message) => {\r\n\t\tnew Promise(resolve=> {\r\n\t\t\tif( ! electronEventTrigger.objectEventListener.hasOwnProperty(eventName)){\r\n\t\t\t\tresolve();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telectronEventTrigger.objectEventListener[eventName].forEach(async obj => {\r\n\t\t\t\tObject.values(obj).forEach(async callback => {\r\n\t\t\t\t\tif( ! callback || ! callback instanceof Function){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnew Promise(res=>{\t\r\n\t\t\t\t\t\ttry{\r\n\t\t\t\t\t\t\tcallback(message);\r\n\t\t\t\t\t\t}catch(err){\r\n\t\t\t\t\t\t\tconsole.error(`${eventName} error message ::: `,err.message);\r\n\t\t\t\t\t\t\tconsole.error(`${eventName} error stack ::: `,err.stack);\r\n\t\t\t\t\t\t\tthrow new Error('');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tres();\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\tresolve();\r\n\t\t})\r\n\t\t\r\n\t\tnew Promise(resolve => {\r\n\t\t\tif( ! electronEventTrigger.onEvent[eventName] || ! electronEventTrigger.onEvent[eventName] instanceof Function){\r\n\t\t\t\tresolve();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttry{\r\n\t\t\t\telectronEventTrigger.onEvent[eventName](message);\r\n\t\t\t}catch(err){\r\n\t\t\t\tconsole.error(`${eventName} error message ::: `, err.message);\r\n\t\t\t\tconsole.error(`${eventName} error stack ::: `, err.stack);\r\n\t\t\t}\r\n\t\t\tresolve();\r\n\t\t})\r\n\t\t\r\n\t}\r\n};\r\n\r\nexport const myAPI = {\r\n\t/**\r\n\t * 단방향 ipc 통신\r\n\t * 보안상의 이유로ipcRenderer.send 전체 API를 직접 노출하지 않습니다. \r\n\t * Electron API에 대한 렌더러의 액세스를 가능한 한 많이 제한해야 합니다.\r\n\t */\r\n\t//setTitle : (param) => ipcRenderer.send('setTitle', param),\r\n\t/**\r\n\t * dialog:IPC 채널 이름 의 접두사는 코드에 영향을 미치지 않습니다. \r\n\t * 코드 가독성에 도움이 되는 네임스페이스 역할만 합니다.\r\n\t * 보안상의 이유로ipcRenderer.invoke 전체 API를 직접 노출하지 않습니다. \r\n\t * Electron API에 대한 렌더러의 액세스를 가능한 한 많이 제한해야 합니다. \r\n\t */\r\n\t//openFile : () => ipcRenderer.invoke('dialog:openFile'),\r\n\t\r\n\t/**\r\n\t * key-value가 아닌 함수는 일렉트론에서만쓰고 웹버전에서는 쓰지 않도록 합니다.\r\n\t * event.electronEventTrigger은 일렉트론 + 웹이 함께써야 하는 부분이 있어 예외입니다.\r\n\t */\r\n\r\n\tgetProjectPath : async () => `${location.origin}/`,\r\n\r\n\tcreateSubWindow : async (param) => {\r\n\t\t//open(url?: string | URL, target?: string, features?: string): WindowProxy | null;\r\n\t\tlet queryString = Object.entries(param)\r\n\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'pageName' && k != 'pageId')\r\n\t\t\t.map(([k,v]) => `${k}=${v}`).join('&')\r\n\t\twindow.open(`/web/create-sub-window/${param.pageName}?${queryString}`, param.pageId)\r\n\t},\r\n\r\n\tcloseRequest : async (param) => {},\r\n\t\r\n\tmaximizeRequest : async () => {},\r\n\r\n\tunmaximizeRequest : async () => {},\r\n\t\r\n\tminimizeRequest : async () => {},\r\n\t\r\n\trestoreRequest : async () => {},\r\n\t\r\n\tisMaximize : async () => false,\r\n\r\n\tresetWorkspaceId: async () => {\r\n\t\tglobalHandler.resetWorkspace();\r\n\t},\r\n\r\n\tgetWorkspaceId: async () => {\r\n\t\treturn globalHandler.workspaceId;\r\n\t},\r\n\r\n\tnotifications: async (param) => {\r\n\t\tlet content = param.content.join('\\n');\r\n\t\tcontent = content.substring(0,200) + (content.length > 200 ? '...' : '');\r\n\t\tif(permission == 'granted'){\r\n\t\t\tmyAPI.getProjectPath().then(path=>{\r\n\t\t\t\tlet noti = new Notification(param.fullName, { body: content, icon: path+'image/icon.icon' });\r\n\t\t\t\tnoti.onclick = () => {\r\n\t\t\t\t\tif(globalHandler.workspaceId != param.workspaceId){\r\n\t\t\t\t\t\tipcRenderer.webEventSend('workspaceChange', {workspaceId : param.workspaceId});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tipcRenderer.webEventSend('roomChange', {roomId : param.roomId});\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tnoti.close()\r\n\t\t\t\t}, 4000);\r\n\t\t\t})\r\n\t\t}else{\r\n\t\t\tlet html = Object.assign(document.createElement('div'), {\r\n\t\t\t\tinnerHTML : `\r\n\t\t\t\t\t<h1>${param.fullName}</h1>\r\n\t\t\t\t\t<div>${param.content}</div>\r\n\t\t\t\t`\r\n\t\t\t})\r\n\t\t\tObject.assign(html.style, {\r\n\t\t\t\tposition: 'fixed', right: '2vw', bottom: '2vh', borderRadius : '15px',\r\n\t\t\t\tbackground: '#e1e1e1cf', width: '40%', height: 'auto',\r\n\t\t\t\tzIndex: 9999, whiteSpace: 'break-spaces', overflowWrap: 'anywhere', \r\n\t\t\t\tdisplay: 'flex', flexDirection: 'column', alignItems: 'center',\r\n\t\t\t\tjustifyContent: 'flex-start', fontSize: '13px', paddingBottom: '5vh'\r\n\t\t\t})\r\n\t\t\thtml.onclick = () => {\r\n\t\t\t\tif(globalHandler.workspaceId != param.workspaceId){\r\n\t\t\t\t\tipcRenderer.webEventSend('workspaceChange', {workspaceId : param.workspaceId});\r\n\t\t\t\t}\r\n\t\t\t\tipcRenderer.webEventSend('roomChange', {roomId : param.roomId});\r\n\t\t\t}\r\n\t\t\tdocument.body.append(html);\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\thtml.remove();\r\n\t\t\t}, 4000);\r\n\t\t}\r\n\t},\r\n\r\n\tgetOption: async (optionName) => globalHandler.getOption(optionName),\r\n\tsetOption: async (param) => globalHandler.setOption(param),\r\n\r\n\tisLogin: async () => {\r\n\t\treturn windowUtil.isLogin(result=>{\r\n\t\t\treturn {isLogin : result.isLogin}\r\n\t\t})\r\n\t},\r\n\r\n\tgetServerUrl : async () => `${location.origin}`,\r\n\t\r\n\tlogout : async () => () => {\r\n\t\taxios.defaults.headers.common['Authorization'] = '';\r\n\t\tfetch('/logout', {\r\n\t\t\tmethod: 'GET',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type' : 'application/json'\r\n\t\t\t}}\r\n\t\t).then(response=>{\r\n\t\t\tif( ! response.ok){\r\n\t\t\t\tconsole.error('response is not ok', response);\r\n\t\t\t\talert('로그아웃에 실패하였습니다.');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tmyAPI.pageChange.changeWokrspacePage();\r\n\t\t})\r\n\t},\r\n\r\n\tpageChange : {\r\n\t\tchangeLoginPage : async () => top.location.href = '/web',\r\n\t\tchangeWokrspacePage : async () => top.location.href = '/web',\r\n\t\tchangeMainPage : async (param) => top.location.href = `/web/main?workspaceId=${param.workspaceId}`,\r\n\t},\r\n\t\r\n\tevent : {\r\n\t\telectronEventTrigger : electronEventTrigger,\r\n\t},\r\n\r\n\tstream : {\r\n\t\tinitWorkspaceStream : async (param) => ipcRenderer.send('initWorkspaceStream', param),\r\n\t},\r\n\r\n\taccount : {\r\n\t\tloginProcessing : async (param) => ipcRenderer.invoke('loginProcessing', param),\r\n\t\tgetAccountInfo : async () => ipcRenderer.invoke('getAccountInfo'),\r\n\t\tupdateSimpleAccountInfo : async (param) => ipcRenderer.invoke('updateSimpleAccountInfo', param)\r\n\t},\r\n\r\n\tchatting : {\r\n\t\tsendChatting : async (param) => ipcRenderer.invoke('sendChatting', param),\r\n\t\tdeleteChatting : async (param) => ipcRenderer.invoke('deleteChatting', param),\r\n\t\tsearchChattingList : async (param) => ipcRenderer.invoke('searchChattingList', param),\r\n\t},\r\n\t\r\n\tworkspace : {\r\n\t\tsearchWorkspaceMyJoined : async (param) => ipcRenderer.invoke('searchWorkspaceMyJoined', param),\r\n\t\tsearchNameSpecificList: async (param) => ipcRenderer.invoke('searchNameSpecificList', param),\r\n\t\tsearchWorkspaceInAccount : async (param) => ipcRenderer.invoke('searchWorkspaceInAccount', param),\r\n\t\tgetWorkspaceDetail : async (param) => ipcRenderer.invoke('getWorkspaceDetail', param),\r\n\t\tcreatePermitWokrspaceInAccount: async (param) => ipcRenderer.invoke('createPermitWokrspaceInAccount', param),\r\n\t\tcreateGiveAdmin : async (param) => ipcRenderer.invoke('createGiveAdmin', param),\r\n\t\tsearchPermitRequestList : async (param) => ipcRenderer.invoke('searchPermitRequestList', param),\r\n\t\tgetIsAdmin : async (param) => ipcRenderer.invoke('getIsAdmin', param),\r\n\t\tcreateWorkspaceJoined: async (param) => ipcRenderer.invoke('createWorkspaceJoined', param),\r\n\t\tcreateWorkspace : async (param) => ipcRenderer.invoke('createWorkspace', param),\r\n\t\tgetWorkspaceInAccountCount : async (param) => ipcRenderer.invoke('getWorkspaceInAccountCount', param),\r\n\t},\r\n\r\n\troom : {\r\n\t\tcreateRoom : async (param) => ipcRenderer.invoke('createRoom', param),\r\n\t\tcreateMySelfRoom : async (param)=> ipcRenderer.invoke('createMySelfRoom', param),\r\n\t\tcreateRoomInAccount : async (param) => ipcRenderer.invoke('createRoomInAccount', param),\r\n\t\tcreateRoomFavorites : async (param) => ipcRenderer.invoke('createRoomFavorites', param),\r\n\t\tupdateRoomInAccoutOrder : async (param) => ipcRenderer.invoke('updateRoomInAccoutOrder', param),\r\n\t\tupdateRoomFavorites : async (param) => ipcRenderer.invoke('updateRoomFavorites', param),\r\n\t\tsearchRoom : async (param) => ipcRenderer.invoke('searchRoom', param),\r\n\t\tsearchMyJoinedRoomList : async (param) => ipcRenderer.invoke('searchMyJoinedRoomList', param),\r\n\t\tsearchRoomFavoritesList : async (param) => ipcRenderer.invoke('searchRoomFavoritesList', param),\r\n\t\tsearchRoomJoinedAccountList : async (param) => ipcRenderer.invoke('searchRoomJoinedAccountList', param),\r\n\t\tgetRoomDetail : async (param) => ipcRenderer.invoke('getRoomDetail', param),\r\n\t\tisRoomFavorites : async (param) => ipcRenderer.invoke('isRoomFavorites', param),\r\n\t\tisRoomOwner : async(param) => ipcRenderer.invoke('isRoomOwner', param),\r\n\t},\r\n\r\n\tnoticeBoard : {\r\n\t\tcreateNoticeBoard : async (param) => ipcRenderer.invoke('createNoticeBoard', param),\r\n\t\tcreateNoticeBoardGroup : async (param) => ipcRenderer.invoke('createNoticeBoardGroup', param),\r\n\t\tcreateNoticeBoardDetail : async (param) => ipcRenderer.invoke('createNoticeBoardDetail', param),\r\n\t\tdeleteNoticeBoard : async (param) => ipcRenderer.invoke('deleteNoticeBoard', param),\r\n\t\tdeleteNoticeBoardGroup : async (param) => ipcRenderer.invoke('deleteNoticeBoardGroup', param),\r\n\t\tupdateNoticeBoardOrder : async (param) => ipcRenderer.invoke('updateNoticeBoardOrder', param),\r\n\t\tupdateNoticeBoardDetailOrder : async (param) => ipcRenderer.invoke('updateNoticeBoardDetailOrder', param),\r\n\t\tsearchNoticeBoardList : async (param) => ipcRenderer.invoke('searchNoticeBoardList', param),\r\n\t\tsearchNoticeBoardDetailList : async (param) => ipcRenderer.invoke('searchNoticeBoardDetailList', param),\r\n\t},\r\n\ts3: {\r\n\t\tgenerateSecurityPutObjectPresignedUrl : async (param) => ipcRenderer.invoke('generateSecurityPutObjectPresignedUrl', param),\r\n\t\tgenerateSecurityGetObjectPresignedUrl : async (param) => ipcRenderer.invoke('generateSecurityGetObjectPresignedUrl', param),\r\n\t\tgenerateGetObjectPresignedUrl : async(param) => ipcRenderer.invoke('generateGetObjectPresignedUrl', param),\r\n\t},\r\n\temoticon: {\r\n\t\tcreateEmotionReaction : async (param) => ipcRenderer.invoke('createEmotionReaction', param),\r\n\t\tgetIsReaction : async (param) => ipcRenderer.invoke('getIsReaction', param)\r\n\t}\r\n\r\n\r\n}\r\nwindow.myAPI = myAPI;\r\nconsole.log('????????????????');\r\nconsole.log(window.myAPI)","\r\nexport const noticeBoardHandler = new class NoticeBoardHandler{\r\n    #noticeBoardId\r\n    #noticeBoard = [];\r\n    #addNoticeBoardIdChangeListener = {};\r\n    #noticeBoardChangeDone;\r\n    #noticeBoardChangeAwait;\r\n    constructor(){\r\n\r\n    }\r\n\r\n    set addNoticeBoardIdChangeListener({name, callback, runTheFirst}){\r\n        this.#addNoticeBoardIdChangeListener[name] = callback;\r\n        if(runTheFirst && this.#noticeBoardId){\r\n            callback(this);\r\n        }\r\n    }\r\n\r\n    get addNoticeBoardIdChangeListener(){\r\n        return this.#addNoticeBoardIdChangeListener;\r\n    }\r\n\r\n    set noticeBoardId(noticeBoardId){\r\n        if( ! noticeBoardId){\r\n            console.error('noticeBoardId is undefined');\r\n            return;\r\n        }\r\n        this.#noticeBoard = [];\r\n        this.#noticeBoardId = noticeBoardId;\r\n        let startCallbackPromise = Promise.all(\r\n            Object.values(this.#addNoticeBoardIdChangeListener).map(async callback => {\r\n                return new Promise(res => {\r\n                    callback(this);\r\n                    res();\r\n                })\r\n            })\r\n        )\r\n        if( ! this.#noticeBoardChangeAwait){\r\n            this.#noticeBoardChangeAwait = new Promise(resolve=>{\r\n                this.#noticeBoardChangeDone = resolve;\r\n                this.#noticeBoardChangeDone(startCallbackPromise);\r\n            })\r\n        }else{\r\n            this.#noticeBoardChangeAwait.then(() => {\r\n                startCallbackPromise.then(() => {\r\n                    this.#noticeBoardChangeAwait = new Promise(resolve => {\r\n                        this.#noticeBoardChangeDone = resolve;\r\n                    })\r\n                })\r\n            })\r\n        }\r\n    }\r\n\r\n    get noticeBoardId(){\r\n        return this.#noticeBoardId;\r\n    }\r\n\r\n    get noticeBoard(){\r\n        return this.#noticeBoard;\r\n    }\r\n\r\n    removeNoticeBoardIdChangeListener(name){\r\n        delete this.#addNoticeBoardIdChangeListener(name);\r\n    }\r\n\r\n}","\r\nexport default class ToolHandler{\r\n\r\n\t#extendsElement;\r\n\t#defaultClass;\r\n\t#isInline = true;\r\n\t/**\r\n\t * @type {HTMLButtonElement}\r\n\t */\r\n\t#toolButton;\r\n\t#identity;\r\n\t#connectedFriends = [];\r\n\t#buttonMap = {};\r\n\t/**\r\n\t * \r\n\t * @param {FreedomInterface} identity\r\n\t * @returns {FreedomInterface} \r\n\t */\r\n\tconstructor(identity){\r\n\t\tthis.#identity = identity;\r\n\t\t//다른 부분 선택시에 동작하지 않도록 수정 필요(에디터만 셀렉션체인지인 경우)\r\n\t\tdocument.addEventListener(\"selectionchange\", (event) => {\r\n\t\t\tlet selection = window.getSelection();\r\n\t\t\tif(! document.activeElement.classList.contains('free-will-editor')){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * None 현재 선택된 항목이 없습니다.\r\n\t\t\t * Caret 선택 항목이 축소됩니다(예: 캐럿이 일부 텍스트에 배치되지만 범위가 선택되지 않음).\r\n\t\t\t * Range 범위가 선택되었습니다.\r\n\t\t\t */\r\n\t\t\tif(selection.type == 'None' || ! this.#toolButton){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tlet findTarget = this.#connectedFriends.find(e=> selection.containsNode(e, true) || selection.containsNode(e, false))\r\n\t\t\tif(findTarget){\r\n\t\t\t\tthis.#toolButton.dataset.tool_status = 'connected';\r\n\t\t\t}else {\r\n\t\t\t\tthis.#toolButton.dataset.tool_status = 'blur';\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tisLastTool(tool){\r\n\t\tif(this.#identity.prototype.isPrototypeOf(tool)){\r\n\t\t\treturn tool === this.#connectedFriends.at(-1);\r\n\t\t}else{\r\n\t\t\tthrow new Error(`tool is not my identity, this tool name is ${tool.constructor.name}. but my identity name is ${this.#identity.name}`);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\t/**\r\n\t * @param {String}\r\n\t */\r\n\tset extendsElement(extendsElement){\r\n\t\tthis.#extendsElement = extendsElement;\r\n\t}\r\n\t\r\n\tget extendsElement(){\r\n\t\treturn this.#extendsElement;\r\n\t}\r\n\t\r\n\tset defaultClass(defaultClass){\r\n\t\tthis.#defaultClass = defaultClass;\r\n\t}\r\n\r\n\tget defaultClass(){\r\n\t\treturn this.#defaultClass;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {boolean} isInline \r\n\t */\r\n\tset isInline(isInline){\r\n\t\tthis.#isInline = isInline;\r\n\t}\r\n\t\r\n\t/**\r\n\t * @returns {boolean}\r\n\t */\r\n\tget isInline(){\r\n\t\treturn this.#isInline\r\n\t}\r\n\r\n\tset toolButton(toolButton){\r\n\t\tif( ! toolButton || ! toolButton.nodeType || toolButton.nodeType != Node.ELEMENT_NODE){\r\n\t\t\tthrow new Error('toolButton is not element');\r\n\t\t}\r\n\t\tthis.#toolButton = toolButton;\r\n\r\n\t}\r\n\t\r\n\tget toolButton(){\r\n\t\treturn this.#toolButton;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {FreedomInterface}\r\n\t */\r\n\tset connectedFriends(friend){\r\n\t\tif(friend.constructor != this.#identity){\r\n\t\t\tnew TypeError('is not my friend')\r\n\t\t}\r\n\t\t\r\n\t\tif(friend.isConnected){\r\n\t\t\tthis.#connectedFriends.push(friend);\r\n\t\t}else{\r\n\t\t\tthis.#connectedFriends = this.#connectedFriends.filter(e=>e.isConnected);\r\n\t\t}\r\n\t}\r\n\r\n\tget connectedFriends(){\r\n\t\treturn this.#connectedFriends;\r\n\t}\r\n\r\n}","import Line from '../component/Line'\r\n\r\nexport default class FreedomInterface extends HTMLElement {\r\n\r\n\tstatic globalMouseEvent = undefined;\r\n\tstatic lastClickElementPath = undefined;\r\n\tstatic globalClickEventPromiseResolve;\r\n\tstatic globalClickEventPromise = new Promise(resolve=>{\r\n\t\tthis.globalClickEventPromiseResolve = resolve;\r\n\t});\r\n\tstatic globalKeydownEventPromiseResolve;\r\n\tstatic globalKeydownEventPromise = new Promise(resolve=>{\r\n\t\tthis.globalKeydownEventPromiseResolve = resolve;\r\n\t})\r\n\tstatic globalSelectionChangeEventPromiseResolve;\r\n\tstatic globalSelectionChangeEventPromise = new Promise(resolve=>{\r\n\t\tthis.globalSelectionChangeEventPromiseResolve = resolve;\r\n\t})\r\n\t\r\n\tstatic{\r\n\t\tdocument.addEventListener('mousemove', (event) => {\r\n\t\t\t//mousePos = { x: event.clientX, y: event.clientY };\r\n\t\t\t//mousePosText.textContent = `(${mousePos.x}, ${mousePos.y})`;\r\n\t\t\tthis.globalMouseEvent = event;\r\n\t\t});\r\n\t\tdocument.addEventListener('mousedown', (event) => {\r\n\t\t\tthis.lastClickElementPath = event.composedPath();\r\n\t\t\tthis.globalClickEventPromiseResolve(event)\r\n\t\t\tthis.globalClickEventPromise = new Promise(resolve => {\r\n\t\t\t\tthis.globalClickEventPromiseResolve = resolve;\r\n\t\t\t})\r\n\t\t})\r\n\t\twindow.addEventListener('keydown', (event) => {\r\n\t\t\tthis.globalKeydownEventPromiseResolve(event);\r\n\t\t\tthis.globalKeydownEventPromise = new Promise(resolve=>{\r\n\t\t\t\tthis.globalKeydownEventPromiseResolve = resolve;\r\n\t\t\t})\r\n\t\t})\r\n\t\tdocument.addEventListener('selectionchange', (event) => {\r\n\t\t\tthis.globalSelectionChangeEventPromiseResolve(event);\r\n\t\t\tthis.globalSelectionChangeEventPromise = new Promise(resolve=>{\r\n\t\t\t\tthis.globalSelectionChangeEventPromiseResolve = resolve;\r\n\t\t\t})\r\n\t\t});\r\n\r\n\t}\r\n\tstatic isMouseInnerElement(element){\r\n\t\tif( ! this.globalMouseEvent) return;\r\n\t\tlet {clientX, clientY} = this.globalMouseEvent;\r\n\t\tlet {x, y, width, height} = element.getBoundingClientRect();\r\n\t\tlet isMouseInnerX = ((x + width) >= clientX && x <= clientX);\r\n\t\tlet isMouseInnerY = ((y + height) >= clientY && y <= clientY);\r\n\t\treturn (isMouseInnerX && isMouseInnerY);\r\n\t}\r\n\t/**\r\n\t * \r\n\t * @param {HtmlElement} element \r\n\t * @param {Function} callback \r\n\t */\r\n\tstatic globalKeydownEventListener(element, callback = ({oldEvent, newEvent})=>{}){\r\n\t\t\r\n\t\tlet oldEvent = undefined;\r\n\t\tlet newEvent = undefined;\r\n\t\tconst simpleObserver = () => {\r\n\t\t\tthis.globalKeydownEventPromise.then((event)=>{\r\n\t\t\t\tnewEvent = event;\r\n\t\t\t\tcallback({oldEvent, newEvent});\r\n\t\t\t\toldEvent = event;\r\n\t\t\t\tsimpleObserver();\r\n\t\t\t})\r\n\t\t}\r\n\t\tsimpleObserver();\r\n\t}\r\n\tstatic globalSelectionChangeEventListener(element, callback = ({oldEvent, newEvent})=>{}){\r\n\t\tlet oldEvent = undefined;\r\n\t\tlet newEvent = undefined;\r\n\t\tconst simpleObserver = () => {\r\n\t\t\tthis.globalSelectionChangeEventPromise.then((event)=>{\r\n\t\t\t\tnewEvent = event;\r\n\t\t\t\tcallback({oldEvent, newEvent});\r\n\t\t\t\toldEvent = event;\r\n\t\t\t\tsimpleObserver();\r\n\t\t\t})\r\n\t\t}\r\n\t\tsimpleObserver();\r\n\t}\r\n\t/**\r\n\t * \r\n\t * @param {HTMLElement} element \r\n\t * @param {Function} callback \r\n\t */\r\n\tstatic outClickElementListener(element, callback = ({oldEvent, newEvent, isMouseOut = false})=>{}){\r\n\r\n\t\tif(element == undefined || element?.nodeType != Node.ELEMENT_NODE){\r\n\t\t\tthrow new Error('element is not Element');\r\n\t\t}\r\n\r\n\t\tlet oldEvent = undefined;\r\n\t\tlet newEvent = undefined;\r\n\t\tconst simpleObserver = () => {\r\n\t\t\tthis.globalClickEventPromise.then((event)=>{\r\n\t\t\t\tlet isMouseOut = ! this.isMouseInnerElement(element);\r\n\t\t\t\tnewEvent = event;\r\n\t\t\t\tcallback({oldEvent, newEvent, isMouseOut});\r\n\t\t\t\toldEvent = event;\r\n\t\t\t\tsimpleObserver();\r\n\t\t\t})\r\n\t\t}\r\n\t\tsimpleObserver();\r\n\t}\r\n\tstatic isElement(targetObject, checkClazz){\r\n        let check = Object.getPrototypeOf(targetObject)\r\n        let isElement = false;\r\n        while(check != undefined){\r\n\r\n            if(check?.constructor  == checkClazz){\r\n                isElement = true;\r\n                break;\r\n            }else{\r\n                check = Object.getPrototypeOf(check);\r\n            }\r\n        }\r\n        return isElement;\r\n    }\r\n\r\n\tstatic processingElementPosition(element, target){\r\n\t\tlet rect;\r\n\t\tif(FreedomInterface.isElement(target, HTMLElement)){\r\n\t\t\trect = target.getBoundingClientRect();\r\n\t\t}else{\r\n\t\t\trect = target;\r\n\t\t}\r\n\r\n\t\tlet {x, y, height, width} = rect;\r\n\t\t\r\n\t\tlet elementTop = (y - element.clientHeight)\r\n\t\tlet elementLeft = (x - element.clientWidth)\r\n\t\tif(elementTop > 0){\r\n\t\t\telement.style.top = elementTop + 'px';\r\n\t\t}else{\r\n\t\t\telement.style.top = y + height + 'px';\r\n\t\t}\r\n\r\n\t\tif(elementLeft > 0){\r\n\t\t\telement.style.left = elementLeft + 'px'\r\n\t\t}else{\r\n\t\t\telement.style.left = x + width + 'px';\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\tstatic DeleteOption = class DeleteOption{\r\n\t\tstatic #DeleteOptionEnum = class DeleteOptionEnum{\r\n\t\t\tvalue;\r\n\t\t\tconstructor(value){\r\n\t\t\t\tthis.value = value;\r\n\t\t\t\tObject.freeze(this);\r\n\t\t\t}\r\n\t\t}\r\n\t\tstatic EMPTY_CONTENT_IS_DELETE = new this.#DeleteOptionEnum('empty_content_is_delete');\r\n\t\tstatic EMPTY_CONTENT_IS_NOT_DELETE = new this.#DeleteOptionEnum('empty_content_is_not_delete');\r\n\t\tvalue;\r\n\t\tstatic{\r\n\t\t\tObject.freeze(this);\r\n\t\t}\r\n\t\tconstructor(value){\r\n\t\t\tthis.value = value;\r\n\t\t\tObject.freeze(this);\r\n\t\t}\r\n\t}\r\n\r\n\t#isLoaded = false;\r\n\tTool;\r\n\t#connectedAfterCallback = () => {}\r\n\t#connectedAfterOnlyOneCallback = ()=> {}\r\n\t#disconnectedAfterCallback = ()=> {}\r\n\t#connectedChildAfterCallback = () => {}\r\n\t#disconnectedChildAfterCallback = () => {}\r\n\t#deleteOption;\r\n\tparentEditor;\r\n\t#childListObserver = new MutationObserver( (mutationList, observer) => {\r\n\t\tmutationList.forEach((mutation) => {\r\n\t\t\tlet {addedNodes, removedNodes} = mutation;\r\n\t\t\tlet connectedChildPromise = new Promise(resolve => {\r\n\t\t\t\tif(addedNodes.length != 0){\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet resultList;\r\n\t\t\t\t\tif( ! this.constructor.toolHandler.isInline){\r\n\t\t\t\t\t\tlet lastItemIndex;\r\n\t\t\t\t\t\tresultList = [...addedNodes].map((e,i)=>{\r\n\t\t\t\t\t\t\tif( ! e.classList?.contains(Line.toolHandler.defaultClass)){\r\n\t\t\t\t\t\t\t\tlet lineElement = this.parentEditor.createLine();\r\n\t\t\t\t\t\t\t\tlineElement.replaceChildren(e);\r\n\t\t\t\t\t\t\t\tthis.append(lineElement);\r\n\t\t\t\t\t\t\t\tif( i == addedNodes.length - 1){\r\n\t\t\t\t\t\t\t\t\tlastItemIndex = i;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn lineElement;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn e;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t//if(lastItemIndex){\r\n\t\t\t\t\t\t//\tresultList[lastItemIndex].line.lookAtMe();\r\n\t\t\t\t\t\t//}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tresultList = addedNodes;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.connectedChildAfterCallback(resultList);\r\n\t\t\t\t\t//this.connectedChildAfterCallback(addedNodes);\r\n\t\t\t\t}\r\n\t\t\t\tresolve();\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\tlet disconnectedChildPromise = new Promise(resolve => {\r\n\t\t\t\tif(removedNodes.length != 0){\r\n\t\t\t\t\tthis.disconnectedChildAfterCallback(removedNodes);\r\n\t\t\t\t}\r\n\t\t\t\tresolve();\r\n\t\t\t})\r\n\t\t\t\r\n\t\t})\r\n\t});\r\n\tconstructor(Tool, dataset, {deleteOption = FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_DELETE} = {}){\r\n\t\tsuper();\r\n\t\tthis.#childListObserver.disconnect();\r\n\t\tthis.#childListObserver.observe(this, {childList:true})\r\n\t\tthis.#deleteOption = deleteOption;\r\n\t\tthis.Tool = Tool;\r\n\t\tthis.classList.add(this.constructor.toolHandler.defaultClass)\r\n\r\n\t\tdocument.addEventListener('selectionchange', this.removeFun, true);\r\n\r\n\t\tif(dataset){\r\n\t\t\tObject.assign(this.dataset, dataset);\r\n\t\t}\r\n\t\t\r\n\t\tFreedomInterface.globalSelectionChangeEventListener(this, ({oldEvent, newEvent}) => {\r\n\t\t\tif(this.#deleteOption != FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE && this.isToolEmpty()){\r\n\t\t\t\tlet thisLine = this.parentEditor?.getLine(this);\r\n\t\t\t\tthis.remove();\r\n\t\t\t\tif(thisLine){\r\n\t\t\t\t\tthisLine.line.lookAtMe();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t}\r\n\tconnectedCallback(){\r\n\r\n\t\tif( ! this.#isLoaded){\r\n\t\t\t\r\n\t\t\tthis.#isLoaded = true;\r\n\t\t\tthis.constructor.toolHandler.connectedFriends = this;\r\n\t\t\tthis.parentEditor = this.closest('.free-will-editor');\r\n\t\t\tthis.parentLine = this.parentEditor?.getLine(this);\r\n\r\n\t\t\tif(this.childNodes.length == 0 && this.#deleteOption == FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE && (this.innerText.length == 0 || (this.innerText.length == 1 && this.innerText.charAt(0) == '\\n'))){\r\n\t\t\t\tlet sty = window.getComputedStyle(this);\r\n\t\t\t\tif(sty.visibility != 'hidden' || sty.opacity != 0){\r\n\t\t\t\t\tthis.innerText = '\\n';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(this.#deleteOption == FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_DELETE && (this.isToolEmpty() || this.childNodes.length == 0)){\r\n\t\t\t\tlet thisLine = this.parentEditor.getLine(this);\r\n\t\t\t\tthis.remove();\r\n\t\t\t\tif(thisLine){\r\n\t\t\t\t\tthisLine.line.lookAtMe();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\tif(this.shadowRoot){\r\n\t\t\t\t//this.parentLine.prepend(document.createTextNode('\\u00A0'));\r\n\t\t\t\t//this.parentLine.prepend(document.createElement('br'));\r\n\t\t\t\t//this.before(document.createElement('br'));\r\n\t\t\t\t//this.parentLine.before(this.parentEditor.createLine());\r\n\t\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\t\tif( ! nextLine){\r\n\t\t\t\t\tthis.parentEditor.createLine().innerText = '\\n';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tnextLine.line.lookAtMe();\r\n\t\t\t\t}\r\n\t\t\t\t/*this.childNodes.forEach(e=>{\r\n\t\t\t\t\tif(e.nodeType == Node.TEXT_NODE){\r\n\t\t\t\t\t\te.remove()\r\n\t\t\t\t\t}\r\n\t\t\t\t})*/\r\n\t\t\t}\r\n\r\n\t\t\tthis.connectedAfterOnlyOneCallback();\r\n\r\n\t\t\t\r\n\t\t\t/*\r\n\t\t\tif(this.shadowRoot && (this.querySelectorAll('[slot]').length == 0 || this.childNodes.length == 0 || (this.childNodes.length == 1 && this.childNodes[0]?.tagName == 'BR'))){\r\n\t\t\t\t//this.parentLine.prepend(document.createElement('br'));\r\n\t\t\t\t\r\n\t\t\t\tlet slot = Object.assign(document.createElement('slot'),{\r\n\t\t\t\t\tname: 'empty-slot'\r\n\t\t\t\t});\r\n\t\t\t\tlet emptySpan = Object.assign(document.createElement('span'), {\r\n\t\t\t\t\tslot : 'empty-slot'\r\n\t\t\t\t});\r\n\t\t\t\t//emptySpan.style.opacity='0';\r\n\t\t\t\t//emptySpan.append(document.createTextNode('\\u200B'));\r\n\t\t\t\temptySpan.innerText = '\\n'\r\n\t\t\t\tthis.prepend(emptySpan);\r\n\t\t\t\tthis.shadowRoot.append(slot);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t*/\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.connectedAfterCallback();\r\n\t}\r\n\tdisconnectedCallback(){\r\n        this.#isLoaded = false;\r\n\t\ttry{\r\n\t\t\tthis.disconnectedAfterCallback();\r\n\t\t}catch(err){\r\n\t\t\tconsole.error(err)\r\n\t\t}finally{\r\n\t\t\tthis.constructor.toolHandler.connectedFriends = this;\r\n\t\t\tthis.#childListObserver.disconnect(this, {childList:true})\r\n\t\t\tdocument.removeEventListener('selectionchange', this.removeFun, true);\r\n\t\t}\r\n\t}\r\n\r\n\tisToolEmpty(){\r\n\t\tlet sty = window.getComputedStyle(this);\r\n\t\tif(sty.visibility == 'hidden' || sty.opacity == 0){\r\n\t\t\treturn false;\r\n\t\t}\r\n        return this.innerText.length == 0 || (this.innerText.length == 1 && (this.innerText == '\\n' || this.innerText == '\\u200B'));\r\n    }\r\n\r\n\tisCursor(){\r\n\t\tlet selection = window.getSelection();\r\n\t\tif(! document.activeElement.classList.contains('free-will-editor')){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif(selection.type == 'None'){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn selection.containsNode(this, true) || selection.containsNode(this, false)\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Function}\r\n\t */\r\n\tset connectedAfterCallback(connectedAfterCallback){\r\n\t\tthis.#connectedAfterCallback = connectedAfterCallback;\r\n\t}\r\n\r\n\t/**\r\n\t * @returns {Function}\r\n\t */\r\n\tget connectedAfterCallback(){\r\n\t\treturn this.#connectedAfterCallback;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Function}\r\n\t */\r\n\tset connectedAfterOnlyOneCallback(connectedAfterOnlyOneCallback){\r\n\t\tthis.#connectedAfterOnlyOneCallback = connectedAfterOnlyOneCallback;\r\n\t}\r\n\t\r\n\t/**\r\n\t * @returns {Function}\r\n\t */\r\n\tget connectedAfterOnlyOneCallback(){\r\n\t\treturn this.#connectedAfterOnlyOneCallback;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Function}\r\n\t */\r\n\tset disconnectedAfterCallback(disconnectedAfterCallback){\r\n\t\tthis.#disconnectedAfterCallback = disconnectedAfterCallback;\r\n\t}\r\n\r\n\t/**\r\n\t * @returns {Function}\r\n\t */\r\n\tget disconnectedAfterCallback(){\r\n\t\treturn this.#disconnectedAfterCallback;\r\n\t}\r\n \r\n\t/**\r\n\t * @param {Function}\r\n\t */\r\n\tset connectedChildAfterCallback(connectedChildAfterCallback){\r\n\t\tthis.#connectedChildAfterCallback = connectedChildAfterCallback;\r\n\t}\r\n\r\n\t/**\r\n\t * @returns {Function}\r\n\t */\r\n\tget connectedChildAfterCallback(){\r\n\t\treturn this.#connectedChildAfterCallback;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Function}\r\n\t */\r\n\tset disconnectedChildAfterCallback(disconnectedChildAfterCallback){\r\n\t\tthis.#disconnectedChildAfterCallback = disconnectedChildAfterCallback;\r\n\t}\r\n\r\n\t/**\r\n\t * @returns {Function}\r\n\t */\r\n\tget disconnectedChildAfterCallback(){\r\n\t\treturn this.#disconnectedChildAfterCallback;\r\n\t}\r\n}","import ToolHandler from \"../module/ToolHandler\"\r\nimport FreedomInterface from \"../module/FreedomInterface\"\r\nexport default class Line {\r\n\t#isLoaded = false;\r\n\t#prevParent;\r\n\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-line'\r\n\t});\r\n\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-line';\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = ``\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t * @param {HTMLElement} element \r\n\t * @returns {HTMLElement} \r\n\t */\r\n\tstatic getLine(element){\r\n\t\tlet line = undefined;\r\n\t\tif( ! element.parentElement){\r\n\t\t\treturn line;\r\n\t\t}else if(element.classList?.contains(Line.toolHandler.defaultClass)){\r\n\t\t\treturn element;\r\n\t\t}else if(element.parentElement.classList.contains(Line.toolHandler.defaultClass)){\r\n\t\t\tline = element.parentElement;\r\n\t\t}else{\r\n\t\t\tline = element.parentElement.closest(`.${Line.toolHandler.defaultClass}`);\r\n\t\t}\r\n\t\treturn line;\r\n\t}\r\n\t\t/**\r\n\t * \r\n\t * @param {HTMLElement} element \r\n\t * @returns {HTMLElement} \r\n\t */\r\n\t\tstatic getRootLine(element){\r\n\t\t\tlet line = undefined;\r\n\t\t\tif( ! element.parentElement){\r\n\t\t\t\treturn line;\r\n\t\t\t}else if(element.classList?.contains(Line.toolHandler.defaultClass)){\r\n\t\t\t\treturn element;\r\n\t\t\t}else if(element.parentElement.classList.contains(Line.toolHandler.defaultClass)){\r\n\t\t\t\tline = element.parentElement;\r\n\t\t\t}else{\r\n\t\t\t\tline = element.parentElement.closest(`.${Line.toolHandler.defaultClass}`);\r\n\t\t\t}\r\n\t\t\tlet parent = line?.closest(`.${Line.toolHandler.defaultClass}`);\r\n\t\t\tif( ! parent){\r\n\t\t\t\treturn line;\r\n\t\t\t}else{\r\n\t\t\t\treturn Line.getRootLine(line);\r\n\t\t\t}\r\n\t\t}\r\n\tstatic getTool(element, TargetTool){\r\n\t\tlet tool = undefined;\r\n\t\t\r\n\t\tif( ! element.parentElement){\r\n\t\t\treturn tool;\r\n\t\t}else if(element.classList?.contains(TargetTool.toolHandler.defaultClass)){\r\n\t\t\treturn element\r\n\t\t}else if(element.parentElement.classList.contains(TargetTool.toolHandler.defaultClass)){\r\n\t\t\ttool = element.parentElement;\r\n\t\t}else{\r\n\t\t\ttool = element.parentElement.closest(`.${TargetTool.toolHandler.defaultClass}`);\r\n\t\t}\r\n\r\n\t\tif(! tool){\r\n\t\t\ttool = element.parentElement.querySelector(`.${TargetTool.toolHandler.defaultClass}`);\r\n\t\t}\r\n\t\treturn tool;\r\n\t}\r\n\t\r\n\tstatic isElementTextEmpty(element){\r\n        let sty = window.getComputedStyle(element);\r\n\t\tif(sty.visibility == 'hidden' || sty.opacity == 0){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t//let emptyString = (element.innerText.replace(/\\n+/g, '\\n') == '\\n' || element.innerText.replace(/\\u200B+/g, '\\u200B') == '\\u200B');\r\n        return element.innerText.length == 0 || (element.innerText.length == 1 && (element.innerText == '\\n' || element.innerText == '\\u200B'));\r\n    }\r\n\r\n\tlineElement\r\n\r\n\tconstructor(div){\r\n\t\t//super();\r\n\t\tif( ! div){\r\n\t\t\tthis.lineElement = Object.assign(document.createElement('div'),{\r\n\t\t\t\tclassName : Line.toolHandler.defaultClass\r\n\t\t\t})\r\n\t\t}else{\r\n\t\t\tthis.lineElement = div;\r\n\t\t\tthis.lineElement.classList.add(Line.toolHandler.defaultClass);\r\n\t\t}\r\n\t\tthis.lineElement.dataset.is_line = '';\r\n\t\t/*\r\n\t\tObject.getOwnPropertyNames(Object.getPrototypeOf(this)).forEach(functionName=>{\r\n\t\t\tif(functionName == 'constructor') return;\r\n\t\t\tthis.lineElement[functionName] = this[functionName];\r\n\t\t});\r\n\t\t*/\r\n\t\tthis.lineElement.line = this;\r\n\t\t/*\r\n\t\tthis.onkeyup = (event) => {\r\n\t\t\tif(event.key === 'Backspace' && this.innerText.length == 1 && (this.innerText.includes)){\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\t*/\r\n\t\t/*\r\n\t\tlet observer = new MutationObserver( (mutationList, observer) => {\r\n\t\t\tmutationList.forEach((mutation) => {\r\n\t\t\t\tif(Line.isElementTextEmpty(this.lineElement)){\r\n\t\t\t\t\tif(this.lineElement.childElementCount != 0){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//this.lineElement.innerText = '\\n';\r\n\t\t\t\t\twindow.getSelection().setPosition(this.lineElement, 0)\r\n\t\t\t\t\tthis.lineElement.focus();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t});\r\n\t\tobserver.observe(this.lineElement, {\r\n\t\t\tchildList:true,\r\n\t\t\tsubtree: true\r\n\t\t})\r\n\t\t*/\r\n\t}\r\n\t/*\r\n\tconnectedCallback(){\r\n\t\tif( ! this.#isLoaded){\r\n            this.#isLoaded = true;\r\n\r\n\t\t\t\r\n\t\t\tif(this.innerText.length == 0 || (this.innerText.length == 1 && this.innerText.charAt(0) == '\\n')){\r\n\t\t\t\tthis.innerText = '\\n';\r\n\t\t\t\twindow.getSelection().setPosition(this, 1)\r\n\t\t\t\tthis.focus();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\tdisconnectedCallback(){\r\n        this.#isLoaded = false;\r\n    }\r\n\t*/\r\n\t/**\r\n\t * applyTool, cancelTool에서 3가지 경우의 수로 함수를 분기시킬 것 apply mng와 cancel mng class를 새로 만들것, \r\n\t * line이 할 일이 아니니 freedomPlusEditor로 옮길 것\r\n\t * --applyTool\r\n\t * 1. 범위 전체\r\n\t * 2. 범위이되 line이 같을 때 (textNode별로 처리 필요)\r\n\t * 3. start와 end가 다를 때(멀티라인)\r\n\t * --cancelTool\r\n\t * 1. 범위\r\n\t * 2. 범위 중 일부\r\n\t * 3. 멀티라인\r\n\t */\r\n\r\n\t/**\r\n\t * tool이 좌우 옆 또는 자식, 부모에서 동일한 tool임을 감지할 때 합치는 로직 필요\r\n\t */\r\n\t/**\r\n\t * \r\n\t * @param {*} tool \r\n\t * @param {*} range \r\n\t * @returns \r\n\t */\r\n\tasync #applyOnlyOneTool(tool, range){\r\n\t\treturn new Promise(resolve=>{\r\n\t\t\trange.surroundContents(tool);\r\n\t\t\tresolve(tool)\r\n\t\t});\r\n\t}\r\n\t\r\n\tasync #applyOnlyOneLine(range, tool, TargetTool){\r\n\t\treturn new Promise(resolve=>{\r\n\t\t\tlet {startOffset, endOffset, startContainer,endContainer} = range;\r\n\r\n\t\t\tlet selection = window.getSelection();\r\n\r\n\t\t\tlet startNodeToPrevNodeIndex = [...this.lineElement.childNodes].findIndex(e=>selection.containsNode(e, true)) - 1;\r\n\t\t\tlet isFirstNodeToStart = startNodeToPrevNodeIndex < 0;\r\n\r\n\t\t\t\r\n\t\t\tlet nodeList = [];\r\n\t\t\tfor(let i = startNodeToPrevNodeIndex + 1 ; true ; i += 1){\r\n\t\t\t\tif( ! this.lineElement.childNodes[i] || ! selection.containsNode(this.lineElement.childNodes[i], true)){\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tlet iter = document.createNodeIterator(this.lineElement.childNodes[i], NodeFilter.SHOW_TEXT)\r\n\t\t\t\tlet targetNode;\r\n\t\t\t\twhile(targetNode = iter.nextNode()){\r\n\t\t\t\t\tif(targetNode == endContainer){\r\n\t\t\t\t\t\t// this.lineElement.childNodes[i] == endContainer == targetNode\r\n\t\t\t\t\t\tlet clone = targetNode.cloneNode(true);\r\n\t\t\t\t\t\tclone.textContent = targetNode.textContent.substring(endOffset);\r\n\t\t\t\t\t\ttargetNode.after(clone);\r\n\t\t\t\t\t\ttargetNode.textContent = targetNode.textContent.substring(0, endOffset);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tnodeList.push(this.lineElement.childNodes[i]);\r\n\t\t\t}\r\n\t\t\t//nodeList.forEach(e=>e.remove())\r\n\t\t\t//prepend\r\n\t\t\ttool.append(...nodeList);\r\n\t\t\tif(isFirstNodeToStart){\r\n\t\t\t\tthis.lineElement.prepend(tool)\r\n\t\t\t}else{\r\n\t\t\t\tlet startTarget = this.lineElement.childNodes[startNodeToPrevNodeIndex];\r\n\t\t\t\tstartTarget.after(tool);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t/*\r\n\t\t\trange.setStart(startContainer, startOffset);\r\n\t\t\trange.setEnd(startContainer, startContainer.textContent.length);\r\n\t\t\trange.surroundContents(tool);\r\n\t\t\t\r\n\t\t\tlet targetNode = startContainer.nextSibling;\r\n\t\t\t//let lastPrevTool = undefined;\r\n\t\t\twhile(targetNode){\r\n\t\t\t\tconsole.log(targetNode)\r\n\t\t\t\tif(targetNode == endContainer){\r\n\t\t\t\t\tconsole.log(2)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif(targetNode.textContent == '' || TargetTool.prototype.isPrototypeOf(targetNode)){\r\n\t\t\t\t\tconsole.log(3)\r\n\t\t\t\t\ttargetNode = targetNode.nextSibling\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.log(targetNode);\r\n\t\t\t\trange.selectNode(targetNode);\r\n\t\t\t\trange.surroundContents(new TargetTool());\r\n\t\t\t\tconsole.log(4)\r\n\t\t\t\ttargetNode = targetNode.nextSibling\r\n\t\t\t}\r\n\r\n\t\t\tlet endTool = new TargetTool();\r\n\t\t\trange.setStart(endContainer, 0);\r\n\t\t\trange.setEnd(endContainer, endOffset);\r\n\t\t\trange.surroundContents(endTool);\r\n\t\t\tresolve(endTool);\r\n\t\t\t*/\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\tasync #applyMultipleLineAllBlock(range, tool ,TargetTool, endLine){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tlet fragment = range.extractContents();\r\n\t\t\ttool.append(...fragment.childNodes);\r\n\t\t\tthis.lineElement.append(tool);\r\n\t\t\tresolve(tool);\r\n\t\t})\r\n\t}\r\n\tasync #applyMultipleLineAll(range, tool, TargetTool, endLine){\r\n\t\treturn new Promise(resolve=>{\r\n\t\t\tlet {startOffset, endOffset, startContainer,endContainer} = range;\r\n\t\t\t\r\n\t\t\trange.setStart(startContainer, startOffset);\r\n\t\t\trange.setEnd(startContainer, startContainer.textContent.length);\r\n\t\t\trange.surroundContents(tool);\r\n\r\n\t\t\tlet targetStartLineItem = startContainer.nextSibling?.nextSibling;\r\n\t\t\t\r\n\t\t\tif(targetStartLineItem){\r\n\t\t\t\tlet itemRemoveList = [];\r\n\t\t\t\tlet itemAppendList = [];\r\n\t\t\t\twhile(targetStartLineItem){\r\n\t\t\t\t\t//console.log('targetStartLineItem',targetStartLineItem)\r\n\t\t\t\t\tif(targetStartLineItem.nodeType == Node.ELEMENT_NODE){\r\n\t\t\t\t\t\tif(tool == targetStartLineItem){\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttool.append(targetStartLineItem);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\titemAppendList.push(targetStartLineItem.textContent);\r\n\t\t\t\t\t\titemRemoveList.push(targetStartLineItem);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttargetStartLineItem = targetStartLineItem.nextSibling;\t\r\n\r\n\t\t\t\t}\r\n\t\t\t\t[...tool.childNodes].find(e=>e.nodeType == Node.TEXT_NODE)?.appendData(itemAppendList.join(''));\r\n\t\t\t\titemRemoveList.forEach(e=>e.remove())\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(tool.parentElement != this.lineElement && tool.parentElement?.nextSibling){\r\n\t\t\t\t//20230817 멀티라인일시 첫번쨰 라인 중첩 서식 미동작 현상 수정을 위해 내용 변경\r\n\t\t\t\tlet nextTool = new TargetTool();\r\n\t\t\t\tnextTool.append(tool.parentElement.nextSibling);\r\n\t\t\t\ttool.parentElement.after(nextTool);\r\n\t\t\t\tlet nextItem = nextTool.nextSibling;\r\n\t\t\t\t\r\n\t\t\t\tif(nextItem && nextTool != nextItem){\r\n\t\t\t\t\tnextTool.append(nextItem);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tlet targetLine = Line.getLine(startContainer).nextElementSibling; \r\n\t\t\tlet middleTargetTool;\r\n\t\t\t\r\n\t\t\twhile(targetLine){\r\n\t\t\t\t//console.log('targetLine', targetLine)\r\n\t\t\t\tif(targetLine === endLine){\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\t// 아래 주석 지우지 말 것, 중첩 자식 요소에서 미동작 또는 오류 발생시 아래 로직 주석 풀고 테스트 해볼 것\r\n\t\t\t\t// let middleTool = new TargetTool();\r\n\t\t\t\t// middleTool.append(...targetLine.childNodes);\r\n\t\t\t\t// targetLine.append(middleTool);\r\n\t\t\t\tmiddleTargetTool = new TargetTool()\r\n\t\t\t\trange.selectNodeContents(targetLine);\r\n\t\t\t\trange.surroundContents(middleTargetTool);\r\n\t\t\t\ttargetLine = targetLine.nextElementSibling;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(Line.prototype.isPrototypeOf(endContainer.line)){\r\n\t\t\t\tresolve(( ! middleTargetTool ? tool : middleTargetTool ));\r\n\t\t\t}else{\r\n\t\t\t\tlet endTool = new TargetTool();\r\n\t\t\t\trange.setStart(endContainer, 0);\r\n\t\t\t\trange.setEnd(endContainer, endOffset);\r\n\t\t\t\trange.surroundContents(endTool);\r\n\t\t\t\t// 분할 적용 되지 않도록 합친다 ex(<b>1</b><b>2</b> => <b>12</b>) \r\n\t\t\t\tlet targetEndLineItem = endContainer.previousSibling;\r\n\t\t\t\tif(targetEndLineItem){\r\n\t\t\t\t\tlet itemRemoveList = [];\r\n\t\t\t\t\tlet itemAppendList = [];\r\n\r\n\t\t\t\t\twhile(targetEndLineItem){\r\n\t\t\t\t\t\t//console.log('targetEndLineItem', targetEndLineItem)\r\n\t\t\t\t\t\tif(targetEndLineItem.nodeType == Node.ELEMENT_NODE){\r\n\t\t\t\t\t\t\tendTool.prepend(targetEndLineItem);\r\n\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\tlet firstTextNode = [...targetEndLineItem.childNodes].find(e=>e.nodeType == Node.TEXT_NODE);\r\n\t\t\t\t\t\t\tlet moveTextList = [...endTool.childNodes].filter(e=>e.nodeType == Node.TEXT_NODE)\r\n\t\t\t\t\t\t\tmoveTextList.forEach(e=>{\r\n\t\t\t\t\t\t\t\te.textContent = firstTextNode.textContent + e.data\r\n\t\t\t\t\t\t\t\tfirstTextNode.remove();\r\n\t\t\t\t\t\t\t\tfirstTextNode = e;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\ttargetEndLineItem.append(firstTextNode);\r\n\t\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t//endTool.prepend(document.createTextNode(targetEndLineItem.textContent));\r\n\t\t\t\t\t\t\titemRemoveList.push(targetEndLineItem);\r\n\t\t\t\t\t\t\titemAppendList.unshift(targetEndLineItem.textContent)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttargetEndLineItem = targetEndLineItem.previousSibling;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//let targetTextNode = [...endTool.childNodes].find(e=>e.nodeType == Node.TEXT_NODE)\r\n\t\t\t\t\t//itemAppendList.push(targetTextNode.data);\r\n\t\t\t\t\t//targetTextNode.textContent = itemAppendList.join('');\r\n\t\t\t\t\t//endTool.append(targetTextNode)\r\n\t\t\t\t\t[...endTool.childNodes].find(e=>e.nodeType == Node.TEXT_NODE)?.appendData(itemAppendList.join(''));\r\n\t\t\t\t\t//endTool.prepend(document.createTextNode(itemAppendList.join('')))\r\n\t\t\t\t\t//itemRemoveList.forEach(e=>e.remove())\r\n\t\t\t\t}\r\n\t\t\t\tresolve(endTool);\r\n\t\t\t}\r\n\r\n\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t * @param {*} TargetTool \r\n\t * @param {*} range \r\n\t * @returns \r\n\t */\r\n\tasync applyTool(TargetTool, range, endLine){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tlet tool = new TargetTool();\r\n\t\t\tlet {startOffset, endOffset, startContainer,endContainer} = range;\r\n\r\n\t\t\t/*\r\n\t\t\tif(startContainer === endContainer){\r\n\t\t\t\tconsole.log('applyOnlyOneTool');\r\n\t\t\t\tthis.#applyOnlyOneTool(tool, range).then(tool=>{\r\n\t\t\t\t\tresolve(tool)\r\n\t\t\t\t})\r\n\t\t\t}*/\r\n\t\t\tif(this.lineElement.childNodes.length == 1 && this.lineElement.innerText == '\\n' && this.lineElement.childNodes[0].nodeName == 'BR'){\r\n\t\t\t\tthis.lineElement.childNodes[0].remove();\r\n\t\t\t}\r\n\t\t\tif(tool.shadowRoot || ! TargetTool.toolHandler.isInline){\r\n\t\t\t\tresolve(this.#applyMultipleLineAllBlock(range, tool, TargetTool, endLine));\r\n\t\t\t}else if(startContainer === endContainer && this.lineElement.innerText.length != range.toString().length){\r\n\t\t\t\tconsole.log('applyOnlyOneTool');\r\n\t\t\t\tthis.#applyOnlyOneTool(tool, range).then(tool=>{\r\n\t\t\t\t\tresolve(tool)\r\n\t\t\t\t})\r\n\t\t\t}else if(Line.getLine(startContainer) === Line.getLine(endContainer)){\r\n\t\t\t\tconsole.log('applyOnlyOneLine')\r\n\t\t\t\tthis.#applyOnlyOneLine(range, tool, TargetTool).then(endTool => {\r\n\t\t\t\t\tresolve(endTool)\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\tconsole.log('applyMultipleLineAll')\r\n\t\t\t\tthis.#applyMultipleLineAll(range, tool, TargetTool, endLine).then(endTool => {\r\n\t\t\t\t\tresolve(endTool)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tasync #cancelOnlyOneLine(range, tool, TargetTool){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\t// this로 childern 돌려서 TargetTool 타입 체크랑 nodeType로 바깥으로 빼는 로직 만들기\r\n\t\t\tlet {startOffset, endOffset, startContainer, endContainer} = range;\r\n\t\t\tthis.lineElement.childNodes.forEach(e=>{\r\n\t\t\t\tthis.#findCancels(e, TargetTool);\r\n\t\t\t});\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\tasync #cancelOnlyOneTool(range, tool, TargetTool){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tlet {startOffset, endOffset, startContainer, endContainer, commonAncestorContainer} = range;\r\n\t\t\t/*\r\n\t\t\tlet textNode = document.createTextNode(startContainer.textContent.substring(startOffset, endOffset));\r\n\t\t\tlet startNextSibling = (tool?.nextSibling  || endContainer.nextSibling);\r\n\t\t\tlet startPrevSibling = (tool?.previousSibling || startContainer.previousSibling);\r\n\t\t\t*/\r\n\t\t\tlet offset = endOffset - startOffset;\r\n\r\n\t\t\tlet leftText = undefined;\r\n\t\t\tlet rightText = undefined;\r\n\t\t\tlet leftList = [];\r\n\t\t\tlet rightList = [];\r\n\t\t\tlet targetWrap = undefined;\r\n\t\t\tlet targetText;\r\n\t\t\tif(commonAncestorContainer.nodeType == Node.TEXT_NODE && commonAncestorContainer.parentElement != this && ! TargetTool.prototype.isPrototypeOf(commonAncestorContainer.parentElement)){\r\n\t\t\t\tlet cloneRange = range.cloneRange();\r\n\t\t\t\tcloneRange.selectNode(commonAncestorContainer.parentElement);\r\n\t\t\t\ttargetText = cloneRange.cloneContents();\r\n\t\t\t}else{\r\n\t\t\t\ttargetText = range.cloneContents();\r\n\t\t\t}\r\n\r\n\t\t\tlet selection = window.getSelection()\r\n\r\n\t\t\t//if(tool.childNodes.length > 1){\r\n\t\t\tlet list = [...tool.childNodes];\r\n\t\t\tif( ! TargetTool.toolHandler.isInline){\r\n\t\t\t\ttry{\r\n\t\t\t\t\tthis.lineElement.append(...list);\r\n\t\t\t\t}catch(Ignore){\r\n\t\t\t\t\tLine.getLine(tool).append(...list);\r\n\t\t\t\t}\r\n\t\t\t\ttool.remove();\r\n\t\t\t\tresolve();\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tlet index = list.findIndex(e=> selection.containsNode(e, true) || selection.containsNode(e, false))\r\n\t\t\ttargetWrap = list[index]\r\n\t\t\tleftList = list.slice(0, index);\r\n\t\t\trightList = list.slice(index + 1);\r\n\t\t\t//}\r\n\t\t\t\r\n\r\n\t\t\tif(startContainer.textContent.length != offset){\r\n\t\t\t\tleftText = startContainer.textContent.substring(0, startOffset);\t\t\t\r\n\t\t\t\trightText = offset <= 1 ? startContainer.textContent.substring(startOffset + 1) : startContainer.textContent.substring(startOffset + offset);\r\n\t\t\t\tif(targetWrap != undefined){\r\n\t\t\t\t\tlet cloneLeft = targetWrap.cloneNode(false);\r\n\t\t\t\t\tcloneLeft.textContent = leftText;\r\n\t\t\t\t\tleftText = cloneLeft; \r\n\t\t\t\t\tlet cloneRight = targetWrap.cloneNode(false);\r\n\t\t\t\t\tcloneRight.textContent = rightText;\r\n\t\t\t\t\trightText = cloneRight; \r\n\t\t\t\t\ttargetWrap.remove();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tleftText = document.createTextNode(leftText);\r\n\t\t\t\t\trightText = document.createTextNode(rightText);\r\n\t\t\t\t}\r\n\t\t\t\tleftList.unshift(leftText);\r\n\t\t\t\trightList.push(rightText);\r\n\t\t\t}\r\n\t\t\t//tool.replaceChildren(...leftList, targetText, ...rightList)\r\n\r\n\t\t\tlet leftElement = undefined;\r\n\t\t\tif(leftList.length != 0){\r\n\t\t\t\tleftElement = new TargetTool();\r\n\t\t\t\tleftElement.append(...leftList);\r\n\t\t\t}\r\n\t\t\tlet rightElement = undefined;\r\n\t\t\tif(rightList.length != 0){\r\n\t\t\t\trightElement = new TargetTool();\r\n\t\t\t\trightElement.append(...rightList);\r\n\t\t\t}\r\n\r\n\t\t\tlet appendList = [leftElement, targetText, rightElement].filter(e=>e);\r\n\t\t\tif(tool.previousSibling){\r\n\t\t\t\ttool.previousSibling.after(...appendList)\r\n\t\t\t}else if(tool.nextSibling){\r\n\t\t\t\ttool.nextSibling.before(...appendList);\r\n\t\t\t}else{\r\n\t\t\t\tthis.lineElement.append(...appendList);\r\n\t\t\t}\r\n\t\t\t/*\r\n\t\t\tif(startPrevSibling && startPrevSibling.nodeType == Node.TEXT_NODE){\r\n\t\t\t\tconsole.log(1)\r\n\t\t\t\tif(rightText){\r\n\t\t\t\t\tlet rightTool = new TargetTool();\r\n\t\t\t\t\trightTool.textContent = rightText;\r\n\t\t\t\t\tstartPrevSibling.after(rightTool);\r\n\t\t\t\t}\r\n\t\t\t\tstartPrevSibling.after(textNode);\r\n\t\t\t\tif(leftText){\r\n\t\t\t\t\tlet leftTool = new TargetTool()\r\n\t\t\t\t\tleftTool.textContent = leftText \r\n\t\t\t\t\tstartPrevSibling.after(leftTool);\r\n\t\t\t\t}\r\n\t\t\t}else if(startNextSibling && startNextSibling.nodeType == Node.TEXT_NODE){\r\n\t\t\t\tconsole.log(2)\r\n\t\t\t\tif(leftText){\r\n\t\t\t\t\tlet leftTool = new TargetTool()\r\n\t\t\t\t\tleftTool.textContent = leftText \r\n\t\t\t\t\tstartNextSibling.before(leftTool);\r\n\t\t\t\t}\r\n\t\t\t\tstartNextSibling.before(textNode);\r\n\t\t\t\tif(rightText){\r\n\t\t\t\t\tlet rightTool = new TargetTool();\r\n\t\t\t\t\trightTool.textContent = rightText;\r\n\t\t\t\t\tstartNextSibling.before(rightTool);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tconsole.log(3)\r\n\t\t\t\tif(leftText){\r\n\t\t\t\t\tlet leftTool = new TargetTool()\r\n\t\t\t\t\tleftTool.textContent = leftText \r\n\t\t\t\t\tthis.append(leftTool);\r\n\t\t\t\t}\r\n\t\t\t\tthis.append(document.createTextNode(textNode));\r\n\t\t\t\tif(rightText){\r\n\t\t\t\t\tlet rightTool = new TargetTool();\r\n\t\t\t\t\trightTool.textContent = rightText;\r\n\t\t\t\t\tthis.append(rightTool);\r\n\t\t\t\t}\r\n\t\t\t}*/\r\n\t\t\t//startContainer.remove();\r\n\t\t\ttool.remove();\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n\tasync #cancelMultipleLineAll(range, tool, TargetTool, endLine){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tlet {startOffset, endOffset, startContainer, endContainer} = range;\r\n\t\t\t\r\n\t\t\tlet endTool = Line.getTool(endContainer, TargetTool);\r\n\r\n\t\t\t// 파이어폭스에서 startContainer, endContainer가 나노 미세 컨트롤로 커서 위치와 관계 없이 비정상 동작 하는 현상 수정 필요\r\n\t\t\tlet startTextNode = document.createTextNode(startContainer.textContent.substring(startOffset, startContainer.textContent.length));\r\n\t\t\tlet endTextNode = document.createTextNode(endContainer.textContent.substring(0, endOffset));\r\n\t\t\t\r\n\t\t\tlet startLeftText = startContainer.textContent.substring(0, startOffset);\r\n\t\t\tlet endRightText = endContainer.textContent.substring(endOffset, endContainer.textContent.length)\r\n\r\n\t\t\tlet startNextSibling = tool?.nextSibling\r\n\t\t\tlet startPrevSibling = tool?.previousSibling\r\n\r\n\t\t\tlet endNextSibling = endTool?.nextSibling\r\n\t\t\tlet endPrevSibling = endTool?.previousSibling\r\n\r\n\t\t\tif(startOffset == 0){\r\n\t\t\t\t//console.log(1)\r\n\t\t\t\tthis.#findCancels(this.lineElement, TargetTool);\r\n\t\t\t}else\r\n\t\t\tif(startPrevSibling && startPrevSibling.nodeType == Node.TEXT_NODE){\r\n\t\t\t\t//console.log(2)\r\n\t\t\t\tstartPrevSibling.after(startTextNode);\r\n\t\t\t\tif(startLeftText){\r\n\t\t\t\t\tlet leftTool = new TargetTool()\r\n\t\t\t\t\tleftTool.textContent = startLeftText \r\n\t\t\t\t\tstartPrevSibling.after(leftTool);\r\n\t\t\t\t}\r\n\t\t\t}else if(startNextSibling && startNextSibling.nodeType == Node.TEXT_NODE){\r\n\t\t\t\t//console.log(3)\r\n\t\t\t\tif(startLeftText){\r\n\t\t\t\t\tlet leftTool = new TargetTool()\r\n\t\t\t\t\tleftTool.textContent = startLeftText \r\n\t\t\t\t\tstartNextSibling.before(leftTool);\r\n\t\t\t\t}\r\n\t\t\t\tstartNextSibling.before(startTextNode);\r\n\t\t\t}else{\r\n\t\t\t\t/*console.log(4)\r\n\t\t\t\tif(startLeftText){\r\n\t\t\t\t\tlet leftTool = new TargetTool()\r\n\t\t\t\t\tleftTool.textContent = startLeftText \r\n\t\t\t\t\tthis.append(leftTool);\r\n\t\t\t\t}\r\n\t\t\t\tthis.append(startTextNode);\r\n\t\t\t\t*/\r\n\t\t\t}\r\n\t\t\tif(tool){\r\n\t\t\t\ttool.remove();\r\n\t\t\t}\r\n\r\n\t\t\tlet nextLine = this.lineElement.nextElementSibling;\r\n\r\n\r\n\t\t\twhile(nextLine){\r\n\t\t\t\tif(nextLine == endLine){\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tnextLine.childNodes.forEach(e=>{\r\n\t\t\t\t\t//console.log(4);\r\n\t\t\t\t\tthis.#findCancels(e, TargetTool);\r\n\t\t\t\t})\r\n\t\t\t\tnextLine = nextLine.nextElementSibling;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(endOffset == endContainer.length){\r\n\t\t\t\t//console.log(1)\r\n\t\t\t\tthis.#findCancels(endLine, TargetTool);\r\n\t\t\t}else\r\n\t\t\tif(endPrevSibling && endPrevSibling.nodeType == Node.TEXT_NODE){\r\n\t\t\t\t//console.log(2)\r\n\t\t\t\tif(endRightText){\r\n\t\t\t\t\tlet rightTool = new TargetTool();\r\n\t\t\t\t\trightTool.textContent = endRightText;\r\n\t\t\t\t\tendPrevSibling.after(rightTool);\r\n\t\t\t\t}\r\n\t\t\t\tendPrevSibling.after(endTextNode);\r\n\t\t\t}else if(endNextSibling && endNextSibling.nodeType == Node.TEXT_NODE){\r\n\t\t\t\t//console.log(3)\r\n\t\t\t\tendNextSibling.before(endTextNode);\r\n\t\t\t\tif(endRightText){\r\n\t\t\t\t\tlet rightTool = new TargetTool();\r\n\t\t\t\t\trightTool.textContent = endRightText;\r\n\t\t\t\t\tendNextSibling.after(rightTool);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t/*console.log(4)\r\n\t\t\t\tif(endRightText){\r\n\t\t\t\t\tlet rightTool = new TargetTool();\r\n\t\t\t\t\trightTool.textContent = endRightText;\r\n\t\t\t\t\t//endLine.append(rightTool);\r\n\t\t\t\t}\r\n\t\t\t\tendLine.prepend(endTextNode);\r\n\t\t\t\t*/\r\n\t\t\t}\r\n\r\n\t\t\tif(endTool){\r\n\t\t\t\tendTool.remove();\r\n\t\t\t}\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n\tasync cancelTool(TargetTool, selection, endLine){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tlet {isCollapsed, anchorNode, anchorOffset} = selection;\r\n\t\t\tlet range = selection.getRangeAt(0);\r\n\t\t\tlet {startOffset, endOffset, startContainer, endContainer, commonAncestorContainer} = range;\r\n\t\t\tlet tool = Line.getTool(startContainer, TargetTool);\r\n\t\t\t/*\r\n\t\t\tif(startContainer === endContainer){\r\n\t\t\t\tif(startContainer.parentElement.childNodes.length == 1 \r\n\t\t\t\t\t&& startContainer.parentElement.childNodes[0] ==  startContainer\r\n\t\t\t\t\t&& startContainer.parentElement.childNodes[0] ==  endContainer\r\n\t\t\t\t\t&& endContainer.textContent.length == endOffset){\r\n\t\t\t\t\t// tool 범위 전체 선택인 경우\r\n\t\t\t\t\tthis.#cancelOnlyOneLine(range, tool, TargetTool).then(()=>{\r\n\t\t\t\t\t\tconsole.log('cancelOnlyOneLine 1')\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// 범위 중 일부\r\n\t\t\t\t\tthis.#cancelOnlyOneTool(range, tool, TargetTool).then(()=>{\r\n\t\t\t\t\t\tconsole.log('cancelOnlyOneTool')\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t*/\r\n\r\n\t\t\tif( ! tool){\r\n\t\t\t\tTargetTool.toolHandler.toolButton.dataset.tool_status = 'connected'\r\n\t\t\t\tresolve();\r\n\t\t\t}else{\r\n\t\t\t\tif( ! TargetTool.toolHandler.isInline || (startContainer === endContainer && this.lineElement.innerText.length != range.toString().length ) ){\r\n\t\t\t\t\tthis.#cancelOnlyOneTool(range, tool, TargetTool).then(()=>{\r\n\t\t\t\t\t\tconsole.log('cancelOnlyOneTool')\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t})\r\n\t\t\t\t}else if(Line.getLine(startContainer) === Line.getLine(endContainer)){\r\n\t\t\t\t\t// 하나만\r\n\t\t\t\t\t// tool 범위 전체 선택인 경우\r\n\t\t\t\t\tthis.#cancelOnlyOneLine(range, tool, TargetTool).then(()=>{\r\n\t\t\t\t\t\tconsole.log('cancelOnlyOneLine 2')\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.#cancelMultipleLineAll(range, tool, TargetTool, endLine).then(()=>{\r\n\t\t\t\t\t\tconsole.log('cancelMultipleLineAll')\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t}).catch(err=>console.error(err))\r\n\t\t\t\t}\r\n\t\t\t\tresolve();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t#findCancels(element, TargetTool){\r\n\t\tnew Promise(res=>{\r\n\t\t\tif(TargetTool.prototype.isPrototypeOf(element)){\r\n\t\t\t\tif(element.nextSibling){\r\n\t\t\t\t\telement.nextSibling.before(...element.childNodes);\r\n\t\t\t\t} else if(element.previousSibling){\r\n\t\t\t\t\telement.previousSibling.after(...element.childNodes);\r\n\t\t\t\t}else {\r\n\t\t\t\t\telement.parentElement.append(...element.childNodes);\r\n\t\t\t\t}\r\n\t\t\t\telement.remove();\r\n\t\t\t}else{\r\n\t\t\t\tif(element.nodeType == Node.ELEMENT_NODE){\r\n\t\t\t\t\telement.childNodes.forEach(e=>{\r\n\t\t\t\t\t\tthis.#findCancels(e, TargetTool);\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tres();\r\n\t\t})\r\n\t}\r\n\r\n\tlookAtMe(){\r\n\t\tlet sty = window.getComputedStyle(this.lineElement);\r\n\t\tif(sty.visibility == 'hidden' || sty.opacity == 0){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(this.lineElement.innerText.length == 0 || (this.lineElement.innerText.length == 1 && this.lineElement.innerText.charAt(0) == '\\n')){\r\n\t\t\tthis.lineElement.innerText = '\\n';\r\n\t\t}\r\n\t\tif(this.lineElement.isContentEditable){\r\n\t\t\tthis.lineElement.focus()\r\n\t\t\twindow.getSelection().setPosition(this.lineElement, this.lineElement.childNodes.length)\r\n\t\t}\r\n\t}\r\n\r\n}","import Line from '../component/Line'\r\n\r\nexport default class FreeWiilHandler extends HTMLElement{\r\n    static #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor'\r\n\t});\r\n\r\n    static #defaultClass = 'free-will-editor';\r\n\r\n    static createDefaultStyle(){\r\n        let defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle = defaultStyle;\r\n        }\r\n\t\tthis.#defaultStyle.textContent = `\r\n            .${this.defaultClass}{\r\n                height: inherit;\r\n                overflow: auto;\r\n                overflow-wrap: anywhere;\r\n                outline: none;\r\n                background-color: inherit;\r\n                padding-top: 0.6%;\r\n                padding-left: 0.5%;\r\n                padding-right: 0.8%;\r\n                -ms-overflow-style: none;\r\n                scrollbar-width: none;\r\n                display: block;\r\n            }\r\n            .${this.#defaultClass}::-webkit-scrollbar {\r\n                display: none;\r\n            }\r\n\r\n            .${this.#defaultClass} > :nth-child(1)::before{\r\n                content: attr(data-placeholder);\r\n                position: absolute;\r\n                color: #d1d1d1;\r\n                font-weight: 600;\r\n                font-family: revert;\r\n                cursor: text;\r\n            }\r\n\t\t`\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n    static get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n    static get defaultClass(){\r\n        return this.#defaultClass;\r\n    }\r\n\r\n    static set defaultClass(defaultClass){\r\n        this.#defaultClass = defaultClass;\r\n    }\r\n\r\n    constructor({isDefaultStyle = true} = {}){\r\n        super()\r\n        this.classList.add('free-will-editor');\r\n\r\n    }\r\n\r\n    blockBackspaceEvent(event){\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @returns {HTMLDivElement}\r\n     */\r\n    createLine(){\r\n        let line = new Line();\r\n        this.append(line.lineElement);\r\n        return line.lineElement;\r\n    }\r\n\r\n    getLineRange(selection = window.getSelection()){\r\n        return new Promise(resolve => {\r\n            let {anchorNode, focusNode} = selection; \r\n            let startAndEndLineObject;\r\n            if(anchorNode == this){\r\n                console.log(111)\r\n                let allLine = [...this.children].filter(e=>e.classList.contains(`${Line.toolHandler.defaultClass}`))\r\n                startAndEndLineObject = {\r\n                    startLine : allLine[0],\r\n                    endLine : allLine.at(-1)\r\n                }\r\n                let range = selection.getRangeAt(0);\r\n                //selection.removeAllRanges();\r\n                let endLineChildNodes = [...startAndEndLineObject.endLine.childNodes].at(-1);\r\n                range.setStart(startAndEndLineObject.startLine.childNodes[0], 1);\r\n                range.setEnd(endLineChildNodes, endLineChildNodes.nodeType == Node.TEXT_NODE ? endLineChildNodes.textContent.length : startAndEndLineObject.endLine.childNodes.length);\r\n                selection.addRange(range);\r\n            }else{\r\n                console.log(222)\r\n                let anchorNodeLine = Line.getLine(anchorNode);\r\n                let focusNodeLine = Line.getLine(focusNode);\r\n                if(anchorNodeLine == focusNodeLine){\r\n                    //console.log(333)\r\n                    resolve({\r\n                        startLine: anchorNodeLine,\r\n                        endLine: focusNodeLine\r\n                    })\r\n                    return;\r\n                }\r\n                //console.log(4444, anchorNodeLine , focusNodeLine);\r\n                startAndEndLineObject = {startLine : anchorNodeLine, endLine : focusNodeLine};\r\n                let key = 'startLine';\r\n                startAndEndLineObject = [...this.querySelectorAll(`.${Line.toolHandler.defaultClass}`)].reduce((obj,item,index)=>{\r\n                    if(item == anchorNodeLine || item == focusNodeLine){\r\n                        if(obj.hasOwnProperty(key)){\r\n                            obj['endLine'] = item\r\n                        }else{\r\n                            obj[key] = item\r\n                        }\r\n                    }\r\n                    return obj;\r\n                },{})\r\n            }\r\n            resolve(startAndEndLineObject);\r\n        })\r\n    }\r\n\r\n    isNextLineExist(element = window.getSelection(), {isRoot = false} = {}){\r\n        let line = isRoot ? Line.getRootLine(element) : Line.getLine(element);\r\n\r\n        let nextLine = line.nextElementSibling;\r\n        if( ! nextLine){\r\n            return false;\r\n        }\r\n        return Line.prototype.isPrototypeOf(nextLine.line);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLElement} element \r\n     * @param {Object} param1 \r\n     * @returns {HTMLElement}\r\n     */\r\n    getNextLine(element = window.getSelection(), {focus = false, isRoot = false} = {}){\r\n\r\n        let line = isRoot ? Line.getRootLine(element) : Line.getLine(element);\r\n\r\n        if( ! line){\r\n            return undefined;\r\n        }\r\n        \r\n        let nextLine = line.nextElementSibling;\r\n        if(nextLine && Line.prototype.isPrototypeOf(nextLine.line)){\r\n            if(focus){\r\n                nextLine.line.lookAtMe();\r\n            }\r\n            return nextLine;\r\n        }\r\n        return undefined;\r\n    }\r\n    \r\n    /**\r\n     * \r\n     * @param {HTMLElement} element \r\n     * @param {Object} param1 \r\n     * @returns {HTMLElement}\r\n     */\r\n    getPrevLine(element = window.getSelection(), {focus = false, isRoot = false} = {}){\r\n\r\n        let line = isRoot ? Line.getRootLine(element) : Line.getLine(element);\r\n        if( ! line){\r\n            return undefined;\r\n        }\r\n        let nextLine = line.previousElementSibling;\r\n        if(nextLine && Line.prototype.isPrototypeOf(nextLine.line)){\r\n            if(focus){\r\n                nextLine.line.lookAtMe();\r\n            }\r\n            return nextLine;\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    getLine(element = window.getSelection(), {isRoot = false} = {}){\r\n        return isRoot ? Line.getRootLine(element) : Line.getLine(element);\r\n    }\r\n\r\n\tisCursor(){\r\n\t\tlet selection = window.getSelection();\r\n\t\tif(! document.activeElement.classList.contains('free-will-editor')){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif(selection.type == 'None'){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn selection.containsNode(this, true) || selection.containsNode(this, false)\r\n\t}\r\n\r\n    getCurrentLine(element, {isRoot = false} = {}){\r\n\t\tlet selection = window.getSelection();\r\n\t\tif(! document.activeElement.classList.contains('free-will-editor')){\r\n\t\t\treturn ;\r\n\t\t}\r\n\t\tif(selection.type == 'None'){\r\n\t\t\treturn ;\r\n\t\t}\r\n        if( ! element){\r\n            element = selection.focusNode;\r\n        }\r\n\t\tif(selection.containsNode(this, true) || selection.containsNode(this, false)){\r\n            return isRoot ? Line.getRootLine(element) : Line.getLine(element);\r\n        }else{\r\n            return ;\r\n        }\r\n    }\r\n\r\n}","import FreeWillEditor from \"../FreeWillEditor\";\r\nimport Line from '../component/Line'\r\nimport FreedomInterface from \"../module/FreedomInterface\"\r\n\r\n// 추후 indexed db 사용 검토\r\nexport default class UndoManager{\r\n    #editor;\r\n    #history = [];\r\n    #historyIndex = 0;\r\n    #historyLimit = 50;\r\n    #UndoRedo = class UndoRedo{\r\n        #html\r\n        #time\r\n        constructor(html){\r\n            this.#html = html;\r\n            this.#time = new Date().getTime();\r\n        }\r\n        get html(){\r\n            return this.#html;\r\n        }\r\n        get time(){\r\n            return this.#time;\r\n        }\r\n    }\r\n\r\n    #lastCursorPositionRect;\r\n    //#isUndoSwitch = false;\r\n\r\n    /**\r\n     * \r\n     * @param {FreeWillEditor} targetEditor \r\n     */\r\n    //레인지를 저장해뒀다가 쓰기\r\n    constructor(targetEditor){\r\n        this.#editor = targetEditor;\r\n        //if(this.#editor.contentEditable == 'true'){\r\n            this.addCursorMove();\r\n            this.addUndoKey();\r\n            this.addUserInput();\r\n        //}\r\n\r\n    }\r\n\r\n    addCursorMove(){\r\n        /*\r\n        let isFirst = true;\r\n        document.addEventListener(\"selectionchange\", (event) => {\r\n            if(document.activeElement !== this.#editor){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n            let selection = window.getSelection();\r\n            let range = selection.getRangeAt(0);\r\n            let newRect = range.getBoundingClientRect();\r\n            if(this.#lastCursorPositionRect && (this.#lastCursorPositionRect.x != newRect.x || this.#lastCursorPositionRect.y != newRect.y)){\r\n                range.insertNode(this.#cursor);\r\n            }else if(isFirst){\r\n                range.insertNode(this.#cursor);\r\n                isFirst = false;\r\n            }\r\n            this.#lastCursorPositionRect = newRect;\r\n        });\r\n        */\r\n        FreedomInterface.globalSelectionChangeEventListener(this, ({oldEvent, newEvent}) => {\r\n            if(document.activeElement !== this.#editor){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n            this.rememberCursor();\r\n\t\t})\r\n    }\r\n\r\n    rememberCursor(){\r\n        let selection = window.getSelection();\r\n        let range = selection.getRangeAt(0);\r\n        let newRect = range.getBoundingClientRect();\r\n        if(this.#lastCursorPositionRect && (this.#lastCursorPositionRect.x == newRect.x && this.#lastCursorPositionRect.y == newRect.y)){\r\n            return\r\n        }\r\n        let {focusNode, focusOffset} = selection\r\n\r\n        let target;\r\n        let index = (() => {\r\n            if(focusNode.nodeType == Node.TEXT_NODE){\r\n                target = focusNode.parentElement;\r\n                return [...target.childNodes].findIndex(e=>e == focusNode);\r\n            }else if(focusNode.nodeType == Node.ELEMENT_NODE){\r\n                target = focusNode;\r\n                return 0;\r\n            }\r\n        })();\r\n\r\n        if(target == undefined){\r\n            return;\r\n        }else{\r\n            let prevCursorTarget;\r\n            if(this.#editor.hasAttribute('is_cursor')){\r\n                prevCursorTarget = this.#editor;\r\n            }else{\r\n                prevCursorTarget = this.#editor.querySelector('[is_cursor]');\r\n            }\r\n            if(prevCursorTarget && prevCursorTarget != target){\r\n                prevCursorTarget.removeAttribute('is_cursor');\r\n                prevCursorTarget.removeAttribute('cursor_offset');\r\n                prevCursorTarget.removeAttribute('cursor_type');\r\n                prevCursorTarget.removeAttribute('cursor_index');\r\n                prevCursorTarget.removeAttribute('cursor_scroll_x');\r\n                prevCursorTarget.removeAttribute('cursor_scroll_y');\r\n            }\r\n        }\r\n\r\n        /*\r\n            Object.assign(parent.dataset,{\r\n                offset: focusOffset,\r\n                index: childIndex\r\n            })\r\n        */\r\n        target.setAttribute('is_cursor', '');\r\n        target.setAttribute('cursor_offset', focusOffset);\r\n        target.setAttribute('cursor_type', target.nodeType);\r\n        target.setAttribute('cursor_index', index);\r\n        target.setAttribute('cursor_scroll_x', this.#editor.scrollLeft);\r\n        target.setAttribute('cursor_scroll_y', this.#editor.scrollTop);\r\n        this.#lastCursorPositionRect = newRect;\r\n    }\r\n\r\n    addUndoKey(){\r\n        this.#editor.addEventListener('keydown', (event) => {\r\n            if(document.activeElement !== this.#editor){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n            let {ctrlKey, key} = event;\r\n            if( ! ctrlKey || ! (key == 'z' || key == 'y')){\r\n                return;\r\n            }\r\n            event.preventDefault();\r\n            if(key == 'z'){\r\n                this.undoKeyEvent();\r\n            }else{\r\n                this.redoKeyEvent();\r\n            }\r\n\r\n            let cursorTarget = this.#editor.querySelector('[is_cursor]');\r\n            if( ! cursorTarget){\r\n                return;\r\n            }\r\n\r\n            let {'cursor_offset': offset, 'cursor_type': type, 'cursor_index': index, 'cursor_scroll_x': x, 'cursor_scroll_y': y} = cursorTarget.attributes\r\n            let selection = window.getSelection();\r\n            /*if(type.value == Node.TEXT_NODE){\r\n                let textNode = cursorTarget.childNodes[index.value]; \r\n                selection.setPosition(textNode, offset.value);\r\n            }else if(type.value == Node.ELEMENT_NODE){\r\n                console.log(cursorTarget);\r\n                selection.setPosition(cursorTarget, offset.value);\r\n            }*/\r\n            if(type.value == Node.ELEMENT_NODE){\r\n                let node = cursorTarget.childNodes[index.value]; \r\n                if(this.#editor.isEmpty){\r\n                    selection.setPosition(node, 0);\r\n                }else{\r\n                    selection.setPosition(node, offset.value);\r\n                }\r\n            }else if(type.value == Node.TEXT_NODE){\r\n                selection.setPosition(cursorTarget, offset.value);\r\n            }\r\n            this.#editor.scrollTo(Number(x.value), Number(y.value));\r\n        });\r\n    }\r\n\r\n    undoKeyEvent(){\r\n        if(this.#history.length == 0){\r\n            return;\r\n        }\r\n        this.#historyIndex += 1;\r\n        if(this.#historyIndex > this.#history.length - 1){\r\n            this.#historyIndex = this.#history.length - 1\r\n        }\r\n        let undoRedo = this.#history[this.#historyIndex];\r\n       \r\n        //console.log('z key undo',undoRedo.html);\r\n        this.#editor.innerHTML = undoRedo.html;\r\n    }\r\n    redoKeyEvent(){\r\n        if(this.#history.length == 0){\r\n            return;\r\n        }\r\n        this.#historyIndex -= 1;\r\n        if(this.#historyIndex < 0){\r\n            this.#historyIndex = 0\r\n        }\r\n        let undoRedo = this.#history[this.#historyIndex];\r\n\r\n        //console.log('y key redo',undoRedo.html)\r\n        this.#editor.innerHTML = undoRedo.html;\r\n    }\r\n    addUndoRedo(isCheckSkip = false){\r\n        if(document.activeElement !== this.#editor && ! isCheckSkip){\r\n            return;\r\n        }\r\n\r\n        this.rememberCursor();\r\n\r\n        let undoRedo = new this.#UndoRedo(this.#editor.innerHTML.trim());\r\n        this.#history.unshift(undoRedo);\r\n        \r\n        if(this.#history.length > this.#historyLimit){\r\n            this.#history = this.#history.splice(0, this.#historyLimit);\r\n        }\r\n        \r\n        //console.log('history', this.#history);\r\n    }\r\n    addUserInput(){\r\n        let prevMils = new Date().getTime();\r\n        this.#editor.addEventListener('keydown', (event) => {\r\n            if(document.activeElement !== this.#editor || (new Date().getTime() - prevMils) < 500){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n            prevMils = new Date().getTime();\r\n            let {ctrlKey, key, altKey} = event;\r\n            if(ctrlKey || altKey || ctrlKey && (key == 'z' || key == 'y')){\r\n                return;\r\n            }\r\n            \r\n            if(this.#history.length != 0 && this.#history[0].html.trim() == this.#editor.innerHTML.trim()){\r\n                return;\r\n            }\r\n            this.addUndoRedo();\r\n        });\r\n        /*\r\n        let addElementObserver = new MutationObserver( (mutationList, observer) => {\r\n            mutationList.forEach((mutation) => {\r\n                let {addedNodes, removedNodes} = mutation;\r\n\r\n                if(this.#isUndoSwitch){\r\n                    this.#isUndoSwitch = false;\r\n                    //return;\r\n                }\r\n\r\n                new Promise(resolve=>{\r\n                    addedNodes.forEach(node=>{\r\n                        if(node.nodeType != Node.ELEMENT_NODE){\r\n                            return;\r\n                        }\r\n                        let tagName = node.tagName.toLowerCase();\r\n                        if(this.#editor.tools.hasOwnProperty(tagName) && this.#history.length != 0 && this.#history[0].html.trim() != this.#editor.innerHTML.trim()){\r\n                            let undoRedo = new this.#UndoRedo(this.#editor.innerHTML.trim());\r\n                            this.#history.unshift(undoRedo);\r\n                            if(this.#history.length > this.#historyLimit){\r\n                                this.#history = this.#history.splice(0, this.#historyLimit);\r\n                            }\r\n                        }\r\n                    });\r\n                    resolve();\r\n                })\r\n            });\r\n        })\r\n        addElementObserver.observe(this.#editor, {\r\n\t\t\tchildList:true,\r\n\t\t\tsubtree: true\r\n\t\t});\r\n        */\r\n    }\r\n\r\n    clearHistory(){\r\n        this.#history = [];\r\n    }\r\n    \r\n    clearEditor(){\r\n        this.#editor.innerHTML = '';\r\n    }\r\n\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nexport default class Strong extends FreedomInterface {\r\n\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-strong-style'\r\n\t});\r\n\tstatic isDefaultStyle = true;\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-strong';\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: 'B',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Bold'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else{\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} {\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tconstructor(dataset, {isDefaultStyle = true} = {}){\r\n\t\tsuper(Strong, dataset);\r\n\t}\r\n\t\r\n}\r\n","\r\nexport default class Palette {\r\n\t\r\n\t#style = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-palette'\r\n\t});\r\n\r\n\t#palette = Object.assign(document.createElement('div'),{\r\n\t\tclassName: 'palette-wrap'\r\n\t});\r\n\r\n\t#componentMap = undefined;\r\n\t\r\n\t#lastPanelPosition = undefined;\r\n\t\r\n\t#lastPaintPosition = undefined;\r\n\t#lastPaintRgb = [255, 0, 0];\r\n\r\n\t#lastBrightnessPosition = undefined;\r\n\r\n\t#r = 255;\r\n\t#g = 0;\r\n\t#b = 0;\r\n\t#a = 1;\r\n\r\n    #openPositionMode;\r\n\t#openPosition;\r\n\t#exampleMode;\r\n\r\n    #applyCallback = () => {}\r\n\r\n\tstatic ExampleMode = class ExampleMode{\r\n\t\tstatic #ExampleModeEnum = class ExampleModeEnum{\r\n\t\t\tvalue;\r\n\t\t\tconstructor(value){\r\n\t\t\t\tthis.value = value;\r\n\t\t\t\tObject.freeze(this);\r\n\t\t\t}\r\n\t\t}\r\n\t\tstatic TEXT_COLOR = new this.#ExampleModeEnum('color');\r\n\t\tstatic TEXT_BACKGROUND_COLOR = new this.#ExampleModeEnum('background-color');\r\n\t\tstatic TEXT_UNDERLINE = new this.#ExampleModeEnum('text-decoration');\r\n\t\tstatic TEXT_LINE_THROUGH = new this.#ExampleModeEnum('text-decoration');\r\n\t\tvalue;\r\n\t\tstatic{\r\n\t\t\tObject.freeze(this);\r\n\t\t}\r\n\t\tconstructor(value){\r\n\t\t\tthis.value = value;\r\n\t\t\tObject.freeze(this);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic OpenPositionMode = class OpenPositionMode{\r\n\t\tstatic BUTTON = new OpenPositionMode('button')\r\n\t\tstatic WRAPPER = new OpenPositionMode('wrapper')\r\n\t\t/**\r\n\t\t * @returns {String}\r\n\t\t */\r\n\t\tvalue;\r\n\t\tstatic{\r\n\t\t\tObject.freeze(this);\r\n\t\t}\r\n\t\tconstructor(value){\r\n\t\t\tthis.value = value;\r\n\t\t\tObject.freeze(this);\r\n\t\t}\r\n\t}\r\n\r\n    constructor({\r\n\t\topenPositionMode = Palette.OpenPositionMode.BUTTON,\r\n\t\topenPosition,\r\n\t\texampleMode = Palette.ExampleMode.TEXT_COLOR\r\n\t}={}){\r\n\t\t\r\n        this.#openPositionMode = openPositionMode;\r\n\t\tif( ! this.#openPositionMode ){//|| ! (this.#openPositionMode instanceof Palette.OpenPositionMode)){\r\n\t\t\tthrow new Error('this is not OpenPositionMode');\r\n\t\t}\r\n\t\tthis.#openPosition = openPosition;\r\n        if( ! this.#openPosition || ! this.#openPosition.nodeType || this.#openPosition.nodeType != Node.ELEMENT_NODE){\r\n            throw new Error('openPosition is not element');\r\n        }\r\n\t\tthis.#exampleMode = exampleMode;\r\n\t\t\r\n\t\tif(this.#openPositionMode == Palette.OpenPositionMode.BUTTON){\r\n\t\t\tthis.#palette.style.position = \"fixed\";\r\n\t\t}\r\n\r\n        let style = document.querySelector(`#${this.#style.id}`);\r\n        if(! style){\r\n            document.head.append(this.createStyle());\r\n        }else{\r\n            this.#style = style;\r\n        }\r\n\r\n        document.addEventListener(\"scroll\", () => {\r\n\t\t\tif(this.#palette.isConnected){\r\n\t\t\t\tthis.#processingPalettePosition(this.#palette);\r\n\t\t\t}\r\n\t\t});\r\n\r\n        window.addEventListener('resize', (event) => {\r\n            if(this.#palette.isConnected){\r\n                this.reset();\r\n                this.#palette.replaceChildren();\r\n                let done = setTimeout(()=>{\r\n                    this.open();\r\n                    clearTimeout(done);\r\n                    done = undefined\r\n                },200)\r\n            }\r\n\t\t})\r\n\r\n        new Array('mouseup', 'touchend').forEach(eventName => {\r\n\t\t\twindow.addEventListener(eventName, () => {\r\n\t\t\t\tif( ! this.#componentMap){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.#componentMap.colorPanel?.removeAttribute('data-is_mouse_down');\r\n\t\t\t\tthis.#componentMap.colorPaint?.removeAttribute('data-is_mouse_down');\r\n\t\t\t\tthis.#componentMap.colorBrightness?.removeAttribute('data-is_mouse_down');\r\n\t\t\t})\r\n\t\t})\r\n\t\t\r\n\t\tnew Array('mousemove', 'touchmove').forEach(eventName=>{\r\n\t\t\twindow.addEventListener(eventName, (event) => {\r\n\t\t\t\tif( ! this.#componentMap){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(this.#componentMap.colorPanel && this.#componentMap.colorPanel.hasAttribute('data-is_mouse_down')){\r\n\t\t\t\t\tthis.#colorPanelMoveEvent(event)\r\n\t\t\t\t}\r\n\t\t\t\tif(this.#componentMap.colorPaint && this.#componentMap.colorPaint.hasAttribute('data-is_mouse_down')){\r\n\t\t\t\t\tthis.#colorPaintMoveEvent(event);\r\n\t\t\t\t}\r\n\t\t\t\tif(this.#componentMap.colorBrightness && this.#componentMap.colorBrightness.hasAttribute('data-is_mouse_down')){\r\n\t\t\t\t\tthis.#colorBrightnessMoveEvent(event);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n    }\r\n\r\n    #createPalette(palette, itemMap){\r\n\t\tlet {\r\n\t\t\ttopTextWrap, selectionRgbBg, previousRgbBg, \r\n\t\t\tcolorWrap, colorPanel, colorPaint, \r\n\t\t\tcolorBrightnessWrap, colorBrightness,\r\n\t\t\tbottomTextWrap, selectionRgbText, previousRgbText,\r\n\t\t\tapplyWrap, cancelButton, applyButton\r\n\t\t} = itemMap\r\n\t\tpalette.replaceChildren(topTextWrap, colorWrap, colorBrightnessWrap, bottomTextWrap, applyWrap);\r\n\t\tthis.#settingCanvas();\r\n\t\tthis.#settingApplyEvent(palette, cancelButton, applyButton, selectionRgbText);\r\n\t}\r\n\r\n    #createPaletteItems(){\r\n\r\n\t\t// 팔레트 상단 텍스트 영역\r\n\t\tlet {topTextWrap, selectionRgbBg, previousRgbBg} = this.#createRgbaTopTextWrap()\r\n\t\t\r\n\t\t// 팔레트 중단 컬러 설정 집합 영역\r\n\t\tlet colorWrap = Object.assign(document.createElement('div'),{\r\n\t\t\tclassName: 'color-wrap'\r\n\t\t})\r\n\r\n\t\tlet colorPanel = this.#createColorPanel();\r\n\t\tlet colorPaint = this.#createColorPaint();\r\n\t\tcolorWrap.append(colorPanel, colorPanel.__colorPanelSelected, colorPanel.__colorPanelSelectedPointer,\r\n\t\t\tcolorPaint, colorPaint.__colorPaintSelectedPointer);\r\n\r\n\t\t// 팔레트 색상 명도 조절 설정 캔버스 영역\r\n\t\tlet {colorBrightnessWrap, colorBrightness} = this.#createColorBrightness()\r\n\r\n\t\t// 팔레트 하단 텍스트 영역\r\n\t\tlet {bottomTextWrap, selectionRgbText, previousRgbText} = this.#createRgbaBottomTextWrap();\r\n\t\t\r\n\t\tlet {applyWrap, cancelButton, applyButton} = this.#createApplyButtonWrap();\r\n\r\n\t\treturn {\r\n\t\t\ttopTextWrap, selectionRgbBg, previousRgbBg, \r\n\t\t\tcolorWrap, colorPanel, colorPaint, \r\n\t\t\tcolorBrightnessWrap, colorBrightness,\r\n\t\t\tbottomTextWrap, selectionRgbText, previousRgbText,\r\n\t\t\tapplyWrap, cancelButton, applyButton\r\n\t\t};\r\n\t}\r\n\r\n    #createColorPanel(){\r\n\t\tlet colorPanel = Object.assign(document.createElement('canvas'),{\r\n\t\t\tclassName: 'palette-panel'\r\n\t\t})\r\n\t\tlet colorPanelSelected = Object.assign(document.createElement('canvas'),{\r\n\t\t\tclassName: 'panel-selected'\r\n\t\t})\r\n\t\tlet colorPanelSelectedPointer = Object.assign(document.createElement('div'),{\r\n\t\t\tclassName: 'panel-selected-pointer'\r\n\t\t});\r\n\r\n\t\tcolorPanel.__colorPanelSelected = colorPanelSelected;\r\n\t\tcolorPanel.__colorPanelSelectedPointer = colorPanelSelectedPointer;\r\n\r\n\t\treturn colorPanel;\r\n\t}\r\n\r\n    #createColorPaint(){\r\n\t\tlet colorPaint = Object.assign(document.createElement('canvas'),{\r\n\t\t\tclassName: 'palette-paint'\r\n\t\t});\r\n\r\n\t\tlet colorPaintSelectedPointer = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'paint-selected-pointer'\r\n\t\t})\r\n\t\tcolorPaintSelectedPointer.append(Object.assign(document.createElement('div'),{\r\n\t\t\tclassName: 'paint-selected-pointer-child'\r\n\t\t}));\r\n\t\tcolorPaint.__colorPaintSelectedPointer = colorPaintSelectedPointer\r\n\r\n\t\treturn colorPaint;\r\n\t}\r\n\r\n    #createColorBrightness(){\r\n\t\tlet colorBrightnessWrap = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'brightness-wrap'\r\n\t\t});\r\n\t\tlet colorBrightness = Object.assign(document.createElement('canvas'), {\r\n\t\t\tclassName: 'brightness-color'\r\n\t\t})\r\n\t\tlet colorBrightnessSelectedPointer = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'brightness-selected-pointer'\r\n\t\t});\r\n\t\tcolorBrightnessSelectedPointer.append(Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'brightness-selected-pointer-child'\r\n\t\t}));\r\n\t\tcolorBrightness.__colorBrightnessSelectedPointer = colorBrightnessSelectedPointer;\r\n\t\tcolorBrightnessWrap.append(colorBrightness, colorBrightness.__colorBrightnessSelectedPointer)\r\n\r\n\t\treturn {colorBrightnessWrap, colorBrightness};\r\n\t}\r\n\r\n    #createRgbaTopTextWrap(){\r\n\t\tlet topTextWrap = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'top-text-wrap'\r\n\t\t});\r\n\t\t\r\n\t\tlet blackOrWhite = this.#blackOrWhite(this.#r, this.#g, this.#b);\r\n\r\n\t\tlet selectionRgbBg = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'selection-rgb-bg',\r\n\t\t\ttextContent: this.selectedColor\r\n\t\t});\r\n\t\tselectionRgbBg.style.background = this.selectedColor;\r\n\t\tselectionRgbBg.style.color = `rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`\r\n\r\n\r\n\t\tlet previousRgbBg = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName : 'previous-rgb-bg',\r\n\t\t});\r\n\t\tpreviousRgbBg.style.background = this.selectedColor;\r\n\r\n\t\ttopTextWrap.append(selectionRgbBg, previousRgbBg)\r\n\r\n\t\treturn {topTextWrap, selectionRgbBg, previousRgbBg}\r\n\t}\r\n\r\n    #createRgbaBottomTextWrap(){\r\n\t\tlet bottomTextWrap = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'bottom-text-wrap'\r\n\t\t});\r\n\t\tlet selection = window.getSelection();\r\n\t\tlet sampleText = '';\r\n\t\tif(selection.rangeCount != 0 && selection.isCollapsed == false){\r\n\t\t\tlet range = selection.getRangeAt(0)\r\n\t\t\tlet aticle = document.createElement('aticle');\r\n\t\t\tlet rangeClone = range.cloneContents();\r\n\t\t\taticle.append(rangeClone);\r\n\t\t\tsampleText = aticle\r\n\t\t}\r\n\t\tsampleText = sampleText == '' ? '가 나다 라 A BC D' : sampleText;\r\n\t\tlet blackOrWhite = this.#blackOrWhite(this.#r, this.#g, this.#b);\r\n\t\t\r\n\t\tlet selectionRgbText = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'selection-rgb-text',\r\n\t\t});\r\n\t\tthis.#applyExampleTextColor(selectionRgbText, this.selectedColor, blackOrWhite);\r\n\r\n\t\tlet previousRgbText = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'previous-rgb-text',\r\n\t\t});\r\n\t\tthis.#applyExampleTextColor(previousRgbText, this.selectedColor, blackOrWhite);\r\n\r\n\t\tif(sampleText.nodeType && sampleText.nodeType == Node.ELEMENT_NODE){\r\n\t\t\tselectionRgbText.innerHTML = sampleText.innerHTML;\r\n\t\t\tpreviousRgbText.innerHTML = sampleText.innerHTML;\r\n\t\t}else{\r\n\t\t\tselectionRgbText.textContent = sampleText;\r\n\t\t\tpreviousRgbText.textContent = sampleText;\r\n\t\t}\r\n\r\n\r\n\t\tbottomTextWrap.append(selectionRgbText, previousRgbText)\r\n\r\n\t\treturn {bottomTextWrap, selectionRgbText, previousRgbText}\r\n\t}\r\n\r\n    #createApplyButtonWrap(){\r\n\t\tlet applyWrap = Object.assign(document.createElement('div'),{\r\n\t\t\tclassName: 'button-wrap'\r\n\t\t})\r\n\t\tlet cancelButton = Object.assign(document.createElement('button'), {\r\n\t\t\tclassName: 'cancel-button',\r\n\t\t\ttype: 'button',\r\n\t\t\ttextContent: 'cancel'\r\n\t\t})\r\n\t\tlet applyButton = Object.assign(document.createElement('button'), {\r\n\t\t\tclassName: 'apply-button',\r\n\t\t\ttype: 'button',\r\n\t\t\ttextContent: 'apply'\r\n\t\t})\r\n\t\tapplyWrap.append(cancelButton, applyButton);\r\n\t\treturn {applyWrap, cancelButton, applyButton};\r\n\t}\r\n\r\n    #settingCanvas(){\r\n\t\treturn new Promise(resolve=> {\r\n\t\t\tthis.#settingColorPanel()\r\n\t\t\tthis.#settingColorPaint()\r\n\t\t\tthis.#settingColorBrightness();\r\n\t\t\tresolve();\r\n\t\t})\r\n\t}\r\n\r\n    #settingColorPanel(){\r\n\t\treturn new Promise(resolve=>{\r\n\t\t\tlet {\r\n\t\t\t\ttopTextWrap, selectionRgbBg, previousRgbBg, \r\n\t\t\t\tcolorWrap, colorPanel, colorPaint, \r\n\t\t\t\tcolorBrightnessWrap, colorBrightness,\r\n\t\t\t\tbottomTextWrap, selectionRgbText, previousRgbText\r\n\t\t\t} = this.#componentMap;\r\n\r\n\t\t\tconst setPanelSelectePosition = () => {\r\n\t\t\t\tlet colorPanelRect = colorPanel.getBoundingClientRect();\r\n\t\t\t\tlet colorPanelSelected = colorPanel.__colorPanelSelected;\r\n\t\t\t\tcolorPanelSelected.style.top = colorPanelRect.y + 'px';\r\n\t\t\t\tcolorPanelSelected.style.left = colorPanelRect.x + 'px';\r\n\t\t\t\tcolorPanelSelected.style.width = colorPanelRect.width + 'px';\r\n\t\t\t\tcolorPanelSelected.style.height = colorPanelRect.height + 'px';\r\n\t\t\t\tcolorPanelSelected.width = colorPanelRect.width;\r\n\t\t\t\tcolorPanelSelected.height = colorPanelRect.height;\r\n\t\t\t}\r\n\r\n\t\t\tcolorPanel.onmousedown = (event)=>{\r\n\t\t\t\tcolorPanel.setAttribute('data-is_mouse_down', '');\r\n\t\t\t\tlet {x, y} = this.#getEventXY(event);\r\n\t\t\t\tcolorPanel.__colorPanelSelectedPointer.style.top = y\r\n\t\t\t\tcolorPanel.__colorPanelSelectedPointer.style.left = x\r\n\t\t\t\tsetPanelSelectePosition()\r\n\t\t\t\tthis.#colorPanelMoveEvent(event);\r\n\t\t\t}\r\n\t\t\tcolorPanel.ontouchstart = colorPanel.onmousedown;\r\n\r\n\t\t\tcolorPanel.__colorPanelSelected.onmousedown = colorPanel.onmousedown;\r\n\t\t\tcolorPanel.__colorPanelSelected.ontouchstart = colorPanel.onmousedown;\r\n\t\t\t\r\n\t\t\tcolorPanel.__colorPanelSelectedPointer.onmousedown = colorPanel.onmousedown;\r\n\t\t\tcolorPanel.__colorPanelSelectedPointer.ontouchstart = colorPanel.onmousedown;\r\n\r\n\t\t\tresolve(setTimeout(()=>{\r\n\t\t\t\tlet panelContext = colorPanel.getContext('2d', { willReadFrequently: true });\r\n\t\t\t\tlet colorPanelRect = colorPanel.getBoundingClientRect();\r\n\t\t\t\tcolorPanel.width = colorPanelRect.width;\r\n\t\t\t\tcolorPanel.height = colorPanelRect.height;\r\n                setPanelSelectePosition();\r\n\t\t\t\tthis.#changeColorPanel(panelContext)\r\n\r\n\t\t\t\tlet blackOrWhite = this.#blackOrWhite(this.#r, this.#g, this.#b);\r\n\t\t\t\tlet context = colorPanel.__colorPanelSelected.getContext('2d', { willReadFrequently: true })\r\n\t\t\t\tif(this.#lastPanelPosition){\r\n\t\t\t\t\tthis.#processingColorPanelSeleter(context, this.#lastPanelPosition.x - colorPanelRect.x, this.#lastPanelPosition.y - colorPanelRect.y, blackOrWhite);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.#processingColorPanelSeleter(context, colorPanelRect.width - 1, 0.1, blackOrWhite);\r\n\t\t\t\t\tthis.#lastPanelPosition = {x:colorPanelRect.right - 1, y:colorPanelRect.top}\r\n                    colorPanel.__colorPanelSelectedPointer.style.top = this.#lastPanelPosition.y + 'px';\r\n                    colorPanel.__colorPanelSelectedPointer.style.left = this.#lastPanelPosition.x + 'px';\r\n                }\r\n\t\t\t},200))\r\n\t\t});\r\n\t}\r\n\r\n    #changeColorPanel(context){\r\n\t\tcontext.clearRect(0, 0, context.canvas.width, context.canvas.height);\r\n\t\tlet [r,g,b] = this.#lastPaintRgb\r\n\t\t// 가로 그라데이션\r\n\t\tlet gradientH = context.createLinearGradient(2, 0, context.canvas.width - 2, 0);\r\n\t\tgradientH.addColorStop(0, 'white');\r\n\t\tgradientH.addColorStop(1, `rgba(${r}, ${g}, ${b}, ${this.#a})`);\r\n\t\tcontext.fillStyle = gradientH;\r\n\t\tcontext.fillRect(0, 0, context.canvas.width, context.canvas.height);\r\n\t\t// 수직 그라데이션\r\n\t\tlet gradientV = context.createLinearGradient(0, 2, 0, context.canvas.height - 2);\r\n\t\tgradientV.addColorStop(0, 'rgba(0,0,0,0)');\r\n\t\tgradientV.addColorStop(1, 'black');\r\n\t\tcontext.fillStyle = gradientV;\r\n\t\tcontext.fillRect(0, 0, context.canvas.width, context.canvas.height);\r\n\t}\r\n\r\n    #processingColorPanelSeleter(colorPanelSelectedContext, x, y, [r = 0, g = 0, b = 0] = []){\r\n\t\tnew Promise(resolve=>{\r\n\t\t\tcolorPanelSelectedContext.clearRect(0, 0, colorPanelSelectedContext.canvas.width, colorPanelSelectedContext.canvas.height);\r\n\t\t\tcolorPanelSelectedContext.lineWidth = 1;\r\n\t\t\tcolorPanelSelectedContext.beginPath();\r\n\t\t\tcolorPanelSelectedContext.arc(x, y, 10, 0, 2 * Math.PI);\r\n\t\t\tcolorPanelSelectedContext.strokeStyle = `rgb(${r}, ${g}, ${b})`\r\n\t\t\tcolorPanelSelectedContext.stroke();\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n    #colorPanelMoveEvent(event){\r\n\t\tnew Promise(resolve => {\r\n\t\t\tlet {\r\n\t\t\t\ttopTextWrap, selectionRgbBg, previousRgbBg, \r\n\t\t\t\tcolorWrap, colorPanel, colorPaint, \r\n\t\t\t\tcolorBrightnessWrap, colorBrightness,\r\n\t\t\t\tbottomTextWrap, selectionRgbText, previousRgbText\r\n\t\t\t} = this.#componentMap;\r\n\t\t\tlet rect = colorPanel.getBoundingClientRect();\r\n\t\t\tlet {x:pageX, y:pageY} = this.#getEventXY(event);\r\n\r\n\t\t\tlet isLeftOver = pageX < rect.left;\r\n\t\t\tlet isRightOver = pageX > rect.right - 1;\r\n\t\t\tlet isTopOver = pageY < rect.top;\r\n\t\t\tlet isBottomOver = pageY > rect.bottom;\r\n\r\n\t\t\tcolorPanel.__colorPanelSelectedPointer.style.left = pageX + 'px';\r\n\t\t\tcolorPanel.__colorPanelSelectedPointer.style.top = pageY + 'px';\r\n\r\n\t\t\tlet {x : reProcessingRectX, y : reProcessingRectY} = colorPanel.__colorPanelSelectedPointer.getBoundingClientRect();\r\n\t\t\t\r\n\t\t\tlet x = reProcessingRectX - rect.x\r\n\t\t\tlet y = reProcessingRectY - rect.y\r\n\r\n\r\n\t\t\tif(isLeftOver){\r\n\t\t\t\tx = 0\r\n\t\t\t\treProcessingRectX = rect.left\r\n\t\t\t}\r\n\t\t\tif(isRightOver){\r\n\t\t\t\tx = rect.width - 1\r\n\t\t\t\treProcessingRectX = rect.right - 1\r\n\t\t\t}\r\n\t\t\tif(isTopOver){\r\n\t\t\t\ty = 0\r\n\t\t\t\treProcessingRectY = rect.top\r\n\t\t\t}\r\n\t\t\tif(isBottomOver){\r\n\t\t\t\ty = rect.height\r\n\t\t\t\treProcessingRectY = rect.bottom\r\n\t\t\t}\r\n\r\n\t\t\tthis.#lastPanelPosition = {x : reProcessingRectX, y : reProcessingRectY};\r\n\t\t\tlet context = colorPanel.getContext('2d', { willReadFrequently: true });\r\n\t\t\t\r\n\t\t\t/*if(isLeftOver && isTopOver){\r\n\t\t\t\t[this.#r, this.#g, this.#b] = [255,255,255];\r\n\t\t\t//}else if(isRightOver && isTopOver){\r\n\t\t\t//\t[this.#r, this.#g, this.#b] = this.#lastPaintRgb\r\n\t\t\t}else if((isRightOver && isBottomOver) || (isLeftOver && isBottomOver) || isBottomOver){\r\n\t\t\t\t[this.#r, this.#g, this.#b] = [0,0,0];\r\n\t\t\t}else{*/\r\n\t\t\t\t[this.#r, this.#g, this.#b] = context.getImageData(x, y, 1, 1).data;\r\n\t\t\t//}\r\n\r\n\t\t\tlet selectedColor = `rgba(${this.#r}, ${this.#g}, ${this.#b}, ${this.#a})`;\r\n\t\t\tlet blackOrWhite = this.#blackOrWhite(this.#r,this.#g,this.#b);\r\n\r\n\t\t\tthis.#processingColorPanelSeleter(\r\n\t\t\t\tcolorPanel.__colorPanelSelected.getContext('2d', { willReadFrequently: true })\r\n\t\t\t\t, x, y, blackOrWhite);\r\n\r\n\t\t\tselectionRgbBg.textContent = selectedColor;\r\n\t\t\tselectionRgbBg.style.color = `rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`\r\n\t\t\tselectionRgbBg.style.background = selectedColor;\r\n\t\t\t\r\n\t\t\tthis.#applyExampleTextColor(selectionRgbText, selectedColor, blackOrWhite);\r\n\r\n\t\t\tif(this.#a < 0.75){\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.children[0].style.border = 'solid 1px white';\r\n\t\t\t}else{\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.children[0].style.border = `solid 1px rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`;\r\n\t\t\t}\r\n\r\n\t\t\tthis.#changeColorBrightness(colorBrightness.getContext('2d', { willReadFrequently: true }), [this.#r, this.#g, this.#b]);\r\n\r\n\t\t\tresolve();\r\n\t\t})\r\n\t}\r\n\r\n    #settingColorPaint(){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tlet {\r\n\t\t\t\ttopTextWrap, selectionRgbBg, previousRgbBg, \r\n\t\t\t\tcolorWrap, colorPanel, colorPaint, \r\n\t\t\t\tcolorBrightnessWrap, colorBrightness,\r\n\t\t\t\tbottomTextWrap, selectionRgbText, previousRgbText\r\n\t\t\t} = this.#componentMap;\r\n\r\n\t\t\tcolorPaint.onmousedown = (event) => {\r\n\t\t\t\tcolorPaint.setAttribute('data-is_mouse_down', '');\r\n\t\t\t\tlet {x, y} = this.#getEventXY(event);\r\n\t\t\t\tcolorPaint.__colorPaintSelectedPointer.style.top = y + 'px';\r\n\t\t\t\tthis.#colorPaintMoveEvent(event);\r\n\t\t\t}\r\n\t\t\tcolorPaint.ontouchstart = colorPaint.onmousedown;\r\n\r\n\t\t\tcolorPaint.__colorPaintSelectedPointer.onmousedown = colorPaint.onmousedown;\r\n\t\t\tcolorPaint.__colorPaintSelectedPointer.ontouchstart = colorPaint.ontouchstart;\r\n\t\t\t\r\n\t\t\tresolve(setTimeout(()=>{\r\n\t\t\t\tlet colorPaintRect = colorPaint.getBoundingClientRect();\r\n\t\t\t\tcolorPaint.width = colorPaintRect.width;\r\n\t\t\t\tcolorPaint.height = colorPaintRect.height;\r\n\t\r\n\t\t\t\tlet context = colorPaint.getContext('2d', { willReadFrequently: true } );\r\n                context.clearRect(0, 0, colorPaint.width, colorPaint.height);\r\n\r\n                let gradient = context.createLinearGradient(0, 2, 0, colorPaint.height - 2); \r\n\t\r\n\t\t\t\tgradient.addColorStop(0, 'rgb(255, 0, 0)') // red\r\n\t\t\t\tgradient.addColorStop(0.15, 'rgb(255, 0, 255)') // violet\r\n\t\t\t\tgradient.addColorStop(0.35, 'rgb(0, 0, 255)') // blue\r\n\t\t\t\tgradient.addColorStop(0.45, 'rgb(0, 255, 255)') // Sky blue\r\n\t\t\t\tgradient.addColorStop(0.65, 'rgb(0, 255, 0)') // green\r\n\t\t\t\tgradient.addColorStop(0.85, 'rgb(255, 255, 0)') // yellow\r\n\t\t\t\tgradient.addColorStop(0.9, 'orange')\r\n\t\t\t\tgradient.addColorStop(1, 'rgb(255, 0, 0)') // red\r\n\t\t\t\tcontext.fillStyle = gradient;\r\n\t\t\t\tcontext.fillRect(0, 0, colorPaint.width, colorPaint.height);\r\n\r\n\t\t\t\tif(this.#lastPaintPosition){\r\n\t\t\t\t\tcolorPaint.__colorPaintSelectedPointer.style.top = this.#lastPaintPosition.y + 'px';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcolorPaint.__colorPaintSelectedPointer.style.top = colorPaintRect.y + 'px';\r\n\t\t\t\t\tthis.#lastPaintPosition = colorPaintRect.y;\r\n\t\t\t\t}\r\n\t\t\t\tcolorPaint.__colorPaintSelectedPointer.style.left = colorPaintRect.x + 'px';\r\n\t\t\t\tcolorPaint.__colorPaintSelectedPointer.style.width = colorPaintRect.width + 'px';\r\n\t\t\t\tlet [r,g,b] = this.#blackOrWhite(...this.#lastPaintRgb);\r\n\t\t\t\tcolorPaint.__colorPaintSelectedPointer.children[0].style.border = `solid 1px rgb(${r}, ${g}, ${b})`\r\n\t\t\t},200));\r\n\t\t});\r\n\t}\r\n\r\n    #colorPaintMoveEvent(event){\r\n\t\tnew Promise(resolve => {\r\n\t\t\tlet {\r\n\t\t\t\ttopTextWrap, selectionRgbBg, previousRgbBg, \r\n\t\t\t\tcolorWrap, colorPanel, colorPaint, \r\n\t\t\t\tcolorBrightnessWrap, colorBrightness,\r\n\t\t\t\tbottomTextWrap, selectionRgbText, previousRgbText\r\n\t\t\t} = this.#componentMap;\r\n\t\t\tlet rect = colorPaint.getBoundingClientRect();\r\n\t\t\tlet pageY = this.#getEventXY(event).y;\r\n\r\n\t\t\tlet isTopOver = pageY < rect.top;\r\n\t\t\tlet isBottomOver = pageY > rect.bottom - 1;\r\n\r\n\t\t\tcolorPaint.__colorPaintSelectedPointer.style.top = pageY + 'px';\r\n\r\n\t\t\tlet {y : reProcessingRectY} = colorPaint.__colorPaintSelectedPointer.getBoundingClientRect();\r\n\t\t\t\r\n\t\t\tlet y = reProcessingRectY - rect.y\r\n\r\n\r\n\t\t\tlet isOver = false;\r\n\t\t\tif(isTopOver){\r\n\t\t\t\ty = 0;\r\n\t\t\t\treProcessingRectY = rect.top;\r\n\t\t\t\tisOver = true;\r\n\t\t\t}\r\n\t\t\tif(isBottomOver){\r\n\t\t\t\ty = rect.height - 1\r\n\t\t\t\treProcessingRectY = rect.bottom - 1\r\n\t\t\t\tisOver = true;\r\n\t\t\t}\r\n\r\n\t\t\tthis.#lastPaintPosition = {y: reProcessingRectY}\r\n\t\t\tlet context = colorPaint.getContext('2d', { willReadFrequently: true });\r\n\t\t\tlet r,g,b;\r\n\t\t\tif(isOver){\r\n\t\t\t\t[r,g,b] = [255, 0, 0];\r\n\t\t\t}else{\r\n\t\t\t\t[r,g,b] = context.getImageData(1, y, 1, 1).data;\r\n\t\t\t}\r\n\t\t\tthis.#lastPaintRgb = [r,g,b]\r\n\r\n\t\t\tcolorPaint.__colorPaintSelectedPointer.style.top = reProcessingRectY + 'px';\r\n\r\n\t\t\tlet blackOrWhite = this.#blackOrWhite(r,g,b);\r\n\r\n\t\t\tcolorPaint.__colorPaintSelectedPointer.children[0].style.border = `solid 1px rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`\r\n\r\n\t\t\tif(this.#a < 0.75){\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.children[0].style.border = 'solid 1px white';\r\n\t\t\t}else{\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.children[0].style.border = `solid 1px rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`;\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\r\n\t\t\tthis.#changeColorBrightness(colorBrightness.getContext('2d', { willReadFrequently: true }), [r,g,b]);\r\n\r\n\t\t\tthis.#changeColorPanel(colorPanel.getContext('2d', { willReadFrequently: true }));\r\n\t\t\tlet colorPanelRect = colorPanel.getBoundingClientRect();\r\n\t\t\tthis.#processingColorPanelSeleter(\r\n\t\t\t\tcolorPanel.__colorPanelSelected.getContext('2d', { willReadFrequently: true }),\r\n\t\t\t\tthis.#lastPanelPosition.x - colorPanelRect.x,\r\n\t\t\t\tthis.#lastPanelPosition.y - colorPanelRect.y,\r\n\t\t\t)\r\n\t\t\tthis.#colorPanelMoveEvent({x:this.#lastPanelPosition.x, y:this.#lastPanelPosition.y})\r\n\t\t\tresolve();\r\n\t\t})\r\n\t}\r\n\r\n    #settingColorBrightness(){\r\n\t\tnew Promise(resolve => {\r\n\t\t\tlet {\r\n\t\t\t\ttopTextWrap, selectionRgbBg, previousRgbBg, \r\n\t\t\t\tcolorWrap, colorPanel, colorPaint, \r\n\t\t\t\tcolorBrightnessWrap, colorBrightness,\r\n\t\t\t\tbottomTextWrap, selectionRgbText, previousRgbText\r\n\t\t\t} = this.#componentMap;\r\n\r\n\t\t\tcolorBrightness.onmousedown = (event) => {\r\n\t\t\t\tcolorBrightness.setAttribute('data-is_mouse_down', '');\r\n\t\t\t\tlet {x, y} = this.#getEventXY(event);\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.style.left = x + 'px';\r\n\t\t\t\tthis.#colorBrightnessMoveEvent(event);\r\n\t\t\t}\r\n\t\t\tcolorBrightness.ontouchstart = colorBrightness.onmousedown;\r\n\r\n\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.onmousedown = colorBrightness.onmousedown\r\n\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.ontouchstart = colorBrightness.onmousedown\r\n\t\t\t\r\n\t\t\tsetTimeout(() => {\r\n                let blackOrWhite = this.#blackOrWhite(this.#r, this.#g, this.#b);\r\n\t\t\t\tlet colorBrightnessRect = colorBrightness.getBoundingClientRect()\r\n\t\t\t\tcolorBrightness.width = colorBrightnessRect.width;\r\n\t\t\t\tcolorBrightness.height = colorBrightnessRect.height;\r\n\t\r\n\t\t\t\tlet context = colorBrightness.getContext('2d', { willReadFrequently: true });\r\n\t\t\t\tthis.#changeColorBrightness(context, [this.#r, this.#g, this.#b]);\r\n\r\n\t\t\t\tif(this.#lastBrightnessPosition){\r\n\t\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.style.left = this.#lastBrightnessPosition.x + 'px';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.style.left = colorBrightnessRect.right + 'px';\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.style.top = colorBrightnessRect.y + 'px';\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.style.height = colorBrightnessRect.height + 'px';\r\n                colorBrightness.__colorBrightnessSelectedPointer.children[0].style.border = `solid 1px rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`\r\n            }, 200)\r\n\t\t\t\r\n\t\t\tresolve();\r\n\t\t})\r\n\t}\r\n\r\n    #changeColorBrightness(context, [r = 255, g=0, b=0]){\r\n\t\tcontext.clearRect(0, 0, context.canvas.width, context.canvas.height);\r\n\t\tlet gradient = context.createLinearGradient(0, 0, context.canvas.width, 0) \r\n\t\tgradient.addColorStop(0, 'rgba(0,0,0,0)');\r\n\t\tgradient.addColorStop(1, `rgba(${r}, ${g}, ${b}, ${this.#a})`); // 페인트 컬러로 변경 필요\r\n\t\tcontext.fillStyle = gradient;\r\n\t\tcontext.fillRect(0, 0, context.canvas.width, context.canvas.height);\r\n\t}\r\n\r\n    #colorBrightnessMoveEvent(event){\r\n\t\tnew Promise(resolve=> {\r\n\t\t\tlet {\r\n\t\t\t\ttopTextWrap, selectionRgbBg, previousRgbBg, \r\n\t\t\t\tcolorWrap, colorPanel, colorPaint, \r\n\t\t\t\tcolorBrightnessWrap, colorBrightness,\r\n\t\t\t\tbottomTextWrap, selectionRgbText, previousRgbText\r\n\t\t\t} = this.#componentMap;\r\n\t\t\tlet rect = colorBrightness.getBoundingClientRect();\r\n\r\n\t\t\tlet {x:pageX, y:pageY} = this.#getEventXY(event);\r\n\r\n\t\t\tlet isLeftOver = pageX < rect.left;\r\n\t\t\tlet isRightOver = pageX > rect.right;\r\n\r\n\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.style.left = pageX + 'px';\r\n\r\n\t\t\tlet {x : reProcessingRectX} = colorBrightness.__colorBrightnessSelectedPointer.getBoundingClientRect();\r\n\t\t\t\r\n\t\t\tlet x = rect.x - reProcessingRectX\r\n\r\n\t\t\tif(isLeftOver){\r\n\t\t\t\tx = rect.x\r\n\t\t\t\treProcessingRectX = rect.x\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.style.left = rect.x + 'px'\r\n\t\t\t\tthis.#a = 0\r\n\t\t\t}else if(isRightOver){\r\n\t\t\t\tx = rect.right\r\n\t\t\t\treProcessingRectX = rect.right\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.style.left = rect.right + 'px';\r\n\t\t\t\tthis.#a = 1\r\n\t\t\t}else{\r\n\t\t\t\tthis.#a = ((reProcessingRectX - rect.x) / rect.width).toFixed(2)\r\n\t\t\t}\r\n\r\n\t\t\tlet blackOrWhite = this.#blackOrWhite(this.#r, this.#g, this.#b);\r\n\t\t\t\r\n\t\t\tselectionRgbBg.textContent = this.selectedColor;\r\n\t\t\tselectionRgbBg.style.background = this.selectedColor;\r\n\r\n\t\t\tselectionRgbText.style.color = this.selectedColor;\r\n\t\t\tthis.#applyExampleTextColor(selectionRgbText, this.selectedColor, blackOrWhite);\r\n\t\t\tif(this.#a < 0.75){\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.children[0].style.border = 'solid 1px white';\r\n\t\t\t}else{\r\n\t\t\t\tcolorBrightness.__colorBrightnessSelectedPointer.children[0].style.border = `solid 1px rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`;\r\n\t\t\t}\r\n\r\n\t\t\tresolve()\r\n\t\t});\r\n\t}\r\n\r\n    #settingApplyEvent(palette, cancelButton, applyButton, selectionRgbText){\r\n\t\tcancelButton.onclick = () => {\r\n\t\t\tthis.close();\r\n\t\t\t//palette.remove();\r\n\t\t}\r\n\t\tapplyButton.onclick = (event) => {\r\n            this.applyCallback(event);\r\n\t\t}\r\n\t}\r\n\r\n    #processingPalettePosition(palette){\r\n\t\tif(this.#openPositionMode == Palette.OpenPositionMode.BUTTON){\r\n\t\t\tlet {x, y, height} = this.#openPosition.getBoundingClientRect();\r\n\t\t\t//let paletteWidthPx = document.documentElement.clientHeight * (this.#paletteVw / 100);\r\n\t\t\t//let paletteHeightPx = document.documentElement.clientHeight * (this.#paletteVh / 100);\r\n\t\t\tlet paletteHeightPx = palette.clientHeight;\r\n\t\t\tlet paletteTop = (y - paletteHeightPx)\r\n\t\t\tif(paletteTop > 0){\r\n\t\t\t\tpalette.style.top = paletteTop + 'px';\r\n\t\t\t}else{\r\n\t\t\t\tpalette.style.top = y + height + 'px';\r\n\t\t\t}\r\n\t\t\tpalette.style.left = x + 'px';\r\n\t\t}else if(this.#openPositionMode == Palette.OpenPositionMode.WRAPPER){\r\n\t\t\tthis.#openPosition.append(palette);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @see https://stackoverflow.com/a/3943023\r\n\t * @param  {...any} rgb \r\n\t * @returns \r\n\t */\r\n    #blackOrWhite(...rgb){\r\n\t\tlet [r,g,b] = rgb;\r\n\t\treturn (r * 0.299 + g * 0.587 + b * 0.114) > 186\r\n            ? [0, 0, 0]\r\n            : [255, 255, 255];\r\n\t}\r\n\r\n    #getEventXY(event){\r\n\t\tlet x;\r\n\t\tlet y;\r\n\t\tif(window.TouchEvent && event.constructor == window.TouchEvent){\r\n\t\t\tx = event.touches[0].pageX\r\n\t\t\ty = event.touches[0].pageY\r\n\t\t\tevent.preventDefault();\r\n\t\t}else{\r\n\t\t\tx = event.x\r\n\t\t\ty = event.y\r\n\t\t}\r\n\t\treturn {x,y};\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t * @param {HTMLElement} text \r\n\t * @param {String} color \r\n\t * @param {Array<Number>} blackOrWhite \r\n\t */\r\n\t#applyExampleTextColor(text, color, blackOrWhite){\r\n\t\tif(this.#exampleMode == Palette.ExampleMode.TEXT_COLOR){\r\n\t\t\ttext.style.color = color\r\n\t\t\tif(blackOrWhite && blackOrWhite.length != 0){\r\n\t\t\t\ttext.style.backgroundColor = `rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`\r\n\t\t\t}\r\n\t\t}else if(this.#exampleMode == Palette.ExampleMode.TEXT_BACKGROUND_COLOR){\r\n\t\t\ttext.style.backgroundColor = color\r\n\t\t\tif(blackOrWhite && blackOrWhite.length != 0){\r\n\t\t\t\ttext.style.color = `rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`\r\n\t\t\t}\r\n\t\t}else if(this.#exampleMode == Palette.ExampleMode.TEXT_UNDERLINE){\r\n\t\t\ttext.style.textDecoration = 'underline'\r\n\t\t\ttext.style.textDecorationColor = color\r\n\t\t\t\r\n\t\t\tif(blackOrWhite && blackOrWhite.length != 0){\r\n\t\t\t\ttext.style.color = `rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`\r\n\t\t\t\ttext.style.backgroundColor = 'rgba(255, 255, 255, 0.25)'\r\n\t\t\t\t/*if(blackOrWhite.filter(e=>e==255).length == 3){\r\n\t\t\t\t\ttext.style.backgroundColor = 'rgba(0, 0, 0, 0.3)'\r\n\t\t\t\t}else{\r\n\t\t\t\t\ttext.style.backgroundColor = 'rgba(255, 255, 255, 0.25)'\r\n\t\t\t\t}*/\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}else if(this.#exampleMode == Palette.ExampleMode.TEXT_LINE_THROUGH){\r\n\t\t\ttext.style.textDecoration = 'line-through'\r\n\t\t\ttext.style.textDecorationColor = color;\r\n\t\t\t\r\n\t\t\tif(blackOrWhite && blackOrWhite.length != 0){\r\n\t\t\t\ttext.style.color = `rgb(${blackOrWhite[0]}, ${blackOrWhite[1]}, ${blackOrWhite[2]})`\r\n\t\t\t\ttext.style.backgroundColor = 'rgba(255, 255, 255, 0.25)'\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n    get selectedColor(){\r\n\t\treturn `rgba(${this.#r}, ${this.#g}, ${this.#b}, ${this.#a})`;\r\n\t}\r\n\r\n    get palette(){\r\n        return this.#palette;\r\n    }\r\n\r\n    get isConnected(){\r\n        return this.#palette.isConnected;\r\n    }\r\n\r\n    set applyCallback(applyCallback){\r\n        this.#applyCallback = applyCallback;\r\n    }\r\n\r\n    get applyCallback(){\r\n        return this.#applyCallback;\r\n    }\r\n\r\n\tget style(){\r\n\t\treturn this.#style;\r\n\t}\r\n\r\n\tset style(style){\r\n        this.#style.textContent = style;\r\n    }\r\n\r\n\tset insertStyle(style){\r\n\t\tthis.#style.sheet.insertRule(style);\r\n\t}\r\n\r\n\tget r(){\r\n\t\treturn this.#r;\r\n\t}\r\n\tget g(){\r\n\t\treturn this.#g;\r\n\t}\r\n\tget b(){\r\n\t\treturn this.#b;\r\n\t}\r\n\tget a(){\r\n\t\treturn this.#a;\r\n\t}\r\n\r\n    reset(){\r\n\t\tthis.#r = 255;\r\n\t\tthis.#g = 0;\r\n\t\tthis.#b = 0;\r\n\t\tthis.#a = 1;\r\n\t\tthis.#lastPaintRgb = [255, 0, 0];\r\n\t\tthis.#lastPanelPosition = undefined;\r\n\t\tthis.#lastPaintPosition = undefined;\r\n\t\tthis.#lastBrightnessPosition = undefined;\r\n        this.#componentMap = undefined;\r\n        \r\n\t}\r\n\r\n    close(){\r\n        this.#palette.remove();\r\n    }\r\n\r\n    open(){\r\n        this.#componentMap = this.#createPaletteItems();\r\n        document.body.append(this.#palette);\r\n        this.#createPalette(this.#palette, this.#componentMap);\r\n        this.#processingPalettePosition(this.#palette);\r\n    }\r\n\r\n    createStyle(){\r\n\t\t//position: fixed; 제거 20230517\r\n\t\tthis.#style.textContent = `\r\n\t\t\t.palette-wrap{\r\n\t\t\t\tbackground: #343434;\r\n\t\t\t\tpadding: 0.9%;\r\n\t\t\t\twidth: 35dvw;\r\n\t\t\t\theight: fit-content;\r\n\t\t\t\tcolor: white;\r\n\t\t\t\tfont-size: 0.9rem;\r\n\t\t\t\tz-index: 999;\r\n\t\t\t\tmin-width: 20vmax;\r\n\t\t\t\t-webkit-user-select: none;\r\n\t\t\t\t-moz-user-select: none;\r\n\t\t\t\t-ms-user-select: none;\r\n\t\t\t\tuser-select: none;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .palette-panel{\r\n\t\t\t\twidth: 90%;\r\n\t\t\t\tposition: relative;\r\n\t\t\t}\r\n\r\n\t\t\t/* 상단 텍스트 영역 [S] */\r\n\t\t\t.palette-wrap .top-text-wrap{\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\tmargin-bottom: 2%;\r\n\t\t\t\theight: 8%;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .top-text-wrap .selection-rgb-bg{\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\ttext-align-last: center;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\ttext-wrap: nowrap;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .top-text-wrap .previous-rgb-bg{\r\n\t\t\t\ttext-align-last: center;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\twidth: 11.5%;\r\n\t\t\t}\r\n\t\t\t/* 상단 텍스트 영역 [E] */\r\n\r\n\t\t\t/* 컬러 영역 영역 [S] */\r\n\t\t\t.palette-wrap .color-wrap{\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\tmargin-bottom: 2%;\r\n\t\t\t}\r\n\r\n\t\t\t.palette-wrap .color-wrap .panel-selected{\r\n\t\t\t\tposition: fixed;\r\n\t\t\t\tz-index: 9000;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .color-wrap .panel-selected-pointer{\r\n\t\t\t\tposition: fixed;\r\n\t\t\t\twidth: 1px;\r\n\t\t\t\theight: 1px;\r\n\t\t\t}\r\n\r\n\t\t\t.palette-wrap .color-wrap .palette-paint{\r\n\t\t\t\twidth: 5%;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .color-wrap .paint-selected-pointer{\r\n\t\t\t\tposition: fixed;\r\n\t\t\t\theight: 1px;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\tbackground-color: #faebd700;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .color-wrap .paint-selected-pointer-child{\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tborder: solid 1px;\r\n\t\t\t\theight: 2px;\r\n\t\t\t\twidth: inherit;\r\n\t\t\t}\r\n\t\t\t/* 컬러 영역 영역 [E] */\r\n\r\n\t\t\t/* 투명도 영역 [S] */\r\n\t\t\t.palette-wrap .brightness-wrap{\r\n\t\t\t\tmargin-bottom: 2%;\r\n\t\t\t\tbackground-image: /* tint image */ linear-gradient(to right, rgb(192 192 192 / 20%), rgb(192 192 192 / 20%)), /* checkered effect */ linear-gradient(to right, #505050 50%, #a1a1a1 50%), linear-gradient(to bottom, #505050 50%, #a1a1a1 50%);\r\n\t\t\t\tbackground-blend-mode: normal, difference, normal;\r\n\t\t\t\tbackground-size: 2em 2em;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .brightness-wrap .brightness-color{\r\n\t\t\t\theight: 2vh;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tmin-height: 17px;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .brightness-wrap .brightness-selected-pointer{\r\n\t\t\t\tposition: fixed;\r\n\t\t\t\twidth: 1px;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\tbackground-color: #faebd700;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .brightness-wrap .brightness-selected-pointer-child{\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tborder: solid 1px;\r\n\t\t\t\theight: inherit;\r\n\t\t\t\twidth: 2px;\r\n\t\t\t\tbackground: inherit;\r\n\t\t\t}\r\n\t\t\t/* 투명도 영역 [E] */\r\n\r\n\t\t\t/* 하단 텍스트 영역 [S] */\r\n\t\t\t.palette-wrap .bottom-text-wrap{\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tmargin-bottom: 2%;\r\n\t\t\t\ttext-wrap: nowrap;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .bottom-text-wrap .selection-rgb-text{\r\n\t\t\t\tmargin-right: 5%;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .bottom-text-wrap .selection-rgb-text, .palette-wrap .bottom-text-wrap .previous-rgb-text{\r\n\t\t\t\toverflow-x: hidden;\r\n\t\t\t\tmax-width: 40%;\r\n\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\twidth: fit-content;\r\n\t\t\t\tbackground: rgba(255, 255, 255, 0.25);\r\n\t\t\t\tcolor: rgba(255, 255, 255, 0.25);\r\n\t\t\t}\r\n\t\t\t.palette-wrap .bottom-text-wrap .selection-rgb-text *, .palette-wrap .bottom-text-wrap .previous-rgb-text *{\r\n\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\toverflow-x: hidden;\r\n\t\t\t}\r\n\t\t\t/* 하단 텍스트 영역 [E] */\r\n\r\n\t\t\t/* 버튼 영역 [S] */\r\n\t\t\t.palette-wrap .button-wrap {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-around;\r\n\t\t\t}\r\n\t\t\t.palette-wrap .cancel-button, .palette-wrap .apply-button{\r\n\t\t\t\tbackground: none;\r\n\t\t\t\tborder: revert;\r\n\t\t\t\tcolor: #b9b9b9;\r\n\t\t\t\tborder-color: #464646;\r\n\t\t\t}\r\n\t\t\t/* 버튼 영역 [E] */\r\n\t\t`;\r\n\t\treturn this.#style;\r\n\t}\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport Palette from \"../component/Palette\"\r\n\r\nexport default class Color extends FreedomInterface {\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-color-style'\r\n\t});\r\n\r\n\tstatic palette;\r\n\tstatic isDefaultStyle = true;\r\n\tstatic{\r\n\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-color';\r\n\t\t\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: 'C',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Font Color'\r\n        });\r\n\r\n\t\tthis.palette = new Palette({\r\n            openPositionMode: Palette.OpenPositionMode.BUTTON, \r\n            openPosition : this.toolHandler.toolButton\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else if(this.palette.isConnected){\r\n\t\t\t\tthis.palette.close();\r\n\t\t\t}else{\r\n\t\t\t\tthis.palette.open();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.palette.applyCallback = (event) => {\r\n\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active'\r\n\t\t\tthis.palette.close();\r\n\t\t}\r\n\r\n\t\tsuper.outClickElementListener(this.palette.palette, ({oldEvent, newEvent, isMouseOut})=>{\r\n\t\t\tif(isMouseOut && this.palette.palette.isConnected && ! super.isMouseInnerElement(this.toolHandler.toolButton)){\r\n\t\t\t\tthis.palette.close();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Color, dataset);\r\n\t\tif( ! dataset && Object.entries(this.dataset).length == 0){\r\n\t\t\tthis.dataset.rgba = Color.palette.r + ',' + Color.palette.g + ',' + Color.palette.b + ',' + Color.palette.a;\r\n\t\t}\r\n\t\tthis.style.color = `rgba(${this.dataset.rgba})`;\r\n\t}\r\n\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport Palette from \"../component/Palette\"\r\n\r\nexport default class Background extends FreedomInterface {\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-background-style'\r\n\t});\r\n\r\n\tstatic palette;\r\n\r\n\tstatic isDefaultStyle = true;\r\n\r\n\tstatic{\r\n\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-background';\r\n\t\t\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: 'G',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Background Color'\r\n        });\r\n\r\n\t\tthis.palette = new Palette({\r\n            openPositionMode: Palette.OpenPositionMode.BUTTON, \r\n            openPosition: this.toolHandler.toolButton,\r\n\t\t\texampleMode: Palette.ExampleMode.TEXT_BACKGROUND_COLOR\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else if(this.palette.isConnected){\r\n\t\t\t\tthis.palette.close();\r\n\t\t\t}else{\r\n\t\t\t\tthis.palette.open();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.palette.applyCallback = (event) => {\r\n\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active'\r\n\t\t\tthis.palette.close();\r\n\t\t}\r\n\r\n\t\tsuper.outClickElementListener(this.palette.palette, ({oldEvent, newEvent, isMouseOut})=>{\r\n\t\t\tif(isMouseOut && this.palette.palette.isConnected && ! super.isMouseInnerElement(this.toolHandler.toolButton)){\r\n\t\t\t\tthis.palette.close();\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Background, dataset);\r\n\r\n\t\tif( ! dataset && Object.entries(this.dataset).length == 0){\r\n\t\t\tthis.dataset.rgba = Background.palette.r + ',' + Background.palette.g + ',' + Background.palette.b + ',' + Background.palette.a;\r\n\t\t}\r\n\t\tthis.style.backgroundColor = `rgba(${this.dataset.rgba})`;\r\n\t}\r\n\r\n\r\n\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport Palette from \"../component/Palette\"\r\n\r\nexport default class Strikethrough extends FreedomInterface {\r\n\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-strikethrough-style'\r\n\t});\r\n\r\n    static palette;\r\n\tstatic isDefaultStyle = true;\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-strikethrough';\r\n\t\t\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: 'S',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Strikethrough'\r\n        });\r\n\r\n\t\tthis.palette = new Palette({\r\n            openPositionMode: Palette.OpenPositionMode.BUTTON, \r\n            openPosition: this.toolHandler.toolButton,\r\n\t\t\texampleMode: Palette.ExampleMode.TEXT_LINE_THROUGH\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else if(this.palette.isConnected){\r\n\t\t\t\tthis.palette.close();\r\n\t\t\t}else{\r\n\t\t\t\tthis.palette.open();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.palette.applyCallback = (event) => {\r\n\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active'\r\n\t\t\tthis.palette.close();\r\n\t\t}\r\n\r\n\t\tsuper.outClickElementListener(this.palette.palette, ({oldEvent, newEvent, isMouseOut})=>{\r\n\t\t\tif(isMouseOut && this.palette.palette.isConnected && ! super.isMouseInnerElement(this.toolHandler.toolButton)){\r\n\t\t\t\tthis.palette.close();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t\ttext-decoration: 1px line-through;\r\n\t\t\t\ttext-decoration-color: #404040;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Strikethrough, dataset);\r\n\t\tif( ! dataset && Object.entries(this.dataset).length == 0){\r\n\t\t\tthis.dataset.rgba = Strikethrough.palette.r + ',' + Strikethrough.palette.g + ',' + Strikethrough.palette.b + ',' + Strikethrough.palette.a;\r\n\t\t}\r\n\r\n\t\tthis.style.textDecoration = `line-through rgba(${this.dataset.rgba}) 1px`;\r\n\t}\r\n\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport Palette from \"../component/Palette\"\r\n\r\nexport default class Underline extends FreedomInterface {\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-underline-style'\r\n\t});\r\n\r\n\tstatic palette;\r\n\tstatic isDefaultStyle = true;\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-underline';\r\n\t\t\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: 'U',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Underline'\r\n        });\r\n\r\n\t\tthis.palette = new Palette({\r\n            openPositionMode: Palette.OpenPositionMode.BUTTON, \r\n            openPosition: this.toolHandler.toolButton,\r\n\t\t\texampleMode: Palette.ExampleMode.TEXT_UNDERLINE\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else if(this.palette.isConnected){\r\n\t\t\t\tthis.palette.close();\r\n\t\t\t}else{\r\n\t\t\t\tthis.palette.open();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.palette.applyCallback = (event) => {\r\n\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active'\r\n\t\t\tthis.palette.close();\r\n\t\t}\r\n\r\n\t\tsuper.outClickElementListener(this.palette.palette, ({oldEvent, newEvent, isMouseOut})=>{\r\n\t\t\tif(isMouseOut && this.palette.palette.isConnected && ! super.isMouseInnerElement(this.toolHandler.toolButton)){\r\n\t\t\t\tthis.palette.close();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t\ttext-decoration: 1px underline;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} {\r\n\t\t\t\twidth: fit-content;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tconstructor(dataset, {isDefaultStyle = true} = {}){\r\n\t\tsuper(Underline, dataset);\r\n\t\tif( ! dataset && Object.entries(this.dataset).length == 0){\r\n\t\t\tthis.dataset.rgba = Underline.palette.r + ',' + Underline.palette.g + ',' + Underline.palette.b + ',' + Underline.palette.a;\r\n\t\t}\r\n\t\tthis.style.borderBottom = `solid 2px rgba(${this.dataset.rgba})`\r\n\t\t//this.style.backgroundImage = `linear-gradient(to right, rgba(${this.dataset.rgba}), rgba(${this.dataset.rgba}))`\r\n\t\t//this.style.textDecoration = `underline rgba(${this.dataset.rgba}) 1px`;\r\n\t}\r\n\r\n}","export default class FontFamilyBox {\r\n    \r\n    #style = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-font-family-box'\r\n\t});\r\n\r\n    #fontFamilyBoxVw = 20;\r\n\r\n    #fontList = [];\r\n    #fontFamilyBox = Object.assign(document.createElement('div'), {\r\n        className: 'font-box-wrap',\r\n    })\r\n    #fontFamilyBoxContainer = Object.assign(document.createElement('ul'), {\r\n        className: 'font-box-container'\r\n    })\r\n    /*\r\n    #searchInputText = Object.assign(document.createElement('input'), {\r\n        autocomplete: 'off',\r\n        placeholder: 'search font',\r\n        type: 'text',\r\n        name: 'font-box-search',\r\n        className: 'font-box-search'\r\n    })\r\n    */\r\n    #fontElementList = [];\r\n    #selectedFont;\r\n\r\n    #defaultSampleText = '가나 다라 ab cd'\r\n    #sampleText = this.#defaultSampleText;\r\n\r\n    #applyCallback = () => {}\r\n\r\n    constructor(fontList){\r\n        if( ! fontList){\r\n            throw new Error('fontList is undefined');\r\n        }\r\n        this.#fontList = fontList;\r\n\r\n        let style = document.querySelector(`#${this.#style.id}`);\r\n        if(! style){\r\n            document.head.append(this.createStyle());\r\n        }else{\r\n            this.#style = style;\r\n        }\r\n\r\n        /*\r\n        let searchWrap = Object.assign(document.createElement('div'),{\r\n            className: 'font-box-search-wrap'\r\n        });\r\n        searchWrap.append(this.#searchInputText);\r\n        \r\n        this.#fontFamilyBox.append(searchWrap, this.#fontFamilyBoxContainer);\r\n        */\r\n        this.#fontFamilyBox.append(this.#fontFamilyBoxContainer);\r\n\r\n    }\r\n\r\n    searchInputTextEvent(event){\r\n        \r\n    }\r\n\r\n    #addFontItemEvent(item){\r\n        return new Promise(res=>{\r\n            item.onclick = (event) => {\r\n                this.#selectedFont = item;\r\n                this.applyCallback(event);\r\n            }\r\n            res(item);\r\n        })\r\n    }\r\n\r\n    #createFontElementList(sampleText){\r\n        return new Promise(resolve=> {\r\n            const createFontItem = () => {\r\n                let li = Object.assign(document.createElement('li'),{\r\n                    className: 'font-family-item',\r\n                });\r\n                if(sampleText.nodeType && sampleText.nodeType == Node.ELEMENT_NODE){\r\n                    li.innerHTML = sampleText.innerHTML;\r\n                }else{\r\n                    li.textContent = sampleText;\r\n                }\r\n                this.#addFontItemEvent(li)\r\n                return li;\r\n            }\r\n            this.#fontElementList = this.#fontList.map(fontFamily=>{\r\n                let li = createFontItem();\r\n                li.style.fontFamily = fontFamily;\r\n                return li;\r\n            });\r\n\r\n            let defaultFont = createFontItem();\r\n            this.#fontElementList.push(defaultFont)\r\n\r\n            resolve(this.#fontElementList);\r\n        })\r\n    }\r\n\r\n    async open(){\r\n        let selection = window.getSelection();\r\n        if(selection.rangeCount != 0 && selection.isCollapsed == false){\r\n            let range = selection.getRangeAt(0)\r\n            let aticle = document.createElement('aticle');\r\n            let rangeClone = range.cloneContents();\r\n            aticle.append(rangeClone);\r\n            this.#sampleText = aticle;\r\n        }\r\n        this.#sampleText = this.#sampleText == '' ? this.#defaultSampleText : this.#sampleText;\r\n    \r\n        document.body.append(this.#fontFamilyBox);\r\n\r\n        return await this.#createFontElementList(this.#sampleText).then(fontElementList => {\r\n            this.#fontFamilyBoxContainer.replaceChildren(...fontElementList);\r\n            return this.#fontFamilyBoxContainer;\r\n        });\r\n        \r\n    }\r\n    close(){\r\n        this.#fontFamilyBox.remove();\r\n    }\r\n\r\n    set applyCallback(applyCallback){\r\n        this.#applyCallback = applyCallback;\r\n    }\r\n\r\n    get applyCallback(){\r\n        return this.#applyCallback;\r\n    }\r\n\r\n    get fontFamilyBox(){\r\n        return this.#fontFamilyBox;\r\n    }\r\n\r\n    get selectedFont(){\r\n        return this.#selectedFont;\r\n    }\r\n\r\n\tget style(){\r\n\t\treturn this.#style;\r\n\t}\r\n\r\n\tset style(style){\r\n        this.#style.textContent = style;\r\n    }\r\n\r\n\tset insertStyle(style){\r\n\t\tthis.#style.sheet.insertRule(style);\r\n\t}\r\n\r\n\r\n    createStyle(){\r\n        this.#style.textContent = `\r\n            .font-box-wrap{\r\n                background: #000000bf;\r\n                position: fixed;\r\n\t\t\t\tpadding: 0.9%;\r\n\t\t\t\twidth: ${this.#fontFamilyBoxVw}vw;\r\n                height: 25vh;\r\n\t\t\t\tcolor: white;\r\n\t\t\t\tfont-size: 13px;\r\n\t\t\t\tmin-width: 300px;\r\n                overflow-y: auto;\r\n\t\t\t\t-webkit-user-select:none;\r\n\t\t\t\t-moz-user-select:none;\r\n\t\t\t\t-ms-user-select:none;\r\n\t\t\t\tuser-select:none;\r\n                z-index: 999;\r\n            }\r\n            .font-box-wrap .font-box-container{\r\n                list-style-type: none;\r\n                padding: 0;\r\n                margin: 0;\r\n            }\r\n            .font-box-wrap .font-family-item{\r\n                margin-bottom: 1%;\r\n            }\r\n            .font-box-wrap .font-family-item:hover{\r\n                background-color: #747474;\r\n                cursor: pointer;\r\n            }\r\n\r\n        `\r\n        return this.#style;\r\n    }\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport FontFamilyBox from \"../component/FontFamilyBox\";\r\n\r\nexport default class FontFamily extends FreedomInterface {\r\n    static toolHandler = new ToolHandler(this);\r\n\r\n    static #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-font-family-style'\r\n\t});\r\n\r\n    static fontFamilyBox;\r\n\r\n    static #fontList = [\r\n        'Arial, Helvetica, Sans-Serif',\r\n        'Arial Black, Gadget, Sans-Serif',\r\n        'Comic Sans MS, Textile, Cursive',\r\n        'Courier New, Courier, Monospace',\r\n        'Georgia, Times New Roman, Times, Serif',\r\n        'Impact, Charcoal, Sans-Serif',\r\n        'Lucida Console, Monaco, Monospace',\r\n        'Lucida Sans Unicode, Lucida Grande, Sans-Serif',\r\n        'Palatino Linotype, Book Antiqua, Palatino, Serif',\r\n        'Tahoma, Geneva, Sans-Serif',\r\n        'Times New Roman, Times, Serif',\r\n        'Trebuchet MS, Helvetica, Sans-Serif',\r\n        'Verdana, Geneva, Sans-Serif',\r\n        'MS Sans Serif, Geneva, Sans-Serif',\r\n        'MS Serif, New York, Serif'\r\n    ]\r\n    static isDefaultStyle = true;\r\n    static{\r\n        \r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-font-family';\r\n\t\t\r\n        this.fontFamilyBox = new FontFamilyBox(this.#fontList);\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: 'F',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n            title: 'Font Family'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else if(this.fontFamilyBox.fontFamilyBox.isConnected){\r\n\t\t\t\tthis.fontFamilyBox.close();\r\n\t\t\t}else{\r\n\t\t\t\tthis.fontFamilyBox.open().then(fontFamilyBoxContainer=>{\r\n\t\t\t\t    super.processingElementPosition(this.fontFamilyBox.fontFamilyBox, this.toolHandler.toolButton);\r\n                });\r\n\t\t\t}\r\n\t\t}\r\n\r\n        this.fontFamilyBox.applyCallback = (event) => {\r\n\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active'\r\n\t\t\tthis.fontFamilyBox.close();\r\n\t\t}\r\n\r\n        document.addEventListener(\"scroll\", () => {\r\n\t\t\tif(this.fontFamilyBox.fontFamilyBox.isConnected){\r\n                super.processingElementPosition(this.fontFamilyBox.fontFamilyBox, this.toolHandler.toolButton);\r\n\t\t\t}\r\n\t\t});\r\n        window.addEventListener('resize', (event) => {\r\n            if(this.fontFamilyBox.fontFamilyBox.isConnected){\r\n                this.fontFamilyBox.open().then(fontFamilyBoxContainer=>{\r\n                    super.processingElementPosition(this.fontFamilyBox.fontFamilyBox, this.toolHandler.toolButton);\r\n                });\r\n            }\r\n\t\t})\r\n\r\n\t\tsuper.outClickElementListener(this.fontFamilyBox.fontFamilyBox, ({oldEvent, newEvent, isMouseOut})=>{\r\n\t\t\tif(isMouseOut && this.fontFamilyBox.fontFamilyBox.isConnected && ! super.isMouseInnerElement(this.toolHandler.toolButton)){\r\n                this.fontFamilyBox.close();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n    static createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n            .${this.#defaultStyle.id}-button{\r\n                font-size: 0.8rem;\r\n            }\r\n        `\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n    static get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(FontFamily, dataset);\r\n\t\tif( ! dataset && Object.entries(this.dataset).length == 0){\r\n            this.dataset.font_family = FontFamily.fontFamilyBox.selectedFont?.style.fontFamily;\r\n        }\r\n        this.style.fontFamily = this.dataset.font_family\r\n    }\r\n\t\r\n}\r\n","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\n\r\nexport default class Quote extends FreedomInterface {\r\n\t//static extendsElement = 'strong';\r\n\t//static defaultClass = 'line';\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-quote-style'\r\n\t});\r\n\tstatic isDefaultStyle = true;\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-quote';\r\n\t\tthis.toolHandler.isInline = false;\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: 'Q',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Quote'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else{\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tpadding-left: 0.5em;\r\n\t\t\t\tborder-left: 3px solid #d7d7db;\r\n\t\t\t\tmargin-inline: 1.5em;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tparentLine;\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Quote, dataset, {deleteOption : FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE});\r\n\r\n\t\t/*\r\n\t\tsuper.connectedAfterOnlyOneCallback = () => {\r\n\t\t\tthis.dataset.index = Quote.toolHandler.connectedFriends.length;\r\n\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tthis.parentEditor.createLine();\r\n\t\t\t}else{\r\n\t\t\t\tnextLine.line.lookAtMe();\r\n\t\t\t}\r\n\t\t}\r\n\r\n        super.disconnectedChildAfterCallback = () => {\r\n\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tthis.parentEditor.createLine();\r\n\t\t\t}\r\n        }\r\n\t\t*/\r\n\t}\r\n\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\n\r\nexport default class NumericPoint extends FreedomInterface {\r\n\t//static extendsElement = 'strong';\r\n\t//static defaultClass = 'line';\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\t\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-numeric-point-style'\r\n\t});\r\n\tstatic isDefaultStyle = true;\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-numeric-point';\r\n\t\tthis.toolHandler.isInline = false;\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: '1.',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Numeric Point'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else{\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n    //list-style-type: disc;\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tmargin-inline: 1.3em;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} > * {\r\n\t\t\t\tmargin-inline: 1.3em;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} > *:before{\r\n\t\t\t\tcontent: attr(data-order)\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\t\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tparentLine;\r\n\t\r\n\tconstructor(dataset){\r\n\t\tsuper(NumericPoint, dataset, {deleteOption : FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE});\r\n\t\tsuper.connectedChildAfterCallback = (list) => {\r\n\t\t\tnew Promise(r=>{\r\n\t\t\t\t[...this.children].forEach((e,i)=>{\r\n\t\t\t\t\te.dataset.order = (i + 1) + '. ';\r\n\t\t\t\t});\r\n\t\t\t\tr();\r\n\t\t\t});\r\n\t\t\tlet lastItem = list.at(-1);\r\n\t\t\tif(lastItem.nodeType == Node.ELEMENT_NODE){\r\n\t\t\t\tlet inter = setInterval(()=>{\r\n\t\t\t\t\tif(lastItem.isConnected){\r\n\t\t\t\t\t\tclearInterval(inter);\r\n\t\t\t\t\t\twindow.getSelection().setPosition(lastItem, lastItem.childNodes.length)\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 50);\r\n\t\t\t}else if(lastItem.nodeType == Node.TEXT_NODE){\r\n\t\t\t\tlet inter = setInterval(()=>{\r\n\t\t\t\t\tif(lastItem.isConnected){\r\n\t\t\t\t\t\tclearInterval(inter);\r\n\t\t\t\t\t\twindow.getSelection().setPosition(lastItem, lastItem.length)\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 50);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\tsuper.connectedAfterOnlyOneCallback = () => {\r\n\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tthis.parentEditor.createLine();\r\n\t\t\t}else{\r\n\t\t\t\tnextLine.line.lookAtMe();\r\n\t\t\t}\r\n\t\t}\r\n\t\t/*\r\n\t\tsuper.disconnectedChildAfterCallback = (removedNodes) => {\r\n\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tthis.parentEditor.createLine();\r\n\t\t\t}\r\n        }\r\n\t\t*/\r\n\t}\r\n\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\n\r\nexport default class BulletPoint extends FreedomInterface {\r\n\t//static extendsElement = 'strong';\r\n\t//static defaultClass = 'line';\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\t\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-bullet-point-style'\r\n\t});\r\n\tstatic isDefaultStyle = true;\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-bullet-point';\r\n\t\tthis.toolHandler.isInline = false;\r\n\t\t\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: '●',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Bullet Point'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else{\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\r\n\t\t\t.${this.toolHandler.defaultClass} {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tpadding-left: 1em;\r\n\t\t\t\tmargin-inline: 2.5em;\r\n\t\t\t\tlist-style-type: disc;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} > *{\r\n\t\t\t\tdisplay: list-item;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\t\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tparentLine;\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(BulletPoint, dataset, {deleteOption : FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE});\r\n\t\t/*\r\n\t\tsuper.connectedAfterOnlyOneCallback = () => {\r\n\t\t\tthis.dataset.index = BulletPoint.toolHandler.connectedFriends.length;\r\n\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tthis.parentEditor.createLine();\r\n\t\t\t}else{\r\n\t\t\t\tnextLine.line.lookAtMe();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsuper.disconnectedChildAfterCallback = (removedNodes) => {\r\n\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tthis.parentEditor.createLine();\r\n\t\t\t}\r\n        }\r\n\t\t*/\r\n\t}\r\n\r\n}","export default class SortBox {\r\n    \r\n    #style = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-sort-box'\r\n\t});\r\n\r\n    #sortBox = Object.assign(document.createElement('div'), {\r\n        className: 'sort-box-wrap',\r\n    })\r\n\r\n    #sortBoxContainer = Object.assign(document.createElement('ul'),{\r\n        className: 'sort-box-container',\r\n    })\r\n\r\n    #sortBoxItems = [/*'left',*/ 'center', 'right'].map(e=>Object.assign(document.createElement('li'),{\r\n        textContent: e,\r\n    }));\r\n\r\n    #selectedSort;\r\n\r\n    #applyCallback = () => {}\r\n    \r\n    constructor(){\r\n        let style = document.querySelector(`#${this.#style.id}`);\r\n        \r\n        if(! style){\r\n            document.head.append(this.createStyle());\r\n        }else{\r\n            this.#style = style;\r\n        }\r\n\r\n        this.#sortBox.append(this.#sortBoxContainer);\r\n        this.#sortBoxContainer.replaceChildren(...this.#sortBoxItems);\r\n        this.#sortBoxItems.forEach(e=>{\r\n            e.onclick = (event) => {\r\n                this.#selectedSort = e; \r\n                this.applyCallback(event);\r\n            }\r\n        });\r\n    }\r\n\r\n    open(){\r\n        document.body.append(this.#sortBox);\r\n    }\r\n\r\n    close(){\r\n        this.#sortBox.remove();\r\n    }\r\n\r\n    set applyCallback(applyCallback){\r\n        this.#applyCallback = applyCallback;\r\n    }\r\n\r\n    get applyCallback(){\r\n        return this.#applyCallback;\r\n    }\r\n\r\n    get sortBox(){\r\n        return this.#sortBox;\r\n    }\r\n\r\n    get selectedSort(){\r\n        return this.#selectedSort;\r\n    }\r\n\r\n\tget style(){\r\n\t\treturn this.#style;\r\n\t}\r\n\r\n\tset style(style){\r\n        this.#style.textContent = style;\r\n    }\r\n\r\n\tset insertStyle(style){\r\n\t\tthis.#style.sheet.insertRule(style);\r\n\t}\r\n    \r\n    \r\n    createStyle(){\r\n        this.#style.textContent = `\r\n            .sort-box-wrap {\r\n                background: #000000bf;\r\n                position: fixed;\r\n                padding: 0.9%;\r\n                height: fit-content;\r\n                color: white;\r\n                font-size: 13px;\r\n                min-width: 85px;\r\n                -webkit-user-select: none;\r\n                -moz-user-select: none;\r\n                -ms-user-select: none;\r\n                user-select: none;\r\n                z-index: 999;\r\n            }\r\n            .sort-box-wrap .sort-box-container {\r\n                list-style-type: none;\r\n                padding: 0;\r\n                margin: 0;\r\n                display: flex;\r\n                gap: 1vw;\r\n            }\r\n            \r\n            .sort-box-wrap .sort-box-container li{\r\n                transition: all 0.5s;\r\n                padding: 1% 2% 1% 2%;\r\n                margin-right: 1vw;\r\n            }\r\n            .sort-box-wrap .sort-box-container li:hover{\r\n                background-color: #95959591;\r\n                cursor: pointer;\r\n            }\r\n\r\n        `\r\n        return this.#style;\r\n    }\r\n\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport SortBox from \"../component/SortBox\";\r\n\r\nexport default class Sort extends FreedomInterface {\r\n    static toolHandler = new ToolHandler(this);\r\n\t\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-index-style'\r\n\t});\r\n\r\n    static sortBox; \r\n\tstatic isDefaultStyle = true;\r\n    static{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-index';\r\n\t\tthis.toolHandler.isInline = false;\r\n\r\n        this.sortBox = new SortBox();\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: 'Ξ',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'align'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else if(this.sortBox.sortBox.isConnected){\r\n\t\t\t\tthis.sortBox.close();\r\n\t\t\t}else{\r\n\t\t\t\tthis.sortBox.open();\r\n                super.processingElementPosition(this.sortBox.sortBox, this.toolHandler.toolButton);\r\n\t\t\t}\r\n\t\t}\r\n\r\n        this.sortBox.applyCallback = (event) => {\r\n\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active'\r\n\t\t\tthis.sortBox.close();\r\n\t\t}\r\n\r\n        document.addEventListener(\"scroll\", () => {\r\n\t\t\tif(this.sortBox.sortBox.isConnected){\r\n\t\t\t\tthis.toolHandler.processingPalettePosition(this.sortBox.sortBox);\r\n\t\t\t}\r\n\t\t});\r\n        window.addEventListener('resize', (event) => {\r\n            if(this.sortBox.sortBox.isConnected){\r\n                this.sortBox.open();\r\n                super.processingElementPosition(this.sortBox.sortBox, this.toolHandler.toolButton);\r\n            }\r\n\t\t})\r\n\r\n\t\tsuper.outClickElementListener(this.sortBox.sortBox, ({oldEvent, newEvent, isMouseOut})=>{\r\n\t\t\tif(isMouseOut && this.sortBox.sortBox.isConnected && ! super.isMouseInnerElement(this.toolHandler.toolButton)){\r\n\t\t\t\tthis.sortBox.close();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n    static createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\r\n            .${this.toolHandler.defaultClass} {\r\n                display: block;\r\n            }\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n    static get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Sort, dataset, {deleteOption : FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE});\r\n\r\n\t\tif( ! dataset && Object.entries(this.dataset).length == 0){\r\n            this.dataset.text_align = Sort.sortBox.selectedSort?.textContent;\r\n        }\r\n        this.style.textAlign = this.dataset.text_align;\r\n\r\n\t\t/*\r\n\t\tsuper.connectedAfterOnlyOneCallback = () => {\r\n\t\t\tthis.dataset.index = Sort.toolHandler.connectedFriends.length;\r\n\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tthis.parentEditor.createLine();\r\n\t\t\t}else{\r\n\t\t\t\tnextLine.line.lookAtMe();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsuper.disconnectedChildAfterCallback = (removedNodes) => {\r\n\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tthis.parentEditor.createLine();\r\n\t\t\t}\r\n        }\r\n\t\t*/\r\n\t}\r\n\r\n}","export default class FontSizeBox {\r\n    \r\n    #style = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-font-size-box'\r\n\t});\r\n\r\n    #fontSizeBoxVw = 30;\r\n\r\n    #fontSizeBox = Object.assign(document.createElement('div'), {\r\n        className: 'font-size-wrap',\r\n    })\r\n    #fontSizeBoxContainer = Object.assign(document.createElement('ul'), {\r\n        className: 'font-size-container'\r\n    })\r\n    \r\n    #searchInputText = Object.assign(document.createElement('input'), {\r\n        autocomplete: 'off',\r\n        placeholder: 'search your font size',\r\n        type: 'number',\r\n        name: 'font-size-search',\r\n        className: 'font-size-search',\r\n        oninput: (event) => this.#searchInputTextEvent(event),\r\n        onkeyup: (event) => {\r\n            if(event.key == 'Enter' && this.#searchInputText.value != ''){\r\n                let item = this.#fontSizeBoxContainer.querySelector(`[data-size=\"${this.#searchInputText.value}\"]`);\r\n                this.#apply(item, event);\r\n            }\r\n        },\r\n    })\r\n\r\n    #selectedFont;\r\n\r\n    #defaultSampleText = '가나 다라 ab cd'\r\n    #sampleText = this.#defaultSampleText;\r\n\r\n    #applyCallback = () => {}\r\n\r\n    #lastSelectionRange;\r\n\r\n    #fontSizeObject;\r\n\r\n    constructor(fontSizeObject){\r\n        this.#fontSizeObject = fontSizeObject\r\n        let style = document.querySelector(`#${this.#style.id}`);\r\n        if(! style){\r\n            document.head.append(this.createStyle());\r\n        }else{\r\n            this.#style = style;\r\n        }\r\n\r\n        \r\n        let searchWrap = Object.assign(document.createElement('div'),{\r\n            className: 'font-size-search-wrap'\r\n        });\r\n        searchWrap.append(this.#searchInputText);\r\n        \r\n        this.#fontSizeBox.append(searchWrap, this.#fontSizeBoxContainer);\r\n        \r\n        this.#fontSizeBox.append(this.#fontSizeBoxContainer);\r\n\r\n    }\r\n\r\n    #searchInputTextEvent(event){\r\n        let number = Number(this.#searchInputText.value);\r\n        if( ! this.#searchInputText.value || this.#searchInputText.value == '') {     \r\n            this.#createFontElementList(this.#sampleText).then(fontElementList => {\r\n                this.#fontSizeBoxContainer.replaceChildren(...fontElementList);\r\n            });\r\n            return;\r\n        }else if(isNaN(number) || this.#fontSizeObject.min > number || this.#fontSizeObject.max < number){\r\n            this.#fontSizeBoxContainer.replaceChildren();\r\n            return;\r\n        }\r\n\r\n        let li = Object.assign(document.createElement('li'),{\r\n            className: 'font-size-item',\r\n        });\r\n        if(this.#sampleText.nodeType && this.#sampleText.nodeType == Node.ELEMENT_NODE){\r\n            li.innerHTML = this.#sampleText.innerHTML;\r\n        }else{\r\n            li.textContent = this.#sampleText;\r\n        }\r\n        li.style.fontSize = number + this.#fontSizeObject.unit;\r\n        li.dataset.size = number;\r\n        this.#addFontItemEvent(li);\r\n        this.#fontSizeBoxContainer.replaceChildren(li);\r\n        this.#searchInputText.focus();\r\n    }\r\n\r\n    #addFontItemEvent(item){\r\n        return new Promise(res=>{\r\n            item.onclick = (event) => this.#apply(item, event);\r\n            res(item);\r\n        });\r\n    }\r\n\r\n    #apply(item, event){\r\n        this.#selectedFont = item;\r\n        if(this.#lastSelectionRange){\r\n            let selection = window.getSelection();\r\n            selection.removeAllRanges();\r\n            selection.addRange(this.#lastSelectionRange);\r\n        }\r\n        this.applyCallback(event);\r\n    }\r\n\r\n    #createFontElementList(sampleText){\r\n        return new Promise(resolve=> {\r\n            let list = [];\r\n            let fixedLength = String(this.#fontSizeObject.weight).replace('.', '').length;\r\n            for(let i = this.#fontSizeObject.min, len = this.#fontSizeObject.max + this.#fontSizeObject.weight ; \r\n                i < len ;\r\n                i = parseFloat( (i + this.#fontSizeObject.weight).toFixed(fixedLength) )\r\n            ){\r\n                console.log(i);\r\n                let li = Object.assign(document.createElement('li'),{\r\n                    className: 'font-size-item',\r\n                });\r\n                if(sampleText.nodeType && sampleText.nodeType == Node.ELEMENT_NODE){\r\n                    li.innerHTML = sampleText.innerHTML;\r\n                }else{\r\n                    li.textContent = sampleText;\r\n                }\r\n                li.style.fontSize = i + this.#fontSizeObject.unit;\r\n                this.#addFontItemEvent(li);\r\n                list.push(li);\r\n            }\r\n            resolve(list);\r\n        })\r\n    }\r\n\r\n    async open(){\r\n        this.#searchInputText.step = this.#fontSizeObject.weight;\r\n        this.#searchInputText.min = this.#fontSizeObject.min;\r\n        this.#searchInputText.max = this.#fontSizeObject.max;\r\n        \r\n        let selection = window.getSelection();\r\n        if(selection.rangeCount != 0 && selection.isCollapsed == false){\r\n            let range = selection.getRangeAt(0);\r\n            this.#lastSelectionRange = range.cloneRange();\r\n            let aticle = document.createElement('aticle');\r\n            let rangeCloneContent = range.cloneContents();\r\n            aticle.append(rangeCloneContent);\r\n            this.#sampleText = aticle;\r\n        }\r\n        this.#sampleText = this.#sampleText == '' ? this.#defaultSampleText : this.#sampleText;\r\n    \r\n        document.body.append(this.#fontSizeBox);\r\n\r\n        return await this.#createFontElementList(this.#sampleText).then(fontElementList => {\r\n            this.#fontSizeBoxContainer.replaceChildren(...fontElementList);\r\n            return this.#fontSizeBoxContainer;\r\n        });\r\n    }\r\n\r\n    close(){\r\n        this.#fontSizeBox.remove();\r\n    }\r\n\r\n    set applyCallback(applyCallback){\r\n        this.#applyCallback = applyCallback;\r\n    }\r\n\r\n    get applyCallback(){\r\n        return this.#applyCallback;\r\n    }\r\n\r\n    get fontSizeBox(){\r\n        return this.#fontSizeBox;\r\n    }\r\n\r\n    get selectedFont(){\r\n        return this.#selectedFont;\r\n    }\r\n\r\n\tget style(){\r\n\t\treturn this.#style;\r\n\t}\r\n\r\n\tset style(style){\r\n        this.#style.textContent = style;\r\n    }\r\n\r\n\tset insertStyle(style){\r\n\t\tthis.#style.sheet.insertRule(style);\r\n\t}\r\n\r\n\r\n    createStyle(){\r\n        this.#style.textContent = `\r\n            .font-size-wrap{\r\n                background: #000000bf;\r\n                position: fixed;\r\n\t\t\t\tpadding: 0.9%;\r\n\t\t\t\twidth: ${this.#fontSizeBoxVw}vw;\r\n\t\t\t\theight: 25vh;\r\n\t\t\t\tcolor: white;\r\n                min-width: 200px;\r\n                overflow-y: auto;\r\n                -webkit-user-select: none;\r\n                -moz-user-select: none;\r\n                -ms-user-select: none;\r\n                user-select: none;\r\n                overflow-x: hidden;\r\n                z-index: 999;\r\n            }\r\n\r\n            .font-size-wrap .font-size-search-wrap{\r\n                margin-bottom: 2%;\r\n                overflow-x: hidden;\r\n            }\r\n            .font-size-wrap .font-size-search-wrap [name=\"font-size-search\"]{\r\n                outline: none;\r\n                -moz-appearance: textfield;\r\n                width: 100%;\r\n                color: white;\r\n            }\r\n            .font-size-wrap .font-size-search-wrap [name=\"font-size-search\"]::-webkit-outer-spin-button,\r\n            .font-size-wrap .font-size-search-wrap [name=\"font-size-search\"]::-webkit-inner-spin-button{\r\n                -webkit-appearance: none;\r\n                margin: 0;\r\n            }\r\n\r\n            .font-size-wrap .font-size-container{\r\n                list-style-type: none;\r\n                padding: 0;\r\n                margin: 0;\r\n            }\r\n            .font-size-wrap .font-size-container .font-size-item{\r\n                margin-bottom: 1%;\r\n                transition: all 0.5s;\r\n                overflow-x: hidden;\r\n                white-space: nowrap;\r\n                text-overflow: ellipsis;\r\n            }\r\n            .font-size-wrap .font-size-container .font-size-item:hover{\r\n                background-color: #666666;\r\n                cursor: pointer;\r\n                background-color: #666666;\r\n                padding: 2px 0 3px 0;\r\n            }\r\n\r\n        `\r\n        return this.#style;\r\n    }\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport FontSizeBox from \"../component/FontSizeBox\";\r\n\r\nexport default class FontSize extends FreedomInterface {\r\n    static toolHandler = new ToolHandler(this);\r\n\r\n    static #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-font-size-style'\r\n\t});\r\n\r\n    static fontSizeBox;\r\n\r\n\tstatic unit = 'px';\r\n\r\n\tstatic min = 1;\r\n\r\n\tstatic max = 50;\r\n\r\n\tstatic weight = 1;\r\n\tstatic isDefaultStyle = true;\r\n    static{\r\n        \r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-font-size';\r\n\t\t\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: '↑↓',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Font Size'\r\n        });\r\n\r\n\t\tthis.fontSizeBox = new FontSizeBox(this);\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else if(this.fontSizeBox.fontSizeBox.isConnected){\r\n\t\t\t\tthis.fontSizeBox.close();\r\n\t\t\t}else{\r\n\t\t\t\tthis.fontSizeBox.open().then(fontSizeBoxContainer=>{\r\n\t\t\t\t    super.processingElementPosition(this.fontSizeBox.fontSizeBox, this.toolHandler.toolButton);\r\n                });\r\n\t\t\t}\r\n\t\t}\r\n\r\n        this.fontSizeBox.applyCallback = (event) => {\r\n\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active'\r\n\t\t\tthis.fontSizeBox.close();\r\n\t\t}\r\n\r\n        document.addEventListener(\"scroll\", () => {\r\n\t\t\tif(this.fontSizeBox.fontSizeBox.isConnected){\r\n\t\t\t\tsuper.processingElementPosition(this.fontSizeBox.fontSizeBox, this.toolHandler.toolButton);\r\n\t\t\t}\r\n\t\t});\r\n        window.addEventListener('resize', (event) => {\r\n            if(this.fontSizeBox.fontSizeBox.isConnected){\r\n                this.fontSizeBox.open().then(fontSizeBoxContainer=>{\r\n\t\t\t\t\tsuper.processingElementPosition(this.fontSizeBox.fontSizeBox, this.toolHandler.toolButton);\r\n                });\r\n            }\r\n\t\t})\r\n\r\n\t\tsuper.outClickElementListener(this.fontSizeBox.fontSizeBox, ({oldEvent, newEvent, isMouseOut})=>{\r\n\t\t\tif(isMouseOut && this.fontSizeBox.fontSizeBox.isConnected && ! super.isMouseInnerElement(this.toolHandler.toolButton)){\r\n\t\t\t\tthis.fontSizeBox.close();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n    static createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(FontSize, dataset);\r\n\t\tif( ! dataset && Object.keys(this.dataset).length == 0){\r\n            this.dataset.font_size = FontSize.fontSizeBox.selectedFont?.style.fontSize;\r\n        }\r\n        this.style.fontSize = this.dataset.font_size\r\n    }\r\n\t\r\n}\r\n","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nexport default class Italic extends FreedomInterface {\r\n\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-italic-style'\r\n\t});\r\n\tstatic isDefaultStyle = true;\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-italic';\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: 'I',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Italic'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else{\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-style: italic;\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\r\n\t\t\t.${this.toolHandler.defaultClass} {\r\n\t\t\t\tfont-style: italic;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\t\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Italic, dataset);\r\n\t}\r\n\r\n\t\r\n}\r\n","\r\nexport default class ImageBox {\r\n    \r\n    #style = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-image-box'\r\n\t});\r\n\r\n    #imageBox = Object.assign(document.createElement('div'), {\r\n        className: 'image-box-wrap',\r\n        \r\n        innerHTML:`\r\n            <div class=\"image-resize-container\">\r\n                <div>\r\n                    <label class=\"image-box-resize-label\" for=\"image-box-resize-width\">width </label>\r\n                    <input list=\"image-box-resize-datalist\" class=\"image-box-resize-input\" id=\"image-box-resize-width\" type=\"number\" autocomplete=\"off\"/>\r\n                    <div>\r\n                        <label class=\"image-box-resize-label-error-message\" for=\"image-box-resize-width\"></label>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <label class=\"image-box-resize-label\" for=\"image-box-resize-height\">height(auto) </label>\r\n                    <input list=\"image-box-resize-datalist\" class=\"image-box-resize-input\" id=\"image-box-resize-height\" type=\"number\" autocomplete=\"off\" disabled/>\r\n                </div>\r\n            </div>\r\n            <div class=\"image-key-description-container\" style=\"display:none;\">\r\n                <kbd>Ctrl</kbd><kbd>Wheel</kbd>OR<kbd>Shift</kbd><kbd>Wheel</kbd>\r\n            </div>\r\n            <div class=\"image-button-container\">\r\n                <a href=\"javascript:void(0);\" class=\"download\" download>\r\n                    <svg style=\"zoom:125%;\" class=\"download-css-gg-push-down\" width=\"1rem\" height=\"1rem\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <path d=\"M11.0001 1H13.0001V15.4853L16.2428 12.2427L17.657 13.6569L12.0001 19.3137L6.34326 13.6569L7.75748 12.2427L11.0001 15.4853V1Z\" fill=\"#00000073\" />\r\n                        <path d=\"M18 20.2877H6V22.2877H18V20.2877Z\" fill=\"#00000073\" />\r\n                    </svg>\r\n                </a>\r\n                <a href=\"javascript:void(0);\" class=\"new-window\">\r\n                    <svg style=\"zoom: 150%;\" class=\"new-window-css-gg-expand\" width=\"1rem\" height=\"1rem\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <path d=\"M12.3062 16.5933L12.2713 18.593L5.2724 18.4708L5.39457 11.4719L7.39426 11.5068L7.33168 15.092L15.2262 7.46833L11.6938 7.40668L11.7287 5.40698L18.7277 5.52915L18.6055 12.5281L16.6058 12.4932L16.6693 8.85507L8.72095 16.5307L12.3062 16.5933Z\" fill=\"#00000073\" />\r\n                    </svg>\r\n                </a>\r\n                <span class=\"image-editor\">\r\n                    <svg class=\"image-editor-css-gg-pen\" width=\"1rem\" height=\"1rem\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M21.2635 2.29289C20.873 1.90237 20.2398 1.90237 19.8493 2.29289L18.9769 3.16525C17.8618 2.63254 16.4857 2.82801 15.5621 3.75165L4.95549 14.3582L10.6123 20.0151L21.2189 9.4085C22.1426 8.48486 22.338 7.1088 21.8053 5.99367L22.6777 5.12132C23.0682 4.7308 23.0682 4.09763 22.6777 3.70711L21.2635 2.29289ZM16.9955 10.8035L10.6123 17.1867L7.78392 14.3582L14.1671 7.9751L16.9955 10.8035ZM18.8138 8.98525L19.8047 7.99429C20.1953 7.60376 20.1953 6.9706 19.8047 6.58007L18.3905 5.16586C18 4.77534 17.3668 4.77534 16.9763 5.16586L15.9853 6.15683L18.8138 8.98525Z\" fill=\"#00000073\" />\r\n                        <path d=\"M2 22.9502L4.12171 15.1717L9.77817 20.8289L2 22.9502Z\" fill=\"#00000073\" />\r\n                    </svg>\r\n                </span>\r\n            </div>\r\n        `\r\n        /* 리사이즈 있는 버전 주석처리 20230821\r\n        innerHTML: `\r\n            <div class=\"image-resize-container\">\r\n                <div>\r\n                    <label class=\"image-box-resize-label\" for=\"image-box-resize-width\">width : </label>\r\n                    <input list=\"image-box-resize-datalist\" class=\"image-box-resize-input\" id=\"image-box-resize-width\" type=\"number\" autocomplete=\"off\"/>\r\n                </div>\r\n                <div>\r\n                    <label class=\"image-box-resize-label\" for=\"image-box-resize-height\">height(auto) : </label>\r\n                    <input list=\"image-box-resize-datalist\" class=\"image-box-resize-input\" id=\"image-box-resize-height\" type=\"number\" autocomplete=\"off\" disabled/>\r\n                </div>\r\n            </div>\r\n            <div class=\"image-button-container\">\r\n                <a href=\"javascript:void(0);\" class=\"download-css-gg-push-down\" download></a>\r\n                <a href=\"javascript:void(0);\" class=\"new-window-css-gg-path-trim\"></a>\r\n            </div>\r\n        `\r\n        */\r\n    });\r\n\r\n    /*\r\n    #removeEventPromiseResolve;\r\n    #removeEventPromise = new Promise(resolve=>{\r\n\t\tthis.#removeEventPromiseResolve = resolve;\r\n\t});\r\n    */\r\n    #image;\r\n    #resizeRememberTarget;\r\n\r\n    constructor(){\r\n        let style = document.querySelector(`#${this.#style.id}`);\r\n        if(! style){\r\n            document.head.append(this.createStyle());\r\n        }else{\r\n            this.#style = style;\r\n        }\r\n\r\n        document.addEventListener('keydown',(event)=>{\r\n            if(this.#imageBox.hasAttribute('data-is_shft')){\r\n                return;\r\n            }\r\n            let {key} = event;\r\n            if(key === 'Shift'){\r\n                this.#imageBox.dataset.is_shft = '';\r\n            }\r\n        })\r\n\r\n        document.addEventListener('keyup', (event)=>{\r\n            if( ! this.#imageBox.hasAttribute('data-is_shft')){\r\n                return;\r\n            }    \r\n            let {key} = event;\r\n            if(key === 'Shift'){\r\n                this.#imageBox.removeAttribute('data-is_shft');\r\n            }\r\n        })\r\n        \r\n        this.#imageBox.addEventListener('wheel', (event) => {\r\n            if(this.#imageBox.hasAttribute('data-is_shft')){\r\n                return;\r\n            }\r\n            //event.preventDefault();\r\n            let {deltaY} = event;\r\n            \r\n            this.#imageBox.scrollTo(\r\n                this.#imageBox.scrollLeft + deltaY, undefined\r\n            );\r\n        }, {passive: true})\r\n        let [width, height] = this.#imageBox.querySelectorAll('#image-box-resize-width, #image-box-resize-height');\r\n        \r\n        window.addEventListener('keyup', (event) => {\r\n            if( ! this.image || ! this.resizeRememberTarget || ! width.hasAttribute('data-is_ctrl') || ! this.image.parentElement.matches(':hover')){//|| this.image.getRootNode()?.activeElement != width){\r\n                return;\r\n            }\r\n            width.removeAttribute('data-is_ctrl');\r\n        })\r\n\r\n        window.addEventListener('keydown', (event) => {\r\n            \r\n            let eventPath = event.composedPath()\r\n\r\n            if( ! this.image || ! this.resizeRememberTarget || eventPath[0] == width || ! this.image.parentElement.matches(':hover')){//|| this.image.getRootNode()?.activeElement != width){\r\n                return;\r\n            }\r\n            if(event.ctrlKey){\r\n                width.dataset.is_ctrl = '';\r\n            }else{\r\n                width.removeAttribute('data-is_ctrl');\r\n            }\r\n        })\r\n        \r\n        /**\r\n         * @see https://www.chromestatus.com/feature/6662647093133312\r\n         */\r\n        window.addEventListener('wheel', (event) => {\r\n            \r\n            if( ! this.image || ! this.resizeRememberTarget || ! this.image.parentElement.hasAttribute('data-is_resize_click') || event.composedPath()[0] == width || ! this.image.parentElement.matches(':hover')){// || this.image.getRootNode()?.activeElement != width){\r\n                return;\r\n            }\r\n            if(width.hasAttribute('data-is_ctrl')){\r\n                width.value = Number(width.value) + (event.deltaY * -1)\r\n            }else{\r\n                width.value = Number(width.value) + ((event.deltaY * -1) / 100)\r\n            }\r\n            this.oninputEvent(this.image, width, width, height, this.resizeRememberTarget);\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLImageElement} image \r\n     */\r\n    addImageHoverEvent(image, resizeRememberTarget){\r\n        //image.parentElement.onmouseover = () => {\r\n        let keyDescription = this.#imageBox.querySelector('.image-key-description-container')   \r\n        image.parentElement.onmouseenter = () => {\r\n            if(! image.src || image.src == '' || image.hasAttribute('data-error')){\r\n                return;\r\n            }\r\n             let root = image.getRootNode();\r\n            if(root != document){\r\n                root.append(this.#style);\r\n            }else{\r\n                document.head.append(this.#style);\r\n            }\r\n\r\n            if(image.parentElement && (image.parentElement !== this.#imageBox.parentElement || ! this.#imageBox.classList.contains('start'))){\r\n                image.parentElement.append(this.#imageBox);\r\n\r\n                this.#addRresizeEvent(image, resizeRememberTarget)\r\n                this.#addButtonIconEvent(image)\r\n                let appendAwait = setInterval(()=>{\r\n                    if(this.#imageBox.isConnected && image.complete && image.parentElement === this.#imageBox.parentElement && ! this.#imageBox.classList.contains('start')){\r\n                        this.#imageBox.classList.add('start');\r\n                        this.image = image;\r\n                        this.resizeRememberTarget = resizeRememberTarget;\r\n                        image.parentElement.onclick = (event) => {\r\n                            if(! image.src || image.src == '' || event.composedPath()[0] != image || image.hasAttribute('data-error')){\r\n                                return;\r\n                            }\r\n                            this.#imageBox.classList.add('start');\r\n                            image.parentElement.toggleAttribute('data-is_resize_click');\r\n                            this.falsh(image.parentElement);\r\n                            if(image.parentElement.hasAttribute('data-is_resize_click')){\r\n                                keyDescription.style.display = '';\r\n                            }else {\r\n                                keyDescription.style.display = 'none';\r\n                            }\r\n                        }\r\n                        clearInterval(appendAwait);\r\n                    }\r\n                }, 50)\r\n            }\r\n        }\r\n        image.parentElement.onmouseleave = () => {\r\n            this.#imageBox.classList.remove('start');\r\n            if(image.parentElement.hasAttribute('data-is_resize_click')){\r\n                keyDescription.style.display = 'none';\r\n                this.falsh(image.parentElement);\r\n            }\r\n            image.parentElement.removeAttribute('data-is_resize_click');\r\n            /*if(this.#imageBox.isConnected && image.parentElement === this.#imageBox.parentElement){\r\n                \r\n                this.#imageBox.classList.remove('start');\r\n                this.#imageBox.ontransitionend = () => {\r\n                    if(this.#imageBox.isConnected){\r\n                        this.#imageBox.remove();\r\n                    }\r\n                }\r\n                \r\n            }*/\r\n        }\r\n    }\r\n\r\n    falsh(target){\r\n        return new Promise(resolve => {\r\n            let flash = document.createElement('div');\r\n            Object.assign(flash.style, {\r\n                position: 'absolute',top: '0px',left: '0px',\r\n                width: '100%',height: '100%', background: 'rgba(255, 255, 255, 0.4)',\r\n                transition: 'opacity 0.2s ease 0s', opacity: 0\r\n            })\r\n            target.append(flash);\r\n            let flashAwait = setInterval(()=>{\r\n                if( ! flash.isConnected){\r\n                    return; \r\n                }\r\n                clearInterval(flashAwait);\r\n                flash.style.opacity = 1;\r\n                flash.ontransitionend = () => {\r\n                    flash.style.opacity = 0;\r\n                    flash.ontransitionend = () => {\r\n                        flash.remove();\r\n                        resolve();\r\n                    }\r\n                }\r\n            }, 50)\r\n        });\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLImageElement} image \r\n     */\r\n    //리사이즈 있는 버전 주석 처리 20230821\r\n    #addRresizeEvent(image, resizeRememberTarget){\r\n        return new Promise(resolve => {\r\n            let [width, height] = this.#imageBox.querySelectorAll('#image-box-resize-width, #image-box-resize-height');\r\n            width.value = image.width, height.value = image.height;\r\n            \r\n            width.labels[0].textContent = 'width : ';\r\n            width.labels[1].textContent = '';\r\n            \r\n            this.prevValue = undefined;\r\n\r\n            width.oninput = (event) => this.oninputEvent(image, event.target, width, height, resizeRememberTarget);\r\n            width.onkeydown = (event) => {\r\n                if(event.ctrlKey){\r\n                    width.dataset.is_ctrl = '';\r\n                }else{\r\n                    width.removeAttribute('data-is_ctrl');\r\n                }\r\n            }\r\n            width.onkeyup = (event) => {\r\n                width.removeAttribute('data-is_ctrl');\r\n            }\r\n            width.onblur = () => {\r\n                width.removeAttribute('data-is_ctrl');\r\n            }\r\n            width.onwheel = (event) => {\r\n                event.preventDefault();\r\n                if(width.hasAttribute('data-is_ctrl')){\r\n                    width.value = Number(width.value) + (event.deltaY * -1)\r\n                }else{\r\n                    width.value = Number(width.value) + ((event.deltaY * -1) / 100)\r\n                }\r\n                this.oninputEvent(image, event.target, width, height, resizeRememberTarget);\r\n            }\r\n            //height.oninput = (event) => oninputEvent(event);\r\n            resolve({width, height});\r\n        });\r\n    }\r\n    oninputEvent(image, target, width, height, resizeRememberTarget) {\r\n        if(isNaN(Number(target.value))){\r\n            target.value = target.value.replace(/\\D/g, '');\r\n            return;\r\n        }else if(Number(target.value) < 50){\r\n            width.labels[1].textContent = '(min 50)';\r\n            target.value = 50;\r\n        }else{\r\n            width.labels[1].textContent = '';\r\n        }\r\n        let sizeName = target.id.includes('width') ? 'width': 'height';\r\n        image[sizeName] = target.value;\r\n\r\n        let imageRect = image.getBoundingClientRect();\r\n\r\n        //width.value = image.width, height.value = image.height;\r\n        if(this.prevValue && parseInt(this.prevValue) == parseInt(imageRect.width)){\r\n            width.value = parseInt(this.prevValue);\r\n            width.labels[1].textContent = `(max ${parseInt(this.prevValue)}) : `\r\n        }\r\n        this.prevValue = imageRect.width;\r\n        resizeRememberTarget.dataset.width = width.value;\r\n    }\r\n    #addButtonIconEvent(image){\r\n        return new Promise(resolve => {\r\n            let [download, newWindow] = [...this.#imageBox.querySelectorAll('.download-css-gg-push-down, .new-window-css-gg-expand')]\r\n                .map(e=>e.parentElement)\r\n            download.href = image.src, newWindow.href = image.src\r\n            download.download = image.dataset.image_name;\r\n            newWindow.target = '_blank';\r\n            resolve({download, newWindow});\r\n        })\r\n    }\r\n\r\n    get imageBox(){\r\n        return this.#imageBox;\r\n    }\r\n\r\n\tget style(){\r\n\t\treturn this.#style;\r\n\t}\r\n\r\n\tset style(style){\r\n        this.#style.textContent = style;\r\n    }\r\n\r\n\tset insertStyle(style){\r\n\t\tthis.#style.sheet.insertRule(style);\r\n\t}\r\n    \r\n    set image(image){\r\n        this.#image = image; \r\n    }\r\n\r\n    get image(){\r\n        return this.#image;\r\n    }\r\n    set resizeRememberTarget(resizeRememberTarget){\r\n        this.#resizeRememberTarget = resizeRememberTarget;\r\n    }\r\n    get resizeRememberTarget(){\r\n        return this.#resizeRememberTarget;\r\n    }\r\n\r\n    createStyle(){\r\n        this.#style.textContent = `\r\n            .image-box-wrap{\r\n                position: absolute;\r\n                display: flex;\r\n                justify-content: space-between;\r\n                width: 100%;\r\n                background: linear-gradient(to bottom, #ff8787 -73%, #ffffffcf 115%);\r\n                color: white;\r\n                top:-20%;\r\n                opacity: 0;\r\n                transition: all 1s;\r\n                white-space: nowrap;\r\n                overflow-y: clip;\r\n                overflow-x: auto;\r\n            }\r\n            .image-box-wrap::-webkit-scrollbar{\r\n                display: none;\r\n            }\r\n            .image-box-wrap:hover::-webkit-scrollbar{\r\n                display: initial;\r\n                width: 7px;\r\n                height: 7px;\r\n            }\r\n            .image-box-wrap:hover::-webkit-scrollbar-track{\r\n                background: #00000040;\r\n                border-radius: 100px;\r\n                box-shadow: inset 0 0 5px #000000fc;\r\n            }\r\n            .image-box-wrap:hover::-webkit-scrollbar-thumb {\r\n                background: #0c0c0c38;\r\n                border-radius: 100px;\r\n                box-shadow: inset 0 0 5px #000000;\r\n            }\r\n            .image-box-wrap:hover::-webkit-scrollbar-thumb:hover {\r\n                /*background: #44070757;*/\r\n                background: #34000075; \r\n            }\r\n            .image-box-wrap.start{\r\n                top: 0;\r\n                opacity: 1;\r\n                transition: all 0.5s;\r\n            }\r\n            .image-box-wrap .image-button-container,\r\n            .image-box-wrap .image-resize-container, \r\n            .image-box-wrap .image-key-description-container{\r\n                display: flex;\r\n                gap: 1.5vw;\r\n                padding: 1.7%;\r\n                align-items: center;\r\n            }\r\n            .image-box-wrap .image-resize-container .image-box-resize-label{\r\n                background: linear-gradient(to right, #e50bff, #004eff);\r\n                -webkit-background-clip: text;\r\n                -webkit-text-fill-color: transparent;\r\n            }\r\n            .image-box-wrap .image-resize-container .image-box-resize-input{\r\n                outline: none;\r\n                border: none;\r\n                background-image: linear-gradient(#fff1f1d4, #ffffffeb), linear-gradient(to right, #a189890d 0%,  #ed89b275 100%);\r\n                background-origin: border-box;\r\n                background-clip: content-box, border-box;\r\n                background-color: #00000000; \r\n                width: 3.2rem;\r\n                height: 100%;\r\n                color: #ffb6b6;\r\n                font-size: 0.9rem;\r\n                text-align: center;\r\n            }\r\n            .image-box-wrap .image-button-container .new-window,\r\n            .image-box-wrap .image-button-container .download,\r\n            .image-box-wrap .image-button-container .image-editor{\r\n                display: flex;\r\n                align-items: center;\r\n                border: none;\r\n                background:none;\r\n                position:relative;\r\n                cursor: pointer;\r\n            }\r\n\r\n            .image-box-wrap kbd {\r\n                background-color: #eee;\r\n                border-radius: 3px;\r\n                border: 1px solid #b4b4b4;\r\n                box-shadow:\r\n                0 1px 1px rgba(0, 0, 0, 0.2),\r\n                0 2px 0 0 rgba(255, 255, 255, 0.7) inset;\r\n                color: #333;\r\n                display: inline-block;\r\n                font-size: 0.85em;\r\n                font-weight: 700;\r\n                line-height: 1;\r\n                padding: 2px 4px;\r\n                white-space: nowrap;\r\n                height: fit-content;\r\n            }\r\n        `\r\n        return this.#style;\r\n    }\r\n}","\r\nimport FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport ImageBox from \"../component/ImageBox\"\r\nexport default class Image extends FreedomInterface {\r\n\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n    static imageBox = new ImageBox();\r\n\r\n    static customImageCallback; \r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-image-style'\r\n\t});\r\n\r\n    static slotName = 'free-will-editor-image-description-slot';\r\n\r\n    static #selectedFile = Object.assign(document.createElement('input'), {\r\n        type: 'file',\r\n        accept: 'image/*'\r\n    });\r\n\r\n    static get selectedFile(){\r\n        return this.#selectedFile;\r\n    }\r\n    static isDefaultStyle = true;\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-image';\r\n        //this.toolHandler.isInline = false;\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: '',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n            innerHTML: `\r\n            <svg class=\"${this.#defaultStyle.id} css-gg-image-icon\"\r\n                width=\"0.9rem\"\r\n                height=\"0.9rem\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                >\r\n                <path\r\n                    fill-rule=\"evenodd\"\r\n                    clip-rule=\"evenodd\"\r\n                    d=\"M7 7C5.34315 7 4 8.34315 4 10C4 11.6569 5.34315 13 7 13C8.65685 13 10 11.6569 10 10C10 8.34315 8.65685 7 7 7ZM6 10C6 9.44772 6.44772 9 7 9C7.55228 9 8 9.44772 8 10C8 10.5523 7.55228 11 7 11C6.44772 11 6 10.5523 6 10Z\"\r\n                    fill=\"currentColor\"\r\n                />\r\n                <path\r\n                    fill-rule=\"evenodd\"\r\n                    clip-rule=\"evenodd\"\r\n                    d=\"M3 3C1.34315 3 0 4.34315 0 6V18C0 19.6569 1.34315 21 3 21H21C22.6569 21 24 19.6569 24 18V6C24 4.34315 22.6569 3 21 3H3ZM21 5H3C2.44772 5 2 5.44772 2 6V18C2 18.5523 2.44772 19 3 19H7.31374L14.1924 12.1214C15.364 10.9498 17.2635 10.9498 18.435 12.1214L22 15.6863V6C22 5.44772 21.5523 5 21 5ZM21 19H10.1422L15.6066 13.5356C15.9971 13.145 16.6303 13.145 17.0208 13.5356L21.907 18.4217C21.7479 18.7633 21.4016 19 21 19Z\"\r\n                    fill=\"currentColor\"\r\n                />\r\n            </svg>\r\n            `,\r\n            title: 'Image'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else{\r\n                this.#selectedFile.click();\r\n                this.#selectedFile.onchange = ()=> {\r\n                    //let url = URL.createObjectURL(this.#selectedFile.files[0])\r\n                    this.toolHandler.toolButton.dataset.tool_status = 'active';\r\n                }\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n            .${this.toolHandler.defaultClass} {\r\n                position: relative;\r\n            }\r\n            .${this.#defaultStyle.id}.css-gg-image-icon {\r\n                zoom:120%;\r\n            }\r\n            .${this.#defaultStyle.id}.image-description{            \r\n                cursor: pointer;\r\n                display: inline-flex;\r\n                align-items: center;\r\n            }\r\n\r\n            .${this.#defaultStyle.id}.image-description::after{\r\n                margin-left: 0.5em;\r\n                content: ' ['attr(data-file_name)'] 'attr(data-open_status);\r\n                font-size: small;\r\n                color: #bdbdbd;\r\n            }\r\n\r\n            .${this.#defaultStyle.id}.image-contanier{\r\n                width: fit-content;\r\n                transition: height 0.5s ease-in-out;\r\n                overflow: hidden;\r\n                position: relative;\r\n            }\r\n            .${this.#defaultStyle.id}.image-contanier img{\r\n                max-width: 100%;\r\n                height: auto;\r\n                aspect-ratio: attr(width) / attr(height);\r\n                image-rendering: auto;\r\n            }\r\n        ` \r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n    static get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n    #file;\r\n\r\n    imgLoadEndCallback = (event) => {};\r\n\r\n    image = document.createElement('img');\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Image, dataset, {deleteOption : FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE});\r\n        \r\n        if( ! dataset && Object.keys(this.dataset).length == 0){\r\n            this.#file = Image.selectedFile.cloneNode(true);\r\n            Image.selectedFile.files = new DataTransfer().files;\r\n            \r\n            this.dataset.url = URL.createObjectURL(this.#file.files[0]);\r\n            this.dataset.name = this.#file.files[0].name;\r\n            this.dataset.last_modified = this.#file.files[0].lastModified;\r\n            this.dataset.size = this.#file.files[0].size;\r\n            this.dataset.content_type = this.#file.files[0].type;\r\n\r\n            let url = URL.createObjectURL(this.#file.files[0], this.dataset.content_type);\r\n            this.dataset.url = url;\r\n            this.image.type = this.dataset.content_type;\r\n            this.image.src = this.dataset.url;\r\n            /*fetch(this.dataset.url).then(res=>res.blob()).then(blob => {\r\n                const reader = new FileReader();\r\n                reader.readAsDataURL(blob);\r\n                reader.onloadend = () => {\r\n                    this.dataset.base64 = reader.result;\r\n                }\r\n            })*/\r\n            \r\n        }else if(( ! this.dataset.url || this.dataset.url.startsWith('blob:file')) && this.dataset.base64){\r\n            fetch(this.dataset.base64)\r\n            .then(async res=>{\r\n                return res.blob().then(blob=>{\r\n                    let imgUrl = URL.createObjectURL(blob, res.headers.get('Content-Type'))\r\n                    this.dataset.url = imgUrl;\r\n                    this.image.src = this.dataset.url;\r\n                })\r\n            })\r\n        }else if(Image.customImageCallback && typeof Image.customImageCallback == 'function'){\r\n            Image.customImageCallback(this);\r\n        }else if(this.dataset.url){\r\n            this.image.src = this.dataset.url;\r\n        }\r\n\r\n        if(! this.dataset.name){\r\n            this.remove();\r\n            throw new Error(`this file is undefined ${this.dataset.name}`);\r\n        }\r\n        \r\n        this.attachShadow({ mode : 'open' });\r\n        this.shadowRoot.append(Image.defaultStyle.cloneNode(true));\r\n        \r\n        this.createDefaultContent().then(({wrap, description, slot, aticle})=>{\r\n            this.connectedChildAfterCallback = (addedList) => {\r\n                aticle.append(...addedList);\r\n            }\r\n        });\r\n        \r\n        this.disconnectedAfterCallback = () => {\r\n            if(this.dataset.url.startsWith('blob:file')){\r\n                setTimeout(() => {\r\n                    URL.revokeObjectURL(this.dataset.url);\r\n                }, 1000 * 60 * 2)\r\n            }\r\n        }\r\n\t}\r\n\r\n    createDefaultContent(){\r\n        return new Promise(resolve=>{\r\n            let wrap = Object.assign(document.createElement('div'),{\r\n\r\n            });\r\n            wrap.draggable = false\r\n\r\n            this.shadowRoot.append(wrap);\r\n\r\n            let imageContanier = Object.assign(document.createElement('div'),{\r\n                className: `${Image.defaultStyle.id} image-contanier`\r\n            });\r\n\r\n            /*let image = Object.assign(document.createElement('img'), {\r\n                //src :`https://developer.mozilla.org/pimg/aHR0cHM6Ly9zLnprY2RuLm5ldC9BZHZlcnRpc2Vycy9iMGQ2NDQyZTkyYWM0ZDlhYjkwODFlMDRiYjZiY2YwOS5wbmc%3D.PJLnFds93tY9Ie%2BJ%2BaukmmFGR%2FvKdGU54UJJ27KTYSw%3D`\r\n                //src: this.dataset.url\r\n                //src: imgUrl\r\n            });*/\r\n\r\n            //if(this.#selectedFile.files.length != 0){\r\n            this.image.dataset.image_name = this.dataset.name\r\n            //}\r\n\r\n            imageContanier.append(this.image);\r\n\r\n            this.image.onload = () => {\r\n                if(this.dataset.width){\r\n                    this.image.width = this.dataset.width;\r\n                }\r\n                /*let applyToolAfterSelection = window.getSelection(), range = applyToolAfterSelection.getRangeAt(0);\r\n                let scrollTarget;\r\n                if(range.endContainer.nodeType == Node.TEXT_NODE){\r\n                    scrollTarget = range.endContainer.parentElement\r\n                }else{\r\n                    scrollTarget = range.endContainer;\r\n                }\r\n                scrollTarget.scrollIntoView({ behavior: \"instant\", block: \"end\", inline: \"nearest\" });\r\n                */\r\n            //this.imgLoadEndCallback();\r\n                //imageContanier.style.height = window.getComputedStyle(image).height;\r\n            }\r\n            this.image.onerror = () => {\r\n                //imageContanier.style.height = window.getComputedStyle(image).height;\r\n                this.image.dataset.error = '';\r\n            }\r\n\r\n            let {description, slot, aticle} = this.createDescription(this.image, imageContanier);\r\n\r\n            this.connectedAfterOnlyOneCallback = () => {\r\n                if(this.childNodes.length != 0 && this.childNodes[0]?.tagName != 'BR'){\r\n                    aticle.append(...[...this.childNodes].filter(e=>e!=aticle));\r\n                }\r\n                wrap.replaceChildren(...[description,imageContanier].filter(e=>e != undefined));\r\n                \r\n                Image.imageBox.addImageHoverEvent(this.image, this);\r\n                if(this.nextSibling?.tagName == 'BR'){\r\n                    this.nextSibling.remove()\r\n                }\r\n\r\n                resolve({wrap, description, slot, aticle})\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLImageElement} image \r\n     * @param {HTMLDivElement} imageContanier \r\n     * @returns {HTMLDivElement}\r\n     */\r\n    createDescription(image, imageContanier){\r\n        let description = Object.assign(document.createElement('div'),{\r\n            className: `${Image.defaultStyle.id} image-description`\r\n        });\r\n\r\n        description.dataset.file_name = this.dataset.name\r\n        description.dataset.open_status = this.dataset.open_status || '▼'; // '▼';\r\n        imageContanier.style.height = this.dataset.height || 'auto'\r\n        \r\n        let {slot, aticle} = this.createSlot();\r\n        \r\n        description.append(slot)\r\n\r\n        description.onclick = (event) => {\r\n            if(description.dataset.open_status == '▼'){\r\n                description.dataset.open_status = '▶'\r\n                imageContanier.style.height = window.getComputedStyle(image).height;\r\n                setTimeout(()=>{\r\n                    imageContanier.style.height = '0px';\r\n                    this.dataset.height = '0px';\r\n                },100)\r\n\r\n            }else{\r\n                description.dataset.open_status = '▼';\r\n                setTimeout(()=>{\r\n                    imageContanier.style.height = window.getComputedStyle(image).height;\r\n                    this.dataset.height = 'auto'\r\n                },100)\r\n                \r\n                image.style.opacity = '';\r\n                image.style.visibility = '';\r\n            }\r\n            this.dataset.open_status = description.dataset.open_status;\r\n        }\r\n\r\n        imageContanier.ontransitionend = () => {\r\n            if(description.dataset.open_status == '▼'){\r\n                imageContanier.style.height = 'auto';\r\n            }else{\r\n                image.style.opacity = 0;\r\n                image.style.visibility = 'hidden';\r\n            }\r\n        }\r\n\r\n        return {description, slot, aticle};\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @returns {HTMLSlotElement}\r\n     */\r\n    createSlot(){\r\n        let aticle = document.createElement('div');\r\n        \r\n        aticle.contentEditable = 'false';\r\n        aticle.draggable = 'false'; \r\n\r\n        //if(this.childNodes.length != 0 && this.childNodes[0]?.tagName != 'BR'){\r\n            let randomId = Array.from(\r\n                window.crypto.getRandomValues(new Uint32Array(16)),\r\n                (e)=>e.toString(32).padStart(2, '0')\r\n            ).join('');\r\n            //aticle.append(...[...this.childNodes].map(e=>e.cloneNode(true)));\r\n            aticle.append(...this.childNodes);\r\n            aticle.slot = Image.slotName + '-' + randomId\r\n            this.append(aticle);\r\n            \r\n            let slot = Object.assign(document.createElement('slot'),{\r\n                name: Image.slotName + '-' + randomId\r\n            });\r\n            return {slot, aticle};\r\n        //}else{\r\n        //    return undefined\r\n        //}\r\n\r\n    }\r\n    /**\r\n     * @returns {HTMLInputElement}\r\n     */\r\n    get selectedFile(){\r\n        return this.#file\r\n    }\r\n}\r\n","import FreedomInterface from \"../module/FreedomInterface\"\r\n\r\nexport default class VideoBox {\r\n    \r\n    #style = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-video-box'\r\n\t});\r\n\r\n    #videoBox = Object.assign(document.createElement('div'), {\r\n        className: 'video-box-wrap',\r\n        \r\n        innerHTML:`\r\n            <div class=\"video-resize-container\">\r\n                <div>\r\n                    <label class=\"video-box-resize-label\" for=\"video-box-resize-width\">width : </label>\r\n                    <input list=\"video-box-resize-datalist\" class=\"video-box-resize-input\" id=\"video-box-resize-width\" type=\"number\" autocomplete=\"off\"/>\r\n                    <div>\r\n                        <label class=\"video-box-resize-label-error-message\" for=\"video-box-resize-width\"></label>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <label class=\"video-box-resize-label\" for=\"video-box-resize-height\">height(auto) : </label>\r\n                    <input list=\"video-box-resize-datalist\" class=\"video-box-resize-input\" id=\"video-box-resize-height\" type=\"number\" autocomplete=\"off\" disabled/>\r\n                </div>\r\n            </div>\r\n            <div class=\"video-key-description-container\" style=\"display:none;\">\r\n                <kbd>Ctrl</kbd><kbd>Wheel</kbd>OR<kbd>Shift</kbd><kbd>Wheel</kbd>\r\n            </div>\r\n            <div class=\"video-button-container\">\r\n                <a href=\"javascript:void(0);\" class=\"download\" download>\r\n                    <svg style=\"zoom:140%;\" class=\"download-css-gg-push-down\"\r\n                        width=\"1rem\"\r\n                        height=\"1rem\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                    >\r\n                        <path\r\n                        d=\"M11.0001 1H13.0001V15.4853L16.2428 12.2427L17.657 13.6569L12.0001 19.3137L6.34326 13.6569L7.75748 12.2427L11.0001 15.4853V1Z\"\r\n                        fill=\"#00000073\"\r\n                        />\r\n                        <path d=\"M18 20.2877H6V22.2877H18V20.2877Z\" fill=\"#00000073\" />\r\n                    </svg>\r\n                </a>\r\n                <a href=\"javascript:void(0);\" class=\"new-window\">\r\n                    <svg style=\"zoom: 150%;\" class=\"new-window-css-gg-expand\"\r\n                        width=\"1rem\"\r\n                        height=\"1rem\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                    >\r\n                        <path\r\n                        d=\"M12.3062 16.5933L12.2713 18.593L5.2724 18.4708L5.39457 11.4719L7.39426 11.5068L7.33168 15.092L15.2262 7.46833L11.6938 7.40668L11.7287 5.40698L18.7277 5.52915L18.6055 12.5281L16.6058 12.4932L16.6693 8.85507L8.72095 16.5307L12.3062 16.5933Z\"\r\n                        fill=\"#00000073\"\r\n                        />\r\n                    </svg>\r\n                </a>\r\n            </div>\r\n        `\r\n        /* 리사이즈 있는 버전 주석처리 20230821 <i class=\"download-css-gg-push-down\"></i>\r\n        innerHTML: `\r\n            <div class=\"video-resize-container\">\r\n                <div>\r\n                    <label class=\"video-box-resize-label\" for=\"video-box-resize-width\">width : </label>\r\n                    <input list=\"video-box-resize-datalist\" class=\"video-box-resize-input\" id=\"video-box-resize-width\" type=\"number\" autocomplete=\"off\"/>\r\n                </div>\r\n                <div>\r\n                    <label class=\"video-box-resize-label\" for=\"video-box-resize-height\">height(auto) : </label>\r\n                    <input list=\"video-box-resize-datalist\" class=\"video-box-resize-input\" id=\"video-box-resize-height\" type=\"number\" autocomplete=\"off\" disabled/>\r\n                </div>\r\n            </div>\r\n            <div class=\"video-button-container\">\r\n                <a href=\"javascript:void(0);\" class=\"download-css-gg-push-down\" download></a>\r\n                <a href=\"javascript:void(0);\" class=\"new-window-css-gg-path-trim\"></a>\r\n            </div>\r\n        `\r\n        */\r\n    });\r\n    /*\r\n    #removeEventPromiseResolve;\r\n    #removeEventPromise = new Promise(resolve=>{\r\n\t\tthis.#removeEventPromiseResolve = resolve;\r\n\t});\r\n    */\r\n    #video;\r\n    #resizeRememberTarget;\r\n\r\n    constructor(){\r\n        let style = document.querySelector(`#${this.#style.id}`);\r\n        if(! style){\r\n            document.head.append(this.createStyle());\r\n        }else{\r\n            this.#style = style;\r\n        }\r\n        document.addEventListener('keydown',(event)=>{\r\n            if(this.#videoBox.hasAttribute('data-is_shft')){\r\n                return;\r\n            }\r\n            let {key} = event;\r\n            if(key === 'Shift'){\r\n                this.#videoBox.dataset.is_shft = '';\r\n            }\r\n        })\r\n\r\n        document.addEventListener('keyup', (event)=>{\r\n            if( ! this.#videoBox.hasAttribute('data-is_shft')){\r\n                return;\r\n            }    \r\n            let {key} = event;\r\n            if(key === 'Shift'){\r\n                this.#videoBox.removeAttribute('data-is_shft');\r\n            }\r\n        })\r\n        \r\n        this.#videoBox.addEventListener('wheel', (event) => {\r\n            if(this.#videoBox.hasAttribute('data-is_shft')){\r\n                return;\r\n            }\r\n            //event.preventDefault();\r\n            let {deltaY} = event;\r\n            \r\n            this.#videoBox.scrollTo(\r\n                this.#videoBox.scrollLeft + deltaY, undefined\r\n            );\r\n        }, {passive: true});\r\n        let [width, height] = this.#videoBox.querySelectorAll('#video-box-resize-width, #video-box-resize-height');\r\n        \r\n        window.addEventListener('keyup', (event) => {\r\n            if( ! this.video || ! this.resizeRememberTarget || ! width.hasAttribute('data-is_ctrl') || ! this.video.parentElement.matches(':hover')){//|| this.video.getRootNode()?.activeElement != width){\r\n                return;\r\n            }\r\n            width.removeAttribute('data-is_ctrl');\r\n        })\r\n\r\n        window.addEventListener('keydown', (event) => {\r\n            \r\n            let eventPath = event.composedPath()\r\n\r\n            if( ! this.video || ! this.resizeRememberTarget || eventPath[0] == width || ! this.video.parentElement.matches(':hover')){//|| this.video.getRootNode()?.activeElement != width){\r\n                return;\r\n            }\r\n            if(event.ctrlKey){\r\n                width.dataset.is_ctrl = '';\r\n            }else{\r\n                width.removeAttribute('data-is_ctrl');\r\n            }\r\n        })\r\n        \r\n        /**\r\n         * @see https://www.chromestatus.com/feature/6662647093133312\r\n         */\r\n        window.addEventListener('wheel', (event) => {\r\n\r\n            if( ! this.video || ! this.resizeRememberTarget || ! this.video.parentElement.hasAttribute('data-is_resize_click') || event.composedPath()[0] == width || ! this.video.parentElement.matches(':hover')){// || this.video.getRootNode()?.activeElement != width){\r\n                return;\r\n            }\r\n            if(width.hasAttribute('data-is_ctrl')){\r\n                width.value = Number(width.value) + (event.deltaY * -1)\r\n            }else{\r\n                width.value = Number(width.value) + ((event.deltaY * -1) / 100)\r\n            }\r\n            this.oninputEvent(this.video, width, height, this.resizeRememberTarget);\r\n            \r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLVideoElement} video \r\n     */\r\n    addVideoHoverEvent(video, resizeRememberTarget){\r\n        //video.parentElement.onmouseover = () => {\r\n        let keyDescription = this.#videoBox.querySelector('.video-key-description-container')\r\n        video.parentElement.onmouseenter = () => {\r\n            if(! video.src || video.src == '' || video.hasAttribute('data-error')){\r\n                return;\r\n            }\r\n            let root = video.getRootNode();\r\n            if(root != document){\r\n                root.append(this.#style);\r\n            }else{\r\n                document.head.append(this.#style);\r\n            }\r\n\r\n            if(video.parentElement && (video.parentElement !== this.#videoBox.parentElement || ! this.#videoBox.classList.contains('start'))){\r\n                video.parentElement.append(this.#videoBox);\r\n\r\n                this.#addRresizeEvent(video, resizeRememberTarget)\r\n                this.#addButtonIconEvent(video)\r\n                let appendAwait = setInterval(()=>{\r\n                    if(this.#videoBox.isConnected && video.readyState == 4 && video.parentElement === this.#videoBox.parentElement && ! this.#videoBox.classList.contains('start')){\r\n                        this.#videoBox.classList.add('start');\r\n                        this.video = video;\r\n                        this.resizeRememberTarget = resizeRememberTarget;\r\n                        video.parentElement.onclick = (event) => {\r\n                            if(! video.src || video.src == '' || event.composedPath()[0] != video || video.hasAttribute('data-error')){\r\n                                return;\r\n                            }\r\n                            video.parentElement.toggleAttribute('data-is_resize_click');\r\n                            this.falsh(video.parentElement);\r\n                            if(video.parentElement.hasAttribute('data-is_resize_click')){\r\n                                keyDescription.style.display = '';\r\n                            }else {\r\n                                keyDescription.style.display = 'none';\r\n                            }\r\n                        }\r\n                        clearInterval(appendAwait);\r\n                    }\r\n                }, 50)\r\n            }\r\n        }\r\n        video.parentElement.onmouseleave = () => {\r\n            this.#videoBox.classList.remove('start');\r\n            if(video.parentElement.hasAttribute('data-is_resize_click')){\r\n                keyDescription.style.display = 'none';\r\n                this.falsh(video.parentElement);\r\n            }\r\n            video.parentElement.removeAttribute('data-is_resize_click');\r\n            /*if(this.#videoBox.isConnected && video.parentElement === this.#videoBox.parentElement){\r\n                \r\n                this.#videoBox.classList.remove('start');\r\n                this.#videoBox.ontransitionend = () => {\r\n                    if(this.#videoBox.isConnected){\r\n                        this.#videoBox.remove();\r\n                    }\r\n                }\r\n                \r\n            }*/\r\n        }\r\n    }\r\n\r\n    falsh(target){\r\n        return new Promise(resolve => {\r\n            let flash = document.createElement('div');\r\n            Object.assign(flash.style, {\r\n                position: 'absolute',top: '0px',left: '0px',\r\n                width: '100%',height: '100%', background: 'rgba(255, 255, 255, 0.4)',\r\n                transition: 'opacity 0.2s ease 0s', opacity: 0\r\n            })\r\n            target.append(flash);\r\n            let flashAwait = setInterval(()=>{\r\n                if( ! flash.isConnected){\r\n                    return; \r\n                }\r\n                clearInterval(flashAwait);\r\n                flash.style.opacity = 1;\r\n                flash.ontransitionend = () => {\r\n                    flash.style.opacity = 0;\r\n                    flash.ontransitionend = () => {\r\n                        flash.remove();\r\n                        resolve();\r\n                    }\r\n                }\r\n            }, 50)\r\n        });\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLVideoElement} video \r\n     */\r\n    //리사이즈 있는 버전 주석 처리 20230821\r\n    #addRresizeEvent(video, resizeRememberTarget){\r\n        return new Promise(resolve => {\r\n            let [width, height] = this.#videoBox.querySelectorAll('#video-box-resize-width, #video-box-resize-height');\r\n            let rect = video.getBoundingClientRect();\r\n            width.value = parseInt(rect.width), height.value = parseInt(rect.height);\r\n            \r\n            width.labels[0].textContent = 'width : ';\r\n            width.labels[1].textContent = '';\r\n\r\n            this.prevValue = undefined;\r\n\r\n            width.oninput = (event) => this.oninputEvent(video, width, height, resizeRememberTarget);\r\n            width.onkeydown = (event) => {\r\n                if(event.ctrlKey){\r\n                    width.dataset.is_ctrl = '';\r\n                }else{\r\n                    width.removeAttribute('data-is_ctrl');\r\n                }\r\n            }\r\n            width.onkeyup = (event) => {\r\n                width.removeAttribute('data-is_ctrl');\r\n            }\r\n            width.onblur = () => {\r\n                width.removeAttribute('data-is_ctrl');\r\n            }\r\n            width.onwheel = (event) => {\r\n                event.preventDefault();\r\n                if(width.hasAttribute('data-is_ctrl')){\r\n                    width.value = Number(width.value) + (event.deltaY * -1)\r\n                }else{\r\n                    width.value = Number(width.value) + ((event.deltaY * -1) / 100)\r\n                }\r\n\r\n                this.oninputEvent(video, width, height, resizeRememberTarget);\r\n            }\r\n            //height.oninput = (event) => oninputEvent(event);\r\n            resolve({width, height});\r\n        });\r\n    }\r\n    oninputEvent(video, width, height, resizeRememberTarget) {\r\n        if(isNaN(Number(width.value))){\r\n            width.value = width.value.replace(/\\D/g, '');\r\n            return;\r\n        }else if(Number(width.value) < 50){\r\n            width.labels[1].textContent = '(min 50)';\r\n            width.value = 50;\r\n        }else{\r\n            width.labels[1].textContent = '';\r\n        }\r\n        let sizeName = width.id.includes('width') ? 'width': 'height';\r\n        video[sizeName] = width.value;\r\n\r\n        let videoRect = video.getBoundingClientRect();\r\n\r\n        if(this.prevValue && parseInt(this.prevValue) == parseInt(videoRect.width)){\r\n            width.value = parseInt(this.prevValue);\r\n            width.labels[1].textContent = `(max ${parseInt(this.prevValue)}) : `\r\n        }\r\n        this.prevValue = videoRect.width\r\n\r\n        resizeRememberTarget.dataset.width = width.value;\r\n    }\r\n    #addButtonIconEvent(video){\r\n        return new Promise(resolve => {\r\n            let [download, newWindow] = [...this.#videoBox.querySelectorAll('.download-css-gg-push-down, .new-window-css-gg-expand')]\r\n                .map(e=>e.parentElement)\r\n            download.href = video.src, newWindow.href = video.src;\r\n            download.download = video.dataset.video_name;\r\n            newWindow.target = '_blank';\r\n            resolve({download, newWindow});\r\n        })\r\n    }\r\n\r\n    get videoBox(){\r\n        return this.#videoBox;\r\n    }\r\n\r\n\tget style(){\r\n\t\treturn this.#style;\r\n\t}\r\n\r\n\tset style(style){\r\n        this.#style.textContent = style;\r\n    }\r\n\r\n\tset insertStyle(style){\r\n\t\tthis.#style.sheet.insertRule(style);\r\n\t}\r\n    \r\n    set video(video){\r\n        this.#video = video; \r\n    }\r\n\r\n    get video(){\r\n        return this.#video;\r\n    }\r\n    set resizeRememberTarget(resizeRememberTarget){\r\n        this.#resizeRememberTarget = resizeRememberTarget;\r\n    }\r\n    get resizeRememberTarget(){\r\n        return this.#resizeRememberTarget;\r\n    }\r\n\r\n    createStyle(){\r\n        this.#style.textContent = `\r\n            .video-box-wrap{\r\n                position: absolute;\r\n                display: flex;\r\n                justify-content: space-between;\r\n                width: 100%;\r\n                background: linear-gradient(to bottom, #ff8787 -73%, #ffffffcf 115%);\r\n                color: white;\r\n                top:-20%;\r\n                opacity: 0;\r\n                transition: all 1s;\r\n                white-space: nowrap;\r\n                overflow-y: clip;\r\n                overflow-x: auto;\r\n            }\r\n            .video-box-wrap::-webkit-scrollbar{\r\n                display: none;\r\n            }\r\n            .video-box-wrap:hover::-webkit-scrollbar{\r\n                display: initial;\r\n                width: 7px;\r\n                height: 7px;\r\n            }\r\n            .video-box-wrap:hover::-webkit-scrollbar-track{\r\n                background: #00000040;\r\n                border-radius: 100px;\r\n                box-shadow: inset 0 0 5px #000000fc;\r\n            }\r\n            .video-box-wrap:hover::-webkit-scrollbar-thumb {\r\n                background: #0c0c0c38;\r\n                border-radius: 100px;\r\n                box-shadow: inset 0 0 5px #000000;\r\n            }\r\n            .video-box-wrap:hover::-webkit-scrollbar-thumb:hover {\r\n                /*background: #44070757;*/\r\n                background: #34000075; \r\n            }\r\n            .video-box-wrap.start{\r\n                top: 0;\r\n                opacity: 1;\r\n                transition: all 0.5s;\r\n            }\r\n            .video-box-wrap .video-button-container, \r\n            .video-box-wrap .video-resize-container,\r\n            .video-box-wrap .video-key-description-container{\r\n                display: flex;\r\n                gap: 1.5vw;\r\n                padding: 1.7%;\r\n                align-items: center;\r\n            }\r\n            .video-box-wrap .video-resize-container .video-box-resize-label{\r\n                background: linear-gradient(to right, #e50bff, #004eff);\r\n                -webkit-background-clip: text;\r\n                -webkit-text-fill-color: transparent;\r\n            }\r\n            .video-box-wrap .video-resize-container .video-box-resize-input{\r\n                outline: none;\r\n                border: none;\r\n                background-image: linear-gradient(#fff1f1d4, #ffffffeb), linear-gradient(to right, #a189890d 0%,  #ed89b275 100%);\r\n                background-origin: border-box;\r\n                background-clip: content-box, border-box;\r\n                background-color: #00000000; \r\n                width: 3.2rem;\r\n                height: 100%;\r\n                color: #ffb6b6;\r\n                font-size: 0.9rem;\r\n                text-align: center;\r\n            }\r\n            .video-box-wrap .video-button-container .new-window,\r\n            .video-box-wrap .video-button-container .download{\r\n                display: flex;\r\n                align-items: center;\r\n                border: none;\r\n                background:none;\r\n                position:relative;\r\n                cursor: pointer;\r\n            }\r\n\r\n            .video-box-wrap kbd {\r\n                background-color: #eee;\r\n                border-radius: 3px;\r\n                border: 1px solid #b4b4b4;\r\n                box-shadow:\r\n                0 1px 1px rgba(0, 0, 0, 0.2),\r\n                0 2px 0 0 rgba(255, 255, 255, 0.7) inset;\r\n                color: #333;\r\n                display: inline-block;\r\n                font-size: 0.85em;\r\n                font-weight: 700;\r\n                line-height: 1;\r\n                padding: 2px 4px;\r\n                white-space: nowrap;\r\n                height: fit-content;\r\n            }\r\n        `\r\n        return this.#style;\r\n    }\r\n\r\n}","\r\nimport FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport VideoBox from \"../component/VideoBox\"\r\nexport default class Video extends FreedomInterface {\r\n\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n    static videoBox = new VideoBox();\r\n\r\n    static customVideoCallback;\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-video-style'\r\n\t});\r\n\r\n    static descriptionName = 'free-will-editor-video-description-slot';\r\n\r\n    static #selectedFile = Object.assign(document.createElement('input'), {\r\n        type: 'file',\r\n        accept: 'video/*'\r\n    });\r\n\r\n    static get selectedFile(){\r\n        return this.#selectedFile;\r\n    }\r\n    static isDefaultStyle = true;\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-video';\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: '',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n            innerHTML: `\r\n            <svg class=\"${this.#defaultStyle.id} css-gg-video-icon\"\r\n            width=\"0.9rem\"\r\n            height=\"0.9rem\"\r\n            viewBox=\"0 0 24 24\"\r\n            fill=\"none\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            >\r\n                <path\r\n                    fill-rule=\"evenodd\"\r\n                    clip-rule=\"evenodd\"\r\n                    d=\"M4 4.5V6.5H12V7.5H3C1.34315 7.5 0 8.84315 0 10.5V16.5C0 18.1569 1.34315 19.5 3 19.5H15C16.5731 19.5 17.8634 18.2892 17.9898 16.7487L24 17.5V9.5L17.9898 10.2513C17.8634 8.71078 16.5731 7.5 15 7.5H14V5.5C14 4.94772 13.5523 4.5 13 4.5H4ZM18 12.2656V14.7344L22 15.2344V11.7656L18 12.2656ZM16 10.5C16 9.94772 15.5523 9.5 15 9.5H3C2.44772 9.5 2 9.94772 2 10.5V16.5C2 17.0523 2.44772 17.5 3 17.5H15C15.5523 17.5 16 17.0523 16 16.5V10.5Z\"\r\n                    fill=\"currentColor\"\r\n                />\r\n            </svg>\r\n            `,\r\n            title: 'Video'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else{\r\n                this.#selectedFile.onchange = ()=> {\r\n                    //let url = URL.createObjectURL(this.#selectedFile.files[0])\r\n                    this.toolHandler.toolButton.dataset.tool_status = 'active';\r\n                }\r\n                this.#selectedFile.click();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n            .${this.toolHandler.defaultClass} {\r\n                position: relative;\r\n            }\r\n            .${this.#defaultStyle.id}.css-gg-video-icon {\r\n                zoom:120%;\r\n            }\r\n            .${this.#defaultStyle.id}.video-description{            \r\n                cursor: pointer;\r\n                display: inline-flex;\r\n                align-items: center;\r\n            }\r\n            .${this.#defaultStyle.id}.video-description::after{\r\n                margin-left: 0.5em;\r\n                content: ' ['attr(data-file_name)'] 'attr(data-open_status);\r\n                font-size: small;\r\n                color: #bdbdbd;\r\n            }\r\n\r\n            .${this.#defaultStyle.id}.video-contanier{\r\n                width: fit-content;\r\n                transition: height 0.5s ease-in-out;\r\n                overflow: hidden;\r\n                position: relative;\r\n            }\r\n            .${this.#defaultStyle.id}.video-contanier video{\r\n                max-width: 100%;\r\n                height: auto;\r\n                aspect-ratio: attr(width) / attr(height);\r\n            }\r\n        `\r\n        let defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n    static get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n    \r\n\r\n    #file;\r\n\r\n    videoLoadEndCallback = (event) => {};\r\n\r\n    video = Object.assign(document.createElement('video'), {\r\n        loop: true,\r\n        controls: true\r\n    });\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Video, dataset, {deleteOption : FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE});\r\n\r\n\t\tif( ! dataset && Object.entries(this.dataset).length == 0){\r\n            this.#file = Video.selectedFile.cloneNode(true);\r\n            Video.selectedFile.files = new DataTransfer().files;\r\n            \r\n            this.dataset.url = URL.createObjectURL(this.#file.files[0]);\r\n            this.dataset.name = this.#file.files[0].name;\r\n            this.dataset.lastModified = this.#file.files[0].lastModified;\r\n            this.dataset.size = this.#file.files[0].size;\r\n            this.dataset.content_type = this.#file.files[0].type;\r\n\r\n            let url = URL.createObjectURL(this.#file.files[0], this.dataset.content_type);\r\n            this.dataset.url = url;\r\n            this.video.type = this.dataset.content_type;\r\n            this.video.src = this.dataset.url;\r\n            /*fetch(this.dataset.url).then(res=>res.blob()).then(blob => {\r\n                const reader = new FileReader();\r\n                reader.readAsDataURL(blob);\r\n                reader.onloadend = () => {\r\n                    this.dataset.base64 = reader.result;\r\n                }\r\n            })*/\r\n            \r\n        }else if(( ! this.dataset.url || this.dataset.url.startsWith('blob:file')) && this.dataset.base64){\r\n            fetch(this.dataset.base64)\r\n            .then(async res=>{\r\n                return res.blob().then(blob=>{\r\n                    let videoUrl = URL.createObjectURL(blob, res.headers.get('Content-Type'))\r\n                    this.dataset.url = videoUrl;\r\n                    this.video.src = this.dataset.url;\r\n                })\r\n            })\r\n        }else if(Video.customVideoCallback && typeof Video.customVideoCallback == 'function'){\r\n            Video.customVideoCallback(this);\r\n        }else if(this.dataset.url){\r\n            this.video.src = this.dataset.url;\r\n        }\r\n\r\n        if(! this.dataset.name){\r\n            this.remove();\r\n            throw new Error(`this file is undefined ${this.dataset.name}`);\r\n        }\r\n\r\n        this.attachShadow({ mode : 'open' });\r\n        this.shadowRoot.append(Video.defaultStyle.cloneNode(true));\r\n\r\n        this.createDefaultContent().then(({wrap, description, slot, aticle})=>{\r\n            this.connectedChildAfterCallback = (addedList) => {\r\n                aticle.append(...addedList);\r\n            }\r\n        });\r\n\r\n        this.disconnectedAfterCallback = () => {\r\n            if(this.dataset.url.startsWith('blob:file')){\r\n                setTimeout(() => {\r\n                    URL.revokeObjectURL(this.dataset.url);\r\n                }, 1000 * 60 * 2)\r\n            }\r\n        }\r\n\t}\r\n\r\n    createDefaultContent(){\r\n        return new Promise(resolve=>{\r\n            let wrap = Object.assign(document.createElement('div'),{\r\n\r\n            });\r\n            wrap.draggable = false\r\n\r\n            this.shadowRoot.append(wrap);\r\n\r\n            let videoContanier = Object.assign(document.createElement('div'),{\r\n                className: `${Video.defaultStyle.id} video-contanier`\r\n            });\r\n\r\n            this.video.dataset.video_name = this.dataset.name\r\n\r\n            videoContanier.append(this.video);\r\n            this.video.onload = () => {\r\n                if(\r\n                    (this.file.length != 0 && video.canPlayType(this.file.files[0].type) == '') ||\r\n                    (\r\n                        this.dataset.name && \r\n                        this.video.canPlayType(\r\n                            `video/${this.dataset.name.substring(this.dataset.name.lastIndexOf('.') + 1)}`\r\n                        ) == ''\r\n                    )\r\n                ){\r\n                    this.videoIsNotWorking();\r\n                }\r\n            }\r\n            this.video.onloadeddata = () => {\r\n                //videoContanier.style.height = window.getComputedStyle(video).height;\r\n                /*let applyToolAfterSelection = window.getSelection(), range = applyToolAfterSelection.getRangeAt(0);\r\n                let scrollTarget;\r\n                if(range.endContainer.nodeType == Node.TEXT_NODE){\r\n                    scrollTarget = range.endContainer.parentElement\r\n                }else{\r\n                    scrollTarget = range.endContainer;\r\n                }\r\n                scrollTarget.scrollIntoView({ behavior: \"instant\", block: \"end\", inline: \"nearest\" });\r\n                */\r\n                this.video.play();\r\n                if(this.dataset.width){\r\n                    this.video.width = this.dataset.width;\r\n                }\r\n            }\r\n            this.video.onerror = () => {\r\n                //videoContanier.style.height = window.getComputedStyle(video).height;\r\n            }\r\n\r\n            let {description, slot, aticle} = this.createDescription(this.video, videoContanier);\r\n\r\n            this.connectedAfterOnlyOneCallback = () => {\r\n                if(this.childNodes.length != 0 && this.childNodes[0]?.tagName != 'BR'){\r\n                    aticle.append(...[...this.childNodes].filter(e=>e!=aticle));\r\n                }\r\n                wrap.replaceChildren(...[description,videoContanier].filter(e=>e != undefined));\r\n                \r\n                Video.videoBox.addVideoHoverEvent(this.video, this);\r\n                if(this.nextSibling?.tagName == 'BR'){\r\n                    this.nextSibling.remove()\r\n                }\r\n\r\n                resolve({wrap, description, slot, aticle})\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLVideoElement} image \r\n     * @param {HTMLDivElement} imageContanier \r\n     * @returns {HTMLDivElement}\r\n     */\r\n    createDescription(video, videoContanier){\r\n        let description = Object.assign(document.createElement('div'), {\r\n            className : `${Video.defaultStyle.id} video-description`\r\n        });\r\n\r\n        description.dataset.file_name = this.dataset.name\r\n        description.dataset.open_status = this.dataset.open_status || '▼'\r\n        videoContanier.style.height = this.dataset.height || 'auto'\r\n\r\n        let {slot, aticle} = this.createSlot()\r\n        \r\n        if(slot){\r\n            description.append(slot);\r\n        }\r\n\r\n        description.onclick = (event) => {\r\n\r\n            if(description.dataset.open_status == '▼'){\r\n                description.dataset.open_status = '▶'\r\n                videoContanier.style.height = window.getComputedStyle(video).height;\r\n                setTimeout(()=>{\r\n                    videoContanier.style.height = '0px';\r\n                    this.dataset.height = '0px';\r\n                },100)\r\n\r\n            }else{\r\n                description.dataset.open_status = '▼';\r\n                setTimeout(()=>{\r\n                    videoContanier.style.height = window.getComputedStyle(video).height;\r\n                    this.dataset.height = 'auto';\r\n                },100)\r\n                \r\n                video.style.opacity = '';\r\n                video.style.visibility = '';\r\n            }\r\n\r\n            this.dataset.open_status = description.dataset.open_status;\r\n        }\r\n\r\n        videoContanier.ontransitionend = () => {\r\n            if(description.dataset.open_status == '▼'){\r\n                videoContanier.style.height = 'auto';\r\n            }else{\r\n                video.style.opacity = 0;\r\n                video.style.visibility = 'hidden';\r\n            }\r\n        }\r\n\r\n        return {description, slot, aticle};\r\n    }\r\n\r\n    createSlot(){\r\n        let aticle = document.createElement('div');\r\n        \r\n        aticle.contentEditable = 'false';\r\n        aticle.draggable = 'false';\r\n\r\n        //if(this.childNodes.length != 0 && this.childNodes[0]?.tagName != 'BR'){\r\n            let randomId = Array.from(\r\n                window.crypto.getRandomValues(new Uint32Array(16)),\r\n                (e)=>e.toString(32).padStart(2, '0')\r\n            ).join('');\r\n            //aticle.append(...[...this.childNodes].map(e=>e.cloneNode(true)));\r\n            aticle.append(...this.childNodes);\r\n            aticle.slot = Video.descriptionName + '-' + randomId;\r\n            this.append(aticle);\r\n            \r\n            let slot = Object.assign(document.createElement('slot'),{\r\n                name: Video.descriptionName + '-' + randomId\r\n            });\r\n\r\n            return {slot, aticle};\r\n        //}else{\r\n        //    return undefined;\r\n        //}\r\n    }\r\n\r\n    videoIsNotWorking(){\r\n        alert(`${this.dataset.name}은 호환되지 않는 영상입니다.`);\r\n        this.remove();\r\n    }\r\n\r\n    /**\r\n     * @returns {HTMLInputElement}\r\n     */\r\n    get selectedFile(){\r\n        return this.#file\r\n    }\r\n}\r\n","\r\nimport FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\n\r\nexport default class Resources extends FreedomInterface {\r\n\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n    static customResourcesCallback = () => {}; \r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-resources-style'\r\n\t});\r\n\r\n    static slotName = 'free-will-editor-resources-description-slot';\r\n\r\n    static #selectedFile = Object.assign(document.createElement('input'), {\r\n        type: 'file'\r\n    });\r\n\r\n    static get selectedFile(){\r\n        return this.#selectedFile;\r\n    }\r\n\r\n    static #resourcesCallback = () => {};\r\n\r\n    static #sizeLimitOverCallback = () => {};\r\n    static isDefaultStyle = true;\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-resources';\r\n        //this.toolHandler.isInline = false;\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: '',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n            innerHTML: `\r\n            <svg class=\"${this.#defaultStyle.id} css-gg-file-add-icon\" width=\"0.9rem\" height=\"0.9rem\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path d=\"M10 18V16H8V14H10V12H12V14H14V16H12V18H10Z\" fill=\"currentColor\" />\r\n                <path\r\n                    fill-rule=\"evenodd\"\r\n                    clip-rule=\"evenodd\"\r\n                    d=\"M6 2C4.34315 2 3 3.34315 3 5V19C3 20.6569 4.34315 22 6 22H18C19.6569 22 21 20.6569 21 19V9C21 5.13401 17.866 2 14 2H6ZM6 4H13V9H19V19C19 19.5523 18.5523 20 18 20H6C5.44772 20 5 19.5523 5 19V5C5 4.44772 5.44772 4 6 4ZM15 4.10002C16.6113 4.4271 17.9413 5.52906 18.584 7H15V4.10002Z\"\r\n                    fill=\"currentColor\"\r\n                />\r\n            </svg>\r\n            `,\r\n            title: 'Resources'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else{\r\n                this.#selectedFile.click();\r\n                this.#selectedFile.onchange = ()=> {\r\n                    //let url = URL.createObjectURL(this.#selectedFile.files[0])\r\n\r\n                    this.toolHandler.toolButton.dataset.tool_status = 'active';\r\n                }\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n            .${this.toolHandler.defaultClass} {\r\n                position: relative;\r\n            }\r\n            .${this.#defaultStyle.id}.css-gg-file-add-icon {\r\n                zoom:120%;\r\n            }\r\n            .${this.#defaultStyle.id}.resources-description{            \r\n                cursor: pointer;\r\n                display: inline-flex;\r\n                align-items: center;\r\n            }\r\n\r\n            .${this.#defaultStyle.id}.resources-description::after{\r\n                margin-left: 0.5em;\r\n                content: ' ['attr(data-file_name)'] 'attr(data-open_status);\r\n                font-size: small;\r\n                color: #bdbdbd;\r\n            }\r\n            .${this.#defaultStyle.id}.resources-download-button, .${this.#defaultStyle.id}.resources-preview-button{\r\n                margin-left: 1vw;\r\n                border: solid 2px #e5e5e5;\r\n                cursor: pointer;\r\n                background: none;\r\n            }\r\n            .${this.#defaultStyle.id}.resources-contanier{\r\n                width: auto;\r\n                transition: height 0.5s ease-in-out;\r\n                overflow: hidden;\r\n                position: relative;\r\n                margin-top: 0.7vh;\r\n            }\r\n            .${this.#defaultStyle.id}.resources-contanier object{\r\n                width: 99%;\r\n                height: auto;\r\n                aspect-ratio: attr(width) / attr(height);\r\n                border: solid 2px #efefef;\r\n            }\r\n            .${this.#defaultStyle.id}.resources-contanier object.unload{\r\n                width: auto;\r\n            }\r\n\r\n        ` \r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n    static get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n    static set resourcesCallback(callback){\r\n        this.#resourcesCallback = callback;\r\n    }\r\n    static get resourcesCallback(){\r\n        return this.#resourcesCallback;\r\n    }\r\n\r\n    static set sizeLimitOverCallback(callback){\r\n        this.#sizeLimitOverCallback = callback;\r\n    }\r\n    static get sizeLimitOverCallback(){\r\n        return this.#sizeLimitOverCallback;\r\n    }\r\n\r\n    #file;\r\n    \r\n    imgLoadEndCallback = (event) => {};\r\n\r\n    resources = Object.assign(document.createElement('object'), {\r\n\r\n    });\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Resources, dataset, {deleteOption : FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE});\r\n        \r\n        if( ! dataset && Object.keys(this.dataset).length == 0){\r\n            this.#file = Resources.selectedFile.cloneNode(true);\r\n            Resources.selectedFile.files = new DataTransfer().files;\r\n\r\n            this.dataset.url = URL.createObjectURL(this.#file.files[0]);\r\n            this.dataset.name = this.#file.files[0].name;\r\n            this.dataset.last_modified = this.#file.files[0].lastModified;\r\n            this.dataset.size = this.#file.files[0].size;\r\n            this.dataset.content_type = this.#file.files[0].type;\r\n\r\n            let url = URL.createObjectURL(this.#file.files[0], this.dataset.content_type);\r\n            this.dataset.url = url;\r\n            /*fetch(this.dataset.url).then(res=>res.blob()).then(blob => {\r\n                const reader = new FileReader();\r\n                reader.readAsDataURL(blob);\r\n                reader.onloadend = () => {\r\n                    this.dataset.base64 = reader.result;\r\n                }\r\n            })*/\r\n           \r\n        }else if(Resources.customResourcesCallback && typeof Resources.customResourcesCallback == 'function'){\r\n            Resources.customResourcesCallback(this);\r\n        }else if(this.dataset.url){\r\n        }\r\n        this.resources.type = this.dataset.content_type;\r\n        this.resources.data = this.dataset.url;\r\n        this.resources.dataset.resources_name = this.dataset.name\r\n\r\n        if(! this.dataset.name){\r\n            this.remove();\r\n            throw new Error(`this file is undefined ${this.dataset.name}`);\r\n        }\r\n        \r\n        this.attachShadow({ mode : 'open' });\r\n        this.shadowRoot.append(Resources.defaultStyle.cloneNode(true));\r\n        \r\n        this.createDefaultContent().then(({wrap, description, slot, aticle})=>{\r\n            this.connectedChildAfterCallback = (addedList) => {\r\n                aticle.append(...addedList);\r\n            }\r\n        });\r\n        \r\n        this.disconnectedAfterCallback = () => {\r\n            this.resources.remove();\r\n            if(this.dataset.url.startsWith('blob:file')){\r\n                //setTimeout(() => {\r\n                    //URL.revokeObjectURL(this.dataset.url);\r\n                //}, 1000 * 60 * 2)\r\n            }\r\n        }\r\n\r\n\t}\r\n\r\n    createDefaultContent(){\r\n        return new Promise(resolve => {\r\n            let wrap = Object.assign(document.createElement('div'),{\r\n\r\n            });\r\n            wrap.draggable = false\r\n\r\n            this.shadowRoot.append(wrap);\r\n\r\n            let resourcesContanier = Object.assign(document.createElement('div'),{\r\n                className: `${Resources.defaultStyle.id} resources-contanier`\r\n            });\r\n\r\n            /*let resources = Object.assign(document.createElement('img'), {\r\n                //src :`https://developer.mozilla.org/pimg/aHR0cHM6Ly9zLnprY2RuLm5ldC9BZHZlcnRpc2Vycy9iMGQ2NDQyZTkyYWM0ZDlhYjkwODFlMDRiYjZiY2YwOS5wbmc%3D.PJLnFds93tY9Ie%2BJ%2BaukmmFGR%2FvKdGU54UJJ27KTYSw%3D`\r\n                //src: this.dataset.url\r\n                //src: imgUrl\r\n            });*/\r\n\r\n            //if(this.file.files.length != 0){\r\n\r\n            //}\r\n\r\n            //resourcesContanier.append(this.resources);\r\n\r\n            this.resources.onload = (event) => {\r\n                if(this.dataset.width){\r\n                    this.resources.width = this.dataset.width;\r\n                }\r\n                //console.log(this.resources.contentWindow);\r\n                if( ! this.resources.contentWindow){\r\n                    this.resources.classList.add('unload')\r\n                }else{\r\n                    this.resources.contentWindow.document.body.style.contentVisibility = 'auto'\r\n                    this.resources.contentWindow.document.body.style.containIntrinsicSize = '1px 5000px'\r\n                }\r\n\r\n                Resources.resourcesCallback({status : 'load', resources : this.resources});\r\n                /*let applyToolAfterSelection = window.getSelection(), range = applyToolAfterSelection.getRangeAt(0);\r\n                let scrollTarget;\r\n                if(range.endContainer.nodeType == Node.TEXT_NODE){\r\n                    scrollTarget = range.endContainer.parentElement\r\n                }else{\r\n                    scrollTarget = range.endContainer;\r\n                }\r\n                scrollTarget.scrollIntoView({ behavior: \"instant\", block: \"end\", inline: \"nearest\" });\r\n                */\r\n            //this.imgLoadEndCallback();\r\n                //resourcesContanier.style.height = window.getComputedStyle(resources).height;\r\n            }\r\n            this.resources.onerror = (event) => {\r\n                //console.log(event);\r\n                //resourcesContanier.style.height = window.getComputedStyle(resources).height;\r\n                this.resources.dataset.error = '';\r\n                if( ! this.resources.contentWindow){\r\n                    this.resources.classList.add('unload')\r\n                }\r\n                Resources.resourcesCallback({status : 'error', resources : this.resources});\r\n                \r\n            }\r\n\r\n            let {description, slot, aticle} = this.createDescription(this.resources, resourcesContanier);\r\n            let downloadButton = Object.assign(document.createElement('button'), {\r\n                className: `${Resources.defaultStyle.id} resources-download-button`,\r\n                innerHTML : `<b>Download</b>`,\r\n                onclick : () => {\r\n                    fetch(this.resources.data).then(res=>res.blob()).then(blob => {\r\n                        let url = URL.createObjectURL(blob, this.dataset.content_type);\r\n                        let a = document.createElement('a');\r\n                        a.href = url;\r\n                        a.download = this.dataset.name;\r\n                        a.click();\r\n                        a.remove();\r\n                        setTimeout(() => {\r\n                            URL.revokeObjectURL(url);\r\n                        }, 1000 * 60 * 5)\r\n                    })\r\n                }\r\n            });\r\n            let previewButton = Object.assign(document.createElement('button'), {\r\n                className: `${Resources.defaultStyle.id} resources-preview-button`,\r\n                innerHTML : `<b>Preview</b>`,\r\n                onclick : () => {\r\n                    resourcesContanier.append(this.resources);\r\n                }\r\n            });\r\n\r\n            this.connectedAfterOnlyOneCallback = () => {\r\n                if(this.childNodes.length != 0 && this.childNodes[0]?.tagName != 'BR'){\r\n                    aticle.append(...[...this.childNodes].filter(e=>e!=aticle));\r\n                }\r\n                wrap.replaceChildren(...[description,downloadButton,previewButton,resourcesContanier].filter(e=>e != undefined));\r\n                \r\n                if(this.nextSibling?.tagName == 'BR'){\r\n                    this.nextSibling.remove()\r\n                }\r\n\r\n                resolve({wrap, description, slot, aticle})\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLObjectElement} resources \r\n     * @param {HTMLDivElement} resourcesContanier \r\n     * @returns \r\n     */\r\n    createDescription(resources, resourcesContanier){\r\n        let description = Object.assign(document.createElement('div'),{\r\n            className: `${Resources.defaultStyle.id} resources-description`\r\n        });\r\n\r\n        description.dataset.file_name = this.dataset.name\r\n        description.dataset.open_status = this.dataset.open_status || '▼'\r\n        resourcesContanier.style.height = this.dataset.height || 'auto'\r\n        \r\n        description.dataset.open_status = '▼';\r\n        \r\n        let {slot, aticle} = this.createSlot();\r\n        \r\n        description.append(slot)\r\n\r\n        description.onclick = (event) => {\r\n            /*if(event.composedPath().some(e=> e== downloadButton)){\r\n                return;\r\n            }*/\r\n            if(description.dataset.open_status == '▼'){\r\n                description.dataset.open_status = '▶'\r\n                resourcesContanier.style.height = window.getComputedStyle(resources).height;\r\n                setTimeout(()=>{\r\n                    resourcesContanier.style.height = '0px';\r\n                    this.dataset.height = '0px';\r\n                },100)\r\n\r\n            }else{\r\n                description.dataset.open_status = '▼';\r\n                setTimeout(()=>{\r\n                    resourcesContanier.style.height = window.getComputedStyle(resources).height;\r\n                    this.dataset.height = 'auto';\r\n                },100)\r\n                \r\n                resources.style.opacity = '';\r\n                resources.style.visibility = '';\r\n\r\n            }\r\n            this.dataset.open_status = description.dataset.open_status;\r\n        }\r\n\r\n        resourcesContanier.ontransitionend = () => {\r\n            if(description.dataset.open_status == '▼'){\r\n                resourcesContanier.style.height = 'auto';\r\n            }else{\r\n                resources.style.opacity = 0;\r\n                resources.style.visibility = 'hidden';\r\n            }\r\n        }\r\n\r\n        return {description, slot, aticle};\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @returns {HTMLSlotElement}\r\n     */\r\n    createSlot(){\r\n        let aticle = document.createElement('div');\r\n        \r\n        aticle.contentEditable = 'false';\r\n        aticle.draggable = 'false'; \r\n\r\n        //if(this.childNodes.length != 0 && this.childNodes[0]?.tagName != 'BR'){\r\n            let randomId = Array.from(\r\n                window.crypto.getRandomValues(new Uint32Array(16)),\r\n                (e)=>e.toString(32).padStart(2, '0')\r\n            ).join('');\r\n            //aticle.append(...[...this.childNodes].map(e=>e.cloneNode(true)));\r\n            aticle.append(...this.childNodes);\r\n            aticle.slot = Resources.slotName + '-' + randomId\r\n            this.append(aticle);\r\n            \r\n            let slot = Object.assign(document.createElement('slot'),{\r\n                name: Resources.slotName + '-' + randomId\r\n            });\r\n            return {slot, aticle};\r\n        //}else{\r\n        //   return undefined\r\n        //}\r\n\r\n    }\r\n    /**\r\n     * @returns {HTMLInputElement}\r\n     */\r\n    get selectedFile(){\r\n        return this.#file\r\n    }\r\n    \r\n    set resourcesUrl(url){\r\n        let clone = this.resources.cloneNode(true);\r\n        clone.data = url;\r\n        this.resources.after(clone);\r\n        this.resources.remove();\r\n        this.resources = clone;\r\n        clone.onload = () => {\r\n            if(this.resources == clone) return;\r\n            if(this.dataset.width){\r\n                clone.width = this.dataset.width;\r\n            }\r\n            if( ! clone.contentWindow){\r\n                clone.classList.add('unload')\r\n            }\r\n        }\r\n        clone.onerror = () => {\r\n            clone.dataset.error = '';\r\n            if( ! clone.contentWindow){\r\n                clone.classList.add('unload')\r\n            }\r\n        }\r\n    }\r\n    get resourcesUrl(){\r\n        this.resources.data;\r\n    }\r\n}\r\n","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\n\r\nexport default class Code extends FreedomInterface {\r\n\t//static extendsElement = 'strong';\r\n\t//static defaultClass = 'line';\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-code-style'\r\n\t});\r\n    static isDefaultStyle = true;\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-code';\r\n\t\tthis.toolHandler.isInline = false;\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: '',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n            innerHTML: `\r\n            <svg class=\"${this.#defaultStyle.id} css-gg-code-icon\"\r\n            width=\"0.9rem\"\r\n            height=\"0.9rem\"\r\n            viewBox=\"0 0 24 24\"\r\n            fill=\"none\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            >\r\n                <path\r\n                d=\"M13.325 3.05011L8.66741 20.4323L10.5993 20.9499L15.2568 3.56775L13.325 3.05011Z\"\r\n                fill=\"currentColor\"\r\n                />\r\n                <path\r\n                d=\"M7.61197 18.3608L8.97136 16.9124L8.97086 16.8933L3.87657 12.1121L8.66699 7.00798L7.20868 5.63928L1.04956 12.2017L7.61197 18.3608Z\"\r\n                fill=\"currentColor\"\r\n                />\r\n                <path\r\n                d=\"M16.388 18.3608L15.0286 16.9124L15.0291 16.8933L20.1234 12.1121L15.333 7.00798L16.7913 5.63928L22.9504 12.2017L16.388 18.3608Z\"\r\n                fill=\"currentColor\"\r\n                />\r\n            </svg>\r\n            `,\r\n            title: 'Code Block'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else{\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n            .${this.#defaultStyle.id}-button{\r\n            }\r\n            .${this.#defaultStyle.id}.css-gg-code-icon{\r\n                zoom:120%;\r\n            }\r\n\t\t\t.${this.toolHandler.defaultClass} {\r\n                display: block;\r\n                background-color: #e7e7e7;\r\n                margin-inline: 0.5em;\r\n                border: solid 1px #d1d1d1;\r\n                border-radius: 4px;\r\n                white-space: pre-wrap;\r\n                font-family: monospace;\r\n                box-shadow: 0px 0px 3px 0px #d1d1d1;\r\n                padding: 0.5em 1em 0.5em 1em;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tparentLine;\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Code, dataset, {deleteOption : FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE});\r\n        /*\r\n\t\tsuper.connectedAfterOnlyOneCallback = () => {\r\n\t\t\tthis.dataset.index = Code.toolHandler.connectedFriends.length;\r\n\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tthis.parentEditor.createLine();\r\n\t\t\t}else{\r\n\t\t\t\tnextLine.line.lookAtMe();\r\n\t\t\t}\r\n\t\t}\r\n\r\n        super.disconnectedChildAfterCallback = () => {\r\n\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tthis.parentEditor.createLine();\r\n\t\t\t}\r\n        }\r\n        */\r\n\t}\r\n\r\n}","export default class HyperlinkBox{\r\n\t#style = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-hyperlink-box'\r\n\t});\r\n\r\n\t#hyperlinkBox = Object.assign(document.createElement('div'),{\r\n\t\tclassName: 'hyperlink-box-wrap'\r\n\t});\r\n\r\n\t#hyperlinkBoxVw = 20;\r\n\r\n\t#urlInputText = Object.assign(document.createElement('input'), {\r\n        autocomplete: 'off',\r\n        placeholder: 'Please enter your link ',\r\n        type: 'url',\r\n        name: 'hyperlink-url-input',\r\n        className: 'hyperlink-url-input',\r\n\t\trequired: false,\r\n        /*\r\n\t\toninput: (event) => this.#searchInputTextEvent(event),\r\n        onkeyup: (event) => {\r\n            if(event.key == 'Enter' && this.#searchInputText.value != ''){\r\n                let item = this.#fontSizeBoxContainer.querySelector(`[data-size=\"${this.#searchInputText.value}\"]`);\r\n                this.#apply(item, event);\r\n            }\r\n        },\r\n\t\t*/\r\n    });\r\n\r\n\t#invalidUrlMessage = Object.assign(document.createElement('span'), {\r\n\r\n\t})\r\n\r\n\t#applyCallback = () => {}\r\n\t\r\n    #lastSelectionRange;\r\n\r\n\t#lastUrl;\r\n\r\n\tconstructor(){\r\n\t\tlet style = document.querySelector(`#${this.#style.id}`);\r\n        if(! style){\r\n            document.head.append(this.createStyle());\r\n        }else{\r\n            this.#style = style;\r\n        }\r\n\t\tlet urlInputTextWrapper = Object.assign(document.createElement('div'), {\r\n\t\t\t//id: 'url-input-text-wrapper',\r\n\t\t\tclassName: 'url-input-text-wrapper',\r\n\t\t\t/*onsubmit : (event) => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tapplyButton.click();\r\n\t\t\t}*/\r\n\t\t})\r\n\t\turlInputTextWrapper.append(this.#urlInputText);\r\n\t\tthis.#urlInputText.oninput = (event) => {\r\n\t\t\tif(this.#invalidUrlMessage.isConnected){\r\n\t\t\t\tthis.#invalidUrlMessage.remove();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.#urlInputText.onkeydown = (event) => {\r\n\t\t\tif(event.key == 'Enter'){\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tapplyButton.onclick();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tlet cancelButton = Object.assign(document.createElement('button'), {\r\n\t\t\tclassName: 'cancel-button',\r\n\t\t\ttype: 'button',\r\n\t\t\ttextContent: 'cancel'\r\n\t\t})\r\n\t\tcancelButton.onclick = () => {\r\n\t\t\tthis.close();\r\n\t\t}\r\n\t\tlet applyButton = Object.assign(document.createElement('button'), {\r\n\t\t\tclassName: 'apply-button',\r\n\t\t\ttype: 'button',\r\n\t\t\ttextContent: 'apply'\r\n\t\t})\r\n\t\tapplyButton.onclick = (event) => {\r\n\t\t\tif( ! this.#urlInputText.checkValidity()){\r\n\t\t\t\tlet prevValue = this.#urlInputText.value\r\n\t\t\t\tthis.#urlInputText.value = `https://${this.#urlInputText.value}`;\r\n\t\t\t\tif(! this.#urlInputText.checkValidity()){\r\n\t\t\t\t\tthis.#urlInputText.value = prevValue;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.lastUrl = this.#urlInputText.value;\r\n\t\t\tthis.#urlInputText.value = '';\r\n\t\t\tif(this.#lastSelectionRange){\r\n\t\t\t\tlet selection = window.getSelection();\r\n\t\t\t\tselection.removeAllRanges();\r\n\t\t\t\tselection.addRange(this.#lastSelectionRange);\r\n\t\t\t}\r\n\t\t\tthis.applyCallback(event);\r\n\t\t}\r\n\t\tlet buttonWrapeer = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'button-wrap',\r\n\t\t})\r\n\t\tbuttonWrapeer.append(cancelButton, applyButton);\r\n\t\tthis.#hyperlinkBox.append(urlInputTextWrapper, buttonWrapeer)\r\n\t}\r\n\r\n    async open(){\r\n\t\tlet selection = window.getSelection();\r\n\t\tif(selection.rangeCount != 0 && selection.isCollapsed == false){\r\n\t\t\tlet range = selection.getRangeAt(0);\r\n\t\t\tthis.#lastSelectionRange = range.cloneRange();\r\n\t\t}\r\n\t\tdocument.body.append(this.#hyperlinkBox);\r\n\t\tlet appendAwait = setInterval(()=>{\r\n\t\t\tif( ! this.#hyperlinkBox.isConnected){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tclearInterval(appendAwait);\r\n\t\t\tthis.#urlInputText.focus();\r\n\t\t},50)\r\n    }\r\n\r\n    close(){\r\n        this.#hyperlinkBox.remove();\r\n    }\r\n    \r\n\tset applyCallback(applyCallback){\r\n        this.#applyCallback = applyCallback;\r\n    }\r\n\r\n    get applyCallback(){\r\n        return this.#applyCallback;\r\n    }\r\n\r\n\tget hyperlinkBox(){\r\n\t\treturn this.#hyperlinkBox;\r\n\t}\r\n\r\n\tcreateStyle(){\r\n\t\tthis.#style.textContent = `\r\n\t\t\t.hyperlink-box-wrap{\r\n\t\t\t\tbackground: #343434;\r\n\t\t\t\tposition: fixed;\r\n\t\t\t\tpadding: 0.9%;\r\n\t\t\t\twidth: ${this.#hyperlinkBoxVw}vw;\r\n\t\t\t\theight: auto;\r\n\t\t\t\tcolor: white;\r\n\t\t\t\tmin-width: 100px;\r\n\t\t\t\toverflow-y: auto;\r\n\t\t\t\t-webkit-user-select: none;\r\n\t\t\t\t-moz-user-select: none;\r\n\t\t\t\t-ms-user-select: none;\r\n\t\t\t\tuser-select: none;\r\n\t\t\t\toverflow-x: hidden;\r\n\t\t\t\tdisplay: grid;\r\n\t\t\t\tgap: 1vh;\r\n\t\t\t\talign-content: center;\r\n\t\t\t\tjustify-content: space-around;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-items: center;\r\n                z-index: 999;\r\n\t\t\t}\r\n\t\t\t.hyperlink-box-wrap .url-input-text-wrapper{\r\n\t\t\t\twidth: inherit;\r\n\t\t\t}\r\n\t\t\t.hyperlink-box-wrap .url-input-text-wrapper .hyperlink-url-input{\r\n\t\t\t\twidth: -webkit-fill-available;\r\n\t\t\t\tbackground-color: #ffffff00;\r\n\t\t\t\tcolor: #b9b9b9;\r\n\t\t\t\tborder-bottom: solid 1px #4c4c4c;\r\n\t\t\t\tborder-left: solid 1px #4c4c4c;\r\n\t\t\t}\r\n\t\t\t.hyperlink-box-wrap .button-wrap{\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-around;\r\n\t\t\t\twidth: inherit;\r\n\t\t\t}\r\n\t\t\t.hyperlink-box-wrap .button-wrap .apply-button,\r\n\t\t\t.hyperlink-box-wrap .button-wrap .cancel-button {\r\n\t\t\t\tbackground: none;\r\n\t\t\t\tborder: revert;\r\n\t\t\t\tcolor: #b9b9b9;\r\n\t\t\t\tborder-color: #464646;\r\n\t\t\t}\r\n\t\t`\r\n\t\treturn this.#style;\r\n\t}\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport HyperlinkBox from \"../component/HyperlinkBox\";\r\n\r\nexport default class Hyperlink extends FreedomInterface {\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-link-style'\r\n\t});\r\n\r\n    static hyperlinkBox;\r\n\tstatic isDefaultStyle = true;\r\n\tstatic{\r\n\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-link';\r\n\t\t\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\tinnerHTML: `\r\n\t\t\t\t<svg class=\"${this.#defaultStyle.id} css-gg-link-icon\"\r\n\t\t\t\twidth=\"0.9rem\"\r\n\t\t\t\theight=\"0.9rem\"\r\n\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\tfill=\"none\"\r\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=\"M14.8284 12L16.2426 13.4142L19.071 10.5858C20.6331 9.02365 20.6331 6.49099 19.071 4.9289C17.509 3.3668 14.9763 3.3668 13.4142 4.9289L10.5858 7.75732L12 9.17154L14.8284 6.34311C15.6095 5.56206 16.8758 5.56206 17.6568 6.34311C18.4379 7.12416 18.4379 8.39049 17.6568 9.17154L14.8284 12Z\"\r\n\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=\"M12 14.8285L13.4142 16.2427L10.5858 19.0711C9.02372 20.6332 6.49106 20.6332 4.92896 19.0711C3.36686 17.509 3.36686 14.9764 4.92896 13.4143L7.75739 10.5858L9.1716 12L6.34317 14.8285C5.56212 15.6095 5.56212 16.8758 6.34317 17.6569C7.12422 18.4379 8.39055 18.4379 9.1716 17.6569L12 14.8285Z\"\r\n\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=\"M14.8285 10.5857C15.219 10.1952 15.219 9.56199 14.8285 9.17147C14.4379 8.78094 13.8048 8.78094 13.4142 9.17147L9.1716 13.4141C8.78107 13.8046 8.78107 14.4378 9.1716 14.8283C9.56212 15.2188 10.1953 15.2188 10.5858 14.8283L14.8285 10.5857Z\"\r\n\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</svg>\r\n\t\t\t`,\r\n\t\t\ttitle: 'Hyperlink'\r\n        });\r\n\t\t\r\n\t\tthis.hyperlinkBox = new HyperlinkBox();\r\n\t\t\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else if(this.hyperlinkBox.hyperlinkBox.isConnected){\r\n\t\t\t\tthis.hyperlinkBox.close();\r\n\t\t\t}else{\r\n\t\t\t\tthis.hyperlinkBox.open().then(()=>{\r\n\t\t\t\t\tsuper.processingElementPosition(this.hyperlinkBox.hyperlinkBox, this.toolHandler.toolButton);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdocument.addEventListener(\"scroll\", () => {\r\n\t\t\tif(this.hyperlinkBox.hyperlinkBox.isConnected){\r\n\t\t\t\tsuper.processingElementPosition(this.hyperlinkBox.hyperlinkBox, this.toolHandler.toolButton);\r\n\t\t\t}\r\n\t\t});\r\n        window.addEventListener('resize', (event) => {\r\n            if(this.hyperlinkBox.hyperlinkBox.isConnected){\r\n\t\t\t\tsuper.processingElementPosition(this.hyperlinkBox.hyperlinkBox, this.toolHandler.toolButton);\r\n            }\r\n\t\t})\r\n\r\n\t\tthis.hyperlinkBox.applyCallback = (event) => {\r\n\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active'\r\n\t\t\tthis.hyperlinkBox.close();\r\n\t\t}\r\n\r\n\t\tsuper.outClickElementListener(this.hyperlinkBox.hyperlinkBox, ({oldEvent, newEvent, isMouseOut})=>{\r\n\t\t\tif(isMouseOut && this.hyperlinkBox.hyperlinkBox.isConnected && ! super.isMouseInnerElement(this.toolHandler.toolButton)){\r\n\t\t\t\tthis.hyperlinkBox.close();\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t}\r\n\t\t\t.${this.#defaultStyle.id}.css-gg-link-icon{\r\n\t\t\t\tzoom:120%;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} {\r\n\t\t\t\tcolor: -webkit-link;\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t\ttext-decoration: underline;\r\n\t\t\t\tdisplay: grid;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} > [data-hyperlink_child=\"${Hyperlink.toolHandler.defaultClass}-child\"]{\r\n\t\t\t\tall: initial;\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t\tmargin-left: 1em;\r\n\t\t\t\tpadding-left: 1em;\r\n\t\t\t\tborder-left: 5px solid #d7d7db;\r\n\t\t\t\twidth: 95%;\r\n\t\t\t\tfloat: left;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} > [data-hyperlink_child=\"${Hyperlink.toolHandler.defaultClass}-child\"] > *{\r\n\t\t\t\tfont-size: 14px;\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass} > [data-hyperlink_child=\"${Hyperlink.toolHandler.defaultClass}-child\"] img{\r\n\t\t\t\tmax-width: 100%;\r\n                height: auto;\r\n                aspect-ratio: attr(width) / attr(height);\r\n\t\t\t}\r\n\t\t\t.${this.toolHandler.defaultClass}-preview-url{\r\n\t\t\t\tposition: fixed;\r\n\t\t\t\tz-index: 9000;\r\n\t\t\t\twidth: 50vw;\r\n\t\t\t\theight: 50vh;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\t#aTag = Object.assign(document.createElement('a'), {\r\n\t\ttarget: '_blank'\r\n\t});\r\n\r\n\t/*\r\n\t#previewUrl = Object.assign(document.createElement('iframe'), {\r\n\t\tclassName: `${Hyperlink.toolHandler.defaultClass}-preview-url`,\r\n\t\t//referrerpolicy: 'origin',\r\n\t\t//allow: 'Permissions-Policy',\r\n\t\t//width: 100,\r\n\t\t//height: 100,\r\n\t});\r\n\t*/\r\n\t/*HyperlinkChild = class HyperlinkChild extends HTMLElement{\r\n\t\tconstructor(){\r\n\t\t\tsuper();\r\n\t\t\tthis.className = `${Hyperlink.toolHandler.defaultClass}-child`;\r\n\t\t\tthis.attachShadow({ mode : 'open' });\r\n\t\t\tthis.shadowRoot.append(Hyperlink.defaultStyle.cloneNode(true));\r\n\t\t}\r\n\t};*/\r\n\r\n\t//#hyperlinkChild;\r\n\tconstructor(dataset){\r\n\t\tsuper(Hyperlink, dataset);\r\n\t\t/*\r\n\t\tif( ! window.customElements.get(`${Hyperlink.toolHandler.defaultClass}-child`)){\r\n\t\t\twindow.customElements.define(`${Hyperlink.toolHandler.defaultClass}-child`, this.HyperlinkChild);\r\n\t\t}\r\n\t\t\r\n\t\tthis.#hyperlinkChild = new this.HyperlinkChild();\r\n\t\t\r\n\t\t*/\r\n\t\tlet getUrlMetadataPromise;\r\n\r\n\t\tif( ! dataset && Object.keys(this.dataset).length == 0){\r\n\t\t\tthis.dataset.href = Hyperlink.hyperlinkBox.lastUrl;\r\n\t\t\tgetUrlMetadataPromise = fetch(this.dataset.href, {\r\n\t\t\t\tmode: 'no-cors',\r\n\t\t\t}).then(response => {\r\n\t\t\t\treturn response.text();\r\n\t\t\t}).then(htmlText => {\r\n\t\t\t\tlet dom = new DOMParser().parseFromString(htmlText, 'text/html');\r\n\t\t\t\tthis.dataset.title = dom.querySelector('meta[name=\"og:title\"]')?.getAttribute('content') \r\n\t\t\t\t\t|| dom.querySelector('meta[name=\"twitter:title\"]')?.getAttribute('content')\r\n\t\t\t\t\t|| dom.querySelector('title')?.textContent\r\n\t\t\t\t\t|| '';\r\n\r\n\t\t\t\tthis.dataset.description = dom.querySelector('meta[name=\"description\"]')?.getAttribute('content') \r\n\t\t\t\t\t|| dom.querySelector('meta[name=\"og:description\"]')?.getAttribute('content') \r\n\t\t\t\t\t|| dom.querySelector('meta[name=\"twitter:description\"]')?.getAttribute('content')\r\n\t\t\t\t\t|| ''\r\n\t\r\n\t\t\t\tthis.dataset.image = dom.querySelector('meta[name=\"og:image\"]')?.getAttribute('content')\r\n\t\t\t\t\t|| dom.querySelector('meta[name=\"twitter:image\"]')?.getAttribute('content')\r\n\t\t\t\t\t|| ''\r\n\r\n\t\r\n\t\t\t\tthis.dataset.favicon = dom.querySelector('link[rel=\"icon\"]')?.getAttribute('href') || '';\r\n\r\n\t\t\t\tthis.dataset.siteName = new URL(this.dataset.href).hostname;\r\n\t\r\n\t\t\t\tlet p = document.createElement('p')\r\n\t\t\t\t//this.parentEditor.createLine();\r\n\t\t\t\t//this.#hyperlinkChild.shadowRoot.append(line);\r\n\t\t\t\t//this.append(line);\r\n\t\t\t\treturn p;\r\n\t\t\t}).catch(error=>{\r\n\t\t\t\tconsole.error(error);\r\n\t\t\t\t//this.style.color = 'red';\r\n\t\t\t\t//this.title = 'unknown site';\r\n\t\t\t\treturn undefined\r\n\t\t\t});\r\n        }else{\r\n\t\t\tgetUrlMetadataPromise = Promise.resolve().then(()=>{\r\n\t\t\t\t//let line = this.parentEditor.createLine();\r\n\t\t\t\t//line.contenteditable = false;\r\n\t\t\t\t//this.#hyperlinkChild.shadowRoot.append(line);\r\n\t\t\t\t//this.append(line);\r\n\t\t\t\t//let p = document.createElement('p')\r\n\t\t\t\t//return p\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.#aTag.href = this.dataset.href\r\n\t\tsuper.connectedAfterOnlyOneCallback = () => {\r\n\t\t\tgetUrlMetadataPromise.then(p => {\r\n\t\t\t\tif(! p){\r\n\t\t\t\t\tp = this.querySelector(`[data-hyperlink_child=\"${Hyperlink.toolHandler.defaultClass}-child\"]`);\r\n\t\t\t\t\tif( ! p){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tlet title;\r\n\t\t\t\tif(this.dataset.title != ''){\r\n\t\t\t\t\ttitle = Object.assign(document.createElement('p'), {\r\n\t\t\t\t\t\ttextContent: this.dataset.title\r\n\t\t\t\t\t})\r\n\t\t\t\t\ttitle.style.fontWeight = 'bold';\r\n\t\t\t\t}\r\n\t\t\t\tlet description;\r\n\t\t\t\tif(this.dataset.description != ''){\r\n\t\t\t\t\tdescription = Object.assign(document.createElement('p'),{\r\n\t\t\t\t\t\ttextContent: this.dataset.description\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tlet image;\r\n\t\t\t\tif(this.dataset.image != ''){\r\n\t\t\t\t\timage = Object.assign(document.createElement('p'),{\r\n\t\t\t\t\t\tinnerHTML: `\r\n\t\t\t\t\t\t\t<img data-image src=\"${this.dataset.image}\"/>\r\n\t\t\t\t\t\t`\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tlet favicon;\r\n\t\t\t\tif(this.dataset.favicon != ''){\r\n\t\t\t\t\tfavicon = Object.assign(document.createElement('span'), {\r\n\t\t\t\t\t\tinnerHTML: `\r\n\t\t\t\t\t\t\t<img data-favicon src=\"${this.dataset.favicon}\" style=\"width: 1.1em; vertical-align: text-bottom;\"/>\r\n\t\t\t\t\t\t`\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tlet siteName = Object.assign(document.createElement('span'), {\r\n\t\t\t\t\ttextContent: this.dataset.siteName\r\n\t\t\t\t});\r\n\t\t\t\tsiteName.style.fontSize = '12px';\r\n\t\t\t\tsiteName.style.fontWeight = 'bold';\r\n\t\t\t\t//this.#hyperlinkChild.shadowRoot.append(line);\r\n\t\t\t\tthis.append(p);\r\n\t\t\t\tp.dataset.hyperlink_child = `${Hyperlink.toolHandler.defaultClass}-child`;\r\n\t\t\t\tp.contenteditable = false;\r\n\t\t\t\tp.replaceChildren(...[\r\n\t\t\t\t\tfavicon, siteName,\r\n\t\t\t\t\ttitle,\r\n\t\t\t\t\tdescription,\r\n\t\t\t\t\timage\r\n\t\t\t\t].filter(e=>e!=undefined))\r\n\r\n\t\t\t\tthis.onclick = (event) => {\r\n\t\t\t\t\tif( ! event.composedPath().some(e=>e==p)){\r\n\t\t\t\t\t\tthis.#aTag.click();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}) \r\n\t\t}\r\n\r\n\t}\r\n\r\n}","import Line from './component/Line'\r\nimport FreeWiilHandler from './module/FreeWiilHandler'\r\nimport UndoManager from './fragment/UndoManager'\r\n\r\nimport Strong from \"./tools/Strong\"\r\nimport Color from \"./tools/Color\"\r\nimport Background from \"./tools/Background\"\r\nimport Strikethrough from \"./tools/Strikethrough\"\r\nimport Underline from \"./tools/Underline\"\r\nimport FontFamily from \"./tools/FontFamily\"\r\nimport Quote from \"./tools/Quote\"\r\nimport NumericPoint from \"./tools/NumericPoint\"\r\nimport BulletPoint from \"./tools/BulletPoint\"\r\nimport Sort from \"./tools/Sort\"\r\nimport FontSize from \"./tools/FontSize\"\r\nimport Italic from \"./tools/Italic\"\r\nimport Image from \"./tools/Image\"\r\nimport Video from \"./tools/Video\"\r\nimport Resources from './tools/Resources'\r\nimport Code from \"./tools/Code\"\r\nimport Hyperlink from \"./tools/Hyperlink\"\r\n\r\nimport FreedomInterface from './module/FreedomInterface'\r\n\r\nexport default class FreeWillEditor extends FreeWiilHandler {\r\n\t\r\n\tstatic componentsMap = {};\r\n\tstatic toolsMap = {};\r\n\r\n\tstatic LineBreakMode = class LineBreakMode{\r\n\t\tstatic #LineBreakModeEnum = class LineBreakModeEnum{\r\n\t\t\tvalue;\r\n\t\t\tconstructor(value){\r\n\t\t\t\tthis.value = value;\r\n\t\t\t\tObject.freeze(this);\r\n\t\t\t}\r\n\t\t}\r\n\t\tstatic NO_CHANGE = new this.#LineBreakModeEnum(1)\r\n\t\tstatic NEXT_LINE_FIRST = new this.#LineBreakModeEnum(2);\r\n\t\tstatic NEXT_LINE_LAST = new this.#LineBreakModeEnum(3);\r\n\t}\r\n\r\n\tstatic async getLowDoseJSON(targetElement, {afterCallback = (json)=> {}} = {}){\r\n\t\treturn Promise.all([...targetElement.childNodes]\r\n\t\t\t.map(async (node, index)=>{\r\n\t\t\t\treturn new Promise(resolve =>{\r\n\t\t\t\t\t//if(targetElement == this && node.nodeType == Node.TEXT_NODE){\r\n\t\t\t\t\t//\tresolve(undefined);\r\n\t\t\t\t\t//}\r\n\t\t\t\t\tresolve( FreeWillEditor.#toJSON(node, {afterCallback}) )\r\n\t\t\t\t})\r\n\t\t\t})).then(jsonList=>jsonList.filter(e=>e != undefined).map(e=> {\r\n\t\t\t\tdelete e.node;\r\n\t\t\t\treturn e;\r\n\t\t\t}))\r\n\t}\r\n\r\n\tstatic async #toJSON(node, {afterCallback}){\r\n\t\treturn new Promise(resolve=>{\r\n\t\t\tlet obj = {};\r\n\t\t\tif(node.nodeType == Node.TEXT_NODE && node.textContent != '' && node.textContent){\r\n\t\t\t\tobj.type = Node.TEXT_NODE;\r\n\t\t\t\tobj.name = node.constructor.name;\r\n\t\t\t\tobj.text = node.textContent\r\n\t\t\t\tobj.node = node;\r\n\t\t\t\tafterCallback(obj);\r\n\t\t\t\tresolve(obj);\r\n\t\t\t}else if(node.nodeType == Node.ELEMENT_NODE){\r\n\t\t\t\tobj.type = Node.ELEMENT_NODE;\r\n\t\t\t\tobj.name = node.constructor.name;\r\n\t\t\t\tobj.tagName = node.localName;\r\n\t\t\t\tobj.data = Object.assign({}, node.dataset);\r\n\t\t\t\tobj.node = node;\r\n\t\t\t\tif(node.hasAttribute('is_cursor')){\r\n\t\t\t\t\tobj.cursor_offset = node.getAttribute('cursor_offset');\r\n\t\t\t\t\tobj.cursor_type = node.getAttribute('cursor_type');\r\n\t\t\t\t\tobj.cursor_index = node.getAttribute('cursor_index');\r\n\t\t\t\t\tobj.cursor_scroll_x = node.getAttribute('cursor__scroll_x');\r\n\t\t\t\t\tobj.cursor_scroll_y = node.getAttribute('cursor_scroll_y');\r\n\t\t\t\t}\r\n\t\t\t\tthis.getLowDoseJSON(node, {afterCallback})\r\n\t\t\t\t.then(jsonList => {\r\n\t\t\t\t\tobj.childs = jsonList.filter(e=> e != undefined)\r\n\t\t\t\t\tafterCallback(obj);\r\n\t\t\t\t\tresolve(obj);\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\t//afterCallback(undefined)\r\n\t\t\t\tresolve(undefined);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t})\r\n\t}\r\n\r\n\tstatic async parseLowDoseJSON(target, json, {beforeCallback = (json) => {}, afterCallback = (node)=> {}} = {}){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tlet jsonObj = json;\r\n\t\t\tif(typeof json == 'string'){\r\n\t\t\t\tjsonObj = JSON.parse(json);\r\n\t\t\t}\r\n\r\n\t\t\tif(jsonObj instanceof Array){\r\n\t\t\t\tresolve(\r\n\t\t\t\t\tPromise.all(FreeWillEditor.#toHTML(jsonObj, {beforeCallback, afterCallback}))\r\n\t\t\t\t\t.then(htmlList => {\r\n\t\t\t\t\t\ttarget.append(...htmlList.filter(e=> e != undefined))\r\n\t\t\t\t\t\treturn htmlList;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tresolve(undefined);\r\n\t\t})\r\n\t}\r\n\r\n\tstatic #toHTML(objList, {beforeCallback, afterCallback}){\r\n\t\treturn objList.filter(e=>e!=undefined).map(async jsonNode => {\r\n\t\t\treturn new Promise(resolve => {\r\n\t\t\t\tbeforeCallback(jsonNode);\r\n\t\t\t\tlet node = undefined;\r\n\t\t\t\tif(jsonNode.type == Node.TEXT_NODE){\r\n\t\t\t\t\tnode = document.createTextNode(jsonNode.text);\r\n\t\t\t\t}else if(jsonNode.type == Node.ELEMENT_NODE){\r\n\t\t\t\t\t//let EditorTarget = FreeWillEditor.componentsMap[jsonNode.name] || FreeWillEditor.toolsMap[jsonNode.name]\r\n\t\t\t\t\tlet editorTarget = window.customElements.get(jsonNode.tagName);\r\n\t\t\t\t\tif(editorTarget && editorTarget.toolHandler){\r\n\t\t\t\t\t\tnode = new editorTarget.prototype.constructor(jsonNode.data);\r\n\t\t\t\t\t}else if(jsonNode.data.hasOwnProperty('is_line')){\r\n\t\t\t\t\t\tlet line = new Line(document.createElement(jsonNode.tagName));\r\n\t\t\t\t\t\tnode = line.lineElement;\r\n\t\t\t\t\t\tObject.assign(node.dataset, jsonNode.data);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t//node = document.createElement(jsonNode.name.replaceAll(/HTML|Element/g, '').toLowerCase());\r\n\t\t\t\t\t\tnode = document.createElement(jsonNode.tagName);\r\n\t\t\t\t\t\tObject.assign(node.dataset, jsonNode.data);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tafterCallback(node)\r\n\t\t\t\t\tif(jsonNode.childs.length != 0){\r\n\t\t\t\t\t\tPromise.all(FreeWillEditor.#toHTML(jsonNode.childs, {beforeCallback, afterCallback})).then(childList => {\r\n\t\t\t\t\t\t\tnode.append(...childList);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tresolve(node);\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\t#isLoaded = false;\r\n\tcomponents;\r\n\ttools;\r\n\t#placeholder;\r\n\t#undoManager;\r\n\tisDefaultStyle = true;\r\n\t#toolButtonObserver = new MutationObserver( (mutationList, observer) => {\r\n\t\tmutationList.forEach((mutation) => {\r\n\t\t\t//if(mutation.oldValue == mutation.mutation.target.dataset.tool_status){\r\n\t\t\t\t// 동일한 동작이 수행되지 않도록 추가 2023 05 25\r\n\t\t\t//\treturn;\r\n\t\t\t//}\r\n\t\t\t//console.log('111111111111111111111111111111')\r\n\t\t\tif(this.contentEditable == 'false' || (mutation.target.dataset.tool_status == 'connected' &&  mutation.oldValue == mutation.target.dataset.tool_status == 'connected')){\r\n\t\t\t\t//console.log('??????????????')\r\n\t\t\t\t//observer.disconnect();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet selection = window.getSelection();\r\n\t\t\t/*if( ! selection.containsNode(this, true)){\r\n\t\t\t\tconsole.log(222)\r\n\t\t\t\treturn;\r\n\t\t\t}*/\r\n\t\t\tlet focusNode = selection.focusNode;\r\n\t\t\tlet Tool = mutation.target.__Tool;\r\n\t\t\tif(mutation.target.dataset.tool_status == 'active' && mutation.oldValue != 'active' && Tool.prototype.isPrototypeOf(focusNode.parentElement) == false){\r\n\t\t\t\tthis.#renderingTools(Tool);\r\n\t\t\t}else if(mutation.target.dataset.tool_status == 'cancel' && mutation.oldValue != 'cancel'){// && window.getSelection().isCollapsed == false){\r\n\t\t\t\tthis.#removerTools(Tool);\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\t#keydownEventCallback;\r\n\tnumberIndexMapper = ['`', '1', '2', '3', '4', '5', '6', '7', '8', '9'];\r\n\tnumberToSpecialMapper = ['~','!', '@', '#', '$', '%', '^', '&', '*', '('];\r\n\tconstructor(\r\n\t\ttools = [\r\n\t\t\tStrong,\r\n\t\t\tColor,\r\n\t\t\tBackground,\r\n\t\t\tStrikethrough,\r\n\t\t\tUnderline,\r\n\t\t\tFontFamily,\r\n\t\t\tQuote,\r\n\t\t\tNumericPoint,\r\n\t\t\tBulletPoint,\r\n\t\t\tSort,\r\n\t\t\tFontSize,\r\n\t\t\tItalic,\r\n\t\t\tImage,\r\n\t\t\tVideo,\r\n\t\t\tResources,\r\n\t\t\tCode,\r\n\t\t\tHyperlink,\r\n\t\t],\r\n\t\t{isDefaultStyle = true, isDefaultShortcutKeyEvent = true} = {},\r\n\t\tkeydownEventCallback\r\n\t){\r\n\t\tsuper();\r\n\t\tthis.keydownEventCallback = keydownEventCallback;\r\n\t\tif(isDefaultStyle){\r\n\t\t\tFreeWiilHandler.createDefaultStyle();\r\n\t\t}\r\n\t\tnew Promise(resolve => {\r\n\t\t\tthis.isDefaultStyle = isDefaultStyle;\r\n\t\t\tthis.components = {\r\n\t\t\t\t'free-will-editor-line' : Line\r\n\t\t\t};\r\n\t\t\tthis.tools = tools;\r\n\t\t\tthis.classList.add('free-will-editor');\r\n\r\n\t\t\tObject.entries(this.components).forEach( ([className, Component]) => {\r\n\t\t\t\tif(className.includes(' ')){\r\n\t\t\t\t\tthrow new DOMException(`The token provided ('${className}') contains HTML space characters, which are not valid in tokens.`);\r\n\t\t\t\t}\r\n\t\t\t\tif(FreeWillEditor.componentsMap[Component.name]){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tComponent.toolHandler.defaultClass = className;\r\n\t\t\t\tif( ! window.customElements.get(className)){\r\n\t\t\t\t\twindow.customElements.define(className, Component, Component.toolHandler.extendsElement && Component.toolHandler.extendsElement != '' ? {extends:Component.toolHandler.extendsElement} : undefined);\r\n\t\t\t\t}\t\r\n\t\t\t\tFreeWillEditor.componentsMap[Component.name] = Component;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.tools.forEach( (Tool) => {\r\n\t\t\t\tif(FreeWillEditor.toolsMap[Tool.name]){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(Tool.isDefaultStyle){\r\n\t\t\t\t\tTool.createDefaultStyle();\r\n\t\t\t\t}\r\n\t\t\t\tTool.toolHandler.toolButton.__Tool = Tool;\r\n\t\t\t\t// attribute에 value가 없어서 oldvalue가 ''이 나옵니다.\r\n\t\t\t\t// oldvalue로 구분할 수 있게 합시다.\r\n\t\t\t\tthis.#toolButtonObserver.observe(Tool.toolHandler.toolButton, {\r\n\t\t\t\t\tattributeFilter:['data-tool_status'],\r\n\t\t\t\t\tattributeOldValue:true\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tif( ! window.customElements.get(Tool.toolHandler.defaultClass)){\r\n\t\t\t\t\twindow.customElements.define(Tool.toolHandler.defaultClass, Tool, Tool.toolHandler.extendsElement && Tool.toolHandler.extendsElement != '' ? {extends:Tool.toolHandler.extendsElement} : undefined);\r\n\t\t\t\t}\r\n\t\t\t\tFreeWillEditor.toolsMap[Tool.name] = Tool;\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t\r\n\r\n\t\t\tlet observer = new MutationObserver( (mutationList, observer) => {\r\n\t\t\t\tmutationList.forEach((mutation) => {\r\n\t\t\t\t\t//if(this.contentEditable == 'false'){\r\n\t\t\t\t\t//\treturn;\r\n\t\t\t\t\t//}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(this.childElementCount == 0){\r\n\t\t\t\t\t\tthis.startFirstLine();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif( ! this.firstElementChild.line){\r\n\t\t\t\t\t\tnew Line(this.firstElementChild.line);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.querySelectorAll('[data-placeholder]').forEach(async e => {\r\n\t\t\t\t\t\te.removeAttribute('data-placeholder')\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif(this.isEmpty){\r\n\t\t\t\t\t\tthis.placeholder = this.#placeholder;\r\n\t\t\t\t\t\t//this.firstElementChild.dataset.placeholder = this.#placeholder\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.firstElementChild.setAttribute('data-placeholder', '');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//console.log(mutation.target);\r\n\t\t\t\t\tmutation.addedNodes.forEach(async element=>{\r\n\t\t\t\t\t\tnew Promise(resolve=>{\r\n\t\t\t\t\t\t\tif(element.nodeType != Node.ELEMENT_NODE) return;\r\n\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\tlet sty = window.getComputedStyle(element);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif(sty.visibility == 'hidden' || sty.opacity == 0){\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t\tif(element.classList.contains(Line.toolHandler.defaultClass)){\r\n\t\t\t\t\t\t\t\tif( ! element.line){\r\n\t\t\t\t\t\t\t\t\tnew Line(element);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(element.innerText.length == 0){\r\n\t\t\t\t\t\t\t\t\telement.innerText = '\\n';\r\n\t\t\t\t\t\t\t\t\twindow.getSelection().setPosition(element, 1)\r\n\t\t\t\t\t\t\t\t\telement.focus();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\t/*mutation.removedNodes.forEach(element=>{\r\n\r\n\t\t\t\t\t})*/\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t\tobserver.observe(this, {\r\n\t\t\t\tchildList:true,\r\n\t\t\t\tsubtree: true\r\n\t\t\t})\r\n\t\t\tresolve();\r\n\t\t});\r\n\t\t\r\n\t\tconst arrowDownEvent = (event) => {\r\n\t\t\tif(! this.isCursor() || event.key != 'ArrowDown') return;\r\n\r\n\t\t\tlet currentLine = this.getCurrentLine(undefined, {isRoot : true});\r\n\t\t\tif( ! currentLine) return;\r\n\t\t\tlet nextLine = currentLine.nextElementSibling;\r\n\t\t\twhile(nextLine){\r\n\t\t\t\tif(nextLine.contentEditable == 'false'){\r\n\t\t\t\t\tnextLine = nextLine.nextElementSibling;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif( ! nextLine){\r\n\t\t\t\tlet nextLine = super.createLine();\r\n\t\t\t\tnextLine.line?.lookAtMe();\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(isDefaultShortcutKeyEvent){\r\n\r\n\t\t\tFreedomInterface.globalKeydownEventListener(this, ({oldEvent, newEvent}) => {\r\n\t\t\t\tif(! this.isCursor()) return;\r\n\t\t\t\tlet isKeyAddEvent = false;\r\n\t\t\t\tif(this.keydownEventCallback != null){\r\n\t\t\t\t\tisKeyAddEvent = this.keydownEventCallback(newEvent);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(isKeyAddEvent) return;\r\n\t\t\t\t\r\n\t\t\t\t//let selection = window.getSelection();\r\n\r\n\t\t\t\tarrowDownEvent(newEvent);\r\n\t\t\t\tlet {ctrlKey, shiftKey, altKey, key} = newEvent;\r\n\r\n\t\t\t\tif(ctrlKey && key.toLowerCase() == 'b'){\r\n\t\t\t\t\tnewEvent.preventDefault()\r\n\t\t\t\t\tStrong.toolHandler.toolButton.click();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}else if(ctrlKey && key.toLowerCase == 'u'){\r\n\t\t\t\t\tnewEvent.preventDefault()\r\n\t\t\t\t\tUnderline.toolHandler.toolButton.click();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}else if(ctrlKey && key.toLowerCase == 'i'){\r\n\t\t\t\t\tnewEvent.preventDefault()\r\n\t\t\t\t\tItalic.toolHandler.toolButton.click();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet clone = [...tools];\r\n\t\t\t\tnew Promise(res=>{\r\n\t\t\t\t\tlet firstKeyGroupList = clone.splice(0,10);\r\n\t\t\t\t\tlet isStop = false;\r\n\t\t\t\t\tfor(let i = 0, len = firstKeyGroupList.length ; i < len ; i += 1){\r\n\t\t\t\t\t\tlet s = String(i), index = s.substring(s.length - 1);\r\n\t\t\t\t\t\tif(ctrlKey && altKey && key == this.numberIndexMapper[index]){\r\n\t\t\t\t\t\t\tlet e = firstKeyGroupList[i];\r\n\t\t\t\t\t\t\tnewEvent.preventDefault();\r\n\t\t\t\t\t\t\te.toolHandler.toolButton.click();\r\n\t\t\t\t\t\t\tisStop = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(isStop) {\r\n\t\t\t\t\t\tres(); \r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor(let i = 0, len = clone.length ; i < len ; i += 1){\r\n\t\t\t\t\t\tlet s = String(i), index = s.substring(s.length - 1);\r\n\t\t\t\t\t\tif(ctrlKey && shiftKey && key == this.numberToSpecialMapper[index]){\r\n\t\t\t\t\t\t\tlet e = clone[i];\r\n\t\t\t\t\t\t\tnewEvent.preventDefault();\r\n\t\t\t\t\t\t\te.toolHandler.toolButton.click();\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tres();\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tconnectedCallback(){\r\n\t\tthis.#undoManager = new UndoManager(this);\r\n\t\tif( ! this.#isLoaded){\r\n            this.#isLoaded = true;\r\n\t\t\tif(this.contentEditable == 'inherit' || this.contentEditable == true){\r\n\t\t\t\tthis.contentEditable = true;\r\n\t\t\t\tthis.tabIndex = 1;\r\n\t\t\t\tthis.focus()\r\n\t\t\t\tif(this.isEmpty){\r\n\t\t\t\t\tthis.startFirstLine();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tdisconnectedCallback(){\r\n\t\tthis.#undoManager = null;\r\n        this.#isLoaded = false;\r\n\t\t//this.contentEditable = false;\r\n\t\t//this.#toolButtonObserver.disconnect();\r\n    }\r\n\r\n\tstartFirstLine(){\r\n\t\tlet lineElement = super.createLine();\r\n\t\tlineElement.line.isFirstLine = true;\r\n\t\tthis.placeholder = this.#placeholder;\r\n\t\treturn lineElement;\r\n\t}\r\n\r\n\t#removeAfterSelectionMove(targetElement){\r\n\t\tlet selection = document.getSelection()\r\n\t\tlet range =  new Range();//document.createRange()\r\n\t\tlet targetLine = Line.getLine(targetElement);\r\n\t\trange.setStartAfter(targetLine)\r\n\t\trange.setEnd(targetLine, targetElement.textContent.length - 1);\r\n\t\tselection.removeAllRanges()\r\n\t\tselection.addRange(range) \r\n\t}\r\n\r\n\t#addAfterSelectionMove(targetElement){\r\n\t\tlet selection = document.getSelection()\r\n\t\tlet range =  new Range();//document.createRange()\r\n\t\tif( ! targetElement){\r\n\t\t//\treturn;\r\n\t\t}\r\n\t\tif(targetElement && targetElement.nodeType == Node.ELEMENT_NODE && targetElement.textContent.length == 0){\r\n\t\t\t//let emptyElement = document.createTextNode('\\u200B')\r\n\t\t\t//targetElement.textContent = '\\u200B'; //.append(emptyElement)\r\n\t\t}\r\n\t\t\r\n\t\trange.selectNodeContents(targetElement)\r\n\t\trange.setStart(targetElement, targetElement.length);\r\n\t\trange.setEnd(targetElement, targetElement.length);\r\n\t\tselection.removeAllRanges()\r\n\t\tselection.addRange(range)\r\n\t\ttargetElement.removeAttribute('tabIndex');\r\n\t\t//cursor\r\n\t\t/*\r\n\t\tlet observer = new MutationObserver( (mutationList, observer) => {\r\n\t\t\tmutationList.forEach((mutation) => {\r\n\t\t\t\tif(mutation.target.textContent.includes('\\u200B')){\r\n\t\t\t\t\tif(targetElement.toolHandler && targetElement.toolHandler.toolButton ? true: false){\r\n\t\t\t\t\t\ttargetElement.toolHandler.toolButton.setAttribute('data-is_alive', '');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmutation.target.textContent = mutation.target.textContent.replace('\\u200B', '');\r\n\t\t\t\t\tconsole.log('146 :: targetElement.isConnected',targetElement.isConnected);\r\n\t\t\t\t\tconsole.log('147 :: targetElement',targetElement);\r\n\t\t\t\t\tif(targetElement.isConnected){\r\n\t\t\t\t\t\tselection.modify('move', 'forward', 'line')\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttargetElement.removeAttribute('tabIndex');\r\n\t\t\t\t\tobserver.disconnect();\r\n\t\t\t\t}else{\r\n\t\t\t\t\ttargetElement.removeAttribute('tabIndex');\r\n\t\t\t\t\tobserver.disconnect();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t})\r\n\r\n\t\tobserver.observe(targetElement, {\r\n\t\t\tcharacterData: true,\r\n\t\t\tcharacterDataOldValue: true,\r\n\t\t\tchildList:true,\r\n\t\t\tsubtree: true\r\n\t\t})\r\n\t\t*/\r\n\t}\r\n\r\n\t#renderingTools(TargetTool){\r\n\t\tlet selection = window.getSelection();\r\n\t\tlet {isCollapsed, anchorNode, focusNode} = selection;\r\n\t\t// 범위 선택 x인 경우 넘어가기\r\n\t\tif(isCollapsed && TargetTool.toolHandler.isInline){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsuper.getLineRange(selection)\r\n\t\t.then(({startLine, endLine}) => { \r\n\t\t\tif( ! startLine){\r\n\t\t\t\tstartLine = endLine\r\n\t\t\t}\r\n\t\t\tif( ! startLine.line){\r\n\t\t\t\tnew Line(startLine);\r\n\t\t\t}\r\n\t\t\tif( ! endLine.line){\r\n\t\t\t\tnew Line(endLine);\r\n\t\t\t}\r\n\t\t\treturn startLine.line.applyTool(TargetTool, selection.getRangeAt(0), endLine)\r\n\t\t})\r\n\t\t.then(lastApplyTool=> {\r\n\t\t\tif( ! this.#undoManager){\r\n\t\t\t\tthis.#undoManager = new UndoManager(this);\r\n\t\t\t}\r\n\t\t\tthis.#undoManager.addUndoRedo(true);\r\n\t\t\tlet applyToolAfterSelection = window.getSelection(), range = applyToolAfterSelection.getRangeAt(0);\r\n\t\t\tlet scrollTarget;\r\n\t\t\tif(range.endContainer.nodeType == Node.TEXT_NODE){\r\n\t\t\t\tscrollTarget = range.endContainer.parentElement\r\n\t\t\t}else{\r\n\t\t\t\tscrollTarget = range.endContainer;\r\n\t\t\t}\r\n\t\t\tscrollTarget.scrollIntoView({ behavior: \"instant\", block: \"end\", inline: \"nearest\" });\r\n\t\t\tapplyToolAfterSelection.setPosition(scrollTarget, scrollTarget.childNodes.length - 1);\r\n\t\t\t//selection.setPosition(lastApplyTool, 0)\r\n\t\t})\r\n\t\t/*\r\n\t\t.then(tool=>{\r\n\t\t\tthis.querySelectorAll(`.${TargetTool.toolHandler.defaultClass}`).forEach(async e =>{\r\n\t\t\t\tawait new Promise(resolve=>{\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\t//this.#addAfterSelectionMove(tool);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\t#removerTools(TargetTool){\r\n\t\tlet selection = window.getSelection();\r\n\t\tlet {isCollapsed, anchorNode, focusNode} = selection;\r\n\t\t\r\n\t\t// 범위 선택 x인 경우 넘어가기\r\n\t\tif(isCollapsed && TargetTool.toolHandler.isInline){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsuper.getLineRange(selection).then(({startLine, endLine})=> {\r\n\t\t\t//console.log(endLine);\r\n\t\t\tif( ! startLine){\r\n\t\t\t\tstartLine = endLine\r\n\t\t\t}\r\n\t\t\tif( ! startLine.line){\r\n\t\t\t\tnew Line(startLine);\r\n\t\t\t}\r\n\t\t\tif( ! endLine.line){\r\n\t\t\t\tnew Line(endLine);\r\n\t\t\t}\r\n\t\t\tconsole.log(startLine, endLine);\r\n\t\t\tstartLine.line.cancelTool(TargetTool, selection, endLine)\r\n\t\t\t.then(()=>{\r\n\t\t\t\tif( ! this.#undoManager){\r\n\t\t\t\t\tthis.#undoManager = new UndoManager(this);\r\n\t\t\t\t}\r\n\t\t\t\tthis.#undoManager.addUndoRedo(true);\r\n\t\t\t\twindow.getSelection().setPosition(startLine, startLine.childElementCount);\r\n\t\t\t\t/*[...this.children]\r\n\t\t\t\t.filter(e=>e.classList.contains(`${Line.toolHandler.defaultClass}`))\r\n\t\t\t\t.forEach(lineElement=>{\r\n\t\t\t\t\tif(lineElement.line.isLineEmpty()){\r\n\t\t\t\t\t\t//lineElement.line = undefined;\r\n\t\t\t\t\t\t//lineElement.remove();\r\n\t\t\t\t\t}\r\n\t\t\t\t})*/\r\n\t\t\t});\r\n\t\t})\r\n\t}\r\n\r\n    async lineBreak(LineBreakMode = FreeWillEditor.LineBreakMode.NEXT_LINE_FIRST){\r\n\t\tlet selection = window.getSelection();\r\n\t\treturn super.getLineRange(selection)\r\n\t\t.then(({startLine, endLine}) => { \r\n\t\t\tif( ! startLine.line){\r\n\t\t\t\tnew Line(startLine);\r\n\t\t\t}\r\n\t\t\tif( ! endLine.line){\r\n\t\t\t\tnew Line(endLine);\r\n\t\t\t}\r\n\t\t\tlet range = selection.getRangeAt(0);\r\n\t\t\tlet {startOffset, endOffset, startContainer,endContainer} = range;\r\n\t\t\tlet lastItem = startLine.lastChild\r\n\t\t\tlet lastItemEndOffset = lastItem.nodeType == Node.TEXT_NODE ? lastItem.length : lastItem.childNodes.length;\r\n\t\t\trange.setStart(startContainer, startOffset);\r\n\t\t\trange.setEnd(lastItem, lastItemEndOffset);\r\n\t\t\tlet lineElement = super.createLine();\r\n\t\t\tlineElement.append(range.extractContents());\r\n\t\t\tstartLine.after(lineElement);\r\n\t\t\tif(LineBreakMode == FreeWillEditor.LineBreakMode.NEXT_LINE_FIRST){\r\n\t\t\t\twindow.getSelection().setPosition(lineElement, 0);\r\n\t\t\t}else if(LineBreakMode == FreeWillEditor.LineBreakMode.NEXT_LINE_LAST){\r\n\t\t\t\tlineElement.line.lookAtMe();\r\n\t\t\t}\r\n\r\n\t\t})\r\n\t}\r\n\r\n\tset placeholder(placeholder){\r\n\t\tthis.#placeholder = placeholder;\r\n\t\tif(this.firstElementChild && this.contentEditable != false){\r\n\t\t\tthis.firstElementChild.setAttribute('data-placeholder', this.#placeholder);\r\n\t\t}\r\n\t}\r\n\r\n\tget firstLine(){\r\n\t\treturn this.firstElementChild;\r\n\t}\r\n\r\n\tget isEmpty(){\r\n\t\treturn Line.isElementTextEmpty(this) && ! [...this.querySelectorAll('*')].some(e=>this.tools.hasOwnProperty(e.localName));\r\n\t}\r\n\r\n\tget isLoaded(){\r\n\t\treturn this.#isLoaded;\r\n\t}\r\n\r\n\tset keydownEventCallback(callback){\r\n\t\tthis.#keydownEventCallback = callback;\r\n\t}\r\n\tget keydownEventCallback(){\r\n\t\treturn this.#keydownEventCallback;\r\n\t}\r\n}\r\n","\r\nexport const workspaceHandler = new class WorkspaceHandler{\r\n    #workspace;\r\n    #workspaceId;\r\n    #addWorkspaceIdChangedListener = {};\r\n    #workspaceChangeDone;\r\n    #workspaceChangeAwait;\r\n    constructor(){\r\n        //window.addEventListener(\"DOMContentLoaded\", (event) => {\r\n            window.myAPI.getWorkspaceId().then(workspaceId=>{\r\n                this.workspaceId = workspaceId;\r\n            })\r\n            window.myAPI.event.electronEventTrigger.addElectronEventListener('workspaceChange', event => {\r\n                this.workspaceId = event.workspaceId;\r\n            })\r\n        //});\r\n    }\r\n\r\n    set addWorkspaceIdChangedListener({name, callback, runTheFirst}){\r\n        this.#addWorkspaceIdChangedListener[name] = callback;\r\n        if(runTheFirst && this.workspaceId){\r\n            callback(this);\r\n        }\r\n    }\r\n    get addWorkspaceIdChangedListener(){\r\n        return this.#addWorkspaceIdChangedListener;\r\n    }\r\n\r\n    set workspaceId(workspaceId){\r\n        if(!workspaceId)return;\r\n        this.#workspaceId = workspaceId;\r\n        window.myAPI.workspace.getWorkspaceDetail({workspaceId}).then((workspace) => {\r\n            this.#workspace = workspace;\r\n            let startCallbackPromise = Promise.all(Object.values(this.#addWorkspaceIdChangedListener).map(async callback => {\r\n                return new Promise(res => {\r\n                    callback(this);\r\n                    res();\r\n                });\r\n            }));\r\n            if( ! this.#workspaceChangeAwait){\r\n                this.#workspaceChangeAwait = new Promise(resolve=>{\r\n                    this.#workspaceChangeDone = resolve;\r\n                    this.#workspaceChangeDone(startCallbackPromise);\r\n                })\r\n            }else{\r\n                this.#workspaceChangeAwait.then(() => {\r\n                    startCallbackPromise.then(() => {\r\n                        this.#workspaceChangeAwait = new Promise(resolve => {\r\n                            this.#workspaceChangeDone = resolve;\r\n                        })\r\n                    })\r\n                })\r\n            }\r\n        });\r\n    }\r\n    get workspaceId(){\r\n        return Number(this.#workspaceId);\r\n    }\r\n    get workspace(){\r\n        return this.#workspace;\r\n    }\r\n    removeWorkspaceIdChangedListener(name){\r\n        delete this.#addWorkspaceIdChangedListener(name);\r\n    }\r\n};","export const roomHandler = new class RoomHandler{\r\n    #roomId\r\n    #room;\r\n    #addRoomIdChangeListener = {};\r\n\r\n    #roomChangeDone;\r\n    #roomChangeAwait = new Promise(resolve=>{\r\n        this.#roomChangeDone = resolve;\r\n    });\r\n\r\n    constructor(){\r\n\r\n        window.myAPI.event.electronEventTrigger.addElectronEventListener('roomChange', event => {\r\n            this.roomId = event.roomId\r\n        })\r\n\r\n    }\r\n\r\n    set addRoomIdChangeListener({name, callback, runTheFirst}){\r\n        this.#addRoomIdChangeListener[name] = callback;\r\n        if(runTheFirst && this.#roomId){\r\n            callback(this);\r\n        }\r\n    }\r\n\r\n    get addRoomIdChangeListener(){\r\n        return this.#addRoomIdChangeListener;\r\n    }\r\n\r\n    set roomId(roomId){\r\n        if( ! roomId){\r\n            throw new Error('roomId is undefined')\r\n        }\r\n        this.#roomId = roomId;\r\n        window.myAPI.room.getRoomDetail({roomId}).then(result => {\r\n            this.#room = result.data;\r\n            window.myAPI.setOption({\r\n                name: 'lastRoomInfo', value : JSON.stringify(this.#room)\r\n            })\r\n            let startCallbackPromise = Promise.all(\r\n                Object.values(this.#addRoomIdChangeListener).map(async callback => {\r\n                    return new Promise(res => {\r\n                        callback(this);\r\n                        res();\r\n                    })\r\n                })\r\n            )\r\n            startCallbackPromise.then(()=>{\r\n                this.#roomChangeDone();\r\n            })\r\n            this.#roomChangeAwait.then(()=>{\r\n                this.#roomChangeAwait = new Promise(resolve=>{\r\n                    this.#roomChangeDone = resolve;\r\n                })\r\n            })\r\n            //window.myAPI.setTitle({title:this.#room.roomName})\r\n            \r\n        });\r\n    }\r\n\r\n    get roomId(){\r\n        return Number(this.#roomId);\r\n    }\r\n\r\n    get room(){\r\n        return this.#room;\r\n    }\r\n    removeRoomIdChangeListener(name){\r\n        delete this.#addRoomIdChangeListener(name);\r\n    }\r\n    get roomChangeAwait(){\r\n        return this.#roomChangeAwait;\r\n    }\r\n}","export default new class Common{\r\n\t#keyRegx = /[A-Z]?[a-z]+|[0-9]+|[A-Z]+(?![a-z])/g;\r\n\r\n\tconstructor(){\r\n\r\n\t}\r\n\r\n\tjsonToSaveElementDataset(data, element){\r\n\t\tif( ! element){\r\n\t\t\tthrow new Error('element is undefined')\r\n\t\t} else if(element.nodeType != Node.ELEMENT_NODE){\r\n\t\t\tthrow new Error(`element is not element node type ::: ${element.nodeType}`);\r\n\t\t}\r\n\t\treturn new Promise(resolve=>{\r\n\t\t\tlet underbarKeyNameObject = Object.entries(data).reduce((total, [k,v]) => {\r\n\t\t\t\tlet key = k.match(this.#keyRegx).map(e=> e.toLowerCase()).join('_');\r\n\t\t\t\ttotal[key] = v;\r\n\t\t\t\treturn total;\r\n\t\t\t}, {});\r\n\t\t\tObject.assign(element.dataset, underbarKeyNameObject);\r\n\t\t\tresolve(element);\r\n\t\t})\r\n\t}\r\n\tasync underbarNameToCamelName(obj){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tresolve(Object.entries(obj).reduce((total, [k,v]) => {\r\n\t\t\t\tlet key = k.split('_').map((e,i)=>{\r\n\t\t\t\t\tif(i == 0){\r\n\t\t\t\t\t\treturn e.charAt(0).toLowerCase() + e.substring(1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn e.charAt(0).toUpperCase() + e.substring(1)\r\n\t\t\t\t}).join('');\r\n\t\t\t\ttotal[key] = v;\r\n\t\t\t\treturn total;\r\n\t\t\t}, {}))\r\n\t\t})\r\n\t}\r\n\t/**\r\n\t * @returns {Promise<String>}\r\n\t */\r\n\tasync getProjectPathPromise(){\r\n\t\treturn await window.myAPI.getProjectPath().then((data) => {\r\n\t\t\treturn data\r\n\t\t}).catch(error=>{\r\n\t\t\tconsole.error(error);\r\n\t\t\treturn '';\r\n\t\t})\r\n\t}\r\n\r\n\tprocessingElementPosition(element, target){\r\n\t\tlet rect;\r\n\t\tif(this.isElement(target, HTMLElement)){\r\n\t\t\trect = target.getBoundingClientRect();\r\n\t\t}else{\r\n\t\t\trect = target;\r\n\t\t}\r\n\r\n\t\tlet {x, y, height, width} = rect;\r\n\t\tlet elementTop = (y - element.clientHeight)\r\n\t\tlet elementLeft = (x - element.clientWidth)\r\n\t\tif(elementTop > 0){\r\n\t\t\telement.style.top = elementTop + 'px';\r\n\t\t}else{\r\n\t\t\telement.style.top = y + height + 'px';\r\n\t\t}\r\n\t\tif(elementLeft > 0){\r\n\t\t\telement.style.left = elementLeft + 'px'\r\n\t\t}else{\r\n\t\t\telement.style.left = x + width + 'px';\r\n\t\t}\r\n\t\t\r\n\t}\r\n    isElement(targetObject, checkClazz){\r\n        let check = Object.getPrototypeOf(targetObject)\r\n        let isElement = false;\r\n        while(check != undefined){\r\n\r\n            if(check?.constructor  == checkClazz){\r\n                isElement = true;\r\n                break;\r\n            }else{\r\n                check = Object.getPrototypeOf(check);\r\n            }\r\n        }\r\n        return isElement;\r\n    }\r\n\r\n\tshortenBytes(byte) {\r\n\t\tconst rank = byte > 0 ? Math.floor((Math.log2(byte)/10)) : 0;\r\n\t\tconst rankText = ( (rank > 0 ? 'KMGTPEZY'[rank - 1] : '') || (rank >= 9 ? 'Y' : '') ) + 'B';\r\n\t\tconst size = Math.floor(byte / Math.pow(1024, (rank >= 9 ? 8 : rank) ));\r\n\t\treturn {size, rank, rankText};\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t * @param {Array<string>} text \r\n\t */\r\n\tshowToastMessage(textList){\r\n\t\tlet div = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'toast_message'\r\n\t\t});\r\n\t\tdiv.append(...textList.map(e=>Object.assign(document.createElement('div'), {\r\n\t\t\ttextContent : e\r\n\t\t})));\r\n\t\tdocument.body.append(div);\r\n\t\tlet appendAwait = setInterval(()=>{\r\n\t\t\tif( ! div.isConnected) return;\r\n\t\t\tclearInterval(appendAwait);\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tdiv.style.opacity = 0;\r\n\t\t\t\tdiv.ontransitionend = () => {\r\n\t\t\t\t\tdiv.remove();\r\n\t\t\t\t}\r\n\t\t\t},1000)\r\n\t\t}, 50)\r\n\r\n\t}\r\n\r\n}","export default class PositionChanger{\r\n\t#wrapper;\r\n\t#targetItem;\r\n\t#childList = [];\r\n\t#onDropEndChangePositionCallback = (changeList) => {};\r\n\t#onDropDocumentOutCallback = (target) => {console.log('out!!', target)}; \r\n\t#onIfCancelCallback = (target) => {return false;};\r\n\tconstructor({wrapper}){\r\n\t\tif( ! wrapper){\r\n\t\t\tthrow new Error('wrapper is undefined');\r\n\t\t}/*else if(childList.length == 0){\r\n\t\t\tthrow new Error('child list is empty');\r\n\t\t}*/\r\n\t\tthis.#wrapper = wrapper;\r\n\t}\r\n\r\n\taddPositionChangeEvent(child, wrapper){\r\n\t\tif(child.length == 0){\r\n\t\t\tthrow new Error('child is empty');\r\n\t\t}else if(child.some(e=>Number(e.dataset.order_sort) == undefined || isNaN(Number(e.dataset.order_sort)))){\r\n\t\t\tconsole.error(child);\r\n\t\t\tthrow new Error('data-order_sort is not defined or is not number')\r\n\t\t}\r\n\t\tlet parent = wrapper || this.#wrapper;\r\n\t\tparent.dataset.is_position_change = '';\r\n\t\tlet pointerEventTargetList = [];\r\n\t\treturn new Promise(resolve => {\r\n\t\t\t\r\n\t\t\tlet lastItem = [...parent.children].filter(e=>e.hasAttribute('data-order_sort')).pop() // or at(-1)\r\n\t\t\tchild.forEach((item, index)=>{\r\n\t\t\t\titem.draggable = true;\r\n\t\t\t\titem.ondragstart = (event) => {\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\t//event.preventDefault();\r\n\t\t\t\t\tthis.#targetItem = item;\r\n\t\t\t\t\t//this.#targetItem = event.target;\r\n\t\t\t\t\tchild.forEach(async e => {\r\n\t\t\t\t\t\t[...e.children].forEach((ee)=>{\r\n\t\t\t\t\t\t\tif(ee.hasAttribute('data-is_position_change')) {\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tee.style.pointerEvents = 'none';\r\n\t\t\t\t\t\t\tee.dataset.is_pointer_target = ''\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\titem.ondragend = (event) => {\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\t//event.preventDefault();\r\n\t\t\t\t\tif(\r\n\t\t\t\t\t\tevent.x < 0 || event.y < 0 ||\r\n\t\t\t\t\t\twindow.outerWidth < event.x || window.outerHeight < event.y\r\n\t\t\t\t\t){\r\n\t\t\t\t\t\tthis.#onDropDocumentOutCallback({\r\n\t\t\t\t\t\t\ttarget:item,\r\n\t\t\t\t\t\t\tevent\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.#targetItem = undefined;\r\n\t\t\t\t\t\r\n\t\t\t\t\tnew Promise(res => {\r\n\t\t\t\t\t\tdocument.querySelectorAll('[data-is_pointer_target]').forEach(e=>{\r\n\t\t\t\t\t\t\te.style.pointerEvents = '';\r\n\t\t\t\t\t\t\te.removeAttribute('data-is_pointer_target');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tres();\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif(item.__dragendCallback){\r\n\t\t\t\t\t\titem.__dragendCallback();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\titem.ondragover = (event) => {\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t\titem.ondragenter = (event) => {\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tevent.target.style.borderTop = 'solid #0000009c';\r\n\t\t\t\t}\r\n\t\t\t\titem.ondragleave = (event) => {\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tevent.target.style.borderTop = '';\r\n\t\t\t\t}\r\n\t\t\t\titem.ondrop = (event) => {\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tevent.target.style.borderTop = '';\r\n\r\n\t\t\t\t\tif(! this.#targetItem){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//return;\r\n\t\t\t\t\tlet target = this.#targetItem;\r\n\t\t\t\t\tlet cancle = this.onIfCancelCallback(target, item)\r\n\t\t\t\t\tif((typeof cancle) != 'boolean'){\r\n\t\t\t\t\t\tthrow new Error('onIfCancelCallback is only return Boolean');\r\n\t\t\t\t\t}else if(cancle){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//item.before(target);\r\n\t\t\t\t\tevent.target.closest('[data-order_sort]').before(target);\r\n\t\t\t\t\tthis.#targetItem = undefined;\r\n\t\t\t\t\tnew Promise(res=>{\r\n\t\t\t\t\t\tlet nowLastItem = [...parent.children].filter(e=>e.hasAttribute('data-order_sort')).pop(); // or at(-1)\r\n\t\t\t\t\t\t//let nowLastItem = [...target.closest('ul').children].filter(e=>e.hasAttribute('data-order_sort')).pop(); // or at(-1)\r\n\t\t\t\t\t\t//this.#wrapper.querySelector('[data-order_sort]:last-child');\r\n\t\t\t\t\t\tif( ! lastItem){\r\n\t\t\t\t\t\t\tlastItem = nowLastItem;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet prevOrderSort = Number(lastItem.dataset.order_sort);\r\n\t\t\t\t\t\tif(target == lastItem && lastItem != nowLastItem){\r\n\t\t\t\t\t\t\tnowLastItem.dataset.order_sort = lastItem.dataset.order_sort;\r\n\t\t\t\t\t\t\tprevOrderSort = Number(lastItem.dataset.order_sort);\r\n\t\t\t\t\t\t\t//prevOrderSort -= 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlastItem = nowLastItem\r\n\t\t\t\t\t\tlet prevItem = lastItem?.previousElementSibling;\r\n\t\t\t\t\t\twhile(prevItem){\r\n\t\t\t\t\t\t\tprevOrderSort += 1;\r\n\t\t\t\t\t\t\tprevItem.dataset.prev_order_sort = prevItem.dataset.order_sort\r\n\t\t\t\t\t\t\tprevItem.dataset.order_sort = prevOrderSort ;\r\n\t\t\t\t\t\t\tif(prevItem.previousElementSibling === prevItem){\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tprevItem = prevItem.previousElementSibling;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tres();\r\n\t\t\t\t\t}).then(()=>{\r\n\t\t\t\t\t\tthis.#onDropEndChangePositionCallback(\r\n\t\t\t\t\t\t\t[...new Set([...child.filter(e=>e.dataset.order_sort != e.dataset.prev_order_sort && e != target), target])],\r\n\t\t\t\t\t\t\t{item, target, parent}\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n\tset onDropEndChangePositionCallback(callback){\r\n\t\tthis.#onDropEndChangePositionCallback = callback;\r\n\t}\r\n\tget onDropEndChangePositionCallback(){\r\n\t\treturn this.#onDropEndChangePositionCallback;\r\n\t}\r\n\r\n\tset onDropDocumentOutCallback(callback){\r\n\t\tthis.#onDropDocumentOutCallback = callback;\r\n\t}\r\n\tget onDropDocumentOutCallback(){\r\n\t\treturn this.#onDropDocumentOutCallback;\r\n\t}\r\n\r\n\tset onIfCancelCallback(callback){\r\n\t\tthis.#onIfCancelCallback = callback\r\n\t}\r\n\tget onIfCancelCallback(){\r\n\t\treturn this.#onIfCancelCallback;\r\n\t}\r\n\r\n}","export const accountHandler = new class AccountHandler{\r\n    #accountInfo = this.searchAccountInfo();\r\n    static #accountInfoChangeAcceptResolve;\r\n    static accountInfoChangeAcceptPromise = new Promise(resolve => {\r\n        this.#accountInfoChangeAcceptResolve = resolve;\r\n    });\r\n\r\n    static {\r\n        window.myAPI.event.electronEventTrigger.addElectronEventListener('accountInfoChangeAccept', data => {\r\n            console.log(data);\r\n            let {content} = data;\r\n            this.#accountInfoChangeAcceptResolve(content);\r\n            this.accountInfoChangeAcceptPromise = new Promise(resolve=>{\r\n                this.#accountInfoChangeAcceptResolve = resolve;\r\n            })\r\n        })\r\n    }\r\n\r\n    constructor(){\r\n\r\n    }\r\n\r\n    accountInfoChangeAcceptEventListener(callback = ({oldData, newData}) => {}){\r\n        let oldData = undefined;\r\n\t\tlet newData = undefined;\r\n\t\tconst simpleObserver = () => {\r\n\t\t\tAccountHandler.accountInfoChangeAcceptPromise.then((event)=>{\r\n\t\t\t\tnewData = event;\r\n\t\t\t\tcallback({oldData, newData});\r\n\t\t\t\toldData = event;\r\n\t\t\t\tsimpleObserver();\r\n\t\t\t})\r\n\t\t}\r\n\t\tsimpleObserver();\r\n    }\r\n\r\n    async searchAccountInfo(){\r\n        this.#accountInfo = await window.myAPI.account.getAccountInfo().then(result => {\r\n            return result.data;\r\n        });\r\n        return this.#accountInfo;\r\n    }\r\n\r\n    get accountInfo(){\r\n        return this.#accountInfo;\r\n    }\r\n\r\n};","\r\nexport const s3EncryptionUtil = new class S3EncryptionUtil{\r\n\r\n\tencoder = new TextEncoder();\r\n\tdecoder = new TextDecoder();\r\n\r\n\tsignAlgorithm = {\r\n\t\tname: \"RSASSA-PKCS1-v1_5\",\r\n\t\t// Consider using a 4096-bit key for systems that require long-term security\r\n\t\tmodulusLength: 2048,\r\n\t\tpublicExponent: new Uint8Array([0x01, 0x00, 0x01]),\r\n\t\thash: \"SHA-256\",\r\n\t}\r\n\r\n\tsecretAlgorithm = {\r\n\t\tname: \"RSA-OAEP\",\r\n\t\tmodulusLength: 2048,\r\n\t\tpublicExponent: new Uint8Array([0x01, 0x00, 0x01]),\r\n\t\thash: \"SHA-256\",\r\n\t}\r\n\r\n\tasync generateKeyPair(algorithm, keyUsages){\r\n\t\treturn window.crypto.subtle.generateKey(\r\n\t\t\talgorithm,\r\n\t\t\ttrue,\r\n\t\t\tkeyUsages//[\"sign\", \"verify\"]\r\n\t\t);\r\n\t}\r\n\r\n\tasync keySign(data, privateKey){\r\n\t\tlet message = this.encoder.encode(data);\r\n\t\treturn window.crypto.subtle.sign(this.signAlgorithm.name, privateKey, message).then(signature=>{\r\n\t\t\treturn {message, signature};\r\n\t\t})\r\n\t}\r\n\r\n\tasync decryptMessage(privateKey, ciphertext, algorithm) {\r\n\t\treturn window.crypto.subtle.decrypt(\r\n\t\t\t{ name: algorithm.name },\r\n\t\t\tprivateKey,\r\n\t\t\tciphertext,\r\n\t\t).catch(err=>{\r\n\t\t\tconsole.error(err.message);\r\n\t\t\tconsole.error(err.stack);\r\n\t\t});\r\n\t}\r\n\r\n\t\r\n\tasync convertBase64ToBuffer(base64){\r\n\t\treturn fetch(`data:application/octet-binary;base64,${base64}`)\r\n\t\t.then(res=>res.arrayBuffer())\r\n\t\t.then(buffer=>new Uint8Array(buffer))\r\n\t}\r\n\r\n\tasync exportKey(exportType, key){\r\n\t\treturn window.crypto.subtle.exportKey(exportType, key).then(exportKey => {\r\n\t\t\treturn new Promise( resolve => resolve(String.fromCharCode(...new Uint8Array(exportKey))) );\r\n\t\t}).then(exportKeyString => {\r\n\t\t\treturn new Promise( resolve => resolve(window.btoa(exportKeyString)) );\r\n\t\t});\r\n\t}\r\n\tasync callS3PresignedUrl(callFunction, signData, callFunctionParam = {} ){//,fileName, accountName){\r\n\t\tconsole.log('callFunctionParam !!! ',callFunctionParam);\r\n\t\treturn Promise.all( [this.generateKeyPair(this.signAlgorithm, [\"sign\", \"verify\"]), this.generateKeyPair(this.secretAlgorithm, [\"encrypt\", \"decrypt\"])] )\r\n\t\t.then( ([signKeyPair, encDncKeyPair]) => {\r\n\t\t\treturn Promise.all( [\r\n\t\t\t\tthis.exportKey('spki', signKeyPair.publicKey),\r\n\t\t\t\tthis.exportKey('spki', encDncKeyPair.publicKey), \r\n\t\t\t\tPromise.resolve(encDncKeyPair), \r\n\t\t\t\tPromise.resolve(signKeyPair)\r\n\t\t\t] )\t\t\r\n\t\t}).then( async ([exportSignKey, exportEncKey, encDncKeyPair, signKeyPair]) => {\r\n\r\n\t\t\tlet sign = await this.keySign(\r\n\t\t\t\t`${signData}:${exportEncKey}`, \r\n\t\t\t\tsignKeyPair.privateKey\r\n\t\t\t)\r\n\t\t\t\r\n\t\t\tlet result = await callFunction(Object.assign(callFunctionParam, {\r\n\t\t\t\tdata: window.btoa(String.fromCodePoint(...sign.message)), \r\n\t\t\t\tdataKey: exportSignKey, \r\n\t\t\t\tsign: window.btoa( String.fromCodePoint(...new Uint8Array(sign.signature)) ), \r\n\t\t\t}))\r\n\r\n\t\t\tlet {code, data} = result;\r\n\t\t\t\r\n\t\t\tif(code != 0){\r\n\t\t\t\treturn ;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn {data, encDncKeyPair};\r\n\t\t})\r\n\t}\r\n\r\n\tasync fetchPutObject(putUrl, key, md5, fileData){\r\n\t\treturn fetch(putUrl, {\r\n\t\t\tmethod:\"PUT\",\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Encoding' : 'base64',\r\n\t\t\t\t'Content-Type' : 'application/octet-stream',\r\n\t\t\t\t'x-amz-server-side-encryption-customer-algorithm': 'AES256',\r\n\t\t\t\t'x-amz-server-side-encryption-customer-key': key,\r\n\t\t\t\t'x-amz-server-side-encryption-customer-key-md5': md5,\r\n\t\t\t},\r\n\t\t\tbody: fileData\r\n\t\t})\r\n\t}\r\n}","import FreeWillEditor from \"@handler/editor/FreeWillEditor\";\r\nimport Strong from \"@handler/editor/tools/Strong\"\r\nimport Color from \"@handler/editor/tools/Color\"\r\nimport Background from \"@handler/editor/tools/Background\"\r\nimport Strikethrough from \"@handler/editor/tools/Strikethrough\"\r\nimport Underline from \"@handler/editor/tools/Underline\"\r\nimport FontFamily from \"@handler/editor/tools/FontFamily\"\r\nimport Quote from \"@handler/editor/tools/Quote\"\r\nimport NumericPoint from \"@handler/editor/tools/NumericPoint\"\r\nimport BulletPoint from \"@handler/editor/tools/BulletPoint\"\r\nimport Sort from \"@handler/editor/tools/Sort\"\r\nimport FontSize from \"@handler/editor/tools/FontSize\"\r\nimport Italic from \"@handler/editor/tools/Italic\"\r\nimport Image from \"@handler/editor/tools/Image\"\r\nimport Video from \"@handler/editor/tools/Video\"\r\nimport Resources from \"@handler/editor/tools/Resources\";\r\nimport Code from \"@handler/editor/tools/Code\"\r\nimport Hyperlink from \"@handler/editor/tools/Hyperlink\"\r\n\r\nimport {workspaceHandler} from \"@handler/workspace/WorkspaceHandler\";\r\nimport {roomHandler} from \"@handler/room/RoomHandler\";\r\nimport common from \"@root/js/common\"\r\nimport PositionChanger from \"@handler/PositionChangeer\";\r\nimport {noticeBoardHandler} from \"@handler/notice_board/NoticeBoardHandler\";\r\n\r\nimport { accountHandler } from \"@handler/account/AccountHandler\";\r\nimport { s3EncryptionUtil } from \"@handler/S3EncryptionUtil\";\r\n\r\nexport class NoticeBoardLine extends FreeWillEditor{\r\n    static{\r\n        window.customElements.define('notice-board-line', NoticeBoardLine);\r\n    }\r\n\tstatic tools = [\r\n        Strong,\r\n        Color,\r\n        Background,\r\n        Strikethrough,\r\n        Underline,\r\n        FontFamily,\r\n        Quote,\r\n        NumericPoint,\r\n        BulletPoint,\r\n        Sort,\r\n        FontSize,\r\n        Italic,\r\n        Image,\r\n        Video,\r\n        Resources,\r\n        Code,\r\n        Hyperlink,\r\n    ]\r\n\r\n    static option = {\r\n        isDefaultStyle : true\r\n    }\r\n    \r\n    __parentWrapper;\r\n\r\n    constructor(parent){\r\n\r\n\t\tsuper(NoticeBoardLine.tools, NoticeBoardLine.option);\r\n\r\n        this.__parentWrapper = parent;\r\n        \r\n        super.placeholder = ''\r\n        super.spellcheck = true\r\n    }\r\n\r\n}\r\n\r\nexport const noticeBoardDetail = new class NoticeBoardDetail{\r\n\t#memory = {}\r\n\r\n    #element = Object.assign(document.createElement('div'), {\r\n        id: 'notice_board_detail_wrapper',\r\n        innerHTML: `\r\n            <div class=\"notice_board_detail_container list_scroll list_scroll-y\" data-bind_name=\"noticeBoardDetailContainer\">\r\n                <ul class=\"notice_board_detail_content\" data-bind_name=\"noticeBoardDetailList\">\r\n \r\n                </ul>\r\n                <div class=\"toolbar\" style=\"position: fixed; z-index: 2000;\" data-bind_name=\"toolbar\"></div>\r\n            </div>\r\n        `\r\n    })\r\n\r\n\t#elementMap = (()=>{\r\n\t\treturn \t[...this.#element.querySelectorAll('[data-bind_name]')].reduce((total, element) => {\r\n\t\t\ttotal[element.dataset.bind_name] = element;\r\n\t\t\treturn total;\r\n\t\t}, {})\r\n\t})();\r\n\r\n    #positionChanger;\r\n\r\n    /*#prevRange;\r\n    #prevContent;\r\n    #prevStartOffset;\r\n    #prevEndOffset;*/\r\n\r\n    constructor(){\r\n        this.#positionChanger = new PositionChanger({wrapper: this.#elementMap.noticeBoardDetailList});\r\n\t\tthis.#positionChanger.onDropEndChangePositionCallback = (changeList, {item, target, wrapper}) => {\r\n            window.myAPI.noticeBoard.updateNoticeBoardDetailOrder(\r\n                changeList.map(e=>{\r\n                    return {\r\n                        id: e.dataset.id,\r\n                        workspaceId: e.dataset.workspace_id,\r\n                        roomId: e.dataset.room_id,\r\n                        orderSort: e.dataset.order_sort,\r\n                    }\r\n                })\r\n            ).then(result => {\r\n                console.log(result);\r\n            })\r\n        };\r\n\r\n        window.myAPI.event.electronEventTrigger.addElectronEventListener('noticeBoardDetailAccept', (data) => {\r\n            //console.log(data);\r\n            let lastTarget = document.activeElement;\r\n            if(lastTarget.__parentWrapper) lastTarget.dataset.is_update = '';\r\n\r\n            let isEventStream\r\n            if(data && data.serverSentStreamType){\r\n                isEventStream = true;\r\n                data = data.content;\r\n            }\r\n            this.createItemElement(data)\r\n            .then(li => {\r\n                this.#addMemory(li, data.workspaceId, data.roomId, data.noticeBoardId, data.id);\r\n                let list = Object.values(this.#memory[data.workspaceId]?.[data.roomId]?.[data.noticeBoardId] || {})\r\n                .sort((a,b) => Number(b.dataset.order_sort) - Number(a.dataset.order_sort));\r\n                \r\n                this.#positionChanger.addPositionChangeEvent(list);\r\n\r\n                let listObserver = new MutationObserver( (mutationList, observer) => {\r\n                    mutationList.forEach((mutation) => {\r\n                        let {addedNodes, removedNodes} = mutation;\r\n                        let isAddedActiveTarget = [...addedNodes].some(e=> e == lastTarget.__parentWrapper)\r\n                        if( ! isAddedActiveTarget) return;\r\n                        lastTarget.contentEditable = true;\r\n                        let cursorTarget = lastTarget.hasAttribute('is_cursor') ? lastTarget : lastTarget.querySelector('[is_cursor]');\r\n                        if( ! cursorTarget) return;\r\n                        let {'cursor_offset': offset, 'cursor_type': type, 'cursor_index': index, 'cursor_scroll_x': x, 'cursor_scroll_y': y} = cursorTarget.attributes;\r\n                        let selection = window.getSelection();\r\n                        if(type.value == Node.ELEMENT_NODE){\r\n                            let node = cursorTarget.childNodes[index.value]; \r\n                            selection.setPosition(node, offset.value);\r\n                        }else if(type.value == Node.TEXT_NODE){\r\n                            selection.setPosition(cursorTarget, offset.value);\r\n                        }\r\n                    })\r\n                });\r\n                if(lastTarget && lastTarget.__parentWrapper){   \r\n                    listObserver.observe(this.#elementMap.noticeBoardDetailList, {childList:true});\r\n                }\r\n\r\n                this.#elementMap.noticeBoardDetailList.replaceChildren(...list);\r\n\r\n                let appendAwait = setInterval(()=>{\r\n                    if( ! li.isConnected){\r\n                        return;\r\n                    }\r\n                    clearInterval(appendAwait);\r\n                    listObserver.disconnect();\r\n                    lastTarget.removeAttribute('data-is_update');\r\n                }, 50)\r\n            })\r\n        })\r\n\r\n        this.#elementMap.noticeBoardDetailList\r\n        noticeBoardHandler.addNoticeBoardIdChangeListener = {\r\n            name: 'noticeBoardDetailIdChange',\r\n            callback: (handler, data)=>{\r\n                this.#elementMap.noticeBoardDetailList.replaceChildren();\r\n                this.refresh();\r\n                /*if(this.#memory[workspaceHandler.workspaceId]?.[roomHandler.roomId]?.[noticeBoardHandler.noticeBoardId]){\r\n                    this.#memory[workspaceHandler.workspaceId][roomHandler.roomId][noticeBoardHandler.noticeBoardId] = {};\r\n                }*/\r\n            }\r\n        }\r\n\r\n        let toolList = Object.values(NoticeBoardLine.tools).map(e=>e.toolHandler.toolButton);\r\n\r\n        document.addEventListener('selectionchange', event => {\r\n            if(document.activeElement.constructor != NoticeBoardLine){\r\n                return;\r\n            }\r\n            let selection = window.getSelection();\r\n            if (selection.rangeCount == 0){\r\n                return;\r\n            }\r\n            \r\n            /*let range = selection.getRangeAt(0);\r\n\r\n            this.#prevRange = range.cloneRange();\r\n            this.#prevStartOffset = range.startOffset;\r\n            this.#prevEndOffset = range.endOffset;\r\n            this.#prevContent = range.commonAncestorContainer;*/\r\n\r\n            if( ! selection.isCollapsed){\r\n                this.#elementMap.noticeBoardDetailContainer.append(this.#elementMap.toolbar);\r\n                this.#elementMap.toolbar.replaceChildren(...toolList);\r\n                common.processingElementPosition(this.#elementMap.toolbar, window.getSelection().getRangeAt(0).getBoundingClientRect())\r\n            }else{\r\n                this.#elementMap.toolbar.remove();\r\n            }\r\n        })\r\n        this.#elementMap.noticeBoardDetailContainer.addEventListener(\"scroll\", () => {\r\n\t\t\tif(this.#elementMap.toolbar.childElementCount == 0)return;\r\n\t\t\tcommon.processingElementPosition(this.#elementMap.toolbar, window.getSelection().getRangeAt(0).getBoundingClientRect());\r\n\t\t});\r\n        window.addEventListener('resize', (event) => {\r\n\t\t\tif(this.#elementMap.toolbar.childElementCount == 0)return;\r\n            common.processingElementPosition(this.#elementMap.toolbar, window.getSelection().getRangeAt(0).getBoundingClientRect());\r\n\t\t})\r\n    }\r\n\r\n    createItemElement(data){\r\n        return new Promise(resolve=>{\r\n            let li = Object.assign(document.createElement('li'),{\r\n                className : 'notice_board_detail_item'\r\n            });\r\n            li.dataset.is_not_visible_target = '';\r\n            li.style.minHeight = (parseInt(window.getComputedStyle(document.body).fontSize) || 16) * 2 + 'px';\r\n            \r\n            resolve(this.#addItemEvent(li, data));\r\n        })\r\n    }\r\n\r\n    #addItemEvent(li, data){\r\n        return new Promise(resolve=> {\r\n            let addButton = Object.assign(document.createElement('button'), {\r\n                className: 'notice_board_detail_item_add_content',\r\n                textContent: '+'\r\n            });\r\n            let editor = new NoticeBoardLine(li);\r\n            let positionChangeIcon = Object.assign(document.createElement('span'),{\r\n                className: 'notice_board_detail_item_position_change_icon pointer',\r\n                textContent: '〓'\r\n            })\r\n\r\n            let datasetPromise = common.jsonToSaveElementDataset(data, li);\r\n            //console.log(data.content);\r\n            if(data.content){\r\n                let {content} = data;\r\n                delete data.content;\r\n                datasetPromise.then(() => {\r\n                    li.removeAttribute('data-content');\r\n                    \r\n                    NoticeBoardLine.parseLowDoseJSON(editor, content).then(() => {\r\n                        editor.contentEditable = false;\r\n                        li.append(editor);\r\n                        let appendAwait = setInterval(()=>{\r\n                            if( ! editor.isConnected) return;\r\n                            clearInterval(appendAwait);\r\n                            if(editor.isEmpty){\r\n                                editor.remove();\r\n                                li.prepend(addButton);\r\n                            }\r\n                            /*if( ! editor.isEmpty){\r\n                                li.append(positionChangeIcon)\r\n                            }else {\r\n                                editor.remove();\r\n                                li.prepend(addButton);\r\n                            }*/\r\n                        },50)\r\n                    })\r\n                })\r\n            }else{\r\n                li.prepend(addButton);\r\n                editor.startFirstLine();\r\n            }\r\n            li.onmouseenter = () => {\r\n                if(addButton.isConnected){\r\n                    addButton.classList.add('active');\r\n                    return;\r\n                }\r\n                li.draggable = false;\r\n                if( ! editor.isEmpty){\r\n                    li.append(positionChangeIcon)\r\n                }\r\n            }\r\n            li.onmouseleave = () => {\r\n                if(addButton.isConnected){\r\n                    addButton.classList.remove('active');\r\n                    return;\r\n                }\r\n                if(positionChangeIcon.isConnected){\r\n                    positionChangeIcon.remove();\r\n                }\r\n            }\r\n            //let isPositionChangeIconOver = false;\r\n            positionChangeIcon.onmousemove = () => {\r\n                li.draggable = true;\r\n            }\r\n            positionChangeIcon.onmouseover = () => {\r\n                //isPositionChangeIconOver = true;\r\n                li.draggable = true;\r\n            }\r\n            positionChangeIcon.onmouseout = () => {\r\n                //isPositionChangeIconOver = false;\r\n                li.draggable = false;\r\n            }\r\n\r\n            addButton.onclick = (event) => {\r\n                //console.log(event, editor.isConnected);\r\n                editor.contentEditable = true;\r\n                editor.firstLine.innerText = '\\n'\r\n                if(editor.isConnected){\r\n                    return;\r\n                }\r\n                li.append(editor);\r\n                li.append(positionChangeIcon);\r\n                addButton.remove();\r\n                window.getSelection().setPosition(editor, editor.childNodes.length);\r\n            }\r\n            let prevText;\r\n            editor.onclick = () => {\r\n                if(editor.contentEditable == 'false'){\r\n                    editor.contentEditable = true;\r\n                    if(editor.isEmpty){\r\n                        editor.firstLine.innerText = '\\n'\r\n                    }\r\n                    window.getSelection().setPosition(editor, editor.childNodes.length);\r\n                }\r\n            }\r\n            editor.onfocus = (event) => {\r\n                prevText = editor.innerHTML;\r\n            }\r\n            let isScriptBlur = false;\r\n            editor.onblur = (event) => {\r\n                if( ! isScriptBlur && (\r\n                        editor.matches(':hover') || \r\n                        this.#elementMap.toolbar.matches(':hover') || \r\n                        document.activeElement == editor ||\r\n                        editor.hasAttribute('data-is_update')\r\n                    )\r\n                ){\r\n                    event.preventDefault();\r\n                    return;\r\n                }\r\n                if(isScriptBlur){\r\n                    isScriptBlur = ! isScriptBlur;\r\n                }\r\n                this.#elementMap.toolbar.remove();\r\n                editor.contentEditable = false;\r\n                if( ! event.relatedTarget?.hasAttribute('data-tool_status')){\r\n                    this.#elementMap.toolbar.remove();\r\n                }\r\n                if(editor.isEmpty){\r\n                    editor.replaceChildren();\r\n                    editor.remove();\r\n                    positionChangeIcon.remove();\r\n                    li.prepend(addButton);\r\n                    if(li.matches(':hover')){\r\n                        addButton.classList.add('active');\r\n                    }else{\r\n                        addButton.classList.remove('active');\r\n                    }\r\n                    //return ;\r\n                }else if(prevText == editor.innerHTML){\r\n                    return;\r\n                }\r\n                prevText = editor.innerHTML;\r\n                \r\n                let param = {\r\n                    id: li.dataset.id,\r\n                    noticeBoardId: noticeBoardHandler.noticeBoardId,\r\n                    roomId: roomHandler.roomId,\r\n                    workspaceId: workspaceHandler.workspaceId,\r\n                    orderSort: li.dataset.order_sort //([...this.#elementMap.noticeBoardDetailList.children].findIndex(e=>e==li) - 1) * -1,\r\n                };\r\n                this.#uploadNoticeBoard(editor, param);\r\n            }\r\n            editor.onkeydown = (event) => {\r\n                let {altKey, ctrlKey, shiftKey, key} = event;\r\n                if(key == 'Enter' && (altKey || ctrlKey || shiftKey)){\r\n                    event.preventDefault();\r\n                    let LineBreakMode;\r\n                    if(altKey){\r\n                        LineBreakMode = FreeWillEditor.LineBreakMode.NEXT_LINE_FIRST\r\n                    }else if(ctrlKey){\r\n                        LineBreakMode = FreeWillEditor.LineBreakMode.NEXT_LINE_LAST\r\n                    }else{\r\n                        LineBreakMode = FreeWillEditor.LineBreakMode.NO_CHANGE\r\n                    }\r\n                    editor.lineBreak(LineBreakMode);\r\n                }else if(key == 'Enter'){// && editor.innerText.replaceAll('\\n', '') != ''){\r\n                    event.preventDefault();\r\n                    isScriptBlur = true;\r\n                    editor.blur();\r\n                }\r\n            }\r\n\r\n            resolve(li);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {NoticeBoardLine} editor \r\n     * @param {Object} param\r\n     */\r\n    async #uploadNoticeBoard(editor, param){\r\n        let promiseList = [];\r\n\r\n        editor.contentEditable = false;\r\n        NoticeBoardLine.getLowDoseJSON(editor, {\r\n            afterCallback : (json) => {\r\n                if(json.tagName != Image.toolHandler.defaultClass && \r\n                    json.tagName != Video.toolHandler.defaultClass &&\r\n                    json.tagName != Resources.toolHandler.defaultClass\r\n                ){\r\n                    return;\r\n                }else if(json.data.hasOwnProperty('is_upload_end')){\r\n                    return;\r\n                }\r\n                let node = json.node;\r\n                let file = node.selectedFile;\r\n                json.data.is_loading = '';\r\n                console.log(node, file);\r\n                let fileType;\r\n                if(json.tagName == Image.toolHandler.defaultClass){\r\n                    fileType = 'IMAGE';\r\n                }else if(json.tagName == Video.toolHandler.defaultClass){\r\n                    fileType = 'VIDEO';\r\n                }else {\r\n                    fileType = 'FILE';\r\n                }\r\n                promiseList.push(new Promise(async resolve => {\r\n\r\n                    let {name, size, lastModified, contentType, newFileName} = await common.underbarNameToCamelName(json.data);\r\n                    let putSignData = `${roomHandler.roomId}:${workspaceHandler.workspaceId}:${name}:${accountHandler.accountInfo.accountName}`;\r\n                    let isUpload = await s3EncryptionUtil.callS3PresignedUrl(window.myAPI.s3.generateSecurityPutObjectPresignedUrl, putSignData, {newFileName, fileType, uploadType: 'NOTICE'})\r\n                    .then( (result) => {\r\n                        if(! result){\r\n                            return;\r\n                        }\r\n                        let {data, encDncKeyPair} = result;\r\n\r\n                        json.data.new_file_name = data.newFileName;\r\n\r\n                        return Promise.all([\r\n                            s3EncryptionUtil.convertBase64ToBuffer(data.encryptionKey).then( async (buffer) => {\r\n                                return s3EncryptionUtil.decryptMessage(encDncKeyPair.privateKey, buffer, s3EncryptionUtil.secretAlgorithm)\r\n                                    .then(buf=>String.fromCharCode(...new Uint8Array(buf)))\r\n                            }),\r\n                            s3EncryptionUtil.convertBase64ToBuffer(data.encryptionMd).then( async (buffer) => {\r\n                                return s3EncryptionUtil.decryptMessage(encDncKeyPair.privateKey, buffer, s3EncryptionUtil.secretAlgorithm)\r\n                                    .then(buf=>String.fromCharCode(...new Uint8Array(buf)))\r\n                            })\r\n                        ]).then( async ([k,m]) => {\r\n                            /*let base64 = json.data.base64;\r\n                            if(! base64){\r\n                                let blob = await fetch(json.data.url).then(res=>res.blob())\r\n                                base64 = await new Promise(resolve => {\r\n                                    const reader = new FileReader();\r\n                                    reader.readAsDataURL(blob);\r\n                                    reader.onloadend = () => {\r\n                                        resolve(reader.result);\r\n                                    }\r\n                                });\r\n                            }*/\r\n                            let res = await s3EncryptionUtil.fetchPutObject(data.presignedUrl, k, m, file.files[0]);\r\n                            if( ! (res.status == 200 || res.status == 201) ){\r\n                                return;\r\n                            }\r\n                            return true;\r\n                        })\r\n                    })\r\n                    console.log(isUpload);\r\n                    if( ! isUpload){\r\n                        resolve();\r\n                        return;\r\n                    }\r\n                    let getSignData = `${roomHandler.roomId}:${workspaceHandler.workspaceId}:${json.data.new_file_name}:${accountHandler.accountInfo.accountName}`;\r\n                    \r\n                    s3EncryptionUtil.callS3PresignedUrl(window.myAPI.s3.generateSecurityGetObjectPresignedUrl, getSignData, {fileType, uploadType: 'NOTICE'})\r\n                    .then( (result) => {\r\n                        if(! result){\r\n                            return;\r\n                        }\r\n                        let {data, encDncKeyPair} = result;\r\n\r\n                        json.data.url = data.presignedUrl;\r\n                        delete json.data.base64\r\n                        json.data.upload_type = 'NOTICE';\r\n                        resolve(json);\r\n                    })\r\n                }))\r\n            }\r\n        }).then(jsonList => {\r\n\r\n            param.content = JSON.stringify(jsonList);\r\n            if(param.content.length == 0) param.content = undefined\r\n            window.myAPI.noticeBoard.createNoticeBoardDetail(param).then(res=>{\r\n                let {data} = res\r\n                this.innerText = '';\r\n                Promise.all(promiseList).then((fileTargetList) => {\r\n                    console.log(fileTargetList);\r\n                    if(fileTargetList.length == 0){\r\n                        //window.getSelection().setPosition(this, 1)\r\n                        return;\r\n                    }\r\n                    fileTargetList.forEach(e=>{\r\n                        delete e.data.is_loading\r\n                        e.data.is_upload_end = '';\r\n                        e.data.room_id = param.roomId;\r\n                        e.data.workspace_id = param.workspaceId;\r\n                    });\r\n                    param.content = JSON.stringify(jsonList);\r\n                    if(param.content.length == 0) param.content = undefined\r\n                    window.myAPI.noticeBoard.createNoticeBoardDetail(param).then(response=>{\r\n                        //window.getSelection().setPosition(this, 1)\r\n                    });\r\n                })\r\n            });\r\n            \r\n        })\r\n    }\r\n\r\n    #callData(){\r\n        return window.myAPI.noticeBoard.searchNoticeBoardDetailList({\r\n            workspaceId: workspaceHandler.workspaceId, \r\n            roomId: roomHandler.roomId,\r\n            noticeBoardId : noticeBoardHandler.noticeBoardId\r\n        })\r\n    }\r\n\r\n    #addMemory(data, workspaceId, roomId, noticeBoardId, id){\r\n\t\tif( ! this.#memory.hasOwnProperty(workspaceId)){\r\n\t\t\tthis.#memory[workspaceId] = {};\r\n\t\t}\r\n\t\tif( ! this.#memory[workspaceId].hasOwnProperty(roomId)){\r\n\t\t\tthis.#memory[workspaceId][roomId] = {} ;\r\n\t\t}\r\n        if( ! this.#memory[workspaceId][roomId].hasOwnProperty(noticeBoardId)){\r\n            this.#memory[workspaceId][roomId][noticeBoardId] = {}\r\n        }\r\n        \r\n        this.#memory[workspaceId][roomId][noticeBoardId][id] = data;\r\n\t\t\r\n    }\r\n    async refresh(){\r\n        let list = Object.values(this.#memory[workspaceHandler.workspaceId]?.[roomHandler.roomId]?.[noticeBoardHandler.noticeBoardId] || {})\r\n        .sort((a,b) => Number(b.dataset.order_sort) - Number(a.dataset.order_sort));\r\n        if(list.length == 0){\r\n            this.#callData();\r\n            return;\r\n        }\r\n        this.#positionChanger.addPositionChangeEvent(list);\r\n        this.#elementMap.noticeBoardDetailList.replaceChildren(...list);  \r\n\r\n\t}\r\n\r\n\tget element(){\r\n\t\treturn this.#element;\r\n\t}\r\n\t\r\n\tget elementMap(){\r\n\t\treturn this.#elementMap;\r\n\t}\r\n}","/**\r\n * indexedDB 템플릿 (미완성)\r\n * @author mou123\r\n * @constructor\r\n */\r\nexport default class IndexedDBHandler{\r\n\t/**\r\n\t * indexed db에서 사용할 db 식별 명칭\r\n\t */\r\n\t#dbName;\r\n\r\n\t/**\r\n\t * indexed db의 store에서 사용 할 컬럼 정보\r\n\t */\r\n\t#columnInfo;\r\n\r\n\t/**\r\n\t * store 식별 명칭\r\n\t */\r\n\t#storeName;\r\n\r\n\t#db;\r\n\r\n\tisOpen = false;\r\n\r\n\t#container;\r\n\r\n\t#keyPathNameList\r\n\r\n\t#pkAutoIncrement\r\n\r\n\t/**\r\n\t * 생성자\r\n\t * @author mozu123\r\n\t * @example \t\r\n\t#columnInfo = {\r\n\t\tboTempId:['boTempId','boTempId',{unique : true}],\r\n\t\tboTempName:['boTempName','boTempName'],\r\n\t\tboTempInsertTime:['boTempInsertTime','boTempInsertTime'],\r\n\t\tboTempData:['boTempData','boTempData']\r\n\t};\r\n\t */\r\n\tconstructor({\r\n\t\tdbName = undefined,\r\n\t\tcolumnInfo = undefined,\r\n\t\tstoreName = undefined,\r\n\t\tkeyPathNameList = [],\r\n\t\tpkAutoIncrement = true\r\n\t}){\r\n\t\tif( ! dbName ){\r\n\t\t\tthrow new Error('dbName is undefined');\r\n\t\t}else if( ! columnInfo ){\r\n\t\t\tthrow new Error('columnInfo is undefined');\r\n\t\t}else if( ! storeName ){\r\n\t\t\tthrow new Error('storeName is undefined')\r\n\t\t}else if( keyPathNameList.length == 0 ){\r\n\t\t\tthrow new Error('keyPathName is undefined')\r\n\t\t}else if(keyPathNameList.filter(e=>columnInfo[e]).length != keyPathNameList.length){\r\n\t\t\tthrow new Error('invalid key path name')\r\n\t\t}else if(pkAutoIncrement == true && keyPathNameList.length > 1){\r\n\t\t\tthrow new Error('multiple key not use autoIncrement : true');\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.#dbName = dbName;\r\n\t\t\tthis.#columnInfo = columnInfo;\r\n\t\t\tthis.#storeName = storeName;\t\r\n\t\t\tthis.#container = JSON.stringify(\r\n\t\t\t\tObject.entries(columnInfo).reduce((obj, [k,v], idx) => {\r\n\t\t\t\t\tobj[k] = undefined;\r\n\t\t\t\t\treturn obj;\r\n\t\t\t\t}, {})\r\n\t\t\t)\r\n\t\t\tthis.#keyPathNameList = keyPathNameList;\r\n\t\t\tthis.#pkAutoIncrement = pkAutoIncrement;\r\n\t\t}\r\n\t}\r\n\r\n\topen(){\r\n\t\treturn new Promise( (resolve, reject) => {\r\n\r\n\t\t\tconst dbOpenRequest = indexedDB.open(this.DB_NAME);\r\n\t\t\t/**\r\n\t\t\t * db open시 기존 버전 정보를 비교하였을 때, 업그레이드가 필요한 경우 동작하는 이벤트를 정의한다.\r\n\t\t\t * @author mozu123\r\n\t\t\t * @param {Event} e \r\n\t\t\t * @returns \r\n\t\t\t * @see this.upgradeneeded()\r\n\t\t\t */\r\n\t\t\tdbOpenRequest.onupgradeneeded = (e) => this.upgradeneeded(e,{});\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * db open시 동작하는 이벤트를 정의한다.\r\n\t\t\t * @param {Event} e \r\n\t\t\t */\r\n\t\t\tdbOpenRequest.onsuccess = (e) => {\r\n\r\n\t\t\t\tthis.isOpen = true;\r\n\t\t\t\tthis.#db = e.target.result;\r\n\t\t\t\tlet storeName = Object.entries(this.#db.objectStoreNames).find(([idx, storeName]) => storeName == this.DB_STORE_NAME)\r\n\t\t\t\tlet isNewAddStore = ! storeName;\r\n\r\n\t\t\t\tlet isNeedChangeIndex = false;\r\n\r\n\t\t\t\tif( ! isNewAddStore){\r\n\t\t\t\t\tlet store = this.#db.transaction(this.DB_STORE_NAME, 'readwrite').objectStore(this.DB_STORE_NAME);\r\n\t\t\t\t\tlet indexNamesMapper = Object.entries(store.indexNames).reduce((t,[idx,indexName])=>{\r\n\t\t\t\t\t\tt[indexName]=idx\r\n\t\t\t\t\t\treturn t;\r\n\t\t\t\t\t},{});\r\n\t\t\t\t\tisNeedChangeIndex = \r\n\t\t\t\t\t\tObject.entries(indexNamesMapper).findIndex(([name,idx]) => ! this.#columnInfo[name] ) != -1 ||\r\n\t\t\t\t\t\tObject.entries(this.#columnInfo).findIndex(([k,v])=> ! indexNamesMapper[k] ) != -1\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif( isNewAddStore || isNeedChangeIndex ){\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet newVersion = Number(this.#db.version) + 1;\r\n\t\t\t\t\tconsole.log(this.#storeName, newVersion);\r\n\t\t\t\t\t// 기존 버전과 비교하였을 때 변경사항이 있어서 업그레이드(기존 정보 마이그레이션)가 필요 한 경우\r\n\t\t\t\t\tconsole.log(dbOpenRequest);\r\n\t\t\t\t\tthis.close().then( closeResult => {\r\n\t\t\t\t\t\tconst secondOpenRequest = indexedDB.open(this.DB_NAME, newVersion);\r\n\t\t\t\t\t\tconsole.log(secondOpenRequest)\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * DB에 변동사항이 생겨 업그레이드가 필요하다면, 기존 db를 닫은 후 다시 열어서 신규 정보를 업그레이드 하는 이벤트가 동작하도록 한다.\r\n\t\t\t\t\t\t * @author mozu123\r\n\t\t\t\t\t\t * @param {Event} event \r\n\t\t\t\t\t\t * @returns \r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tsecondOpenRequest.onupgradeneeded = (event) => this.upgradeneeded(event, {isNewAddStore:isNewAddStore});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * 위에 입력된 로직에 따라 업그레이드가 완료된 경우 이 이벤트가 동작한다.\r\n\t\t\t\t\t\t * @author mozu123\r\n\t\t\t\t\t\t * @param {Event} event \r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tsecondOpenRequest.onsuccess = (event) => {\r\n\t\t\t\t\t\t\tthis.isOpen = true;\r\n\t\t\t\t\t\t\tthis.#db = event.target.result;\r\n\t\t\t\t\t\t\tresolve(this.isOpen);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsecondOpenRequest.onblocked = (e) => {\r\n\t\t\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tresolve(this.isOpen);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdbOpenRequest.onblocked = (e) => {\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * db open시 어떤 이유로 인해 오류가 발생할 때 동작하는 이벤트\r\n\t\t\t * @param {Event} e \r\n\t\t\t */\r\n\t\t\tdbOpenRequest.onerror = (e) => {\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t\tthis.isOpen = false;\r\n\t\t\t\tif(e.target.error.name == 'VersionError'){\r\n\t\t\t\t\t//error code\r\n\t\t\t\t\treject(new Error('VersionError: DB 버전을 수동으로 입력해선 안됩니다.'));\r\n\t\t\t\t}else{\r\n\t\t\t\t\t//error code\r\n\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\treject(new Error(`unknownError ${e}`))\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tclose(){\r\n\t\treturn new Promise( resolve => {\r\n\t\t\tif( ! this.#db || ! this.isOpen){\r\n\t\t\t\tresolve(false)\r\n\t\t\t}\r\n\t\t\tthis.#db.onabort = (e) => console.log(e)\r\n\t\t\tthis.#db.onerror = (e) => console.log(e);\r\n\t\t\tthis.#db.close();\r\n\t\t\tthis.isOpen = false;\r\n\t\t\tthis.#db.onclose = (event) => {\r\n\t\t\t\tthis.isOpen = false;\r\n\t\t\t\tresolve(true)\r\n\t\t\t}\r\n\t\t\tresolve(true);\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * DB NAME을 가져오는 getter\r\n\t * @author mou123\r\n\t */\r\n\tget DB_NAME(){\r\n\t\treturn this.#dbName;\r\n\t}\r\n\r\n\t/**\r\n\t * @author mou123\r\n\t */\r\n\tget DB_STORE_NAME(){\r\n\t\treturn this.#storeName;\r\n\t}\r\n\r\n\tget COLUMN_INFO(){\r\n\t\treturn this.#columnInfo;\r\n\t}\r\n\r\n\tget template(){\r\n\t\treturn JSON.parse(this.#container);\r\n\t}\r\n\r\n\t/**\r\n\t * indexed DB를 open 할 때 업그레이드 필요 여부에 따라 동작하는 함수를 정의한다.\r\n\t * @author mou123\r\n\t * @param {Event} event \r\n\t * @param {Object} isNewAddStore : 새롭게 등록되어야 할 store인지 여부 \r\n\t */\r\n\tupgradeneeded(event,{isNewAddStore=false}){\r\n\r\n\t\tlet objectStore;\r\n\t\t// newVersion이 oldVersion과 같지 않고 && oldVersion이 0이 아니며 *(최초 오픈시 0임) && 신규 store를 등록하는 것이 아니라면\r\n\t\tif(event.newVersion != event.oldVersion && event.oldVersion != 0 && ! isNewAddStore){\r\n\t\t\tobjectStore = event.target.transaction.objectStore(this.DB_STORE_NAME);\r\n\t\t\tlet indexNameList = Object.entries(objectStore.indexNames);\r\n\t\t\tlet oldIndexCheckMapper = indexNameList.reduce((t,[idx,indexName])=>{\r\n\t\t\t\tt[indexName]=idx\r\n\t\t\t\treturn t;\r\n\t\t\t},{});\r\n\t\t\t\r\n\t\t\tObject.entries(this.#columnInfo).forEach(([indexName, column])=>{\r\n\t\t\t\tif( ! oldIndexCheckMapper[ column[0] ]){\r\n\t\t\t\t\tobjectStore.createIndex(...column);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tindexNameList.forEach(([k,indexName])=>{\r\n\t\t\t\tif( ! this.#columnInfo[indexName]){\r\n\t\t\t\t\tobjectStore.deleteIndex(indexName);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}else{\r\n\t\t\t//let keyPath = Object.values(this.#columnInfo).find(column => column.some(e=>e.unique))[0];\r\n\t\t\tlet keyPath = this.#pkAutoIncrement || this.#keyPathNameList.length == 1 ? this.#keyPathNameList[0] : this.#keyPathNameList\r\n\t\t\tobjectStore = event.target.result.createObjectStore(this.DB_STORE_NAME, { keyPath , autoIncrement : this.#pkAutoIncrement });\r\n\t\t\tObject.entries(this.#columnInfo).forEach( ([indexName, column]) => objectStore.createIndex(...column) );\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * indexed db에 데이터를 저장하는 함수\r\n\t * @param {Object} data : indexed db에 저장할 데이터 \r\n\t * @returns {Promise}\r\n\t */\r\n\taddItem(data = this.#container){\r\n\t\treturn new Promise( (resolve, reject ) => {\r\n\t\t\tif( ! this.isOpen || ! this.#db){\r\n\t\t\t\treject(new Error('indexedDB가 열려있지 않습니다.'));\r\n\t\t\t}\r\n\t\t\tlet transaction = this.#db.transaction(this.DB_STORE_NAME, 'readwrite')\r\n\t\t\tlet store = transaction.objectStore(this.DB_STORE_NAME);\r\n\t\t\tlet request = store.put(data);\r\n\t\t\trequest.onsuccess = (e) => {\r\n\t\t\t\ttransaction.commit();\r\n\t\t\t}\r\n\t\t\trequest.onerror = (e) => {\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t}\r\n\t\t\ttransaction.oncomplete = (e)=>{\r\n\t\t\t\tif(e.type == 'complete'){\r\n\t\t\t\t\t//alert('임시 저장을 완료하였습니다.');\r\n\t\t\t\t\t//console.log(e.type);\r\n\t\t\t\t}\r\n\t\t\t\tresolve(e);\r\n\t\t\t}\r\n\t\t\ttransaction.onerror = (e)=>{\r\n\t\t\t\t//error code\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t\treject(new Error('commit error'))\r\n\t\t\t}\r\n\t\t\t//return resolve();\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * 임시 저장 버튼 클릭시 동작할 함수\r\n\t * @author mozu123\r\n\t * @param {Object} data \r\n\t */\r\n\t/*tempSaveButtonClickEvent(data){\r\n\t\tif( ! data){\r\n\t\t\tthrow new Error('임시 저장 할 데이터가 비어 있습니다.');\r\n\t\t}\r\n\t\tlet boTempName = window.prompt('임시 저장 내용을 식별할 명칭을 지정해주세요.\\n입력하지 않을시 현재 시간으로 저장됩니다.', new Date().toLocaleString());\r\n\t\tthis.addTempItem(data, boTempName);\r\n\t}*/\r\n\r\n\t/**\r\n\t * 임시 저장 목록에서 특정 조건을 만족하는 데이터만 추출할 떄 사용 할 함수 -> 미완성 (안만듬)\r\n\t * @param {Object} param0 : 필터 검색 조건 데이터 \r\n\t * @returns \r\n\t */\r\n\t//getTempFilterList({boTempId, boTempName, boTempInsertTime, pageNum=1, pageSize=5, startDateTime, endDateTime}){}\r\n\t\r\n\tgetItem(key){\r\n\t\treturn new Promise( (resolve, reject) => {\r\n\t\t\tlet transaction = this.#db.transaction(this.DB_STORE_NAME, 'readonly');\r\n\t\t\tlet objectStore = transaction.objectStore(this.DB_STORE_NAME);\r\n\t\t\tlet request = objectStore.get(key);\r\n\t\t\trequest.onerror = (event) => {\r\n\t\t\t\tconsole.error(event);\r\n\t\t\t\treject(request);\r\n\t\t\t}\r\n\r\n\t\t\trequest.onsuccess = (event) => {\r\n\t\t\t\tresolve(request);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * 임시 저장 목록을 불러오는 함수 pageNum의 기본값은 1, pageSize의 기본값은 5\r\n\t * @author mozu123\r\n\t * @param {Object} param0 : 페이지 정보를 가지고 있는 객체\r\n\t */\r\n\tgetList({pageNum=1, pageSize=5, callback, readOption = 'readonly'} = {}){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\r\n\t\t\tlet start = (pageSize * (pageNum - 1));\r\n\t\t\tlet isEnableAdvanced = start != 0; \r\n\t\t\tlet count = 0;\r\n\t\t\tlet transaction = this.#db.transaction(this.DB_STORE_NAME, readOption)\r\n\t\t\tlet store = transaction.objectStore(this.DB_STORE_NAME);\r\n\t\t\tlet result = {\r\n\t\t\t\tdata:[],\r\n\t\t\t\tevent:undefined\r\n\t\t\t};\r\n\t\t\tlet cursorRequest = store.openCursor()\r\n\t\t\tcursorRequest.onsuccess = (event) => {\r\n\t\t\t\tconst cursor = event.target.result;\r\n\t\t\t\tif( ! cursor ){\r\n\t\t\t\t\treturn ;\r\n\t\t\t\t}else if(isEnableAdvanced){\r\n\t\t\t\t\tisEnableAdvanced = ! isEnableAdvanced\r\n\t\t\t\t\tcursor.advance(start);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(callback instanceof Function){\r\n\t\t\t\t\tcallback(cursor);\r\n\t\t\t\t}\r\n\t\t\t\tlet value = cursor.value;\r\n\t\t\t\tresult.data.push(value);\r\n\t\t\t\tcount += 1;\r\n\t\t\t\t\r\n\t\t\t\tif(count >= pageSize){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcursor.continue();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\ttransaction.oncomplete = (event) => {\r\n\t\t\t\tresult.event = event;\r\n\t\t\t\treturn resolve(result);\r\n\t\t\t}\r\n\t\t\ttransaction.onerror = (e) => reject(e);\r\n\t\t\ttransaction.onabort = (e) => reject(e);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * 임시 저장 목록 중 특정 row를 삭제하는 함수\r\n\t * @author mozu123\r\n\t * @param  {...String} idList : 삭제 할 id 목록\r\n\t * @returns {Promise} result : 삭제 몇건 했는지 count 한 정보를 담은 Object\r\n\t */\r\n\tdeleteList(...idList){\r\n\t\tif(idList.length == 0){\r\n\t\t\treturn Promise.resolve()\r\n\t\t}\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tlet transaction = this.#db.transaction(this.DB_STORE_NAME, 'readwrite')\r\n\t\t\tlet store = transaction.objectStore(this.DB_STORE_NAME);\r\n\t\t\tlet result = {successCount:0, failedCount:0};\r\n\t\t\tidList.forEach(id=>{\r\n\t\t\t\tlet request = store.delete([id]);\r\n\t\t\t\trequest.onsuccess = (e)=>{\r\n\t\t\t\t\tresult.successCount += 1;\r\n\t\t\t\t\ttransaction = e.target.transaction;\r\n\t\t\t\t}\r\n\t\t\t\trequest.onerror = (e)=>{\r\n\t\t\t\t\tresult.failedCount += 1;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\ttransaction.commit();\r\n\t\t\ttransaction.oncomplete = (event) => {\r\n\t\t\t\tresult.event = event;\r\n\t\t\t\treturn resolve(result);\r\n\t\t\t}\r\n\t\t\ttransaction.onerror = (e) => reject(e);\r\n\t\t\ttransaction.onabort = (e) => reject(e);\r\n\t\t})\r\n\t}\r\n\r\n\tdeleteDatabase(dbName){\r\n\t\treturn new Promise( (resolve, reject) => {\r\n\t\t\t\r\n\t\t\tlet deleteReuqest = indexedDB.deleteDatabase(dbName);\r\n\t\t\tdeleteReuqest.onerror = (event) => {\r\n\t\t\t\tconsole.error(event);\r\n\t\t\t\treject(event);\r\n\t\t\t}\r\n\t\t\tdeleteReuqest.onsuccess = (event) => {\r\n\t\t\t\tconsole.log(event);\r\n\t\t\t\tresolve(event);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n}","\r\nimport {roomHandler} from \"@handler/room/RoomHandler\"\r\n\r\nimport Image from \"@handler/editor/tools/Image\"\r\nimport Video from \"@handler/editor/tools/Video\"\r\nimport Resources from \"@handler/editor/tools/Resources\"\r\nimport FontSize from \"@handler/editor/tools/FontSize\"\r\n\r\nimport { accountHandler } from \"@handler/account/AccountHandler\"\r\nimport { s3EncryptionUtil } from \"@handler/S3EncryptionUtil\"\r\nimport {workspaceHandler} from \"@handler/workspace/WorkspaceHandler\"\r\nimport IndexedDBHandler from \"@handler/IndexedDBHandler\"\r\n\r\nimport common from \"@root/js/common\";\r\n\r\nFontSize.unit = 'rem';\r\nFontSize.min = 0.1;\r\nFontSize.max = 5;\r\nFontSize.weight = 0.1;\r\n\r\nexport default class CommonInit{\r\n\t#oneDay = 1000 * 60 * 60 * 24;\r\n\tconstructor(pageName){\r\n\t\t/*\r\n\t\tindexedDBHandler.open().then(()=>{\r\n\t\t\tindexedDBHandler.addItem({\r\n\t\t\t\tfileName:'test',\r\n\t\t\t\tlastModified:'1111',\r\n\t\t\t\ttargetId: '1',\r\n\t\t\t\tuploadType: 'abcd'\r\n\t\t\t});\r\n\t\t})\r\n\t\t*/\r\n\t\twindow.addEventListener('load', async () => {\r\n\t\t\tconst indexedDBHandler = new IndexedDBHandler({\r\n\t\t\t\tdbName: 'fileDB-main-page',\r\n\t\t\t\tstoreName: `s3Memory-main-page`,\r\n\t\t\t\tcolumnInfo: {\r\n\t\t\t\t\tfileName: ['fileName', 'fileName', {unique : true}],\r\n\t\t\t\t\toriginFileName: ['originFileName', 'originFileName'],\r\n\t\t\t\t\tfileData : ['fileData', 'fileData'],\r\n\t\t\t\t\tlastModified: ['lastModified', 'lastModified'],\r\n\t\t\t\t\tuploadType: ['uploadType', 'uploadType'],\r\n\t\t\t\t\troomId: ['roomId', 'roomId'],\r\n\t\t\t\t\tworkspaceId: ['workspaceId', 'workspaceId']\r\n\t\t\t\t},\r\n\t\t\t\tkeyPathNameList: ['fileName'],\r\n\t\t\t\tpkAutoIncrement : false\r\n\t\t\t});\r\n\t\t\tconst dbOpenPromise = indexedDBHandler.open();\r\n\r\n\t\t\tconst imageOrVideoCallback = async (targetTools) => {\r\n\t\t\t\tif(targetTools.hasAttribute('data-is_loading')){\r\n\t\t\t\t\tlet uploadLoading = targetTools.querySelector('[data-upload_loading]');\r\n\t\t\t\t\tif( ! uploadLoading){\r\n\t\t\t\t\t\tuploadLoading = Object.assign(document.createElement('div'), {\r\n\t\t\t\t\t\t\tclassName: 'upload_loading',\r\n\t\t\t\t\t\t\tinnerHTML: `\r\n\t\t\t\t\t\t\t<div class=\"upload_loading_container\">\r\n\t\t\t\t\t\t\t\t<span>컨텐츠를 업로드 중입니다</span>\r\n\t\t\t\t\t\t\t\t<span class=\"status_text_elipsis\" data-status_text_elipsis></span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tuploadLoading.dataset.upload_loading = '';\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tuploadLoading.className = 'upload_loading'\r\n\t\t\t\t\t\tuploadLoading.querySelector('[data-status_text_elipsis]').className = 'upload_loading'; \r\n\t\t\t\t\t}\r\n\t\t\t\t\ttargetTools.append(uploadLoading);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tlet fileType;\r\n\t\t\t\tif(targetTools.constructor == Image){\r\n\t\t\t\t\tfileType = 'IMAGE';\r\n\t\t\t\t}else if(targetTools.constructor == Video){\r\n\t\t\t\t\tfileType = 'VIDEO';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tfileType = 'FILE';\r\n\t\t\t\t}\r\n\t\t\t\tconst isHasRememberFile = await new Promise(resolve => {\r\n\t\t\t\t\t/*if(targetTools.constructor == Resources){\r\n\t\t\t\t\t\tresolve({result: undefined});\r\n\t\t\t\t\t}*/\r\n\t\t\t\t\tdbOpenPromise.then(() => {\r\n\t\t\t\t\t\tnew Promise(res=>{\r\n\t\t\t\t\t\t\tindexedDBHandler.getList({\r\n\t\t\t\t\t\t\t\tpageNum : 1, \r\n\t\t\t\t\t\t\t\tpageSize : 99999, \r\n\t\t\t\t\t\t\t\treadOption: 'readwrite', \r\n\t\t\t\t\t\t\t\tcallback: (cursor)=>{\r\n\t\t\t\t\t\t\t\t\tif(cursor.value.lastModified < new Date().getTime() - this.#oneDay){\r\n\t\t\t\t\t\t\t\t\t\tcursor.delete();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}).then(result=>{\r\n\t\t\t\t\t\t\t\tres();\r\n\t\t\t\t\t\t\t\t/*let deleteTargetList = result.data.filter(e=>{\r\n\t\t\t\t\t\t\t\t\tlet lastModified = parseInt(e.lastModified);\r\n\t\t\t\t\t\t\t\t\treturn lastModified - this.#oneDay <= new Date().getTime() - this.#oneDay;\r\n\t\t\t\t\t\t\t\t}).map(e=>e.fileName);\r\n\t\t\t\t\t\t\t\tindexedDBHandler.deleteList(deleteTargetList).then((deleteResult) => {\r\n\t\t\t\t\t\t\t\t\tres();\r\n\t\t\t\t\t\t\t\t});*/\r\n\t\t\t\t\t\t\t}).catch((err)=>{\r\n\t\t\t\t\t\t\t\tconsole.error(err)\r\n\t\t\t\t\t\t\t\tres();\r\n\t\t\t\t\t\t\t})\t\r\n\t\t\t\t\t\t}).then(() => {\r\n\t\t\t\t\t\t\tindexedDBHandler.getItem(targetTools.dataset.new_file_name).then(result=>{\r\n\t\t\t\t\t\t\t\tresolve(result);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\r\n\t\t\t\tif(isHasRememberFile.result){\r\n\t\t\t\t\tlet url = window.URL.createObjectURL(isHasRememberFile.result.fileData, targetTools.dataset.content_type)\r\n\t\t\t\t\ttargetTools.dataset.url = url;\r\n\t\t\t\t\tif(targetTools.image){\r\n\t\t\t\t\t\ttargetTools.image.src = url;\r\n\t\t\t\t\t}else if(targetTools.video){\r\n\t\t\t\t\t\ttargetTools.video.src = url;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t//targetTools.resources.data = url;\r\n\t\t\t\t\t\ttargetTools.resourcesUrl = url;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet startPromise = new Promise(resolve => {\r\n\r\n\t\t\t\t\tlet {size, rank, rankText} = common.shortenBytes(targetTools.dataset.size);\r\n\r\n\t\t\t\t\tif(size >= 10 && rank >= 2){\r\n\t\t\t\t\t\tlet filePreview = targetTools.querySelector('[data-file_preview]');\r\n\t\t\t\t\t\tif( ! filePreview){\r\n\t\t\t\t\t\t\tfilePreview = Object.assign(document.createElement('div'), {\r\n\t\t\t\t\t\t\t\tclassName: 'file_preview',\r\n\t\t\t\t\t\t\t\tinnerHTML: `\r\n\t\t\t\t\t\t\t\t<div class=\"file_preview_container\" data-file_preview_container>\r\n\t\t\t\t\t\t\t\t\t<div>10MB 이상의 파일은 당신의 데이터를 위해 미리보기를 제공하지 않습니다.</div>\r\n\t\t\t\t\t\t\t\t\t<div>미리보기를 클릭시 기능 제공을 위해 임시 저장소에 저장을 시작하며, 이는 추후 자동 삭제의 대상이 됩니다.</div>\r\n\t\t\t\t\t\t\t\t\t<div>이 파일의 용량 : ${size}${rankText}</div>\r\n\t\t\t\t\t\t\t\t\t<button class=\"file_preview_button\" data-file_preview_button type=\"button\">미리보기</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tfilePreview.dataset.file_preview = '';\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tfilePreview.querySelector('[data-file_preview_container]').className = 'file_preview_container'\r\n\t\t\t\t\t\t\tfilePreview.querySelector('[data-file_preview_button]').className = 'file_preview_button'; \r\n\t\t\t\t\t\t\tfilePreview.className = 'file_preview';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfilePreview.style.display = 'none';\r\n\t\t\t\t\t\tResources.resourcesCallback = ({status, resources}) => {\r\n\t\t\t\t\t\t\tif(status == 'error'){\r\n\t\t\t\t\t\t\t\tfilePreview.style.display = '';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfilePreview.onclick = (event) => {\r\n\t\t\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfilePreview.dataset.visibility_not = '';\r\n\r\n\t\t\t\t\t\ttargetTools.append(filePreview)\r\n\r\n\t\t\t\t\t\tlet filePreviewButton = filePreview.querySelector('.file_preview_button');\r\n\t\t\t\t\t\t//document.body.onclick = (event) =>{ event}\r\n\t\t\t\t\t\tfilePreviewButton.onclick = (event) => {\r\n\r\n\t\t\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\t\t\tfilePreviewButton.textContent = '';\r\n\t\t\t\t\t\t\tfilePreviewButton.className = 'loading_rotate';\r\n\t\t\t\t\t\t\tresolve(filePreview);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tstartPromise.then((filePreview) => {\r\n\t\t\t\t\tdocument.body.closest\r\n\t\t\t\t\tlet getSignData = `${roomHandler.roomId}:${workspaceHandler.workspaceId}:${targetTools.dataset.new_file_name}:${targetTools.closest('[data-account_name]')?.dataset.account_name}`\r\n\t\t\t\t\ts3EncryptionUtil.callS3PresignedUrl(window.myAPI.s3.generateSecurityGetObjectPresignedUrl, getSignData, {uploadType : targetTools.dataset.upload_type, fileType})\r\n\t\t\t\t\t.then( (result) => {\r\n\t\t\t\t\t\tif(! result){\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet {data, encDncKeyPair} = result;\r\n\t\t\t\t\t\tlet totalLen = 0;\r\n\t\t\t\t\t\tlet size = parseInt(targetTools.dataset.size);\r\n\t\t\t\t\t\tlet progress = Object.assign(document.createElement('progress'), {\r\n\t\t\t\t\t\t\tmax: 100,\r\n\t\t\t\t\t\t\tvalue : 0\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif(filePreview){\r\n\t\t\t\t\t\t\tlet container = filePreview.querySelector('.file_preview_container');\r\n\t\t\t\t\t\t\tcontainer.append(progress)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn Promise.all([\r\n\t\t\t\t\t\t\ts3EncryptionUtil.convertBase64ToBuffer(data.encryptionKey).then( async (buffer) => {\r\n\t\t\t\t\t\t\t\treturn s3EncryptionUtil.decryptMessage(encDncKeyPair.privateKey, buffer, s3EncryptionUtil.secretAlgorithm)\r\n\t\t\t\t\t\t\t\t\t.then(buf=>String.fromCharCode(...new Uint8Array(buf)))\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\ts3EncryptionUtil.convertBase64ToBuffer(data.encryptionMd).then( async (buffer) => {\r\n\t\t\t\t\t\t\t\treturn s3EncryptionUtil.decryptMessage(encDncKeyPair.privateKey, buffer, s3EncryptionUtil.secretAlgorithm)\r\n\t\t\t\t\t\t\t\t\t.then(buf=>String.fromCharCode(...new Uint8Array(buf)))\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t]).then( async ([k,m]) => {\r\n\t\t\t\t\t\t\treturn fetch(data.presignedUrl, {\r\n\t\t\t\t\t\t\t\tmethod:\"GET\",\r\n\t\t\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t\t\t'Content-Encoding' : 'base64',\r\n\t\t\t\t\t\t\t\t\t'Content-Type' : 'application/octet-stream',\r\n\t\t\t\t\t\t\t\t\t'x-amz-server-side-encryption-customer-algorithm': 'AES256',\r\n\t\t\t\t\t\t\t\t\t'x-amz-server-side-encryption-customer-key': k,\r\n\t\t\t\t\t\t\t\t\t'x-amz-server-side-encryption-customer-key-md5': m,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}).then(async response=> {\r\n\t\t\t\t\t\t\t\tif(response.status != 200 && response.status != 201){\r\n\t\t\t\t\t\t\t\t\tthrow new Error('s3 connect failed')\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn response.body;\r\n\t\t\t\t\t\t\t}).then((body) => {\r\n\t\t\t\t\t\t\t\tconst reader = body.getReader();\r\n\t\t\t\t\t\t\t\treturn new ReadableStream(\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tstart(controller) {\r\n\t\t\t\t\t\t\t\t\t\t\treturn pump();\r\n\t\t\t\t\t\t\t\t\t\t\tfunction pump() {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn reader.read().then(({ done, value }) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotalLen += value?.length || 0;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tprogress.value = (totalLen / size) * 100 \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// When no more data needs to be consumed, close the stream\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (done) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontroller.close();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// Enqueue the next data chunk into our target stream\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontroller.enqueue(value);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn pump();\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\tlet newBlob = new Blob([buffer], { type: imageEditor.dataset.content_type });\r\n\t\t\t\t\t\t\t\tlet imgUrl = window.URL.createObjectURL(newBlob);\r\n\t\t\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.then(stream => new Response(stream))\r\n\t\t\t\t\t\t\t.then(res => res.blob())\r\n\t\t\t\t\t\t\t.then(async blob => {\r\n\t\t\t\t\t\t\t\tlet newBlob = new Blob([blob], { type: targetTools.dataset.content_type });\r\n\t\t\t\t\t\t\t\treturn dbOpenPromise.then( async () => {\r\n\t\t\t\t\t\t\t\t\treturn indexedDBHandler.addItem({\r\n\t\t\t\t\t\t\t\t\t\tfileName: targetTools.dataset.new_file_name,\r\n\t\t\t\t\t\t\t\t\t\toriginFileName: targetTools.dataset.name,\r\n\t\t\t\t\t\t\t\t\t\tfileData: newBlob,\r\n\t\t\t\t\t\t\t\t\t\tlastModified: new Date().getTime(),\r\n\t\t\t\t\t\t\t\t\t\tuploadType: targetTools.dataset.upload_type,\r\n\t\t\t\t\t\t\t\t\t\troomId: roomHandler.roomId,\r\n\t\t\t\t\t\t\t\t\t\tworkspaceId: workspaceHandler.workspaceId\r\n\t\t\t\t\t\t\t\t\t}).then(()=>{\r\n\t\t\t\t\t\t\t\t\t\treturn window.URL.createObjectURL(newBlob)\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.then(url => {\r\n\t\t\t\t\t\t\t\t//targetTools.dataset.url = url;\r\n\t\t\t\t\t\t\t\tif(targetTools.image){\r\n\t\t\t\t\t\t\t\t\ttargetTools.image.src = url;\r\n\t\t\t\t\t\t\t\t}else if(targetTools.video){\r\n\t\t\t\t\t\t\t\t\ttargetTools.video.src = url;\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t//targetTools.resources.data = url;\r\n\t\t\t\t\t\t\t\t\ttargetTools.resourcesUrl = url;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif(filePreview){\r\n\t\t\t\t\t\t\t\t\tfilePreview.replaceChildren();\r\n\t\t\t\t\t\t\t\t\tfilePreview.parentElement.removeChild(filePreview);\r\n\t\t\t\t\t\t\t\t\tfilePreview.remove();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch(err=>{\r\n\t\t\t\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\t\t\t\tconsole.error(err.message)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tImage.customImageCallback = (imageEditor) => imageOrVideoCallback(imageEditor)\r\n\t\t\tVideo.customVideoCallback = (videoEditor) => imageOrVideoCallback(videoEditor)\r\n\t\t\tResources.customResourcesCallback = (resourcesEditor) => imageOrVideoCallback(resourcesEditor)\r\n\t\t});\t\r\n\r\n\r\n\t\tconst visibleObserver = new IntersectionObserver((entries, observer) => {\r\n\t\t\tentries.forEach(entry =>{\r\n\t\t\t\tlet {isIntersecting, target} = entry;\r\n\t\t\t\tif(target.hasAttribute('slot') || target.hasAttribute('data-visibility_not')){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (isIntersecting){\r\n\t\t\t\t\ttarget.style.visibility = '';\r\n\t\t\t\t\ttarget.style.opacity = '';\r\n\t\t\t\t\ttarget.dataset.visibility = 'v';\r\n\t\t\t\t}else{\r\n\t\t\t\t\ttarget.style.visibility = 'hidden';\r\n\t\t\t\t\ttarget.style.opacity = 0;\r\n\t\t\t\t\ttarget.dataset.visibility = 'h';\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}, {\r\n\t\t\tthreshold: 0.01,\r\n\t\t\troot: document\r\n\t\t});\r\n\t\tnew MutationObserver( (mutationList, observer) => {\r\n\t\t\tmutationList.forEach((mutation) => {\r\n\t\t\t\tlet {addedNodes, removedNodes} = mutation;\r\n\t\t\t\tnew Promise(resolve=> {\r\n\t\t\t\t\taddedNodes.forEach(async e => {\r\n\t\t\t\t\t\tif(e.nodeType !== Node.ELEMENT_NODE || (e.nodeType === Node.ELEMENT_NODE && e.hasAttribute('data-is_not_visible_target')) || e.isContentEditable){\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnew Promise(res=>{\r\n\t\t\t\t\t\t\tvisibleObserver.observe(e);\r\n\t\t\t\t\t\t\tres();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t})\r\n\t\t\t\tnew Promise(resolve=> {\r\n\t\t\t\t\tremovedNodes.forEach(async e => {\r\n\t\t\t\t\t\tif(e.nodeType !== Node.ELEMENT_NODE || (e.nodeType === Node.ELEMENT_NODE && e.hasAttribute('data-is_not_visible_target')) || e.isContentEditable){\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnew Promise(res=>{\r\n\t\t\t\t\t\t\tvisibleObserver.unobserve(e);\r\n\t\t\t\t\t\t\tres();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}).observe(document, {\r\n\t\t\tchildList: true,\r\n\t\t\tsubtree: true\r\n\t\t})\r\n\r\n\r\n\t}\r\n}","/**\r\n * web용\r\n */\r\nimport { ipcRenderer, myAPI } from \"./../../../browser/preload/preload\"\r\nwindow.myAPI = myAPI;\r\n\r\nimport {noticeBoardHandler} from \"@handler/notice_board/NoticeBoardHandler\"\r\nimport {noticeBoardDetail} from \"@component/notice_board/notice_board_item/NoticeBoardDetail\"\r\n\r\nimport CommonInit from \"@root/js/CommonInit\";\r\n\r\nnew CommonInit('multipleNoticeBoard');\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", (event) => {\r\n\tlet workspaceIdResolve;\r\n\tlet workspaceIdPromise = new Promise(resolve=>{\r\n\t\tworkspaceIdResolve = resolve;\r\n\t})\r\n\twindow.myAPI.getWorkspaceId().then(workspaceId=>{\r\n\t\tif(workspaceId != undefined){\r\n\t\t\tworkspaceIdResolve(workspaceId);\r\n\t\t}\r\n\t\twindow.myAPI.event.electronEventTrigger.addElectronEventListener('workspaceChange', event => {\r\n\t\t\tlet newWorkspaceId = event.workspaceId\r\n\t\t\tif(workspaceId == newWorkspaceId){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(newWorkspaceId != undefined){\r\n\t\t\t\tworkspaceIdResolve(newWorkspaceId)\r\n\t\t\t}\r\n\t\t\t//event.workspaceId\r\n\t\t})\r\n\t})\r\n\tworkspaceIdPromise.then(workspaceId => {\r\n\t\tdocument.querySelector('#main').append(\r\n            noticeBoardDetail.element\r\n\t\t)\r\n        noticeBoardDetail.element.dataset.is_resize = false;\r\n        noticeBoardDetail.element.grow = 1;\r\n\r\n        window.myAPI.event.electronEventTrigger.addElectronEventListener('noticeBoardChange', event => {\r\n            noticeBoardHandler.noticeBoardId = event.noticeBoardId;\r\n        })\r\n\r\n\t\twindow.myAPI.stream.initWorkspaceStream({workspaceId});\r\n\t})\r\n});\r\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","bind","fn","thisArg","apply","arguments","toString","getPrototypeOf","kindOf","cache","create","thing","str","slice","toLowerCase","kindOfTest","type","typeOfTest","isArray","Array","isUndefined","isArrayBuffer","isString","isFunction","isNumber","isObject","isPlainObject","val","iterator","isDate","isFile","isBlob","isFileList","isURLSearchParams","forEach","allOwnKeys","i","l","length","keys","getOwnPropertyNames","len","findKey","_key","_global","globalThis","self","window","global","isContextDefined","context","isTypedArray","TypedArray","Uint8Array","isHTMLForm","isRegExp","reduceDescriptors","reducer","descriptors","getOwnPropertyDescriptors","reducedDescriptors","descriptor","name","ret","defineProperties","ALPHA","DIGIT","ALPHABET","ALPHA_DIGIT","toUpperCase","isAsyncFn","isBuffer","constructor","isFormData","kind","FormData","append","isArrayBufferView","result","ArrayBuffer","isView","buffer","isBoolean","isStream","pipe","merge","caseless","this","assignValue","targetKey","extend","a","b","trim","replace","stripBOM","content","charCodeAt","inherits","superConstructor","props","assign","toFlatObject","sourceObj","destObj","filter","propFilter","merged","endsWith","searchString","position","String","undefined","lastIndex","indexOf","toArray","arr","forEachEntry","next","done","pair","matchAll","regExp","matches","exec","push","hasOwnProp","freezeMethods","writable","set","Error","toObjectSet","arrayOrString","delimiter","define","split","toCamelCase","m","p1","p2","noop","toFiniteNumber","defaultValue","Number","isFinite","generateString","size","alphabet","Math","random","isSpecCompliantForm","toJSONObject","stack","visit","source","target","reducedValue","isThenable","then","catch","AxiosError","message","code","config","request","response","captureStackTrace","utils","toJSON","description","number","fileName","lineNumber","columnNumber","status","from","error","customProps","axiosError","cause","isVisitable","removeBrackets","renderKey","path","dots","concat","map","token","join","predicates","test","formData","options","TypeError","metaTokens","indexes","option","visitor","defaultVisitor","useBlob","Blob","convertValue","toISOString","Buffer","JSON","stringify","some","isFlatArray","el","index","exposedHelpers","build","pop","encode","charMap","encodeURIComponent","match","AxiosURLSearchParams","params","_pairs","encoder","_encode","buildURL","url","serializeFn","serialize","serializedParams","hashmarkIndex","handlers","use","fulfilled","rejected","synchronous","runWhen","eject","id","clear","h","silentJSONParsing","forcedJSONParsing","clarifyTimeoutError","isBrowser","classes","URLSearchParams","protocols","hasBrowserEnv","document","hasStandardBrowserEnv","product","navigator","hasStandardBrowserWebWorkerEnv","WorkerGlobalScope","importScripts","buildPath","isNumericKey","isLast","arrayToObject","entries","parsePropPath","defaults","transitional","adapter","transformRequest","data","headers","contentType","getContentType","hasJSONContentType","isObjectPayload","setContentType","platform","helpers","isNode","toURLEncodedForm","formSerializer","_FormData","env","rawValue","parser","parse","e","stringifySafely","transformResponse","JSONRequested","responseType","strictJSONParsing","ERR_BAD_RESPONSE","timeout","xsrfCookieName","xsrfHeaderName","maxContentLength","maxBodyLength","validateStatus","common","method","ignoreDuplicateOf","$internals","normalizeHeader","header","normalizeValue","matchHeaderValue","isHeaderNameFilter","AxiosHeaders","valueOrRewrite","rewrite","setHeader","_value","_header","_rewrite","lHeader","setHeaders","rawHeaders","parsed","line","substring","parseHeaders","tokens","tokensRE","parseTokens","has","matcher","deleted","deleteHeader","normalize","format","normalized","w","char","formatHeader","targets","asStrings","first","computed","accessor","accessors","defineAccessor","accessorName","methodName","arg1","arg2","arg3","configurable","buildAccessors","mapped","headerValue","transformData","fns","isCancel","__CANCEL__","CanceledError","ERR_CANCELED","write","expires","domain","secure","cookie","Date","toGMTString","read","RegExp","decodeURIComponent","remove","now","buildFullPath","baseURL","requestedURL","relativeURL","combineURLs","msie","userAgent","urlParsingNode","createElement","originURL","resolveURL","href","setAttribute","protocol","host","search","hash","hostname","port","pathname","charAt","location","requestURL","samplesCount","min","bytes","timestamps","firstSampleTS","head","tail","chunkLength","startedAt","bytesCount","passed","round","progressEventReducer","listener","isDownloadStream","bytesNotified","_speedometer","loaded","total","lengthComputable","progressBytes","rate","progress","estimated","event","knownAdapters","http","xhr","XMLHttpRequest","Promise","resolve","reject","requestData","requestHeaders","onCanceled","withXSRFToken","cancelToken","unsubscribe","signal","removeEventListener","Boolean","auth","username","password","unescape","btoa","fullPath","onloadend","responseHeaders","getAllResponseHeaders","ERR_BAD_REQUEST","floor","settle","err","responseText","statusText","open","paramsSerializer","onreadystatechange","readyState","responseURL","setTimeout","onabort","ECONNABORTED","onerror","ERR_NETWORK","ontimeout","timeoutErrorMessage","ETIMEDOUT","isURLSameOrigin","xsrfValue","cookies","setRequestHeader","withCredentials","onDownloadProgress","addEventListener","onUploadProgress","upload","cancel","abort","subscribe","aborted","parseProtocol","send","renderReason","reason","isResolvedHandle","adapters","nameOrAdapter","rejectedReasons","reasons","state","s","throwIfCancellationRequested","throwIfRequested","dispatchRequest","headersToObject","mergeConfig","config1","config2","getMergedValue","mergeDeepProperties","valueFromConfig2","defaultToConfig2","mergeDirectKeys","mergeMap","timeoutMessage","decompress","beforeRedirect","transport","httpAgent","httpsAgent","socketPath","responseEncoding","configValue","VERSION","validators","deprecatedWarnings","validator","version","formatMessage","opt","desc","opts","ERR_DEPRECATED","console","warn","assertOptions","schema","allowUnknown","ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","Axios","instanceConfig","interceptors","configOrUrl","boolean","function","contextHeaders","requestInterceptorChain","synchronousRequestInterceptors","interceptor","unshift","responseInterceptorChain","promise","chain","newConfig","onFulfilled","onRejected","getUri","generateHTTPMethod","isForm","CancelToken","executor","resolvePromise","_listeners","onfulfilled","_resolve","splice","c","HttpStatusCode","Continue","SwitchingProtocols","Processing","EarlyHints","Ok","Created","Accepted","NonAuthoritativeInformation","NoContent","ResetContent","PartialContent","MultiStatus","AlreadyReported","ImUsed","MultipleChoices","MovedPermanently","Found","SeeOther","NotModified","UseProxy","Unused","TemporaryRedirect","PermanentRedirect","BadRequest","Unauthorized","PaymentRequired","Forbidden","NotFound","MethodNotAllowed","NotAcceptable","ProxyAuthenticationRequired","RequestTimeout","Conflict","Gone","LengthRequired","PreconditionFailed","PayloadTooLarge","UriTooLong","UnsupportedMediaType","RangeNotSatisfiable","ExpectationFailed","ImATeapot","MisdirectedRequest","UnprocessableEntity","Locked","FailedDependency","TooEarly","UpgradeRequired","PreconditionRequired","TooManyRequests","RequestHeaderFieldsTooLarge","UnavailableForLegalReasons","InternalServerError","NotImplemented","BadGateway","ServiceUnavailable","GatewayTimeout","HttpVersionNotSupported","VariantAlsoNegotiates","InsufficientStorage","LoopDetected","NotExtended","NetworkAuthenticationRequired","axios","createInstance","defaultConfig","instance","toFormData","Cancel","all","promises","spread","callback","isAxiosError","payload","formToJSON","getAdapter","default","log","__isLocal","top","windowUtil","isLogin","__serverApi","responseIsOk","responseCheck","resetLoginRemeber","accountController","loginProcessing","param","reduce","k","v","post","getAccountInfo","updateSimpleAccountInfo","apiS3Controller","generateSecurityPutObjectPresignedUrl","generateSecurityGetObjectPresignedUrl","generateGetObjectPresignedUrl","chattingController","sendChatting","deleteChatting","searchChattingList","workspaceId","roomId","queryString","emoticonController","createEmotionReaction","deleteEmotion","getIsReaction","eventStreamController","prevWorkspaceId","initWorkspaceStream","EventSource","eventSendObj","close","onmessage","lastEventId","origin","debug","eventName","serverSentStreamType","webEventSend","onopen","success","noticeBoardController","createNoticeBoardGroup","createNoticeBoard","createNoticeBoardDetail","searchNoticeBoardList","searchNoticeBoardDetailList","noticeBoardId","deleteNoticeBoard","deleteNoticeBoardGroup","updateNoticeBoardOrder","updateNoticeBoardDetailOrder","roomController","createRoom","createMySelfRoom","isNaN","parseInt","createRoomInAccount","updateRoomInAccoutOrder","createRoomFavorites","updateRoomFavorites","searchRoomList","searchMyJoinedRoomList","searchRoomFavoritesList","searchRoomJoinedAccountList","getRoomDetail","isRoomFavorites","isRoomOwner","workspaceController","searchWorkspaceMyJoined","page","searchNameSpecificList","workspaceName","searchWorkspaceInAccount","getWorkspaceDetail","getWorkspaceInAccountCount","createPermitWokrspaceInAccount","createGiveAdmin","searchPermitRequestList","getIsAdmin","createWorkspaceJoined","createWorkspace","permission","Notification","requestPermission","globalHandler","loadInitRoomId","ipcRenderer","loadInitNoticeBoardId","localStorage","getItem","t","OPTION_NAME","resetWorkspace","setOption","OPTION_VALUE","UPDATE_AT","getTime","CREATE_AT","setItem","values","getOption","flatMap","clazz","Function","invoke","on","electronEventTrigger","objectEventListener","onEvent","trigger","addElectronEventListener","removeElectronEventListener","async","res","myAPI","getProjectPath","createSubWindow","pageName","pageId","closeRequest","maximizeRequest","unmaximizeRequest","minimizeRequest","restoreRequest","isMaximize","resetWorkspaceId","getWorkspaceId","notifications","noti","fullName","body","icon","onclick","html","innerHTML","style","right","bottom","borderRadius","background","width","height","zIndex","whiteSpace","overflowWrap","display","flexDirection","alignItems","justifyContent","fontSize","paddingBottom","optionName","getServerUrl","logout","fetch","ok","alert","pageChange","changeWokrspacePage","changeLoginPage","changeMainPage","stream","account","chatting","workspace","room","searchRoom","noticeBoard","s3","emoticon","noticeBoardHandler","addNoticeBoardIdChangeListener","runTheFirst","startCallbackPromise","removeNoticeBoardIdChangeListener","ToolHandler","identity","selection","getSelection","activeElement","classList","contains","findTarget","find","containsNode","dataset","tool_status","isLastTool","tool","isPrototypeOf","at","extendsElement","defaultClass","isInline","toolButton","nodeType","Node","ELEMENT_NODE","connectedFriends","friend","isConnected","FreedomInterface","HTMLElement","static","globalClickEventPromiseResolve","globalKeydownEventPromiseResolve","globalSelectionChangeEventPromiseResolve","globalMouseEvent","lastClickElementPath","composedPath","globalClickEventPromise","globalKeydownEventPromise","globalSelectionChangeEventPromise","isMouseInnerElement","element","clientX","clientY","x","y","getBoundingClientRect","globalKeydownEventListener","oldEvent","newEvent","simpleObserver","globalSelectionChangeEventListener","outClickElementListener","isMouseOut","isElement","targetObject","checkClazz","check","processingElementPosition","rect","elementTop","clientHeight","elementLeft","clientWidth","left","freeze","Tool","parentEditor","MutationObserver","mutationList","observer","mutation","addedNodes","removedNodes","resultList","toolHandler","lastItemIndex","Line","lineElement","createLine","replaceChildren","connectedChildAfterCallback","disconnectedChildAfterCallback","deleteOption","DeleteOption","EMPTY_CONTENT_IS_DELETE","super","disconnect","observe","childList","add","removeFun","EMPTY_CONTENT_IS_NOT_DELETE","isToolEmpty","thisLine","getLine","lookAtMe","connectedCallback","connectedAfterCallback","closest","parentLine","childNodes","innerText","sty","getComputedStyle","visibility","opacity","shadowRoot","nextLine","getNextLine","connectedAfterOnlyOneCallback","disconnectedCallback","disconnectedAfterCallback","isCursor","createDefaultStyle","textContent","defaultStyle","insertDefaultStyle","sheet","insertRule","parentElement","getRootLine","parent","getTool","TargetTool","querySelector","isElementTextEmpty","div","className","is_line","range","surroundContents","startOffset","endOffset","startContainer","endContainer","startNodeToPrevNodeIndex","findIndex","isFirstNodeToStart","nodeList","targetNode","iter","createNodeIterator","NodeFilter","SHOW_TEXT","nextNode","clone","cloneNode","after","prepend","endLine","fragment","extractContents","setStart","setEnd","targetStartLineItem","nextSibling","itemRemoveList","itemAppendList","TEXT_NODE","appendData","nextTool","nextItem","middleTargetTool","targetLine","nextElementSibling","selectNodeContents","endTool","targetEndLineItem","previousSibling","applyTool","nodeName","leftText","rightText","targetWrap","targetText","commonAncestorContainer","offset","leftList","rightList","cloneContents","cloneRange","selectNode","list","Ignore","leftElement","rightElement","cloneLeft","cloneRight","createTextNode","appendList","before","startTextNode","endTextNode","startLeftText","endRightText","startNextSibling","startPrevSibling","endNextSibling","endPrevSibling","leftTool","rightTool","cancelTool","isCollapsed","anchorNode","anchorOffset","getRangeAt","isContentEditable","focus","setPosition","FreeWiilHandler","isDefaultStyle","blockBackspaceEvent","getLineRange","startAndEndLineObject","focusNode","allLine","children","startLine","endLineChildNodes","addRange","anchorNodeLine","focusNodeLine","querySelectorAll","item","isNextLineExist","isRoot","getPrevLine","previousElementSibling","getCurrentLine","UndoManager","time","targetEditor","addCursorMove","addUndoKey","addUserInput","rememberCursor","newRect","focusOffset","prevCursorTarget","hasAttribute","removeAttribute","scrollLeft","scrollTop","ctrlKey","preventDefault","undoKeyEvent","redoKeyEvent","cursorTarget","attributes","node","isEmpty","scrollTo","undoRedo","addUndoRedo","isCheckSkip","prevMils","altKey","clearHistory","clearEditor","Strong","title","Palette","OpenPositionMode","openPositionMode","BUTTON","openPosition","exampleMode","ExampleMode","TEXT_COLOR","createStyle","reset","clearTimeout","colorPanel","colorPaint","colorBrightness","palette","itemMap","topTextWrap","selectionRgbBg","previousRgbBg","colorWrap","colorBrightnessWrap","bottomTextWrap","selectionRgbText","previousRgbText","applyWrap","cancelButton","applyButton","__colorPanelSelected","__colorPanelSelectedPointer","__colorPaintSelectedPointer","colorPanelSelected","colorPanelSelectedPointer","colorPaintSelectedPointer","colorBrightnessSelectedPointer","__colorBrightnessSelectedPointer","blackOrWhite","selectedColor","color","sampleText","rangeCount","aticle","rangeClone","setPanelSelectePosition","colorPanelRect","onmousedown","ontouchstart","panelContext","getContext","willReadFrequently","clearRect","canvas","r","g","gradientH","createLinearGradient","addColorStop","fillStyle","fillRect","gradientV","colorPanelSelectedContext","lineWidth","beginPath","arc","PI","strokeStyle","stroke","pageX","pageY","isLeftOver","isRightOver","isTopOver","isBottomOver","reProcessingRectX","reProcessingRectY","getImageData","border","colorPaintRect","gradient","isOver","colorBrightnessRect","toFixed","applyCallback","paletteTop","WRAPPER","rgb","TouchEvent","touches","text","backgroundColor","TEXT_BACKGROUND_COLOR","TEXT_UNDERLINE","textDecoration","textDecorationColor","TEXT_LINE_THROUGH","insertStyle","Color","rgba","Background","Strikethrough","Underline","borderBottom","FontFamilyBox","fontList","searchInputTextEvent","createFontItem","li","fontFamily","defaultFont","fontElementList","fontFamilyBox","selectedFont","FontFamily","fontFamilyBoxContainer","font_family","Quote","NumericPoint","order","lastItem","inter","setInterval","clearInterval","BulletPoint","SortBox","sortBox","selectedSort","Sort","processingPalettePosition","text_align","textAlign","FontSizeBox","autocomplete","placeholder","oninput","onkeyup","fontSizeObject","searchWrap","max","unit","removeAllRanges","fixedLength","weight","parseFloat","step","rangeCloneContent","fontSizeBox","FontSize","fontSizeBoxContainer","font_size","Italic","ImageBox","is_shft","deltaY","passive","image","resizeRememberTarget","eventPath","is_ctrl","oninputEvent","addImageHoverEvent","keyDescription","onmouseenter","src","root","getRootNode","appendAwait","complete","toggleAttribute","falsh","onmouseleave","flash","transition","flashAwait","ontransitionend","labels","prevValue","onkeydown","onblur","onwheel","includes","imageRect","download","newWindow","image_name","imageBox","Image","accept","selectedFile","click","onchange","imgLoadEndCallback","startsWith","base64","customImageCallback","blob","imgUrl","URL","createObjectURL","files","DataTransfer","last_modified","lastModified","content_type","attachShadow","mode","createDefaultContent","wrap","slot","addedList","revokeObjectURL","draggable","imageContanier","onload","createDescription","tagName","file_name","open_status","createSlot","contentEditable","randomId","crypto","getRandomValues","Uint32Array","padStart","slotName","VideoBox","video","addVideoHoverEvent","videoRect","video_name","videoBox","Video","videoLoadEndCallback","loop","controls","customVideoCallback","videoUrl","videoContanier","file","canPlayType","lastIndexOf","videoIsNotWorking","onloadeddata","play","descriptionName","Resources","resourcesCallback","sizeLimitOverCallback","resources","customResourcesCallback","resources_name","resourcesContanier","contentWindow","contentVisibility","containIntrinsicSize","downloadButton","previewButton","resourcesUrl","Code","HyperlinkBox","required","urlInputTextWrapper","checkValidity","lastUrl","buttonWrapeer","hyperlinkBox","Hyperlink","getUrlMetadataPromise","htmlText","dom","DOMParser","parseFromString","getAttribute","favicon","siteName","p","fontWeight","hyperlink_child","contenteditable","FreeWillEditor","getLowDoseJSON","targetElement","afterCallback","json","jsonList","localName","cursor_offset","cursor_type","cursor_index","cursor_scroll_x","cursor_scroll_y","childs","parseLowDoseJSON","beforeCallback","jsonObj","htmlList","objList","jsonNode","editorTarget","customElements","components","tools","oldValue","__Tool","numberIndexMapper","numberToSpecialMapper","isDefaultShortcutKeyEvent","keydownEventCallback","Component","DOMException","componentsMap","extends","toolsMap","attributeFilter","attributeOldValue","childElementCount","startFirstLine","firstElementChild","subtree","arrowDownEvent","currentLine","isKeyAddEvent","shiftKey","firstKeyGroupList","isStop","tabIndex","isFirstLine","Range","setStartAfter","lastApplyTool","scrollTarget","applyToolAfterSelection","scrollIntoView","behavior","block","inline","lineBreak","LineBreakMode","NEXT_LINE_FIRST","lastChild","lastItemEndOffset","NEXT_LINE_LAST","firstLine","isLoaded","workspaceHandler","addWorkspaceIdChangedListener","removeWorkspaceIdChangedListener","roomHandler","addRoomIdChangeListener","removeRoomIdChangeListener","roomChangeAwait","jsonToSaveElementDataset","underbarKeyNameObject","underbarNameToCamelName","getProjectPathPromise","shortenBytes","byte","rank","log2","rankText","pow","showToastMessage","textList","PositionChanger","changeList","wrapper","addPositionChangeEvent","child","order_sort","is_position_change","ondragstart","stopPropagation","ee","pointerEvents","is_pointer_target","ondragend","outerWidth","outerHeight","__dragendCallback","ondragover","ondragenter","borderTop","ondragleave","ondrop","cancle","onIfCancelCallback","nowLastItem","prevOrderSort","prevItem","prev_order_sort","Set","onDropEndChangePositionCallback","onDropDocumentOutCallback","accountHandler","AccountHandler","searchAccountInfo","accountInfoChangeAcceptPromise","accountInfoChangeAcceptEventListener","oldData","newData","accountInfo","s3EncryptionUtil","TextEncoder","decoder","TextDecoder","signAlgorithm","modulusLength","publicExponent","secretAlgorithm","generateKeyPair","algorithm","keyUsages","subtle","generateKey","keySign","privateKey","sign","signature","decryptMessage","ciphertext","decrypt","convertBase64ToBuffer","arrayBuffer","exportKey","exportType","fromCharCode","exportKeyString","callS3PresignedUrl","callFunction","signData","callFunctionParam","signKeyPair","encDncKeyPair","publicKey","exportSignKey","exportEncKey","fromCodePoint","dataKey","fetchPutObject","putUrl","md5","fileData","NoticeBoardLine","__parentWrapper","spellcheck","noticeBoardDetail","bind_name","noticeBoardDetailList","workspace_id","room_id","orderSort","isEventStream","lastTarget","is_update","createItemElement","sort","listObserver","handler","refresh","toolList","toolbar","noticeBoardDetailContainer","is_not_visible_target","minHeight","prevText","addButton","editor","positionChangeIcon","datasetPromise","onmousemove","onmouseover","onmouseout","onfocus","isScriptBlur","relatedTarget","NO_CHANGE","blur","promiseList","fileType","is_loading","newFileName","putSignData","accountName","isUpload","uploadType","new_file_name","encryptionKey","buf","encryptionMd","presignedUrl","getSignData","upload_type","fileTargetList","is_upload_end","elementMap","IndexedDBHandler","isOpen","dbName","columnInfo","storeName","keyPathNameList","pkAutoIncrement","idx","dbOpenRequest","indexedDB","DB_NAME","onupgradeneeded","upgradeneeded","onsuccess","isNewAddStore","objectStoreNames","DB_STORE_NAME","isNeedChangeIndex","store","transaction","objectStore","indexNamesMapper","indexNames","indexName","newVersion","closeResult","secondOpenRequest","onblocked","onclose","COLUMN_INFO","template","oldVersion","keyPath","createObjectStore","autoIncrement","column","createIndex","indexNameList","oldIndexCheckMapper","deleteIndex","addItem","put","commit","oncomplete","getList","pageNum","pageSize","readOption","start","isEnableAdvanced","count","openCursor","cursor","advance","continue","deleteList","idList","successCount","failedCount","delete","deleteDatabase","deleteReuqest","indexedDBHandler","unique","originFileName","dbOpenPromise","imageOrVideoCallback","targetTools","uploadLoading","upload_loading","isHasRememberFile","filePreview","file_preview","visibility_not","filePreviewButton","account_name","totalLen","reader","getReader","ReadableStream","controller","pump","enqueue","Response","newBlob","removeChild","imageEditor","videoEditor","resourcesEditor","visibleObserver","IntersectionObserver","entry","isIntersecting","threshold","unobserve","workspaceIdResolve","workspaceIdPromise","newWorkspaceId","is_resize","grow"],"sourceRoot":""}