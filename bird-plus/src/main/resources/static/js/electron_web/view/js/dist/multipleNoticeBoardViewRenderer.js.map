{"version":3,"file":"multipleNoticeBoardViewRenderer.js","mappings":"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","sources":["webpack://mobile/webpack/bootstrap","webpack://mobile/webpack/runtime/define property getters","webpack://mobile/webpack/runtime/hasOwnProperty shorthand","webpack://mobile/webpack/runtime/make namespace object","webpack://mobile/./node_modules/axios/lib/helpers/bind.js","webpack://mobile/./node_modules/axios/lib/utils.js","webpack://mobile/./node_modules/axios/lib/core/AxiosError.js","webpack://mobile/./node_modules/axios/lib/helpers/toFormData.js","webpack://mobile/./node_modules/axios/lib/helpers/AxiosURLSearchParams.js","webpack://mobile/./node_modules/axios/lib/helpers/buildURL.js","webpack://mobile/./node_modules/axios/lib/core/InterceptorManager.js","webpack://mobile/./node_modules/axios/lib/defaults/transitional.js","webpack://mobile/./node_modules/axios/lib/platform/browser/index.js","webpack://mobile/./node_modules/axios/lib/platform/browser/classes/URLSearchParams.js","webpack://mobile/./node_modules/axios/lib/platform/browser/classes/FormData.js","webpack://mobile/./node_modules/axios/lib/platform/browser/classes/Blob.js","webpack://mobile/./node_modules/axios/lib/platform/common/utils.js","webpack://mobile/./node_modules/axios/lib/platform/index.js","webpack://mobile/./node_modules/axios/lib/helpers/formDataToJSON.js","webpack://mobile/./node_modules/axios/lib/defaults/index.js","webpack://mobile/./node_modules/axios/lib/helpers/toURLEncodedForm.js","webpack://mobile/./node_modules/axios/lib/helpers/parseHeaders.js","webpack://mobile/./node_modules/axios/lib/core/AxiosHeaders.js","webpack://mobile/./node_modules/axios/lib/core/transformData.js","webpack://mobile/./node_modules/axios/lib/cancel/isCancel.js","webpack://mobile/./node_modules/axios/lib/cancel/CanceledError.js","webpack://mobile/./node_modules/axios/lib/helpers/cookies.js","webpack://mobile/./node_modules/axios/lib/core/buildFullPath.js","webpack://mobile/./node_modules/axios/lib/helpers/isAbsoluteURL.js","webpack://mobile/./node_modules/axios/lib/helpers/combineURLs.js","webpack://mobile/./node_modules/axios/lib/helpers/isURLSameOrigin.js","webpack://mobile/./node_modules/axios/lib/helpers/speedometer.js","webpack://mobile/./node_modules/axios/lib/adapters/xhr.js","webpack://mobile/./node_modules/axios/lib/adapters/adapters.js","webpack://mobile/./node_modules/axios/lib/helpers/null.js","webpack://mobile/./node_modules/axios/lib/core/settle.js","webpack://mobile/./node_modules/axios/lib/helpers/parseProtocol.js","webpack://mobile/./node_modules/axios/lib/core/dispatchRequest.js","webpack://mobile/./node_modules/axios/lib/core/mergeConfig.js","webpack://mobile/./node_modules/axios/lib/env/data.js","webpack://mobile/./node_modules/axios/lib/helpers/validator.js","webpack://mobile/./node_modules/axios/lib/core/Axios.js","webpack://mobile/./node_modules/axios/lib/cancel/CancelToken.js","webpack://mobile/./node_modules/axios/lib/helpers/HttpStatusCode.js","webpack://mobile/./node_modules/axios/lib/axios.js","webpack://mobile/./node_modules/axios/lib/helpers/spread.js","webpack://mobile/./node_modules/axios/lib/helpers/isAxiosError.js","webpack://mobile/./browser/window/WindowUtil.js","webpack://mobile/./browser/controller/AccountController.js","webpack://mobile/./browser/controller/ApiS3Controller.js","webpack://mobile/./browser/controller/ChattingController.js","webpack://mobile/./browser/controller/EmoticonController.js","webpack://mobile/./browser/controller/EventStreamController.js","webpack://mobile/./browser/controller/NoticeBoardController.js","webpack://mobile/./browser/controller/RoomController.js","webpack://mobile/./browser/controller/WorkspaceController.js","webpack://mobile/./browser/preload/preload.js","webpack://mobile/./view/js/handler/room/RoomHandler.js","webpack://mobile/./view/js/handler/editor/module/ToolHandler.js","webpack://mobile/./view/js/handler/editor/component/Line.js","webpack://mobile/./view/js/handler/editor/module/FreedomInterface.js","webpack://mobile/./view/js/handler/editor/component/ImageBox.js","webpack://mobile/./view/js/handler/editor/tools/Image.js","webpack://mobile/./view/js/handler/editor/component/VideoBox.js","webpack://mobile/./view/js/handler/editor/tools/Video.js","webpack://mobile/./view/js/handler/editor/tools/Resources.js","webpack://mobile/./view/js/handler/editor/component/FontSizeBox.js","webpack://mobile/./view/js/handler/editor/tools/FontSize.js","webpack://mobile/./view/js/handler/account/AccountHandler.js","webpack://mobile/./view/js/handler/S3EncryptionUtil.js","webpack://mobile/./view/js/handler/workspace/WorkspaceHandler.js","webpack://mobile/./view/js/handler/IndexedDBHandler.js","webpack://mobile/./view/js/common.js","webpack://mobile/./view/js/CommonInit.js","webpack://mobile/./view/js/renderer/multipleNoticeBoardViewRenderer.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","'use strict';\n\nexport default function bind(fn, thisArg) {\n  return function wrap() {\n    return fn.apply(thisArg, arguments);\n  };\n}\n","'use strict';\n\nimport bind from './helpers/bind.js';\n\n// utils is a library of generic helper functions non-specific to axios\n\nconst {toString} = Object.prototype;\nconst {getPrototypeOf} = Object;\n\nconst kindOf = (cache => thing => {\n    const str = toString.call(thing);\n    return cache[str] || (cache[str] = str.slice(8, -1).toLowerCase());\n})(Object.create(null));\n\nconst kindOfTest = (type) => {\n  type = type.toLowerCase();\n  return (thing) => kindOf(thing) === type\n}\n\nconst typeOfTest = type => thing => typeof thing === type;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n *\n * @returns {boolean} True if value is an Array, otherwise false\n */\nconst {isArray} = Array;\n\n/**\n * Determine if a value is undefined\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nconst isUndefined = typeOfTest('undefined');\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && isFunction(val.constructor.isBuffer) && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nconst isArrayBuffer = kindOfTest('ArrayBuffer');\n\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  let result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (isArrayBuffer(val.buffer));\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a String, otherwise false\n */\nconst isString = typeOfTest('string');\n\n/**\n * Determine if a value is a Function\n *\n * @param {*} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nconst isFunction = typeOfTest('function');\n\n/**\n * Determine if a value is a Number\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Number, otherwise false\n */\nconst isNumber = typeOfTest('number');\n\n/**\n * Determine if a value is an Object\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an Object, otherwise false\n */\nconst isObject = (thing) => thing !== null && typeof thing === 'object';\n\n/**\n * Determine if a value is a Boolean\n *\n * @param {*} thing The value to test\n * @returns {boolean} True if value is a Boolean, otherwise false\n */\nconst isBoolean = thing => thing === true || thing === false;\n\n/**\n * Determine if a value is a plain Object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a plain Object, otherwise false\n */\nconst isPlainObject = (val) => {\n  if (kindOf(val) !== 'object') {\n    return false;\n  }\n\n  const prototype = getPrototypeOf(val);\n  return (prototype === null || prototype === Object.prototype || Object.getPrototypeOf(prototype) === null) && !(Symbol.toStringTag in val) && !(Symbol.iterator in val);\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Date, otherwise false\n */\nconst isDate = kindOfTest('Date');\n\n/**\n * Determine if a value is a File\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFile = kindOfTest('File');\n\n/**\n * Determine if a value is a Blob\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nconst isBlob = kindOfTest('Blob');\n\n/**\n * Determine if a value is a FileList\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFileList = kindOfTest('FileList');\n\n/**\n * Determine if a value is a Stream\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nconst isStream = (val) => isObject(val) && isFunction(val.pipe);\n\n/**\n * Determine if a value is a FormData\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nconst isFormData = (thing) => {\n  let kind;\n  return thing && (\n    (typeof FormData === 'function' && thing instanceof FormData) || (\n      isFunction(thing.append) && (\n        (kind = kindOf(thing)) === 'formdata' ||\n        // detect form-data instance\n        (kind === 'object' && isFunction(thing.toString) && thing.toString() === '[object FormData]')\n      )\n    )\n  )\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nconst isURLSearchParams = kindOfTest('URLSearchParams');\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n *\n * @returns {String} The String freed of excess whitespace\n */\nconst trim = (str) => str.trim ?\n  str.trim() : str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n *\n * @param {Boolean} [allOwnKeys = false]\n * @returns {any}\n */\nfunction forEach(obj, fn, {allOwnKeys = false} = {}) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  let i;\n  let l;\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    const keys = allOwnKeys ? Object.getOwnPropertyNames(obj) : Object.keys(obj);\n    const len = keys.length;\n    let key;\n\n    for (i = 0; i < len; i++) {\n      key = keys[i];\n      fn.call(null, obj[key], key, obj);\n    }\n  }\n}\n\nfunction findKey(obj, key) {\n  key = key.toLowerCase();\n  const keys = Object.keys(obj);\n  let i = keys.length;\n  let _key;\n  while (i-- > 0) {\n    _key = keys[i];\n    if (key === _key.toLowerCase()) {\n      return _key;\n    }\n  }\n  return null;\n}\n\nconst _global = (() => {\n  /*eslint no-undef:0*/\n  if (typeof globalThis !== \"undefined\") return globalThis;\n  return typeof self !== \"undefined\" ? self : (typeof window !== 'undefined' ? window : global)\n})();\n\nconst isContextDefined = (context) => !isUndefined(context) && context !== _global;\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n *\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  const {caseless} = isContextDefined(this) && this || {};\n  const result = {};\n  const assignValue = (val, key) => {\n    const targetKey = caseless && findKey(result, key) || key;\n    if (isPlainObject(result[targetKey]) && isPlainObject(val)) {\n      result[targetKey] = merge(result[targetKey], val);\n    } else if (isPlainObject(val)) {\n      result[targetKey] = merge({}, val);\n    } else if (isArray(val)) {\n      result[targetKey] = val.slice();\n    } else {\n      result[targetKey] = val;\n    }\n  }\n\n  for (let i = 0, l = arguments.length; i < l; i++) {\n    arguments[i] && forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n *\n * @param {Boolean} [allOwnKeys]\n * @returns {Object} The resulting value of object a\n */\nconst extend = (a, b, thisArg, {allOwnKeys}= {}) => {\n  forEach(b, (val, key) => {\n    if (thisArg && isFunction(val)) {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  }, {allOwnKeys});\n  return a;\n}\n\n/**\n * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n *\n * @param {string} content with BOM\n *\n * @returns {string} content value without BOM\n */\nconst stripBOM = (content) => {\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1);\n  }\n  return content;\n}\n\n/**\n * Inherit the prototype methods from one constructor into another\n * @param {function} constructor\n * @param {function} superConstructor\n * @param {object} [props]\n * @param {object} [descriptors]\n *\n * @returns {void}\n */\nconst inherits = (constructor, superConstructor, props, descriptors) => {\n  constructor.prototype = Object.create(superConstructor.prototype, descriptors);\n  constructor.prototype.constructor = constructor;\n  Object.defineProperty(constructor, 'super', {\n    value: superConstructor.prototype\n  });\n  props && Object.assign(constructor.prototype, props);\n}\n\n/**\n * Resolve object with deep prototype chain to a flat object\n * @param {Object} sourceObj source object\n * @param {Object} [destObj]\n * @param {Function|Boolean} [filter]\n * @param {Function} [propFilter]\n *\n * @returns {Object}\n */\nconst toFlatObject = (sourceObj, destObj, filter, propFilter) => {\n  let props;\n  let i;\n  let prop;\n  const merged = {};\n\n  destObj = destObj || {};\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  if (sourceObj == null) return destObj;\n\n  do {\n    props = Object.getOwnPropertyNames(sourceObj);\n    i = props.length;\n    while (i-- > 0) {\n      prop = props[i];\n      if ((!propFilter || propFilter(prop, sourceObj, destObj)) && !merged[prop]) {\n        destObj[prop] = sourceObj[prop];\n        merged[prop] = true;\n      }\n    }\n    sourceObj = filter !== false && getPrototypeOf(sourceObj);\n  } while (sourceObj && (!filter || filter(sourceObj, destObj)) && sourceObj !== Object.prototype);\n\n  return destObj;\n}\n\n/**\n * Determines whether a string ends with the characters of a specified string\n *\n * @param {String} str\n * @param {String} searchString\n * @param {Number} [position= 0]\n *\n * @returns {boolean}\n */\nconst endsWith = (str, searchString, position) => {\n  str = String(str);\n  if (position === undefined || position > str.length) {\n    position = str.length;\n  }\n  position -= searchString.length;\n  const lastIndex = str.indexOf(searchString, position);\n  return lastIndex !== -1 && lastIndex === position;\n}\n\n\n/**\n * Returns new array from array like object or null if failed\n *\n * @param {*} [thing]\n *\n * @returns {?Array}\n */\nconst toArray = (thing) => {\n  if (!thing) return null;\n  if (isArray(thing)) return thing;\n  let i = thing.length;\n  if (!isNumber(i)) return null;\n  const arr = new Array(i);\n  while (i-- > 0) {\n    arr[i] = thing[i];\n  }\n  return arr;\n}\n\n/**\n * Checking if the Uint8Array exists and if it does, it returns a function that checks if the\n * thing passed in is an instance of Uint8Array\n *\n * @param {TypedArray}\n *\n * @returns {Array}\n */\n// eslint-disable-next-line func-names\nconst isTypedArray = (TypedArray => {\n  // eslint-disable-next-line func-names\n  return thing => {\n    return TypedArray && thing instanceof TypedArray;\n  };\n})(typeof Uint8Array !== 'undefined' && getPrototypeOf(Uint8Array));\n\n/**\n * For each entry in the object, call the function with the key and value.\n *\n * @param {Object<any, any>} obj - The object to iterate over.\n * @param {Function} fn - The function to call for each entry.\n *\n * @returns {void}\n */\nconst forEachEntry = (obj, fn) => {\n  const generator = obj && obj[Symbol.iterator];\n\n  const iterator = generator.call(obj);\n\n  let result;\n\n  while ((result = iterator.next()) && !result.done) {\n    const pair = result.value;\n    fn.call(obj, pair[0], pair[1]);\n  }\n}\n\n/**\n * It takes a regular expression and a string, and returns an array of all the matches\n *\n * @param {string} regExp - The regular expression to match against.\n * @param {string} str - The string to search.\n *\n * @returns {Array<boolean>}\n */\nconst matchAll = (regExp, str) => {\n  let matches;\n  const arr = [];\n\n  while ((matches = regExp.exec(str)) !== null) {\n    arr.push(matches);\n  }\n\n  return arr;\n}\n\n/* Checking if the kindOfTest function returns true when passed an HTMLFormElement. */\nconst isHTMLForm = kindOfTest('HTMLFormElement');\n\nconst toCamelCase = str => {\n  return str.toLowerCase().replace(/[-_\\s]([a-z\\d])(\\w*)/g,\n    function replacer(m, p1, p2) {\n      return p1.toUpperCase() + p2;\n    }\n  );\n};\n\n/* Creating a function that will check if an object has a property. */\nconst hasOwnProperty = (({hasOwnProperty}) => (obj, prop) => hasOwnProperty.call(obj, prop))(Object.prototype);\n\n/**\n * Determine if a value is a RegExp object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a RegExp object, otherwise false\n */\nconst isRegExp = kindOfTest('RegExp');\n\nconst reduceDescriptors = (obj, reducer) => {\n  const descriptors = Object.getOwnPropertyDescriptors(obj);\n  const reducedDescriptors = {};\n\n  forEach(descriptors, (descriptor, name) => {\n    let ret;\n    if ((ret = reducer(descriptor, name, obj)) !== false) {\n      reducedDescriptors[name] = ret || descriptor;\n    }\n  });\n\n  Object.defineProperties(obj, reducedDescriptors);\n}\n\n/**\n * Makes all methods read-only\n * @param {Object} obj\n */\n\nconst freezeMethods = (obj) => {\n  reduceDescriptors(obj, (descriptor, name) => {\n    // skip restricted props in strict mode\n    if (isFunction(obj) && ['arguments', 'caller', 'callee'].indexOf(name) !== -1) {\n      return false;\n    }\n\n    const value = obj[name];\n\n    if (!isFunction(value)) return;\n\n    descriptor.enumerable = false;\n\n    if ('writable' in descriptor) {\n      descriptor.writable = false;\n      return;\n    }\n\n    if (!descriptor.set) {\n      descriptor.set = () => {\n        throw Error('Can not rewrite read-only method \\'' + name + '\\'');\n      };\n    }\n  });\n}\n\nconst toObjectSet = (arrayOrString, delimiter) => {\n  const obj = {};\n\n  const define = (arr) => {\n    arr.forEach(value => {\n      obj[value] = true;\n    });\n  }\n\n  isArray(arrayOrString) ? define(arrayOrString) : define(String(arrayOrString).split(delimiter));\n\n  return obj;\n}\n\nconst noop = () => {}\n\nconst toFiniteNumber = (value, defaultValue) => {\n  value = +value;\n  return Number.isFinite(value) ? value : defaultValue;\n}\n\nconst ALPHA = 'abcdefghijklmnopqrstuvwxyz'\n\nconst DIGIT = '0123456789';\n\nconst ALPHABET = {\n  DIGIT,\n  ALPHA,\n  ALPHA_DIGIT: ALPHA + ALPHA.toUpperCase() + DIGIT\n}\n\nconst generateString = (size = 16, alphabet = ALPHABET.ALPHA_DIGIT) => {\n  let str = '';\n  const {length} = alphabet;\n  while (size--) {\n    str += alphabet[Math.random() * length|0]\n  }\n\n  return str;\n}\n\n/**\n * If the thing is a FormData object, return true, otherwise return false.\n *\n * @param {unknown} thing - The thing to check.\n *\n * @returns {boolean}\n */\nfunction isSpecCompliantForm(thing) {\n  return !!(thing && isFunction(thing.append) && thing[Symbol.toStringTag] === 'FormData' && thing[Symbol.iterator]);\n}\n\nconst toJSONObject = (obj) => {\n  const stack = new Array(10);\n\n  const visit = (source, i) => {\n\n    if (isObject(source)) {\n      if (stack.indexOf(source) >= 0) {\n        return;\n      }\n\n      if(!('toJSON' in source)) {\n        stack[i] = source;\n        const target = isArray(source) ? [] : {};\n\n        forEach(source, (value, key) => {\n          const reducedValue = visit(value, i + 1);\n          !isUndefined(reducedValue) && (target[key] = reducedValue);\n        });\n\n        stack[i] = undefined;\n\n        return target;\n      }\n    }\n\n    return source;\n  }\n\n  return visit(obj, 0);\n}\n\nconst isAsyncFn = kindOfTest('AsyncFunction');\n\nconst isThenable = (thing) =>\n  thing && (isObject(thing) || isFunction(thing)) && isFunction(thing.then) && isFunction(thing.catch);\n\nexport default {\n  isArray,\n  isArrayBuffer,\n  isBuffer,\n  isFormData,\n  isArrayBufferView,\n  isString,\n  isNumber,\n  isBoolean,\n  isObject,\n  isPlainObject,\n  isUndefined,\n  isDate,\n  isFile,\n  isBlob,\n  isRegExp,\n  isFunction,\n  isStream,\n  isURLSearchParams,\n  isTypedArray,\n  isFileList,\n  forEach,\n  merge,\n  extend,\n  trim,\n  stripBOM,\n  inherits,\n  toFlatObject,\n  kindOf,\n  kindOfTest,\n  endsWith,\n  toArray,\n  forEachEntry,\n  matchAll,\n  isHTMLForm,\n  hasOwnProperty,\n  hasOwnProp: hasOwnProperty, // an alias to avoid ESLint no-prototype-builtins detection\n  reduceDescriptors,\n  freezeMethods,\n  toObjectSet,\n  toCamelCase,\n  noop,\n  toFiniteNumber,\n  findKey,\n  global: _global,\n  isContextDefined,\n  ALPHABET,\n  generateString,\n  isSpecCompliantForm,\n  toJSONObject,\n  isAsyncFn,\n  isThenable\n};\n","'use strict';\n\nimport utils from '../utils.js';\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [config] The config.\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n *\n * @returns {Error} The created error.\n */\nfunction AxiosError(message, code, config, request, response) {\n  Error.call(this);\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, this.constructor);\n  } else {\n    this.stack = (new Error()).stack;\n  }\n\n  this.message = message;\n  this.name = 'AxiosError';\n  code && (this.code = code);\n  config && (this.config = config);\n  request && (this.request = request);\n  response && (this.response = response);\n}\n\nutils.inherits(AxiosError, Error, {\n  toJSON: function toJSON() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: utils.toJSONObject(this.config),\n      code: this.code,\n      status: this.response && this.response.status ? this.response.status : null\n    };\n  }\n});\n\nconst prototype = AxiosError.prototype;\nconst descriptors = {};\n\n[\n  'ERR_BAD_OPTION_VALUE',\n  'ERR_BAD_OPTION',\n  'ECONNABORTED',\n  'ETIMEDOUT',\n  'ERR_NETWORK',\n  'ERR_FR_TOO_MANY_REDIRECTS',\n  'ERR_DEPRECATED',\n  'ERR_BAD_RESPONSE',\n  'ERR_BAD_REQUEST',\n  'ERR_CANCELED',\n  'ERR_NOT_SUPPORT',\n  'ERR_INVALID_URL'\n// eslint-disable-next-line func-names\n].forEach(code => {\n  descriptors[code] = {value: code};\n});\n\nObject.defineProperties(AxiosError, descriptors);\nObject.defineProperty(prototype, 'isAxiosError', {value: true});\n\n// eslint-disable-next-line func-names\nAxiosError.from = (error, code, config, request, response, customProps) => {\n  const axiosError = Object.create(prototype);\n\n  utils.toFlatObject(error, axiosError, function filter(obj) {\n    return obj !== Error.prototype;\n  }, prop => {\n    return prop !== 'isAxiosError';\n  });\n\n  AxiosError.call(axiosError, error.message, code, config, request, response);\n\n  axiosError.cause = error;\n\n  axiosError.name = error.name;\n\n  customProps && Object.assign(axiosError, customProps);\n\n  return axiosError;\n};\n\nexport default AxiosError;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\n// temporary hotfix to avoid circular references until AxiosURLSearchParams is refactored\nimport PlatformFormData from '../platform/node/classes/FormData.js';\n\n/**\n * Determines if the given thing is a array or js object.\n *\n * @param {string} thing - The object or array to be visited.\n *\n * @returns {boolean}\n */\nfunction isVisitable(thing) {\n  return utils.isPlainObject(thing) || utils.isArray(thing);\n}\n\n/**\n * It removes the brackets from the end of a string\n *\n * @param {string} key - The key of the parameter.\n *\n * @returns {string} the key without the brackets.\n */\nfunction removeBrackets(key) {\n  return utils.endsWith(key, '[]') ? key.slice(0, -2) : key;\n}\n\n/**\n * It takes a path, a key, and a boolean, and returns a string\n *\n * @param {string} path - The path to the current key.\n * @param {string} key - The key of the current object being iterated over.\n * @param {string} dots - If true, the key will be rendered with dots instead of brackets.\n *\n * @returns {string} The path to the current key.\n */\nfunction renderKey(path, key, dots) {\n  if (!path) return key;\n  return path.concat(key).map(function each(token, i) {\n    // eslint-disable-next-line no-param-reassign\n    token = removeBrackets(token);\n    return !dots && i ? '[' + token + ']' : token;\n  }).join(dots ? '.' : '');\n}\n\n/**\n * If the array is an array and none of its elements are visitable, then it's a flat array.\n *\n * @param {Array<any>} arr - The array to check\n *\n * @returns {boolean}\n */\nfunction isFlatArray(arr) {\n  return utils.isArray(arr) && !arr.some(isVisitable);\n}\n\nconst predicates = utils.toFlatObject(utils, {}, null, function filter(prop) {\n  return /^is[A-Z]/.test(prop);\n});\n\n/**\n * Convert a data object to FormData\n *\n * @param {Object} obj\n * @param {?Object} [formData]\n * @param {?Object} [options]\n * @param {Function} [options.visitor]\n * @param {Boolean} [options.metaTokens = true]\n * @param {Boolean} [options.dots = false]\n * @param {?Boolean} [options.indexes = false]\n *\n * @returns {Object}\n **/\n\n/**\n * It converts an object into a FormData object\n *\n * @param {Object<any, any>} obj - The object to convert to form data.\n * @param {string} formData - The FormData object to append to.\n * @param {Object<string, any>} options\n *\n * @returns\n */\nfunction toFormData(obj, formData, options) {\n  if (!utils.isObject(obj)) {\n    throw new TypeError('target must be an object');\n  }\n\n  // eslint-disable-next-line no-param-reassign\n  formData = formData || new (PlatformFormData || FormData)();\n\n  // eslint-disable-next-line no-param-reassign\n  options = utils.toFlatObject(options, {\n    metaTokens: true,\n    dots: false,\n    indexes: false\n  }, false, function defined(option, source) {\n    // eslint-disable-next-line no-eq-null,eqeqeq\n    return !utils.isUndefined(source[option]);\n  });\n\n  const metaTokens = options.metaTokens;\n  // eslint-disable-next-line no-use-before-define\n  const visitor = options.visitor || defaultVisitor;\n  const dots = options.dots;\n  const indexes = options.indexes;\n  const _Blob = options.Blob || typeof Blob !== 'undefined' && Blob;\n  const useBlob = _Blob && utils.isSpecCompliantForm(formData);\n\n  if (!utils.isFunction(visitor)) {\n    throw new TypeError('visitor must be a function');\n  }\n\n  function convertValue(value) {\n    if (value === null) return '';\n\n    if (utils.isDate(value)) {\n      return value.toISOString();\n    }\n\n    if (!useBlob && utils.isBlob(value)) {\n      throw new AxiosError('Blob is not supported. Use a Buffer instead.');\n    }\n\n    if (utils.isArrayBuffer(value) || utils.isTypedArray(value)) {\n      return useBlob && typeof Blob === 'function' ? new Blob([value]) : Buffer.from(value);\n    }\n\n    return value;\n  }\n\n  /**\n   * Default visitor.\n   *\n   * @param {*} value\n   * @param {String|Number} key\n   * @param {Array<String|Number>} path\n   * @this {FormData}\n   *\n   * @returns {boolean} return true to visit the each prop of the value recursively\n   */\n  function defaultVisitor(value, key, path) {\n    let arr = value;\n\n    if (value && !path && typeof value === 'object') {\n      if (utils.endsWith(key, '{}')) {\n        // eslint-disable-next-line no-param-reassign\n        key = metaTokens ? key : key.slice(0, -2);\n        // eslint-disable-next-line no-param-reassign\n        value = JSON.stringify(value);\n      } else if (\n        (utils.isArray(value) && isFlatArray(value)) ||\n        ((utils.isFileList(value) || utils.endsWith(key, '[]')) && (arr = utils.toArray(value))\n        )) {\n        // eslint-disable-next-line no-param-reassign\n        key = removeBrackets(key);\n\n        arr.forEach(function each(el, index) {\n          !(utils.isUndefined(el) || el === null) && formData.append(\n            // eslint-disable-next-line no-nested-ternary\n            indexes === true ? renderKey([key], index, dots) : (indexes === null ? key : key + '[]'),\n            convertValue(el)\n          );\n        });\n        return false;\n      }\n    }\n\n    if (isVisitable(value)) {\n      return true;\n    }\n\n    formData.append(renderKey(path, key, dots), convertValue(value));\n\n    return false;\n  }\n\n  const stack = [];\n\n  const exposedHelpers = Object.assign(predicates, {\n    defaultVisitor,\n    convertValue,\n    isVisitable\n  });\n\n  function build(value, path) {\n    if (utils.isUndefined(value)) return;\n\n    if (stack.indexOf(value) !== -1) {\n      throw Error('Circular reference detected in ' + path.join('.'));\n    }\n\n    stack.push(value);\n\n    utils.forEach(value, function each(el, key) {\n      const result = !(utils.isUndefined(el) || el === null) && visitor.call(\n        formData, el, utils.isString(key) ? key.trim() : key, path, exposedHelpers\n      );\n\n      if (result === true) {\n        build(el, path ? path.concat(key) : [key]);\n      }\n    });\n\n    stack.pop();\n  }\n\n  if (!utils.isObject(obj)) {\n    throw new TypeError('data must be an object');\n  }\n\n  build(obj);\n\n  return formData;\n}\n\nexport default toFormData;\n","'use strict';\n\nimport toFormData from './toFormData.js';\n\n/**\n * It encodes a string by replacing all characters that are not in the unreserved set with\n * their percent-encoded equivalents\n *\n * @param {string} str - The string to encode.\n *\n * @returns {string} The encoded string.\n */\nfunction encode(str) {\n  const charMap = {\n    '!': '%21',\n    \"'\": '%27',\n    '(': '%28',\n    ')': '%29',\n    '~': '%7E',\n    '%20': '+',\n    '%00': '\\x00'\n  };\n  return encodeURIComponent(str).replace(/[!'()~]|%20|%00/g, function replacer(match) {\n    return charMap[match];\n  });\n}\n\n/**\n * It takes a params object and converts it to a FormData object\n *\n * @param {Object<string, any>} params - The parameters to be converted to a FormData object.\n * @param {Object<string, any>} options - The options object passed to the Axios constructor.\n *\n * @returns {void}\n */\nfunction AxiosURLSearchParams(params, options) {\n  this._pairs = [];\n\n  params && toFormData(params, this, options);\n}\n\nconst prototype = AxiosURLSearchParams.prototype;\n\nprototype.append = function append(name, value) {\n  this._pairs.push([name, value]);\n};\n\nprototype.toString = function toString(encoder) {\n  const _encode = encoder ? function(value) {\n    return encoder.call(this, value, encode);\n  } : encode;\n\n  return this._pairs.map(function each(pair) {\n    return _encode(pair[0]) + '=' + _encode(pair[1]);\n  }, '').join('&');\n};\n\nexport default AxiosURLSearchParams;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosURLSearchParams from '../helpers/AxiosURLSearchParams.js';\n\n/**\n * It replaces all instances of the characters `:`, `$`, `,`, `+`, `[`, and `]` with their\n * URI encoded counterparts\n *\n * @param {string} val The value to be encoded.\n *\n * @returns {string} The encoded value.\n */\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @param {?object} options\n *\n * @returns {string} The formatted url\n */\nexport default function buildURL(url, params, options) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n  \n  const _encode = options && options.encode || encode;\n\n  const serializeFn = options && options.serialize;\n\n  let serializedParams;\n\n  if (serializeFn) {\n    serializedParams = serializeFn(params, options);\n  } else {\n    serializedParams = utils.isURLSearchParams(params) ?\n      params.toString() :\n      new AxiosURLSearchParams(params, options).toString(_encode);\n  }\n\n  if (serializedParams) {\n    const hashmarkIndex = url.indexOf(\"#\");\n\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\nclass InterceptorManager {\n  constructor() {\n    this.handlers = [];\n  }\n\n  /**\n   * Add a new interceptor to the stack\n   *\n   * @param {Function} fulfilled The function to handle `then` for a `Promise`\n   * @param {Function} rejected The function to handle `reject` for a `Promise`\n   *\n   * @return {Number} An ID used to remove interceptor later\n   */\n  use(fulfilled, rejected, options) {\n    this.handlers.push({\n      fulfilled,\n      rejected,\n      synchronous: options ? options.synchronous : false,\n      runWhen: options ? options.runWhen : null\n    });\n    return this.handlers.length - 1;\n  }\n\n  /**\n   * Remove an interceptor from the stack\n   *\n   * @param {Number} id The ID that was returned by `use`\n   *\n   * @returns {Boolean} `true` if the interceptor was removed, `false` otherwise\n   */\n  eject(id) {\n    if (this.handlers[id]) {\n      this.handlers[id] = null;\n    }\n  }\n\n  /**\n   * Clear all interceptors from the stack\n   *\n   * @returns {void}\n   */\n  clear() {\n    if (this.handlers) {\n      this.handlers = [];\n    }\n  }\n\n  /**\n   * Iterate over all the registered interceptors\n   *\n   * This method is particularly useful for skipping over any\n   * interceptors that may have become `null` calling `eject`.\n   *\n   * @param {Function} fn The function to call for each interceptor\n   *\n   * @returns {void}\n   */\n  forEach(fn) {\n    utils.forEach(this.handlers, function forEachHandler(h) {\n      if (h !== null) {\n        fn(h);\n      }\n    });\n  }\n}\n\nexport default InterceptorManager;\n","'use strict';\n\nexport default {\n  silentJSONParsing: true,\n  forcedJSONParsing: true,\n  clarifyTimeoutError: false\n};\n","import URLSearchParams from './classes/URLSearchParams.js'\nimport FormData from './classes/FormData.js'\nimport Blob from './classes/Blob.js'\n\nexport default {\n  isBrowser: true,\n  classes: {\n    URLSearchParams,\n    FormData,\n    Blob\n  },\n  protocols: ['http', 'https', 'file', 'blob', 'url', 'data']\n};\n","'use strict';\n\nimport AxiosURLSearchParams from '../../../helpers/AxiosURLSearchParams.js';\nexport default typeof URLSearchParams !== 'undefined' ? URLSearchParams : AxiosURLSearchParams;\n","'use strict';\n\nexport default typeof FormData !== 'undefined' ? FormData : null;\n","'use strict'\n\nexport default typeof Blob !== 'undefined' ? Blob : null\n","const hasBrowserEnv = typeof window !== 'undefined' && typeof document !== 'undefined';\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n *\n * @returns {boolean}\n */\nconst hasStandardBrowserEnv = (\n  (product) => {\n    return hasBrowserEnv && ['ReactNative', 'NativeScript', 'NS'].indexOf(product) < 0\n  })(typeof navigator !== 'undefined' && navigator.product);\n\n/**\n * Determine if we're running in a standard browser webWorker environment\n *\n * Although the `isStandardBrowserEnv` method indicates that\n * `allows axios to run in a web worker`, the WebWorker will still be\n * filtered out due to its judgment standard\n * `typeof window !== 'undefined' && typeof document !== 'undefined'`.\n * This leads to a problem when axios post `FormData` in webWorker\n */\nconst hasStandardBrowserWebWorkerEnv = (() => {\n  return (\n    typeof WorkerGlobalScope !== 'undefined' &&\n    // eslint-disable-next-line no-undef\n    self instanceof WorkerGlobalScope &&\n    typeof self.importScripts === 'function'\n  );\n})();\n\nexport {\n  hasBrowserEnv,\n  hasStandardBrowserWebWorkerEnv,\n  hasStandardBrowserEnv\n}\n","import platform from './node/index.js';\nimport * as utils from './common/utils.js';\n\nexport default {\n  ...utils,\n  ...platform\n}\n","'use strict';\n\nimport utils from '../utils.js';\n\n/**\n * It takes a string like `foo[x][y][z]` and returns an array like `['foo', 'x', 'y', 'z']\n *\n * @param {string} name - The name of the property to get.\n *\n * @returns An array of strings.\n */\nfunction parsePropPath(name) {\n  // foo[x][y][z]\n  // foo.x.y.z\n  // foo-x-y-z\n  // foo x y z\n  return utils.matchAll(/\\w+|\\[(\\w*)]/g, name).map(match => {\n    return match[0] === '[]' ? '' : match[1] || match[0];\n  });\n}\n\n/**\n * Convert an array to an object.\n *\n * @param {Array<any>} arr - The array to convert to an object.\n *\n * @returns An object with the same keys and values as the array.\n */\nfunction arrayToObject(arr) {\n  const obj = {};\n  const keys = Object.keys(arr);\n  let i;\n  const len = keys.length;\n  let key;\n  for (i = 0; i < len; i++) {\n    key = keys[i];\n    obj[key] = arr[key];\n  }\n  return obj;\n}\n\n/**\n * It takes a FormData object and returns a JavaScript object\n *\n * @param {string} formData The FormData object to convert to JSON.\n *\n * @returns {Object<string, any> | null} The converted object.\n */\nfunction formDataToJSON(formData) {\n  function buildPath(path, value, target, index) {\n    let name = path[index++];\n    const isNumericKey = Number.isFinite(+name);\n    const isLast = index >= path.length;\n    name = !name && utils.isArray(target) ? target.length : name;\n\n    if (isLast) {\n      if (utils.hasOwnProp(target, name)) {\n        target[name] = [target[name], value];\n      } else {\n        target[name] = value;\n      }\n\n      return !isNumericKey;\n    }\n\n    if (!target[name] || !utils.isObject(target[name])) {\n      target[name] = [];\n    }\n\n    const result = buildPath(path, value, target[name], index);\n\n    if (result && utils.isArray(target[name])) {\n      target[name] = arrayToObject(target[name]);\n    }\n\n    return !isNumericKey;\n  }\n\n  if (utils.isFormData(formData) && utils.isFunction(formData.entries)) {\n    const obj = {};\n\n    utils.forEachEntry(formData, (name, value) => {\n      buildPath(parsePropPath(name), value, obj, 0);\n    });\n\n    return obj;\n  }\n\n  return null;\n}\n\nexport default formDataToJSON;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\nimport transitionalDefaults from './transitional.js';\nimport toFormData from '../helpers/toFormData.js';\nimport toURLEncodedForm from '../helpers/toURLEncodedForm.js';\nimport platform from '../platform/index.js';\nimport formDataToJSON from '../helpers/formDataToJSON.js';\n\n/**\n * It takes a string, tries to parse it, and if it fails, it returns the stringified version\n * of the input\n *\n * @param {any} rawValue - The value to be stringified.\n * @param {Function} parser - A function that parses a string into a JavaScript object.\n * @param {Function} encoder - A function that takes a value and returns a string.\n *\n * @returns {string} A stringified version of the rawValue.\n */\nfunction stringifySafely(rawValue, parser, encoder) {\n  if (utils.isString(rawValue)) {\n    try {\n      (parser || JSON.parse)(rawValue);\n      return utils.trim(rawValue);\n    } catch (e) {\n      if (e.name !== 'SyntaxError') {\n        throw e;\n      }\n    }\n  }\n\n  return (encoder || JSON.stringify)(rawValue);\n}\n\nconst defaults = {\n\n  transitional: transitionalDefaults,\n\n  adapter: ['xhr', 'http'],\n\n  transformRequest: [function transformRequest(data, headers) {\n    const contentType = headers.getContentType() || '';\n    const hasJSONContentType = contentType.indexOf('application/json') > -1;\n    const isObjectPayload = utils.isObject(data);\n\n    if (isObjectPayload && utils.isHTMLForm(data)) {\n      data = new FormData(data);\n    }\n\n    const isFormData = utils.isFormData(data);\n\n    if (isFormData) {\n      if (!hasJSONContentType) {\n        return data;\n      }\n      return hasJSONContentType ? JSON.stringify(formDataToJSON(data)) : data;\n    }\n\n    if (utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      headers.setContentType('application/x-www-form-urlencoded;charset=utf-8', false);\n      return data.toString();\n    }\n\n    let isFileList;\n\n    if (isObjectPayload) {\n      if (contentType.indexOf('application/x-www-form-urlencoded') > -1) {\n        return toURLEncodedForm(data, this.formSerializer).toString();\n      }\n\n      if ((isFileList = utils.isFileList(data)) || contentType.indexOf('multipart/form-data') > -1) {\n        const _FormData = this.env && this.env.FormData;\n\n        return toFormData(\n          isFileList ? {'files[]': data} : data,\n          _FormData && new _FormData(),\n          this.formSerializer\n        );\n      }\n    }\n\n    if (isObjectPayload || hasJSONContentType ) {\n      headers.setContentType('application/json', false);\n      return stringifySafely(data);\n    }\n\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    const transitional = this.transitional || defaults.transitional;\n    const forcedJSONParsing = transitional && transitional.forcedJSONParsing;\n    const JSONRequested = this.responseType === 'json';\n\n    if (data && utils.isString(data) && ((forcedJSONParsing && !this.responseType) || JSONRequested)) {\n      const silentJSONParsing = transitional && transitional.silentJSONParsing;\n      const strictJSONParsing = !silentJSONParsing && JSONRequested;\n\n      try {\n        return JSON.parse(data);\n      } catch (e) {\n        if (strictJSONParsing) {\n          if (e.name === 'SyntaxError') {\n            throw AxiosError.from(e, AxiosError.ERR_BAD_RESPONSE, this, null, this.response);\n          }\n          throw e;\n        }\n      }\n    }\n\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n  maxBodyLength: -1,\n\n  env: {\n    FormData: platform.classes.FormData,\n    Blob: platform.classes.Blob\n  },\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  },\n\n  headers: {\n    common: {\n      'Accept': 'application/json, text/plain, */*',\n      'Content-Type': undefined\n    }\n  }\n};\n\nutils.forEach(['delete', 'get', 'head', 'post', 'put', 'patch'], (method) => {\n  defaults.headers[method] = {};\n});\n\nexport default defaults;\n","'use strict';\n\nimport utils from '../utils.js';\nimport toFormData from './toFormData.js';\nimport platform from '../platform/index.js';\n\nexport default function toURLEncodedForm(data, options) {\n  return toFormData(data, new platform.classes.URLSearchParams(), Object.assign({\n    visitor: function(value, key, path, helpers) {\n      if (platform.isNode && utils.isBuffer(value)) {\n        this.append(key, value.toString('base64'));\n        return false;\n      }\n\n      return helpers.defaultVisitor.apply(this, arguments);\n    }\n  }, options));\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\n// RawAxiosHeaders whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nconst ignoreDuplicateOf = utils.toObjectSet([\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n]);\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} rawHeaders Headers needing to be parsed\n *\n * @returns {Object} Headers parsed into an object\n */\nexport default rawHeaders => {\n  const parsed = {};\n  let key;\n  let val;\n  let i;\n\n  rawHeaders && rawHeaders.split('\\n').forEach(function parser(line) {\n    i = line.indexOf(':');\n    key = line.substring(0, i).trim().toLowerCase();\n    val = line.substring(i + 1).trim();\n\n    if (!key || (parsed[key] && ignoreDuplicateOf[key])) {\n      return;\n    }\n\n    if (key === 'set-cookie') {\n      if (parsed[key]) {\n        parsed[key].push(val);\n      } else {\n        parsed[key] = [val];\n      }\n    } else {\n      parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nimport utils from '../utils.js';\nimport parseHeaders from '../helpers/parseHeaders.js';\n\nconst $internals = Symbol('internals');\n\nfunction normalizeHeader(header) {\n  return header && String(header).trim().toLowerCase();\n}\n\nfunction normalizeValue(value) {\n  if (value === false || value == null) {\n    return value;\n  }\n\n  return utils.isArray(value) ? value.map(normalizeValue) : String(value);\n}\n\nfunction parseTokens(str) {\n  const tokens = Object.create(null);\n  const tokensRE = /([^\\s,;=]+)\\s*(?:=\\s*([^,;]+))?/g;\n  let match;\n\n  while ((match = tokensRE.exec(str))) {\n    tokens[match[1]] = match[2];\n  }\n\n  return tokens;\n}\n\nconst isValidHeaderName = (str) => /^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(str.trim());\n\nfunction matchHeaderValue(context, value, header, filter, isHeaderNameFilter) {\n  if (utils.isFunction(filter)) {\n    return filter.call(this, value, header);\n  }\n\n  if (isHeaderNameFilter) {\n    value = header;\n  }\n\n  if (!utils.isString(value)) return;\n\n  if (utils.isString(filter)) {\n    return value.indexOf(filter) !== -1;\n  }\n\n  if (utils.isRegExp(filter)) {\n    return filter.test(value);\n  }\n}\n\nfunction formatHeader(header) {\n  return header.trim()\n    .toLowerCase().replace(/([a-z\\d])(\\w*)/g, (w, char, str) => {\n      return char.toUpperCase() + str;\n    });\n}\n\nfunction buildAccessors(obj, header) {\n  const accessorName = utils.toCamelCase(' ' + header);\n\n  ['get', 'set', 'has'].forEach(methodName => {\n    Object.defineProperty(obj, methodName + accessorName, {\n      value: function(arg1, arg2, arg3) {\n        return this[methodName].call(this, header, arg1, arg2, arg3);\n      },\n      configurable: true\n    });\n  });\n}\n\nclass AxiosHeaders {\n  constructor(headers) {\n    headers && this.set(headers);\n  }\n\n  set(header, valueOrRewrite, rewrite) {\n    const self = this;\n\n    function setHeader(_value, _header, _rewrite) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!lHeader) {\n        throw new Error('header name must be a non-empty string');\n      }\n\n      const key = utils.findKey(self, lHeader);\n\n      if(!key || self[key] === undefined || _rewrite === true || (_rewrite === undefined && self[key] !== false)) {\n        self[key || _header] = normalizeValue(_value);\n      }\n    }\n\n    const setHeaders = (headers, _rewrite) =>\n      utils.forEach(headers, (_value, _header) => setHeader(_value, _header, _rewrite));\n\n    if (utils.isPlainObject(header) || header instanceof this.constructor) {\n      setHeaders(header, valueOrRewrite)\n    } else if(utils.isString(header) && (header = header.trim()) && !isValidHeaderName(header)) {\n      setHeaders(parseHeaders(header), valueOrRewrite);\n    } else {\n      header != null && setHeader(valueOrRewrite, header, rewrite);\n    }\n\n    return this;\n  }\n\n  get(header, parser) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils.findKey(this, header);\n\n      if (key) {\n        const value = this[key];\n\n        if (!parser) {\n          return value;\n        }\n\n        if (parser === true) {\n          return parseTokens(value);\n        }\n\n        if (utils.isFunction(parser)) {\n          return parser.call(this, value, key);\n        }\n\n        if (utils.isRegExp(parser)) {\n          return parser.exec(value);\n        }\n\n        throw new TypeError('parser must be boolean|regexp|function');\n      }\n    }\n  }\n\n  has(header, matcher) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils.findKey(this, header);\n\n      return !!(key && this[key] !== undefined && (!matcher || matchHeaderValue(this, this[key], key, matcher)));\n    }\n\n    return false;\n  }\n\n  delete(header, matcher) {\n    const self = this;\n    let deleted = false;\n\n    function deleteHeader(_header) {\n      _header = normalizeHeader(_header);\n\n      if (_header) {\n        const key = utils.findKey(self, _header);\n\n        if (key && (!matcher || matchHeaderValue(self, self[key], key, matcher))) {\n          delete self[key];\n\n          deleted = true;\n        }\n      }\n    }\n\n    if (utils.isArray(header)) {\n      header.forEach(deleteHeader);\n    } else {\n      deleteHeader(header);\n    }\n\n    return deleted;\n  }\n\n  clear(matcher) {\n    const keys = Object.keys(this);\n    let i = keys.length;\n    let deleted = false;\n\n    while (i--) {\n      const key = keys[i];\n      if(!matcher || matchHeaderValue(this, this[key], key, matcher, true)) {\n        delete this[key];\n        deleted = true;\n      }\n    }\n\n    return deleted;\n  }\n\n  normalize(format) {\n    const self = this;\n    const headers = {};\n\n    utils.forEach(this, (value, header) => {\n      const key = utils.findKey(headers, header);\n\n      if (key) {\n        self[key] = normalizeValue(value);\n        delete self[header];\n        return;\n      }\n\n      const normalized = format ? formatHeader(header) : String(header).trim();\n\n      if (normalized !== header) {\n        delete self[header];\n      }\n\n      self[normalized] = normalizeValue(value);\n\n      headers[normalized] = true;\n    });\n\n    return this;\n  }\n\n  concat(...targets) {\n    return this.constructor.concat(this, ...targets);\n  }\n\n  toJSON(asStrings) {\n    const obj = Object.create(null);\n\n    utils.forEach(this, (value, header) => {\n      value != null && value !== false && (obj[header] = asStrings && utils.isArray(value) ? value.join(', ') : value);\n    });\n\n    return obj;\n  }\n\n  [Symbol.iterator]() {\n    return Object.entries(this.toJSON())[Symbol.iterator]();\n  }\n\n  toString() {\n    return Object.entries(this.toJSON()).map(([header, value]) => header + ': ' + value).join('\\n');\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'AxiosHeaders';\n  }\n\n  static from(thing) {\n    return thing instanceof this ? thing : new this(thing);\n  }\n\n  static concat(first, ...targets) {\n    const computed = new this(first);\n\n    targets.forEach((target) => computed.set(target));\n\n    return computed;\n  }\n\n  static accessor(header) {\n    const internals = this[$internals] = (this[$internals] = {\n      accessors: {}\n    });\n\n    const accessors = internals.accessors;\n    const prototype = this.prototype;\n\n    function defineAccessor(_header) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!accessors[lHeader]) {\n        buildAccessors(prototype, _header);\n        accessors[lHeader] = true;\n      }\n    }\n\n    utils.isArray(header) ? header.forEach(defineAccessor) : defineAccessor(header);\n\n    return this;\n  }\n}\n\nAxiosHeaders.accessor(['Content-Type', 'Content-Length', 'Accept', 'Accept-Encoding', 'User-Agent', 'Authorization']);\n\n// reserved names hotfix\nutils.reduceDescriptors(AxiosHeaders.prototype, ({value}, key) => {\n  let mapped = key[0].toUpperCase() + key.slice(1); // map `set` => `Set`\n  return {\n    get: () => value,\n    set(headerValue) {\n      this[mapped] = headerValue;\n    }\n  }\n});\n\nutils.freezeMethods(AxiosHeaders);\n\nexport default AxiosHeaders;\n","'use strict';\n\nimport utils from './../utils.js';\nimport defaults from '../defaults/index.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Array|Function} fns A single function or Array of functions\n * @param {?Object} response The response object\n *\n * @returns {*} The resulting transformed data\n */\nexport default function transformData(fns, response) {\n  const config = this || defaults;\n  const context = response || config;\n  const headers = AxiosHeaders.from(context.headers);\n  let data = context.data;\n\n  utils.forEach(fns, function transform(fn) {\n    data = fn.call(config, data, headers.normalize(), response ? response.status : undefined);\n  });\n\n  headers.normalize();\n\n  return data;\n}\n","'use strict';\n\nexport default function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n}\n","'use strict';\n\nimport AxiosError from '../core/AxiosError.js';\nimport utils from '../utils.js';\n\n/**\n * A `CanceledError` is an object that is thrown when an operation is canceled.\n *\n * @param {string=} message The message.\n * @param {Object=} config The config.\n * @param {Object=} request The request.\n *\n * @returns {CanceledError} The created error.\n */\nfunction CanceledError(message, config, request) {\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  AxiosError.call(this, message == null ? 'canceled' : message, AxiosError.ERR_CANCELED, config, request);\n  this.name = 'CanceledError';\n}\n\nutils.inherits(CanceledError, AxiosError, {\n  __CANCEL__: true\n});\n\nexport default CanceledError;\n","import utils from './../utils.js';\nimport platform from '../platform/index.js';\n\nexport default platform.hasStandardBrowserEnv ?\n\n  // Standard browser envs support document.cookie\n  {\n    write(name, value, expires, path, domain, secure) {\n      const cookie = [name + '=' + encodeURIComponent(value)];\n\n      utils.isNumber(expires) && cookie.push('expires=' + new Date(expires).toGMTString());\n\n      utils.isString(path) && cookie.push('path=' + path);\n\n      utils.isString(domain) && cookie.push('domain=' + domain);\n\n      secure === true && cookie.push('secure');\n\n      document.cookie = cookie.join('; ');\n    },\n\n    read(name) {\n      const match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n      return (match ? decodeURIComponent(match[3]) : null);\n    },\n\n    remove(name) {\n      this.write(name, '', Date.now() - 86400000);\n    }\n  }\n\n  :\n\n  // Non-standard browser env (web workers, react-native) lack needed support.\n  {\n    write() {},\n    read() {\n      return null;\n    },\n    remove() {}\n  };\n\n","'use strict';\n\nimport isAbsoluteURL from '../helpers/isAbsoluteURL.js';\nimport combineURLs from '../helpers/combineURLs.js';\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n *\n * @returns {string} The combined full path\n */\nexport default function buildFullPath(baseURL, requestedURL) {\n  if (baseURL && !isAbsoluteURL(requestedURL)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n}\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n *\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nexport default function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d+\\-.]*:)?\\/\\//i.test(url);\n}\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n *\n * @returns {string} The combined URL\n */\nexport default function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n}\n","'use strict';\n\nimport utils from './../utils.js';\nimport platform from '../platform/index.js';\n\nexport default platform.hasStandardBrowserEnv ?\n\n// Standard browser envs have full support of the APIs needed to test\n// whether the request URL is of the same origin as current location.\n  (function standardBrowserEnv() {\n    const msie = /(msie|trident)/i.test(navigator.userAgent);\n    const urlParsingNode = document.createElement('a');\n    let originURL;\n\n    /**\n    * Parse a URL to discover its components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n    function resolveURL(url) {\n      let href = url;\n\n      if (msie) {\n        // IE needs attribute set twice to normalize properties\n        urlParsingNode.setAttribute('href', href);\n        href = urlParsingNode.href;\n      }\n\n      urlParsingNode.setAttribute('href', href);\n\n      // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n      return {\n        href: urlParsingNode.href,\n        protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n        host: urlParsingNode.host,\n        search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n        hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n        hostname: urlParsingNode.hostname,\n        port: urlParsingNode.port,\n        pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n          urlParsingNode.pathname :\n          '/' + urlParsingNode.pathname\n      };\n    }\n\n    originURL = resolveURL(window.location.href);\n\n    /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n    return function isURLSameOrigin(requestURL) {\n      const parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n      return (parsed.protocol === originURL.protocol &&\n          parsed.host === originURL.host);\n    };\n  })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n  (function nonStandardBrowserEnv() {\n    return function isURLSameOrigin() {\n      return true;\n    };\n  })();\n","'use strict';\n\n/**\n * Calculate data maxRate\n * @param {Number} [samplesCount= 10]\n * @param {Number} [min= 1000]\n * @returns {Function}\n */\nfunction speedometer(samplesCount, min) {\n  samplesCount = samplesCount || 10;\n  const bytes = new Array(samplesCount);\n  const timestamps = new Array(samplesCount);\n  let head = 0;\n  let tail = 0;\n  let firstSampleTS;\n\n  min = min !== undefined ? min : 1000;\n\n  return function push(chunkLength) {\n    const now = Date.now();\n\n    const startedAt = timestamps[tail];\n\n    if (!firstSampleTS) {\n      firstSampleTS = now;\n    }\n\n    bytes[head] = chunkLength;\n    timestamps[head] = now;\n\n    let i = tail;\n    let bytesCount = 0;\n\n    while (i !== head) {\n      bytesCount += bytes[i++];\n      i = i % samplesCount;\n    }\n\n    head = (head + 1) % samplesCount;\n\n    if (head === tail) {\n      tail = (tail + 1) % samplesCount;\n    }\n\n    if (now - firstSampleTS < min) {\n      return;\n    }\n\n    const passed = startedAt && now - startedAt;\n\n    return passed ? Math.round(bytesCount * 1000 / passed) : undefined;\n  };\n}\n\nexport default speedometer;\n","'use strict';\n\nimport utils from './../utils.js';\nimport settle from './../core/settle.js';\nimport cookies from './../helpers/cookies.js';\nimport buildURL from './../helpers/buildURL.js';\nimport buildFullPath from '../core/buildFullPath.js';\nimport isURLSameOrigin from './../helpers/isURLSameOrigin.js';\nimport transitionalDefaults from '../defaults/transitional.js';\nimport AxiosError from '../core/AxiosError.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport parseProtocol from '../helpers/parseProtocol.js';\nimport platform from '../platform/index.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport speedometer from '../helpers/speedometer.js';\n\nfunction progressEventReducer(listener, isDownloadStream) {\n  let bytesNotified = 0;\n  const _speedometer = speedometer(50, 250);\n\n  return e => {\n    const loaded = e.loaded;\n    const total = e.lengthComputable ? e.total : undefined;\n    const progressBytes = loaded - bytesNotified;\n    const rate = _speedometer(progressBytes);\n    const inRange = loaded <= total;\n\n    bytesNotified = loaded;\n\n    const data = {\n      loaded,\n      total,\n      progress: total ? (loaded / total) : undefined,\n      bytes: progressBytes,\n      rate: rate ? rate : undefined,\n      estimated: rate && total && inRange ? (total - loaded) / rate : undefined,\n      event: e\n    };\n\n    data[isDownloadStream ? 'download' : 'upload'] = true;\n\n    listener(data);\n  };\n}\n\nconst isXHRAdapterSupported = typeof XMLHttpRequest !== 'undefined';\n\nexport default isXHRAdapterSupported && function (config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    let requestData = config.data;\n    const requestHeaders = AxiosHeaders.from(config.headers).normalize();\n    let {responseType, withXSRFToken} = config;\n    let onCanceled;\n    function done() {\n      if (config.cancelToken) {\n        config.cancelToken.unsubscribe(onCanceled);\n      }\n\n      if (config.signal) {\n        config.signal.removeEventListener('abort', onCanceled);\n      }\n    }\n\n    let contentType;\n\n    if (utils.isFormData(requestData)) {\n      if (platform.hasStandardBrowserEnv || platform.hasStandardBrowserWebWorkerEnv) {\n        requestHeaders.setContentType(false); // Let the browser set it\n      } else if ((contentType = requestHeaders.getContentType()) !== false) {\n        // fix semicolon duplication issue for ReactNative FormData implementation\n        const [type, ...tokens] = contentType ? contentType.split(';').map(token => token.trim()).filter(Boolean) : [];\n        requestHeaders.setContentType([type || 'multipart/form-data', ...tokens].join('; '));\n      }\n    }\n\n    let request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      const username = config.auth.username || '';\n      const password = config.auth.password ? unescape(encodeURIComponent(config.auth.password)) : '';\n      requestHeaders.set('Authorization', 'Basic ' + btoa(username + ':' + password));\n    }\n\n    const fullPath = buildFullPath(config.baseURL, config.url);\n\n    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    function onloadend() {\n      if (!request) {\n        return;\n      }\n      // Prepare the response\n      const responseHeaders = AxiosHeaders.from(\n        'getAllResponseHeaders' in request && request.getAllResponseHeaders()\n      );\n      const responseData = !responseType || responseType === 'text' || responseType === 'json' ?\n        request.responseText : request.response;\n      const response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config,\n        request\n      };\n\n      settle(function _resolve(value) {\n        resolve(value);\n        done();\n      }, function _reject(err) {\n        reject(err);\n        done();\n      }, response);\n\n      // Clean up request\n      request = null;\n    }\n\n    if ('onloadend' in request) {\n      // Use onloadend if available\n      request.onloadend = onloadend;\n    } else {\n      // Listen for ready state to emulate onloadend\n      request.onreadystatechange = function handleLoad() {\n        if (!request || request.readyState !== 4) {\n          return;\n        }\n\n        // The request errored out and we didn't get a response, this will be\n        // handled by onerror instead\n        // With one exception: request that using file: protocol, most browsers\n        // will return status as 0 even though it's a successful request\n        if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n          return;\n        }\n        // readystate handler is calling before onerror or ontimeout handlers,\n        // so we should call onloadend on the next 'tick'\n        setTimeout(onloadend);\n      };\n    }\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(new AxiosError('Request aborted', AxiosError.ECONNABORTED, config, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(new AxiosError('Network Error', AxiosError.ERR_NETWORK, config, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      let timeoutErrorMessage = config.timeout ? 'timeout of ' + config.timeout + 'ms exceeded' : 'timeout exceeded';\n      const transitional = config.transitional || transitionalDefaults;\n      if (config.timeoutErrorMessage) {\n        timeoutErrorMessage = config.timeoutErrorMessage;\n      }\n      reject(new AxiosError(\n        timeoutErrorMessage,\n        transitional.clarifyTimeoutError ? AxiosError.ETIMEDOUT : AxiosError.ECONNABORTED,\n        config,\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if(platform.hasStandardBrowserEnv) {\n      withXSRFToken && utils.isFunction(withXSRFToken) && (withXSRFToken = withXSRFToken(config));\n\n      if (withXSRFToken || (withXSRFToken !== false && isURLSameOrigin(fullPath))) {\n        // Add xsrf header\n        const xsrfValue = config.xsrfHeaderName && config.xsrfCookieName && cookies.read(config.xsrfCookieName);\n\n        if (xsrfValue) {\n          requestHeaders.set(config.xsrfHeaderName, xsrfValue);\n        }\n      }\n    }\n\n    // Remove Content-Type if data is undefined\n    requestData === undefined && requestHeaders.setContentType(null);\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders.toJSON(), function setRequestHeader(val, key) {\n        request.setRequestHeader(key, val);\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(config.withCredentials)) {\n      request.withCredentials = !!config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (responseType && responseType !== 'json') {\n      request.responseType = config.responseType;\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', progressEventReducer(config.onDownloadProgress, true));\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', progressEventReducer(config.onUploadProgress));\n    }\n\n    if (config.cancelToken || config.signal) {\n      // Handle cancellation\n      // eslint-disable-next-line func-names\n      onCanceled = cancel => {\n        if (!request) {\n          return;\n        }\n        reject(!cancel || cancel.type ? new CanceledError(null, config, request) : cancel);\n        request.abort();\n        request = null;\n      };\n\n      config.cancelToken && config.cancelToken.subscribe(onCanceled);\n      if (config.signal) {\n        config.signal.aborted ? onCanceled() : config.signal.addEventListener('abort', onCanceled);\n      }\n    }\n\n    const protocol = parseProtocol(fullPath);\n\n    if (protocol && platform.protocols.indexOf(protocol) === -1) {\n      reject(new AxiosError('Unsupported protocol ' + protocol + ':', AxiosError.ERR_BAD_REQUEST, config));\n      return;\n    }\n\n\n    // Send the request\n    request.send(requestData || null);\n  });\n}\n","import utils from '../utils.js';\nimport httpAdapter from './http.js';\nimport xhrAdapter from './xhr.js';\nimport AxiosError from \"../core/AxiosError.js\";\n\nconst knownAdapters = {\n  http: httpAdapter,\n  xhr: xhrAdapter\n}\n\nutils.forEach(knownAdapters, (fn, value) => {\n  if (fn) {\n    try {\n      Object.defineProperty(fn, 'name', {value});\n    } catch (e) {\n      // eslint-disable-next-line no-empty\n    }\n    Object.defineProperty(fn, 'adapterName', {value});\n  }\n});\n\nconst renderReason = (reason) => `- ${reason}`;\n\nconst isResolvedHandle = (adapter) => utils.isFunction(adapter) || adapter === null || adapter === false;\n\nexport default {\n  getAdapter: (adapters) => {\n    adapters = utils.isArray(adapters) ? adapters : [adapters];\n\n    const {length} = adapters;\n    let nameOrAdapter;\n    let adapter;\n\n    const rejectedReasons = {};\n\n    for (let i = 0; i < length; i++) {\n      nameOrAdapter = adapters[i];\n      let id;\n\n      adapter = nameOrAdapter;\n\n      if (!isResolvedHandle(nameOrAdapter)) {\n        adapter = knownAdapters[(id = String(nameOrAdapter)).toLowerCase()];\n\n        if (adapter === undefined) {\n          throw new AxiosError(`Unknown adapter '${id}'`);\n        }\n      }\n\n      if (adapter) {\n        break;\n      }\n\n      rejectedReasons[id || '#' + i] = adapter;\n    }\n\n    if (!adapter) {\n\n      const reasons = Object.entries(rejectedReasons)\n        .map(([id, state]) => `adapter ${id} ` +\n          (state === false ? 'is not supported by the environment' : 'is not available in the build')\n        );\n\n      let s = length ?\n        (reasons.length > 1 ? 'since :\\n' + reasons.map(renderReason).join('\\n') : ' ' + renderReason(reasons[0])) :\n        'as no adapter specified';\n\n      throw new AxiosError(\n        `There is no suitable adapter to dispatch the request ` + s,\n        'ERR_NOT_SUPPORT'\n      );\n    }\n\n    return adapter;\n  },\n  adapters: knownAdapters\n}\n","// eslint-disable-next-line strict\nexport default null;\n","'use strict';\n\nimport AxiosError from './AxiosError.js';\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n *\n * @returns {object} The response.\n */\nexport default function settle(resolve, reject, response) {\n  const validateStatus = response.config.validateStatus;\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(new AxiosError(\n      'Request failed with status code ' + response.status,\n      [AxiosError.ERR_BAD_REQUEST, AxiosError.ERR_BAD_RESPONSE][Math.floor(response.status / 100) - 4],\n      response.config,\n      response.request,\n      response\n    ));\n  }\n}\n","'use strict';\n\nexport default function parseProtocol(url) {\n  const match = /^([-+\\w]{1,25})(:?\\/\\/|:)/.exec(url);\n  return match && match[1] || '';\n}\n","'use strict';\n\nimport transformData from './transformData.js';\nimport isCancel from '../cancel/isCancel.js';\nimport defaults from '../defaults/index.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport adapters from \"../adapters/adapters.js\";\n\n/**\n * Throws a `CanceledError` if cancellation has been requested.\n *\n * @param {Object} config The config that is to be used for the request\n *\n * @returns {void}\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n\n  if (config.signal && config.signal.aborted) {\n    throw new CanceledError(null, config);\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n *\n * @returns {Promise} The Promise to be fulfilled\n */\nexport default function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  config.headers = AxiosHeaders.from(config.headers);\n\n  // Transform request data\n  config.data = transformData.call(\n    config,\n    config.transformRequest\n  );\n\n  if (['post', 'put', 'patch'].indexOf(config.method) !== -1) {\n    config.headers.setContentType('application/x-www-form-urlencoded', false);\n  }\n\n  const adapter = adapters.getAdapter(config.adapter || defaults.adapter);\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData.call(\n      config,\n      config.transformResponse,\n      response\n    );\n\n    response.headers = AxiosHeaders.from(response.headers);\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData.call(\n          config,\n          config.transformResponse,\n          reason.response\n        );\n        reason.response.headers = AxiosHeaders.from(reason.response.headers);\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n}\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosHeaders from \"./AxiosHeaders.js\";\n\nconst headersToObject = (thing) => thing instanceof AxiosHeaders ? thing.toJSON() : thing;\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n *\n * @returns {Object} New object resulting from merging config2 to config1\n */\nexport default function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  const config = {};\n\n  function getMergedValue(target, source, caseless) {\n    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {\n      return utils.merge.call({caseless}, target, source);\n    } else if (utils.isPlainObject(source)) {\n      return utils.merge({}, source);\n    } else if (utils.isArray(source)) {\n      return source.slice();\n    }\n    return source;\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDeepProperties(a, b, caseless) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(a, b, caseless);\n    } else if (!utils.isUndefined(a)) {\n      return getMergedValue(undefined, a, caseless);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function valueFromConfig2(a, b) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function defaultToConfig2(a, b) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    } else if (!utils.isUndefined(a)) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDirectKeys(a, b, prop) {\n    if (prop in config2) {\n      return getMergedValue(a, b);\n    } else if (prop in config1) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  const mergeMap = {\n    url: valueFromConfig2,\n    method: valueFromConfig2,\n    data: valueFromConfig2,\n    baseURL: defaultToConfig2,\n    transformRequest: defaultToConfig2,\n    transformResponse: defaultToConfig2,\n    paramsSerializer: defaultToConfig2,\n    timeout: defaultToConfig2,\n    timeoutMessage: defaultToConfig2,\n    withCredentials: defaultToConfig2,\n    withXSRFToken: defaultToConfig2,\n    adapter: defaultToConfig2,\n    responseType: defaultToConfig2,\n    xsrfCookieName: defaultToConfig2,\n    xsrfHeaderName: defaultToConfig2,\n    onUploadProgress: defaultToConfig2,\n    onDownloadProgress: defaultToConfig2,\n    decompress: defaultToConfig2,\n    maxContentLength: defaultToConfig2,\n    maxBodyLength: defaultToConfig2,\n    beforeRedirect: defaultToConfig2,\n    transport: defaultToConfig2,\n    httpAgent: defaultToConfig2,\n    httpsAgent: defaultToConfig2,\n    cancelToken: defaultToConfig2,\n    socketPath: defaultToConfig2,\n    responseEncoding: defaultToConfig2,\n    validateStatus: mergeDirectKeys,\n    headers: (a, b) => mergeDeepProperties(headersToObject(a), headersToObject(b), true)\n  };\n\n  utils.forEach(Object.keys(Object.assign({}, config1, config2)), function computeConfigValue(prop) {\n    const merge = mergeMap[prop] || mergeDeepProperties;\n    const configValue = merge(config1[prop], config2[prop], prop);\n    (utils.isUndefined(configValue) && merge !== mergeDirectKeys) || (config[prop] = configValue);\n  });\n\n  return config;\n}\n","export const VERSION = \"1.6.2\";","'use strict';\n\nimport {VERSION} from '../env/data.js';\nimport AxiosError from '../core/AxiosError.js';\n\nconst validators = {};\n\n// eslint-disable-next-line func-names\n['object', 'boolean', 'number', 'function', 'string', 'symbol'].forEach((type, i) => {\n  validators[type] = function validator(thing) {\n    return typeof thing === type || 'a' + (i < 1 ? 'n ' : ' ') + type;\n  };\n});\n\nconst deprecatedWarnings = {};\n\n/**\n * Transitional option validator\n *\n * @param {function|boolean?} validator - set to false if the transitional option has been removed\n * @param {string?} version - deprecated version / removed since version\n * @param {string?} message - some message with additional info\n *\n * @returns {function}\n */\nvalidators.transitional = function transitional(validator, version, message) {\n  function formatMessage(opt, desc) {\n    return '[Axios v' + VERSION + '] Transitional option \\'' + opt + '\\'' + desc + (message ? '. ' + message : '');\n  }\n\n  // eslint-disable-next-line func-names\n  return (value, opt, opts) => {\n    if (validator === false) {\n      throw new AxiosError(\n        formatMessage(opt, ' has been removed' + (version ? ' in ' + version : '')),\n        AxiosError.ERR_DEPRECATED\n      );\n    }\n\n    if (version && !deprecatedWarnings[opt]) {\n      deprecatedWarnings[opt] = true;\n      // eslint-disable-next-line no-console\n      console.warn(\n        formatMessage(\n          opt,\n          ' has been deprecated since v' + version + ' and will be removed in the near future'\n        )\n      );\n    }\n\n    return validator ? validator(value, opt, opts) : true;\n  };\n};\n\n/**\n * Assert object's properties type\n *\n * @param {object} options\n * @param {object} schema\n * @param {boolean?} allowUnknown\n *\n * @returns {object}\n */\n\nfunction assertOptions(options, schema, allowUnknown) {\n  if (typeof options !== 'object') {\n    throw new AxiosError('options must be an object', AxiosError.ERR_BAD_OPTION_VALUE);\n  }\n  const keys = Object.keys(options);\n  let i = keys.length;\n  while (i-- > 0) {\n    const opt = keys[i];\n    const validator = schema[opt];\n    if (validator) {\n      const value = options[opt];\n      const result = value === undefined || validator(value, opt, options);\n      if (result !== true) {\n        throw new AxiosError('option ' + opt + ' must be ' + result, AxiosError.ERR_BAD_OPTION_VALUE);\n      }\n      continue;\n    }\n    if (allowUnknown !== true) {\n      throw new AxiosError('Unknown option ' + opt, AxiosError.ERR_BAD_OPTION);\n    }\n  }\n}\n\nexport default {\n  assertOptions,\n  validators\n};\n","'use strict';\n\nimport utils from './../utils.js';\nimport buildURL from '../helpers/buildURL.js';\nimport InterceptorManager from './InterceptorManager.js';\nimport dispatchRequest from './dispatchRequest.js';\nimport mergeConfig from './mergeConfig.js';\nimport buildFullPath from './buildFullPath.js';\nimport validator from '../helpers/validator.js';\nimport AxiosHeaders from './AxiosHeaders.js';\n\nconst validators = validator.validators;\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n *\n * @return {Axios} A new instance of Axios\n */\nclass Axios {\n  constructor(instanceConfig) {\n    this.defaults = instanceConfig;\n    this.interceptors = {\n      request: new InterceptorManager(),\n      response: new InterceptorManager()\n    };\n  }\n\n  /**\n   * Dispatch a request\n   *\n   * @param {String|Object} configOrUrl The config specific for this request (merged with this.defaults)\n   * @param {?Object} config\n   *\n   * @returns {Promise} The Promise to be fulfilled\n   */\n  request(configOrUrl, config) {\n    /*eslint no-param-reassign:0*/\n    // Allow for axios('example/url'[, config]) a la fetch API\n    if (typeof configOrUrl === 'string') {\n      config = config || {};\n      config.url = configOrUrl;\n    } else {\n      config = configOrUrl || {};\n    }\n\n    config = mergeConfig(this.defaults, config);\n\n    const {transitional, paramsSerializer, headers} = config;\n\n    if (transitional !== undefined) {\n      validator.assertOptions(transitional, {\n        silentJSONParsing: validators.transitional(validators.boolean),\n        forcedJSONParsing: validators.transitional(validators.boolean),\n        clarifyTimeoutError: validators.transitional(validators.boolean)\n      }, false);\n    }\n\n    if (paramsSerializer != null) {\n      if (utils.isFunction(paramsSerializer)) {\n        config.paramsSerializer = {\n          serialize: paramsSerializer\n        }\n      } else {\n        validator.assertOptions(paramsSerializer, {\n          encode: validators.function,\n          serialize: validators.function\n        }, true);\n      }\n    }\n\n    // Set config.method\n    config.method = (config.method || this.defaults.method || 'get').toLowerCase();\n\n    // Flatten headers\n    let contextHeaders = headers && utils.merge(\n      headers.common,\n      headers[config.method]\n    );\n\n    headers && utils.forEach(\n      ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n      (method) => {\n        delete headers[method];\n      }\n    );\n\n    config.headers = AxiosHeaders.concat(contextHeaders, headers);\n\n    // filter out skipped interceptors\n    const requestInterceptorChain = [];\n    let synchronousRequestInterceptors = true;\n    this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n      if (typeof interceptor.runWhen === 'function' && interceptor.runWhen(config) === false) {\n        return;\n      }\n\n      synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;\n\n      requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    const responseInterceptorChain = [];\n    this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n      responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    let promise;\n    let i = 0;\n    let len;\n\n    if (!synchronousRequestInterceptors) {\n      const chain = [dispatchRequest.bind(this), undefined];\n      chain.unshift.apply(chain, requestInterceptorChain);\n      chain.push.apply(chain, responseInterceptorChain);\n      len = chain.length;\n\n      promise = Promise.resolve(config);\n\n      while (i < len) {\n        promise = promise.then(chain[i++], chain[i++]);\n      }\n\n      return promise;\n    }\n\n    len = requestInterceptorChain.length;\n\n    let newConfig = config;\n\n    i = 0;\n\n    while (i < len) {\n      const onFulfilled = requestInterceptorChain[i++];\n      const onRejected = requestInterceptorChain[i++];\n      try {\n        newConfig = onFulfilled(newConfig);\n      } catch (error) {\n        onRejected.call(this, error);\n        break;\n      }\n    }\n\n    try {\n      promise = dispatchRequest.call(this, newConfig);\n    } catch (error) {\n      return Promise.reject(error);\n    }\n\n    i = 0;\n    len = responseInterceptorChain.length;\n\n    while (i < len) {\n      promise = promise.then(responseInterceptorChain[i++], responseInterceptorChain[i++]);\n    }\n\n    return promise;\n  }\n\n  getUri(config) {\n    config = mergeConfig(this.defaults, config);\n    const fullPath = buildFullPath(config.baseURL, config.url);\n    return buildURL(fullPath, config.params, config.paramsSerializer);\n  }\n}\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(mergeConfig(config || {}, {\n      method,\n      url,\n      data: (config || {}).data\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n\n  function generateHTTPMethod(isForm) {\n    return function httpMethod(url, data, config) {\n      return this.request(mergeConfig(config || {}, {\n        method,\n        headers: isForm ? {\n          'Content-Type': 'multipart/form-data'\n        } : {},\n        url,\n        data\n      }));\n    };\n  }\n\n  Axios.prototype[method] = generateHTTPMethod();\n\n  Axios.prototype[method + 'Form'] = generateHTTPMethod(true);\n});\n\nexport default Axios;\n","'use strict';\n\nimport CanceledError from './CanceledError.js';\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @param {Function} executor The executor function.\n *\n * @returns {CancelToken}\n */\nclass CancelToken {\n  constructor(executor) {\n    if (typeof executor !== 'function') {\n      throw new TypeError('executor must be a function.');\n    }\n\n    let resolvePromise;\n\n    this.promise = new Promise(function promiseExecutor(resolve) {\n      resolvePromise = resolve;\n    });\n\n    const token = this;\n\n    // eslint-disable-next-line func-names\n    this.promise.then(cancel => {\n      if (!token._listeners) return;\n\n      let i = token._listeners.length;\n\n      while (i-- > 0) {\n        token._listeners[i](cancel);\n      }\n      token._listeners = null;\n    });\n\n    // eslint-disable-next-line func-names\n    this.promise.then = onfulfilled => {\n      let _resolve;\n      // eslint-disable-next-line func-names\n      const promise = new Promise(resolve => {\n        token.subscribe(resolve);\n        _resolve = resolve;\n      }).then(onfulfilled);\n\n      promise.cancel = function reject() {\n        token.unsubscribe(_resolve);\n      };\n\n      return promise;\n    };\n\n    executor(function cancel(message, config, request) {\n      if (token.reason) {\n        // Cancellation has already been requested\n        return;\n      }\n\n      token.reason = new CanceledError(message, config, request);\n      resolvePromise(token.reason);\n    });\n  }\n\n  /**\n   * Throws a `CanceledError` if cancellation has been requested.\n   */\n  throwIfRequested() {\n    if (this.reason) {\n      throw this.reason;\n    }\n  }\n\n  /**\n   * Subscribe to the cancel signal\n   */\n\n  subscribe(listener) {\n    if (this.reason) {\n      listener(this.reason);\n      return;\n    }\n\n    if (this._listeners) {\n      this._listeners.push(listener);\n    } else {\n      this._listeners = [listener];\n    }\n  }\n\n  /**\n   * Unsubscribe from the cancel signal\n   */\n\n  unsubscribe(listener) {\n    if (!this._listeners) {\n      return;\n    }\n    const index = this._listeners.indexOf(listener);\n    if (index !== -1) {\n      this._listeners.splice(index, 1);\n    }\n  }\n\n  /**\n   * Returns an object that contains a new `CancelToken` and a function that, when called,\n   * cancels the `CancelToken`.\n   */\n  static source() {\n    let cancel;\n    const token = new CancelToken(function executor(c) {\n      cancel = c;\n    });\n    return {\n      token,\n      cancel\n    };\n  }\n}\n\nexport default CancelToken;\n","const HttpStatusCode = {\n  Continue: 100,\n  SwitchingProtocols: 101,\n  Processing: 102,\n  EarlyHints: 103,\n  Ok: 200,\n  Created: 201,\n  Accepted: 202,\n  NonAuthoritativeInformation: 203,\n  NoContent: 204,\n  ResetContent: 205,\n  PartialContent: 206,\n  MultiStatus: 207,\n  AlreadyReported: 208,\n  ImUsed: 226,\n  MultipleChoices: 300,\n  MovedPermanently: 301,\n  Found: 302,\n  SeeOther: 303,\n  NotModified: 304,\n  UseProxy: 305,\n  Unused: 306,\n  TemporaryRedirect: 307,\n  PermanentRedirect: 308,\n  BadRequest: 400,\n  Unauthorized: 401,\n  PaymentRequired: 402,\n  Forbidden: 403,\n  NotFound: 404,\n  MethodNotAllowed: 405,\n  NotAcceptable: 406,\n  ProxyAuthenticationRequired: 407,\n  RequestTimeout: 408,\n  Conflict: 409,\n  Gone: 410,\n  LengthRequired: 411,\n  PreconditionFailed: 412,\n  PayloadTooLarge: 413,\n  UriTooLong: 414,\n  UnsupportedMediaType: 415,\n  RangeNotSatisfiable: 416,\n  ExpectationFailed: 417,\n  ImATeapot: 418,\n  MisdirectedRequest: 421,\n  UnprocessableEntity: 422,\n  Locked: 423,\n  FailedDependency: 424,\n  TooEarly: 425,\n  UpgradeRequired: 426,\n  PreconditionRequired: 428,\n  TooManyRequests: 429,\n  RequestHeaderFieldsTooLarge: 431,\n  UnavailableForLegalReasons: 451,\n  InternalServerError: 500,\n  NotImplemented: 501,\n  BadGateway: 502,\n  ServiceUnavailable: 503,\n  GatewayTimeout: 504,\n  HttpVersionNotSupported: 505,\n  VariantAlsoNegotiates: 506,\n  InsufficientStorage: 507,\n  LoopDetected: 508,\n  NotExtended: 510,\n  NetworkAuthenticationRequired: 511,\n};\n\nObject.entries(HttpStatusCode).forEach(([key, value]) => {\n  HttpStatusCode[value] = key;\n});\n\nexport default HttpStatusCode;\n","'use strict';\n\nimport utils from './utils.js';\nimport bind from './helpers/bind.js';\nimport Axios from './core/Axios.js';\nimport mergeConfig from './core/mergeConfig.js';\nimport defaults from './defaults/index.js';\nimport formDataToJSON from './helpers/formDataToJSON.js';\nimport CanceledError from './cancel/CanceledError.js';\nimport CancelToken from './cancel/CancelToken.js';\nimport isCancel from './cancel/isCancel.js';\nimport {VERSION} from './env/data.js';\nimport toFormData from './helpers/toFormData.js';\nimport AxiosError from './core/AxiosError.js';\nimport spread from './helpers/spread.js';\nimport isAxiosError from './helpers/isAxiosError.js';\nimport AxiosHeaders from \"./core/AxiosHeaders.js\";\nimport adapters from './adapters/adapters.js';\nimport HttpStatusCode from './helpers/HttpStatusCode.js';\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n *\n * @returns {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  const context = new Axios(defaultConfig);\n  const instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context, {allOwnKeys: true});\n\n  // Copy context to instance\n  utils.extend(instance, context, null, {allOwnKeys: true});\n\n  // Factory for creating new instances\n  instance.create = function create(instanceConfig) {\n    return createInstance(mergeConfig(defaultConfig, instanceConfig));\n  };\n\n  return instance;\n}\n\n// Create the default instance to be exported\nconst axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Expose Cancel & CancelToken\naxios.CanceledError = CanceledError;\naxios.CancelToken = CancelToken;\naxios.isCancel = isCancel;\naxios.VERSION = VERSION;\naxios.toFormData = toFormData;\n\n// Expose AxiosError class\naxios.AxiosError = AxiosError;\n\n// alias for CanceledError for backward compatibility\naxios.Cancel = axios.CanceledError;\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\n\naxios.spread = spread;\n\n// Expose isAxiosError\naxios.isAxiosError = isAxiosError;\n\n// Expose mergeConfig\naxios.mergeConfig = mergeConfig;\n\naxios.AxiosHeaders = AxiosHeaders;\n\naxios.formToJSON = thing => formDataToJSON(utils.isHTMLForm(thing) ? new FormData(thing) : thing);\n\naxios.getAdapter = adapters.getAdapter;\n\naxios.HttpStatusCode = HttpStatusCode;\n\naxios.default = axios;\n\n// this module should only have a default export\nexport default axios\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n *\n * @returns {Function}\n */\nexport default function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\n/**\n * Determines whether the payload is an error thrown by Axios\n *\n * @param {*} payload The value to test\n *\n * @returns {boolean} True if the payload is an error thrown by Axios, otherwise false\n */\nexport default function isAxiosError(payload) {\n  return utils.isObject(payload) && (payload.isAxiosError === true);\n}\n","\r\nimport axios from 'axios';\r\nconst log = console; \r\nexport const __serverApi = '';\r\nexport const __isLocal = window.location.host == 'localhost';\r\ntop.__isLocal = __isLocal;\r\nclass WindowUtil{\r\n    #loginRemeber;\r\n    constructor(){\r\n\r\n    }\r\n    async isLogin(callback = () => {}){\r\n        if(this.#loginRemeber){\r\n            return Promise.resolve(callback(this.#loginRemeber));\r\n        }\r\n        return axios.get(__serverApi + '/api/account/search/is-login', {\r\n            headers:{\r\n                'Content-Type': 'application/json'\r\n            }\r\n        })\r\n        .catch(err=>{\r\n            return err.response\r\n        })\r\n        .then(response => {\r\n            if( ! this.responseIsOk(response)){\r\n                return callback({\r\n                    isLogin: false,\r\n                    status: response?.status,\r\n                    statusText: response?.statusText\r\n                });\r\n            }else{\r\n                if(response.data.code == 0){\r\n                    response.isLogin = true;\t\r\n                }else if(response.data.code == 100 || response.data.code == 105 || response.data.code == 106 || response.data.code == 107){\r\n                    response.isLogin = false;\r\n                }else{\r\n                    response.isLogin = false;\r\n                }\r\n\r\n                if(! response.isLogin){\r\n                    axios.defaults.headers.common['Authorization'] = '';\r\n                }else{\r\n                    this.#loginRemeber = response;\r\n                    setTimeout(()=>{\r\n                        this.#loginRemeber = undefined;\r\n                    }, 1000 * 60)\r\n                }\r\n                return callback(response);\r\n            }\r\n        })\r\n    }\r\n\r\n    responseIsOk({status = undefined} = {}){\r\n        if( ! status){\r\n            return false;\r\n        }\r\n        return (status == '200' || status == '201') ;\r\n    }\r\n\r\n    responseCheck(response){\r\n\t\tlet status = response.status;\r\n\t\tlet {code, data} = response.data;\r\n        if(status == '200' || status == '201'){\r\n\t\t\treturn response\r\n\t\t}else{\r\n            log.error(response);\r\n\t\t\tthrow new Error(response.message);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport const windowUtil = new WindowUtil();","import { windowUtil, __serverApi } from \"../window/WindowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\n\r\nclass AccountController {\r\n\tconstructor() {\r\n\r\n\t}\r\n\r\n\tloginProcessing(param){\r\n\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\ttotal[k] = v;\r\n\t\t\t}\r\n\t\t\treturn total;\r\n\t\t},{});\r\n\t\treturn axios.post(__serverApi + '/login-processing', JSON.stringify(param), {\r\n\t\t\theaders:{\r\n\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t}\r\n\t\t})\r\n\t\t.then(response=>{\r\n\t\t\tif(windowUtil.responseIsOk(response) && top.constructor.name == 'Window'){\r\n\t\t\t\treturn response.data;\r\n\t\t\t}\r\n\t\t\treturn response;\t\r\n\t\t}).catch(err=>{\r\n\t\t\tlog.error('loginProcessing error : ', err.message);\r\n\t\t\taxios.defaults.headers.common['Authorization'] = '';\r\n\t\t\tconsole.log(err);\r\n\t\t\tif(err.response){\r\n\t\t\t\treturn err.response.data;\r\n\t\t\t}else{\r\n\t\t\t\treturn err.message\r\n\t\t\t}\r\n\t\t\t\r\n\t\t})\r\n\t}\r\n\tgetAccountInfo(){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/account/search/get-account-info`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response=>response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC getAccountInfo error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tupdateSimpleAccountInfo(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/account/update/simple-account-info`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createPermitWokrspaceInAccount error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n}\r\nexport const accountController = new AccountController();","import { windowUtil, __serverApi } from \"../window/WindowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\n\r\nclass ApiS3Controller {\r\n\tconstructor() {\r\n\t}\r\n\tgenerateSecurityPutObjectPresignedUrl(param){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t}\r\n\t\t\t\treturn total;\r\n\t\t\t},{});\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/generate-presigned-url/create/security`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC sendChatting error', err);\r\n\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('sendChatting login error ::: ', error.message);\r\n\t\t\tlog.error('sendChatting login error stack ::: ', error.stack);\r\n\t\t\treturn undefined;\r\n\t\t});\r\n\t}\r\n\tgenerateSecurityGetObjectPresignedUrl(param){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t}\r\n\t\t\t\treturn total;\r\n\t\t\t},{});\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/generate-presigned-url/search/security`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC sendChatting error', err);\r\n\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('sendChatting login error ::: ', error.message);\r\n\t\t\tlog.error('sendChatting login error stack ::: ', error.stack);\r\n\t\t\treturn undefined;\r\n\t\t});\r\n\t}\r\n\tgenerateGetObjectPresignedUrl(param){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t}\r\n\t\t\t\treturn total;\r\n\t\t\t},{});\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/generate-presigned-url/create/`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC sendChatting error', err);\r\n\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('sendChatting login error ::: ', error.message);\r\n\t\t\tlog.error('sendChatting login error stack ::: ', error.stack);\r\n\t\t\treturn undefined;\r\n\t\t});\r\n\t}\r\n}\r\nexport const apiS3Controller = new ApiS3Controller();","import { windowUtil, __serverApi } from \"../window/WindowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\n\r\nclass ChattingController {\r\n\tconstructor() {\r\n\r\n\t}\r\n\r\n\tsendChatting(param){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n                    if(v != undefined && v != ''){\r\n                        total[k] = v;\r\n                    }\r\n                    return total;\r\n                },{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/chatting/create/send-chatting`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC sendChatting error', err);\r\n\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('sendChatting login error ::: ', error.message);\r\n\t\t\tlog.error('sendChatting login error stack ::: ', error.stack);\r\n\t\t\treturn undefined;\r\n\t\t});\r\n\t}\t\r\n\tdeleteChatting(param){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n                    if(v != undefined && v != ''){\r\n                        total[k] = v;\r\n                    }\r\n                    return total;\r\n                },{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/chatting/delete/`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC sendChatting error', err);\r\n\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('sendChatting login error ::: ', error.message);\r\n\t\t\tlog.error('sendChatting login error stack ::: ', error.stack);\r\n\t\t\treturn undefined;\r\n\t\t});\r\n\t}\r\n\tsearchChattingList(param){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tlet {workspaceId, roomId} = param;\r\n\t\t\t\tlet queryString = Object.entries(param)\r\n\t\t\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId' && k != 'roomId')\r\n\t\t\t\t\t.map(([k,v]) => `${k}=${v}`).join('&')\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/chatting/search/chatting-list/${workspaceId}/${roomId}?${queryString}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC searchChatting error' , err);\r\n\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('searchChatting login error ::: ', error.message);\r\n\t\t\tlog.error('searchChatting login error stack ::: ', error.stack);\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n}\r\nexport const chattingController = new ChattingController();","import { windowUtil, __serverApi } from \"../window/WindowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\n\r\nclass EmoticonController {\r\n\tconstructor() {\r\n    }\r\n\r\n\tcreateEmotionReaction(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/emoticon/create/reaction`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createEmotion error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n    deleteEmotion(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/emoticon/delete/`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC deleteEmotion error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tgetIsReaction(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tlet {workspaceId} = param;\r\n\t\t\t\tlet queryString = Object.entries(param)\r\n\t\t\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId')\r\n\t\t\t\t\t.map(([k,v]) => {\r\n\t\t\t\t\t\tif(v instanceof Array){\r\n\t\t\t\t\t\t\tv = v.map(val=>`${k}=${val}`).join('&')\r\n\t\t\t\t\t\t\treturn v;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn `${k}=${v}`\r\n\t\t\t\t\t}).join('&')\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/emoticon/search/is-reaction?${queryString}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC searchMyJoinedRoomList error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\t\r\n}\r\nexport const emoticonController = new EmoticonController();","import { windowUtil, __serverApi } from \"../window/WindowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\n\r\nclass EventStreamController {\r\n    source;\r\n\tprevWorkspaceId;\r\n    constructor(){\r\n    }\r\n\r\n\tinitWorkspaceStream(param, EventSource, eventSendObj){\r\n        let {workspaceId} = param;\r\n        if( ! EventSource) EventSource = top?.EventSource;\r\n\t\tif(this.prevWorkspaceId == workspaceId && (this.source?.readyState == 1 || this.source?.readyState == 0)){\r\n            return;\r\n        }else if(this.prevWorkspaceId != workspaceId && (this.source?.readyState == 1 || this.source?.readyState == 0)){\r\n            this.source.close();\r\n        }\r\n        \r\n        this.prevWorkspaceId = workspaceId;\r\n\r\n        this.source = new EventSource(`${__serverApi}/api/event-stream/workspace/${workspaceId}`, {\r\n            headers: {\r\n                'Authorization' : axios.defaults.headers.common['Authorization'],\r\n            },\r\n            withCredentials : ! top.__isLocal\r\n        });\r\n\r\n        this.source.onmessage = (event) => {\r\n            let {data, lastEventId, origin, type} = event;\r\n            data = JSON.parse(data);\r\n            log.debug('event stream data ::: ', data);\r\n\r\n            let eventName = data.serverSentStreamType.split('_').map((e, i)=>{\r\n                if(i == 0){\r\n                    return e.toLowerCase(); \r\n                }\r\n                return e.charAt(0) + e.substring(1).toLowerCase();\r\n            }).join('');\r\n\r\n            log.debug('on message: ', event.data, 'eventName ::', eventName);\r\n\r\n            if(this[eventName]){\r\n                this[eventName](eventName, data);\r\n                return ;\r\n            }\r\n            if(eventSendObj.webEventSend){\r\n                eventSendObj.webEventSend(eventName, data);\r\n            }else{\r\n                eventSendObj.send(eventName, data);\r\n            }\r\n        };\r\n\r\n        this.source.onerror = (error) => {\r\n            log.error('on stream err: ', error);\r\n            //log.debug('source ::: ', this.source);\r\n            /*this.#isConnectSource = false;\r\n            windowUtil.isLogin( result => {\r\n                if( ! result.isLogin){\r\n                    axios.defaults.headers.common['Authorization'] = '';\r\n                    this.source.close();\r\n                    this.#send('needLoginRequest', result);\r\n                }\r\n            })*/\r\n            //      close\r\n            //         \r\n            this.source.close();\r\n            this.source = new EventSource(`${__serverApi}/api/event-stream/workspace/${workspaceId}`, {\r\n                headers: {\r\n                    'Authorization' : axios.defaults.headers.common['Authorization'],\r\n                },\r\n                withCredentials : ! top.__isLocal\r\n            });\r\n            //stop();\r\n        };\r\n        this.source.onopen = (success) => {\r\n            log.debug('on success: ', success)\r\n        }\r\n        /*\r\n        * This will listen only for events\r\n        * similar to the following:\r\n        *\r\n        * event: notice\r\n        * data: useful data\r\n        * id: someid\r\n        this.source.addEventListener(\"notice\", (e) => {\r\n            log.debug('event notice', e.data);\r\n        });\r\n        */\r\n\r\n        /*\r\n        * Similarly, this will listen for events\r\n        * with the field `event: update`\r\n        this.source.addEventListener(\"update\", (e) => {\r\n            log.debug('event update ::: ',e.data);\r\n        });\r\n        */\r\n\r\n        /*\r\n        * The event \"message\" is a special case, as it\r\n        * will capture events without an event field\r\n        * as well as events that have the specific type\r\n        * `event: message` It will not trigger on any\r\n        * other event type.\r\n        this.source.addEventListener(\"message\", (e) => {\r\n            log.debug('message !!!!! : ', e.data);\r\n        });\r\n        */\r\n        //}\r\n\t}\r\n\r\n}\r\n\r\n\r\nexport const eventStreamController = new EventStreamController();","import { windowUtil, __serverApi } from \"../window/WindowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\nclass NoticeBoardController {\r\n\tconstructor() {\r\n\r\n    }\r\n\r\n    createNoticeBoardGroup(param = {}){\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                param = Object.entries(param).reduce((total, [k,v]) => {\r\n                    if(v != undefined && v != ''){\r\n                        total[k] = v;\r\n                    }\r\n                    return total;\r\n                },{});\r\n                return axios.post(`${__serverApi}/api/notice-board/create/group`, JSON.stringify(param), {\r\n                    headers:{\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                })\r\n                .then(windowUtil.responseCheck)\r\n                .then(response => response.data)\r\n                .catch(err=>{\r\n                    log.error('IPC createNoticeBoardGroup error : ', JSON.stringify(err));\r\n                    //axios.defaults.headers.common['Authorization'] = '';\r\n                    if(err.response){\r\n                        return err.response.data;\r\n                    }else{\r\n                        return err.message\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n    }\r\n\r\n    createNoticeBoard(param = {}){\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                param = Object.entries(param).reduce((total, [k,v]) => {\r\n                    if(v != undefined && v != ''){\r\n                        total[k] = v;\r\n                    }\r\n                    return total;\r\n                },{});\r\n                return axios.post(`${__serverApi}/api/notice-board/create/`, JSON.stringify(param), {\r\n                    headers:{\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                })\r\n                .then(windowUtil.responseCheck)\r\n                .then(response => response.data)\r\n                .catch(err=>{\r\n                    log.error('IPC createNoticeBoard error : ', JSON.stringify(err));\r\n                    //axios.defaults.headers.common['Authorization'] = '';\r\n                    if(err.response){\r\n                        return err.response.data;\r\n                    }else{\r\n                        return err.message\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n    }\r\n\r\n    createNoticeBoardDetail(param = {}){\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                param = Object.entries(param).reduce((total, [k,v]) => {\r\n                    if(v != undefined && v != ''){\r\n                        total[k] = v;\r\n                    }\r\n                    return total;\r\n                },{});\r\n                return axios.post(`${__serverApi}/api/notice-board/create/detail`, JSON.stringify(param), {\r\n                    headers:{\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                })\r\n                .then(windowUtil.responseCheck)\r\n                .then(response => response.data)\r\n                .catch(err=>{\r\n                    log.error('IPC createNoticeBoardDetail error : ', JSON.stringify(err));\r\n                    //axios.defaults.headers.common['Authorization'] = '';\r\n                    if(err.response){\r\n                        return err.response.data;\r\n                    }else{\r\n                        return err.message\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n    }\r\n    searchNoticeBoardList(param = {}, EventSource, eventSendObj){\r\n        if( ! EventSource) EventSource = top?.EventSource;\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                let {workspaceId, roomId} = param;\r\n                let queryString = Object.entries(param)\r\n                    .filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId' && k != 'roomId')\r\n                    .map(([k,v]) => `${k}=${v}`).join('&')\r\n                    //console.log('queryString ::: ', queryString);\r\n                //return axios.get(`${__serverApi}/api/notice-board/search/notice-board-list/${workspaceId}/${roomId}?${queryString}`, {\r\n                return new Promise(resolve=>{\r\n                    let source = new EventSource(`${__serverApi}/api/notice-board/search/notice-board-list/${workspaceId}/${roomId}?${queryString}`, {\r\n                        headers: {\r\n                            'Authorization' : axios.defaults.headers.common['Authorization'],\r\n                        },\r\n                        withCredentials : ! top.__isLocal\r\n                    });\r\n                    source.onmessage = (event) => {\r\n                        //console.log('test message :::: ',event);\r\n                        let {data, lastEventId, origin, type} = event;\r\n                        data = JSON.parse(data);\r\n                        if(eventSendObj.webEventSend){\r\n\t\t\t\t\t\t\teventSendObj.webEventSend('noticeBoardAccept', data);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\teventSendObj.send('noticeBoardAccept', data);\r\n\t\t\t\t\t\t}\r\n                    }\r\n                    source.onerror = (event) => {\r\n                        //console.log('searchNoticeBoardList error :::: ',event);\r\n                        source.close();\r\n                        resolve('done');\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n            log.error('error ::: ', error.message)\r\n            log.error('error stack :::', error.stack)\r\n            return undefined;\r\n        });\r\n    }\r\n\r\n    searchNoticeBoardDetailList(param = {}, EventSource, eventSendObj){\r\n        if( ! EventSource) EventSource = top?.EventSource;\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                let {workspaceId, roomId, noticeBoardId} = param;\r\n                if(! noticeBoardId){\r\n                    return;\r\n                }\r\n                let queryString = Object.entries(param)\r\n                    .filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId' && k != 'roomId' && k != 'noticeBoardId')\r\n                    .map(([k,v]) => `${k}=${v}`).join('&')\r\n                    //console.log('queryString ::: ', queryString);\r\n                //return axios.get(`${__serverApi}/api/notice-board/search/notice-board-detail-list/${workspaceId}/${roomId}/${noticeBoardId}?${queryString}`, {\r\n                return new Promise(resolve=>{\r\n                    let source = new EventSource(`${__serverApi}/api/notice-board/search/notice-board-detail-list/${workspaceId}/${roomId}/${noticeBoardId}?${queryString}`, {\r\n                        headers: {\r\n                            'Authorization' : axios.defaults.headers.common['Authorization'],\r\n                        },\r\n                        withCredentials : ! top.__isLocal\r\n                    });\r\n                    source.onmessage = (event) => {\r\n                        //console.log('test message :::: ',event);\r\n                        let {data, lastEventId, origin, type} = event;\r\n                        data = JSON.parse(data);\r\n                        if(eventSendObj.webEventSend){\r\n\t\t\t\t\t\t\teventSendObj.webEventSend('noticeBoardDetailAccept', data);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\teventSendObj.send('noticeBoardDetailAccept', data);\r\n\t\t\t\t\t\t}\r\n                    }\r\n                    source.onerror = (event) => {\r\n                        console.log('searchNoticeBoardDetailList error :::: ',event);\r\n                        source.close();\r\n                        resolve('done');\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n            log.error('error ::: ', error.message)\r\n            log.error('error stack :::', error.stack)\r\n            return undefined;\r\n        });\r\n    }\r\n\r\n    deleteNoticeBoard(param = {}){\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                param = Object.entries(param).reduce((total, [k,v]) => {\r\n                    if(v != undefined && v != ''){\r\n                        total[k] = v;\r\n                    }\r\n                    return total;\r\n                },{});\r\n                console.log('delete param',param)\r\n                return axios.post(`${__serverApi}/api/notice-board/delete/`, JSON.stringify(param), {\r\n                    headers:{\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                })\r\n                .then(windowUtil.responseCheck)\r\n                .then(response => response.data)\r\n                .catch(err=>{\r\n                    log.error('IPC deleteNoticeBoard error : ', JSON.stringify(err));\r\n                    //axios.defaults.headers.common['Authorization'] = '';\r\n                    if(err.response){\r\n                        return err.response.data;\r\n                    }else{\r\n                        return err.message\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n    }\r\n    deleteNoticeBoardGroup(param = {}){\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                param = Object.entries(param).reduce((total, [k,v]) => {\r\n                    if(v != undefined && v != ''){\r\n                        total[k] = v;\r\n                    }\r\n                    return total;\r\n                },{});\r\n\r\n                return axios.post(`${__serverApi}/api/notice-board/delete/group`, JSON.stringify(param), {\r\n                    headers:{\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                })\r\n                .then(windowUtil.responseCheck)\r\n                .then(response => response.data)\r\n                .catch(err=>{\r\n                    log.error('IPC deleteNoticeBoardGroup error : ', JSON.stringify(err));\r\n                    //axios.defaults.headers.common['Authorization'] = '';\r\n                    if(err.response){\r\n                        return err.response.data;\r\n                    }else{\r\n                        return err.message\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n    }\r\n    updateNoticeBoardOrder(param = []){\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                console.log('update param',param)\r\n                return axios.post(`${__serverApi}/api/notice-board/update/order`, JSON.stringify(param), {\r\n                    headers:{\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                })\r\n                .then(windowUtil.responseCheck)\r\n                .then(response => response.data)\r\n                .catch(err=>{\r\n                    log.error('IPC updateNoticeBoardOrder error : ', JSON.stringify(err));\r\n                    //axios.defaults.headers.common['Authorization'] = '';\r\n                    if(err.response){\r\n                        return err.response.data;\r\n                    }else{\r\n                        return err.message\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n    }\r\n    updateNoticeBoardDetailOrder(param = []){\r\n        return windowUtil.isLogin( result => {\r\n            if(result.isLogin){\r\n                return axios.post(`${__serverApi}/api/notice-board/update/detail-order`, JSON.stringify(param), {\r\n                    headers:{\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                })\r\n                .then(windowUtil.responseCheck)\r\n                .then(response => response.data)\r\n                .catch(err=>{\r\n                    log.error('IPC updateNoticeBoardDetailOrder error : ', JSON.stringify(err));\r\n                    //axios.defaults.headers.common['Authorization'] = '';\r\n                    if(err.response){\r\n                        return err.response.data;\r\n                    }else{\r\n                        return err.message\r\n                    }\r\n                })\r\n            }else{\r\n                return {'isLogin': false};\r\n            }\r\n        }).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n    }\r\n}\r\nexport const noticeBoardController = new NoticeBoardController();\r\n","import { windowUtil, __serverApi } from \"../window/WindowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\nclass RoomController {\r\n\tconstructor() {\r\n    }\r\n\r\n\tcreateRoom(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/room/create/`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createRoom error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tcreateMySelfRoom(param = {}){\r\n\t\tif( ! param.workspaceId || isNaN(parseInt(param.workspaceId))){\r\n\t\t\tlog.error(`createMySelfRoom workspaceId is ::: ${param.workspaceId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/room/create/my-self-room/${param.workspaceId}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createMySelfRoom error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tcreateRoomInAccount(param = []){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/room/create/in-account`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.then(data => {\r\n\t\t\t\t\tlog.debug('createRoomInAccount ::: ',data)\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createRoomInAccount error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tupdateRoomInAccoutOrder(param = []){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/room/update/order`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC updateRoomInAccoutOrder error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tcreateRoomFavorites(param){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/room/create/favorites`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createRoomFavorites error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tupdateRoomFavorites(param = []){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/room/update/favorites-order`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createRoom error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tsearchRoomList(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tlet {roomId} = param;\r\n\t\t\t\tlet queryString = Object.entries(param)\r\n\t\t\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'roomId')\r\n\t\t\t\t\t.map(([k,v]) => `${k}=${v}`).join('&')\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/room/search/list/${roomId}?${queryString}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC searchRoom error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tsearchMyJoinedRoomList(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tlet {workspaceId} = param;\r\n\t\t\t\tlet queryString = Object.entries(param)\r\n\t\t\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId')\r\n\t\t\t\t\t.map(([k,v]) => {\r\n\t\t\t\t\t\tif(v instanceof Array){\r\n\t\t\t\t\t\t\tv = v.map(val=>`${k}=${val}`).join('&')\r\n\t\t\t\t\t\t\treturn v;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn `${k}=${v}`\r\n\t\t\t\t\t}).join('&')\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/room/search/my-joined-list/${workspaceId}?${queryString}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC searchMyJoinedRoomList error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tsearchRoomFavoritesList(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tlet {workspaceId} = param;\r\n\t\t\t\tlet queryString = Object.entries(param)\r\n\t\t\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId')\r\n\t\t\t\t\t.map(([k,v]) => {\r\n\t\t\t\t\t\tif(v instanceof Array){\r\n\t\t\t\t\t\t\tv = v.map(val=>`${k}=${val}`).join('&')\r\n\t\t\t\t\t\t\treturn v;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn `${k}=${v}`\r\n\t\t\t\t\t}).join('&')\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/room/search/favorites-list/${workspaceId}?${queryString}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC searchMyJoinedRoomList error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tsearchRoomJoinedAccountList(param = {}, EventSource, eventSendObj){\r\n\r\n\t\tif( ! param.roomId || isNaN(parseInt(param.roomId))){\r\n\t\t\tlog.error(`searchRoomJoinedAccountList roomId is ::: ${param.roomId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tif( ! EventSource) EventSource = top?.EventSource;\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn new Promise(resolve=>{\r\n\t\t\t\t\tlet source = new EventSource(`${__serverApi}/api/room/search/in-account-list/${param.roomId}`, {\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t'Authorization' : axios.defaults.headers.common['Authorization'],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\twithCredentials : ! top.__isLocal\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsource.onmessage = (event) => {\r\n\t\t\t\t\t\t//console.log('test message :::: ',event);\r\n\t\t\t\t\t\tlet {data, lastEventId, origin, type} = event;\r\n\t\t\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t\t\t\tif(eventSendObj.webEventSend){\r\n\t\t\t\t\t\t\teventSendObj.webEventSend('roomInAccountAccept', data);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\teventSendObj.send('roomInAccountAccept', data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsource.onerror = (event) => {\r\n\t\t\t\t\t\t//console.log('searchRoomJoinedAccountList error :::: ',event);\r\n\t\t\t\t\t\tsource.close();\r\n\t\t\t\t\t\tresolve('done');\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\t\r\n\tgetRoomDetail(param = {}){\r\n\t\tif( ! param.roomId || isNaN(parseInt(param.roomId))){\r\n\t\t\tlog.error(`getRoomDetail roomId is ::: ${param.roomId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/room/search/detail/${param.roomId}`, {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type' : 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tisRoomFavorites(param = {}){\r\n\t\tif( ! param.roomId || isNaN(parseInt(param.roomId))){\r\n\t\t\tlog.error(`isRoomFavorites roomId is ::: ${param.roomId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/room/search/is-room-favorites/${param.roomId}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC isRoomFavorites error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n}\r\nexport const roomController = new RoomController();","import { windowUtil, __serverApi } from \"../window/WindowUtil\"; \r\nimport axios from 'axios';\r\nconst log = console;\r\n\r\nclass WorkspaceController {\r\n\tconstructor() {\r\n\t}\r\n\tsearchWorkspaceMyJoined(param = {}){\r\n\t\treturn windowUtil.isLogin((result) => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/workspace/search/my-joined-list?page=${param.page}&size=${param.size}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response=>{\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('error : ', JSON.stringify(err));\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\tif( ! err.response.data.content){\r\n\t\t\t\t\t\t\terr.response.data.content = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tsearchNameSpecificList(param = {}){\r\n\t\treturn windowUtil.isLogin((result) => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/workspace/search/name-specific-list?page=${param.page}&size=${param.size}&workspaceName=${param.workspaceName}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response=>{\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('error : ', JSON.stringify(err));\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\tif( ! err.response.data.content){\r\n\t\t\t\t\t\t\terr.response.data.content = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tsearchWorkspaceInAccount(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tlet queryString = Object.entries(param)\r\n\t\t\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId')\r\n\t\t\t\t\t.map(([k,v]) => `${k}=${v}`).join('&')\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/workspace/search/joined-account-list/${param.workspaceId}?${queryString}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC searchWorkspaceInAccount error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tgetWorkspaceDetail(param = {}){\r\n\t\tif( ! param.workspaceId || isNaN(parseInt(param.workspaceId))){\r\n\t\t\tlog.error(`workspaceId is ::: ${param.workspaceId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/workspace/search/detail/${param.workspaceId}`, {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type' : 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tgetWorkspaceInAccountCount(param = {}){\r\n\t\tif( ! param.workspaceId || isNaN(parseInt(param.workspaceId))){\r\n\t\t\tlog.error(`workspaceId is ::: ${param.workspaceId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/workspace/search/count/${param.workspaceId}`, {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type' : 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data.data;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tcreatePermitWokrspaceInAccount(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/workspace/create/permit`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createPermitWokrspaceInAccount error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tcreateGiveAdmin(param={}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/workspace/create/give-admin`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createPermitWokrspaceInAccount error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tsearchPermitRequestList(param = {}, EventSource, eventSendObj){\r\n\t\tif( ! param.workspaceId || isNaN(parseInt(param.workspaceId))){\r\n\t\t\tlog.error(`searchPermitRequestList workspaceId is ::: ${param.workspaceId}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tif( ! EventSource) EventSource = top?.EventSource;\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\t//return axios.get(`${__serverApi}/api/workspace/search/permit-request-list/${param.workspaceId}`, {\r\n\t\t\t\treturn new Promise(resolve=>{\r\n\t\t\t\t\tlet source = new EventSource(`${__serverApi}/api/workspace/search/permit-request-list/${param.workspaceId}`, {\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t'Authorization' : axios.defaults.headers.common['Authorization'],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\twithCredentials : ! top.__isLocal\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsource.onmessage = (event) => {\r\n\t\t\t\t\t\t//console.log('test message :::: ',event);\r\n\t\t\t\t\t\tlet {data, lastEventId, origin, type} = event;\r\n\t\t\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t\t\t\tif(eventSendObj.webEventSend){\r\n\t\t\t\t\t\t\teventSendObj.webEventSend('workspacePermitRequestAccept', data);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\teventSendObj.send('workspacePermitRequestAccept', data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsource.onerror = (event) => {\r\n\t\t\t\t\t\t//console.log('searchPermitRequestList error :::: ',event);\r\n\t\t\t\t\t\tsource.close();\r\n\t\t\t\t\t\tresolve('done');\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tgetIsAdmin(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tlet queryString = Object.entries(param)\r\n\t\t\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'workspaceId')\r\n\t\t\t\t\t.map(([k,v]) => `${k}=${v}`).join('&')\r\n\t\t\t\treturn axios.get(`${__serverApi}/api/workspace/search/is-admin/${param.workspaceId}?${queryString}`, {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tlog.error('IPC getIsAdmin error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\tcreateWorkspaceJoined(param = {}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/workspace/create/joined`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createPermitWokrspaceInAccount error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n\r\n\tcreateWorkspace(param={}){\r\n\t\treturn windowUtil.isLogin( result => {\r\n\t\t\tif(result.isLogin){\r\n\t\t\t\tparam = Object.entries(param).reduce((total, [k,v]) => {\r\n\t\t\t\t\tif(v != undefined && v != ''){\r\n\t\t\t\t\t\ttotal[k] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn total;\r\n\t\t\t\t},{});\r\n\t\t\t\treturn axios.post(`${__serverApi}/api/workspace/create/`, JSON.stringify(param), {\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(windowUtil.responseCheck)\r\n\t\t\t\t.then(response => response.data)\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tlog.error('IPC createWorkspace error : ', JSON.stringify(err));\r\n\t\t\t\t\t//axios.defaults.headers.common['Authorization'] = '';\r\n\t\t\t\t\tif(err.response){\r\n\t\t\t\t\t\treturn err.response.data;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn {'isLogin': false};\r\n\t\t\t}\r\n\t\t}).catch(error=>{\r\n\t\t\tlog.error('error ::: ', error.message)\r\n\t\t\tlog.error('error stack :::', error.stack)\r\n\t\t\treturn undefined;\r\n\t\t})\r\n\t}\r\n}\r\nexport const workspaceController = new WorkspaceController();","import { accountController } from \"./../controller/AccountController\"\r\nimport { apiS3Controller } from \"./../controller/ApiS3Controller\";\r\nimport { chattingController } from \"./../controller/ChattingController\";\r\nimport { emoticonController } from \"./../controller/EmoticonController\";\r\nimport { eventStreamController } from \"./../controller/EventStreamController\";\r\nimport { noticeBoardController } from \"./../controller/NoticeBoardController\";\r\nimport { roomController } from \"./../controller/RoomController\";\r\nimport { workspaceController } from \"./../controller/WorkspaceController\";\r\n\r\nimport { windowUtil } from \"./../window/WindowUtil\";\r\n\r\n/**\r\n * @author kimjoohyoung\r\n * @description    preload \r\n */\r\n\r\nlet permission;\r\n\r\nwindow.addEventListener('load', () => {\r\n\tNotification.requestPermission().then(result => {\r\n\t\tconsole.log(result);\r\n\t\tpermission = result;\r\n\t})\r\n\tif(globalHandler.loadInitRoomId){\r\n\t\tipcRenderer.webEventSend('roomChange', {roomId:globalHandler.loadInitRoomId});\r\n\t}\r\n\tif(globalHandler.loadInitNoticeBoardId){\r\n\t\tipcRenderer.webEventSend('noticeBoardChange', {noticeBoardId:globalHandler.loadInitNoticeBoardId});\r\n\t}\r\n})\r\n\r\nexport const globalHandler = new class GlobalHandler{\r\n\t#workspaceId;\r\n\tloadInitRoomId;\r\n\tloadInitNoticeBoardId;\r\n\t#option = {};\r\n\tconstructor(){\r\n\t\t//n : name, v : value, c : create_at, u : update_at\r\n\t\tlet queryString = new URLSearchParams(location.search);\r\n\t\tthis.#workspaceId = queryString.get('workspaceId');\r\n\t\tthis.loadInitRoomId = queryString.get('roomId');\r\n\t\tthis.loadInitNoticeBoardId = queryString.get('noticeBoardId');\r\n\t\tthis.#option = JSON.parse(localStorage.getItem('o'))?.reduce((t,e)=>{\r\n\t\t\tt[e.OPTION_NAME] = e;\r\n\t\t\treturn t;\r\n\t\t}, {}) || {};\r\n\r\n\t}\r\n\r\n\tresetWorkspace(){\r\n\t\tthis.#workspaceId = undefined;\r\n\t}\r\n\r\n\tset workspaceId(workspaceId){\r\n\t\tif(this.#workspaceId === workspaceId) return;\r\n\t\tthis.#workspaceId = workspaceId;\r\n\t\tipcRenderer.webEventSend('workspaceChange', {workspaceId : this.workspaceId});\r\n\t}\r\n\tget workspaceId(){\r\n\t\treturn this.#workspaceId\r\n\t}\r\n\r\n\tsetOption({name, value}){\r\n\t\tif( ! this.#option[name]) {\r\n\t\t\tthis.#option[name] = {\r\n\t\t\t\tOPTION_NAME : name,\r\n\t\t\t\tOPTION_VALUE : value,\r\n\t\t\t\tCREATE_AT : new Date().getTime(),\r\n\t\t\t\tUPDATE_AT : new Date().getTime(),\r\n\t\t\t};\r\n\t\t}else{\r\n\t\t\tthis.#option[name].OPTION_VALUE = value,\r\n\t\t\tthis.#option[name].UPDATE_AT = new Date().getTime();\r\n\t\t}\r\n\t\tlocalStorage.setItem('o', JSON.stringify( Object.values(this.#option)) );\r\n\t}\r\n\r\n\tgetOption(name){\r\n\t\t//console.log(this.#option, name);\r\n\t\treturn this.#option[name];\r\n\t}\r\n}\r\n\r\nexport const ipcRenderer = new class IpcRendererWeb{\r\n\t#send = {};\r\n\t#invoke = {};\r\n\t#connection = {};\r\n\tconstructor(){\r\n\r\n\t\t[\r\n\t\t\taccountController, apiS3Controller, \r\n\t\t\tchattingController, emoticonController, \r\n\t\t\teventStreamController, noticeBoardController,\r\n\t\t\troomController, workspaceController\r\n\t\t].flatMap(e=>{\r\n\t\t\treturn Object.getOwnPropertyNames(Object.getPrototypeOf(e)).filter(e=> e != 'constructor').map(name=>{\r\n\t\t\t\treturn [name, e]\r\n\t\t\t});\r\n\t\t}).forEach( ([name, clazz])=>{\r\n\t\t\tthis.#send[name] = clazz[name] \r\n\t\t\tthis.#invoke[name] = clazz[name] \r\n\t\t})\r\n\t}\r\n\tsend(name, param){\r\n\t\tif( ! this.#send[name] || ! this.#send[name] instanceof Function){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.#send[name](param, undefined, ipcRenderer);\r\n\t}\r\n\tinvoke(name, param){\r\n\t\tif( ! this.#invoke[name] || ! this.#invoke[name] instanceof Function){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\treturn this.#invoke[name](param, undefined, ipcRenderer);\r\n\t}\r\n\twebEventSend(eventName, data){\r\n\t\tif( ! this.#connection[eventName] || ! this.#connection[eventName] instanceof Function){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.#connection[eventName](undefined, data);\r\n\t}\r\n\ton(eventName, callback){\r\n\t\tthis.#connection[eventName] = callback;\r\n\t}\r\n\t/*\r\n\tsend : {},\r\n\tinvoke : {},\r\n\tconnection : {},\r\n\teventSend: (eventName, data) => {\r\n\t\tif( ! ipcRenderer.connection[eventName] instanceof Function){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tipcRenderer.connection[eventName](undefined, data);\r\n\t},\r\n\ton : (eventName, callback) => {\r\n\t\tconnection[eventName] = callback;\r\n\t}*/\r\n};\r\n\r\nconst electronEventTrigger = {\r\n\tobjectEventListener : {},\r\n\tonEvent : {},\r\n\ton : (eventName, callback) => {\r\n\t\telectronEventTrigger.onEvent[eventName] = callback;\r\n\t\tipcRenderer.on(eventName, (event, message) => {\r\n\t\t\telectronEventTrigger.trigger(eventName, event, message);\r\n\t\t})\r\n\t},\r\n\taddElectronEventListener : (eventName, callback) => {\r\n\t\tif(electronEventTrigger.objectEventListener.hasOwnProperty(eventName)){\r\n\t\t\telectronEventTrigger.objectEventListener[eventName].push({ [callback.name] : callback });\r\n\t\t}else{\r\n\t\t\telectronEventTrigger.objectEventListener[eventName] = [{ [callback.name] : callback }];\r\n\t\t}\r\n\t\tipcRenderer.on(eventName, (event, message) => {\r\n\t\t\telectronEventTrigger.trigger(eventName, event, message);\r\n\t\t})\r\n\t},\r\n\tremoveElectronEventListener : (eventName, callback) => {\r\n\t\tif(electronEventTrigger.objectEventListener.hasOwnProperty(eventName)){\r\n\t\t\tif(callback){\r\n\t\t\t\telectronEventTrigger.objectEventListener[eventName] = electronEventTrigger.objectEventListener[eventName].filter(e=> ! e.hasOwnProperty(callback.name))\r\n\t\t\t}else{\r\n\t\t\t\tdelete electronEventTrigger.objectEventListener[eventName]\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\ttrigger : (eventName, event, message) => {\r\n\t\tnew Promise(resolve=> {\r\n\t\t\tif( ! electronEventTrigger.objectEventListener.hasOwnProperty(eventName)){\r\n\t\t\t\tresolve();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telectronEventTrigger.objectEventListener[eventName].forEach(async obj => {\r\n\t\t\t\tObject.values(obj).forEach(async callback => {\r\n\t\t\t\t\tif( ! callback || ! callback instanceof Function){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnew Promise(res=>{\t\r\n\t\t\t\t\t\ttry{\r\n\t\t\t\t\t\t\tif(eventName == 'checkForUpdates' || eventName == 'updateAvailable' || eventName == 'updateDownloaded'){\r\n\t\t\t\t\t\t\t\tcallback(event,message);\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t\t\t\tcallback(message);\r\n\t\t\t\t\t\t}catch(err){\r\n\t\t\t\t\t\t\tconsole.error(`${eventName} error message ::: `,err.message);\r\n\t\t\t\t\t\t\tconsole.error(`${eventName} error stack ::: `,err.stack);\r\n\t\t\t\t\t\t\tthrow new Error('');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tres();\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\tresolve();\r\n\t\t})\r\n\t\t\r\n\t\tnew Promise(resolve => {\r\n\t\t\tif( ! electronEventTrigger.onEvent[eventName] || ! electronEventTrigger.onEvent[eventName] instanceof Function){\r\n\t\t\t\tresolve();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttry{\r\n\t\t\t\telectronEventTrigger.onEvent[eventName](message);\r\n\t\t\t}catch(err){\r\n\t\t\t\tconsole.error(`${eventName} error message ::: `, err.message);\r\n\t\t\t\tconsole.error(`${eventName} error stack ::: `, err.stack);\r\n\t\t\t}\r\n\t\t\tresolve();\r\n\t\t})\r\n\t\t\r\n\t}\r\n};\r\n\r\nexport const myAPI = {\r\n\t/**\r\n\t *  ipc \r\n\t *  ipcRenderer.send  API   . \r\n\t * Electron API        .\r\n\t */\r\n\t//setTitle : (param) => ipcRenderer.send('setTitle', param),\r\n\t/**\r\n\t * dialog:IPC        . \r\n\t *       .\r\n\t *  ipcRenderer.invoke  API   . \r\n\t * Electron API        . \r\n\t */\r\n\t//openFile : () => ipcRenderer.invoke('dialog:openFile'),\r\n\t\r\n\t/**\r\n\t * key-value       .\r\n\t * event.electronEventTrigger  +      .\r\n\t */\r\n\r\n\tgetProjectPath : async () => `${location.origin}/`,\r\n\r\n\tcreateSubWindow : async (param) => {\r\n\t\t//open(url?: string | URL, target?: string, features?: string): WindowProxy | null;\r\n\t\tlet queryString = Object.entries(param)\r\n\t\t\t.filter(([k,v]) => v != undefined && v != '' && k != 'pageName' && k != 'pageId')\r\n\t\t\t.map(([k,v]) => `${k}=${v}`).join('&')\r\n\t\twindow.open(`/web/create-sub-window/${param.pageName}?${queryString}`, param.pageId)\r\n\t},\r\n\r\n\tcloseRequest : async (param) => {},\r\n\t\r\n\tmaximizeRequest : async () => {},\r\n\r\n\tunmaximizeRequest : async () => {},\r\n\t\r\n\tminimizeRequest : async () => {},\r\n\t\r\n\trestoreRequest : async () => {},\r\n\t\r\n\tisMaximize : async () => false,\r\n\r\n\tresetWorkspaceId: async () => {\r\n\t\tglobalHandler.resetWorkspace();\r\n\t},\r\n\r\n\tgetWorkspaceId: async () => {\r\n\t\treturn globalHandler.workspaceId;\r\n\t},\r\n\r\n\tnotifications: async (param) => {\r\n\t\tlet content = param.content.join('\\n');\r\n\t\tcontent = content.substring(0,200) + (content.length > 200 ? '...' : '');\r\n\t\tif(permission == 'granted'){\r\n\t\t\tmyAPI.getProjectPath().then(path=>{\r\n\t\t\t\tlet noti = new Notification(param.fullName, { body: content, icon: path+'image/icon.icon' });\r\n\t\t\t\tnoti.onclick = () => {\r\n\t\t\t\t\tif(globalHandler.workspaceId != param.workspaceId){\r\n\t\t\t\t\t\tipcRenderer.webEventSend('workspaceChange', {workspaceId : param.workspaceId});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tipcRenderer.webEventSend('roomChange', {roomId : param.roomId});\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tnoti.close()\r\n\t\t\t\t}, 4000);\r\n\t\t\t})\r\n\t\t}else{\r\n\t\t\tlet html = Object.assign(document.createElement('div'), {\r\n\t\t\t\tinnerHTML : `\r\n\t\t\t\t\t<h1>${param.fullName}</h1>\r\n\t\t\t\t\t<div>${param.content}</div>\r\n\t\t\t\t`\r\n\t\t\t})\r\n\t\t\tObject.assign(html.style, {\r\n\t\t\t\tposition: 'fixed', right: '2vw', bottom: '2vh', borderRadius : '15px',\r\n\t\t\t\tbackground: '#e1e1e1cf', width: '40%', height: 'auto',\r\n\t\t\t\tzIndex: 9999, whiteSpace: 'break-spaces', overflowWrap: 'anywhere', \r\n\t\t\t\tdisplay: 'flex', flexDirection: 'column', alignItems: 'center',\r\n\t\t\t\tjustifyContent: 'flex-start', fontSize: '13px', paddingBottom: '5vh'\r\n\t\t\t})\r\n\t\t\thtml.onclick = () => {\r\n\t\t\t\tif(globalHandler.workspaceId != param.workspaceId){\r\n\t\t\t\t\tipcRenderer.webEventSend('workspaceChange', {workspaceId : param.workspaceId});\r\n\t\t\t\t}\r\n\t\t\t\tipcRenderer.webEventSend('roomChange', {roomId : param.roomId});\r\n\t\t\t}\r\n\t\t\tdocument.body.append(html);\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\thtml.remove();\r\n\t\t\t}, 4000);\r\n\t\t}\r\n\t},\r\n\r\n\tgetOption: async (optionName) => globalHandler.getOption(optionName),\r\n\tsetOption: async (param) => globalHandler.setOption(param),\r\n\r\n\tisLogin: async () => {\r\n\t\treturn windowUtil.isLogin(result=>{\r\n\t\t\treturn {isLogin : result.isLogin}\r\n\t\t})\r\n\t},\r\n\r\n\tgetServerUrl : async () => `${location.origin}`,\r\n\r\n\tpageChange : {\r\n\t\tchangeLoginPage : async () => top.location.href = '/web',\r\n\t\tchangeWokrspacePage : async () => top.location.href = '/web',\r\n\t\tchangeMainPage : async (param) => top.location.href = `/web/main?workspaceId=${param.workspaceId}`,\r\n\t},\r\n\t\r\n\tevent : {\r\n\t\telectronEventTrigger : electronEventTrigger,\r\n\t},\r\n\r\n\tstream : {\r\n\t\tinitWorkspaceStream : async (param) => ipcRenderer.send('initWorkspaceStream', param),\r\n\t},\r\n\r\n\taccount : {\r\n\t\tloginProcessing : async (param) => ipcRenderer.invoke('loginProcessing', param),\r\n\t\tgetAccountInfo : async () => ipcRenderer.invoke('getAccountInfo'),\r\n\t\tupdateSimpleAccountInfo : async (param) => ipcRenderer.invoke('updateSimpleAccountInfo', param)\r\n\t},\r\n\r\n\tchatting : {\r\n\t\tsendChatting : async (param) => ipcRenderer.invoke('sendChatting', param),\r\n\t\tdeleteChatting : async (param) => ipcRenderer.invoke('deleteChatting', param),\r\n\t\tsearchChattingList : async (param) => ipcRenderer.invoke('searchChattingList', param),\r\n\t},\r\n\t\r\n\tworkspace : {\r\n\t\tsearchWorkspaceMyJoined : async (param) => ipcRenderer.invoke('searchWorkspaceMyJoined', param),\r\n\t\tsearchNameSpecificList: async (param) => ipcRenderer.invoke('searchNameSpecificList', param),\r\n\t\tsearchWorkspaceInAccount : async (param) => ipcRenderer.invoke('searchWorkspaceInAccount', param),\r\n\t\tgetWorkspaceDetail : async (param) => ipcRenderer.invoke('getWorkspaceDetail', param),\r\n\t\tcreatePermitWokrspaceInAccount: async (param) => ipcRenderer.invoke('createPermitWokrspaceInAccount', param),\r\n\t\tcreateGiveAdmin : async (param) => ipcRenderer.invoke('createGiveAdmin', param),\r\n\t\tsearchPermitRequestList : async (param) => ipcRenderer.invoke('searchPermitRequestList', param),\r\n\t\tgetIsAdmin : async (param) => ipcRenderer.invoke('getIsAdmin', param),\r\n\t\tcreateWorkspaceJoined: async (param) => ipcRenderer.invoke('createWorkspaceJoined', param),\r\n\t\tcreateWorkspace : async (param) => ipcRenderer.invoke('createWorkspace', param),\r\n\t\tgetWorkspaceInAccountCount : async (param) => ipcRenderer.invoke('getWorkspaceInAccountCount', param),\r\n\t},\r\n\r\n\troom : {\r\n\t\tcreateRoom : async (param) => ipcRenderer.invoke('createRoom', param),\r\n\t\tcreateMySelfRoom : async (param)=> ipcRenderer.invoke('createMySelfRoom', param),\r\n\t\tcreateRoomInAccount : async (param) => ipcRenderer.invoke('createRoomInAccount', param),\r\n\t\tcreateRoomFavorites : async (param) => ipcRenderer.invoke('createRoomFavorites', param),\r\n\t\tupdateRoomInAccoutOrder : async (param) => ipcRenderer.invoke('updateRoomInAccoutOrder', param),\r\n\t\tupdateRoomFavorites : async (param) => ipcRenderer.invoke('updateRoomFavorites', param),\r\n\t\tsearchRoom : async (param) => ipcRenderer.invoke('searchRoom', param),\r\n\t\tsearchMyJoinedRoomList : async (param) => ipcRenderer.invoke('searchMyJoinedRoomList', param),\r\n\t\tsearchRoomFavoritesList : async (param) => ipcRenderer.invoke('searchRoomFavoritesList', param),\r\n\t\tsearchRoomJoinedAccountList : async (param) => ipcRenderer.invoke('searchRoomJoinedAccountList', param),\r\n\t\tgetRoomDetail : async (param) => ipcRenderer.invoke('getRoomDetail', param),\r\n\t\tisRoomFavorites : async (param) => ipcRenderer.invoke('isRoomFavorites', param)\r\n\t},\r\n\r\n\tnoticeBoard : {\r\n\t\tcreateNoticeBoard : async (param) => ipcRenderer.invoke('createNoticeBoard', param),\r\n\t\tcreateNoticeBoardGroup : async (param) => ipcRenderer.invoke('createNoticeBoardGroup', param),\r\n\t\tcreateNoticeBoardDetail : async (param) => ipcRenderer.invoke('createNoticeBoardDetail', param),\r\n\t\tdeleteNoticeBoard : async (param) => ipcRenderer.invoke('deleteNoticeBoard', param),\r\n\t\tdeleteNoticeBoardGroup : async (param) => ipcRenderer.invoke('deleteNoticeBoardGroup', param),\r\n\t\tupdateNoticeBoardOrder : async (param) => ipcRenderer.invoke('updateNoticeBoardOrder', param),\r\n\t\tupdateNoticeBoardDetailOrder : async (param) => ipcRenderer.invoke('updateNoticeBoardDetailOrder', param),\r\n\t\tsearchNoticeBoardList : async (param) => ipcRenderer.invoke('searchNoticeBoardList', param),\r\n\t\tsearchNoticeBoardDetailList : async (param) => ipcRenderer.invoke('searchNoticeBoardDetailList', param),\r\n\t},\r\n\ts3: {\r\n\t\tgenerateSecurityPutObjectPresignedUrl : async (param) => ipcRenderer.invoke('generateSecurityPutObjectPresignedUrl', param),\r\n\t\tgenerateSecurityGetObjectPresignedUrl : async (param) => ipcRenderer.invoke('generateSecurityGetObjectPresignedUrl', param),\r\n\t\tgenerateGetObjectPresignedUrl : async(param) => ipcRenderer.invoke('generateGetObjectPresignedUrl', param),\r\n\t},\r\n\temoticon: {\r\n\t\tcreateEmotionReaction : async (param) => ipcRenderer.invoke('createEmotionReaction', param),\r\n\t\tgetIsReaction : async (param) => ipcRenderer.invoke('getIsReaction', param)\r\n\t}\r\n\r\n\r\n}\r\nwindow.myAPI = myAPI;\r\nconsole.log('????????????????');\r\nconsole.log(window.myAPI)","export const roomHandler = new class RoomHandler{\r\n    #roomId\r\n    #room;\r\n    #addRoomIdChangeListener = {};\r\n\r\n    #roomChangeDone;\r\n    #roomChangeAwait = new Promise(resolve=>{\r\n        this.#roomChangeDone = resolve;\r\n    });\r\n\r\n    constructor(){\r\n\r\n        window.myAPI.event.electronEventTrigger.addElectronEventListener('roomChange', event => {\r\n            this.roomId = event.roomId\r\n        })\r\n\r\n    }\r\n\r\n    set addRoomIdChangeListener({name, callback, runTheFirst}){\r\n        this.#addRoomIdChangeListener[name] = callback;\r\n        if(runTheFirst && this.#roomId){\r\n            callback(this);\r\n        }\r\n    }\r\n\r\n    get addRoomIdChangeListener(){\r\n        return this.#addRoomIdChangeListener;\r\n    }\r\n\r\n    set roomId(roomId){\r\n        if( ! roomId){\r\n            throw new Error('roomId is undefined')\r\n        }\r\n        this.#roomId = roomId;\r\n        window.myAPI.room.getRoomDetail({roomId}).then(result => {\r\n            this.#room = result.data;\r\n            window.myAPI.setOption({\r\n                name: 'lastRoomInfo', value : JSON.stringify(this.#room)\r\n            })\r\n            let startCallbackPromise = Promise.all(\r\n                Object.values(this.#addRoomIdChangeListener).map(async callback => {\r\n                    return new Promise(res => {\r\n                        callback(this);\r\n                        res();\r\n                    })\r\n                })\r\n            )\r\n            startCallbackPromise.then(()=>{\r\n                this.#roomChangeDone();\r\n            })\r\n            this.#roomChangeAwait.then(()=>{\r\n                this.#roomChangeAwait = new Promise(resolve=>{\r\n                    this.#roomChangeDone = resolve;\r\n                })\r\n            })\r\n            //window.myAPI.setTitle({title:this.#room.roomName})\r\n            \r\n        });\r\n    }\r\n\r\n    get roomId(){\r\n        return Number(this.#roomId);\r\n    }\r\n\r\n    get room(){\r\n        return this.#room;\r\n    }\r\n    removeRoomIdChangeListener(name){\r\n        delete this.#addRoomIdChangeListener(name);\r\n    }\r\n    get roomChangeAwait(){\r\n        return this.#roomChangeAwait;\r\n    }\r\n}","\r\nexport default class ToolHandler{\r\n\r\n\t#extendsElement;\r\n\t#defaultClass;\r\n\t#isInline = true;\r\n\t/**\r\n\t * @type {HTMLButtonElement}\r\n\t */\r\n\t#toolButton;\r\n\t#identity;\r\n\t#connectedFriends = [];\r\n\t#buttonMap = {};\r\n\t/**\r\n\t * \r\n\t * @param {FreedomInterface} identity\r\n\t * @returns {FreedomInterface} \r\n\t */\r\n\tconstructor(identity){\r\n\t\tthis.#identity = identity;\r\n\t\t//      (  )\r\n\t\tdocument.addEventListener(\"selectionchange\", (event) => {\r\n\t\t\tlet selection = window.getSelection();\r\n\t\t\tif(! document.activeElement.classList.contains('free-will-editor')){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * None    .\r\n\t\t\t * Caret   (:       ).\r\n\t\t\t * Range  .\r\n\t\t\t */\r\n\t\t\tif(selection.type == 'None' || ! this.#toolButton){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tlet findTarget = this.#connectedFriends.find(e=> selection.containsNode(e, true) || selection.containsNode(e, false))\r\n\t\t\tif(findTarget){\r\n\t\t\t\tthis.#toolButton.dataset.tool_status = 'connected';\r\n\t\t\t}else {\r\n\t\t\t\tthis.#toolButton.dataset.tool_status = 'blur';\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tisLastTool(tool){\r\n\t\tif(this.#identity.prototype.isPrototypeOf(tool)){\r\n\t\t\treturn tool === this.#connectedFriends.at(-1);\r\n\t\t}else{\r\n\t\t\tthrow new Error(`tool is not my identity, this tool name is ${tool.constructor.name}. but my identity name is ${this.#identity.name}`);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\t/**\r\n\t * @param {String}\r\n\t */\r\n\tset extendsElement(extendsElement){\r\n\t\tthis.#extendsElement = extendsElement;\r\n\t}\r\n\t\r\n\tget extendsElement(){\r\n\t\treturn this.#extendsElement;\r\n\t}\r\n\t\r\n\tset defaultClass(defaultClass){\r\n\t\tthis.#defaultClass = defaultClass;\r\n\t}\r\n\r\n\tget defaultClass(){\r\n\t\treturn this.#defaultClass;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {boolean} isInline \r\n\t */\r\n\tset isInline(isInline){\r\n\t\tthis.#isInline = isInline;\r\n\t}\r\n\t\r\n\t/**\r\n\t * @returns {boolean}\r\n\t */\r\n\tget isInline(){\r\n\t\treturn this.#isInline\r\n\t}\r\n\r\n\tset toolButton(toolButton){\r\n\t\tif( ! toolButton || ! toolButton.nodeType || toolButton.nodeType != Node.ELEMENT_NODE){\r\n\t\t\tthrow new Error('toolButton is not element');\r\n\t\t}\r\n\t\tthis.#toolButton = toolButton;\r\n\r\n\t}\r\n\t\r\n\tget toolButton(){\r\n\t\treturn this.#toolButton;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {FreedomInterface}\r\n\t */\r\n\tset connectedFriends(friend){\r\n\t\tif(friend.constructor != this.#identity){\r\n\t\t\tnew TypeError('is not my friend')\r\n\t\t}\r\n\t\t\r\n\t\tif(friend.isConnected){\r\n\t\t\tthis.#connectedFriends.push(friend);\r\n\t\t}else{\r\n\t\t\tthis.#connectedFriends = this.#connectedFriends.filter(e=>e.isConnected);\r\n\t\t}\r\n\t}\r\n\r\n\tget connectedFriends(){\r\n\t\treturn this.#connectedFriends;\r\n\t}\r\n\r\n}","import ToolHandler from \"../module/ToolHandler\"\r\nimport FreedomInterface from \"../module/FreedomInterface\"\r\nexport default class Line {\r\n\t#isLoaded = false;\r\n\t#prevParent;\r\n\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-line'\r\n\t});\r\n\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-line';\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = ``\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t * @param {HTMLElement} element \r\n\t * @returns {HTMLElement} \r\n\t */\r\n\tstatic getLine(element){\r\n\t\tlet line = undefined;\r\n\t\tif( ! element.parentElement){\r\n\t\t\treturn line;\r\n\t\t}else if(element.classList?.contains(Line.toolHandler.defaultClass)){\r\n\t\t\treturn element;\r\n\t\t}else if(element.parentElement.classList.contains(Line.toolHandler.defaultClass)){\r\n\t\t\tline = element.parentElement;\r\n\t\t}else{\r\n\t\t\tline = element.parentElement.closest(`.${Line.toolHandler.defaultClass}`);\r\n\t\t}\r\n\t\treturn line;\r\n\t}\r\n\t\t/**\r\n\t * \r\n\t * @param {HTMLElement} element \r\n\t * @returns {HTMLElement} \r\n\t */\r\n\t\tstatic getRootLine(element){\r\n\t\t\tlet line = undefined;\r\n\t\t\tif( ! element.parentElement){\r\n\t\t\t\treturn line;\r\n\t\t\t}else if(element.classList?.contains(Line.toolHandler.defaultClass)){\r\n\t\t\t\treturn element;\r\n\t\t\t}else if(element.parentElement.classList.contains(Line.toolHandler.defaultClass)){\r\n\t\t\t\tline = element.parentElement;\r\n\t\t\t}else{\r\n\t\t\t\tline = element.parentElement.closest(`.${Line.toolHandler.defaultClass}`);\r\n\t\t\t}\r\n\t\t\tlet parent = line?.closest(`.${Line.toolHandler.defaultClass}`);\r\n\t\t\tif( ! parent){\r\n\t\t\t\treturn line;\r\n\t\t\t}else{\r\n\t\t\t\treturn Line.getRootLine(line);\r\n\t\t\t}\r\n\t\t}\r\n\tstatic getTool(element, TargetTool){\r\n\t\tlet tool = undefined;\r\n\t\t\r\n\t\tif( ! element.parentElement){\r\n\t\t\treturn tool;\r\n\t\t}else if(element.classList?.contains(TargetTool.toolHandler.defaultClass)){\r\n\t\t\treturn element\r\n\t\t}else if(element.parentElement.classList.contains(TargetTool.toolHandler.defaultClass)){\r\n\t\t\ttool = element.parentElement;\r\n\t\t}else{\r\n\t\t\ttool = element.parentElement.closest(`.${TargetTool.toolHandler.defaultClass}`);\r\n\t\t}\r\n\r\n\t\tif(! tool){\r\n\t\t\ttool = element.parentElement.querySelector(`.${TargetTool.toolHandler.defaultClass}`);\r\n\t\t}\r\n\t\treturn tool;\r\n\t}\r\n\t\r\n\tstatic isElementTextEmpty(element){\r\n        let sty = window.getComputedStyle(element);\r\n\t\tif(sty.visibility == 'hidden' || sty.opacity == 0){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t//let emptyString = (element.innerText.replace(/\\n+/g, '\\n') == '\\n' || element.innerText.replace(/\\u200B+/g, '\\u200B') == '\\u200B');\r\n        return element.innerText.length == 0 || (element.innerText.length == 1 && (element.innerText == '\\n' || element.innerText == '\\u200B'));\r\n    }\r\n\r\n\tlineElement\r\n\r\n\tconstructor(div){\r\n\t\t//super();\r\n\t\tif( ! div){\r\n\t\t\tthis.lineElement = Object.assign(document.createElement('div'),{\r\n\t\t\t\tclassName : Line.toolHandler.defaultClass\r\n\t\t\t})\r\n\t\t}else{\r\n\t\t\tthis.lineElement = div;\r\n\t\t\tthis.lineElement.classList.add(Line.toolHandler.defaultClass);\r\n\t\t}\r\n\t\tthis.lineElement.dataset.is_line = '';\r\n\t\t/*\r\n\t\tObject.getOwnPropertyNames(Object.getPrototypeOf(this)).forEach(functionName=>{\r\n\t\t\tif(functionName == 'constructor') return;\r\n\t\t\tthis.lineElement[functionName] = this[functionName];\r\n\t\t});\r\n\t\t*/\r\n\t\tthis.lineElement.line = this;\r\n\t\t/*\r\n\t\tthis.onkeyup = (event) => {\r\n\t\t\tif(event.key === 'Backspace' && this.innerText.length == 1 && (this.innerText.includes)){\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\t*/\r\n\t\t/*\r\n\t\tlet observer = new MutationObserver( (mutationList, observer) => {\r\n\t\t\tmutationList.forEach((mutation) => {\r\n\t\t\t\tif(Line.isElementTextEmpty(this.lineElement)){\r\n\t\t\t\t\tif(this.lineElement.childElementCount != 0){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//this.lineElement.innerText = '\\n';\r\n\t\t\t\t\twindow.getSelection().setPosition(this.lineElement, 0)\r\n\t\t\t\t\tthis.lineElement.focus();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t});\r\n\t\tobserver.observe(this.lineElement, {\r\n\t\t\tchildList:true,\r\n\t\t\tsubtree: true\r\n\t\t})\r\n\t\t*/\r\n\t}\r\n\t/*\r\n\tconnectedCallback(){\r\n\t\tif( ! this.#isLoaded){\r\n            this.#isLoaded = true;\r\n\r\n\t\t\t\r\n\t\t\tif(this.innerText.length == 0 || (this.innerText.length == 1 && this.innerText.charAt(0) == '\\n')){\r\n\t\t\t\tthis.innerText = '\\n';\r\n\t\t\t\twindow.getSelection().setPosition(this, 1)\r\n\t\t\t\tthis.focus();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\tdisconnectedCallback(){\r\n        this.#isLoaded = false;\r\n    }\r\n\t*/\r\n\t/**\r\n\t * applyTool, cancelTool 3      apply mng cancel mng class  , \r\n\t * line    freedomPlusEditor  \r\n\t * --applyTool\r\n\t * 1.  \r\n\t * 2.  line   (textNode  )\r\n\t * 3. start end  ()\r\n\t * --cancelTool\r\n\t * 1. \r\n\t * 2.   \r\n\t * 3. \r\n\t */\r\n\r\n\t/**\r\n\t * tool    ,   tool     \r\n\t */\r\n\t/**\r\n\t * \r\n\t * @param {*} tool \r\n\t * @param {*} range \r\n\t * @returns \r\n\t */\r\n\tasync #applyOnlyOneTool(tool, range){\r\n\t\treturn new Promise(resolve=>{\r\n\t\t\trange.surroundContents(tool);\r\n\t\t\tresolve(tool)\r\n\t\t});\r\n\t}\r\n\t\r\n\tasync #applyOnlyOneLine(range, tool, TargetTool){\r\n\t\treturn new Promise(resolve=>{\r\n\t\t\tlet {startOffset, endOffset, startContainer,endContainer} = range;\r\n\r\n\t\t\tlet selection = window.getSelection();\r\n\r\n\t\t\tlet startNodeToPrevNodeIndex = [...this.lineElement.childNodes].findIndex(e=>selection.containsNode(e, true)) - 1;\r\n\t\t\tlet isFirstNodeToStart = startNodeToPrevNodeIndex < 0;\r\n\r\n\t\t\t\r\n\t\t\tlet nodeList = [];\r\n\t\t\tfor(let i = startNodeToPrevNodeIndex + 1 ; true ; i += 1){\r\n\t\t\t\tif( ! this.lineElement.childNodes[i] || ! selection.containsNode(this.lineElement.childNodes[i], true)){\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tlet iter = document.createNodeIterator(this.lineElement.childNodes[i], NodeFilter.SHOW_TEXT)\r\n\t\t\t\tlet targetNode;\r\n\t\t\t\twhile(targetNode = iter.nextNode()){\r\n\t\t\t\t\tif(targetNode == endContainer){\r\n\t\t\t\t\t\t// this.lineElement.childNodes[i] == endContainer == targetNode\r\n\t\t\t\t\t\tlet clone = targetNode.cloneNode(true);\r\n\t\t\t\t\t\tclone.textContent = targetNode.textContent.substring(endOffset);\r\n\t\t\t\t\t\ttargetNode.after(clone);\r\n\t\t\t\t\t\ttargetNode.textContent = targetNode.textContent.substring(0, endOffset);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tnodeList.push(this.lineElement.childNodes[i]);\r\n\t\t\t}\r\n\t\t\t//nodeList.forEach(e=>e.remove())\r\n\t\t\t//prepend\r\n\t\t\ttool.append(...nodeList);\r\n\t\t\tif(isFirstNodeToStart){\r\n\t\t\t\tthis.lineElement.prepend(tool)\r\n\t\t\t}else{\r\n\t\t\t\tlet startTarget = this.lineElement.childNodes[startNodeToPrevNodeIndex];\r\n\t\t\t\tstartTarget.after(tool);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t/*\r\n\t\t\trange.setStart(startContainer, startOffset);\r\n\t\t\trange.setEnd(startContainer, startContainer.textContent.length);\r\n\t\t\trange.surroundContents(tool);\r\n\t\t\t\r\n\t\t\tlet targetNode = startContainer.nextSibling;\r\n\t\t\t//let lastPrevTool = undefined;\r\n\t\t\twhile(targetNode){\r\n\t\t\t\tconsole.log(targetNode)\r\n\t\t\t\tif(targetNode == endContainer){\r\n\t\t\t\t\tconsole.log(2)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif(targetNode.textContent == '' || TargetTool.prototype.isPrototypeOf(targetNode)){\r\n\t\t\t\t\tconsole.log(3)\r\n\t\t\t\t\ttargetNode = targetNode.nextSibling\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.log(targetNode);\r\n\t\t\t\trange.selectNode(targetNode);\r\n\t\t\t\trange.surroundContents(new TargetTool());\r\n\t\t\t\tconsole.log(4)\r\n\t\t\t\ttargetNode = targetNode.nextSibling\r\n\t\t\t}\r\n\r\n\t\t\tlet endTool = new TargetTool();\r\n\t\t\trange.setStart(endContainer, 0);\r\n\t\t\trange.setEnd(endContainer, endOffset);\r\n\t\t\trange.surroundContents(endTool);\r\n\t\t\tresolve(endTool);\r\n\t\t\t*/\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\tasync #applyMultipleLineAllBlock(range, tool ,TargetTool, endLine){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tlet fragment = range.extractContents();\r\n\t\t\ttool.append(...fragment.childNodes);\r\n\t\t\tthis.lineElement.append(tool);\r\n\t\t\tresolve(tool);\r\n\t\t})\r\n\t}\r\n\tasync #applyMultipleLineAll(range, tool, TargetTool, endLine){\r\n\t\treturn new Promise(resolve=>{\r\n\t\t\tlet {startOffset, endOffset, startContainer,endContainer} = range;\r\n\t\t\t\r\n\t\t\trange.setStart(startContainer, startOffset);\r\n\t\t\trange.setEnd(startContainer, startContainer.textContent.length);\r\n\t\t\trange.surroundContents(tool);\r\n\r\n\t\t\tlet targetStartLineItem = startContainer.nextSibling?.nextSibling;\r\n\t\t\t\r\n\t\t\tif(targetStartLineItem){\r\n\t\t\t\tlet itemRemoveList = [];\r\n\t\t\t\tlet itemAppendList = [];\r\n\t\t\t\twhile(targetStartLineItem){\r\n\t\t\t\t\t//console.log('targetStartLineItem',targetStartLineItem)\r\n\t\t\t\t\tif(targetStartLineItem.nodeType == Node.ELEMENT_NODE){\r\n\t\t\t\t\t\tif(tool == targetStartLineItem){\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttool.append(targetStartLineItem);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\titemAppendList.push(targetStartLineItem.textContent);\r\n\t\t\t\t\t\titemRemoveList.push(targetStartLineItem);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttargetStartLineItem = targetStartLineItem.nextSibling;\t\r\n\r\n\t\t\t\t}\r\n\t\t\t\t[...tool.childNodes].find(e=>e.nodeType == Node.TEXT_NODE)?.appendData(itemAppendList.join(''));\r\n\t\t\t\titemRemoveList.forEach(e=>e.remove())\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(tool.parentElement != this.lineElement && tool.parentElement?.nextSibling){\r\n\t\t\t\t//20230817           \r\n\t\t\t\tlet nextTool = new TargetTool();\r\n\t\t\t\tnextTool.append(tool.parentElement.nextSibling);\r\n\t\t\t\ttool.parentElement.after(nextTool);\r\n\t\t\t\tlet nextItem = nextTool.nextSibling;\r\n\t\t\t\t\r\n\t\t\t\tif(nextItem && nextTool != nextItem){\r\n\t\t\t\t\tnextTool.append(nextItem);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tlet targetLine = Line.getLine(startContainer).nextElementSibling; \r\n\t\t\tlet middleTargetTool;\r\n\t\t\t\r\n\t\t\twhile(targetLine){\r\n\t\t\t\t//console.log('targetLine', targetLine)\r\n\t\t\t\tif(targetLine === endLine){\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\t//     ,              \r\n\t\t\t\t// let middleTool = new TargetTool();\r\n\t\t\t\t// middleTool.append(...targetLine.childNodes);\r\n\t\t\t\t// targetLine.append(middleTool);\r\n\t\t\t\tmiddleTargetTool = new TargetTool()\r\n\t\t\t\trange.selectNodeContents(targetLine);\r\n\t\t\t\trange.surroundContents(middleTargetTool);\r\n\t\t\t\ttargetLine = targetLine.nextElementSibling;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(Line.prototype.isPrototypeOf(endContainer.line)){\r\n\t\t\t\tresolve(( ! middleTargetTool ? tool : middleTargetTool ));\r\n\t\t\t}else{\r\n\t\t\t\tlet endTool = new TargetTool();\r\n\t\t\t\trange.setStart(endContainer, 0);\r\n\t\t\t\trange.setEnd(endContainer, endOffset);\r\n\t\t\t\trange.surroundContents(endTool);\r\n\t\t\t\t//      ex(<b>1</b><b>2</b> => <b>12</b>) \r\n\t\t\t\tlet targetEndLineItem = endContainer.previousSibling;\r\n\t\t\t\tif(targetEndLineItem){\r\n\t\t\t\t\tlet itemRemoveList = [];\r\n\t\t\t\t\tlet itemAppendList = [];\r\n\r\n\t\t\t\t\twhile(targetEndLineItem){\r\n\t\t\t\t\t\t//console.log('targetEndLineItem', targetEndLineItem)\r\n\t\t\t\t\t\tif(targetEndLineItem.nodeType == Node.ELEMENT_NODE){\r\n\t\t\t\t\t\t\tendTool.prepend(targetEndLineItem);\r\n\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\tlet firstTextNode = [...targetEndLineItem.childNodes].find(e=>e.nodeType == Node.TEXT_NODE);\r\n\t\t\t\t\t\t\tlet moveTextList = [...endTool.childNodes].filter(e=>e.nodeType == Node.TEXT_NODE)\r\n\t\t\t\t\t\t\tmoveTextList.forEach(e=>{\r\n\t\t\t\t\t\t\t\te.textContent = firstTextNode.textContent + e.data\r\n\t\t\t\t\t\t\t\tfirstTextNode.remove();\r\n\t\t\t\t\t\t\t\tfirstTextNode = e;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\ttargetEndLineItem.append(firstTextNode);\r\n\t\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t//endTool.prepend(document.createTextNode(targetEndLineItem.textContent));\r\n\t\t\t\t\t\t\titemRemoveList.push(targetEndLineItem);\r\n\t\t\t\t\t\t\titemAppendList.unshift(targetEndLineItem.textContent)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttargetEndLineItem = targetEndLineItem.previousSibling;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//let targetTextNode = [...endTool.childNodes].find(e=>e.nodeType == Node.TEXT_NODE)\r\n\t\t\t\t\t//itemAppendList.push(targetTextNode.data);\r\n\t\t\t\t\t//targetTextNode.textContent = itemAppendList.join('');\r\n\t\t\t\t\t//endTool.append(targetTextNode)\r\n\t\t\t\t\t[...endTool.childNodes].find(e=>e.nodeType == Node.TEXT_NODE)?.appendData(itemAppendList.join(''));\r\n\t\t\t\t\t//endTool.prepend(document.createTextNode(itemAppendList.join('')))\r\n\t\t\t\t\t//itemRemoveList.forEach(e=>e.remove())\r\n\t\t\t\t}\r\n\t\t\t\tresolve(endTool);\r\n\t\t\t}\r\n\r\n\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t * @param {*} TargetTool \r\n\t * @param {*} range \r\n\t * @returns \r\n\t */\r\n\tasync applyTool(TargetTool, range, endLine){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tlet tool = new TargetTool();\r\n\t\t\tlet {startOffset, endOffset, startContainer,endContainer} = range;\r\n\r\n\t\t\t/*\r\n\t\t\tif(startContainer === endContainer){\r\n\t\t\t\tconsole.log('applyOnlyOneTool');\r\n\t\t\t\tthis.#applyOnlyOneTool(tool, range).then(tool=>{\r\n\t\t\t\t\tresolve(tool)\r\n\t\t\t\t})\r\n\t\t\t}*/\r\n\t\t\tif(this.lineElement.childNodes.length == 1 && this.lineElement.innerText == '\\n' && this.lineElement.childNodes[0].nodeName == 'BR'){\r\n\t\t\t\tthis.lineElement.childNodes[0].remove();\r\n\t\t\t}\r\n\t\t\tif(tool.shadowRoot || ! TargetTool.toolHandler.isInline){\r\n\t\t\t\tresolve(this.#applyMultipleLineAllBlock(range, tool, TargetTool, endLine));\r\n\t\t\t}else if(startContainer === endContainer && this.lineElement.innerText.length != range.toString().length){\r\n\t\t\t\tconsole.log('applyOnlyOneTool');\r\n\t\t\t\tthis.#applyOnlyOneTool(tool, range).then(tool=>{\r\n\t\t\t\t\tresolve(tool)\r\n\t\t\t\t})\r\n\t\t\t}else if(Line.getLine(startContainer) === Line.getLine(endContainer)){\r\n\t\t\t\tconsole.log('applyOnlyOneLine')\r\n\t\t\t\tthis.#applyOnlyOneLine(range, tool, TargetTool).then(endTool => {\r\n\t\t\t\t\tresolve(endTool)\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\tconsole.log('applyMultipleLineAll')\r\n\t\t\t\tthis.#applyMultipleLineAll(range, tool, TargetTool, endLine).then(endTool => {\r\n\t\t\t\t\tresolve(endTool)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tasync #cancelOnlyOneLine(range, tool, TargetTool){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\t// this childern  TargetTool   nodeType    \r\n\t\t\tlet {startOffset, endOffset, startContainer, endContainer} = range;\r\n\t\t\tthis.lineElement.childNodes.forEach(e=>{\r\n\t\t\t\tthis.#findCancels(e, TargetTool);\r\n\t\t\t});\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\tasync #cancelOnlyOneTool(range, tool, TargetTool){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tlet {startOffset, endOffset, startContainer, endContainer, commonAncestorContainer} = range;\r\n\t\t\t/*\r\n\t\t\tlet textNode = document.createTextNode(startContainer.textContent.substring(startOffset, endOffset));\r\n\t\t\tlet startNextSibling = (tool?.nextSibling  || endContainer.nextSibling);\r\n\t\t\tlet startPrevSibling = (tool?.previousSibling || startContainer.previousSibling);\r\n\t\t\t*/\r\n\t\t\tlet offset = endOffset - startOffset;\r\n\r\n\t\t\tlet leftText = undefined;\r\n\t\t\tlet rightText = undefined;\r\n\t\t\tlet leftList = [];\r\n\t\t\tlet rightList = [];\r\n\t\t\tlet targetWrap = undefined;\r\n\t\t\tlet targetText;\r\n\t\t\tif(commonAncestorContainer.nodeType == Node.TEXT_NODE && commonAncestorContainer.parentElement != this && ! TargetTool.prototype.isPrototypeOf(commonAncestorContainer.parentElement)){\r\n\t\t\t\tlet cloneRange = range.cloneRange();\r\n\t\t\t\tcloneRange.selectNode(commonAncestorContainer.parentElement);\r\n\t\t\t\ttargetText = cloneRange.cloneContents();\r\n\t\t\t}else{\r\n\t\t\t\ttargetText = range.cloneContents();\r\n\t\t\t}\r\n\r\n\t\t\tlet selection = window.getSelection()\r\n\r\n\t\t\t//if(tool.childNodes.length > 1){\r\n\t\t\tlet list = [...tool.childNodes];\r\n\t\t\tif( ! TargetTool.toolHandler.isInline){\r\n\t\t\t\ttry{\r\n\t\t\t\t\tthis.lineElement.append(...list);\r\n\t\t\t\t}catch(Ignore){\r\n\t\t\t\t\tLine.getLine(tool).append(...list);\r\n\t\t\t\t}\r\n\t\t\t\ttool.remove();\r\n\t\t\t\tresolve();\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tlet index = list.findIndex(e=> selection.containsNode(e, true) || selection.containsNode(e, false))\r\n\t\t\ttargetWrap = list[index]\r\n\t\t\tleftList = list.slice(0, index);\r\n\t\t\trightList = list.slice(index + 1);\r\n\t\t\t//}\r\n\t\t\t\r\n\r\n\t\t\tif(startContainer.textContent.length != offset){\r\n\t\t\t\tleftText = startContainer.textContent.substring(0, startOffset);\t\t\t\r\n\t\t\t\trightText = offset <= 1 ? startContainer.textContent.substring(startOffset + 1) : startContainer.textContent.substring(startOffset + offset);\r\n\t\t\t\tif(targetWrap != undefined){\r\n\t\t\t\t\tlet cloneLeft = targetWrap.cloneNode(false);\r\n\t\t\t\t\tcloneLeft.textContent = leftText;\r\n\t\t\t\t\tleftText = cloneLeft; \r\n\t\t\t\t\tlet cloneRight = targetWrap.cloneNode(false);\r\n\t\t\t\t\tcloneRight.textContent = rightText;\r\n\t\t\t\t\trightText = cloneRight; \r\n\t\t\t\t\ttargetWrap.remove();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tleftText = document.createTextNode(leftText);\r\n\t\t\t\t\trightText = document.createTextNode(rightText);\r\n\t\t\t\t}\r\n\t\t\t\tleftList.unshift(leftText);\r\n\t\t\t\trightList.push(rightText);\r\n\t\t\t}\r\n\t\t\t//tool.replaceChildren(...leftList, targetText, ...rightList)\r\n\r\n\t\t\tlet leftElement = undefined;\r\n\t\t\tif(leftList.length != 0){\r\n\t\t\t\tleftElement = new TargetTool();\r\n\t\t\t\tleftElement.append(...leftList);\r\n\t\t\t}\r\n\t\t\tlet rightElement = undefined;\r\n\t\t\tif(rightList.length != 0){\r\n\t\t\t\trightElement = new TargetTool();\r\n\t\t\t\trightElement.append(...rightList);\r\n\t\t\t}\r\n\r\n\t\t\tlet appendList = [leftElement, targetText, rightElement].filter(e=>e);\r\n\t\t\tif(tool.previousSibling){\r\n\t\t\t\ttool.previousSibling.after(...appendList)\r\n\t\t\t}else if(tool.nextSibling){\r\n\t\t\t\ttool.nextSibling.before(...appendList);\r\n\t\t\t}else{\r\n\t\t\t\tthis.lineElement.append(...appendList);\r\n\t\t\t}\r\n\t\t\t/*\r\n\t\t\tif(startPrevSibling && startPrevSibling.nodeType == Node.TEXT_NODE){\r\n\t\t\t\tconsole.log(1)\r\n\t\t\t\tif(rightText){\r\n\t\t\t\t\tlet rightTool = new TargetTool();\r\n\t\t\t\t\trightTool.textContent = rightText;\r\n\t\t\t\t\tstartPrevSibling.after(rightTool);\r\n\t\t\t\t}\r\n\t\t\t\tstartPrevSibling.after(textNode);\r\n\t\t\t\tif(leftText){\r\n\t\t\t\t\tlet leftTool = new TargetTool()\r\n\t\t\t\t\tleftTool.textContent = leftText \r\n\t\t\t\t\tstartPrevSibling.after(leftTool);\r\n\t\t\t\t}\r\n\t\t\t}else if(startNextSibling && startNextSibling.nodeType == Node.TEXT_NODE){\r\n\t\t\t\tconsole.log(2)\r\n\t\t\t\tif(leftText){\r\n\t\t\t\t\tlet leftTool = new TargetTool()\r\n\t\t\t\t\tleftTool.textContent = leftText \r\n\t\t\t\t\tstartNextSibling.before(leftTool);\r\n\t\t\t\t}\r\n\t\t\t\tstartNextSibling.before(textNode);\r\n\t\t\t\tif(rightText){\r\n\t\t\t\t\tlet rightTool = new TargetTool();\r\n\t\t\t\t\trightTool.textContent = rightText;\r\n\t\t\t\t\tstartNextSibling.before(rightTool);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tconsole.log(3)\r\n\t\t\t\tif(leftText){\r\n\t\t\t\t\tlet leftTool = new TargetTool()\r\n\t\t\t\t\tleftTool.textContent = leftText \r\n\t\t\t\t\tthis.append(leftTool);\r\n\t\t\t\t}\r\n\t\t\t\tthis.append(document.createTextNode(textNode));\r\n\t\t\t\tif(rightText){\r\n\t\t\t\t\tlet rightTool = new TargetTool();\r\n\t\t\t\t\trightTool.textContent = rightText;\r\n\t\t\t\t\tthis.append(rightTool);\r\n\t\t\t\t}\r\n\t\t\t}*/\r\n\t\t\t//startContainer.remove();\r\n\t\t\ttool.remove();\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n\tasync #cancelMultipleLineAll(range, tool, TargetTool, endLine){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tlet {startOffset, endOffset, startContainer, endContainer} = range;\r\n\t\t\t\r\n\t\t\tlet endTool = Line.getTool(endContainer, TargetTool);\r\n\r\n\t\t\t//  startContainer, endContainer             \r\n\t\t\tlet startTextNode = document.createTextNode(startContainer.textContent.substring(startOffset, startContainer.textContent.length));\r\n\t\t\tlet endTextNode = document.createTextNode(endContainer.textContent.substring(0, endOffset));\r\n\t\t\t\r\n\t\t\tlet startLeftText = startContainer.textContent.substring(0, startOffset);\r\n\t\t\tlet endRightText = endContainer.textContent.substring(endOffset, endContainer.textContent.length)\r\n\r\n\t\t\tlet startNextSibling = tool?.nextSibling\r\n\t\t\tlet startPrevSibling = tool?.previousSibling\r\n\r\n\t\t\tlet endNextSibling = endTool?.nextSibling\r\n\t\t\tlet endPrevSibling = endTool?.previousSibling\r\n\r\n\t\t\tif(startOffset == 0){\r\n\t\t\t\t//console.log(1)\r\n\t\t\t\tthis.#findCancels(this.lineElement, TargetTool);\r\n\t\t\t}else\r\n\t\t\tif(startPrevSibling && startPrevSibling.nodeType == Node.TEXT_NODE){\r\n\t\t\t\t//console.log(2)\r\n\t\t\t\tstartPrevSibling.after(startTextNode);\r\n\t\t\t\tif(startLeftText){\r\n\t\t\t\t\tlet leftTool = new TargetTool()\r\n\t\t\t\t\tleftTool.textContent = startLeftText \r\n\t\t\t\t\tstartPrevSibling.after(leftTool);\r\n\t\t\t\t}\r\n\t\t\t}else if(startNextSibling && startNextSibling.nodeType == Node.TEXT_NODE){\r\n\t\t\t\t//console.log(3)\r\n\t\t\t\tif(startLeftText){\r\n\t\t\t\t\tlet leftTool = new TargetTool()\r\n\t\t\t\t\tleftTool.textContent = startLeftText \r\n\t\t\t\t\tstartNextSibling.before(leftTool);\r\n\t\t\t\t}\r\n\t\t\t\tstartNextSibling.before(startTextNode);\r\n\t\t\t}else{\r\n\t\t\t\t/*console.log(4)\r\n\t\t\t\tif(startLeftText){\r\n\t\t\t\t\tlet leftTool = new TargetTool()\r\n\t\t\t\t\tleftTool.textContent = startLeftText \r\n\t\t\t\t\tthis.append(leftTool);\r\n\t\t\t\t}\r\n\t\t\t\tthis.append(startTextNode);\r\n\t\t\t\t*/\r\n\t\t\t}\r\n\t\t\tif(tool){\r\n\t\t\t\ttool.remove();\r\n\t\t\t}\r\n\r\n\t\t\tlet nextLine = this.lineElement.nextElementSibling;\r\n\r\n\r\n\t\t\twhile(nextLine){\r\n\t\t\t\tif(nextLine == endLine){\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tnextLine.childNodes.forEach(e=>{\r\n\t\t\t\t\t//console.log(4);\r\n\t\t\t\t\tthis.#findCancels(e, TargetTool);\r\n\t\t\t\t})\r\n\t\t\t\tnextLine = nextLine.nextElementSibling;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(endOffset == endContainer.length){\r\n\t\t\t\t//console.log(1)\r\n\t\t\t\tthis.#findCancels(endLine, TargetTool);\r\n\t\t\t}else\r\n\t\t\tif(endPrevSibling && endPrevSibling.nodeType == Node.TEXT_NODE){\r\n\t\t\t\t//console.log(2)\r\n\t\t\t\tif(endRightText){\r\n\t\t\t\t\tlet rightTool = new TargetTool();\r\n\t\t\t\t\trightTool.textContent = endRightText;\r\n\t\t\t\t\tendPrevSibling.after(rightTool);\r\n\t\t\t\t}\r\n\t\t\t\tendPrevSibling.after(endTextNode);\r\n\t\t\t}else if(endNextSibling && endNextSibling.nodeType == Node.TEXT_NODE){\r\n\t\t\t\t//console.log(3)\r\n\t\t\t\tendNextSibling.before(endTextNode);\r\n\t\t\t\tif(endRightText){\r\n\t\t\t\t\tlet rightTool = new TargetTool();\r\n\t\t\t\t\trightTool.textContent = endRightText;\r\n\t\t\t\t\tendNextSibling.after(rightTool);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t/*console.log(4)\r\n\t\t\t\tif(endRightText){\r\n\t\t\t\t\tlet rightTool = new TargetTool();\r\n\t\t\t\t\trightTool.textContent = endRightText;\r\n\t\t\t\t\t//endLine.append(rightTool);\r\n\t\t\t\t}\r\n\t\t\t\tendLine.prepend(endTextNode);\r\n\t\t\t\t*/\r\n\t\t\t}\r\n\r\n\t\t\tif(endTool){\r\n\t\t\t\tendTool.remove();\r\n\t\t\t}\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n\tasync cancelTool(TargetTool, selection, endLine){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tlet {isCollapsed, anchorNode, anchorOffset} = selection;\r\n\t\t\tlet range = selection.getRangeAt(0);\r\n\t\t\tlet {startOffset, endOffset, startContainer, endContainer, commonAncestorContainer} = range;\r\n\t\t\tlet tool = Line.getTool(startContainer, TargetTool);\r\n\t\t\t/*\r\n\t\t\tif(startContainer === endContainer){\r\n\t\t\t\tif(startContainer.parentElement.childNodes.length == 1 \r\n\t\t\t\t\t&& startContainer.parentElement.childNodes[0] ==  startContainer\r\n\t\t\t\t\t&& startContainer.parentElement.childNodes[0] ==  endContainer\r\n\t\t\t\t\t&& endContainer.textContent.length == endOffset){\r\n\t\t\t\t\t// tool    \r\n\t\t\t\t\tthis.#cancelOnlyOneLine(range, tool, TargetTool).then(()=>{\r\n\t\t\t\t\t\tconsole.log('cancelOnlyOneLine 1')\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\t//   \r\n\t\t\t\t\tthis.#cancelOnlyOneTool(range, tool, TargetTool).then(()=>{\r\n\t\t\t\t\t\tconsole.log('cancelOnlyOneTool')\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t*/\r\n\r\n\t\t\tif( ! tool){\r\n\t\t\t\tTargetTool.toolHandler.toolButton.dataset.tool_status = 'connected'\r\n\t\t\t\tresolve();\r\n\t\t\t}else{\r\n\t\t\t\tif( ! TargetTool.toolHandler.isInline || (startContainer === endContainer && this.lineElement.innerText.length != range.toString().length ) ){\r\n\t\t\t\t\tthis.#cancelOnlyOneTool(range, tool, TargetTool).then(()=>{\r\n\t\t\t\t\t\tconsole.log('cancelOnlyOneTool')\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t})\r\n\t\t\t\t}else if(Line.getLine(startContainer) === Line.getLine(endContainer)){\r\n\t\t\t\t\t// \r\n\t\t\t\t\t// tool    \r\n\t\t\t\t\tthis.#cancelOnlyOneLine(range, tool, TargetTool).then(()=>{\r\n\t\t\t\t\t\tconsole.log('cancelOnlyOneLine 2')\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.#cancelMultipleLineAll(range, tool, TargetTool, endLine).then(()=>{\r\n\t\t\t\t\t\tconsole.log('cancelMultipleLineAll')\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t}).catch(err=>console.error(err))\r\n\t\t\t\t}\r\n\t\t\t\tresolve();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t#findCancels(element, TargetTool){\r\n\t\tnew Promise(res=>{\r\n\t\t\tif(TargetTool.prototype.isPrototypeOf(element)){\r\n\t\t\t\tif(element.nextSibling){\r\n\t\t\t\t\telement.nextSibling.before(...element.childNodes);\r\n\t\t\t\t} else if(element.previousSibling){\r\n\t\t\t\t\telement.previousSibling.after(...element.childNodes);\r\n\t\t\t\t}else {\r\n\t\t\t\t\telement.parentElement.append(...element.childNodes);\r\n\t\t\t\t}\r\n\t\t\t\telement.remove();\r\n\t\t\t}else{\r\n\t\t\t\tif(element.nodeType == Node.ELEMENT_NODE){\r\n\t\t\t\t\telement.childNodes.forEach(e=>{\r\n\t\t\t\t\t\tthis.#findCancels(e, TargetTool);\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tres();\r\n\t\t})\r\n\t}\r\n\r\n\tlookAtMe(){\r\n\t\tlet sty = window.getComputedStyle(this.lineElement);\r\n\t\tif(sty.visibility == 'hidden' || sty.opacity == 0){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(this.lineElement.innerText.length == 0 || (this.lineElement.innerText.length == 1 && this.lineElement.innerText.charAt(0) == '\\n')){\r\n\t\t\tthis.lineElement.innerText = '\\n';\r\n\t\t}\r\n\t\tif(this.lineElement.isContentEditable){\r\n\t\t\tthis.lineElement.focus()\r\n\t\t\twindow.getSelection().setPosition(this.lineElement, this.lineElement.childNodes.length)\r\n\t\t}\r\n\t}\r\n\r\n}","import Line from '../component/Line'\r\n\r\nexport default class FreedomInterface extends HTMLElement {\r\n\r\n\tstatic globalMouseEvent = undefined;\r\n\tstatic lastClickElementPath = undefined;\r\n\tstatic globalClickEventPromiseResolve;\r\n\tstatic globalClickEventPromise = new Promise(resolve=>{\r\n\t\tthis.globalClickEventPromiseResolve = resolve;\r\n\t});\r\n\tstatic globalKeydownEventPromiseResolve;\r\n\tstatic globalKeydownEventPromise = new Promise(resolve=>{\r\n\t\tthis.globalKeydownEventPromiseResolve = resolve;\r\n\t})\r\n\tstatic globalSelectionChangeEventPromiseResolve;\r\n\tstatic globalSelectionChangeEventPromise = new Promise(resolve=>{\r\n\t\tthis.globalSelectionChangeEventPromiseResolve = resolve;\r\n\t})\r\n\t\r\n\tstatic{\r\n\t\tdocument.addEventListener('mousemove', (event) => {\r\n\t\t\t//mousePos = { x: event.clientX, y: event.clientY };\r\n\t\t\t//mousePosText.textContent = `(${mousePos.x}, ${mousePos.y})`;\r\n\t\t\tthis.globalMouseEvent = event;\r\n\t\t});\r\n\t\tdocument.addEventListener('mousedown', (event) => {\r\n\t\t\tthis.lastClickElementPath = event.composedPath();\r\n\t\t\tthis.globalClickEventPromiseResolve(event)\r\n\t\t\tthis.globalClickEventPromise = new Promise(resolve => {\r\n\t\t\t\tthis.globalClickEventPromiseResolve = resolve;\r\n\t\t\t})\r\n\t\t})\r\n\t\twindow.addEventListener('keydown', (event) => {\r\n\t\t\tthis.globalKeydownEventPromiseResolve(event);\r\n\t\t\tthis.globalKeydownEventPromise = new Promise(resolve=>{\r\n\t\t\t\tthis.globalKeydownEventPromiseResolve = resolve;\r\n\t\t\t})\r\n\t\t})\r\n\t\tdocument.addEventListener('selectionchange', (event) => {\r\n\t\t\tthis.globalSelectionChangeEventPromiseResolve(event);\r\n\t\t\tthis.globalSelectionChangeEventPromise = new Promise(resolve=>{\r\n\t\t\t\tthis.globalSelectionChangeEventPromiseResolve = resolve;\r\n\t\t\t})\r\n\t\t});\r\n\r\n\t}\r\n\tstatic isMouseInnerElement(element){\r\n\t\tif( ! this.globalMouseEvent) return;\r\n\t\tlet {clientX, clientY} = this.globalMouseEvent;\r\n\t\tlet {x, y, width, height} = element.getBoundingClientRect();\r\n\t\tlet isMouseInnerX = ((x + width) >= clientX && x <= clientX);\r\n\t\tlet isMouseInnerY = ((y + height) >= clientY && y <= clientY);\r\n\t\treturn (isMouseInnerX && isMouseInnerY);\r\n\t}\r\n\t/**\r\n\t * \r\n\t * @param {HtmlElement} element \r\n\t * @param {Function} callback \r\n\t */\r\n\tstatic globalKeydownEventListener(element, callback = ({oldEvent, newEvent})=>{}){\r\n\t\t\r\n\t\tlet oldEvent = undefined;\r\n\t\tlet newEvent = undefined;\r\n\t\tconst simpleObserver = () => {\r\n\t\t\tthis.globalKeydownEventPromise.then((event)=>{\r\n\t\t\t\tnewEvent = event;\r\n\t\t\t\tcallback({oldEvent, newEvent});\r\n\t\t\t\toldEvent = event;\r\n\t\t\t\tsimpleObserver();\r\n\t\t\t})\r\n\t\t}\r\n\t\tsimpleObserver();\r\n\t}\r\n\tstatic globalSelectionChangeEventListener(element, callback = ({oldEvent, newEvent})=>{}){\r\n\t\tlet oldEvent = undefined;\r\n\t\tlet newEvent = undefined;\r\n\t\tconst simpleObserver = () => {\r\n\t\t\tthis.globalSelectionChangeEventPromise.then((event)=>{\r\n\t\t\t\tnewEvent = event;\r\n\t\t\t\tcallback({oldEvent, newEvent});\r\n\t\t\t\toldEvent = event;\r\n\t\t\t\tsimpleObserver();\r\n\t\t\t})\r\n\t\t}\r\n\t\tsimpleObserver();\r\n\t}\r\n\t/**\r\n\t * \r\n\t * @param {HTMLElement} element \r\n\t * @param {Function} callback \r\n\t */\r\n\tstatic outClickElementListener(element, callback = ({oldEvent, newEvent, isMouseOut = false})=>{}){\r\n\r\n\t\tif(element == undefined || element?.nodeType != Node.ELEMENT_NODE){\r\n\t\t\tthrow new Error('element is not Element');\r\n\t\t}\r\n\r\n\t\tlet oldEvent = undefined;\r\n\t\tlet newEvent = undefined;\r\n\t\tconst simpleObserver = () => {\r\n\t\t\tthis.globalClickEventPromise.then((event)=>{\r\n\t\t\t\tlet isMouseOut = ! this.isMouseInnerElement(element);\r\n\t\t\t\tnewEvent = event;\r\n\t\t\t\tcallback({oldEvent, newEvent, isMouseOut});\r\n\t\t\t\toldEvent = event;\r\n\t\t\t\tsimpleObserver();\r\n\t\t\t})\r\n\t\t}\r\n\t\tsimpleObserver();\r\n\t}\r\n\t\r\n\tstatic processingElementPosition(element, target){\r\n\t\tlet {x, y, height, width} = target.getBoundingClientRect();\r\n\t\t\r\n\t\tlet elementTop = (y - element.clientHeight)\r\n\t\tlet elementLeft = (x - element.clientWidth)\r\n\t\tif(elementTop > 0){\r\n\t\t\telement.style.top = elementTop + 'px';\r\n\t\t}else{\r\n\t\t\telement.style.top = y + height + 'px';\r\n\t\t}\r\n\r\n\t\tif(elementLeft > 0){\r\n\t\t\telement.style.left = elementLeft + 'px'\r\n\t\t}else{\r\n\t\t\telement.style.left = x + width + 'px';\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\tstatic DeleteOption = class DeleteOption{\r\n\t\tstatic #DeleteOptionEnum = class DeleteOptionEnum{\r\n\t\t\tvalue;\r\n\t\t\tconstructor(value){\r\n\t\t\t\tthis.value = value;\r\n\t\t\t\tObject.freeze(this);\r\n\t\t\t}\r\n\t\t}\r\n\t\tstatic EMPTY_CONTENT_IS_DELETE = new this.#DeleteOptionEnum('empty_content_is_delete');\r\n\t\tstatic EMPTY_CONTENT_IS_NOT_DELETE = new this.#DeleteOptionEnum('empty_content_is_not_delete');\r\n\t\tvalue;\r\n\t\tstatic{\r\n\t\t\tObject.freeze(this);\r\n\t\t}\r\n\t\tconstructor(value){\r\n\t\t\tthis.value = value;\r\n\t\t\tObject.freeze(this);\r\n\t\t}\r\n\t}\r\n\r\n\t#isLoaded = false;\r\n\tTool;\r\n\t#connectedAfterCallback = () => {}\r\n\t#connectedAfterOnlyOneCallback = ()=> {}\r\n\t#disconnectedAfterCallback = ()=> {}\r\n\t#connectedChildAfterCallback = () => {}\r\n\t#disconnectedChildAfterCallback = () => {}\r\n\t#deleteOption;\r\n\tparentEditor;\r\n\t#childListObserver = new MutationObserver( (mutationList, observer) => {\r\n\t\tmutationList.forEach((mutation) => {\r\n\t\t\tlet {addedNodes, removedNodes} = mutation;\r\n\t\t\tlet connectedChildPromise = new Promise(resolve => {\r\n\t\t\t\tif(addedNodes.length != 0){\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet resultList;\r\n\t\t\t\t\tif( ! this.constructor.toolHandler.isInline){\r\n\t\t\t\t\t\tlet lastItemIndex;\r\n\t\t\t\t\t\tresultList = [...addedNodes].map((e,i)=>{\r\n\t\t\t\t\t\t\tif( ! e.classList?.contains(Line.toolHandler.defaultClass)){\r\n\t\t\t\t\t\t\t\tlet lineElement = this.parentEditor.createLine();\r\n\t\t\t\t\t\t\t\tlineElement.replaceChildren(e);\r\n\t\t\t\t\t\t\t\tthis.append(lineElement);\r\n\t\t\t\t\t\t\t\tif( i == addedNodes.length - 1){\r\n\t\t\t\t\t\t\t\t\tlastItemIndex = i;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn lineElement;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn e;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t//if(lastItemIndex){\r\n\t\t\t\t\t\t//\tresultList[lastItemIndex].line.lookAtMe();\r\n\t\t\t\t\t\t//}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tresultList = addedNodes;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.connectedChildAfterCallback(resultList);\r\n\t\t\t\t\t//this.connectedChildAfterCallback(addedNodes);\r\n\t\t\t\t}\r\n\t\t\t\tresolve();\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\tlet disconnectedChildPromise = new Promise(resolve => {\r\n\t\t\t\tif(removedNodes.length != 0){\r\n\t\t\t\t\tthis.disconnectedChildAfterCallback(removedNodes);\r\n\t\t\t\t}\r\n\t\t\t\tresolve();\r\n\t\t\t})\r\n\t\t\t\r\n\t\t})\r\n\t});\r\n\tconstructor(Tool, dataset, {deleteOption = FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_DELETE} = {}){\r\n\t\tsuper();\r\n\t\tthis.#childListObserver.disconnect();\r\n\t\tthis.#childListObserver.observe(this, {childList:true})\r\n\t\tthis.#deleteOption = deleteOption;\r\n\t\tthis.Tool = Tool;\r\n\t\tthis.classList.add(this.constructor.toolHandler.defaultClass)\r\n\r\n\t\tdocument.addEventListener('selectionchange', this.removeFun, true);\r\n\r\n\t\tif(dataset){\r\n\t\t\tObject.assign(this.dataset, dataset);\r\n\t\t}\r\n\t\t\r\n\t\tFreedomInterface.globalSelectionChangeEventListener(this, ({oldEvent, newEvent}) => {\r\n\t\t\tif(this.#deleteOption != FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE && this.isToolEmpty()){\r\n\t\t\t\tlet thisLine = this.parentEditor?.getLine(this);\r\n\t\t\t\tthis.remove();\r\n\t\t\t\tif(thisLine){\r\n\t\t\t\t\tthisLine.line.lookAtMe();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t}\r\n\tconnectedCallback(){\r\n\r\n\t\tif( ! this.#isLoaded){\r\n\t\t\t\r\n\t\t\tthis.#isLoaded = true;\r\n\t\t\tthis.constructor.toolHandler.connectedFriends = this;\r\n\t\t\tthis.parentEditor = this.closest('.free-will-editor');\r\n\t\t\tthis.parentLine = this.parentEditor?.getLine(this);\r\n\r\n\t\t\tif(this.childNodes.length == 0 && this.#deleteOption == FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE && (this.innerText.length == 0 || (this.innerText.length == 1 && this.innerText.charAt(0) == '\\n'))){\r\n\t\t\t\tlet sty = window.getComputedStyle(this);\r\n\t\t\t\tif(sty.visibility != 'hidden' || sty.opacity != 0){\r\n\t\t\t\t\tthis.innerText = '\\n';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(this.#deleteOption == FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_DELETE && (this.isToolEmpty() || this.childNodes.length == 0)){\r\n\t\t\t\tlet thisLine = this.parentEditor.getLine(this);\r\n\t\t\t\tthis.remove();\r\n\t\t\t\tif(thisLine){\r\n\t\t\t\t\tthisLine.line.lookAtMe();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\tif(this.shadowRoot){\r\n\t\t\t\t//this.parentLine.prepend(document.createTextNode('\\u00A0'));\r\n\t\t\t\t//this.parentLine.prepend(document.createElement('br'));\r\n\t\t\t\t//this.before(document.createElement('br'));\r\n\t\t\t\t//this.parentLine.before(this.parentEditor.createLine());\r\n\t\t\t\tlet nextLine = this.parentEditor.getNextLine(this.parentLine);\r\n\t\t\t\tif( ! nextLine){\r\n\t\t\t\t\tthis.parentEditor.createLine().innerText = '\\n';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tnextLine.line.lookAtMe();\r\n\t\t\t\t}\r\n\t\t\t\t/*this.childNodes.forEach(e=>{\r\n\t\t\t\t\tif(e.nodeType == Node.TEXT_NODE){\r\n\t\t\t\t\t\te.remove()\r\n\t\t\t\t\t}\r\n\t\t\t\t})*/\r\n\t\t\t}\r\n\r\n\t\t\tthis.connectedAfterOnlyOneCallback();\r\n\r\n\t\t\t\r\n\t\t\t/*\r\n\t\t\tif(this.shadowRoot && (this.querySelectorAll('[slot]').length == 0 || this.childNodes.length == 0 || (this.childNodes.length == 1 && this.childNodes[0]?.tagName == 'BR'))){\r\n\t\t\t\t//this.parentLine.prepend(document.createElement('br'));\r\n\t\t\t\t\r\n\t\t\t\tlet slot = Object.assign(document.createElement('slot'),{\r\n\t\t\t\t\tname: 'empty-slot'\r\n\t\t\t\t});\r\n\t\t\t\tlet emptySpan = Object.assign(document.createElement('span'), {\r\n\t\t\t\t\tslot : 'empty-slot'\r\n\t\t\t\t});\r\n\t\t\t\t//emptySpan.style.opacity='0';\r\n\t\t\t\t//emptySpan.append(document.createTextNode('\\u200B'));\r\n\t\t\t\temptySpan.innerText = '\\n'\r\n\t\t\t\tthis.prepend(emptySpan);\r\n\t\t\t\tthis.shadowRoot.append(slot);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t*/\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.connectedAfterCallback();\r\n\t}\r\n\tdisconnectedCallback(){\r\n        this.#isLoaded = false;\r\n\t\ttry{\r\n\t\t\tthis.disconnectedAfterCallback();\r\n\t\t}catch(err){\r\n\t\t\tconsole.error(err)\r\n\t\t}finally{\r\n\t\t\tthis.constructor.toolHandler.connectedFriends = this;\r\n\t\t\tthis.#childListObserver.disconnect(this, {childList:true})\r\n\t\t\tdocument.removeEventListener('selectionchange', this.removeFun, true);\r\n\t\t}\r\n\t}\r\n\r\n\tisToolEmpty(){\r\n\t\tlet sty = window.getComputedStyle(this);\r\n\t\tif(sty.visibility == 'hidden' || sty.opacity == 0){\r\n\t\t\treturn false;\r\n\t\t}\r\n        return this.innerText.length == 0 || (this.innerText.length == 1 && (this.innerText == '\\n' || this.innerText == '\\u200B'));\r\n    }\r\n\r\n\tisCursor(){\r\n\t\tlet selection = window.getSelection();\r\n\t\tif(! document.activeElement.classList.contains('free-will-editor')){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif(selection.type == 'None'){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn selection.containsNode(this, true) || selection.containsNode(this, false)\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Function}\r\n\t */\r\n\tset connectedAfterCallback(connectedAfterCallback){\r\n\t\tthis.#connectedAfterCallback = connectedAfterCallback;\r\n\t}\r\n\r\n\t/**\r\n\t * @returns {Function}\r\n\t */\r\n\tget connectedAfterCallback(){\r\n\t\treturn this.#connectedAfterCallback;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Function}\r\n\t */\r\n\tset connectedAfterOnlyOneCallback(connectedAfterOnlyOneCallback){\r\n\t\tthis.#connectedAfterOnlyOneCallback = connectedAfterOnlyOneCallback;\r\n\t}\r\n\t\r\n\t/**\r\n\t * @returns {Function}\r\n\t */\r\n\tget connectedAfterOnlyOneCallback(){\r\n\t\treturn this.#connectedAfterOnlyOneCallback;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Function}\r\n\t */\r\n\tset disconnectedAfterCallback(disconnectedAfterCallback){\r\n\t\tthis.#disconnectedAfterCallback = disconnectedAfterCallback;\r\n\t}\r\n\r\n\t/**\r\n\t * @returns {Function}\r\n\t */\r\n\tget disconnectedAfterCallback(){\r\n\t\treturn this.#disconnectedAfterCallback;\r\n\t}\r\n \r\n\t/**\r\n\t * @param {Function}\r\n\t */\r\n\tset connectedChildAfterCallback(connectedChildAfterCallback){\r\n\t\tthis.#connectedChildAfterCallback = connectedChildAfterCallback;\r\n\t}\r\n\r\n\t/**\r\n\t * @returns {Function}\r\n\t */\r\n\tget connectedChildAfterCallback(){\r\n\t\treturn this.#connectedChildAfterCallback;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Function}\r\n\t */\r\n\tset disconnectedChildAfterCallback(disconnectedChildAfterCallback){\r\n\t\tthis.#disconnectedChildAfterCallback = disconnectedChildAfterCallback;\r\n\t}\r\n\r\n\t/**\r\n\t * @returns {Function}\r\n\t */\r\n\tget disconnectedChildAfterCallback(){\r\n\t\treturn this.#disconnectedChildAfterCallback;\r\n\t}\r\n}","\r\nexport default class ImageBox {\r\n    \r\n    #style = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-image-box'\r\n\t});\r\n\r\n    #imageBox = Object.assign(document.createElement('div'), {\r\n        className: 'image-box-wrap',\r\n        \r\n        innerHTML:`\r\n            <div class=\"image-resize-container\">\r\n                <div>\r\n                    <label class=\"image-box-resize-label\" for=\"image-box-resize-width\">width </label>\r\n                    <input list=\"image-box-resize-datalist\" class=\"image-box-resize-input\" id=\"image-box-resize-width\" type=\"number\" autocomplete=\"off\"/>\r\n                    <div>\r\n                        <label class=\"image-box-resize-label-error-message\" for=\"image-box-resize-width\"></label>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <label class=\"image-box-resize-label\" for=\"image-box-resize-height\">height(auto) </label>\r\n                    <input list=\"image-box-resize-datalist\" class=\"image-box-resize-input\" id=\"image-box-resize-height\" type=\"number\" autocomplete=\"off\" disabled/>\r\n                </div>\r\n            </div>\r\n            <div class=\"image-key-description-container\" style=\"display:none;\">\r\n                <kbd>Ctrl</kbd><kbd>Wheel</kbd>OR<kbd>Shift</kbd><kbd>Wheel</kbd>\r\n            </div>\r\n            <div class=\"image-button-container\">\r\n                <a href=\"javascript:void(0);\" class=\"download\" download>\r\n                    <svg style=\"zoom:125%;\" class=\"download-css-gg-push-down\" width=\"1rem\" height=\"1rem\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <path d=\"M11.0001 1H13.0001V15.4853L16.2428 12.2427L17.657 13.6569L12.0001 19.3137L6.34326 13.6569L7.75748 12.2427L11.0001 15.4853V1Z\" fill=\"#00000073\" />\r\n                        <path d=\"M18 20.2877H6V22.2877H18V20.2877Z\" fill=\"#00000073\" />\r\n                    </svg>\r\n                </a>\r\n                <a href=\"javascript:void(0);\" class=\"new-window\">\r\n                    <svg style=\"zoom: 150%;\" class=\"new-window-css-gg-expand\" width=\"1rem\" height=\"1rem\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <path d=\"M12.3062 16.5933L12.2713 18.593L5.2724 18.4708L5.39457 11.4719L7.39426 11.5068L7.33168 15.092L15.2262 7.46833L11.6938 7.40668L11.7287 5.40698L18.7277 5.52915L18.6055 12.5281L16.6058 12.4932L16.6693 8.85507L8.72095 16.5307L12.3062 16.5933Z\" fill=\"#00000073\" />\r\n                    </svg>\r\n                </a>\r\n                <span class=\"image-editor\">\r\n                    <svg class=\"image-editor-css-gg-pen\" width=\"1rem\" height=\"1rem\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M21.2635 2.29289C20.873 1.90237 20.2398 1.90237 19.8493 2.29289L18.9769 3.16525C17.8618 2.63254 16.4857 2.82801 15.5621 3.75165L4.95549 14.3582L10.6123 20.0151L21.2189 9.4085C22.1426 8.48486 22.338 7.1088 21.8053 5.99367L22.6777 5.12132C23.0682 4.7308 23.0682 4.09763 22.6777 3.70711L21.2635 2.29289ZM16.9955 10.8035L10.6123 17.1867L7.78392 14.3582L14.1671 7.9751L16.9955 10.8035ZM18.8138 8.98525L19.8047 7.99429C20.1953 7.60376 20.1953 6.9706 19.8047 6.58007L18.3905 5.16586C18 4.77534 17.3668 4.77534 16.9763 5.16586L15.9853 6.15683L18.8138 8.98525Z\" fill=\"#00000073\" />\r\n                        <path d=\"M2 22.9502L4.12171 15.1717L9.77817 20.8289L2 22.9502Z\" fill=\"#00000073\" />\r\n                    </svg>\r\n                </span>\r\n            </div>\r\n        `\r\n        /*     20230821\r\n        innerHTML: `\r\n            <div class=\"image-resize-container\">\r\n                <div>\r\n                    <label class=\"image-box-resize-label\" for=\"image-box-resize-width\">width : </label>\r\n                    <input list=\"image-box-resize-datalist\" class=\"image-box-resize-input\" id=\"image-box-resize-width\" type=\"number\" autocomplete=\"off\"/>\r\n                </div>\r\n                <div>\r\n                    <label class=\"image-box-resize-label\" for=\"image-box-resize-height\">height(auto) : </label>\r\n                    <input list=\"image-box-resize-datalist\" class=\"image-box-resize-input\" id=\"image-box-resize-height\" type=\"number\" autocomplete=\"off\" disabled/>\r\n                </div>\r\n            </div>\r\n            <div class=\"image-button-container\">\r\n                <a href=\"javascript:void(0);\" class=\"download-css-gg-push-down\" download></a>\r\n                <a href=\"javascript:void(0);\" class=\"new-window-css-gg-path-trim\"></a>\r\n            </div>\r\n        `\r\n        */\r\n    });\r\n\r\n    /*\r\n    #removeEventPromiseResolve;\r\n    #removeEventPromise = new Promise(resolve=>{\r\n\t\tthis.#removeEventPromiseResolve = resolve;\r\n\t});\r\n    */\r\n    #image;\r\n    #resizeRememberTarget;\r\n\r\n    constructor(){\r\n        let style = document.querySelector(`#${this.#style.id}`);\r\n        if(! style){\r\n            document.head.append(this.createStyle());\r\n        }else{\r\n            this.#style = style;\r\n        }\r\n\r\n        document.addEventListener('keydown',(event)=>{\r\n            if(this.#imageBox.hasAttribute('data-is_shft')){\r\n                return;\r\n            }\r\n            let {key} = event;\r\n            if(key === 'Shift'){\r\n                this.#imageBox.dataset.is_shft = '';\r\n            }\r\n        })\r\n\r\n        document.addEventListener('keyup', (event)=>{\r\n            if( ! this.#imageBox.hasAttribute('data-is_shft')){\r\n                return;\r\n            }    \r\n            let {key} = event;\r\n            if(key === 'Shift'){\r\n                this.#imageBox.removeAttribute('data-is_shft');\r\n            }\r\n        })\r\n        \r\n        this.#imageBox.addEventListener('wheel', (event) => {\r\n            if(this.#imageBox.hasAttribute('data-is_shft')){\r\n                return;\r\n            }\r\n            //event.preventDefault();\r\n            let {deltaY} = event;\r\n            \r\n            this.#imageBox.scrollTo(\r\n                this.#imageBox.scrollLeft + deltaY, undefined\r\n            );\r\n        }, {passive: true})\r\n        let [width, height] = this.#imageBox.querySelectorAll('#image-box-resize-width, #image-box-resize-height');\r\n        \r\n        window.addEventListener('keyup', (event) => {\r\n            if( ! this.image || ! this.resizeRememberTarget || ! width.hasAttribute('data-is_ctrl') || ! this.image.parentElement.matches(':hover')){//|| this.image.getRootNode()?.activeElement != width){\r\n                return;\r\n            }\r\n            width.removeAttribute('data-is_ctrl');\r\n        })\r\n\r\n        window.addEventListener('keydown', (event) => {\r\n            \r\n            let eventPath = event.composedPath()\r\n\r\n            if( ! this.image || ! this.resizeRememberTarget || eventPath[0] == width || ! this.image.parentElement.matches(':hover')){//|| this.image.getRootNode()?.activeElement != width){\r\n                return;\r\n            }\r\n            if(event.ctrlKey){\r\n                width.dataset.is_ctrl = '';\r\n            }else{\r\n                width.removeAttribute('data-is_ctrl');\r\n            }\r\n        })\r\n        \r\n        /**\r\n         * @see https://www.chromestatus.com/feature/6662647093133312\r\n         */\r\n        window.addEventListener('wheel', (event) => {\r\n            \r\n            if( ! this.image || ! this.resizeRememberTarget || ! this.image.parentElement.hasAttribute('data-is_resize_click') || event.composedPath()[0] == width || ! this.image.parentElement.matches(':hover')){// || this.image.getRootNode()?.activeElement != width){\r\n                return;\r\n            }\r\n            if(width.hasAttribute('data-is_ctrl')){\r\n                width.value = Number(width.value) + (event.deltaY * -1)\r\n            }else{\r\n                width.value = Number(width.value) + ((event.deltaY * -1) / 100)\r\n            }\r\n            this.oninputEvent(this.image, width, width, height, this.resizeRememberTarget);\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLImageElement} image \r\n     */\r\n    addImageHoverEvent(image, resizeRememberTarget){\r\n        //image.parentElement.onmouseover = () => {\r\n        let keyDescription = this.#imageBox.querySelector('.image-key-description-container')   \r\n        image.parentElement.onmouseenter = () => {\r\n            if(! image.src || image.src == '' || image.hasAttribute('data-error')){\r\n                return;\r\n            }\r\n             let root = image.getRootNode();\r\n            if(root != document){\r\n                root.append(this.#style);\r\n            }else{\r\n                document.head.append(this.#style);\r\n            }\r\n\r\n            if(image.parentElement && (image.parentElement !== this.#imageBox.parentElement || ! this.#imageBox.classList.contains('start'))){\r\n                image.parentElement.append(this.#imageBox);\r\n\r\n                this.#addRresizeEvent(image, resizeRememberTarget)\r\n                this.#addButtonIconEvent(image)\r\n                let appendAwait = setInterval(()=>{\r\n                    if(this.#imageBox.isConnected && image.complete && image.parentElement === this.#imageBox.parentElement && ! this.#imageBox.classList.contains('start')){\r\n                        this.#imageBox.classList.add('start');\r\n                        this.image = image;\r\n                        this.resizeRememberTarget = resizeRememberTarget;\r\n                        image.parentElement.onclick = (event) => {\r\n                            if(! image.src || image.src == '' || event.composedPath()[0] != image || image.hasAttribute('data-error')){\r\n                                return;\r\n                            }\r\n                            this.#imageBox.classList.add('start');\r\n                            image.parentElement.toggleAttribute('data-is_resize_click');\r\n                            this.falsh(image.parentElement);\r\n                            if(image.parentElement.hasAttribute('data-is_resize_click')){\r\n                                keyDescription.style.display = '';\r\n                            }else {\r\n                                keyDescription.style.display = 'none';\r\n                            }\r\n                        }\r\n                        clearInterval(appendAwait);\r\n                    }\r\n                }, 50)\r\n            }\r\n        }\r\n        image.parentElement.onmouseleave = () => {\r\n            this.#imageBox.classList.remove('start');\r\n            if(image.parentElement.hasAttribute('data-is_resize_click')){\r\n                keyDescription.style.display = 'none';\r\n                this.falsh(image.parentElement);\r\n            }\r\n            image.parentElement.removeAttribute('data-is_resize_click');\r\n            /*if(this.#imageBox.isConnected && image.parentElement === this.#imageBox.parentElement){\r\n                \r\n                this.#imageBox.classList.remove('start');\r\n                this.#imageBox.ontransitionend = () => {\r\n                    if(this.#imageBox.isConnected){\r\n                        this.#imageBox.remove();\r\n                    }\r\n                }\r\n                \r\n            }*/\r\n        }\r\n    }\r\n\r\n    falsh(target){\r\n        return new Promise(resolve => {\r\n            let flash = document.createElement('div');\r\n            Object.assign(flash.style, {\r\n                position: 'absolute',top: '0px',left: '0px',\r\n                width: '100%',height: '100%', background: 'rgba(255, 255, 255, 0.4)',\r\n                transition: 'opacity 0.2s ease 0s', opacity: 0\r\n            })\r\n            target.append(flash);\r\n            let flashAwait = setInterval(()=>{\r\n                if( ! flash.isConnected){\r\n                    return; \r\n                }\r\n                clearInterval(flashAwait);\r\n                flash.style.opacity = 1;\r\n                flash.ontransitionend = () => {\r\n                    flash.style.opacity = 0;\r\n                    flash.ontransitionend = () => {\r\n                        flash.remove();\r\n                        resolve();\r\n                    }\r\n                }\r\n            }, 50)\r\n        });\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLImageElement} image \r\n     */\r\n    //     20230821\r\n    #addRresizeEvent(image, resizeRememberTarget){\r\n        return new Promise(resolve => {\r\n            let [width, height] = this.#imageBox.querySelectorAll('#image-box-resize-width, #image-box-resize-height');\r\n            width.value = image.width, height.value = image.height;\r\n            \r\n            width.labels[0].textContent = 'width : ';\r\n            width.labels[1].textContent = '';\r\n            \r\n            this.prevValue = undefined;\r\n\r\n            width.oninput = (event) => this.oninputEvent(image, event.target, width, height, resizeRememberTarget);\r\n            width.onkeydown = (event) => {\r\n                if(event.ctrlKey){\r\n                    width.dataset.is_ctrl = '';\r\n                }else{\r\n                    width.removeAttribute('data-is_ctrl');\r\n                }\r\n            }\r\n            width.onkeyup = (event) => {\r\n                width.removeAttribute('data-is_ctrl');\r\n            }\r\n            width.onblur = () => {\r\n                width.removeAttribute('data-is_ctrl');\r\n            }\r\n            width.onwheel = (event) => {\r\n                event.preventDefault();\r\n                if(width.hasAttribute('data-is_ctrl')){\r\n                    width.value = Number(width.value) + (event.deltaY * -1)\r\n                }else{\r\n                    width.value = Number(width.value) + ((event.deltaY * -1) / 100)\r\n                }\r\n                this.oninputEvent(image, event.target, width, height, resizeRememberTarget);\r\n            }\r\n            //height.oninput = (event) => oninputEvent(event);\r\n            resolve({width, height});\r\n        });\r\n    }\r\n    oninputEvent(image, target, width, height, resizeRememberTarget) {\r\n        if(isNaN(Number(target.value))){\r\n            target.value = target.value.replace(/\\D/g, '');\r\n            return;\r\n        }else if(Number(target.value) < 50){\r\n            width.labels[1].textContent = '(min 50)';\r\n            target.value = 50;\r\n        }else{\r\n            width.labels[1].textContent = '';\r\n        }\r\n        let sizeName = target.id.includes('width') ? 'width': 'height';\r\n        image[sizeName] = target.value;\r\n\r\n        let imageRect = image.getBoundingClientRect();\r\n\r\n        //width.value = image.width, height.value = image.height;\r\n        if(this.prevValue && parseInt(this.prevValue) == parseInt(imageRect.width)){\r\n            width.value = parseInt(this.prevValue);\r\n            width.labels[1].textContent = `(max ${parseInt(this.prevValue)}) : `\r\n        }\r\n        this.prevValue = imageRect.width;\r\n        resizeRememberTarget.dataset.width = width.value;\r\n    }\r\n    #addButtonIconEvent(image){\r\n        return new Promise(resolve => {\r\n            let [download, newWindow] = [...this.#imageBox.querySelectorAll('.download-css-gg-push-down, .new-window-css-gg-expand')]\r\n                .map(e=>e.parentElement)\r\n            download.href = image.src, newWindow.href = image.src\r\n            download.download = image.dataset.image_name;\r\n            newWindow.target = '_blank';\r\n            resolve({download, newWindow});\r\n        })\r\n    }\r\n\r\n    get imageBox(){\r\n        return this.#imageBox;\r\n    }\r\n\r\n\tget style(){\r\n\t\treturn this.#style;\r\n\t}\r\n\r\n\tset style(style){\r\n        this.#style.textContent = style;\r\n    }\r\n\r\n\tset insertStyle(style){\r\n\t\tthis.#style.sheet.insertRule(style);\r\n\t}\r\n    \r\n    set image(image){\r\n        this.#image = image; \r\n    }\r\n\r\n    get image(){\r\n        return this.#image;\r\n    }\r\n    set resizeRememberTarget(resizeRememberTarget){\r\n        this.#resizeRememberTarget = resizeRememberTarget;\r\n    }\r\n    get resizeRememberTarget(){\r\n        return this.#resizeRememberTarget;\r\n    }\r\n\r\n    createStyle(){\r\n        this.#style.textContent = `\r\n            .image-box-wrap{\r\n                position: absolute;\r\n                display: flex;\r\n                justify-content: space-between;\r\n                width: 100%;\r\n                background: linear-gradient(to bottom, #ff8787 -73%, #ffffffcf 115%);\r\n                color: white;\r\n                top:-20%;\r\n                opacity: 0;\r\n                transition: all 1s;\r\n                white-space: nowrap;\r\n                overflow-y: clip;\r\n                overflow-x: auto;\r\n            }\r\n            .image-box-wrap::-webkit-scrollbar{\r\n                display: none;\r\n            }\r\n            .image-box-wrap:hover::-webkit-scrollbar{\r\n                display: initial;\r\n                width: 7px;\r\n                height: 7px;\r\n            }\r\n            .image-box-wrap:hover::-webkit-scrollbar-track{\r\n                background: #00000040;\r\n                border-radius: 100px;\r\n                box-shadow: inset 0 0 5px #000000fc;\r\n            }\r\n            .image-box-wrap:hover::-webkit-scrollbar-thumb {\r\n                background: #0c0c0c38;\r\n                border-radius: 100px;\r\n                box-shadow: inset 0 0 5px #000000;\r\n            }\r\n            .image-box-wrap:hover::-webkit-scrollbar-thumb:hover {\r\n                /*background: #44070757;*/\r\n                background: #34000075; \r\n            }\r\n            .image-box-wrap.start{\r\n                top: 0;\r\n                opacity: 1;\r\n                transition: all 0.5s;\r\n            }\r\n            .image-box-wrap .image-button-container,\r\n            .image-box-wrap .image-resize-container, \r\n            .image-box-wrap .image-key-description-container{\r\n                display: flex;\r\n                gap: 1.5vw;\r\n                padding: 1.7%;\r\n                align-items: center;\r\n            }\r\n            .image-box-wrap .image-resize-container .image-box-resize-label{\r\n                background: linear-gradient(to right, #e50bff, #004eff);\r\n                -webkit-background-clip: text;\r\n                -webkit-text-fill-color: transparent;\r\n            }\r\n            .image-box-wrap .image-resize-container .image-box-resize-input{\r\n                outline: none;\r\n                border: none;\r\n                background-image: linear-gradient(#fff1f1d4, #ffffffeb), linear-gradient(to right, #a189890d 0%,  #ed89b275 100%);\r\n                background-origin: border-box;\r\n                background-clip: content-box, border-box;\r\n                background-color: #00000000; \r\n                width: 3.2rem;\r\n                height: 100%;\r\n                color: #ffb6b6;\r\n                font-size: 0.9rem;\r\n                text-align: center;\r\n            }\r\n            .image-box-wrap .image-button-container .new-window,\r\n            .image-box-wrap .image-button-container .download,\r\n            .image-box-wrap .image-button-container .image-editor{\r\n                display: flex;\r\n                align-items: center;\r\n                border: none;\r\n                background:none;\r\n                position:relative;\r\n                cursor: pointer;\r\n            }\r\n\r\n            .image-box-wrap kbd {\r\n                background-color: #eee;\r\n                border-radius: 3px;\r\n                border: 1px solid #b4b4b4;\r\n                box-shadow:\r\n                0 1px 1px rgba(0, 0, 0, 0.2),\r\n                0 2px 0 0 rgba(255, 255, 255, 0.7) inset;\r\n                color: #333;\r\n                display: inline-block;\r\n                font-size: 0.85em;\r\n                font-weight: 700;\r\n                line-height: 1;\r\n                padding: 2px 4px;\r\n                white-space: nowrap;\r\n                height: fit-content;\r\n            }\r\n        `\r\n        return this.#style;\r\n    }\r\n}","\r\nimport FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport ImageBox from \"../component/ImageBox\"\r\nexport default class Image extends FreedomInterface {\r\n\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n    static imageBox = new ImageBox();\r\n\r\n    static customImageCallback; \r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-image-style'\r\n\t});\r\n\r\n    static slotName = 'free-will-editor-image-description-slot';\r\n\r\n    static #selectedFile = Object.assign(document.createElement('input'), {\r\n        type: 'file',\r\n        accept: 'image/*'\r\n    });\r\n\r\n    static get selectedFile(){\r\n        return this.#selectedFile;\r\n    }\r\n    static isDefaultStyle = true;\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-image';\r\n        //this.toolHandler.isInline = false;\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: '',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n            innerHTML: `\r\n            <svg class=\"${this.#defaultStyle.id} css-gg-image-icon\"\r\n                width=\"0.9rem\"\r\n                height=\"0.9rem\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                >\r\n                <path\r\n                    fill-rule=\"evenodd\"\r\n                    clip-rule=\"evenodd\"\r\n                    d=\"M7 7C5.34315 7 4 8.34315 4 10C4 11.6569 5.34315 13 7 13C8.65685 13 10 11.6569 10 10C10 8.34315 8.65685 7 7 7ZM6 10C6 9.44772 6.44772 9 7 9C7.55228 9 8 9.44772 8 10C8 10.5523 7.55228 11 7 11C6.44772 11 6 10.5523 6 10Z\"\r\n                    fill=\"currentColor\"\r\n                />\r\n                <path\r\n                    fill-rule=\"evenodd\"\r\n                    clip-rule=\"evenodd\"\r\n                    d=\"M3 3C1.34315 3 0 4.34315 0 6V18C0 19.6569 1.34315 21 3 21H21C22.6569 21 24 19.6569 24 18V6C24 4.34315 22.6569 3 21 3H3ZM21 5H3C2.44772 5 2 5.44772 2 6V18C2 18.5523 2.44772 19 3 19H7.31374L14.1924 12.1214C15.364 10.9498 17.2635 10.9498 18.435 12.1214L22 15.6863V6C22 5.44772 21.5523 5 21 5ZM21 19H10.1422L15.6066 13.5356C15.9971 13.145 16.6303 13.145 17.0208 13.5356L21.907 18.4217C21.7479 18.7633 21.4016 19 21 19Z\"\r\n                    fill=\"currentColor\"\r\n                />\r\n            </svg>\r\n            `,\r\n            title: 'Image'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else{\r\n                this.#selectedFile.click();\r\n                this.#selectedFile.onchange = ()=> {\r\n                    //let url = URL.createObjectURL(this.#selectedFile.files[0])\r\n                    this.toolHandler.toolButton.dataset.tool_status = 'active';\r\n                }\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n            .${this.toolHandler.defaultClass} {\r\n                position: relative;\r\n            }\r\n            .${this.#defaultStyle.id}.css-gg-image-icon {\r\n                zoom:120%;\r\n            }\r\n            .${this.#defaultStyle.id}.image-description{            \r\n                cursor: pointer;\r\n                display: inline-flex;\r\n                align-items: center;\r\n            }\r\n\r\n            .${this.#defaultStyle.id}.image-description::after{\r\n                margin-left: 0.5em;\r\n                content: ' ['attr(data-file_name)'] 'attr(data-open_status);\r\n                font-size: small;\r\n                color: #bdbdbd;\r\n            }\r\n\r\n            .${this.#defaultStyle.id}.image-contanier{\r\n                width: fit-content;\r\n                transition: height 0.5s ease-in-out;\r\n                overflow: hidden;\r\n                position: relative;\r\n            }\r\n            .${this.#defaultStyle.id}.image-contanier img{\r\n                max-width: 100%;\r\n                height: auto;\r\n                aspect-ratio: attr(width) / attr(height);\r\n                image-rendering: auto;\r\n            }\r\n        ` \r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n    static get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n    #file;\r\n\r\n    imgLoadEndCallback = (event) => {};\r\n\r\n    image = document.createElement('img');\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Image, dataset, {deleteOption : FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE});\r\n        \r\n        if( ! dataset && Object.keys(this.dataset).length == 0){\r\n            this.#file = Image.selectedFile.cloneNode(true);\r\n            Image.selectedFile.files = new DataTransfer().files;\r\n            \r\n            this.dataset.url = URL.createObjectURL(this.#file.files[0]);\r\n            this.dataset.name = this.#file.files[0].name;\r\n            this.dataset.last_modified = this.#file.files[0].lastModified;\r\n            this.dataset.size = this.#file.files[0].size;\r\n            this.dataset.content_type = this.#file.files[0].type;\r\n\r\n            let url = URL.createObjectURL(this.#file.files[0], this.dataset.content_type);\r\n            this.dataset.url = url;\r\n            this.image.type = this.dataset.content_type;\r\n            this.image.src = this.dataset.url;\r\n            /*fetch(this.dataset.url).then(res=>res.blob()).then(blob => {\r\n                const reader = new FileReader();\r\n                reader.readAsDataURL(blob);\r\n                reader.onloadend = () => {\r\n                    this.dataset.base64 = reader.result;\r\n                }\r\n            })*/\r\n            \r\n        }else if(( ! this.dataset.url || this.dataset.url.startsWith('blob:file')) && this.dataset.base64){\r\n            fetch(this.dataset.base64)\r\n            .then(async res=>{\r\n                return res.blob().then(blob=>{\r\n                    let imgUrl = URL.createObjectURL(blob, res.headers.get('Content-Type'))\r\n                    this.dataset.url = imgUrl;\r\n                    this.image.src = this.dataset.url;\r\n                })\r\n            })\r\n        }else if(Image.customImageCallback && typeof Image.customImageCallback == 'function'){\r\n            Image.customImageCallback(this);\r\n        }else if(this.dataset.url){\r\n            this.image.src = this.dataset.url;\r\n        }\r\n\r\n        if(! this.dataset.name){\r\n            this.remove();\r\n            throw new Error(`this file is undefined ${this.dataset.name}`);\r\n        }\r\n        \r\n        this.attachShadow({ mode : 'open' });\r\n        this.shadowRoot.append(Image.defaultStyle.cloneNode(true));\r\n        \r\n        this.createDefaultContent().then(({wrap, description, slot, aticle})=>{\r\n            this.connectedChildAfterCallback = (addedList) => {\r\n                aticle.append(...addedList);\r\n            }\r\n        });\r\n        \r\n        this.disconnectedAfterCallback = () => {\r\n            if(this.dataset.url.startsWith('blob:file')){\r\n                setTimeout(() => {\r\n                    URL.revokeObjectURL(this.dataset.url);\r\n                }, 1000 * 60 * 2)\r\n            }\r\n        }\r\n\t}\r\n\r\n    createDefaultContent(){\r\n        return new Promise(resolve=>{\r\n            let wrap = Object.assign(document.createElement('div'),{\r\n\r\n            });\r\n            wrap.draggable = false\r\n\r\n            this.shadowRoot.append(wrap);\r\n\r\n            let imageContanier = Object.assign(document.createElement('div'),{\r\n                className: `${Image.defaultStyle.id} image-contanier`\r\n            });\r\n\r\n            /*let image = Object.assign(document.createElement('img'), {\r\n                //src :`https://developer.mozilla.org/pimg/aHR0cHM6Ly9zLnprY2RuLm5ldC9BZHZlcnRpc2Vycy9iMGQ2NDQyZTkyYWM0ZDlhYjkwODFlMDRiYjZiY2YwOS5wbmc%3D.PJLnFds93tY9Ie%2BJ%2BaukmmFGR%2FvKdGU54UJJ27KTYSw%3D`\r\n                //src: this.dataset.url\r\n                //src: imgUrl\r\n            });*/\r\n\r\n            //if(this.#selectedFile.files.length != 0){\r\n            this.image.dataset.image_name = this.dataset.name\r\n            //}\r\n\r\n            imageContanier.append(this.image);\r\n\r\n            this.image.onload = () => {\r\n                if(this.dataset.width){\r\n                    this.image.width = this.dataset.width;\r\n                }\r\n                /*let applyToolAfterSelection = window.getSelection(), range = applyToolAfterSelection.getRangeAt(0);\r\n                let scrollTarget;\r\n                if(range.endContainer.nodeType == Node.TEXT_NODE){\r\n                    scrollTarget = range.endContainer.parentElement\r\n                }else{\r\n                    scrollTarget = range.endContainer;\r\n                }\r\n                scrollTarget.scrollIntoView({ behavior: \"instant\", block: \"end\", inline: \"nearest\" });\r\n                */\r\n            //this.imgLoadEndCallback();\r\n                //imageContanier.style.height = window.getComputedStyle(image).height;\r\n            }\r\n            this.image.onerror = () => {\r\n                //imageContanier.style.height = window.getComputedStyle(image).height;\r\n                this.image.dataset.error = '';\r\n            }\r\n\r\n            let {description, slot, aticle} = this.createDescription(this.image, imageContanier);\r\n\r\n            this.connectedAfterOnlyOneCallback = () => {\r\n                if(this.childNodes.length != 0 && this.childNodes[0]?.tagName != 'BR'){\r\n                    aticle.append(...[...this.childNodes].filter(e=>e!=aticle));\r\n                }\r\n                wrap.replaceChildren(...[description,imageContanier].filter(e=>e != undefined));\r\n                \r\n                Image.imageBox.addImageHoverEvent(this.image, this);\r\n                if(this.nextSibling?.tagName == 'BR'){\r\n                    this.nextSibling.remove()\r\n                }\r\n\r\n                resolve({wrap, description, slot, aticle})\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLImageElement} image \r\n     * @param {HTMLDivElement} imageContanier \r\n     * @returns {HTMLDivElement}\r\n     */\r\n    createDescription(image, imageContanier){\r\n        let description = Object.assign(document.createElement('div'),{\r\n            className: `${Image.defaultStyle.id} image-description`\r\n        });\r\n\r\n        description.dataset.file_name = this.dataset.name\r\n        description.dataset.open_status = this.dataset.open_status || ''; // '';\r\n        imageContanier.style.height = this.dataset.height || 'auto'\r\n        \r\n        let {slot, aticle} = this.createSlot();\r\n        \r\n        description.append(slot)\r\n\r\n        description.onclick = (event) => {\r\n            if(description.dataset.open_status == ''){\r\n                description.dataset.open_status = ''\r\n                imageContanier.style.height = window.getComputedStyle(image).height;\r\n                setTimeout(()=>{\r\n                    imageContanier.style.height = '0px';\r\n                    this.dataset.height = '0px';\r\n                },100)\r\n\r\n            }else{\r\n                description.dataset.open_status = '';\r\n                setTimeout(()=>{\r\n                    imageContanier.style.height = window.getComputedStyle(image).height;\r\n                    this.dataset.height = 'auto'\r\n                },100)\r\n                \r\n                image.style.opacity = '';\r\n                image.style.visibility = '';\r\n            }\r\n            this.dataset.open_status = description.dataset.open_status;\r\n        }\r\n\r\n        imageContanier.ontransitionend = () => {\r\n            if(description.dataset.open_status == ''){\r\n                imageContanier.style.height = 'auto';\r\n            }else{\r\n                image.style.opacity = 0;\r\n                image.style.visibility = 'hidden';\r\n            }\r\n        }\r\n\r\n        return {description, slot, aticle};\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @returns {HTMLSlotElement}\r\n     */\r\n    createSlot(){\r\n        let aticle = document.createElement('div');\r\n        \r\n        aticle.contentEditable = 'false';\r\n        aticle.draggable = 'false'; \r\n\r\n        //if(this.childNodes.length != 0 && this.childNodes[0]?.tagName != 'BR'){\r\n            let randomId = Array.from(\r\n                window.crypto.getRandomValues(new Uint32Array(16)),\r\n                (e)=>e.toString(32).padStart(2, '0')\r\n            ).join('');\r\n            //aticle.append(...[...this.childNodes].map(e=>e.cloneNode(true)));\r\n            aticle.append(...this.childNodes);\r\n            aticle.slot = Image.slotName + '-' + randomId\r\n            this.append(aticle);\r\n            \r\n            let slot = Object.assign(document.createElement('slot'),{\r\n                name: Image.slotName + '-' + randomId\r\n            });\r\n            return {slot, aticle};\r\n        //}else{\r\n        //    return undefined\r\n        //}\r\n\r\n    }\r\n    /**\r\n     * @returns {HTMLInputElement}\r\n     */\r\n    get selectedFile(){\r\n        return this.#file\r\n    }\r\n}\r\n","import FreedomInterface from \"../module/FreedomInterface\"\r\n\r\nexport default class VideoBox {\r\n    \r\n    #style = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-video-box'\r\n\t});\r\n\r\n    #videoBox = Object.assign(document.createElement('div'), {\r\n        className: 'video-box-wrap',\r\n        \r\n        innerHTML:`\r\n            <div class=\"video-resize-container\">\r\n                <div>\r\n                    <label class=\"video-box-resize-label\" for=\"video-box-resize-width\">width : </label>\r\n                    <input list=\"video-box-resize-datalist\" class=\"video-box-resize-input\" id=\"video-box-resize-width\" type=\"number\" autocomplete=\"off\"/>\r\n                    <div>\r\n                        <label class=\"video-box-resize-label-error-message\" for=\"video-box-resize-width\"></label>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <label class=\"video-box-resize-label\" for=\"video-box-resize-height\">height(auto) : </label>\r\n                    <input list=\"video-box-resize-datalist\" class=\"video-box-resize-input\" id=\"video-box-resize-height\" type=\"number\" autocomplete=\"off\" disabled/>\r\n                </div>\r\n            </div>\r\n            <div class=\"video-key-description-container\" style=\"display:none;\">\r\n                <kbd>Ctrl</kbd><kbd>Wheel</kbd>OR<kbd>Shift</kbd><kbd>Wheel</kbd>\r\n            </div>\r\n            <div class=\"video-button-container\">\r\n                <a href=\"javascript:void(0);\" class=\"download\" download>\r\n                    <svg style=\"zoom:140%;\" class=\"download-css-gg-push-down\"\r\n                        width=\"1rem\"\r\n                        height=\"1rem\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                    >\r\n                        <path\r\n                        d=\"M11.0001 1H13.0001V15.4853L16.2428 12.2427L17.657 13.6569L12.0001 19.3137L6.34326 13.6569L7.75748 12.2427L11.0001 15.4853V1Z\"\r\n                        fill=\"#00000073\"\r\n                        />\r\n                        <path d=\"M18 20.2877H6V22.2877H18V20.2877Z\" fill=\"#00000073\" />\r\n                    </svg>\r\n                </a>\r\n                <a href=\"javascript:void(0);\" class=\"new-window\">\r\n                    <svg style=\"zoom: 150%;\" class=\"new-window-css-gg-expand\"\r\n                        width=\"1rem\"\r\n                        height=\"1rem\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                    >\r\n                        <path\r\n                        d=\"M12.3062 16.5933L12.2713 18.593L5.2724 18.4708L5.39457 11.4719L7.39426 11.5068L7.33168 15.092L15.2262 7.46833L11.6938 7.40668L11.7287 5.40698L18.7277 5.52915L18.6055 12.5281L16.6058 12.4932L16.6693 8.85507L8.72095 16.5307L12.3062 16.5933Z\"\r\n                        fill=\"#00000073\"\r\n                        />\r\n                    </svg>\r\n                </a>\r\n            </div>\r\n        `\r\n        /*     20230821 <i class=\"download-css-gg-push-down\"></i>\r\n        innerHTML: `\r\n            <div class=\"video-resize-container\">\r\n                <div>\r\n                    <label class=\"video-box-resize-label\" for=\"video-box-resize-width\">width : </label>\r\n                    <input list=\"video-box-resize-datalist\" class=\"video-box-resize-input\" id=\"video-box-resize-width\" type=\"number\" autocomplete=\"off\"/>\r\n                </div>\r\n                <div>\r\n                    <label class=\"video-box-resize-label\" for=\"video-box-resize-height\">height(auto) : </label>\r\n                    <input list=\"video-box-resize-datalist\" class=\"video-box-resize-input\" id=\"video-box-resize-height\" type=\"number\" autocomplete=\"off\" disabled/>\r\n                </div>\r\n            </div>\r\n            <div class=\"video-button-container\">\r\n                <a href=\"javascript:void(0);\" class=\"download-css-gg-push-down\" download></a>\r\n                <a href=\"javascript:void(0);\" class=\"new-window-css-gg-path-trim\"></a>\r\n            </div>\r\n        `\r\n        */\r\n    });\r\n    /*\r\n    #removeEventPromiseResolve;\r\n    #removeEventPromise = new Promise(resolve=>{\r\n\t\tthis.#removeEventPromiseResolve = resolve;\r\n\t});\r\n    */\r\n    #video;\r\n    #resizeRememberTarget;\r\n\r\n    constructor(){\r\n        let style = document.querySelector(`#${this.#style.id}`);\r\n        if(! style){\r\n            document.head.append(this.createStyle());\r\n        }else{\r\n            this.#style = style;\r\n        }\r\n        document.addEventListener('keydown',(event)=>{\r\n            if(this.#videoBox.hasAttribute('data-is_shft')){\r\n                return;\r\n            }\r\n            let {key} = event;\r\n            if(key === 'Shift'){\r\n                this.#videoBox.dataset.is_shft = '';\r\n            }\r\n        })\r\n\r\n        document.addEventListener('keyup', (event)=>{\r\n            if( ! this.#videoBox.hasAttribute('data-is_shft')){\r\n                return;\r\n            }    \r\n            let {key} = event;\r\n            if(key === 'Shift'){\r\n                this.#videoBox.removeAttribute('data-is_shft');\r\n            }\r\n        })\r\n        \r\n        this.#videoBox.addEventListener('wheel', (event) => {\r\n            if(this.#videoBox.hasAttribute('data-is_shft')){\r\n                return;\r\n            }\r\n            //event.preventDefault();\r\n            let {deltaY} = event;\r\n            \r\n            this.#videoBox.scrollTo(\r\n                this.#videoBox.scrollLeft + deltaY, undefined\r\n            );\r\n        }, {passive: true});\r\n        let [width, height] = this.#videoBox.querySelectorAll('#video-box-resize-width, #video-box-resize-height');\r\n        \r\n        window.addEventListener('keyup', (event) => {\r\n            if( ! this.video || ! this.resizeRememberTarget || ! width.hasAttribute('data-is_ctrl') || ! this.video.parentElement.matches(':hover')){//|| this.video.getRootNode()?.activeElement != width){\r\n                return;\r\n            }\r\n            width.removeAttribute('data-is_ctrl');\r\n        })\r\n\r\n        window.addEventListener('keydown', (event) => {\r\n            \r\n            let eventPath = event.composedPath()\r\n\r\n            if( ! this.video || ! this.resizeRememberTarget || eventPath[0] == width || ! this.video.parentElement.matches(':hover')){//|| this.video.getRootNode()?.activeElement != width){\r\n                return;\r\n            }\r\n            if(event.ctrlKey){\r\n                width.dataset.is_ctrl = '';\r\n            }else{\r\n                width.removeAttribute('data-is_ctrl');\r\n            }\r\n        })\r\n        \r\n        /**\r\n         * @see https://www.chromestatus.com/feature/6662647093133312\r\n         */\r\n        window.addEventListener('wheel', (event) => {\r\n\r\n            if( ! this.video || ! this.resizeRememberTarget || ! this.video.parentElement.hasAttribute('data-is_resize_click') || event.composedPath()[0] == width || ! this.video.parentElement.matches(':hover')){// || this.video.getRootNode()?.activeElement != width){\r\n                return;\r\n            }\r\n            if(width.hasAttribute('data-is_ctrl')){\r\n                width.value = Number(width.value) + (event.deltaY * -1)\r\n            }else{\r\n                width.value = Number(width.value) + ((event.deltaY * -1) / 100)\r\n            }\r\n            this.oninputEvent(this.video, width, height, this.resizeRememberTarget);\r\n            \r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLVideoElement} video \r\n     */\r\n    addVideoHoverEvent(video, resizeRememberTarget){\r\n        //video.parentElement.onmouseover = () => {\r\n        let keyDescription = this.#videoBox.querySelector('.video-key-description-container')\r\n        video.parentElement.onmouseenter = () => {\r\n            if(! video.src || video.src == '' || video.hasAttribute('data-error')){\r\n                return;\r\n            }\r\n            let root = video.getRootNode();\r\n            if(root != document){\r\n                root.append(this.#style);\r\n            }else{\r\n                document.head.append(this.#style);\r\n            }\r\n\r\n            if(video.parentElement && (video.parentElement !== this.#videoBox.parentElement || ! this.#videoBox.classList.contains('start'))){\r\n                video.parentElement.append(this.#videoBox);\r\n\r\n                this.#addRresizeEvent(video, resizeRememberTarget)\r\n                this.#addButtonIconEvent(video)\r\n                let appendAwait = setInterval(()=>{\r\n                    if(this.#videoBox.isConnected && video.readyState == 4 && video.parentElement === this.#videoBox.parentElement && ! this.#videoBox.classList.contains('start')){\r\n                        this.#videoBox.classList.add('start');\r\n                        this.video = video;\r\n                        this.resizeRememberTarget = resizeRememberTarget;\r\n                        video.parentElement.onclick = (event) => {\r\n                            if(! video.src || video.src == '' || event.composedPath()[0] != video || video.hasAttribute('data-error')){\r\n                                return;\r\n                            }\r\n                            video.parentElement.toggleAttribute('data-is_resize_click');\r\n                            this.falsh(video.parentElement);\r\n                            if(video.parentElement.hasAttribute('data-is_resize_click')){\r\n                                keyDescription.style.display = '';\r\n                            }else {\r\n                                keyDescription.style.display = 'none';\r\n                            }\r\n                        }\r\n                        clearInterval(appendAwait);\r\n                    }\r\n                }, 50)\r\n            }\r\n        }\r\n        video.parentElement.onmouseleave = () => {\r\n            this.#videoBox.classList.remove('start');\r\n            if(video.parentElement.hasAttribute('data-is_resize_click')){\r\n                keyDescription.style.display = 'none';\r\n                this.falsh(video.parentElement);\r\n            }\r\n            video.parentElement.removeAttribute('data-is_resize_click');\r\n            /*if(this.#videoBox.isConnected && video.parentElement === this.#videoBox.parentElement){\r\n                \r\n                this.#videoBox.classList.remove('start');\r\n                this.#videoBox.ontransitionend = () => {\r\n                    if(this.#videoBox.isConnected){\r\n                        this.#videoBox.remove();\r\n                    }\r\n                }\r\n                \r\n            }*/\r\n        }\r\n    }\r\n\r\n    falsh(target){\r\n        return new Promise(resolve => {\r\n            let flash = document.createElement('div');\r\n            Object.assign(flash.style, {\r\n                position: 'absolute',top: '0px',left: '0px',\r\n                width: '100%',height: '100%', background: 'rgba(255, 255, 255, 0.4)',\r\n                transition: 'opacity 0.2s ease 0s', opacity: 0\r\n            })\r\n            target.append(flash);\r\n            let flashAwait = setInterval(()=>{\r\n                if( ! flash.isConnected){\r\n                    return; \r\n                }\r\n                clearInterval(flashAwait);\r\n                flash.style.opacity = 1;\r\n                flash.ontransitionend = () => {\r\n                    flash.style.opacity = 0;\r\n                    flash.ontransitionend = () => {\r\n                        flash.remove();\r\n                        resolve();\r\n                    }\r\n                }\r\n            }, 50)\r\n        });\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLVideoElement} video \r\n     */\r\n    //     20230821\r\n    #addRresizeEvent(video, resizeRememberTarget){\r\n        return new Promise(resolve => {\r\n            let [width, height] = this.#videoBox.querySelectorAll('#video-box-resize-width, #video-box-resize-height');\r\n            let rect = video.getBoundingClientRect();\r\n            width.value = parseInt(rect.width), height.value = parseInt(rect.height);\r\n            \r\n            width.labels[0].textContent = 'width : ';\r\n            width.labels[1].textContent = '';\r\n\r\n            this.prevValue = undefined;\r\n\r\n            width.oninput = (event) => this.oninputEvent(video, width, height, resizeRememberTarget);\r\n            width.onkeydown = (event) => {\r\n                if(event.ctrlKey){\r\n                    width.dataset.is_ctrl = '';\r\n                }else{\r\n                    width.removeAttribute('data-is_ctrl');\r\n                }\r\n            }\r\n            width.onkeyup = (event) => {\r\n                width.removeAttribute('data-is_ctrl');\r\n            }\r\n            width.onblur = () => {\r\n                width.removeAttribute('data-is_ctrl');\r\n            }\r\n            width.onwheel = (event) => {\r\n                event.preventDefault();\r\n                if(width.hasAttribute('data-is_ctrl')){\r\n                    width.value = Number(width.value) + (event.deltaY * -1)\r\n                }else{\r\n                    width.value = Number(width.value) + ((event.deltaY * -1) / 100)\r\n                }\r\n\r\n                this.oninputEvent(video, width, height, resizeRememberTarget);\r\n            }\r\n            //height.oninput = (event) => oninputEvent(event);\r\n            resolve({width, height});\r\n        });\r\n    }\r\n    oninputEvent(video, width, height, resizeRememberTarget) {\r\n        if(isNaN(Number(width.value))){\r\n            width.value = width.value.replace(/\\D/g, '');\r\n            return;\r\n        }else if(Number(width.value) < 50){\r\n            width.labels[1].textContent = '(min 50)';\r\n            width.value = 50;\r\n        }else{\r\n            width.labels[1].textContent = '';\r\n        }\r\n        let sizeName = width.id.includes('width') ? 'width': 'height';\r\n        video[sizeName] = width.value;\r\n\r\n        let videoRect = video.getBoundingClientRect();\r\n\r\n        if(this.prevValue && parseInt(this.prevValue) == parseInt(videoRect.width)){\r\n            width.value = parseInt(this.prevValue);\r\n            width.labels[1].textContent = `(max ${parseInt(this.prevValue)}) : `\r\n        }\r\n        this.prevValue = videoRect.width\r\n\r\n        resizeRememberTarget.dataset.width = width.value;\r\n    }\r\n    #addButtonIconEvent(video){\r\n        return new Promise(resolve => {\r\n            let [download, newWindow] = [...this.#videoBox.querySelectorAll('.download-css-gg-push-down, .new-window-css-gg-expand')]\r\n                .map(e=>e.parentElement)\r\n            download.href = video.src, newWindow.href = video.src;\r\n            download.download = video.dataset.video_name;\r\n            newWindow.target = '_blank';\r\n            resolve({download, newWindow});\r\n        })\r\n    }\r\n\r\n    get videoBox(){\r\n        return this.#videoBox;\r\n    }\r\n\r\n\tget style(){\r\n\t\treturn this.#style;\r\n\t}\r\n\r\n\tset style(style){\r\n        this.#style.textContent = style;\r\n    }\r\n\r\n\tset insertStyle(style){\r\n\t\tthis.#style.sheet.insertRule(style);\r\n\t}\r\n    \r\n    set video(video){\r\n        this.#video = video; \r\n    }\r\n\r\n    get video(){\r\n        return this.#video;\r\n    }\r\n    set resizeRememberTarget(resizeRememberTarget){\r\n        this.#resizeRememberTarget = resizeRememberTarget;\r\n    }\r\n    get resizeRememberTarget(){\r\n        return this.#resizeRememberTarget;\r\n    }\r\n\r\n    createStyle(){\r\n        this.#style.textContent = `\r\n            .video-box-wrap{\r\n                position: absolute;\r\n                display: flex;\r\n                justify-content: space-between;\r\n                width: 100%;\r\n                background: linear-gradient(to bottom, #ff8787 -73%, #ffffffcf 115%);\r\n                color: white;\r\n                top:-20%;\r\n                opacity: 0;\r\n                transition: all 1s;\r\n                white-space: nowrap;\r\n                overflow-y: clip;\r\n                overflow-x: auto;\r\n            }\r\n            .video-box-wrap::-webkit-scrollbar{\r\n                display: none;\r\n            }\r\n            .video-box-wrap:hover::-webkit-scrollbar{\r\n                display: initial;\r\n                width: 7px;\r\n                height: 7px;\r\n            }\r\n            .video-box-wrap:hover::-webkit-scrollbar-track{\r\n                background: #00000040;\r\n                border-radius: 100px;\r\n                box-shadow: inset 0 0 5px #000000fc;\r\n            }\r\n            .video-box-wrap:hover::-webkit-scrollbar-thumb {\r\n                background: #0c0c0c38;\r\n                border-radius: 100px;\r\n                box-shadow: inset 0 0 5px #000000;\r\n            }\r\n            .video-box-wrap:hover::-webkit-scrollbar-thumb:hover {\r\n                /*background: #44070757;*/\r\n                background: #34000075; \r\n            }\r\n            .video-box-wrap.start{\r\n                top: 0;\r\n                opacity: 1;\r\n                transition: all 0.5s;\r\n            }\r\n            .video-box-wrap .video-button-container, \r\n            .video-box-wrap .video-resize-container,\r\n            .video-box-wrap .video-key-description-container{\r\n                display: flex;\r\n                gap: 1.5vw;\r\n                padding: 1.7%;\r\n                align-items: center;\r\n            }\r\n            .video-box-wrap .video-resize-container .video-box-resize-label{\r\n                background: linear-gradient(to right, #e50bff, #004eff);\r\n                -webkit-background-clip: text;\r\n                -webkit-text-fill-color: transparent;\r\n            }\r\n            .video-box-wrap .video-resize-container .video-box-resize-input{\r\n                outline: none;\r\n                border: none;\r\n                background-image: linear-gradient(#fff1f1d4, #ffffffeb), linear-gradient(to right, #a189890d 0%,  #ed89b275 100%);\r\n                background-origin: border-box;\r\n                background-clip: content-box, border-box;\r\n                background-color: #00000000; \r\n                width: 3.2rem;\r\n                height: 100%;\r\n                color: #ffb6b6;\r\n                font-size: 0.9rem;\r\n                text-align: center;\r\n            }\r\n            .video-box-wrap .video-button-container .new-window,\r\n            .video-box-wrap .video-button-container .download{\r\n                display: flex;\r\n                align-items: center;\r\n                border: none;\r\n                background:none;\r\n                position:relative;\r\n                cursor: pointer;\r\n            }\r\n\r\n            .video-box-wrap kbd {\r\n                background-color: #eee;\r\n                border-radius: 3px;\r\n                border: 1px solid #b4b4b4;\r\n                box-shadow:\r\n                0 1px 1px rgba(0, 0, 0, 0.2),\r\n                0 2px 0 0 rgba(255, 255, 255, 0.7) inset;\r\n                color: #333;\r\n                display: inline-block;\r\n                font-size: 0.85em;\r\n                font-weight: 700;\r\n                line-height: 1;\r\n                padding: 2px 4px;\r\n                white-space: nowrap;\r\n                height: fit-content;\r\n            }\r\n        `\r\n        return this.#style;\r\n    }\r\n\r\n}","\r\nimport FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport VideoBox from \"../component/VideoBox\"\r\nexport default class Video extends FreedomInterface {\r\n\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n    static videoBox = new VideoBox();\r\n\r\n    static customVideoCallback;\r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-video-style'\r\n\t});\r\n\r\n    static descriptionName = 'free-will-editor-video-description-slot';\r\n\r\n    static #selectedFile = Object.assign(document.createElement('input'), {\r\n        type: 'file',\r\n        accept: 'video/*'\r\n    });\r\n\r\n    static get selectedFile(){\r\n        return this.#selectedFile;\r\n    }\r\n    static isDefaultStyle = true;\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-video';\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: '',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n            innerHTML: `\r\n            <svg class=\"${this.#defaultStyle.id} css-gg-video-icon\"\r\n            width=\"0.9rem\"\r\n            height=\"0.9rem\"\r\n            viewBox=\"0 0 24 24\"\r\n            fill=\"none\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            >\r\n                <path\r\n                    fill-rule=\"evenodd\"\r\n                    clip-rule=\"evenodd\"\r\n                    d=\"M4 4.5V6.5H12V7.5H3C1.34315 7.5 0 8.84315 0 10.5V16.5C0 18.1569 1.34315 19.5 3 19.5H15C16.5731 19.5 17.8634 18.2892 17.9898 16.7487L24 17.5V9.5L17.9898 10.2513C17.8634 8.71078 16.5731 7.5 15 7.5H14V5.5C14 4.94772 13.5523 4.5 13 4.5H4ZM18 12.2656V14.7344L22 15.2344V11.7656L18 12.2656ZM16 10.5C16 9.94772 15.5523 9.5 15 9.5H3C2.44772 9.5 2 9.94772 2 10.5V16.5C2 17.0523 2.44772 17.5 3 17.5H15C15.5523 17.5 16 17.0523 16 16.5V10.5Z\"\r\n                    fill=\"currentColor\"\r\n                />\r\n            </svg>\r\n            `,\r\n            title: 'Video'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else{\r\n                this.#selectedFile.onchange = ()=> {\r\n                    //let url = URL.createObjectURL(this.#selectedFile.files[0])\r\n                    this.toolHandler.toolButton.dataset.tool_status = 'active';\r\n                }\r\n                this.#selectedFile.click();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n            .${this.toolHandler.defaultClass} {\r\n                position: relative;\r\n            }\r\n            .${this.#defaultStyle.id}.css-gg-video-icon {\r\n                zoom:120%;\r\n            }\r\n            .${this.#defaultStyle.id}.video-description{            \r\n                cursor: pointer;\r\n                display: inline-flex;\r\n                align-items: center;\r\n            }\r\n            .${this.#defaultStyle.id}.video-description::after{\r\n                margin-left: 0.5em;\r\n                content: ' ['attr(data-file_name)'] 'attr(data-open_status);\r\n                font-size: small;\r\n                color: #bdbdbd;\r\n            }\r\n\r\n            .${this.#defaultStyle.id}.video-contanier{\r\n                width: fit-content;\r\n                transition: height 0.5s ease-in-out;\r\n                overflow: hidden;\r\n                position: relative;\r\n            }\r\n            .${this.#defaultStyle.id}.video-contanier video{\r\n                max-width: 100%;\r\n                height: auto;\r\n                aspect-ratio: attr(width) / attr(height);\r\n            }\r\n        `\r\n        let defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n    static get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n    \r\n\r\n    #file;\r\n\r\n    videoLoadEndCallback = (event) => {};\r\n\r\n    video = Object.assign(document.createElement('video'), {\r\n        loop: true,\r\n        controls: true\r\n    });\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Video, dataset, {deleteOption : FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE});\r\n\r\n\t\tif( ! dataset && Object.entries(this.dataset).length == 0){\r\n            this.#file = Video.selectedFile.cloneNode(true);\r\n            Video.selectedFile.files = new DataTransfer().files;\r\n            \r\n            this.dataset.url = URL.createObjectURL(this.#file.files[0]);\r\n            this.dataset.name = this.#file.files[0].name;\r\n            this.dataset.lastModified = this.#file.files[0].lastModified;\r\n            this.dataset.size = this.#file.files[0].size;\r\n            this.dataset.content_type = this.#file.files[0].type;\r\n\r\n            let url = URL.createObjectURL(this.#file.files[0], this.dataset.content_type);\r\n            this.dataset.url = url;\r\n            this.video.type = this.dataset.content_type;\r\n            this.video.src = this.dataset.url;\r\n            /*fetch(this.dataset.url).then(res=>res.blob()).then(blob => {\r\n                const reader = new FileReader();\r\n                reader.readAsDataURL(blob);\r\n                reader.onloadend = () => {\r\n                    this.dataset.base64 = reader.result;\r\n                }\r\n            })*/\r\n            \r\n        }else if(( ! this.dataset.url || this.dataset.url.startsWith('blob:file')) && this.dataset.base64){\r\n            fetch(this.dataset.base64)\r\n            .then(async res=>{\r\n                return res.blob().then(blob=>{\r\n                    let videoUrl = URL.createObjectURL(blob, res.headers.get('Content-Type'))\r\n                    this.dataset.url = videoUrl;\r\n                    this.video.src = this.dataset.url;\r\n                })\r\n            })\r\n        }else if(Video.customVideoCallback && typeof Video.customVideoCallback == 'function'){\r\n            Video.customVideoCallback(this);\r\n        }else if(this.dataset.url){\r\n            this.video.src = this.dataset.url;\r\n        }\r\n\r\n        if(! this.dataset.name){\r\n            this.remove();\r\n            throw new Error(`this file is undefined ${this.dataset.name}`);\r\n        }\r\n\r\n        this.attachShadow({ mode : 'open' });\r\n        this.shadowRoot.append(Video.defaultStyle.cloneNode(true));\r\n\r\n        this.createDefaultContent().then(({wrap, description, slot, aticle})=>{\r\n            this.connectedChildAfterCallback = (addedList) => {\r\n                aticle.append(...addedList);\r\n            }\r\n        });\r\n\r\n        this.disconnectedAfterCallback = () => {\r\n            if(this.dataset.url.startsWith('blob:file')){\r\n                setTimeout(() => {\r\n                    URL.revokeObjectURL(this.dataset.url);\r\n                }, 1000 * 60 * 2)\r\n            }\r\n        }\r\n\t}\r\n\r\n    createDefaultContent(){\r\n        return new Promise(resolve=>{\r\n            let wrap = Object.assign(document.createElement('div'),{\r\n\r\n            });\r\n            wrap.draggable = false\r\n\r\n            this.shadowRoot.append(wrap);\r\n\r\n            let videoContanier = Object.assign(document.createElement('div'),{\r\n                className: `${Video.defaultStyle.id} video-contanier`\r\n            });\r\n\r\n            this.video.dataset.video_name = this.dataset.name\r\n\r\n            videoContanier.append(this.video);\r\n            this.video.onload = () => {\r\n                if(\r\n                    (this.file.length != 0 && video.canPlayType(this.file.files[0].type) == '') ||\r\n                    (\r\n                        this.dataset.name && \r\n                        this.video.canPlayType(\r\n                            `video/${this.dataset.name.substring(this.dataset.name.lastIndexOf('.') + 1)}`\r\n                        ) == ''\r\n                    )\r\n                ){\r\n                    this.videoIsNotWorking();\r\n                }\r\n            }\r\n            this.video.onloadeddata = () => {\r\n                //videoContanier.style.height = window.getComputedStyle(video).height;\r\n                /*let applyToolAfterSelection = window.getSelection(), range = applyToolAfterSelection.getRangeAt(0);\r\n                let scrollTarget;\r\n                if(range.endContainer.nodeType == Node.TEXT_NODE){\r\n                    scrollTarget = range.endContainer.parentElement\r\n                }else{\r\n                    scrollTarget = range.endContainer;\r\n                }\r\n                scrollTarget.scrollIntoView({ behavior: \"instant\", block: \"end\", inline: \"nearest\" });\r\n                */\r\n                this.video.play();\r\n                if(this.dataset.width){\r\n                    this.video.width = this.dataset.width;\r\n                }\r\n            }\r\n            this.video.onerror = () => {\r\n                //videoContanier.style.height = window.getComputedStyle(video).height;\r\n            }\r\n\r\n            let {description, slot, aticle} = this.createDescription(this.video, videoContanier);\r\n\r\n            this.connectedAfterOnlyOneCallback = () => {\r\n                if(this.childNodes.length != 0 && this.childNodes[0]?.tagName != 'BR'){\r\n                    aticle.append(...[...this.childNodes].filter(e=>e!=aticle));\r\n                }\r\n                wrap.replaceChildren(...[description,videoContanier].filter(e=>e != undefined));\r\n                \r\n                Video.videoBox.addVideoHoverEvent(this.video, this);\r\n                if(this.nextSibling?.tagName == 'BR'){\r\n                    this.nextSibling.remove()\r\n                }\r\n\r\n                resolve({wrap, description, slot, aticle})\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLVideoElement} image \r\n     * @param {HTMLDivElement} imageContanier \r\n     * @returns {HTMLDivElement}\r\n     */\r\n    createDescription(video, videoContanier){\r\n        let description = Object.assign(document.createElement('div'), {\r\n            className : `${Video.defaultStyle.id} video-description`\r\n        });\r\n\r\n        description.dataset.file_name = this.dataset.name\r\n        description.dataset.open_status = this.dataset.open_status || ''\r\n        videoContanier.style.height = this.dataset.height || 'auto'\r\n\r\n        let {slot, aticle} = this.createSlot()\r\n        \r\n        if(slot){\r\n            description.append(slot);\r\n        }\r\n\r\n        description.onclick = (event) => {\r\n\r\n            if(description.dataset.open_status == ''){\r\n                description.dataset.open_status = ''\r\n                videoContanier.style.height = window.getComputedStyle(video).height;\r\n                setTimeout(()=>{\r\n                    videoContanier.style.height = '0px';\r\n                    this.dataset.height = '0px';\r\n                },100)\r\n\r\n            }else{\r\n                description.dataset.open_status = '';\r\n                setTimeout(()=>{\r\n                    videoContanier.style.height = window.getComputedStyle(video).height;\r\n                    this.dataset.height = 'auto';\r\n                },100)\r\n                \r\n                video.style.opacity = '';\r\n                video.style.visibility = '';\r\n            }\r\n\r\n            this.dataset.open_status = description.dataset.open_status;\r\n        }\r\n\r\n        videoContanier.ontransitionend = () => {\r\n            if(description.dataset.open_status == ''){\r\n                videoContanier.style.height = 'auto';\r\n            }else{\r\n                video.style.opacity = 0;\r\n                video.style.visibility = 'hidden';\r\n            }\r\n        }\r\n\r\n        return {description, slot, aticle};\r\n    }\r\n\r\n    createSlot(){\r\n        let aticle = document.createElement('div');\r\n        \r\n        aticle.contentEditable = 'false';\r\n        aticle.draggable = 'false';\r\n\r\n        //if(this.childNodes.length != 0 && this.childNodes[0]?.tagName != 'BR'){\r\n            let randomId = Array.from(\r\n                window.crypto.getRandomValues(new Uint32Array(16)),\r\n                (e)=>e.toString(32).padStart(2, '0')\r\n            ).join('');\r\n            //aticle.append(...[...this.childNodes].map(e=>e.cloneNode(true)));\r\n            aticle.append(...this.childNodes);\r\n            aticle.slot = Video.descriptionName + '-' + randomId;\r\n            this.append(aticle);\r\n            \r\n            let slot = Object.assign(document.createElement('slot'),{\r\n                name: Video.descriptionName + '-' + randomId\r\n            });\r\n\r\n            return {slot, aticle};\r\n        //}else{\r\n        //    return undefined;\r\n        //}\r\n    }\r\n\r\n    videoIsNotWorking(){\r\n        alert(`${this.dataset.name}   .`);\r\n        this.remove();\r\n    }\r\n\r\n    /**\r\n     * @returns {HTMLInputElement}\r\n     */\r\n    get selectedFile(){\r\n        return this.#file\r\n    }\r\n}\r\n","\r\nimport FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\n\r\nexport default class Resources extends FreedomInterface {\r\n\r\n\tstatic toolHandler = new ToolHandler(this);\r\n\r\n    static customResourcesCallback = () => {}; \r\n\r\n\tstatic #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-resources-style'\r\n\t});\r\n\r\n    static slotName = 'free-will-editor-resources-description-slot';\r\n\r\n    static #selectedFile = Object.assign(document.createElement('input'), {\r\n        type: 'file'\r\n    });\r\n\r\n    static get selectedFile(){\r\n        return this.#selectedFile;\r\n    }\r\n\r\n    static #resourcesCallback = () => {};\r\n\r\n    static #sizeLimitOverCallback = () => {};\r\n    static isDefaultStyle = true;\r\n\tstatic{\r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-resources';\r\n        //this.toolHandler.isInline = false;\r\n\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: '',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n            innerHTML: `\r\n            <svg class=\"${this.#defaultStyle.id} css-gg-file-add-icon\" width=\"0.9rem\" height=\"0.9rem\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path d=\"M10 18V16H8V14H10V12H12V14H14V16H12V18H10Z\" fill=\"currentColor\" />\r\n                <path\r\n                    fill-rule=\"evenodd\"\r\n                    clip-rule=\"evenodd\"\r\n                    d=\"M6 2C4.34315 2 3 3.34315 3 5V19C3 20.6569 4.34315 22 6 22H18C19.6569 22 21 20.6569 21 19V9C21 5.13401 17.866 2 14 2H6ZM6 4H13V9H19V19C19 19.5523 18.5523 20 18 20H6C5.44772 20 5 19.5523 5 19V5C5 4.44772 5.44772 4 6 4ZM15 4.10002C16.6113 4.4271 17.9413 5.52906 18.584 7H15V4.10002Z\"\r\n                    fill=\"currentColor\"\r\n                />\r\n            </svg>\r\n            `,\r\n            title: 'Resources'\r\n        });\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else{\r\n                this.#selectedFile.click();\r\n                this.#selectedFile.onchange = ()=> {\r\n                    //let url = URL.createObjectURL(this.#selectedFile.files[0])\r\n\r\n                    this.toolHandler.toolButton.dataset.tool_status = 'active';\r\n                }\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n            .${this.toolHandler.defaultClass} {\r\n                position: relative;\r\n            }\r\n            .${this.#defaultStyle.id}.css-gg-file-add-icon {\r\n                zoom:120%;\r\n            }\r\n            .${this.#defaultStyle.id}.resources-description{            \r\n                cursor: pointer;\r\n                display: inline-flex;\r\n                align-items: center;\r\n            }\r\n\r\n            .${this.#defaultStyle.id}.resources-description::after{\r\n                margin-left: 0.5em;\r\n                content: ' ['attr(data-file_name)'] 'attr(data-open_status);\r\n                font-size: small;\r\n                color: #bdbdbd;\r\n            }\r\n            .${this.#defaultStyle.id}.resources-download-button, .${this.#defaultStyle.id}.resources-preview-button{\r\n                margin-left: 1vw;\r\n                border: solid 2px #e5e5e5;\r\n                cursor: pointer;\r\n                background: none;\r\n            }\r\n            .${this.#defaultStyle.id}.resources-contanier{\r\n                width: auto;\r\n                transition: height 0.5s ease-in-out;\r\n                overflow: hidden;\r\n                position: relative;\r\n                margin-top: 0.7vh;\r\n            }\r\n            .${this.#defaultStyle.id}.resources-contanier object{\r\n                width: 99%;\r\n                height: auto;\r\n                aspect-ratio: attr(width) / attr(height);\r\n                border: solid 2px #efefef;\r\n            }\r\n            .${this.#defaultStyle.id}.resources-contanier object.unload{\r\n                width: auto;\r\n            }\r\n\r\n        ` \r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n    static get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n    static set resourcesCallback(callback){\r\n        this.#resourcesCallback = callback;\r\n    }\r\n    static get resourcesCallback(){\r\n        return this.#resourcesCallback;\r\n    }\r\n\r\n    static set sizeLimitOverCallback(callback){\r\n        this.#sizeLimitOverCallback = callback;\r\n    }\r\n    static get sizeLimitOverCallback(){\r\n        return this.#sizeLimitOverCallback;\r\n    }\r\n\r\n    #file;\r\n    \r\n    imgLoadEndCallback = (event) => {};\r\n\r\n    resources = Object.assign(document.createElement('object'), {\r\n\r\n    });\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(Resources, dataset, {deleteOption : FreedomInterface.DeleteOption.EMPTY_CONTENT_IS_NOT_DELETE});\r\n        \r\n        if( ! dataset && Object.keys(this.dataset).length == 0){\r\n            this.#file = Resources.selectedFile.cloneNode(true);\r\n            Resources.selectedFile.files = new DataTransfer().files;\r\n\r\n            this.dataset.url = URL.createObjectURL(this.#file.files[0]);\r\n            this.dataset.name = this.#file.files[0].name;\r\n            this.dataset.last_modified = this.#file.files[0].lastModified;\r\n            this.dataset.size = this.#file.files[0].size;\r\n            this.dataset.content_type = this.#file.files[0].type;\r\n\r\n            let url = URL.createObjectURL(this.#file.files[0], this.dataset.content_type);\r\n            this.dataset.url = url;\r\n            /*fetch(this.dataset.url).then(res=>res.blob()).then(blob => {\r\n                const reader = new FileReader();\r\n                reader.readAsDataURL(blob);\r\n                reader.onloadend = () => {\r\n                    this.dataset.base64 = reader.result;\r\n                }\r\n            })*/\r\n           \r\n        }else if(Resources.customResourcesCallback && typeof Resources.customResourcesCallback == 'function'){\r\n            Resources.customResourcesCallback(this);\r\n        }else if(this.dataset.url){\r\n        }\r\n        this.resources.type = this.dataset.content_type;\r\n        this.resources.data = this.dataset.url;\r\n        this.resources.dataset.resources_name = this.dataset.name\r\n\r\n        if(! this.dataset.name){\r\n            this.remove();\r\n            throw new Error(`this file is undefined ${this.dataset.name}`);\r\n        }\r\n        \r\n        this.attachShadow({ mode : 'open' });\r\n        this.shadowRoot.append(Resources.defaultStyle.cloneNode(true));\r\n        \r\n        this.createDefaultContent().then(({wrap, description, slot, aticle})=>{\r\n            this.connectedChildAfterCallback = (addedList) => {\r\n                aticle.append(...addedList);\r\n            }\r\n        });\r\n        \r\n        this.disconnectedAfterCallback = () => {\r\n            this.resources.remove();\r\n            if(this.dataset.url.startsWith('blob:file')){\r\n                //setTimeout(() => {\r\n                    //URL.revokeObjectURL(this.dataset.url);\r\n                //}, 1000 * 60 * 2)\r\n            }\r\n        }\r\n\r\n\t}\r\n\r\n    createDefaultContent(){\r\n        return new Promise(resolve => {\r\n            let wrap = Object.assign(document.createElement('div'),{\r\n\r\n            });\r\n            wrap.draggable = false\r\n\r\n            this.shadowRoot.append(wrap);\r\n\r\n            let resourcesContanier = Object.assign(document.createElement('div'),{\r\n                className: `${Resources.defaultStyle.id} resources-contanier`\r\n            });\r\n\r\n            /*let resources = Object.assign(document.createElement('img'), {\r\n                //src :`https://developer.mozilla.org/pimg/aHR0cHM6Ly9zLnprY2RuLm5ldC9BZHZlcnRpc2Vycy9iMGQ2NDQyZTkyYWM0ZDlhYjkwODFlMDRiYjZiY2YwOS5wbmc%3D.PJLnFds93tY9Ie%2BJ%2BaukmmFGR%2FvKdGU54UJJ27KTYSw%3D`\r\n                //src: this.dataset.url\r\n                //src: imgUrl\r\n            });*/\r\n\r\n            //if(this.file.files.length != 0){\r\n\r\n            //}\r\n\r\n            //resourcesContanier.append(this.resources);\r\n\r\n            this.resources.onload = (event) => {\r\n                if(this.dataset.width){\r\n                    this.resources.width = this.dataset.width;\r\n                }\r\n                //console.log(this.resources.contentWindow);\r\n                if( ! this.resources.contentWindow){\r\n                    this.resources.classList.add('unload')\r\n                }else{\r\n                    this.resources.contentWindow.document.body.style.contentVisibility = 'auto'\r\n                    this.resources.contentWindow.document.body.style.containIntrinsicSize = '1px 5000px'\r\n                }\r\n\r\n                Resources.resourcesCallback({status : 'load', resources : this.resources});\r\n                /*let applyToolAfterSelection = window.getSelection(), range = applyToolAfterSelection.getRangeAt(0);\r\n                let scrollTarget;\r\n                if(range.endContainer.nodeType == Node.TEXT_NODE){\r\n                    scrollTarget = range.endContainer.parentElement\r\n                }else{\r\n                    scrollTarget = range.endContainer;\r\n                }\r\n                scrollTarget.scrollIntoView({ behavior: \"instant\", block: \"end\", inline: \"nearest\" });\r\n                */\r\n            //this.imgLoadEndCallback();\r\n                //resourcesContanier.style.height = window.getComputedStyle(resources).height;\r\n            }\r\n            this.resources.onerror = (event) => {\r\n                //console.log(event);\r\n                //resourcesContanier.style.height = window.getComputedStyle(resources).height;\r\n                this.resources.dataset.error = '';\r\n                if( ! this.resources.contentWindow){\r\n                    this.resources.classList.add('unload')\r\n                }\r\n                Resources.resourcesCallback({status : 'error', resources : this.resources});\r\n                \r\n            }\r\n\r\n            let {description, slot, aticle} = this.createDescription(this.resources, resourcesContanier);\r\n            let downloadButton = Object.assign(document.createElement('button'), {\r\n                className: `${Resources.defaultStyle.id} resources-download-button`,\r\n                innerHTML : `<b>Download</b>`,\r\n                onclick : () => {\r\n                    fetch(this.resources.data).then(res=>res.blob()).then(blob => {\r\n                        let url = URL.createObjectURL(blob, this.dataset.content_type);\r\n                        let a = document.createElement('a');\r\n                        a.href = url;\r\n                        a.download = this.dataset.name;\r\n                        a.click();\r\n                        a.remove();\r\n                        setTimeout(() => {\r\n                            URL.revokeObjectURL(url);\r\n                        }, 1000 * 60 * 5)\r\n                    })\r\n                }\r\n            });\r\n            let previewButton = Object.assign(document.createElement('button'), {\r\n                className: `${Resources.defaultStyle.id} resources-preview-button`,\r\n                innerHTML : `<b>Preview</b>`,\r\n                onclick : () => {\r\n                    resourcesContanier.append(this.resources);\r\n                }\r\n            });\r\n\r\n            this.connectedAfterOnlyOneCallback = () => {\r\n                if(this.childNodes.length != 0 && this.childNodes[0]?.tagName != 'BR'){\r\n                    aticle.append(...[...this.childNodes].filter(e=>e!=aticle));\r\n                }\r\n                wrap.replaceChildren(...[description,downloadButton,previewButton,resourcesContanier].filter(e=>e != undefined));\r\n                \r\n                if(this.nextSibling?.tagName == 'BR'){\r\n                    this.nextSibling.remove()\r\n                }\r\n\r\n                resolve({wrap, description, slot, aticle})\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLObjectElement} resources \r\n     * @param {HTMLDivElement} resourcesContanier \r\n     * @returns \r\n     */\r\n    createDescription(resources, resourcesContanier){\r\n        let description = Object.assign(document.createElement('div'),{\r\n            className: `${Resources.defaultStyle.id} resources-description`\r\n        });\r\n\r\n        description.dataset.file_name = this.dataset.name\r\n        description.dataset.open_status = this.dataset.open_status || ''\r\n        resourcesContanier.style.height = this.dataset.height || 'auto'\r\n        \r\n        description.dataset.open_status = '';\r\n        \r\n        let {slot, aticle} = this.createSlot();\r\n        \r\n        description.append(slot)\r\n\r\n        description.onclick = (event) => {\r\n            /*if(event.composedPath().some(e=> e== downloadButton)){\r\n                return;\r\n            }*/\r\n            if(description.dataset.open_status == ''){\r\n                description.dataset.open_status = ''\r\n                resourcesContanier.style.height = window.getComputedStyle(resources).height;\r\n                setTimeout(()=>{\r\n                    resourcesContanier.style.height = '0px';\r\n                    this.dataset.height = '0px';\r\n                },100)\r\n\r\n            }else{\r\n                description.dataset.open_status = '';\r\n                setTimeout(()=>{\r\n                    resourcesContanier.style.height = window.getComputedStyle(resources).height;\r\n                    this.dataset.height = 'auto';\r\n                },100)\r\n                \r\n                resources.style.opacity = '';\r\n                resources.style.visibility = '';\r\n\r\n            }\r\n            this.dataset.open_status = description.dataset.open_status;\r\n        }\r\n\r\n        resourcesContanier.ontransitionend = () => {\r\n            if(description.dataset.open_status == ''){\r\n                resourcesContanier.style.height = 'auto';\r\n            }else{\r\n                resources.style.opacity = 0;\r\n                resources.style.visibility = 'hidden';\r\n            }\r\n        }\r\n\r\n        return {description, slot, aticle};\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @returns {HTMLSlotElement}\r\n     */\r\n    createSlot(){\r\n        let aticle = document.createElement('div');\r\n        \r\n        aticle.contentEditable = 'false';\r\n        aticle.draggable = 'false'; \r\n\r\n        //if(this.childNodes.length != 0 && this.childNodes[0]?.tagName != 'BR'){\r\n            let randomId = Array.from(\r\n                window.crypto.getRandomValues(new Uint32Array(16)),\r\n                (e)=>e.toString(32).padStart(2, '0')\r\n            ).join('');\r\n            //aticle.append(...[...this.childNodes].map(e=>e.cloneNode(true)));\r\n            aticle.append(...this.childNodes);\r\n            aticle.slot = Resources.slotName + '-' + randomId\r\n            this.append(aticle);\r\n            \r\n            let slot = Object.assign(document.createElement('slot'),{\r\n                name: Resources.slotName + '-' + randomId\r\n            });\r\n            return {slot, aticle};\r\n        //}else{\r\n        //   return undefined\r\n        //}\r\n\r\n    }\r\n    /**\r\n     * @returns {HTMLInputElement}\r\n     */\r\n    get selectedFile(){\r\n        return this.#file\r\n    }\r\n    \r\n    set resourcesUrl(url){\r\n        let clone = this.resources.cloneNode(true);\r\n        clone.data = url;\r\n        this.resources.after(clone);\r\n        this.resources.remove();\r\n        this.resources = clone;\r\n        clone.onload = () => {\r\n            if(this.resources == clone) return;\r\n            if(this.dataset.width){\r\n                clone.width = this.dataset.width;\r\n            }\r\n            if( ! clone.contentWindow){\r\n                clone.classList.add('unload')\r\n            }\r\n        }\r\n        clone.onerror = () => {\r\n            clone.dataset.error = '';\r\n            if( ! clone.contentWindow){\r\n                clone.classList.add('unload')\r\n            }\r\n        }\r\n    }\r\n    get resourcesUrl(){\r\n        this.resources.data;\r\n    }\r\n}\r\n","export default class FontSizeBox {\r\n    \r\n    #style = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-font-size-box'\r\n\t});\r\n\r\n    #fontSizeBoxVw = 30;\r\n\r\n    #fontSizeBox = Object.assign(document.createElement('div'), {\r\n        className: 'font-size-wrap',\r\n    })\r\n    #fontSizeBoxContainer = Object.assign(document.createElement('ul'), {\r\n        className: 'font-size-container'\r\n    })\r\n    \r\n    #searchInputText = Object.assign(document.createElement('input'), {\r\n        autocomplete: 'off',\r\n        placeholder: 'search your font size',\r\n        type: 'number',\r\n        name: 'font-size-search',\r\n        className: 'font-size-search',\r\n        oninput: (event) => this.#searchInputTextEvent(event),\r\n        onkeyup: (event) => {\r\n            if(event.key == 'Enter' && this.#searchInputText.value != ''){\r\n                let item = this.#fontSizeBoxContainer.querySelector(`[data-size=\"${this.#searchInputText.value}\"]`);\r\n                this.#apply(item, event);\r\n            }\r\n        },\r\n    })\r\n\r\n    #selectedFont;\r\n\r\n    #defaultSampleText = '  ab cd'\r\n    #sampleText = this.#defaultSampleText;\r\n\r\n    #applyCallback = () => {}\r\n\r\n    #lastSelectionRange;\r\n\r\n    #fontSizeObject;\r\n\r\n    constructor(fontSizeObject){\r\n        this.#fontSizeObject = fontSizeObject\r\n        let style = document.querySelector(`#${this.#style.id}`);\r\n        if(! style){\r\n            document.head.append(this.createStyle());\r\n        }else{\r\n            this.#style = style;\r\n        }\r\n\r\n        \r\n        let searchWrap = Object.assign(document.createElement('div'),{\r\n            className: 'font-size-search-wrap'\r\n        });\r\n        searchWrap.append(this.#searchInputText);\r\n        \r\n        this.#fontSizeBox.append(searchWrap, this.#fontSizeBoxContainer);\r\n        \r\n        this.#fontSizeBox.append(this.#fontSizeBoxContainer);\r\n\r\n    }\r\n\r\n    #searchInputTextEvent(event){\r\n        let number = Number(this.#searchInputText.value);\r\n        if( ! this.#searchInputText.value || this.#searchInputText.value == '') {     \r\n            this.#createFontElementList(this.#sampleText).then(fontElementList => {\r\n                this.#fontSizeBoxContainer.replaceChildren(...fontElementList);\r\n            });\r\n            return;\r\n        }else if(isNaN(number) || this.#fontSizeObject.min > number || this.#fontSizeObject.max < number){\r\n            this.#fontSizeBoxContainer.replaceChildren();\r\n            return;\r\n        }\r\n\r\n        let li = Object.assign(document.createElement('li'),{\r\n            className: 'font-size-item',\r\n        });\r\n        if(this.#sampleText.nodeType && this.#sampleText.nodeType == Node.ELEMENT_NODE){\r\n            li.innerHTML = this.#sampleText.innerHTML;\r\n        }else{\r\n            li.textContent = this.#sampleText;\r\n        }\r\n        li.style.fontSize = number + this.#fontSizeObject.unit;\r\n        li.dataset.size = number;\r\n        this.#addFontItemEvent(li);\r\n        this.#fontSizeBoxContainer.replaceChildren(li);\r\n        this.#searchInputText.focus();\r\n    }\r\n\r\n    #addFontItemEvent(item){\r\n        return new Promise(res=>{\r\n            item.onclick = (event) => this.#apply(item, event);\r\n            res(item);\r\n        });\r\n    }\r\n\r\n    #apply(item, event){\r\n        this.#selectedFont = item;\r\n        if(this.#lastSelectionRange){\r\n            let selection = window.getSelection();\r\n            selection.removeAllRanges();\r\n            selection.addRange(this.#lastSelectionRange);\r\n        }\r\n        this.applyCallback(event);\r\n    }\r\n\r\n    #createFontElementList(sampleText){\r\n        return new Promise(resolve=> {\r\n            let list = [];\r\n            let fixedLength = String(this.#fontSizeObject.weight).replace('.', '').length;\r\n            for(let i = this.#fontSizeObject.min, len = this.#fontSizeObject.max + this.#fontSizeObject.weight ; \r\n                i < len ;\r\n                i = parseFloat( (i + this.#fontSizeObject.weight).toFixed(fixedLength) )\r\n            ){\r\n                console.log(i);\r\n                let li = Object.assign(document.createElement('li'),{\r\n                    className: 'font-size-item',\r\n                });\r\n                if(sampleText.nodeType && sampleText.nodeType == Node.ELEMENT_NODE){\r\n                    li.innerHTML = sampleText.innerHTML;\r\n                }else{\r\n                    li.textContent = sampleText;\r\n                }\r\n                li.style.fontSize = i + this.#fontSizeObject.unit;\r\n                this.#addFontItemEvent(li);\r\n                list.push(li);\r\n            }\r\n            resolve(list);\r\n        })\r\n    }\r\n\r\n    async open(){\r\n        this.#searchInputText.step = this.#fontSizeObject.weight;\r\n        this.#searchInputText.min = this.#fontSizeObject.min;\r\n        this.#searchInputText.max = this.#fontSizeObject.max;\r\n        \r\n        let selection = window.getSelection();\r\n        if(selection.rangeCount != 0 && selection.isCollapsed == false){\r\n            let range = selection.getRangeAt(0);\r\n            this.#lastSelectionRange = range.cloneRange();\r\n            let aticle = document.createElement('aticle');\r\n            let rangeCloneContent = range.cloneContents();\r\n            aticle.append(rangeCloneContent);\r\n            this.#sampleText = aticle;\r\n        }\r\n        this.#sampleText = this.#sampleText == '' ? this.#defaultSampleText : this.#sampleText;\r\n    \r\n        document.body.append(this.#fontSizeBox);\r\n\r\n        return await this.#createFontElementList(this.#sampleText).then(fontElementList => {\r\n            this.#fontSizeBoxContainer.replaceChildren(...fontElementList);\r\n            return this.#fontSizeBoxContainer;\r\n        });\r\n    }\r\n\r\n    close(){\r\n        this.#fontSizeBox.remove();\r\n    }\r\n\r\n    set applyCallback(applyCallback){\r\n        this.#applyCallback = applyCallback;\r\n    }\r\n\r\n    get applyCallback(){\r\n        return this.#applyCallback;\r\n    }\r\n\r\n    get fontSizeBox(){\r\n        return this.#fontSizeBox;\r\n    }\r\n\r\n    get selectedFont(){\r\n        return this.#selectedFont;\r\n    }\r\n\r\n\tget style(){\r\n\t\treturn this.#style;\r\n\t}\r\n\r\n\tset style(style){\r\n        this.#style.textContent = style;\r\n    }\r\n\r\n\tset insertStyle(style){\r\n\t\tthis.#style.sheet.insertRule(style);\r\n\t}\r\n\r\n\r\n    createStyle(){\r\n        this.#style.textContent = `\r\n            .font-size-wrap{\r\n                background: #000000bf;\r\n                position: fixed;\r\n\t\t\t\tpadding: 0.9%;\r\n\t\t\t\twidth: ${this.#fontSizeBoxVw}vw;\r\n\t\t\t\theight: 25vh;\r\n\t\t\t\tcolor: white;\r\n                min-width: 200px;\r\n                overflow-y: auto;\r\n                -webkit-user-select: none;\r\n                -moz-user-select: none;\r\n                -ms-user-select: none;\r\n                user-select: none;\r\n                overflow-x: hidden;\r\n                z-index: 999;\r\n            }\r\n\r\n            .font-size-wrap .font-size-search-wrap{\r\n                margin-bottom: 2%;\r\n                overflow-x: hidden;\r\n            }\r\n            .font-size-wrap .font-size-search-wrap [name=\"font-size-search\"]{\r\n                outline: none;\r\n                -moz-appearance: textfield;\r\n                width: 100%;\r\n                color: white;\r\n            }\r\n            .font-size-wrap .font-size-search-wrap [name=\"font-size-search\"]::-webkit-outer-spin-button,\r\n            .font-size-wrap .font-size-search-wrap [name=\"font-size-search\"]::-webkit-inner-spin-button{\r\n                -webkit-appearance: none;\r\n                margin: 0;\r\n            }\r\n\r\n            .font-size-wrap .font-size-container{\r\n                list-style-type: none;\r\n                padding: 0;\r\n                margin: 0;\r\n            }\r\n            .font-size-wrap .font-size-container .font-size-item{\r\n                margin-bottom: 1%;\r\n                transition: all 0.5s;\r\n                overflow-x: hidden;\r\n                white-space: nowrap;\r\n                text-overflow: ellipsis;\r\n            }\r\n            .font-size-wrap .font-size-container .font-size-item:hover{\r\n                background-color: #666666;\r\n                cursor: pointer;\r\n                background-color: #666666;\r\n                padding: 2px 0 3px 0;\r\n            }\r\n\r\n        `\r\n        return this.#style;\r\n    }\r\n}","import FreedomInterface from \"../module/FreedomInterface\"\r\nimport ToolHandler from \"../module/ToolHandler\"\r\nimport FontSizeBox from \"../component/FontSizeBox\";\r\n\r\nexport default class FontSize extends FreedomInterface {\r\n    static toolHandler = new ToolHandler(this);\r\n\r\n    static #defaultStyle = Object.assign(document.createElement('style'), {\r\n\t\tid: 'free-will-editor-font-size-style'\r\n\t});\r\n\r\n    static fontSizeBox;\r\n\r\n\tstatic unit = 'px';\r\n\r\n\tstatic min = 1;\r\n\r\n\tstatic max = 50;\r\n\r\n\tstatic weight = 1;\r\n\tstatic isDefaultStyle = true;\r\n    static{\r\n        \r\n\t\tthis.toolHandler.extendsElement = '';\r\n\t\tthis.toolHandler.defaultClass = 'free-will-editor-font-size';\r\n\t\t\r\n\t\tthis.toolHandler.toolButton = Object.assign(document.createElement('button'), {\r\n            textContent: '',\r\n            className: `${this.#defaultStyle.id}-button`,\r\n\t\t\ttitle: 'Font Size'\r\n        });\r\n\r\n\t\tthis.fontSizeBox = new FontSizeBox(this);\r\n\r\n\t\tthis.toolHandler.toolButton.onclick = ()=>{\r\n\t\t\tif(this.toolHandler.toolButton.dataset.tool_status == 'active' || this.toolHandler.toolButton.dataset.tool_status == 'connected'){\r\n\t\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'cancel';\r\n\t\t\t}else if(this.fontSizeBox.fontSizeBox.isConnected){\r\n\t\t\t\tthis.fontSizeBox.close();\r\n\t\t\t}else{\r\n\t\t\t\tthis.fontSizeBox.open().then(fontSizeBoxContainer=>{\r\n\t\t\t\t    super.processingElementPosition(this.fontSizeBox.fontSizeBox, this.toolHandler.toolButton);\r\n                });\r\n\t\t\t}\r\n\t\t}\r\n\r\n        this.fontSizeBox.applyCallback = (event) => {\r\n\t\t\tthis.toolHandler.toolButton.dataset.tool_status = 'active'\r\n\t\t\tthis.fontSizeBox.close();\r\n\t\t}\r\n\r\n        document.addEventListener(\"scroll\", () => {\r\n\t\t\tif(this.fontSizeBox.fontSizeBox.isConnected){\r\n\t\t\t\tsuper.processingElementPosition(this.fontSizeBox.fontSizeBox, this.toolHandler.toolButton);\r\n\t\t\t}\r\n\t\t});\r\n        window.addEventListener('resize', (event) => {\r\n            if(this.fontSizeBox.fontSizeBox.isConnected){\r\n                this.fontSizeBox.open().then(fontSizeBoxContainer=>{\r\n\t\t\t\t\tsuper.processingElementPosition(this.fontSizeBox.fontSizeBox, this.toolHandler.toolButton);\r\n                });\r\n            }\r\n\t\t})\r\n\r\n\t\tsuper.outClickElementListener(this.fontSizeBox.fontSizeBox, ({oldEvent, newEvent, isMouseOut})=>{\r\n\t\t\tif(isMouseOut && this.fontSizeBox.fontSizeBox.isConnected && ! super.isMouseInnerElement(this.toolHandler.toolButton)){\r\n\t\t\t\tthis.fontSizeBox.close();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n    static createDefaultStyle(){\r\n\t\tthis.#defaultStyle.textContent = `\r\n\t\t\t.${this.#defaultStyle.id}-button{\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\t\t`\r\n\t\tlet defaultStyle = document.querySelector(`#${this.#defaultStyle.id}`);\r\n        if(! defaultStyle){\r\n            document.head.append(this.#defaultStyle);\r\n        }else{\r\n            this.#defaultStyle?.remove();\r\n            this.#defaultStyle = defaultStyle;\r\n            document.head.append(this.#defaultStyle);\r\n        }\r\n\t\treturn this.#defaultStyle;\r\n\t}\r\n\r\n\tstatic get defaultStyle(){\r\n        return this.#defaultStyle;\r\n    }\r\n\r\n    static set defaultStyle(style){\r\n        this.#defaultStyle.textContent = style;\r\n    }\r\n\r\n\tstatic set insertDefaultStyle(style){\r\n\t\tthis.#defaultStyle.sheet.insertRule(style);\r\n\t}\r\n\r\n\tconstructor(dataset){\r\n\t\tsuper(FontSize, dataset);\r\n\t\tif( ! dataset && Object.keys(this.dataset).length == 0){\r\n            this.dataset.font_size = FontSize.fontSizeBox.selectedFont?.style.fontSize;\r\n        }\r\n        this.style.fontSize = this.dataset.font_size\r\n    }\r\n\t\r\n}\r\n","export const accountHandler = new class AccountHandler{\r\n    #accountInfo = this.searchAccountInfo();\r\n    static #accountInfoChangeAcceptResolve;\r\n    static accountInfoChangeAcceptPromise = new Promise(resolve => {\r\n        this.#accountInfoChangeAcceptResolve = resolve;\r\n    });\r\n\r\n    static {\r\n        window.myAPI.event.electronEventTrigger.addElectronEventListener('accountInfoChangeAccept', data => {\r\n            console.log(data);\r\n            let {content} = data;\r\n            this.#accountInfoChangeAcceptResolve(content);\r\n            this.accountInfoChangeAcceptPromise = new Promise(resolve=>{\r\n                this.#accountInfoChangeAcceptResolve = resolve;\r\n            })\r\n        })\r\n    }\r\n\r\n    constructor(){\r\n\r\n    }\r\n\r\n    accountInfoChangeAcceptEventListener(callback = ({oldData, newData}) => {}){\r\n        let oldData = undefined;\r\n\t\tlet newData = undefined;\r\n\t\tconst simpleObserver = () => {\r\n\t\t\tAccountHandler.accountInfoChangeAcceptPromise.then((event)=>{\r\n\t\t\t\tnewData = event;\r\n\t\t\t\tcallback({oldData, newData});\r\n\t\t\t\toldData = event;\r\n\t\t\t\tsimpleObserver();\r\n\t\t\t})\r\n\t\t}\r\n\t\tsimpleObserver();\r\n    }\r\n\r\n    async searchAccountInfo(){\r\n        this.#accountInfo = await window.myAPI.account.getAccountInfo().then(result => {\r\n            return result.data;\r\n        });\r\n        return this.#accountInfo;\r\n    }\r\n\r\n    get accountInfo(){\r\n        return this.#accountInfo;\r\n    }\r\n\r\n};","\r\nexport const s3EncryptionUtil = new class S3EncryptionUtil{\r\n\r\n\tencoder = new TextEncoder();\r\n\tdecoder = new TextDecoder();\r\n\r\n\tsignAlgorithm = {\r\n\t\tname: \"RSASSA-PKCS1-v1_5\",\r\n\t\t// Consider using a 4096-bit key for systems that require long-term security\r\n\t\tmodulusLength: 2048,\r\n\t\tpublicExponent: new Uint8Array([0x01, 0x00, 0x01]),\r\n\t\thash: \"SHA-256\",\r\n\t}\r\n\r\n\tsecretAlgorithm = {\r\n\t\tname: \"RSA-OAEP\",\r\n\t\tmodulusLength: 2048,\r\n\t\tpublicExponent: new Uint8Array([0x01, 0x00, 0x01]),\r\n\t\thash: \"SHA-256\",\r\n\t}\r\n\r\n\tasync generateKeyPair(algorithm, keyUsages){\r\n\t\treturn window.crypto.subtle.generateKey(\r\n\t\t\talgorithm,\r\n\t\t\ttrue,\r\n\t\t\tkeyUsages//[\"sign\", \"verify\"]\r\n\t\t);\r\n\t}\r\n\r\n\tasync keySign(data, privateKey){\r\n\t\tlet message = this.encoder.encode(data);\r\n\t\treturn window.crypto.subtle.sign(this.signAlgorithm.name, privateKey, message).then(signature=>{\r\n\t\t\treturn {message, signature};\r\n\t\t})\r\n\t}\r\n\r\n\tasync decryptMessage(privateKey, ciphertext, algorithm) {\r\n\t\treturn window.crypto.subtle.decrypt(\r\n\t\t\t{ name: algorithm.name },\r\n\t\t\tprivateKey,\r\n\t\t\tciphertext,\r\n\t\t).catch(err=>{\r\n\t\t\tconsole.error(err.message);\r\n\t\t\tconsole.error(err.stack);\r\n\t\t});\r\n\t}\r\n\r\n\t\r\n\tasync convertBase64ToBuffer(base64){\r\n\t\treturn fetch(`data:application/octet-binary;base64,${base64}`)\r\n\t\t.then(res=>res.arrayBuffer())\r\n\t\t.then(buffer=>new Uint8Array(buffer))\r\n\t}\r\n\r\n\tasync exportKey(exportType, key){\r\n\t\treturn window.crypto.subtle.exportKey(exportType, key).then(exportKey => {\r\n\t\t\treturn new Promise( resolve => resolve(String.fromCharCode(...new Uint8Array(exportKey))) );\r\n\t\t}).then(exportKeyString => {\r\n\t\t\treturn new Promise( resolve => resolve(window.btoa(exportKeyString)) );\r\n\t\t});\r\n\t}\r\n\tasync callS3PresignedUrl(callFunction, signData, callFunctionParam = {} ){//,fileName, accountName){\r\n\t\tconsole.log('callFunctionParam !!! ',callFunctionParam);\r\n\t\treturn Promise.all( [this.generateKeyPair(this.signAlgorithm, [\"sign\", \"verify\"]), this.generateKeyPair(this.secretAlgorithm, [\"encrypt\", \"decrypt\"])] )\r\n\t\t.then( ([signKeyPair, encDncKeyPair]) => {\r\n\t\t\treturn Promise.all( [\r\n\t\t\t\tthis.exportKey('spki', signKeyPair.publicKey),\r\n\t\t\t\tthis.exportKey('spki', encDncKeyPair.publicKey), \r\n\t\t\t\tPromise.resolve(encDncKeyPair), \r\n\t\t\t\tPromise.resolve(signKeyPair)\r\n\t\t\t] )\t\t\r\n\t\t}).then( async ([exportSignKey, exportEncKey, encDncKeyPair, signKeyPair]) => {\r\n\r\n\t\t\tlet sign = await this.keySign(\r\n\t\t\t\t`${signData}:${exportEncKey}`, \r\n\t\t\t\tsignKeyPair.privateKey\r\n\t\t\t)\r\n\t\t\t\r\n\t\t\tlet result = await callFunction(Object.assign(callFunctionParam, {\r\n\t\t\t\tdata: window.btoa(String.fromCodePoint(...sign.message)), \r\n\t\t\t\tdataKey: exportSignKey, \r\n\t\t\t\tsign: window.btoa( String.fromCodePoint(...new Uint8Array(sign.signature)) ), \r\n\t\t\t}))\r\n\r\n\t\t\tlet {code, data} = result;\r\n\t\t\t\r\n\t\t\tif(code != 0){\r\n\t\t\t\treturn ;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn {data, encDncKeyPair};\r\n\t\t})\r\n\t}\r\n\r\n\tasync fetchPutObject(putUrl, key, md5, fileData){\r\n\t\treturn fetch(putUrl, {\r\n\t\t\tmethod:\"PUT\",\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Encoding' : 'base64',\r\n\t\t\t\t'Content-Type' : 'application/octet-stream',\r\n\t\t\t\t'x-amz-server-side-encryption-customer-algorithm': 'AES256',\r\n\t\t\t\t'x-amz-server-side-encryption-customer-key': key,\r\n\t\t\t\t'x-amz-server-side-encryption-customer-key-md5': md5,\r\n\t\t\t},\r\n\t\t\tbody: fileData\r\n\t\t})\r\n\t}\r\n}","\r\nexport const workspaceHandler = new class WorkspaceHandler{\r\n    #workspace;\r\n    #workspaceId;\r\n    #addWorkspaceIdChangedListener = {};\r\n    #workspaceChangeDone;\r\n    #workspaceChangeAwait;\r\n    constructor(){\r\n        //window.addEventListener(\"DOMContentLoaded\", (event) => {\r\n            window.myAPI.getWorkspaceId().then(workspaceId=>{\r\n                this.workspaceId = workspaceId;\r\n            })\r\n            window.myAPI.event.electronEventTrigger.addElectronEventListener('workspaceChange', event => {\r\n                this.workspaceId = event.workspaceId;\r\n            })\r\n        //});\r\n    }\r\n\r\n    set addWorkspaceIdChangedListener({name, callback, runTheFirst}){\r\n        this.#addWorkspaceIdChangedListener[name] = callback;\r\n        if(runTheFirst && this.workspaceId){\r\n            callback(this);\r\n        }\r\n    }\r\n    get addWorkspaceIdChangedListener(){\r\n        return this.#addWorkspaceIdChangedListener;\r\n    }\r\n\r\n    set workspaceId(workspaceId){\r\n        if(!workspaceId)return;\r\n        this.#workspaceId = workspaceId;\r\n        window.myAPI.workspace.getWorkspaceDetail({workspaceId}).then((workspace) => {\r\n            this.#workspace = workspace;\r\n            let startCallbackPromise = Promise.all(Object.values(this.#addWorkspaceIdChangedListener).map(async callback => {\r\n                return new Promise(res => {\r\n                    callback(this);\r\n                    res();\r\n                });\r\n            }));\r\n            if( ! this.#workspaceChangeAwait){\r\n                this.#workspaceChangeAwait = new Promise(resolve=>{\r\n                    this.#workspaceChangeDone = resolve;\r\n                    this.#workspaceChangeDone(startCallbackPromise);\r\n                })\r\n            }else{\r\n                this.#workspaceChangeAwait.then(() => {\r\n                    startCallbackPromise.then(() => {\r\n                        this.#workspaceChangeAwait = new Promise(resolve => {\r\n                            this.#workspaceChangeDone = resolve;\r\n                        })\r\n                    })\r\n                })\r\n            }\r\n        });\r\n    }\r\n    get workspaceId(){\r\n        return Number(this.#workspaceId);\r\n    }\r\n    get workspace(){\r\n        return this.#workspace;\r\n    }\r\n    removeWorkspaceIdChangedListener(name){\r\n        delete this.#addWorkspaceIdChangedListener(name);\r\n    }\r\n};","/**\r\n * indexedDB  ()\r\n * @author mou123\r\n * @constructor\r\n */\r\nexport default class IndexedDBHandler{\r\n\t/**\r\n\t * indexed db  db  \r\n\t */\r\n\t#dbName;\r\n\r\n\t/**\r\n\t * indexed db store    \r\n\t */\r\n\t#columnInfo;\r\n\r\n\t/**\r\n\t * store  \r\n\t */\r\n\t#storeName;\r\n\r\n\t#db;\r\n\r\n\tisOpen = false;\r\n\r\n\t#container;\r\n\r\n\t#keyPathNameList\r\n\r\n\t#pkAutoIncrement\r\n\r\n\t/**\r\n\t * \r\n\t * @author mozu123\r\n\t * @example \t\r\n\t#columnInfo = {\r\n\t\tboTempId:['boTempId','boTempId',{unique : true}],\r\n\t\tboTempName:['boTempName','boTempName'],\r\n\t\tboTempInsertTime:['boTempInsertTime','boTempInsertTime'],\r\n\t\tboTempData:['boTempData','boTempData']\r\n\t};\r\n\t */\r\n\tconstructor({\r\n\t\tdbName = undefined,\r\n\t\tcolumnInfo = undefined,\r\n\t\tstoreName = undefined,\r\n\t\tkeyPathNameList = [],\r\n\t\tpkAutoIncrement = true\r\n\t}){\r\n\t\tif( ! dbName ){\r\n\t\t\tthrow new Error('dbName is undefined');\r\n\t\t}else if( ! columnInfo ){\r\n\t\t\tthrow new Error('columnInfo is undefined');\r\n\t\t}else if( ! storeName ){\r\n\t\t\tthrow new Error('storeName is undefined')\r\n\t\t}else if( keyPathNameList.length == 0 ){\r\n\t\t\tthrow new Error('keyPathName is undefined')\r\n\t\t}else if(keyPathNameList.filter(e=>columnInfo[e]).length != keyPathNameList.length){\r\n\t\t\tthrow new Error('invalid key path name')\r\n\t\t}else if(pkAutoIncrement == true && keyPathNameList.length > 1){\r\n\t\t\tthrow new Error('multiple key not use autoIncrement : true');\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.#dbName = dbName;\r\n\t\t\tthis.#columnInfo = columnInfo;\r\n\t\t\tthis.#storeName = storeName;\t\r\n\t\t\tthis.#container = JSON.stringify(\r\n\t\t\t\tObject.entries(columnInfo).reduce((obj, [k,v], idx) => {\r\n\t\t\t\t\tobj[k] = undefined;\r\n\t\t\t\t\treturn obj;\r\n\t\t\t\t}, {})\r\n\t\t\t)\r\n\t\t\tthis.#keyPathNameList = keyPathNameList;\r\n\t\t\tthis.#pkAutoIncrement = pkAutoIncrement;\r\n\t\t}\r\n\t}\r\n\r\n\topen(){\r\n\t\treturn new Promise( (resolve, reject) => {\r\n\r\n\t\t\tconst dbOpenRequest = indexedDB.open(this.DB_NAME);\r\n\t\t\t/**\r\n\t\t\t * db open     ,      .\r\n\t\t\t * @author mozu123\r\n\t\t\t * @param {Event} e \r\n\t\t\t * @returns \r\n\t\t\t * @see this.upgradeneeded()\r\n\t\t\t */\r\n\t\t\tdbOpenRequest.onupgradeneeded = (e) => this.upgradeneeded(e,{});\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * db open   .\r\n\t\t\t * @param {Event} e \r\n\t\t\t */\r\n\t\t\tdbOpenRequest.onsuccess = (e) => {\r\n\r\n\t\t\t\tthis.isOpen = true;\r\n\t\t\t\tthis.#db = e.target.result;\r\n\t\t\t\tlet storeName = Object.entries(this.#db.objectStoreNames).find(([idx, storeName]) => storeName == this.DB_STORE_NAME)\r\n\t\t\t\tlet isNewAddStore = ! storeName;\r\n\r\n\t\t\t\tlet isNeedChangeIndex = false;\r\n\r\n\t\t\t\tif( ! isNewAddStore){\r\n\t\t\t\t\tlet store = this.#db.transaction(this.DB_STORE_NAME, 'readwrite').objectStore(this.DB_STORE_NAME);\r\n\t\t\t\t\tlet indexNamesMapper = Object.entries(store.indexNames).reduce((t,[idx,indexName])=>{\r\n\t\t\t\t\t\tt[indexName]=idx\r\n\t\t\t\t\t\treturn t;\r\n\t\t\t\t\t},{});\r\n\t\t\t\t\tisNeedChangeIndex = \r\n\t\t\t\t\t\tObject.entries(indexNamesMapper).findIndex(([name,idx]) => ! this.#columnInfo[name] ) != -1 ||\r\n\t\t\t\t\t\tObject.entries(this.#columnInfo).findIndex(([k,v])=> ! indexNamesMapper[k] ) != -1\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif( isNewAddStore || isNeedChangeIndex ){\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet newVersion = Number(this.#db.version) + 1;\r\n\t\t\t\t\tconsole.log(this.#storeName, newVersion);\r\n\t\t\t\t\t//       (  )   \r\n\t\t\t\t\tconsole.log(dbOpenRequest);\r\n\t\t\t\t\tthis.close().then( closeResult => {\r\n\t\t\t\t\t\tconst secondOpenRequest = indexedDB.open(this.DB_NAME, newVersion);\r\n\t\t\t\t\t\tconsole.log(secondOpenRequest)\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * DB    ,  db           .\r\n\t\t\t\t\t\t * @author mozu123\r\n\t\t\t\t\t\t * @param {Event} event \r\n\t\t\t\t\t\t * @returns \r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tsecondOpenRequest.onupgradeneeded = (event) => this.upgradeneeded(event, {isNewAddStore:isNewAddStore});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t *          .\r\n\t\t\t\t\t\t * @author mozu123\r\n\t\t\t\t\t\t * @param {Event} event \r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tsecondOpenRequest.onsuccess = (event) => {\r\n\t\t\t\t\t\t\tthis.isOpen = true;\r\n\t\t\t\t\t\t\tthis.#db = event.target.result;\r\n\t\t\t\t\t\t\tresolve(this.isOpen);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsecondOpenRequest.onblocked = (e) => {\r\n\t\t\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tresolve(this.isOpen);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdbOpenRequest.onblocked = (e) => {\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * db open        \r\n\t\t\t * @param {Event} e \r\n\t\t\t */\r\n\t\t\tdbOpenRequest.onerror = (e) => {\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t\tthis.isOpen = false;\r\n\t\t\t\tif(e.target.error.name == 'VersionError'){\r\n\t\t\t\t\t//error code\r\n\t\t\t\t\treject(new Error('VersionError: DB    .'));\r\n\t\t\t\t}else{\r\n\t\t\t\t\t//error code\r\n\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\treject(new Error(`unknownError ${e}`))\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tclose(){\r\n\t\treturn new Promise( resolve => {\r\n\t\t\tif( ! this.#db || ! this.isOpen){\r\n\t\t\t\tresolve(false)\r\n\t\t\t}\r\n\t\t\tthis.#db.onabort = (e) => console.log(e)\r\n\t\t\tthis.#db.onerror = (e) => console.log(e);\r\n\t\t\tthis.#db.close();\r\n\t\t\tthis.isOpen = false;\r\n\t\t\tthis.#db.onclose = (event) => {\r\n\t\t\t\tthis.isOpen = false;\r\n\t\t\t\tresolve(true)\r\n\t\t\t}\r\n\t\t\tresolve(true);\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * DB NAME  getter\r\n\t * @author mou123\r\n\t */\r\n\tget DB_NAME(){\r\n\t\treturn this.#dbName;\r\n\t}\r\n\r\n\t/**\r\n\t * @author mou123\r\n\t */\r\n\tget DB_STORE_NAME(){\r\n\t\treturn this.#storeName;\r\n\t}\r\n\r\n\tget COLUMN_INFO(){\r\n\t\treturn this.#columnInfo;\r\n\t}\r\n\r\n\tget template(){\r\n\t\treturn JSON.parse(this.#container);\r\n\t}\r\n\r\n\t/**\r\n\t * indexed DB open         .\r\n\t * @author mou123\r\n\t * @param {Event} event \r\n\t * @param {Object} isNewAddStore :    store  \r\n\t */\r\n\tupgradeneeded(event,{isNewAddStore=false}){\r\n\r\n\t\tlet objectStore;\r\n\t\t// newVersion oldVersion   && oldVersion 0  *(  0) &&  store   \r\n\t\tif(event.newVersion != event.oldVersion && event.oldVersion != 0 && ! isNewAddStore){\r\n\t\t\tobjectStore = event.target.transaction.objectStore(this.DB_STORE_NAME);\r\n\t\t\tlet indexNameList = Object.entries(objectStore.indexNames);\r\n\t\t\tlet oldIndexCheckMapper = indexNameList.reduce((t,[idx,indexName])=>{\r\n\t\t\t\tt[indexName]=idx\r\n\t\t\t\treturn t;\r\n\t\t\t},{});\r\n\t\t\t\r\n\t\t\tObject.entries(this.#columnInfo).forEach(([indexName, column])=>{\r\n\t\t\t\tif( ! oldIndexCheckMapper[ column[0] ]){\r\n\t\t\t\t\tobjectStore.createIndex(...column);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tindexNameList.forEach(([k,indexName])=>{\r\n\t\t\t\tif( ! this.#columnInfo[indexName]){\r\n\t\t\t\t\tobjectStore.deleteIndex(indexName);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}else{\r\n\t\t\t//let keyPath = Object.values(this.#columnInfo).find(column => column.some(e=>e.unique))[0];\r\n\t\t\tlet keyPath = this.#pkAutoIncrement || this.#keyPathNameList.length == 1 ? this.#keyPathNameList[0] : this.#keyPathNameList\r\n\t\t\tobjectStore = event.target.result.createObjectStore(this.DB_STORE_NAME, { keyPath , autoIncrement : this.#pkAutoIncrement });\r\n\t\t\tObject.entries(this.#columnInfo).forEach( ([indexName, column]) => objectStore.createIndex(...column) );\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * indexed db   \r\n\t * @param {Object} data : indexed db   \r\n\t * @returns {Promise}\r\n\t */\r\n\taddItem(data = this.#container){\r\n\t\treturn new Promise( (resolve, reject ) => {\r\n\t\t\tif( ! this.isOpen || ! this.#db){\r\n\t\t\t\treject(new Error('indexedDB  .'));\r\n\t\t\t}\r\n\t\t\tlet transaction = this.#db.transaction(this.DB_STORE_NAME, 'readwrite')\r\n\t\t\tlet store = transaction.objectStore(this.DB_STORE_NAME);\r\n\t\t\tlet request = store.put(data);\r\n\t\t\trequest.onsuccess = (e) => {\r\n\t\t\t\ttransaction.commit();\r\n\t\t\t}\r\n\t\t\trequest.onerror = (e) => {\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t}\r\n\t\t\ttransaction.oncomplete = (e)=>{\r\n\t\t\t\tif(e.type == 'complete'){\r\n\t\t\t\t\t//alert('  .');\r\n\t\t\t\t\t//console.log(e.type);\r\n\t\t\t\t}\r\n\t\t\t\tresolve(e);\r\n\t\t\t}\r\n\t\t\ttransaction.onerror = (e)=>{\r\n\t\t\t\t//error code\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t\treject(new Error('commit error'))\r\n\t\t\t}\r\n\t\t\t//return resolve();\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t *      \r\n\t * @author mozu123\r\n\t * @param {Object} data \r\n\t */\r\n\t/*tempSaveButtonClickEvent(data){\r\n\t\tif( ! data){\r\n\t\t\tthrow new Error('     .');\r\n\t\t}\r\n\t\tlet boTempName = window.prompt('     .\\n    .', new Date().toLocaleString());\r\n\t\tthis.addTempItem(data, boTempName);\r\n\t}*/\r\n\r\n\t/**\r\n\t *             ->  ()\r\n\t * @param {Object} param0 :     \r\n\t * @returns \r\n\t */\r\n\t//getTempFilterList({boTempId, boTempName, boTempInsertTime, pageNum=1, pageSize=5, startDateTime, endDateTime}){}\r\n\t\r\n\tgetItem(key){\r\n\t\treturn new Promise( (resolve, reject) => {\r\n\t\t\tlet transaction = this.#db.transaction(this.DB_STORE_NAME, 'readonly');\r\n\t\t\tlet objectStore = transaction.objectStore(this.DB_STORE_NAME);\r\n\t\t\tlet request = objectStore.get(key);\r\n\t\t\trequest.onerror = (event) => {\r\n\t\t\t\tconsole.error(event);\r\n\t\t\t\treject(request);\r\n\t\t\t}\r\n\r\n\t\t\trequest.onsuccess = (event) => {\r\n\t\t\t\tresolve(request);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t *      pageNum  1, pageSize  5\r\n\t * @author mozu123\r\n\t * @param {Object} param0 :     \r\n\t */\r\n\tgetList({pageNum=1, pageSize=5, callback, readOption = 'readonly'} = {}){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\r\n\t\t\tlet start = (pageSize * (pageNum - 1));\r\n\t\t\tlet isEnableAdvanced = start != 0; \r\n\t\t\tlet count = 0;\r\n\t\t\tlet transaction = this.#db.transaction(this.DB_STORE_NAME, readOption)\r\n\t\t\tlet store = transaction.objectStore(this.DB_STORE_NAME);\r\n\t\t\tlet result = {\r\n\t\t\t\tdata:[],\r\n\t\t\t\tevent:undefined\r\n\t\t\t};\r\n\t\t\tlet cursorRequest = store.openCursor()\r\n\t\t\tcursorRequest.onsuccess = (event) => {\r\n\t\t\t\tconst cursor = event.target.result;\r\n\t\t\t\tif( ! cursor ){\r\n\t\t\t\t\treturn ;\r\n\t\t\t\t}else if(isEnableAdvanced){\r\n\t\t\t\t\tisEnableAdvanced = ! isEnableAdvanced\r\n\t\t\t\t\tcursor.advance(start);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(callback instanceof Function){\r\n\t\t\t\t\tcallback(cursor);\r\n\t\t\t\t}\r\n\t\t\t\tlet value = cursor.value;\r\n\t\t\t\tresult.data.push(value);\r\n\t\t\t\tcount += 1;\r\n\t\t\t\t\r\n\t\t\t\tif(count >= pageSize){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcursor.continue();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\ttransaction.oncomplete = (event) => {\r\n\t\t\t\tresult.event = event;\r\n\t\t\t\treturn resolve(result);\r\n\t\t\t}\r\n\t\t\ttransaction.onerror = (e) => reject(e);\r\n\t\t\ttransaction.onabort = (e) => reject(e);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t *      row  \r\n\t * @author mozu123\r\n\t * @param  {...String} idList :   id \r\n\t * @returns {Promise} result :    count    Object\r\n\t */\r\n\tdeleteList(...idList){\r\n\t\tif(idList.length == 0){\r\n\t\t\treturn Promise.resolve()\r\n\t\t}\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tlet transaction = this.#db.transaction(this.DB_STORE_NAME, 'readwrite')\r\n\t\t\tlet store = transaction.objectStore(this.DB_STORE_NAME);\r\n\t\t\tlet result = {successCount:0, failedCount:0};\r\n\t\t\tidList.forEach(id=>{\r\n\t\t\t\tlet request = store.delete([id]);\r\n\t\t\t\trequest.onsuccess = (e)=>{\r\n\t\t\t\t\tresult.successCount += 1;\r\n\t\t\t\t\ttransaction = e.target.transaction;\r\n\t\t\t\t}\r\n\t\t\t\trequest.onerror = (e)=>{\r\n\t\t\t\t\tresult.failedCount += 1;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\ttransaction.commit();\r\n\t\t\ttransaction.oncomplete = (event) => {\r\n\t\t\t\tresult.event = event;\r\n\t\t\t\treturn resolve(result);\r\n\t\t\t}\r\n\t\t\ttransaction.onerror = (e) => reject(e);\r\n\t\t\ttransaction.onabort = (e) => reject(e);\r\n\t\t})\r\n\t}\r\n\r\n\tdeleteDatabase(dbName){\r\n\t\treturn new Promise( (resolve, reject) => {\r\n\t\t\t\r\n\t\t\tlet deleteReuqest = indexedDB.deleteDatabase(dbName);\r\n\t\t\tdeleteReuqest.onerror = (event) => {\r\n\t\t\t\tconsole.error(event);\r\n\t\t\t\treject(event);\r\n\t\t\t}\r\n\t\t\tdeleteReuqest.onsuccess = (event) => {\r\n\t\t\t\tconsole.log(event);\r\n\t\t\t\tresolve(event);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n}","export default new class Common{\r\n\t#keyRegx = /[A-Z]?[a-z]+|[0-9]+|[A-Z]+(?![a-z])/g;\r\n\r\n\tconstructor(){\r\n\r\n\t}\r\n\r\n\tjsonToSaveElementDataset(data, element){\r\n\t\tif( ! element){\r\n\t\t\tthrow new Error('element is undefined')\r\n\t\t} else if(element.nodeType != Node.ELEMENT_NODE){\r\n\t\t\tthrow new Error(`element is not element node type ::: ${element.nodeType}`);\r\n\t\t}\r\n\t\treturn new Promise(resolve=>{\r\n\t\t\tlet underbarKeyNameObject = Object.entries(data).reduce((total, [k,v]) => {\r\n\t\t\t\tlet key = k.match(this.#keyRegx).map(e=> e.toLowerCase()).join('_');\r\n\t\t\t\ttotal[key] = v;\r\n\t\t\t\treturn total;\r\n\t\t\t}, {});\r\n\t\t\tObject.assign(element.dataset, underbarKeyNameObject);\r\n\t\t\tresolve(element);\r\n\t\t})\r\n\t}\r\n\tasync underbarNameToCamelName(obj){\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tresolve(Object.entries(obj).reduce((total, [k,v]) => {\r\n\t\t\t\tlet key = k.split('_').map((e,i)=>{\r\n\t\t\t\t\tif(i == 0){\r\n\t\t\t\t\t\treturn e.charAt(0).toLowerCase() + e.substring(1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn e.charAt(0).toUpperCase() + e.substring(1)\r\n\t\t\t\t}).join('');\r\n\t\t\t\ttotal[key] = v;\r\n\t\t\t\treturn total;\r\n\t\t\t}, {}))\r\n\t\t})\r\n\t}\r\n\t/**\r\n\t * @returns {Promise<String>}\r\n\t */\r\n\tasync getProjectPathPromise(){\r\n\t\treturn await window.myAPI.getProjectPath().then((data) => {\r\n\t\t\treturn data\r\n\t\t}).catch(error=>{\r\n\t\t\tconsole.error(error);\r\n\t\t\treturn '';\r\n\t\t})\r\n\t}\r\n\r\n\tprocessingElementPosition(element, target){\r\n\t\tlet rect;\r\n\t\tif(this.isElement(target, HTMLElement)){\r\n\t\t\trect = target.getBoundingClientRect();\r\n\t\t}else{\r\n\t\t\trect = target;\r\n\t\t}\r\n\r\n\t\tlet {x, y, height, width} = rect;\r\n\t\tlet elementTop = (y - element.clientHeight)\r\n\t\tlet elementLeft = (x - element.clientWidth)\r\n\t\tif(elementTop > 0){\r\n\t\t\telement.style.top = elementTop + 'px';\r\n\t\t}else{\r\n\t\t\telement.style.top = y + height + 'px';\r\n\t\t}\r\n\t\tif(elementLeft > 0){\r\n\t\t\telement.style.left = elementLeft + 'px'\r\n\t\t}else{\r\n\t\t\telement.style.left = x + width + 'px';\r\n\t\t}\r\n\t\t\r\n\t}\r\n    isElement(targetObject, checkClazz){\r\n        let check = Object.getPrototypeOf(targetObject)\r\n        let isElement = false;\r\n        while(check != undefined){\r\n\r\n            if(check?.constructor  == checkClazz){\r\n                isElement = true;\r\n                break;\r\n            }else{\r\n                check = Object.getPrototypeOf(check);\r\n            }\r\n        }\r\n        return isElement;\r\n    }\r\n\r\n\tshortenBytes(byte) {\r\n\t\tconst rank = byte > 0 ? Math.floor((Math.log2(byte)/10)) : 0;\r\n\t\tconst rankText = ( (rank > 0 ? 'KMGTPEZY'[rank - 1] : '') || (rank >= 9 ? 'Y' : '') ) + 'B';\r\n\t\tconst size = Math.floor(byte / Math.pow(1024, (rank >= 9 ? 8 : rank) ));\r\n\t\treturn {size, rank, rankText};\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t * @param {Array<string>} text \r\n\t */\r\n\tshowToastMessage(textList){\r\n\t\tlet div = Object.assign(document.createElement('div'), {\r\n\t\t\tclassName: 'toast_message'\r\n\t\t});\r\n\t\tdiv.append(...textList.map(e=>Object.assign(document.createElement('div'), {\r\n\t\t\ttextContent : e\r\n\t\t})));\r\n\t\tdocument.body.append(div);\r\n\t\tlet appendAwait = setInterval(()=>{\r\n\t\t\tif( ! div.isConnected) return;\r\n\t\t\tclearInterval(appendAwait);\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tdiv.style.opacity = 0;\r\n\t\t\t\tdiv.ontransitionend = () => {\r\n\t\t\t\t\tdiv.remove();\r\n\t\t\t\t}\r\n\t\t\t},1000)\r\n\t\t}, 50)\r\n\r\n\t}\r\n\r\n}","\r\nimport {roomHandler} from \"@handler/room/RoomHandler\"\r\n\r\nimport Image from \"@handler/editor/tools/Image\"\r\nimport Video from \"@handler/editor/tools/Video\"\r\nimport Resources from \"@handler/editor/tools/Resources\"\r\nimport FontSize from \"@handler/editor/tools/FontSize\"\r\n\r\nimport { accountHandler } from \"@handler/account/AccountHandler\"\r\nimport { s3EncryptionUtil } from \"@handler/S3EncryptionUtil\"\r\nimport {workspaceHandler} from \"@handler/workspace/WorkspaceHandler\"\r\nimport IndexedDBHandler from \"@handler/IndexedDBHandler\"\r\n\r\nimport common from \"@root/js/common\";\r\n\r\nFontSize.unit = 'rem';\r\nFontSize.min = 0.1;\r\nFontSize.max = 5;\r\nFontSize.weight = 0.1;\r\n\r\nexport default class CommonInit{\r\n\t#oneDay = 1000 * 60 * 60 * 24;\r\n\tconstructor(pageName){\r\n\t\t/*\r\n\t\tindexedDBHandler.open().then(()=>{\r\n\t\t\tindexedDBHandler.addItem({\r\n\t\t\t\tfileName:'test',\r\n\t\t\t\tlastModified:'1111',\r\n\t\t\t\ttargetId: '1',\r\n\t\t\t\tuploadType: 'abcd'\r\n\t\t\t});\r\n\t\t})\r\n\t\t*/\r\n\t\twindow.addEventListener('load', async () => {\r\n\t\t\tconst indexedDBHandler = new IndexedDBHandler({\r\n\t\t\t\tdbName: 'fileDB-main-page',\r\n\t\t\t\tstoreName: `s3Memory-main-page`,\r\n\t\t\t\tcolumnInfo: {\r\n\t\t\t\t\tfileName: ['fileName', 'fileName', {unique : true}],\r\n\t\t\t\t\toriginFileName: ['originFileName', 'originFileName'],\r\n\t\t\t\t\tfileData : ['fileData', 'fileData'],\r\n\t\t\t\t\tlastModified: ['lastModified', 'lastModified'],\r\n\t\t\t\t\tuploadType: ['uploadType', 'uploadType'],\r\n\t\t\t\t\troomId: ['roomId', 'roomId'],\r\n\t\t\t\t\tworkspaceId: ['workspaceId', 'workspaceId']\r\n\t\t\t\t},\r\n\t\t\t\tkeyPathNameList: ['fileName'],\r\n\t\t\t\tpkAutoIncrement : false\r\n\t\t\t});\r\n\t\t\tconst dbOpenPromise = indexedDBHandler.open();\r\n\r\n\t\t\tconst imageOrVideoCallback = async (targetTools) => {\r\n\t\t\t\tif(targetTools.hasAttribute('data-is_loading')){\r\n\t\t\t\t\tlet uploadLoading = targetTools.querySelector('[data-upload_loading]');\r\n\t\t\t\t\tif( ! uploadLoading){\r\n\t\t\t\t\t\tuploadLoading = Object.assign(document.createElement('div'), {\r\n\t\t\t\t\t\t\tclassName: 'upload_loading',\r\n\t\t\t\t\t\t\tinnerHTML: `\r\n\t\t\t\t\t\t\t<div class=\"upload_loading_container\">\r\n\t\t\t\t\t\t\t\t<span>  </span>\r\n\t\t\t\t\t\t\t\t<span class=\"status_text_elipsis\" data-status_text_elipsis></span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tuploadLoading.dataset.upload_loading = '';\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tuploadLoading.className = 'upload_loading'\r\n\t\t\t\t\t\tuploadLoading.querySelector('[data-status_text_elipsis]').className = 'upload_loading'; \r\n\t\t\t\t\t}\r\n\t\t\t\t\ttargetTools.append(uploadLoading);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tlet fileType;\r\n\t\t\t\tif(targetTools.constructor == Image){\r\n\t\t\t\t\tfileType = 'IMAGE';\r\n\t\t\t\t}else if(targetTools.constructor == Video){\r\n\t\t\t\t\tfileType = 'VIDEO';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tfileType = 'FILE';\r\n\t\t\t\t}\r\n\t\t\t\tconst isHasRememberFile = await new Promise(resolve => {\r\n\t\t\t\t\t/*if(targetTools.constructor == Resources){\r\n\t\t\t\t\t\tresolve({result: undefined});\r\n\t\t\t\t\t}*/\r\n\t\t\t\t\tdbOpenPromise.then(() => {\r\n\t\t\t\t\t\tnew Promise(res=>{\r\n\t\t\t\t\t\t\tindexedDBHandler.getList({\r\n\t\t\t\t\t\t\t\tpageNum : 1, \r\n\t\t\t\t\t\t\t\tpageSize : 99999, \r\n\t\t\t\t\t\t\t\treadOption: 'readwrite', \r\n\t\t\t\t\t\t\t\tcallback: (cursor)=>{\r\n\t\t\t\t\t\t\t\t\tif(cursor.value.lastModified < new Date().getTime() - this.#oneDay){\r\n\t\t\t\t\t\t\t\t\t\tcursor.delete();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}).then(result=>{\r\n\t\t\t\t\t\t\t\tres();\r\n\t\t\t\t\t\t\t\t/*let deleteTargetList = result.data.filter(e=>{\r\n\t\t\t\t\t\t\t\t\tlet lastModified = parseInt(e.lastModified);\r\n\t\t\t\t\t\t\t\t\treturn lastModified - this.#oneDay <= new Date().getTime() - this.#oneDay;\r\n\t\t\t\t\t\t\t\t}).map(e=>e.fileName);\r\n\t\t\t\t\t\t\t\tindexedDBHandler.deleteList(deleteTargetList).then((deleteResult) => {\r\n\t\t\t\t\t\t\t\t\tres();\r\n\t\t\t\t\t\t\t\t});*/\r\n\t\t\t\t\t\t\t}).catch((err)=>{\r\n\t\t\t\t\t\t\t\tconsole.error(err)\r\n\t\t\t\t\t\t\t\tres();\r\n\t\t\t\t\t\t\t})\t\r\n\t\t\t\t\t\t}).then(() => {\r\n\t\t\t\t\t\t\tindexedDBHandler.getItem(targetTools.dataset.new_file_name).then(result=>{\r\n\t\t\t\t\t\t\t\tresolve(result);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\r\n\t\t\t\tif(isHasRememberFile.result){\r\n\t\t\t\t\tlet url = window.URL.createObjectURL(isHasRememberFile.result.fileData, targetTools.dataset.content_type)\r\n\t\t\t\t\ttargetTools.dataset.url = url;\r\n\t\t\t\t\tif(targetTools.image){\r\n\t\t\t\t\t\ttargetTools.image.src = url;\r\n\t\t\t\t\t}else if(targetTools.video){\r\n\t\t\t\t\t\ttargetTools.video.src = url;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t//targetTools.resources.data = url;\r\n\t\t\t\t\t\ttargetTools.resourcesUrl = url;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet startPromise = new Promise(resolve => {\r\n\r\n\t\t\t\t\tlet {size, rank, rankText} = common.shortenBytes(targetTools.dataset.size);\r\n\r\n\t\t\t\t\tif(size >= 10 && rank >= 2){\r\n\t\t\t\t\t\tlet filePreview = targetTools.querySelector('[data-file_preview]');\r\n\t\t\t\t\t\tif( ! filePreview){\r\n\t\t\t\t\t\t\tfilePreview = Object.assign(document.createElement('div'), {\r\n\t\t\t\t\t\t\t\tclassName: 'file_preview',\r\n\t\t\t\t\t\t\t\tinnerHTML: `\r\n\t\t\t\t\t\t\t\t<div class=\"file_preview_container\" data-file_preview_container>\r\n\t\t\t\t\t\t\t\t\t<div>10MB        .</div>\r\n\t\t\t\t\t\t\t\t\t<div>        ,      .</div>\r\n\t\t\t\t\t\t\t\t\t<div>   : ${size}${rankText}</div>\r\n\t\t\t\t\t\t\t\t\t<button class=\"file_preview_button\" data-file_preview_button type=\"button\"></button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tfilePreview.dataset.file_preview = '';\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tfilePreview.querySelector('[data-file_preview_container]').className = 'file_preview_container'\r\n\t\t\t\t\t\t\tfilePreview.querySelector('[data-file_preview_button]').className = 'file_preview_button'; \r\n\t\t\t\t\t\t\tfilePreview.className = 'file_preview';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfilePreview.style.display = 'none';\r\n\t\t\t\t\t\tResources.resourcesCallback = ({status, resources}) => {\r\n\t\t\t\t\t\t\tif(status == 'error'){\r\n\t\t\t\t\t\t\t\tfilePreview.style.display = '';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfilePreview.onclick = (event) => {\r\n\t\t\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfilePreview.dataset.visibility_not = '';\r\n\r\n\t\t\t\t\t\ttargetTools.append(filePreview)\r\n\r\n\t\t\t\t\t\tlet filePreviewButton = filePreview.querySelector('.file_preview_button');\r\n\t\t\t\t\t\t//document.body.onclick = (event) =>{ event}\r\n\t\t\t\t\t\tfilePreviewButton.onclick = (event) => {\r\n\r\n\t\t\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\t\t\tfilePreviewButton.textContent = '';\r\n\t\t\t\t\t\t\tfilePreviewButton.className = 'loading_rotate';\r\n\t\t\t\t\t\t\tresolve(filePreview);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tstartPromise.then((filePreview) => {\r\n\t\t\t\t\tdocument.body.closest\r\n\t\t\t\t\tlet getSignData = `${roomHandler.roomId}:${workspaceHandler.workspaceId}:${targetTools.dataset.new_file_name}:${targetTools.closest('[data-account_name]')?.dataset.account_name}`\r\n\t\t\t\t\ts3EncryptionUtil.callS3PresignedUrl(window.myAPI.s3.generateSecurityGetObjectPresignedUrl, getSignData, {uploadType : targetTools.dataset.upload_type, fileType})\r\n\t\t\t\t\t.then( (result) => {\r\n\t\t\t\t\t\tif(! result){\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet {data, encDncKeyPair} = result;\r\n\t\t\t\t\t\tlet totalLen = 0;\r\n\t\t\t\t\t\tlet size = parseInt(targetTools.dataset.size);\r\n\t\t\t\t\t\tlet progress = Object.assign(document.createElement('progress'), {\r\n\t\t\t\t\t\t\tmax: 100,\r\n\t\t\t\t\t\t\tvalue : 0\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif(filePreview){\r\n\t\t\t\t\t\t\tlet container = filePreview.querySelector('.file_preview_container');\r\n\t\t\t\t\t\t\tcontainer.append(progress)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn Promise.all([\r\n\t\t\t\t\t\t\ts3EncryptionUtil.convertBase64ToBuffer(data.encryptionKey).then( async (buffer) => {\r\n\t\t\t\t\t\t\t\treturn s3EncryptionUtil.decryptMessage(encDncKeyPair.privateKey, buffer, s3EncryptionUtil.secretAlgorithm)\r\n\t\t\t\t\t\t\t\t\t.then(buf=>String.fromCharCode(...new Uint8Array(buf)))\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\ts3EncryptionUtil.convertBase64ToBuffer(data.encryptionMd).then( async (buffer) => {\r\n\t\t\t\t\t\t\t\treturn s3EncryptionUtil.decryptMessage(encDncKeyPair.privateKey, buffer, s3EncryptionUtil.secretAlgorithm)\r\n\t\t\t\t\t\t\t\t\t.then(buf=>String.fromCharCode(...new Uint8Array(buf)))\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t]).then( async ([k,m]) => {\r\n\t\t\t\t\t\t\treturn fetch(data.presignedUrl, {\r\n\t\t\t\t\t\t\t\tmethod:\"GET\",\r\n\t\t\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t\t\t'Content-Encoding' : 'base64',\r\n\t\t\t\t\t\t\t\t\t'Content-Type' : 'application/octet-stream',\r\n\t\t\t\t\t\t\t\t\t'x-amz-server-side-encryption-customer-algorithm': 'AES256',\r\n\t\t\t\t\t\t\t\t\t'x-amz-server-side-encryption-customer-key': k,\r\n\t\t\t\t\t\t\t\t\t'x-amz-server-side-encryption-customer-key-md5': m,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}).then(async response=> {\r\n\t\t\t\t\t\t\t\tif(response.status != 200 && response.status != 201){\r\n\t\t\t\t\t\t\t\t\tthrow new Error('s3 connect failed')\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn response.body;\r\n\t\t\t\t\t\t\t}).then((body) => {\r\n\t\t\t\t\t\t\t\tconst reader = body.getReader();\r\n\t\t\t\t\t\t\t\treturn new ReadableStream(\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tstart(controller) {\r\n\t\t\t\t\t\t\t\t\t\t\treturn pump();\r\n\t\t\t\t\t\t\t\t\t\t\tfunction pump() {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn reader.read().then(({ done, value }) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotalLen += value?.length || 0;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tprogress.value = (totalLen / size) * 100 \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// When no more data needs to be consumed, close the stream\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (done) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontroller.close();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// Enqueue the next data chunk into our target stream\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontroller.enqueue(value);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn pump();\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\tlet newBlob = new Blob([buffer], { type: imageEditor.dataset.content_type });\r\n\t\t\t\t\t\t\t\tlet imgUrl = window.URL.createObjectURL(newBlob);\r\n\t\t\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.then(stream => new Response(stream))\r\n\t\t\t\t\t\t\t.then(res => res.blob())\r\n\t\t\t\t\t\t\t.then(async blob => {\r\n\t\t\t\t\t\t\t\tlet newBlob = new Blob([blob], { type: targetTools.dataset.content_type });\r\n\t\t\t\t\t\t\t\treturn dbOpenPromise.then( async () => {\r\n\t\t\t\t\t\t\t\t\treturn indexedDBHandler.addItem({\r\n\t\t\t\t\t\t\t\t\t\tfileName: targetTools.dataset.new_file_name,\r\n\t\t\t\t\t\t\t\t\t\toriginFileName: targetTools.dataset.name,\r\n\t\t\t\t\t\t\t\t\t\tfileData: newBlob,\r\n\t\t\t\t\t\t\t\t\t\tlastModified: new Date().getTime(),\r\n\t\t\t\t\t\t\t\t\t\tuploadType: targetTools.dataset.upload_type,\r\n\t\t\t\t\t\t\t\t\t\troomId: roomHandler.roomId,\r\n\t\t\t\t\t\t\t\t\t\tworkspaceId: workspaceHandler.workspaceId\r\n\t\t\t\t\t\t\t\t\t}).then(()=>{\r\n\t\t\t\t\t\t\t\t\t\treturn window.URL.createObjectURL(newBlob)\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.then(url => {\r\n\t\t\t\t\t\t\t\t//targetTools.dataset.url = url;\r\n\t\t\t\t\t\t\t\tif(targetTools.image){\r\n\t\t\t\t\t\t\t\t\ttargetTools.image.src = url;\r\n\t\t\t\t\t\t\t\t}else if(targetTools.video){\r\n\t\t\t\t\t\t\t\t\ttargetTools.video.src = url;\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t//targetTools.resources.data = url;\r\n\t\t\t\t\t\t\t\t\ttargetTools.resourcesUrl = url;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif(filePreview){\r\n\t\t\t\t\t\t\t\t\tfilePreview.replaceChildren();\r\n\t\t\t\t\t\t\t\t\tfilePreview.parentElement.removeChild(filePreview);\r\n\t\t\t\t\t\t\t\t\tfilePreview.remove();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch(err=>{\r\n\t\t\t\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\t\t\t\tconsole.error(err.message)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tImage.customImageCallback = (imageEditor) => imageOrVideoCallback(imageEditor)\r\n\t\t\tVideo.customVideoCallback = (videoEditor) => imageOrVideoCallback(videoEditor)\r\n\t\t\tResources.customResourcesCallback = (resourcesEditor) => imageOrVideoCallback(resourcesEditor)\r\n\t\t});\t\r\n\r\n\r\n\t\tconst visibleObserver = new IntersectionObserver((entries, observer) => {\r\n\t\t\tentries.forEach(entry =>{\r\n\t\t\t\tlet {isIntersecting, target} = entry;\r\n\t\t\t\tif(target.hasAttribute('slot') || target.hasAttribute('data-visibility_not')){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (isIntersecting){\r\n\t\t\t\t\ttarget.style.visibility = '';\r\n\t\t\t\t\ttarget.style.opacity = '';\r\n\t\t\t\t\ttarget.dataset.visibility = 'v';\r\n\t\t\t\t}else{\r\n\t\t\t\t\ttarget.style.visibility = 'hidden';\r\n\t\t\t\t\ttarget.style.opacity = 0;\r\n\t\t\t\t\ttarget.dataset.visibility = 'h';\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}, {\r\n\t\t\tthreshold: 0.01,\r\n\t\t\troot: document\r\n\t\t});\r\n\t\tnew MutationObserver( (mutationList, observer) => {\r\n\t\t\tmutationList.forEach((mutation) => {\r\n\t\t\t\tlet {addedNodes, removedNodes} = mutation;\r\n\t\t\t\tnew Promise(resolve=> {\r\n\t\t\t\t\taddedNodes.forEach(async e => {\r\n\t\t\t\t\t\tif(e.nodeType !== Node.ELEMENT_NODE || (e.nodeType === Node.ELEMENT_NODE && e.hasAttribute('data-is_not_visible_target')) || e.isContentEditable){\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnew Promise(res=>{\r\n\t\t\t\t\t\t\tvisibleObserver.observe(e);\r\n\t\t\t\t\t\t\tres();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t})\r\n\t\t\t\tnew Promise(resolve=> {\r\n\t\t\t\t\tremovedNodes.forEach(async e => {\r\n\t\t\t\t\t\tif(e.nodeType !== Node.ELEMENT_NODE || (e.nodeType === Node.ELEMENT_NODE && e.hasAttribute('data-is_not_visible_target')) || e.isContentEditable){\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnew Promise(res=>{\r\n\t\t\t\t\t\t\tvisibleObserver.unobserve(e);\r\n\t\t\t\t\t\t\tres();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}).observe(document, {\r\n\t\t\tchildList: true,\r\n\t\t\tsubtree: true\r\n\t\t})\r\n\r\n\r\n\t}\r\n}","/**\r\n * web\r\n */\r\nimport { ipcRenderer, myAPI } from \"./../../../browser/preload/preload\"\r\nwindow.myAPI = myAPI;\r\n\r\nimport CommonInit from \"@root/js/CommonInit\";\r\n\r\nnew CommonInit('multipleNoticeBoard');\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", (event) => {\r\n\tlet workspaceIdResolve;\r\n\tlet workspaceIdPromise = new Promise(resolve=>{\r\n\t\tworkspaceIdResolve = resolve;\r\n\t})\r\n\twindow.myAPI.getWorkspaceId().then(workspaceId=>{\r\n\t\tif(workspaceId != undefined){\r\n\t\t\tworkspaceIdResolve(workspaceId);\r\n\t\t}\r\n\t\twindow.myAPI.event.electronEventTrigger.addElectronEventListener('workspaceChange', event => {\r\n\t\t\tlet newWorkspaceId = event.workspaceId\r\n\t\t\tif(workspaceId == newWorkspaceId){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(newWorkspaceId != undefined){\r\n\t\t\t\tworkspaceIdResolve(newWorkspaceId)\r\n\t\t\t}\r\n\t\t\t//event.workspaceId\r\n\t\t})\r\n\t})\r\n\tworkspaceIdPromise.then(workspaceId => {\r\n\t\tdocument.querySelector('#main').append(\r\n            noticeBoardDetail.element\r\n\t\t)\r\n        noticeBoardDetail.element.dataset.is_resize = false;\r\n        noticeBoardDetail.element.grow = 1;\r\n\r\n        window.myAPI.event.electronEventTrigger.addElectronEventListener('noticeBoardChange', event => {\r\n            noticeBoardHandler.noticeBoardId = event.noticeBoardId;\r\n        })\r\n\r\n\t\twindow.myAPI.stream.initWorkspaceStream({workspaceId});\r\n\t})\r\n});\r\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","bind","fn","thisArg","apply","arguments","toString","getPrototypeOf","kindOf","cache","create","thing","str","slice","toLowerCase","kindOfTest","type","typeOfTest","isArray","Array","isUndefined","isArrayBuffer","isString","isFunction","isNumber","isObject","isPlainObject","val","iterator","isDate","isFile","isBlob","isFileList","isURLSearchParams","forEach","allOwnKeys","i","l","length","keys","getOwnPropertyNames","len","findKey","_key","_global","globalThis","self","window","global","isContextDefined","context","isTypedArray","TypedArray","Uint8Array","isHTMLForm","isRegExp","reduceDescriptors","reducer","descriptors","getOwnPropertyDescriptors","reducedDescriptors","descriptor","name","ret","defineProperties","ALPHA","DIGIT","ALPHABET","ALPHA_DIGIT","toUpperCase","isAsyncFn","isBuffer","constructor","isFormData","kind","FormData","append","isArrayBufferView","result","ArrayBuffer","isView","buffer","isBoolean","isStream","pipe","merge","caseless","this","assignValue","targetKey","extend","a","b","trim","replace","stripBOM","content","charCodeAt","inherits","superConstructor","props","assign","toFlatObject","sourceObj","destObj","filter","propFilter","merged","endsWith","searchString","position","String","undefined","lastIndex","indexOf","toArray","arr","forEachEntry","next","done","pair","matchAll","regExp","matches","exec","push","hasOwnProp","freezeMethods","writable","set","Error","toObjectSet","arrayOrString","delimiter","define","split","toCamelCase","m","p1","p2","noop","toFiniteNumber","defaultValue","Number","isFinite","generateString","size","alphabet","Math","random","isSpecCompliantForm","toJSONObject","stack","visit","source","target","reducedValue","isThenable","then","catch","AxiosError","message","code","config","request","response","captureStackTrace","utils","toJSON","description","number","fileName","lineNumber","columnNumber","status","from","error","customProps","axiosError","cause","isVisitable","removeBrackets","renderKey","path","dots","concat","map","token","join","predicates","test","formData","options","TypeError","metaTokens","indexes","option","visitor","defaultVisitor","useBlob","Blob","convertValue","toISOString","Buffer","JSON","stringify","some","isFlatArray","el","index","exposedHelpers","build","pop","encode","charMap","encodeURIComponent","match","AxiosURLSearchParams","params","_pairs","encoder","_encode","buildURL","url","serializeFn","serialize","serializedParams","hashmarkIndex","handlers","use","fulfilled","rejected","synchronous","runWhen","eject","id","clear","h","silentJSONParsing","forcedJSONParsing","clarifyTimeoutError","isBrowser","classes","URLSearchParams","protocols","hasBrowserEnv","document","hasStandardBrowserEnv","product","navigator","hasStandardBrowserWebWorkerEnv","WorkerGlobalScope","importScripts","buildPath","isNumericKey","isLast","arrayToObject","entries","parsePropPath","defaults","transitional","adapter","transformRequest","data","headers","contentType","getContentType","hasJSONContentType","isObjectPayload","setContentType","platform","helpers","isNode","toURLEncodedForm","formSerializer","_FormData","env","rawValue","parser","parse","e","stringifySafely","transformResponse","JSONRequested","responseType","strictJSONParsing","ERR_BAD_RESPONSE","timeout","xsrfCookieName","xsrfHeaderName","maxContentLength","maxBodyLength","validateStatus","common","method","ignoreDuplicateOf","$internals","normalizeHeader","header","normalizeValue","matchHeaderValue","isHeaderNameFilter","AxiosHeaders","valueOrRewrite","rewrite","setHeader","_value","_header","_rewrite","lHeader","setHeaders","rawHeaders","parsed","line","substring","parseHeaders","tokens","tokensRE","parseTokens","has","matcher","deleted","deleteHeader","normalize","format","normalized","w","char","formatHeader","targets","asStrings","first","computed","accessor","accessors","defineAccessor","accessorName","methodName","arg1","arg2","arg3","configurable","buildAccessors","mapped","headerValue","transformData","fns","isCancel","__CANCEL__","CanceledError","ERR_CANCELED","write","expires","domain","secure","cookie","Date","toGMTString","read","RegExp","decodeURIComponent","remove","now","buildFullPath","baseURL","requestedURL","relativeURL","combineURLs","msie","userAgent","urlParsingNode","createElement","originURL","resolveURL","href","setAttribute","protocol","host","search","hash","hostname","port","pathname","charAt","location","requestURL","samplesCount","min","bytes","timestamps","firstSampleTS","head","tail","chunkLength","startedAt","bytesCount","passed","round","progressEventReducer","listener","isDownloadStream","bytesNotified","_speedometer","loaded","total","lengthComputable","progressBytes","rate","progress","estimated","event","knownAdapters","http","xhr","XMLHttpRequest","Promise","resolve","reject","requestData","requestHeaders","onCanceled","withXSRFToken","cancelToken","unsubscribe","signal","removeEventListener","Boolean","auth","username","password","unescape","btoa","fullPath","onloadend","responseHeaders","getAllResponseHeaders","ERR_BAD_REQUEST","floor","settle","err","responseText","statusText","open","paramsSerializer","onreadystatechange","readyState","responseURL","setTimeout","onabort","ECONNABORTED","onerror","ERR_NETWORK","ontimeout","timeoutErrorMessage","ETIMEDOUT","isURLSameOrigin","xsrfValue","cookies","setRequestHeader","withCredentials","onDownloadProgress","addEventListener","onUploadProgress","upload","cancel","abort","subscribe","aborted","parseProtocol","send","renderReason","reason","isResolvedHandle","adapters","nameOrAdapter","rejectedReasons","reasons","state","s","throwIfCancellationRequested","throwIfRequested","dispatchRequest","headersToObject","mergeConfig","config1","config2","getMergedValue","mergeDeepProperties","valueFromConfig2","defaultToConfig2","mergeDirectKeys","mergeMap","timeoutMessage","decompress","beforeRedirect","transport","httpAgent","httpsAgent","socketPath","responseEncoding","configValue","VERSION","validators","deprecatedWarnings","validator","version","formatMessage","opt","desc","opts","ERR_DEPRECATED","console","warn","assertOptions","schema","allowUnknown","ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","Axios","instanceConfig","interceptors","configOrUrl","boolean","function","contextHeaders","requestInterceptorChain","synchronousRequestInterceptors","interceptor","unshift","responseInterceptorChain","promise","chain","newConfig","onFulfilled","onRejected","getUri","generateHTTPMethod","isForm","CancelToken","executor","resolvePromise","_listeners","onfulfilled","_resolve","splice","c","HttpStatusCode","Continue","SwitchingProtocols","Processing","EarlyHints","Ok","Created","Accepted","NonAuthoritativeInformation","NoContent","ResetContent","PartialContent","MultiStatus","AlreadyReported","ImUsed","MultipleChoices","MovedPermanently","Found","SeeOther","NotModified","UseProxy","Unused","TemporaryRedirect","PermanentRedirect","BadRequest","Unauthorized","PaymentRequired","Forbidden","NotFound","MethodNotAllowed","NotAcceptable","ProxyAuthenticationRequired","RequestTimeout","Conflict","Gone","LengthRequired","PreconditionFailed","PayloadTooLarge","UriTooLong","UnsupportedMediaType","RangeNotSatisfiable","ExpectationFailed","ImATeapot","MisdirectedRequest","UnprocessableEntity","Locked","FailedDependency","TooEarly","UpgradeRequired","PreconditionRequired","TooManyRequests","RequestHeaderFieldsTooLarge","UnavailableForLegalReasons","InternalServerError","NotImplemented","BadGateway","ServiceUnavailable","GatewayTimeout","HttpVersionNotSupported","VariantAlsoNegotiates","InsufficientStorage","LoopDetected","NotExtended","NetworkAuthenticationRequired","axios","createInstance","defaultConfig","instance","toFormData","Cancel","all","promises","spread","callback","isAxiosError","payload","formToJSON","getAdapter","default","log","__isLocal","top","windowUtil","isLogin","__serverApi","responseIsOk","responseCheck","accountController","loginProcessing","param","reduce","k","v","post","getAccountInfo","updateSimpleAccountInfo","apiS3Controller","generateSecurityPutObjectPresignedUrl","generateSecurityGetObjectPresignedUrl","generateGetObjectPresignedUrl","chattingController","sendChatting","deleteChatting","searchChattingList","workspaceId","roomId","queryString","emoticonController","createEmotionReaction","deleteEmotion","getIsReaction","eventStreamController","prevWorkspaceId","initWorkspaceStream","EventSource","eventSendObj","close","onmessage","lastEventId","origin","debug","eventName","serverSentStreamType","webEventSend","onopen","success","noticeBoardController","createNoticeBoardGroup","createNoticeBoard","createNoticeBoardDetail","searchNoticeBoardList","searchNoticeBoardDetailList","noticeBoardId","deleteNoticeBoard","deleteNoticeBoardGroup","updateNoticeBoardOrder","updateNoticeBoardDetailOrder","roomController","createRoom","createMySelfRoom","isNaN","parseInt","createRoomInAccount","updateRoomInAccoutOrder","createRoomFavorites","updateRoomFavorites","searchRoomList","searchMyJoinedRoomList","searchRoomFavoritesList","searchRoomJoinedAccountList","getRoomDetail","isRoomFavorites","workspaceController","searchWorkspaceMyJoined","page","searchNameSpecificList","workspaceName","searchWorkspaceInAccount","getWorkspaceDetail","getWorkspaceInAccountCount","createPermitWokrspaceInAccount","createGiveAdmin","searchPermitRequestList","getIsAdmin","createWorkspaceJoined","createWorkspace","permission","Notification","requestPermission","globalHandler","loadInitRoomId","ipcRenderer","loadInitNoticeBoardId","localStorage","getItem","t","OPTION_NAME","resetWorkspace","setOption","OPTION_VALUE","UPDATE_AT","getTime","CREATE_AT","setItem","values","getOption","flatMap","clazz","Function","invoke","on","electronEventTrigger","objectEventListener","onEvent","trigger","addElectronEventListener","removeElectronEventListener","async","res","myAPI","getProjectPath","createSubWindow","pageName","pageId","closeRequest","maximizeRequest","unmaximizeRequest","minimizeRequest","restoreRequest","isMaximize","resetWorkspaceId","getWorkspaceId","notifications","noti","fullName","body","icon","onclick","html","innerHTML","style","right","bottom","borderRadius","background","width","height","zIndex","whiteSpace","overflowWrap","display","flexDirection","alignItems","justifyContent","fontSize","paddingBottom","optionName","getServerUrl","pageChange","changeLoginPage","changeWokrspacePage","changeMainPage","stream","account","chatting","workspace","room","searchRoom","noticeBoard","s3","emoticon","roomHandler","addRoomIdChangeListener","runTheFirst","removeRoomIdChangeListener","roomChangeAwait","ToolHandler","identity","selection","getSelection","activeElement","classList","contains","findTarget","find","containsNode","dataset","tool_status","isLastTool","tool","isPrototypeOf","at","extendsElement","defaultClass","isInline","toolButton","nodeType","Node","ELEMENT_NODE","connectedFriends","friend","isConnected","Line","static","toolHandler","createDefaultStyle","textContent","defaultStyle","insertDefaultStyle","sheet","insertRule","getLine","element","parentElement","closest","getRootLine","parent","getTool","TargetTool","querySelector","isElementTextEmpty","sty","getComputedStyle","visibility","opacity","innerText","lineElement","div","add","className","is_line","range","surroundContents","startOffset","endOffset","startContainer","endContainer","startNodeToPrevNodeIndex","childNodes","findIndex","isFirstNodeToStart","nodeList","targetNode","iter","createNodeIterator","NodeFilter","SHOW_TEXT","nextNode","clone","cloneNode","after","prepend","endLine","fragment","extractContents","setStart","setEnd","targetStartLineItem","nextSibling","itemRemoveList","itemAppendList","TEXT_NODE","appendData","nextTool","nextItem","middleTargetTool","targetLine","nextElementSibling","selectNodeContents","endTool","targetEndLineItem","previousSibling","applyTool","nodeName","shadowRoot","leftText","rightText","targetWrap","targetText","commonAncestorContainer","offset","leftList","rightList","cloneContents","cloneRange","selectNode","list","Ignore","leftElement","rightElement","cloneLeft","cloneRight","createTextNode","appendList","before","startTextNode","endTextNode","startLeftText","endRightText","startNextSibling","startPrevSibling","endNextSibling","endPrevSibling","leftTool","nextLine","rightTool","cancelTool","isCollapsed","anchorNode","anchorOffset","getRangeAt","lookAtMe","isContentEditable","focus","setPosition","FreedomInterface","HTMLElement","globalClickEventPromiseResolve","globalKeydownEventPromiseResolve","globalSelectionChangeEventPromiseResolve","globalMouseEvent","lastClickElementPath","composedPath","globalClickEventPromise","globalKeydownEventPromise","globalSelectionChangeEventPromise","isMouseInnerElement","clientX","clientY","x","y","getBoundingClientRect","globalKeydownEventListener","oldEvent","newEvent","simpleObserver","globalSelectionChangeEventListener","outClickElementListener","isMouseOut","processingElementPosition","elementTop","clientHeight","elementLeft","clientWidth","left","freeze","Tool","parentEditor","MutationObserver","mutationList","observer","mutation","addedNodes","removedNodes","resultList","lastItemIndex","createLine","replaceChildren","connectedChildAfterCallback","disconnectedChildAfterCallback","deleteOption","DeleteOption","EMPTY_CONTENT_IS_DELETE","super","disconnect","observe","childList","removeFun","EMPTY_CONTENT_IS_NOT_DELETE","isToolEmpty","thisLine","connectedCallback","connectedAfterCallback","parentLine","getNextLine","connectedAfterOnlyOneCallback","disconnectedCallback","disconnectedAfterCallback","isCursor","ImageBox","createStyle","hasAttribute","is_shft","removeAttribute","deltaY","scrollTo","scrollLeft","passive","querySelectorAll","image","resizeRememberTarget","eventPath","ctrlKey","is_ctrl","oninputEvent","addImageHoverEvent","keyDescription","onmouseenter","src","root","getRootNode","appendAwait","setInterval","complete","toggleAttribute","falsh","clearInterval","onmouseleave","flash","transition","flashAwait","ontransitionend","labels","prevValue","oninput","onkeydown","onkeyup","onblur","onwheel","preventDefault","includes","imageRect","download","newWindow","image_name","imageBox","insertStyle","Image","accept","selectedFile","title","click","onchange","imgLoadEndCallback","startsWith","base64","customImageCallback","fetch","blob","imgUrl","URL","createObjectURL","files","DataTransfer","last_modified","lastModified","content_type","attachShadow","mode","createDefaultContent","wrap","slot","aticle","addedList","revokeObjectURL","draggable","imageContanier","onload","createDescription","tagName","file_name","open_status","createSlot","contentEditable","randomId","crypto","getRandomValues","Uint32Array","padStart","slotName","VideoBox","video","addVideoHoverEvent","rect","videoRect","video_name","videoBox","Video","videoLoadEndCallback","loop","controls","customVideoCallback","videoUrl","videoContanier","file","canPlayType","lastIndexOf","videoIsNotWorking","onloadeddata","play","descriptionName","alert","Resources","resourcesCallback","sizeLimitOverCallback","resources","customResourcesCallback","resources_name","resourcesContanier","contentWindow","contentVisibility","containIntrinsicSize","downloadButton","previewButton","resourcesUrl","FontSizeBox","autocomplete","placeholder","item","fontSizeObject","searchWrap","fontElementList","max","li","unit","removeAllRanges","addRange","applyCallback","sampleText","fixedLength","weight","parseFloat","toFixed","step","rangeCount","rangeCloneContent","fontSizeBox","selectedFont","FontSize","fontSizeBoxContainer","font_size","AccountHandler","searchAccountInfo","accountInfoChangeAcceptPromise","accountInfoChangeAcceptEventListener","oldData","newData","accountInfo","s3EncryptionUtil","TextEncoder","decoder","TextDecoder","signAlgorithm","modulusLength","publicExponent","secretAlgorithm","generateKeyPair","algorithm","keyUsages","subtle","generateKey","keySign","privateKey","sign","signature","decryptMessage","ciphertext","decrypt","convertBase64ToBuffer","arrayBuffer","exportKey","exportType","fromCharCode","exportKeyString","callS3PresignedUrl","callFunction","signData","callFunctionParam","signKeyPair","encDncKeyPair","publicKey","exportSignKey","exportEncKey","fromCodePoint","dataKey","fetchPutObject","putUrl","md5","fileData","workspaceHandler","addWorkspaceIdChangedListener","startCallbackPromise","removeWorkspaceIdChangedListener","IndexedDBHandler","isOpen","dbName","columnInfo","storeName","keyPathNameList","pkAutoIncrement","idx","dbOpenRequest","indexedDB","DB_NAME","onupgradeneeded","upgradeneeded","onsuccess","isNewAddStore","objectStoreNames","DB_STORE_NAME","isNeedChangeIndex","store","transaction","objectStore","indexNamesMapper","indexNames","indexName","newVersion","closeResult","secondOpenRequest","onblocked","onclose","COLUMN_INFO","template","oldVersion","keyPath","createObjectStore","autoIncrement","column","createIndex","indexNameList","oldIndexCheckMapper","deleteIndex","addItem","put","commit","oncomplete","getList","pageNum","pageSize","readOption","start","isEnableAdvanced","count","openCursor","cursor","advance","continue","deleteList","idList","successCount","failedCount","delete","deleteDatabase","deleteReuqest","jsonToSaveElementDataset","underbarKeyNameObject","underbarNameToCamelName","getProjectPathPromise","isElement","targetObject","checkClazz","check","shortenBytes","byte","rank","log2","rankText","pow","showToastMessage","textList","indexedDBHandler","unique","originFileName","uploadType","dbOpenPromise","imageOrVideoCallback","targetTools","uploadLoading","upload_loading","fileType","isHasRememberFile","new_file_name","filePreview","file_preview","stopPropagation","visibility_not","filePreviewButton","getSignData","account_name","upload_type","totalLen","encryptionKey","buf","encryptionMd","presignedUrl","reader","getReader","ReadableStream","controller","pump","enqueue","Response","newBlob","removeChild","imageEditor","videoEditor","resourcesEditor","visibleObserver","IntersectionObserver","entry","isIntersecting","threshold","unobserve","subtree","workspaceIdResolve","workspaceIdPromise","newWorkspaceId","noticeBoardDetail","is_resize","grow","noticeBoardHandler"],"sourceRoot":""}